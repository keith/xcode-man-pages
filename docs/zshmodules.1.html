<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>ZSHMODULES(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ZSHMODULES(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">ZSHMODULES(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">zshmodules - zsh loadable modules</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Some optional parts of zsh are in modules, separate from the core
    of the shell. Each of these modules may be linked in to the shell at build
    time, or can be dynamically linked while the shell is running if the
    installation supports this feature. Modules are linked at runtime with the
    <b>zmodload</b> command, see <i>zshbuiltins</i>(1).</p>
<p class="Pp">The modules that are bundled with the zsh distribution are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zsh/attr</b></dt>
  <dd>Builtins for manipulating extended attributes (xattr).</dd>
  <dt id="zsh/cap"><a class="permalink" href="#zsh/cap"><b>zsh/cap</b></a></dt>
  <dd>Builtins for manipulating POSIX.1e (POSIX.6) capability (privilege)
    sets.</dd>
  <dt id="zsh/clone"><a class="permalink" href="#zsh/clone"><b>zsh/clone</b></a></dt>
  <dd>A builtin that can clone a running shell onto another terminal.</dd>
  <dt id="zsh/compctl"><a class="permalink" href="#zsh/compctl"><b>zsh/compctl</b></a></dt>
  <dd>The <b>compctl</b> builtin for controlling completion.</dd>
  <dt id="zsh/complete"><a class="permalink" href="#zsh/complete"><b>zsh/complete</b></a></dt>
  <dd>The basic completion code.</dd>
  <dt id="zsh/complist"><a class="permalink" href="#zsh/complist"><b>zsh/complist</b></a></dt>
  <dd>Completion listing extensions.</dd>
  <dt id="zsh/computil"><a class="permalink" href="#zsh/computil"><b>zsh/computil</b></a></dt>
  <dd>A module with utility builtins needed for the shell function based
      completion system.</dd>
  <dt id="zsh/curses"><a class="permalink" href="#zsh/curses"><b>zsh/curses</b></a></dt>
  <dd>curses windowing commands</dd>
  <dt id="zsh/datetime"><a class="permalink" href="#zsh/datetime"><b>zsh/datetime</b></a></dt>
  <dd>Some date/time commands and parameters.</dd>
  <dt id="zsh/db/gdbm"><a class="permalink" href="#zsh/db/gdbm"><b>zsh/db/gdbm</b></a></dt>
  <dd>Builtins for managing associative array parameters tied to GDBM
    databases.</dd>
  <dt id="zsh/deltochar"><a class="permalink" href="#zsh/deltochar"><b>zsh/deltochar</b></a></dt>
  <dd>A ZLE function duplicating EMACS' <b>zap-to-char</b>.</dd>
  <dt id="zsh/example"><a class="permalink" href="#zsh/example"><b>zsh/example</b></a></dt>
  <dd>An example of how to write a module.</dd>
  <dt id="zsh/files"><a class="permalink" href="#zsh/files"><b>zsh/files</b></a></dt>
  <dd>Some basic file manipulation commands as builtins.</dd>
  <dt id="zsh/langinfo"><a class="permalink" href="#zsh/langinfo"><b>zsh/langinfo</b></a></dt>
  <dd>Interface to locale information.</dd>
  <dt id="zsh/mapfile"><a class="permalink" href="#zsh/mapfile"><b>zsh/mapfile</b></a></dt>
  <dd>Access to external files via a special associative array.</dd>
  <dt id="zsh/mathfunc"><a class="permalink" href="#zsh/mathfunc"><b>zsh/mathfunc</b></a></dt>
  <dd>Standard scientific functions for use in mathematical evaluations.</dd>
  <dt id="zsh/nearcolor"><a class="permalink" href="#zsh/nearcolor"><b>zsh/nearcolor</b></a></dt>
  <dd>Map colours to the nearest colour in the available palette.</dd>
  <dt id="zsh/newuser"><a class="permalink" href="#zsh/newuser"><b>zsh/newuser</b></a></dt>
  <dd>Arrange for files for new users to be installed.</dd>
  <dt id="zsh/parameter"><a class="permalink" href="#zsh/parameter"><b>zsh/parameter</b></a></dt>
  <dd>Access to internal hash tables via special associative arrays.</dd>
  <dt id="zsh/pcre"><a class="permalink" href="#zsh/pcre"><b>zsh/pcre</b></a></dt>
  <dd>Interface to the PCRE library.</dd>
  <dt id="zsh/param/private"><a class="permalink" href="#zsh/param/private"><b>zsh/param/private</b></a></dt>
  <dd>Builtins for managing private-scoped parameters in function context.</dd>
  <dt id="zsh/regex"><a class="permalink" href="#zsh/regex"><b>zsh/regex</b></a></dt>
  <dd>Interface to the POSIX regex library.</dd>
  <dt id="zsh/sched"><a class="permalink" href="#zsh/sched"><b>zsh/sched</b></a></dt>
  <dd>A builtin that provides a timed execution facility within the shell.</dd>
  <dt id="zsh/net/socket"><a class="permalink" href="#zsh/net/socket"><b>zsh/net/socket</b></a></dt>
  <dd>Manipulation of Unix domain sockets</dd>
  <dt id="zsh/stat"><a class="permalink" href="#zsh/stat"><b>zsh/stat</b></a></dt>
  <dd>A builtin command interface to the <b>stat</b> system call.</dd>
  <dt id="zsh/system"><a class="permalink" href="#zsh/system"><b>zsh/system</b></a></dt>
  <dd>A builtin interface to various low-level system features.</dd>
  <dt id="zsh/net/tcp"><a class="permalink" href="#zsh/net/tcp"><b>zsh/net/tcp</b></a></dt>
  <dd>Manipulation of TCP sockets</dd>
  <dt id="zsh/termcap"><a class="permalink" href="#zsh/termcap"><b>zsh/termcap</b></a></dt>
  <dd>Interface to the termcap database.</dd>
  <dt id="zsh/terminfo"><a class="permalink" href="#zsh/terminfo"><b>zsh/terminfo</b></a></dt>
  <dd>Interface to the terminfo database.</dd>
  <dt id="zsh/zftp"><a class="permalink" href="#zsh/zftp"><b>zsh/zftp</b></a></dt>
  <dd>A builtin FTP client.</dd>
  <dt id="zsh/zle"><a class="permalink" href="#zsh/zle"><b>zsh/zle</b></a></dt>
  <dd>The Zsh Line Editor, including the <b>bindkey</b> and <b>vared</b>
      builtins.</dd>
  <dt id="zsh/zleparameter"><a class="permalink" href="#zsh/zleparameter"><b>zsh/zleparameter</b></a></dt>
  <dd>Access to internals of the Zsh Line Editor via parameters.</dd>
  <dt id="zsh/zprof"><a class="permalink" href="#zsh/zprof"><b>zsh/zprof</b></a></dt>
  <dd>A module allowing profiling for shell functions.</dd>
  <dt id="zsh/zpty"><a class="permalink" href="#zsh/zpty"><b>zsh/zpty</b></a></dt>
  <dd>A builtin for starting a command in a pseudo-terminal.</dd>
  <dt id="zsh/zselect"><a class="permalink" href="#zsh/zselect"><b>zsh/zselect</b></a></dt>
  <dd>Block and return when file descriptors are ready.</dd>
  <dt id="zsh/zutil"><a class="permalink" href="#zsh/zutil"><b>zsh/zutil</b></a></dt>
  <dd>Some utility builtins, e.g. the one for supporting configuration via
      styles.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ATTR_MODULE"><a class="permalink" href="#THE_ZSH/ATTR_MODULE">THE
  ZSH/ATTR MODULE</a></h1>
<p class="Pp">The <b>zsh/attr</b> module is used for manipulating extended
    attributes. The <b>-h</b> option causes all commands to operate on symbolic
    links instead of their targets. The builtins in this module are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zgetattr</b> [ <b>-h</b> ] <i>filename</i> <i>attribute</i> [
    <i>parameter</i> ]</dt>
  <dd>Get the extended attribute <i>attribute</i> from the specified
      <i>filename</i>. If the optional argument <i>parameter</i> is given, the
      attribute is set on that parameter instead of being printed to
    stdout.</dd>
  <dt id="zsetattr"><a class="permalink" href="#zsetattr"><b>zsetattr</b> [
    <b>-h</b> ] <i>filename</i> <i>attribute</i> <i>value</i></a></dt>
  <dd>Set the extended attribute <i>attribute</i> on the specified
      <i>filename</i> to <i>value</i>.</dd>
  <dt id="zdelattr"><a class="permalink" href="#zdelattr"><b>zdelattr</b> [
    <b>-h</b> ] <i>filename</i> <i>attribute</i></a></dt>
  <dd>Remove the extended attribute <i>attribute</i> from the specified
      <i>filename</i>.</dd>
  <dt id="zlistattr"><a class="permalink" href="#zlistattr"><b>zlistattr</b> [
    <b>-h</b> ] <i>filename</i> [ <i>parameter</i> ]</a></dt>
  <dd>List the extended attributes currently set on the specified
      <i>filename</i>. If the optional argument <i>parameter</i> is given, the
      list of attributes is set on that parameter instead of being printed to
      stdout.</dd>
</dl>
<p class="Pp"><b>zgetattr</b> and <b>zlistattr</b> allocate memory dynamically.
    If the attribute or list of attributes grows between the allocation and the
    call to get them, they return 2. On all other errors, 1 is returned. This
    allows the calling function to check for this case and retry.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/CAP_MODULE"><a class="permalink" href="#THE_ZSH/CAP_MODULE">THE
  ZSH/CAP MODULE</a></h1>
<p class="Pp">The <b>zsh/cap</b> module is used for manipulating POSIX.1e
    (POSIX.6) capability sets. If the operating system does not support this
    interface, the builtins defined by this module will do nothing. The builtins
    in this module are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>cap</b> [ <i>capabilities</i> ]</dt>
  <dd>Change the shell's process capability sets to the specified
      <i>capabilities</i>, otherwise display the shell's current
    capabilities.</dd>
  <dt id="getcap"><a class="permalink" href="#getcap"><b>getcap</b>
    <i>filename</i> ...</a></dt>
  <dd>This is a built-in implementation of the POSIX standard utility. It
      displays the capability sets on each specified <i>filename</i>.</dd>
  <dt id="setcap"><a class="permalink" href="#setcap"><b>setcap</b>
    <i>capabilities</i> <i>filename</i> ...</a></dt>
  <dd>This is a built-in implementation of the POSIX standard utility. It sets
      the capability sets on each specified <i>filename</i> to the specified
      <i>capabilities</i>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/CLONE_MODULE"><a class="permalink" href="#THE_ZSH/CLONE_MODULE">THE
  ZSH/CLONE MODULE</a></h1>
<p class="Pp">The <b>zsh/clone</b> module makes available one builtin
  command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>clone</b> <i>tty</i></dt>
  <dd>Creates a forked instance of the current shell, attached to the specified
      <i>tty</i>. In the new shell, the <b>PID</b>, <b>PPID</b> and <b>TTY</b>
      special parameters are changed appropriately. <b>$!</b> is set to zero in
      the new shell, and to the new shell's PID in the original shell.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The return status of the builtin is zero in both shells if
    successful, and non-zero on error.</p>
<p class="Pp">The target of <b>clone</b> should be an unused terminal, such as
    an unused virtual console or a virtual terminal created by</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>xterm -e sh -c 'trap : INT QUIT TSTP; tty;</b>
<br/>
<b>        while :; do sleep 100000000; done'</b></pre>
</div>
<p class="Pp">Some words of explanation are warranted about this long xterm
    command line: when doing clone on a pseudo-terminal, some other session
    (&quot;session&quot; meant as a unix session group, or SID) is already
    owning the terminal. Hence the cloned zsh cannot acquire the pseudo-terminal
    as a controlling tty. That means two things:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>the job control signals will go to the sh-started-by-xterm process group
      (that's why we disable INT QUIT and TSTP with trap; otherwise the while
      loop could get suspended or killed)</dd>
  <dt>&#x2022;</dt>
  <dd>the cloned shell will have job control disabled, and the job control keys
      (control-C, control-\ and control-Z) will not work.</dd>
</dl>
<p class="Pp">This does not apply when cloning to an <i>unused</i> vc.</p>
<p class="Pp">Cloning to a used (and unprepared) terminal will result in two
    processes reading simultaneously from the same terminal, with input bytes
    going randomly to either process.</p>
<p class="Pp"><b>clone</b> is mostly useful as a shell built-in replacement for
    openvt.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/COMPCTL_MODULE"><a class="permalink" href="#THE_ZSH/COMPCTL_MODULE">THE
  ZSH/COMPCTL MODULE</a></h1>
<p class="Pp">The <b>zsh/compctl</b> module makes available two builtin
    commands. <b>compctl</b>, is the old, deprecated way to control completions
    for ZLE. See <i>zshcompctl</i>(1). The other builtin command,
    <b>compcall</b> can be used in user-defined completion widgets, see
    <i>zshcompwid</i>(1).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/COMPLETE_MODULE"><a class="permalink" href="#THE_ZSH/COMPLETE_MODULE">THE
  ZSH/COMPLETE MODULE</a></h1>
<p class="Pp">The <b>zsh/complete</b> module makes available several builtin
    commands which can be used in user-defined completion widgets, see
    <i>zshcompwid</i>(1).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/COMPLIST_MODULE"><a class="permalink" href="#THE_ZSH/COMPLIST_MODULE">THE
  ZSH/COMPLIST MODULE</a></h1>
<p class="Pp">The <b>zsh/complist</b> module offers three extensions to
    completion listings: the ability to highlight matches in such a list, the
    ability to scroll through long lists and a different style of menu
    completion.</p>
<section class="Ss">
<h2 class="Ss" id="Colored_completion_listings"><a class="permalink" href="#Colored_completion_listings">Colored
  completion listings</a></h2>
<p class="Pp">Whenever one of the parameters <b>ZLS_COLORS</b> or
    <b>ZLS_COLOURS</b> is set and the <b>zsh/complist</b> module is loaded or
    linked into the shell, completion lists will be colored. Note, however, that
    <b>complist</b> will not automatically be loaded if it is not linked in: on
    systems with dynamic loading, `<b>zmodload zsh/complist</b>' is
  required.</p>
<p class="Pp">The parameters <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> describe
    how matches are highlighted. To turn on highlighting an empty value
    suffices, in which case all the default values given below will be used. The
    format of the value of these parameters is the same as used by the GNU
    version of the <b>ls</b> command: a colon-separated list of specifications
    of the form `<i>name</i><b>=</b><i>value</i>'. The <i>name</i> may be one of
    the following strings, most of which specify file types for which the
    <i>value</i> will be used. The strings and their default values are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>no 0</b></dt>
  <dd>for normal text (i.e. when displaying something other than a matched
    file)</dd>
  <dt id="fi"><a class="permalink" href="#fi"><b>fi 0</b></a></dt>
  <dd>for regular files</dd>
  <dt id="di"><a class="permalink" href="#di"><b>di 32</b></a></dt>
  <dd>for directories</dd>
  <dt id="ln"><a class="permalink" href="#ln"><b>ln 36</b></a></dt>
  <dd>for symbolic links. If this has the special value <b>target</b>, symbolic
      links are dereferenced and the target file used to determine the display
      format.</dd>
  <dt id="pi"><a class="permalink" href="#pi"><b>pi 31</b></a></dt>
  <dd>for named pipes (FIFOs)</dd>
  <dt id="so"><a class="permalink" href="#so"><b>so 33</b></a></dt>
  <dd>for sockets</dd>
  <dt id="bd"><a class="permalink" href="#bd"><b>bd 44;37</b></a></dt>
  <dd>for block devices</dd>
  <dt id="cd"><a class="permalink" href="#cd"><b>cd 44;37</b></a></dt>
  <dd>for character devices</dd>
  <dt id="or"><a class="permalink" href="#or"><b>or</b> <i>none</i></a></dt>
  <dd>for a symlink to nonexistent file (default is the value defined for
      <b>ln</b>)</dd>
  <dt id="mi"><a class="permalink" href="#mi"><b>mi</b> <i>none</i></a></dt>
  <dd>for a non-existent file (default is the value defined for <b>fi</b>); this
      code is currently not used</dd>
  <dt id="su"><a class="permalink" href="#su"><b>su 37;41</b></a></dt>
  <dd>for files with setuid bit set</dd>
  <dt id="sg"><a class="permalink" href="#sg"><b>sg 30;43</b></a></dt>
  <dd>for files with setgid bit set</dd>
  <dt id="tw"><a class="permalink" href="#tw"><b>tw 30;42</b></a></dt>
  <dd>for world writable directories with sticky bit set</dd>
  <dt id="ow"><a class="permalink" href="#ow"><b>ow 34;43</b></a></dt>
  <dd>for world writable directories without sticky bit set</dd>
  <dt id="sa"><a class="permalink" href="#sa"><b>sa</b> <i>none</i></a></dt>
  <dd>for files with an associated suffix alias; this is only tested after
      specific suffixes, as described below</dd>
  <dt id="st"><a class="permalink" href="#st"><b>st 37;44</b></a></dt>
  <dd>for directories with sticky bit set but not world writable</dd>
  <dt id="ex"><a class="permalink" href="#ex"><b>ex 35</b></a></dt>
  <dd>for executable files</dd>
  <dt id="lc"><a class="permalink" href="#lc"><b>lc \e[</b></a></dt>
  <dd>for the left code (see below)</dd>
  <dt id="rc"><a class="permalink" href="#rc"><b>rc m</b></a></dt>
  <dd>for the right code</dd>
  <dt id="tc"><a class="permalink" href="#tc"><b>tc 0</b></a></dt>
  <dd>for the character indicating the file type printed after filenames if the
      <b>LIST_TYPES</b> option is set</dd>
  <dt id="sp"><a class="permalink" href="#sp"><b>sp 0</b></a></dt>
  <dd>for the spaces printed after matches to align the next column</dd>
  <dt id="ec"><a class="permalink" href="#ec"><b>ec</b> <i>none</i></a></dt>
  <dd>for the end code</dd>
</dl>
<p class="Pp">Apart from these strings, the <i>name</i> may also be an asterisk
    (`<b>*</b>') followed by any string. The <i>value</i> given for such a
    string will be used for all files whose name ends with the string. The
    <i>name</i> may also be an equals sign (`<b>=</b>') followed by a pattern;
    the <b>EXTENDED_GLOB</b> option will be turned on for evaluation of the
    pattern. The <i>value</i> given for this pattern will be used for all
    matches (not just filenames) whose display string are matched by the
    pattern. Definitions for the form with the leading equal sign take
    precedence over the values defined for file types, which in turn take
    precedence over the form with the leading asterisk (file extensions).</p>
<p class="Pp">The leading-equals form also allows different parts of the
    displayed strings to be colored differently. For this, the pattern has to
    use the `<b>(#b)</b>' globbing flag and pairs of parentheses surrounding the
    parts of the strings that are to be colored differently. In this case the
    <i>value</i> may consist of more than one color code separated by equal
    signs. The first code will be used for all parts for which no explicit code
    is specified and the following codes will be used for the parts matched by
    the sub-patterns in parentheses. For example, the specification
    `<b>=(#b)(?)*(?)=0=3=7</b>' will be used for all matches which are at least
    two characters long and will use the code `<b>3</b>' for the first
    character, `<b>7</b>' for the last character and `<b>0</b>' for the
  rest.</p>
<p class="Pp">All three forms of <i>name</i> may be preceded by a pattern in
    parentheses. If this is given, the <i>value</i> will be used only for
    matches in groups whose names are matched by the pattern given in the
    parentheses. For example, `<b>(g*)m*=43</b>' highlights all matches
    beginning with `<b>m</b>' in groups whose names begin with `<b>g</b>' using
    the color code `<b>43</b>'. In case of the `<b>lc</b>', `<b>rc</b>', and
    `<b>ec</b>' codes, the group pattern is ignored.</p>
<p class="Pp">Note also that all patterns are tried in the order in which they
    appear in the parameter value until the first one matches which is then
    used. Patterns may be matched against completions, descriptions (possibly
    with spaces appended for padding), or lines consisting of a completion
    followed by a description. For consistent coloring it may be necessary to
    use more than one pattern or a pattern with backreferences.</p>
<p class="Pp">When printing a match, the code prints the value of <b>lc</b>, the
    value for the file-type or the last matching specification with a
    `<b>*</b>', the value of <b>rc</b>, the string to display for the match
    itself, and then the value of <b>ec</b> if that is defined or the values of
    <b>lc</b>, <b>no</b>, and <b>rc</b> if <b>ec</b> is not defined.</p>
<p class="Pp">The default values are ISO 6429 (ANSI) compliant and can be used
    on vt100 compatible terminals such as <b>xterm</b>s. On monochrome terminals
    the default values will have no visible effect. The <b>colors</b> function
    from the contribution can be used to get associative arrays containing the
    codes for ANSI terminals (see the section `Other Functions' in
    <i>zshcontrib</i>(1)). For example, after loading <b>colors</b>, one could
    use `<b>$color[red]</b>' to get the code for foreground color red and
    `<b>$color[bg-green]</b>' for the code for background color green.</p>
<p class="Pp">If the completion system invoked by compinit is used, these
    parameters should not be set directly because the system controls them
    itself. Instead, the <b>list-colors</b> style should be used (see the
    section `Completion System Configuration' in <i>zshcompsys</i>(1)).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Scrolling_in_completion_listings"><a class="permalink" href="#Scrolling_in_completion_listings">Scrolling
  in completion listings</a></h2>
<p class="Pp">To enable scrolling through a completion list, the
    <b>LISTPROMPT</b> parameter must be set. Its value will be used as the
    prompt; if it is the empty string, a default prompt will be used. The value
    may contain escapes of the form `<b>%x</b>'. It supports the escapes
    `<b>%B</b>', `<b>%b</b>', `<b>%S</b>', `<b>%s</b>', `<b>%U</b>',
    `<b>%u</b>', `<b>%F</b>', `<b>%f</b>', `<b>%K</b>', `<b>%k</b>' and
    `<b>%{</b><i>...</i><b>%}</b>' used also in shell prompts as well as three
    pairs of additional sequences: a `<b>%l</b>' or `<b>%L</b>' is replaced by
    the number of the last line shown and the total number of lines in the form
    `<i>number</i><b>/</b><i>total</i>'; a `<b>%m</b>' or `<b>%M</b>' is
    replaced with the number of the last match shown and the total number of
    matches; and `<b>%p</b>' or `<b>%P</b>' is replaced with `<b>Top</b>',
    `<b>Bottom</b>' or the position of the first line shown in percent of the
    total number of lines, respectively. In each of these cases the form with
    the uppercase letter will be replaced with a string of fixed width, padded
    to the right with spaces, while the lowercase form will not be padded.</p>
<p class="Pp">If the parameter <b>LISTPROMPT</b> is set, the completion code
    will not ask if the list should be shown. Instead it immediately starts
    displaying the list, stopping after the first screenful, showing the prompt
    at the bottom, waiting for a keypress after temporarily switching to the
    <b>listscroll</b> keymap. Some of the zle functions have a special meaning
    while scrolling lists:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>send-break</b></dt>
  <dd>stops listing discarding the key pressed</dd>
  <dt><b>accept-line</b>, <b>down-history</b>, <b>down-line-or-history</b></dt>
  <dd></dd>
  <dt><b>down-line-or-search</b>, <b>vi-down-line-or-history</b></dt>
  <dd>scrolls forward one line</dd>
  <dt><b>complete-word</b>, <b>menu-complete</b>, <b>expand-or-complete</b></dt>
  <dd></dd>
  <dt><b>expand-or-complete-prefix</b>, <b>menu-complete-or-expand</b></dt>
  <dd>scrolls forward one screenful</dd>
  <dt id="accept"><a class="permalink" href="#accept"><b>accept-search</b></a></dt>
  <dd>stop listing but take no other action</dd>
</dl>
<p class="Pp">Every other character stops listing and immediately processes the
    key as usual. Any key that is not bound in the <b>listscroll</b> keymap or
    that is bound to <b>undefined-key</b> is looked up in the keymap currently
    selected.</p>
<p class="Pp">As for the <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters,
    <b>LISTPROMPT</b> should not be set directly when using the shell function
    based completion system. Instead, the <b>list-prompt</b> style should be
    used.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Menu_selection"><a class="permalink" href="#Menu_selection">Menu
  selection</a></h2>
<p class="Pp">The <b>zsh/complist</b> module also offers an alternative style of
    selecting matches from a list, called menu selection, which can be used if
    the shell is set up to return to the last prompt after showing a completion
    list (see the <b>ALWAYS_LAST_PROMPT</b> option in <i>zshoptions</i>(1)).</p>
<p class="Pp">Menu selection can be invoked directly by the widget
    <b>menu-select</b> defined by this module. This is a standard ZLE widget
    that can be bound to a key in the usual way as described in
    <i>zshzle</i>(1).</p>
<p class="Pp">Alternatively, the parameter <b>MENUSELECT</b> can be set to an
    integer, which gives the minimum number of matches that must be present
    before menu selection is automatically turned on. This second method
    requires that menu completion be started, either directly from a widget such
    as <b>menu-complete</b>, or due to one of the options <b>MENU_COMPLETE</b>
    or <b>AUTO_MENU</b> being set. If <b>MENUSELECT</b> is set, but is 0, 1 or
    empty, menu selection will always be started during an ambiguous menu
    completion.</p>
<p class="Pp">When using the completion system based on shell functions, the
    <b>MENUSELECT</b> parameter should not be used (like the <b>ZLS_COLORS</b>
    and <b>ZLS_COLOURS</b> parameters described above). Instead, the <b>menu</b>
    style should be used with the <b>select=</b><i>...</i> keyword.</p>
<p class="Pp">After menu selection is started, the matches will be listed. If
    there are more matches than fit on the screen, only the first screenful is
    shown. The matches to insert into the command line can be selected from this
    list. In the list one match is highlighted using the value for <b>ma</b>
    from the <b>ZLS_COLORS</b> or <b>ZLS_COLOURS</b> parameter. The default
    value for this is `<b>7</b>' which forces the selected match to be
    highlighted using standout mode on a vt100-compatible terminal. If neither
    <b>ZLS_COLORS</b> nor <b>ZLS_COLOURS</b> is set, the same terminal control
    sequence as for the `<b>%S</b>' escape in prompts is used.</p>
<p class="Pp">If there are more matches than fit on the screen and the parameter
    <b>MENUPROMPT</b> is set, its value will be shown below the matches. It
    supports the same escape sequences as <b>LISTPROMPT</b>, but the number of
    the match or line shown will be that of the one where the mark is placed. If
    its value is the empty string, a default prompt will be used.</p>
<p class="Pp">The <b>MENUSCROLL</b> parameter can be used to specify how the
    list is scrolled. If the parameter is unset, this is done line by line, if
    it is set to `<b>0</b>' (zero), the list will scroll half the number of
    lines of the screen. If the value is positive, it gives the number of lines
    to scroll and if it is negative, the list will be scrolled the number of
    lines of the screen minus the (absolute) value.</p>
<p class="Pp">As for the <b>ZLS_COLORS</b>, <b>ZLS_COLOURS</b> and
    <b>LISTPROMPT</b> parameters, neither <b>MENUPROMPT</b> nor
    <b>MENUSCROLL</b> should be set directly when using the shell function based
    completion system. Instead, the <b>select-prompt</b> and
    <b>select-scroll</b> styles should be used.</p>
<p class="Pp">The completion code sometimes decides not to show all of the
    matches in the list. These hidden matches are either matches for which the
    completion function which added them explicitly requested that they not
    appear in the list (using the <b>-n</b> option of the <b>compadd</b> builtin
    command) or they are matches which duplicate a string already in the list
    (because they differ only in things like prefixes or suffixes that are not
    displayed). In the list used for menu selection, however, even these matches
    are shown so that it is possible to select them. To highlight such matches
    the <b>hi</b> and <b>du</b> capabilities in the <b>ZLS_COLORS</b> and
    <b>ZLS_COLOURS</b> parameters are supported for hidden matches of the first
    and second kind, respectively.</p>
<p class="Pp">Selecting matches is done by moving the mark around using the zle
    movement functions. When not all matches can be shown on the screen at the
    same time, the list will scroll up and down when crossing the top or bottom
    line. The following zle functions have special meaning during menu
    selection. Note that the following always perform the same task within the
    menu selection map and cannot be replaced by user defined widgets, nor can
    the set of functions be extended:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>accept-line</b>, <b>accept-search</b></dt>
  <dd>accept the current match and leave menu selection (but do not cause the
      command line to be accepted)</dd>
  <dt id="send"><a class="permalink" href="#send"><b>send-break</b></a></dt>
  <dd>leaves menu selection and restores the previous contents of the command
      line</dd>
  <dt id="redisplay"><a class="permalink" href="#redisplay"><b>redisplay</b>,
    <b>clear-screen</b></a></dt>
  <dd>execute their normal function without leaving menu selection</dd>
  <dt id="accept~2"><a class="permalink" href="#accept~2"><b>accept-and-hold</b>,
    <b>accept-and-menu-complete</b></a></dt>
  <dd>accept the currently inserted match and continue selection allowing to
      select the next match to insert into the line</dd>
  <dt id="accept~3"><a class="permalink" href="#accept~3"><b>accept-and-infer-next-history</b></a></dt>
  <dd>accepts the current match and then tries completion with menu selection
      again; in the case of files this allows one to select a directory and
      immediately attempt to complete files in it; if there are no matches, a
      message is shown and one can use <b>undo</b> to go back to completion on
      the previous level, every other key leaves menu selection (including the
      other zle functions which are otherwise special during menu
    selection)</dd>
  <dt id="undo"><a class="permalink" href="#undo"><b>undo</b></a></dt>
  <dd>removes matches inserted during the menu selection by one of the three
      functions before</dd>
  <dt><b>down-history</b>, <b>down-line-or-history</b></dt>
  <dd></dd>
  <dt><b>vi-down-line-or-history</b>, <b>down-line-or-search</b></dt>
  <dd>moves the mark one line down</dd>
  <dt><b>up-history</b>, <b>up-line-or-history</b></dt>
  <dd></dd>
  <dt><b>vi-up-line-or-history</b>, <b>up-line-or-search</b></dt>
  <dd>moves the mark one line up</dd>
  <dt id="forward"><a class="permalink" href="#forward"><b>forward-char</b>,
    <b>vi-forward-char</b></a></dt>
  <dd>moves the mark one column right</dd>
  <dt id="backward"><a class="permalink" href="#backward"><b>backward-char</b>,
    <b>vi-backward-char</b></a></dt>
  <dd>moves the mark one column left</dd>
  <dt><b>forward-word</b>, <b>vi-forward-word</b></dt>
  <dd></dd>
  <dt><b>vi-forward-word-end</b>, <b>emacs-forward-word</b></dt>
  <dd>moves the mark one screenful down</dd>
  <dt id="backward~2"><a class="permalink" href="#backward~2"><b>backward-word</b>,
    <b>vi-backward-word</b>, <b>emacs-backward-word</b></a></dt>
  <dd>moves the mark one screenful up</dd>
  <dt id="vi"><a class="permalink" href="#vi"><b>vi-forward-blank-word</b>,
    <b>vi-forward-blank-word-end</b></a></dt>
  <dd>moves the mark to the first line of the next group of matches</dd>
  <dt id="vi~2"><a class="permalink" href="#vi~2"><b>vi-backward-blank-word</b></a></dt>
  <dd>moves the mark to the last line of the previous group of matches</dd>
  <dt id="beginning"><a class="permalink" href="#beginning"><b>beginning-of-history</b></a></dt>
  <dd>moves the mark to the first line</dd>
  <dt id="end"><a class="permalink" href="#end"><b>end-of-history</b></a></dt>
  <dd>moves the mark to the last line</dd>
  <dt><b>beginning-of-buffer-or-history</b>, <b>beginning-of-line</b></dt>
  <dd></dd>
  <dt><b>beginning-of-line-hist</b>, <b>vi-beginning-of-line</b></dt>
  <dd>moves the mark to the leftmost column</dd>
  <dt><b>end-of-buffer-or-history</b>, <b>end-of-line</b></dt>
  <dd></dd>
  <dt><b>end-of-line-hist</b>, <b>vi-end-of-line</b></dt>
  <dd>moves the mark to the rightmost column</dd>
  <dt><b>complete-word</b>, <b>menu-complete</b>, <b>expand-or-complete</b></dt>
  <dd></dd>
  <dt><b>expand-or-complete-prefix</b>, <b>menu-expand-or-complete</b></dt>
  <dd>moves the mark to the next match</dd>
  <dt id="reverse"><a class="permalink" href="#reverse"><b>reverse-menu-complete</b></a></dt>
  <dd>moves the mark to the previous match</dd>
  <dt id="vi~3"><a class="permalink" href="#vi~3"><b>vi-insert</b></a></dt>
  <dd>this toggles between normal and interactive mode; in interactive mode the
      keys bound to <b>self-insert</b> and <b>self-insert-unmeta</b> insert into
      the command line as in normal editing mode but without leaving menu
      selection; after each character completion is tried again and the list
      changes to contain only the new matches; the completion widgets make the
      longest unambiguous string be inserted in the command line and <b>undo</b>
      and <b>backward-delete-char</b> go back to the previous set of
    matches</dd>
  <dt><b>history-incremental-search-forward</b></dt>
  <dd></dd>
  <dt><b>history-incremental-search-backward</b></dt>
  <dd>this starts incremental searches in the list of completions displayed; in
      this mode, <b>accept-line</b> only leaves incremental search, going back
      to the normal menu selection mode</dd>
</dl>
<p class="Pp">All movement functions wrap around at the edges; any other zle
    function not listed leaves menu selection and executes that function. It is
    possible to make widgets in the above list do the same by using the form of
    the widget with a `<b>.</b>' in front. For example, the widget
    `<b>.accept-line</b>' has the effect of leaving menu selection and accepting
    the entire command line.</p>
<p class="Pp">During this selection the widget uses the keymap
    <b>menuselect</b>. Any key that is not defined in this keymap or that is
    bound to <b>undefined-key</b> is looked up in the keymap currently selected.
    This is used to ensure that the most important keys used during selection
    (namely the cursor keys, return, and TAB) have sensible defaults. However,
    keys in the <b>menuselect</b> keymap can be modified directly using the
    <b>bindkey</b> builtin command (see <i>zshmodules</i>(1)). For example, to
    make the return key leave menu selection without accepting the match
    currently selected one could call</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>bindkey -M menuselect '^M' send-break</b></pre>
</div>
<p class="Pp">after loading the <b>zsh/complist</b> module.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/COMPUTIL_MODULE"><a class="permalink" href="#THE_ZSH/COMPUTIL_MODULE">THE
  ZSH/COMPUTIL MODULE</a></h1>
<p class="Pp">The <b>zsh/computil</b> module adds several builtin commands that
    are used by some of the completion functions in the completion system based
    on shell functions (see <i>zshcompsys</i>(1) ). Except for <b>compquote</b>
    these builtin commands are very specialised and thus not very interesting
    when writing your own completion functions. In summary, these builtin
    commands are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>comparguments</b></dt>
  <dd>This is used by the <b>_arguments</b> function to do the argument and
      command line parsing. Like <b>compdescribe</b> it has an option <b>-i</b>
      to do the parsing and initialize some internal state and various options
      to access the state information to decide what should be completed.</dd>
  <dt id="compdescribe"><a class="permalink" href="#compdescribe"><b>compdescribe</b></a></dt>
  <dd>This is used by the <b>_describe</b> function to build the displays for
      the matches and to get the strings to add as matches with their options.
      On the first call one of the options <b>-i</b> or <b>-I</b> should be
      supplied as the first argument. In the first case, display strings without
      the descriptions will be generated, in the second case, the string used to
      separate the matches from their descriptions must be given as the second
      argument and the descriptions (if any) will be shown. All other arguments
      are like the definition arguments to <b>_describe</b> itself.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Once <b>compdescribe</b> has been called with either the <b>-i</b>
    or the <b>-I</b> option, it can be repeatedly called with the <b>-g</b>
    option and the names of four parameters as its arguments. This will step
    through the different sets of matches and store the value of
    <b>compstate[list]</b> in the first scalar, the options for <b>compadd</b>
    in the second array, the matches in the third array, and the strings to be
    displayed in the completion listing in the fourth array. The arrays may then
    be directly given to <b>compadd</b> to register the matches with the
    completion code.</p>
</div>
<dl class="Bl-tag">
  <dt id="compfiles"><a class="permalink" href="#compfiles"><b>compfiles</b></a></dt>
  <dd>Used by the <b>_path_files</b> function to optimize complex recursive
      filename generation (globbing). It does three things. With the <b>-p</b>
      and <b>-P</b> options it builds the glob patterns to use, including the
      paths already handled and trying to optimize the patterns with respect to
      the prefix and suffix from the line and the match specification currently
      used. The <b>-i</b> option does the directory tests for the
      <b>ignore-parents</b> style and the <b>-r</b> option tests if a component
      for some of the matches are equal to the string on the line and removes
      all other matches if that is true.</dd>
  <dt id="compgroups"><a class="permalink" href="#compgroups"><b>compgroups</b></a></dt>
  <dd>Used by the <b>_tags</b> function to implement the internals of the
      <b>group-order</b> style. This only takes its arguments as names of
      completion groups and creates the groups for it (all six types: sorted and
      unsorted, both without removing duplicates, with removing all duplicates
      and with removing consecutive duplicates).</dd>
  <dt id="compquote"><a class="permalink" href="#compquote"><b>compquote</b> [
    <b>-p</b> ] <i>names</i> ...</a></dt>
  <dd>There may be reasons to write completion functions that have to add the
      matches using the <b>-Q</b> option to <b>compadd</b> and perform quoting
      themselves. Instead of interpreting the first character of the
      <b>all_quotes</b> key of the <b>compstate</b> special association and
      using the <b>q</b> flag for parameter expansions, one can use this builtin
      command. The arguments are the names of scalar or array parameters and the
      values of these parameters are quoted as needed for the innermost quoting
      level. If the <b>-p</b> option is given, quoting is done as if there is
      some prefix before the values of the parameters, so that a leading equal
      sign will not be quoted.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The return status is non-zero in case of an error and zero
    otherwise.</p>
</div>
<dl class="Bl-tag">
  <dt><b>comptags</b></dt>
  <dd></dd>
  <dt><b>comptry</b></dt>
  <dd>These implement the internals of the tags mechanism.</dd>
  <dt id="compvalues"><a class="permalink" href="#compvalues"><b>compvalues</b></a></dt>
  <dd>Like <b>comparguments</b>, but for the <b>_values</b> function.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/CURSES_MODULE"><a class="permalink" href="#THE_ZSH/CURSES_MODULE">THE
  ZSH/CURSES MODULE</a></h1>
<p class="Pp">The <b>zsh/curses</b> module makes available one builtin command
    and various parameters.</p>
<section class="Ss">
<h2 class="Ss" id="Builtin"><a class="permalink" href="#Builtin">Builtin</a></h2>
<dl class="Bl-tag">
  <dt><b>zcurses</b> <b>init</b></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>end</b></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>addwin</b> <i>targetwin</i> <i>nlines</i> <i>ncols</i>
    <i>begin_y</i> <i>begin_x</i> [ <i>parentwin</i> ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>delwin</b> <i>targetwin</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>refresh</b> [ <i>targetwin</i> ... ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>touch</b> <i>targetwin</i> ...</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>move</b> <i>targetwin</i> <i>new_y</i> <i>new_x</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>clear</b> <i>targetwin</i> [ <b>redraw</b> | <b>eol</b>
    | <b>bot</b> ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>position</b> <i>targetwin</i> <i>array</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>char</b> <i>targetwin</i> <i>character</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>string</b> <i>targetwin</i> <i>string</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>border</b> <i>targetwin</i> <i>border</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>attr</b> <i>targetwin</i> [
    [<b>+</b>|<b>-</b>]<i>attribute</i> | <i>fg_col</i><b>/</b><i>bg_col</i> ]
    [...]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>bg</b> <i>targetwin</i> [
    [<b>+</b>|<b>-</b>]<i>attribute</i> | <i>fg_col</i><b>/</b><i>bg_col</i> |
    <b>@</b><i>char</i> ] [...]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>scroll</b> <i>targetwin</i> [ <b>on</b> | <b>off</b> |
    [<b>+</b>|<b>-</b>]<i>lines</i> ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>input</b> <i>targetwin</i> [ <i>param</i> [
    <i>kparam</i> [ <i>mparam</i> ] ] ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>mouse</b> [ <b>delay</b> <i>num</i> |
    [<b>+</b>|<b>-</b>]<b>motion</b> ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>timeout</b> <i>targetwin</i> <i>intval</i></dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>querychar</b> <i>targetwin</i> [ <i>param</i> ]</dt>
  <dd></dd>
  <dt><b>zcurses</b> <b>resize</b> <i>height</i> <i>width</i> [ <b>endwin</b> |
    <b>nosave</b> | <b>endwin_nosave</b> ]</dt>
  <dd>Manipulate curses windows. All uses of this command should be bracketed by
      `<b>zcurses init</b>' to initialise use of curses, and `<b>zcurses
      end</b>' to end it; omitting `<b>zcurses end</b>' can cause the terminal
      to be in an unwanted state.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The subcommand <b>addwin</b> creates a window with <i>nlines</i>
    lines and <i>ncols</i> columns. Its upper left corner will be placed at row
    <i>begin_y</i> and column <i>begin_x</i> of the screen. <i>targetwin</i> is
    a string and refers to the name of a window that is not currently assigned.
    Note in particular the curses convention that vertical values appear before
    horizontal values.</p>
<p class="Pp">If <b>addwin</b> is given an existing window as the final
    argument, the new window is created as a subwindow of <i>parentwin</i>. This
    differs from an ordinary new window in that the memory of the window
    contents is shared with the parent's memory. Subwindows must be deleted
    before their parent. Note that the coordinates of subwindows are relative to
    the screen, not the parent, as with other windows.</p>
<p class="Pp">Use the subcommand <b>delwin</b> to delete a window created with
    <b>addwin</b>. Note that <b>end</b> does <i>not</i> implicitly delete
    windows, and that <b>delwin</b> does not erase the screen image of the
    window.</p>
<p class="Pp">The window corresponding to the full visible screen is called
    <b>stdscr</b>; it always exists after `<b>zcurses init</b>' and cannot be
    delete with <b>delwin</b>.</p>
<p class="Pp">The subcommand <b>refresh</b> will refresh window
    <i>targetwin</i>; this is necessary to make any pending changes (such as
    characters you have prepared for output with <b>char</b>) visible on the
    screen. <b>refresh</b> without an argument causes the screen to be cleared
    and redrawn. If multiple windows are given, the screen is updated once at
    the end.</p>
<p class="Pp">The subcommand <b>touch</b> marks the <i>targetwin</i>s listed as
    changed. This is necessary before <b>refresh</b>ing windows if a window that
    was in front of another window (which may be <b>stdscr</b>) is deleted.</p>
<p class="Pp">The subcommand <b>move</b> moves the cursor position in
    <i>targetwin</i> to new coordinates <i>new_y</i> and <i>new_x</i>. Note that
    the subcommand <b>string</b> (but not the subcommand <b>char</b>) advances
    the cursor position over the characters added.</p>
<p class="Pp">The subcommand <b>clear</b> erases the contents of
    <i>targetwin</i>. One (and no more than one) of three options may be
    specified. With the option <b>redraw</b>, in addition the next
    <b>refresh</b> of <i>targetwin</i> will cause the screen to be cleared and
    repainted. With the option <b>eol</b>, <i>targetwin</i> is only cleared to
    the end of the current cursor line. With the option <b>bot</b>,
    <i>targetwin</i> is cleared to the end of the window, i.e everything to the
    right and below the cursor is cleared.</p>
<p class="Pp">The subcommand <b>position</b> writes various positions associated
    with <i>targetwin</i> into the array named <i>array</i>. These are, in
    order:</p>
<dl class="Bl-tag">
  <dt>-</dt>
  <dd>The y and x coordinates of the cursor relative to the top left of
      <i>targetwin</i></dd>
  <dt>-</dt>
  <dd>The y and x coordinates of the top left of <i>targetwin</i> on the
    screen</dd>
  <dt>-</dt>
  <dd>The size of <i>targetwin</i> in y and x dimensions.</dd>
</dl>
<p class="Pp">Outputting characters and strings are achieved by <b>char</b> and
    <b>string</b> respectively.</p>
<p class="Pp">To draw a border around window <i>targetwin</i>, use
    <b>border</b>. Note that the border is not subsequently handled specially:
    in other words, the border is simply a set of characters output at the edge
    of the window. Hence it can be overwritten, can scroll off the window,
  etc.</p>
<p class="Pp">The subcommand <b>attr</b> will set <i>targetwin</i>'s attributes
    or foreground/background color pair for any successive character output.
    Each <i>attribute</i> given on the line may be prepended by a <b>+</b> to
    set or a <b>-</b> to unset that attribute; <b>+</b> is assumed if absent.
    The attributes supported are <b>blink</b>, <b>bold</b>, <b>dim</b>,
    <b>reverse</b>, <b>standout</b>, and <b>underline</b>.</p>
<p class="Pp">Each <i>fg_col</i><b>/</b><i>bg_col</i> attribute (to be read as
    `<i>fg_col</i> on <i>bg_col</i>') sets the foreground and background color
    for character output. The color <b>default</b> is sometimes available (in
    particular if the library is ncurses), specifying the foreground or
    background color with which the terminal started. The color pair
    <b>default/default</b> is always available. To use more than the 8 named
    colors (red, green, etc.) construct the <i>fg_col</i><b>/</b><i>bg_col</i>
    pairs where <i>fg_col</i> and <i>bg_col</i> are decimal integers, e.g
    <b>128/200</b>. The maximum color value is 254 if the terminal supports 256
    colors.</p>
<p class="Pp"><b>bg</b> overrides the color and other attributes of all
    characters in the window. Its usual use is to set the background initially,
    but it will overwrite the attributes of any characters at the time when it
    is called. In addition to the arguments allowed with <b>attr</b>, an
    argument <b>@</b><i>char</i> specifies a character to be shown in otherwise
    blank areas of the window. Owing to limitations of curses this cannot be a
    multibyte character (use of ASCII characters only is recommended). As the
    specified set of attributes override the existing background, turning
    attributes off in the arguments is not useful, though this does not cause an
    error.</p>
<p class="Pp">The subcommand <b>scroll</b> can be used with <b>on</b> or
    <b>off</b> to enabled or disable scrolling of a window when the cursor would
    otherwise move below the window due to typing or output. It can also be used
    with a positive or negative integer to scroll the window up or down the
    given number of lines without changing the current cursor position (which
    therefore appears to move in the opposite direction relative to the window).
    In the second case, if scrolling is <b>off</b> it is temporarily turned
    <b>on</b> to allow the window to be scrolled.</p>
<p class="Pp">The subcommand <b>input</b> reads a single character from the
    window without echoing it back. If <i>param</i> is supplied the character is
    assigned to the parameter <i>param</i>, else it is assigned to the parameter
    <b>REPLY</b>.</p>
<p class="Pp">If both <i>param</i> and <i>kparam</i> are supplied, the key is
    read in `keypad' mode. In this mode special keys such as function keys and
    arrow keys return the name of the key in the parameter <i>kparam</i>. The
    key names are the macros defined in the <b>curses.h</b> or <b>ncurses.h</b>
    with the prefix `<b>KEY_</b>' removed; see also the description of the
    parameter <b>zcurses_keycodes</b> below. Other keys cause a value to be set
    in <i>param</i> as before. On a successful return only one of <i>param</i>
    or <i>kparam</i> contains a non-empty string; the other is set to an empty
    string.</p>
<p class="Pp">If <i>mparam</i> is also supplied, <b>input</b> attempts to handle
    mouse input. This is only available with the ncurses library; mouse handling
    can be detected by checking for the exit status of `<b>zcurses mouse</b>'
    with no arguments. If a mouse button is clicked (or double- or
    triple-clicked, or pressed or released with a configurable delay from being
    clicked) then <b>kparam</b> is set to the string <b>MOUSE</b>, and
    <i>mparam</i> is set to an array consisting of the following elements:</p>
<dl class="Bl-tag">
  <dt>-</dt>
  <dd>An identifier to discriminate different input devices; this is only rarely
      useful.</dd>
  <dt>-</dt>
  <dd>The x, y and z coordinates of the mouse click relative to the full screen,
      as three elements in that order (i.e. the y coordinate is, unusually,
      after the x coordinate). The z coordinate is only available for a few
      unusual input devices and is otherwise set to zero.</dd>
  <dt>-</dt>
  <dd>Any events that occurred as separate items; usually there will be just
      one. An event consists of <b>PRESSED</b>, <b>RELEASED</b>, <b>CLICKED</b>,
      <b>DOUBLE_CLICKED</b> or <b>TRIPLE_CLICKED</b> followed immediately (in
      the same element) by the number of the button.</dd>
  <dt>-</dt>
  <dd>If the shift key was pressed, the string <b>SHIFT</b>.</dd>
  <dt>-</dt>
  <dd>If the control key was pressed, the string <b>CTRL</b>.</dd>
  <dt>-</dt>
  <dd>If the alt key was pressed, the string <b>ALT</b>.</dd>
</dl>
<p class="Pp">Not all mouse events may be passed through to the terminal window;
    most terminal emulators handle some mouse events themselves. Note that the
    ncurses manual implies that using input both with and without mouse handling
    may cause the mouse cursor to appear and disappear.</p>
<p class="Pp">The subcommand <b>mouse</b> can be used to configure the use of
    the mouse. There is no window argument; mouse options are global.
    `<b>zcurses mouse</b>' with no arguments returns status 0 if mouse handling
    is possible, else status 1. Otherwise, the possible arguments (which may be
    combined on the same command line) are as follows. <b>delay</b> <i>num</i>
    sets the maximum delay in milliseconds between press and release events to
    be considered as a click; the value 0 disables click resolution, and the
    default is one sixth of a second. <b>motion</b> proceeded by an optional
    `<b>+</b>' (the default) or <b>-</b> turns on or off reporting of mouse
    motion in addition to clicks, presses and releases, which are always
    reported. However, it appears reports for mouse motion are not currently
    implemented.</p>
<p class="Pp">The subcommand <b>timeout</b> specifies a timeout value for input
    from <i>targetwin</i>. If <i>intval</i> is negative, `<b>zcurses input</b>'
    waits indefinitely for a character to be typed; this is the default. If
    <i>intval</i> is zero, `<b>zcurses input</b>' returns immediately; if there
    is typeahead it is returned, else no input is done and status 1 is returned.
    If <i>intval</i> is positive, `<b>zcurses input</b>' waits <i>intval</i>
    milliseconds for input and if there is none at the end of that period
    returns status 1.</p>
<p class="Pp">The subcommand <b>querychar</b> queries the character at the
    current cursor position. The return values are stored in the array named
    <i>param</i> if supplied, else in the array <b>reply</b>. The first value is
    the character (which may be a multibyte character if the system supports
    them); the second is the color pair in the usual
    <i>fg_col</i><b>/</b><i>bg_col</i> notation, or <b>0</b> if color is not
    supported. Any attributes other than color that apply to the character, as
    set with the subcommand <b>attr</b>, appear as additional elements.</p>
<p class="Pp">The subcommand <b>resize</b> resizes <b>stdscr</b> and all windows
    to given dimensions (windows that stick out from the new dimensions are
    resized down). The underlying curses extension (<b>resize_term call</b>) can
    be unavailable. To verify, zeroes can be used for <i>height</i> and
    <i>width</i>. If the result of the subcommand is <b>0</b>, resize_term is
    available (<b>2</b> otherwise). Tests show that resizing can be normally
    accomplished by calling <b>zcurses end</b> and <b>zcurses refresh</b>. The
    <b>resize</b> subcommand is provided for versatility. Multiple system
    configurations have been checked and <b>zcurses end</b> and <b>zcurses</b>
    <b>refresh</b> are still needed for correct terminal state after resize. To
    invoke them with <b>resize</b>, use <i>endwin</i> argument. Using
    <i>nosave</i> argument will cause new terminal state to not be saved
    internally by <b>zcurses</b>. This is also provided for versatility and
    should normally be not needed.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Parameters"><a class="permalink" href="#Parameters">Parameters</a></h2>
<dl class="Bl-tag">
  <dt><b>ZCURSES_COLORS</b></dt>
  <dd>Readonly integer. The maximum number of colors the terminal supports. This
      value is initialised by the curses library and is not available until the
      first time <b>zcurses init</b> is run.</dd>
  <dt id="ZCURSES_COLOR_PAIRS"><a class="permalink" href="#ZCURSES_COLOR_PAIRS"><b>ZCURSES_COLOR_PAIRS</b></a></dt>
  <dd>Readonly integer. The maximum number of color pairs
      <i>fg_col</i><b>/</b><i>bg_col</i> that may be defined in `<b>zcurses
      attr</b>' commands; note this limit applies to all color pairs that have
      been used whether or not they are currently active. This value is
      initialised by the curses library and is not available until the first
      time <b>zcurses</b> <b>init</b> is run.</dd>
  <dt id="zcurses_attrs"><a class="permalink" href="#zcurses_attrs"><b>zcurses_attrs</b></a></dt>
  <dd>Readonly array. The attributes supported by <b>zsh/curses</b>; available
      as soon as the module is loaded.</dd>
  <dt id="zcurses_colors"><a class="permalink" href="#zcurses_colors"><b>zcurses_colors</b></a></dt>
  <dd>Readonly array. The colors supported by <b>zsh/curses</b>; available as
      soon as the module is loaded.</dd>
  <dt id="zcurses_keycodes"><a class="permalink" href="#zcurses_keycodes"><b>zcurses_keycodes</b></a></dt>
  <dd>Readonly array. The values that may be returned in the second parameter
      supplied to `<b>zcurses input</b>' in the order in which they are defined
      internally by curses. Not all function keys are listed, only <b>F0</b>;
      curses reserves space for <b>F0</b> up to <b>F63</b>.</dd>
  <dt id="zcurses_windows"><a class="permalink" href="#zcurses_windows"><b>zcurses_windows</b></a></dt>
  <dd>Readonly array. The current list of windows, i.e. all windows that have
      been created with `<b>zcurses addwin</b>' and not removed with `<b>zcurses
      delwin</b>'.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/DATETIME_MODULE"><a class="permalink" href="#THE_ZSH/DATETIME_MODULE">THE
  ZSH/DATETIME MODULE</a></h1>
<p class="Pp">The <b>zsh/datetime</b> module makes available one builtin
    command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>strftime</b> [ <b>-s</b> <i>scalar</i> ] <i>format</i> [
    <i>epochtime</i> [ <i>nanoseconds</i> ] ]</dt>
  <dd></dd>
  <dt><b>strftime</b> <b>-r</b> [ <b>-q</b> ] [ <b>-s</b> <i>scalar</i> ]
    <i>format</i> <i>timestring</i></dt>
  <dd>Output the date in the <i>format</i> specified. With no <i>epochtime</i>,
      the current system date/time is used; optionally, <i>epochtime</i> may be
      used to specify the number of seconds since the epoch, and
      <i>nanoseconds</i> may additionally be used to specify the number of
      nanoseconds past the second (otherwise that number is assumed to be 0).
      See <i>strftime</i>(3) for details. The zsh extensions described in the
      section EXPANSION OF PROMPT SEQUENCES in <i>zshmisc</i>(1) are also
      available.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-q</b></dt>
  <dd>Run quietly; suppress printing of all error messages described below.
      Errors for invalid <i>epochtime</i> values are always printed.</dd>
  <dt id="r"><a class="permalink" href="#r"><b>-r</b></a></dt>
  <dd>With the option <b>-r</b> (reverse), use <i>format</i> to parse the input
      string <i>timestring</i> and output the number of seconds since the epoch
      at which the time occurred. The parsing is implemented by the system
      function <b>strptime</b>; see <i>strptime</i>(3). This means that zsh
      format extensions are not available, but for reverse lookup they are not
      required.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">In most implementations of <b>strftime</b> any timezone in the
    <i>timestring</i> is ignored and the local timezone declared by the
    <b>TZ</b> environment variable is used; other parameters are set to zero if
    not present.</p>
<p class="Pp">If <i>timestring</i> does not match <i>format</i> the command
    returns status 1 and prints an error message. If <i>timestring</i> matches
    <i>format</i> but not all characters in <i>timestring</i> were used, the
    conversion succeeds but also prints an error message.</p>
<p class="Pp">If either of the system functions <b>strptime</b> or <b>mktime</b>
    is not available, status 2 is returned and an error message is printed.</p>
</div>
<dl class="Bl-tag">
  <dt id="s"><a class="permalink" href="#s"><b>-s</b> <i>scalar</i></a></dt>
  <dd>Assign the date string (or epoch time in seconds if <b>-r</b> is given) to
      <i>scalar</i> instead of printing it.</dd>
</dl>
<p class="Pp">Note that depending on the system's declared integral time type,
    <b>strftime</b> may produce incorrect results for epoch times greater than
    2147483647 which corresponds to 2038-01-19 03:14:07 +0000.</p>
</div>
<p class="Pp">The <b>zsh/datetime</b> module makes available several parameters;
    all are readonly:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>EPOCHREALTIME</b></dt>
  <dd>A floating point value representing the number of seconds since the epoch.
      The notional accuracy is to nanoseconds if the <b>clock_gettime</b> call
      is available and to microseconds otherwise, but in practice the range of
      double precision floating point and shell scheduling latencies may be
      significant effects.</dd>
  <dt id="EPOCHSECONDS"><a class="permalink" href="#EPOCHSECONDS"><b>EPOCHSECONDS</b></a></dt>
  <dd>An integer value representing the number of seconds since the epoch.</dd>
  <dt id="epochtime"><a class="permalink" href="#epochtime"><b>epochtime</b></a></dt>
  <dd>An array value containing the number of seconds since the epoch in the
      first element and the remainder of the time since the epoch in nanoseconds
      in the second element. To ensure the two elements are consistent the array
      should be copied or otherwise referenced as a single substitution before
      the values are used. The following idiom may be used:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>for secs nsecs in $epochtime; do</b>
<br/>
<b>  ...</b>
<b>done</b></pre>
</div>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/DB/GDBM_MODULE"><a class="permalink" href="#THE_ZSH/DB/GDBM_MODULE">THE
  ZSH/DB/GDBM MODULE</a></h1>
<p class="Pp">The <b>zsh/db/gdbm</b> module is used to create &quot;tied&quot;
    associative arrays that interface to database files. If the GDBM interface
    is not available, the builtins defined by this module will report an error.
    This module is also intended as a prototype for creating additional database
    interfaces, so the <b>ztie</b> builtin may move to a more generic module in
    the future.</p>
<p class="Pp">The builtins in this module are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>ztie -d db/gdbm -f</b> <i>filename</i> [ <b>-r</b> ]
    <i>arrayname</i></dt>
  <dd>Open the GDBM database identified by <i>filename</i> and, if successful,
      create the associative array <i>arrayname</i> linked to the file. To
      create a local tied array, the parameter must first be declared, so
      commands similar to the following would be executed inside a function
      scope:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>local -A sampledb</b>
<b>ztie -d db/gdbm -f sample.gdbm sampledb</b></pre>
</div>
<p class="Pp">The <b>-r</b> option opens the database file for reading only,
    creating a parameter with the readonly attribute. Without this option, using
    `<b>ztie</b>' on a file for which the user does not have write permission is
    an error. If writable, the database is opened synchronously so fields
    changed in <i>arrayname</i> are immediately written to <i>filename</i>.</p>
<p class="Pp">Changes to the file modes <i>filename</i> after it has been opened
    do not alter the state of <i>arrayname</i>, but `<b>typeset -r</b>
    <i>arrayname</i>' works as expected.</p>
</div>
<dl class="Bl-tag">
  <dt id="zuntie"><a class="permalink" href="#zuntie"><b>zuntie</b> [ <b>-u</b>
    ] <i>arrayname</i> ...</a></dt>
  <dd>Close the GDBM database associated with each <i>arrayname</i> and then
      unset the parameter. The <b>-u</b> option forces an unset of parameters
      made readonly with `<b>ztie -r</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This happens automatically if the parameter is explicitly unset or
    its local scope (function) ends. Note that a readonly parameter may not be
    explicitly unset, so the only way to unset a global parameter created with
    `<b>ztie -r</b>' is to use `<b>zuntie -u</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt id="zgdbmpath"><a class="permalink" href="#zgdbmpath"><b>zgdbmpath</b>
    <i>parametername</i></a></dt>
  <dd>Put path to database file assigned to <i>parametername</i> into
      <b>REPLY</b> scalar.</dd>
  <dt id="zgdbm_tied"><a class="permalink" href="#zgdbm_tied"><b>zgdbm_tied</b></a></dt>
  <dd>Array holding names of all tied parameters.</dd>
</dl>
<p class="Pp">The fields of an associative array tied to GDBM are neither cached
    nor otherwise stored in memory, they are read from or written to the
    database on each reference. Thus, for example, the values in a readonly
    array may be changed by a second writer of the same database file.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/DELTOCHAR_MODULE"><a class="permalink" href="#THE_ZSH/DELTOCHAR_MODULE">THE
  ZSH/DELTOCHAR MODULE</a></h1>
<p class="Pp">The <b>zsh/deltochar</b> module makes available two ZLE
  functions:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>delete-to-char</b></dt>
  <dd>Read a character from the keyboard, and delete from the cursor position up
      to and including the next (or, with repeat count <i>n</i>, the <i>n</i>th)
      instance of that character. Negative repeat counts mean delete
    backwards.</dd>
  <dt id="zap"><a class="permalink" href="#zap"><b>zap-to-char</b></a></dt>
  <dd>This behaves like <b>delete-to-char</b>, except that the final occurrence
      of the character itself is not deleted.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/EXAMPLE_MODULE"><a class="permalink" href="#THE_ZSH/EXAMPLE_MODULE">THE
  ZSH/EXAMPLE MODULE</a></h1>
<p class="Pp">The <b>zsh/example</b> module makes available one builtin
  command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>example</b> [ <b>-flags</b> ] [ <i>args</i> ... ]</dt>
  <dd>Displays the flags and arguments it is invoked with.</dd>
</dl>
<p class="Pp">The purpose of the module is to serve as an example of how to
    write a module.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/FILES_MODULE"><a class="permalink" href="#THE_ZSH/FILES_MODULE">THE
  ZSH/FILES MODULE</a></h1>
<p class="Pp">The <b>zsh/files</b> module makes available some common commands
    for file manipulation as builtins; these commands are probably not needed
    for many normal situations but can be useful in emergency recovery
    situations with constrained resources. The commands do not implement all
    features now required by relevant standards committees.</p>
<p class="Pp">For all commands, a variant beginning <b>zf_</b> is also available
    and loaded automatically. Using the features capability of zmodload will let
    you load only those names you want. Note that it's possible to load only the
    builtins with zsh-specific names using the following command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zmodload -m -F zsh/files b:zf_\*</b></pre>
</div>
<p class="Pp">The commands loaded by default are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>chgrp</b> [ <b>-hRs</b> ] <i>group</i> <i>filename</i> ...</dt>
  <dd>Changes group of files specified. This is equivalent to <b>chown</b> with
      a <i>user-spec</i> argument of `<b>:</b><i>group</i>'.</dd>
  <dt id="chmod"><a class="permalink" href="#chmod"><b>chmod</b> [ <b>-Rs</b> ]
    <i>mode</i> <i>filename</i> ...</a></dt>
  <dd>Changes mode of files specified.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The specified <i>mode</i> must be in octal.</p>
<p class="Pp">The <b>-R</b> option causes <b>chmod</b> to recursively descend
    into directories, changing the mode of all files in the directory after
    changing the mode of the directory itself.</p>
<p class="Pp">The <b>-s</b> option is a zsh extension to <b>chmod</b>
    functionality. It enables paranoid behaviour, intended to avoid security
    problems involving a <b>chmod</b> being tricked into affecting files other
    than the ones intended. It will refuse to follow symbolic links, so that
    (for example) ``<b>chmod 600 /tmp/foo/passwd</b>'' can't accidentally chmod
    <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a link to <b>/etc</b>.
    It will also check where it is after leaving directories, so that a
    recursive chmod of a deep directory tree can't end up recursively chmoding
    <b>/usr</b> as a result of directories being moved up the tree.</p>
</div>
<dl class="Bl-tag">
  <dt id="chown"><a class="permalink" href="#chown"><b>chown</b> [ <b>-hRs</b> ]
    <i>user-spec</i> <i>filename</i> ...</a></dt>
  <dd>Changes ownership and group of files specified.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <i>user-spec</i> can be in four forms:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="user"><a class="permalink" href="#user"><i>user</i></a></dt>
  <dd>change owner to <i>user</i>; do not change group</dd>
  <dt id="user~2"><a class="permalink" href="#user~2"><i>user</i><b>::</b></a></dt>
  <dd>change owner to <i>user</i>; do not change group</dd>
  <dt id="user~3"><a class="permalink" href="#user~3"><i>user</i><b>:</b></a></dt>
  <dd>change owner to <i>user</i>; change group to <i>user</i>'s primary
    group</dd>
  <dt id="user~4"><a class="permalink" href="#user~4"><i>user</i><b>:</b><i>group</i></a></dt>
  <dd>change owner to <i>user</i>; change group to <i>group</i></dd>
  <dt><b>:</b><i>group</i></dt>
  <dd>do not change owner; change group to <i>group</i></dd>
</dl>
<p class="Pp">In each case, the `<b>:</b>' may instead be a `<b>.</b>'. The rule
    is that if there is a `<b>:</b>' then the separator is `<b>:</b>', otherwise
    if there is a `<b>.</b>' then the separator is `<b>.</b>', otherwise there
    is no separator.</p>
<p class="Pp">Each of <i>user</i> and <i>group</i> may be either a username (or
    group name, as appropriate) or a decimal user ID (group ID). Interpretation
    as a name takes precedence, if there is an all-numeric username (or group
    name).</p>
<p class="Pp">If the target is a symbolic link, the <b>-h</b> option causes
    <b>chown</b> to set the ownership of the link instead of its target.</p>
<p class="Pp">The <b>-R</b> option causes <b>chown</b> to recursively descend
    into directories, changing the ownership of all files in the directory after
    changing the ownership of the directory itself.</p>
<p class="Pp">The <b>-s</b> option is a zsh extension to <b>chown</b>
    functionality. It enables paranoid behaviour, intended to avoid security
    problems involving a <b>chown</b> being tricked into affecting files other
    than the ones intended. It will refuse to follow symbolic links, so that
    (for example) ``<b>chown luser /tmp/foo/passwd</b>'' can't accidentally
    chown <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a link to
    <b>/etc</b>. It will also check where it is after leaving directories, so
    that a recursive chown of a deep directory tree can't end up recursively
    chowning <b>/usr</b> as a result of directories being moved up the tree.</p>
</div>
<dl class="Bl-tag">
  <dt><b>ln</b> [ <b>-dfhins</b> ] <i>filename</i> <i>dest</i></dt>
  <dd></dd>
  <dt><b>ln</b> [ <b>-dfhins</b> ] <i>filename</i> ... <i>dir</i></dt>
  <dd>Creates hard (or, with <b>-s</b>, symbolic) links. In the first form, the
      specified <i>dest</i>ination is created, as a link to the specified
      <i>filename</i>. In the second form, each of the <i>filename</i>s is taken
      in turn, and linked to a pathname in the specified <i>dir</i>ectory that
      has the same last pathname component.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Normally, <b>ln</b> will not attempt to create hard links to
    directories. This check can be overridden using the <b>-d</b> option.
    Typically only the super-user can actually succeed in creating hard links to
    directories. This does not apply to symbolic links in any case.</p>
<p class="Pp">By default, existing files cannot be replaced by links. The
    <b>-i</b> option causes the user to be queried about replacing existing
    files. The <b>-f</b> option causes existing files to be silently deleted,
    without querying. <b>-f</b> takes precedence.</p>
<p class="Pp">The <b>-h</b> and <b>-n</b> options are identical and both exist
    for compatibility; either one indicates that if the target is a symlink then
    it should not be dereferenced. Typically this is used in combination with
    <b>-sf</b> so that if an existing link points to a directory then it will be
    removed, instead of followed. If this option is used with multiple filenames
    and the target is a symbolic link pointing to a directory then the result is
    an error.</p>
</div>
<dl class="Bl-tag">
  <dt id="mkdir"><a class="permalink" href="#mkdir"><b>mkdir</b> [ <b>-p</b> ] [
    <b>-m</b> <i>mode</i> ] <i>dir</i> ...</a></dt>
  <dd>Creates directories. With the <b>-p</b> option, non-existing parent
      directories are first created if necessary, and there will be no complaint
      if the directory already exists. The <b>-m</b> option can be used to
      specify (in octal) a set of file permissions for the created directories,
      otherwise mode 777 modified by the current <b>umask</b> (see
      <i>umask</i>(2)) is used.</dd>
  <dt><b>mv</b> [ <b>-fi</b> ] <i>filename</i> <i>dest</i></dt>
  <dd></dd>
  <dt><b>mv</b> [ <b>-fi</b> ] <i>filename</i> ... <i>dir</i></dt>
  <dd>Moves files. In the first form, the specified <i>filename</i> is moved to
      the specified <i>dest</i>ination. In the second form, each of the
      <i>filename</i>s is taken in turn, and moved to a pathname in the
      specified <i>dir</i>ectory that has the same last pathname component.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">By default, the user will be queried before replacing any file
    that the user cannot write to, but writable files will be silently removed.
    The <b>-i</b> option causes the user to be queried about replacing any
    existing files. The <b>-f</b> option causes any existing files to be
    silently deleted, without querying. <b>-f</b> takes precedence.</p>
<p class="Pp">Note that this <b>mv</b> will not move files across devices.
    Historical versions of <b>mv</b>, when actual renaming is impossible, fall
    back on copying and removing files; if this behaviour is desired, use
    <b>cp</b> and <b>rm</b> manually. This may change in a future version.</p>
</div>
<dl class="Bl-tag">
  <dt id="rm"><a class="permalink" href="#rm"><b>rm</b> [ <b>-dfiRrs</b> ]
    <i>filename</i> ...</a></dt>
  <dd>Removes files and directories specified.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Normally, <b>rm</b> will not remove directories (except with the
    <b>-R</b> or <b>-r</b> options). The <b>-d</b> option causes <b>rm</b> to
    try removing directories with <b>unlink</b> (see <i>unlink</i>(2)), the same
    method used for files. Typically only the super-user can actually succeed in
    unlinking directories in this way. <b>-d</b> takes precedence over <b>-R</b>
    and <b>-r</b>.</p>
<p class="Pp">By default, the user will be queried before removing any file that
    the user cannot write to, but writable files will be silently removed. The
    <b>-i</b> option causes the user to be queried about removing any files. The
    <b>-f</b> option causes files to be silently deleted, without querying, and
    suppresses all error indications. <b>-f</b> takes precedence.</p>
<p class="Pp">The <b>-R</b> and <b>-r</b> options cause <b>rm</b> to recursively
    descend into directories, deleting all files in the directory before
    removing the directory with the <b>rmdir</b> system call (see
    <i>rmdir</i>(2)).</p>
<p class="Pp">The <b>-s</b> option is a zsh extension to <b>rm</b>
    functionality. It enables paranoid behaviour, intended to avoid common
    security problems involving a root-run <b>rm</b> being tricked into removing
    files other than the ones intended. It will refuse to follow symbolic links,
    so that (for example) ``<b>rm /tmp/foo/passwd</b>'' can't accidentally
    remove <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a link to
    <b>/etc</b>. It will also check where it is after leaving directories, so
    that a recursive removal of a deep directory tree can't end up recursively
    removing <b>/usr</b> as a result of directories being moved up the tree.</p>
</div>
<dl class="Bl-tag">
  <dt id="rmdir"><a class="permalink" href="#rmdir"><b>rmdir</b> <i>dir</i>
    ...</a></dt>
  <dd>Removes empty directories specified.</dd>
  <dt id="sync"><a class="permalink" href="#sync"><b>sync</b></a></dt>
  <dd>Calls the system call of the same name (see <i>sync</i>(2)), which flushes
      dirty buffers to disk. It might return before the I/O has actually been
      completed.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/LANGINFO_MODULE"><a class="permalink" href="#THE_ZSH/LANGINFO_MODULE">THE
  ZSH/LANGINFO MODULE</a></h1>
<p class="Pp">The <b>zsh/langinfo</b> module makes available one parameter:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>langinfo</b></dt>
  <dd>An associative array that maps langinfo elements to their values.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Your implementation may support a number of the following
  keys:</p>
<p class="Pp"><b>CODESET</b>, <b>D_T_FMT</b>, <b>D_FMT</b>, <b>T_FMT</b>,
    <b>RADIXCHAR</b>, <b>THOUSEP</b>, <b>YESEXPR</b>, <b>NOEXPR</b>,
    <b>CRNCYSTR</b>, <b>ABDAY_{1..7}</b>, <b>DAY_{1..7}</b>,
    <b>ABMON_{1..12}</b>, <b>MON_{1..12}</b>, <b>T_FMT_AMPM</b>, <b>AM_STR</b>,
    <b>PM_STR</b>, <b>ERA</b>, <b>ERA_D_FMT</b>, <b>ERA_D_T_FMT</b>,
    <b>ERA_T_FMT</b>, <b>ALT_DIGITS</b></p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/MAPFILE_MODULE"><a class="permalink" href="#THE_ZSH/MAPFILE_MODULE">THE
  ZSH/MAPFILE MODULE</a></h1>
<p class="Pp">The <b>zsh/mapfile</b> module provides one special associative
    array parameter of the same name.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>mapfile</b></dt>
  <dd>This associative array takes as keys the names of files; the resulting
      value is the content of the file. The value is treated identically to any
      other text coming from a parameter. The value may also be assigned to, in
      which case the file in question is written (whether or not it originally
      existed); or an element may be unset, which will delete the file in
      question. For example, `<b>vared mapfile[myfile]</b>' works as expected,
      editing the file `<b>myfile</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When the array is accessed as a whole, the keys are the names of
    files in the current directory, and the values are empty (to save a huge
    overhead in memory). Thus <b>${(k)mapfile}</b> has the same effect as the
    glob operator <b>*(D)</b>, since files beginning with a dot are not special.
    Care must be taken with expressions such as <b>rm ${(k)mapfile}</b>, which
    will delete every file in the current directory without the usual `<b>rm
    *</b>' test.</p>
<p class="Pp">The parameter <b>mapfile</b> may be made read-only; in that case,
    files referenced may not be written or deleted.</p>
<p class="Pp">A file may conveniently be read into an array as one line per
    element with the form
    `<i>array</i><b>=(&quot;${(f@)mapfile[</b><i>filename</i><b>]}&quot;)</b>'.
    The double quotes and the `<b>@</b>' are necessary to prevent empty lines
    from being removed. Note that if the file ends with a newline, the shell
    will split on the final newline, generating an additional empty field; this
    can be suppressed by using
    `<i>array</i><b>=(&quot;${(f@)${mapfile[</b><i>filename</i><b>]%$'\n'}}&quot;)</b>'.</p>
</div>
<section class="Ss">
<h2 class="Ss" id="Limitations"><a class="permalink" href="#Limitations">Limitations</a></h2>
<p class="Pp">Although reading and writing of the file in question is
    efficiently handled, zsh's internal memory management may be arbitrarily
    baroque; however, <b>mapfile</b> is usually very much more efficient than
    anything involving a loop. Note in particular that the whole contents of the
    file will always reside physically in memory when accessed (possibly
    multiple times, due to standard parameter substitution operations). In
    particular, this means handling of sufficiently long files (greater than the
    machine's swap space, or than the range of the pointer type) will be
    incorrect.</p>
<p class="Pp">No errors are printed or flagged for non-existent, unreadable, or
    unwritable files, as the parameter mechanism is too low in the shell
    execution hierarchy to make this convenient.</p>
<p class="Pp">It is unfortunate that the mechanism for loading modules does not
    yet allow the user to specify the name of the shell parameter to be given
    the special behaviour.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/MATHFUNC_MODULE"><a class="permalink" href="#THE_ZSH/MATHFUNC_MODULE">THE
  ZSH/MATHFUNC MODULE</a></h1>
<p class="Pp">The <b>zsh/mathfunc</b> module provides standard mathematical
    functions for use when evaluating mathematical formulae. The syntax agrees
    with normal C and FORTRAN conventions, for example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>(( f = sin(0.3) ))</b></pre>
</div>
<p class="Pp">assigns the sine of 0.3 to the parameter f.</p>
<p class="Pp">Most functions take floating point arguments and return a floating
    point value. However, any necessary conversions from or to integer type will
    be performed automatically by the shell. Apart from <b>atan</b> with a
    second argument and the <b>abs</b>, <b>int</b> and <b>float</b> functions,
    all functions behave as noted in the manual page for the corresponding C
    function, except that any arguments out of range for the function in
    question will be detected by the shell and an error reported.</p>
<p class="Pp">The following functions take a single floating point argument:
    <b>acos</b>, <b>acosh</b>, <b>asin</b>, <b>asinh</b>, <b>atan</b>,
    <b>atanh</b>, <b>cbrt</b>, <b>ceil</b>, <b>cos</b>, <b>cosh</b>, <b>erf</b>,
    <b>erfc</b>, <b>exp</b>, <b>expm1</b>, <b>fabs</b>, <b>floor</b>,
    <b>gamma</b>, <b>j0</b>, <b>j1</b>, <b>lgamma</b>, <b>log</b>, <b>log10</b>,
    <b>log1p</b>, <b>log2</b>, <b>logb</b>, <b>sin</b>, <b>sinh</b>,
    <b>sqrt</b>, <b>tan</b>, <b>tanh</b>, <b>y0</b>, <b>y1</b>. The <b>atan</b>
    function can optionally take a second argument, in which case it behaves
    like the C function <b>atan2</b>. The <b>ilogb</b> function takes a single
    floating point argument, but returns an integer.</p>
<p class="Pp">The function <b>signgam</b> takes no arguments, and returns an
    integer, which is the C variable of the same name, as described in
    <i>gamma</i>(3). Note that it is therefore only useful immediately after a
    call to <b>gamma</b> or <b>lgamma</b>. Note also that `<b>signgam()</b>' and
    `<b>signgam</b>' are distinct expressions.</p>
<p class="Pp">The functions <b>min</b>, <b>max</b>, and <b>sum</b> are defined
    not in this module but in the <b>zmathfunc</b> autoloadable function,
    described in the section `Mathematical Functions' in
  <i>zshcontrib</i>(1).</p>
<p class="Pp">The following functions take two floating point arguments:
    <b>copysign</b>, <b>fmod</b>, <b>hypot</b>, <b>nextafter</b>.</p>
<p class="Pp">The following take an integer first argument and a floating point
    second argument: <b>jn</b>, <b>yn</b>.</p>
<p class="Pp">The following take a floating point first argument and an integer
    second argument: <b>ldexp</b>, <b>scalb</b>.</p>
<p class="Pp">The function <b>abs</b> does not convert the type of its single
    argument; it returns the absolute value of either a floating point number or
    an integer. The functions <b>float</b> and <b>int</b> convert their
    arguments into a floating point or integer value (by truncation)
    respectively.</p>
<p class="Pp">Note that the C <b>pow</b> function is available in ordinary math
    evaluation as the `<b>**</b>' operator and is not provided here.</p>
<p class="Pp">The function <b>rand48</b> is available if your system's
    mathematical library has the function <b>erand48(3)</b>. It returns a
    pseudo-random floating point number between 0 and 1. It takes a single
    string optional argument.</p>
<p class="Pp">If the argument is not present, the random number seed is
    initialised by three calls to the <b>rand(3)</b> function --- this produces
    the same random numbers as the next three values of <b>$RANDOM</b>.</p>
<p class="Pp">If the argument is present, it gives the name of a scalar
    parameter where the current random number seed will be stored. On the first
    call, the value must contain at least twelve hexadecimal digits (the
    remainder of the string is ignored), or the seed will be initialised in the
    same manner as for a call to <b>rand48</b> with no argument. Subsequent
    calls to <b>rand48</b>(<i>param</i>) will then maintain the seed in the
    parameter <i>param</i> as a string of twelve hexadecimal digits, with no
    base signifier. The random number sequences for different parameters are
    completely independent, and are also independent from that used by calls to
    <b>rand48</b> with no argument.</p>
<p class="Pp">For example, consider</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>print $(( rand48(seed) ))</b>
<b>print $(( rand48() ))</b>
<b>print $(( rand48(seed) ))</b></pre>
</div>
<p class="Pp">Assuming <b>$seed</b> does not exist, it will be initialised by
    the first call. In the second call, the default seed is initialised; note,
    however, that because of the properties of <b>rand()</b> there is a
    correlation between the seeds used for the two initialisations, so for more
    secure uses, you should generate your own 12-byte seed. The third call
    returns to the same sequence of random numbers used in the first call,
    unaffected by the intervening <b>rand48()</b>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/NEARCOLOR_MODULE"><a class="permalink" href="#THE_ZSH/NEARCOLOR_MODULE">THE
  ZSH/NEARCOLOR MODULE</a></h1>
<p class="Pp">The <b>zsh/nearcolor</b> module replaces colours specified as hex
    triplets with the nearest colour in the 88 or 256 colour palettes that are
    widely used by terminal emulators. By default, 24-bit true colour escape
    codes are generated when colours are specified using hex triplets. These are
    not supported by all terminals. The purpose of this module is to make it
    easier to define colour preferences in a form that can work across a range
    of terminal emulators.</p>
<p class="Pp">Aside from the default colour, the ANSI standard for terminal
    escape codes provides for eight colours. The bright attribute brings this to
    sixteen. These basic colours are commonly used in terminal applications due
    to being widely supported. Expanded 88 and 256 colour palettes are also
    common and, while the first sixteen colours vary somewhat between terminals
    and configurations, these add a generally consistent and predictable set of
    colours.</p>
<p class="Pp">In order to use the <b>zsh/nearcolor</b> module, it only needs to
    be loaded. Thereafter, whenever a colour is specified using a hex triplet,
    it will be compared against each of the available colours and the closest
    will be selected. The first sixteen colours are never matched in this
    process due to being unpredictable.</p>
<p class="Pp">It isn't possible to reliably detect support for true colour in
    the terminal emulator. It is therefore recommended to be selective in
    loading the <b>zsh/nearcolor</b> module. For example, the following checks
    the <b>COLORTERM</b> environment variable:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>[[ $COLORTERM = *(24bit|truecolor)* ]] || zmodload zsh/nearcolor</b></pre>
</div>
<p class="Pp">Note that some terminals accept the true color escape codes but
    map them internally to a more limited palette in a similar manner to the
    <b>zsh/nearcolor</b> module.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/NEWUSER_MODULE"><a class="permalink" href="#THE_ZSH/NEWUSER_MODULE">THE
  ZSH/NEWUSER MODULE</a></h1>
<p class="Pp">The <b>zsh/newuser</b> module is loaded at boot if it is
    available, the <b>RCS</b> option is set, and the <b>PRIVILEGED</b> option is
    not set (all three are true by default). This takes place immediately after
    commands in the global <b>zshenv</b> file (typically <b>/etc/zshenv</b>), if
    any, have been executed. If the module is not available it is silently
    ignored by the shell; the module may safely be removed from
    <b>$MODULE_PATH</b> by the administrator if it is not required.</p>
<p class="Pp">On loading, the module tests if any of the start-up files
    <b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b> or <b>.zlogin</b> exist in
    the directory given by the environment variable <b>ZDOTDIR</b>, or the
    user's home directory if that is not set. The test is not performed and the
    module halts processing if the shell was in an emulation mode (i.e. had been
    invoked as some other shell than zsh).</p>
<p class="Pp">If none of the start-up files were found, the module then looks
    for the file <b>newuser</b> first in a sitewide directory, usually the
    parent directory of the <b>site-functions</b> directory, and if that is not
    found the module searches in a version-specific directory, usually the
    parent of the <b>functions</b> directory containing version-specific
    functions. (These directories can be configured when zsh is built using the
    <b>--enable-site-scriptdir=</b><i>dir</i> and
    <b>--enable-scriptdir=</b><i>dir</i> flags to <b>configure</b>,
    respectively; the defaults are <i>prefix</i><b>/share/zsh</b> and
    <i>prefix</i><b>/share/zsh/$ZSH_VERSION</b> where the default <i>prefix</i>
    is <b>/usr/local</b>.)</p>
<p class="Pp">If the file <b>newuser</b> is found, it is then sourced in the
    same manner as a start-up file. The file is expected to contain code to
    install start-up files for the user, however any valid shell code will be
    executed.</p>
<p class="Pp">The <b>zsh/newuser</b> module is then unconditionally
  unloaded.</p>
<p class="Pp">Note that it is possible to achieve exactly the same effect as the
    <b>zsh/newuser</b> module by adding code to <b>/etc/zshenv</b>. The module
    exists simply to allow the shell to make arrangements for new users without
    the need for intervention by package maintainers and system
  administrators.</p>
<p class="Pp">The script supplied with the module invokes the shell function
    <b>zsh-newuser-install</b>. This may be invoked directly by the user even if
    the <b>zsh/newuser</b> module is disabled. Note, however, that if the module
    is not installed the function will not be installed either. The function is
    documented in the section User Configuration Functions in
    <i>zshcontrib</i>(1).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/PARAMETER_MODULE"><a class="permalink" href="#THE_ZSH/PARAMETER_MODULE">THE
  ZSH/PARAMETER MODULE</a></h1>
<p class="Pp">The <b>zsh/parameter</b> module gives access to some of the
    internal hash tables used by the shell by defining some special
  parameters.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>options</b></dt>
  <dd>The keys for this associative array are the names of the options that can
      be set and unset using the <b>setopt</b> and <b>unsetopt</b> builtins. The
      value of each key is either the string <b>on</b> if the option is
      currently set, or the string <b>off</b> if the option is unset. Setting a
      key to one of these strings is like setting or unsetting the option,
      respectively. Unsetting a key in this array is like setting it to the
      value <b>off</b>.</dd>
  <dt id="commands"><a class="permalink" href="#commands"><b>commands</b></a></dt>
  <dd>This array gives access to the command hash table. The keys are the names
      of external commands, the values are the pathnames of the files that would
      be executed when the command would be invoked. Setting a key in this array
      defines a new entry in this table in the same way as with the <b>hash</b>
      builtin. Unsetting a key as in `<b>unset</b>
      <b>&quot;commands[foo]&quot;</b>' removes the entry for the given key from
      the command hash table.</dd>
  <dt id="functions"><a class="permalink" href="#functions"><b>functions</b></a></dt>
  <dd>This associative array maps names of enabled functions to their
      definitions. Setting a key in it is like defining a function with the name
      given by the key and the body given by the value. Unsetting a key removes
      the definition for the function named by the key.</dd>
  <dt id="dis_functions"><a class="permalink" href="#dis_functions"><b>dis_functions</b></a></dt>
  <dd>Like <b>functions</b> but for disabled functions.</dd>
  <dt id="functions_source"><a class="permalink" href="#functions_source"><b>functions_source</b></a></dt>
  <dd>This readonly associative array maps names of enabled functions to the
      name of the file containing the source of the function.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For an autoloaded function that has already been loaded, or marked
    for autoload with an absolute path, or that has had its path resolved with
    `<b>functions -r</b>', this is the file found for autoloading, resolved to
    an absolute path.</p>
<p class="Pp">For a function defined within the body of a script or sourced
    file, this is the name of that file. In this case, this is the exact path
    originally used to that file, which may be a relative path.</p>
<p class="Pp">For any other function, including any defined at an interactive
    prompt or an autoload function whose path has not yet been resolved, this is
    the empty string. However, the hash element is reported as defined just so
    long as the function is present: the keys to this hash are the same as those
    to <b>$functions</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="dis_functions_source"><a class="permalink" href="#dis_functions_source"><b>dis_functions_source</b></a></dt>
  <dd>Like <b>functions_source</b> but for disabled functions.</dd>
  <dt id="builtins"><a class="permalink" href="#builtins"><b>builtins</b></a></dt>
  <dd>This associative array gives information about the builtin commands
      currently enabled. The keys are the names of the builtin commands and the
      values are either `<b>undefined</b>' for builtin commands that will
      automatically be loaded from a module if invoked or `<b>defined</b>' for
      builtin commands that are already loaded.</dd>
  <dt id="dis_builtins"><a class="permalink" href="#dis_builtins"><b>dis_builtins</b></a></dt>
  <dd>Like <b>builtins</b> but for disabled builtin commands.</dd>
  <dt id="reswords"><a class="permalink" href="#reswords"><b>reswords</b></a></dt>
  <dd>This array contains the enabled reserved words.</dd>
  <dt id="dis_reswords"><a class="permalink" href="#dis_reswords"><b>dis_reswords</b></a></dt>
  <dd>Like <b>reswords</b> but for disabled reserved words.</dd>
  <dt id="patchars"><a class="permalink" href="#patchars"><b>patchars</b></a></dt>
  <dd>This array contains the enabled pattern characters.</dd>
  <dt id="dis_patchars"><a class="permalink" href="#dis_patchars"><b>dis_patchars</b></a></dt>
  <dd>Like <b>patchars</b> but for disabled pattern characters.</dd>
  <dt id="aliases"><a class="permalink" href="#aliases"><b>aliases</b></a></dt>
  <dd>This maps the names of the regular aliases currently enabled to their
      expansions.</dd>
  <dt id="dis_aliases"><a class="permalink" href="#dis_aliases"><b>dis_aliases</b></a></dt>
  <dd>Like <b>aliases</b> but for disabled regular aliases.</dd>
  <dt id="galiases"><a class="permalink" href="#galiases"><b>galiases</b></a></dt>
  <dd>Like <b>aliases</b>, but for global aliases.</dd>
  <dt id="dis_galiases"><a class="permalink" href="#dis_galiases"><b>dis_galiases</b></a></dt>
  <dd>Like <b>galiases</b> but for disabled global aliases.</dd>
  <dt id="saliases"><a class="permalink" href="#saliases"><b>saliases</b></a></dt>
  <dd>Like <b>raliases</b>, but for suffix aliases.</dd>
  <dt id="dis_saliases"><a class="permalink" href="#dis_saliases"><b>dis_saliases</b></a></dt>
  <dd>Like <b>saliases</b> but for disabled suffix aliases.</dd>
  <dt id="parameters"><a class="permalink" href="#parameters"><b>parameters</b></a></dt>
  <dd>The keys in this associative array are the names of the parameters
      currently defined. The values are strings describing the type of the
      parameter, in the same format used by the <b>t</b> parameter flag, see
      <i>zshexpn</i>(1) . Setting or unsetting keys in this array is not
      possible.</dd>
  <dt id="modules"><a class="permalink" href="#modules"><b>modules</b></a></dt>
  <dd>An associative array giving information about modules. The keys are the
      names of the modules loaded, registered to be autoloaded, or aliased. The
      value says which state the named module is in and is one of the strings
      `<b>loaded</b>', `<b>autoloaded</b>', or `<b>alias:</b><i>name</i>', where
      <i>name</i> is the name the module is aliased to.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Setting or unsetting keys in this array is not possible.</p>
</div>
<dl class="Bl-tag">
  <dt id="dirstack"><a class="permalink" href="#dirstack"><b>dirstack</b></a></dt>
  <dd>A normal array holding the elements of the directory stack. Note that the
      output of the <b>dirs</b> builtin command includes one more directory, the
      current working directory.</dd>
  <dt id="history"><a class="permalink" href="#history"><b>history</b></a></dt>
  <dd>This associative array maps history event numbers to the full history
      lines. Although it is presented as an associative array, the array of all
      values (<b>${history[@]}</b>) is guaranteed to be returned in order from
      most recent to oldest history event, that is, by decreasing history event
      number.</dd>
  <dt id="historywords"><a class="permalink" href="#historywords"><b>historywords</b></a></dt>
  <dd>A special array containing the words stored in the history. These also
      appear in most to least recent order.</dd>
  <dt id="jobdirs"><a class="permalink" href="#jobdirs"><b>jobdirs</b></a></dt>
  <dd>This associative array maps job numbers to the directories from which the
      job was started (which may not be the current directory of the job).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The keys of the associative arrays are usually valid job numbers,
    and these are the values output with, for example, <b>${(k)jobdirs}</b>.
    Non-numeric job references may be used when looking up a value; for example,
    <b>${jobdirs[%+]}</b> refers to the current job.</p>
</div>
<dl class="Bl-tag">
  <dt id="jobtexts"><a class="permalink" href="#jobtexts"><b>jobtexts</b></a></dt>
  <dd>This associative array maps job numbers to the texts of the command lines
      that were used to start the jobs.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Handling of the keys of the associative array is as described for
    <b>jobdirs</b> above.</p>
</div>
<dl class="Bl-tag">
  <dt id="jobstates"><a class="permalink" href="#jobstates"><b>jobstates</b></a></dt>
  <dd>This associative array gives information about the states of the jobs
      currently known. The keys are the job numbers and the values are strings
      of the form
      `<i>job-state</i><b>:</b><i>mark</i><b>:</b><i>pid</i><b>=</b><i>state</i>...'.
      The <i>job-state</i> gives the state the whole job is currently in, one of
      `<b>running</b>', `<b>suspended</b>', or `<b>done</b>'. The <i>mark</i> is
      `<b>+</b>' for the current job, `<b>-</b>' for the previous job and empty
      otherwise. This is followed by one
      `<b>:</b><i>pid</i><b>=</b><i>state</i>' for every process in the job. The
      <i>pid</i>s are, of course, the process IDs and the <i>state</i> describes
      the state of that process.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Handling of the keys of the associative array is as described for
    <b>jobdirs</b> above.</p>
</div>
<dl class="Bl-tag">
  <dt id="nameddirs"><a class="permalink" href="#nameddirs"><b>nameddirs</b></a></dt>
  <dd>This associative array maps the names of named directories to the
      pathnames they stand for.</dd>
  <dt id="userdirs"><a class="permalink" href="#userdirs"><b>userdirs</b></a></dt>
  <dd>This associative array maps user names to the pathnames of their home
      directories.</dd>
  <dt id="usergroups"><a class="permalink" href="#usergroups"><b>usergroups</b></a></dt>
  <dd>This associative array maps names of system groups of which the current
      user is a member to the corresponding group identifiers. The contents are
      the same as the groups output by the <b>id</b> command.</dd>
  <dt id="funcfiletrace"><a class="permalink" href="#funcfiletrace"><b>funcfiletrace</b></a></dt>
  <dd>This array contains the absolute line numbers and corresponding file names
      for the point where the current function, sourced file, or (if
      <b>EVAL_LINENO</b> is set) <b>eval</b> command was called. The array is of
      the same length as <b>funcsourcetrace</b> and <b>functrace</b>, but
      differs from <b>funcsourcetrace</b> in that the line and file are the
      point of call, not the point of definition, and differs from
      <b>functrace</b> in that all values are absolute line numbers in files,
      rather than relative to the start of a function, if any.</dd>
  <dt id="funcsourcetrace"><a class="permalink" href="#funcsourcetrace"><b>funcsourcetrace</b></a></dt>
  <dd>This array contains the file names and line numbers of the points where
      the functions, sourced files, and (if <b>EVAL_LINENO</b> is set)
      <b>eval</b> commands currently being executed were defined. The line
      number is the line where the `<b>function</b> <i>name</i>' or `<i>name</i>
      <b>()</b>' started. In the case of an autoloaded function the line number
      is reported as zero. The format of each element is
      <i>filename</i><b>:</b><i>lineno</i>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For functions autoloaded from a file in native zsh format, where
    only the body of the function occurs in the file, or for files that have
    been executed by the <b>source</b> or `<b>.</b>' builtins, the trace
    information is shown as <i>filename</i><b>:</b><i>0</i>, since the entire
    file is the definition. The source file name is resolved to an absolute path
    when the function is loaded or the path to it otherwise resolved.</p>
<p class="Pp">Most users will be interested in the information in the
    <b>funcfiletrace</b> array instead.</p>
</div>
<dl class="Bl-tag">
  <dt id="funcstack"><a class="permalink" href="#funcstack"><b>funcstack</b></a></dt>
  <dd>This array contains the names of the functions, sourced files, and (if
      <b>EVAL_LINENO</b> is set) <b>eval</b> commands. currently being executed.
      The first element is the name of the function using the parameter.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The standard shell array <b>zsh_eval_context</b> can be used to
    determine the type of shell construct being executed at each depth: note,
    however, that is in the opposite order, with the most recent item last, and
    it is more detailed, for example including an entry for <b>toplevel</b>, the
    main shell code being executed either interactively or from a script, which
    is not present in <b>$funcstack</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="functrace"><a class="permalink" href="#functrace"><b>functrace</b></a></dt>
  <dd>This array contains the names and line numbers of the callers
      corresponding to the functions currently being executed. The format of
      each element is <i>name</i><b>:</b><i>lineno</i>. Callers are also shown
      for sourced files; the caller is the point where the <b>source</b> or
      `<b>.</b>' command was executed.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/PCRE_MODULE"><a class="permalink" href="#THE_ZSH/PCRE_MODULE">THE
  ZSH/PCRE MODULE</a></h1>
<p class="Pp">The <b>zsh/pcre</b> module makes some commands available as
    builtins:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>pcre_compile</b> [ <b>-aimxs</b> ] <i>PCRE</i></dt>
  <dd>Compiles a perl-compatible regular expression.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Option <b>-a</b> will force the pattern to be anchored. Option
    <b>-i</b> will compile a case-insensitive pattern. Option <b>-m</b> will
    compile a multi-line pattern; that is, <b>^</b> and <b>$</b> will match
    newlines within the pattern. Option <b>-x</b> will compile an extended
    pattern, wherein whitespace and <b>#</b> comments are ignored. Option
    <b>-s</b> makes the dot metacharacter match all characters, including those
    that indicate newline.</p>
</div>
<dl class="Bl-tag">
  <dt id="pcre_study"><a class="permalink" href="#pcre_study"><b>pcre_study</b></a></dt>
  <dd>Studies the previously-compiled PCRE which may result in faster
    matching.</dd>
  <dt id="pcre_match"><a class="permalink" href="#pcre_match"><b>pcre_match</b>
    [ <b>-v</b> <i>var</i> ] [ <b>-a</b> <i>arr</i> ] [ <b>-n</b> <i>offset</i>
    ] [ <b>-b</b> ] <i>string</i></a></dt>
  <dd>Returns successfully if <b>string</b> matches the previously-compiled
      PCRE.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Upon successful match, if the expression captures substrings
    within parentheses, <b>pcre_match</b> will set the array <b>match</b> to
    those substrings, unless the <b>-a</b> option is given, in which case it
    will set the array <i>arr</i>. Similarly, the variable <b>MATCH</b> will be
    set to the entire matched portion of the string, unless the <b>-v</b> option
    is given, in which case the variable <i>var</i> will be set. No variables
    are altered if there is no successful match. A <b>-n</b> option starts
    searching for a match from the byte <i>offset</i> position in <i>string</i>.
    If the <b>-b</b> option is given, the variable <b>ZPCRE_OP</b> will be set
    to an offset pair string, representing the byte offset positions of the
    entire matched portion within the <i>string</i>. For example, a
    <b>ZPCRE_OP</b> set to &quot;32 45&quot; indicates that the matched portion
    began on byte offset 32 and ended on byte offset 44. Here, byte offset
    position 45 is the position directly after the matched portion. Keep in mind
    that the byte position isn't necessarily the same as the character position
    when UTF-8 characters are involved. Consequently, the byte offset positions
    are only to be relied on in the context of using them for subsequent
    searches on <i>string</i>, using an offset position as an argument to the
    <b>-n</b> option. This is mostly used to implement the &quot;find all
    non-overlapping matches&quot; functionality.</p>
<p class="Pp">A simple example of &quot;find all non-overlapping
  matches&quot;:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>string=&quot;The following zip codes: 78884 90210 99513&quot;</b>
<b>pcre_compile -m &quot;\d{5}&quot;</b>
<b>accum=()</b>
<b>pcre_match -b -- $string</b>
<b>while [[ $? -eq 0 ]] do</b>
<br/>
<b>    b=($=ZPCRE_OP)</b>
<br/>
<b>    accum+=$MATCH</b>
<br/>
<b>    pcre_match -b -n $b[2] -- $string</b>
<b>done</b>
<b>print -l $accum</b></pre>
</div>
</div>
<p class="Pp">The <b>zsh/pcre</b> module makes available the following test
    condition:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><i>expr</i> <b>-pcre-match</b> <i>pcre</i></dt>
  <dd>Matches a string against a perl-compatible regular expression.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>[[ &quot;$text&quot; -pcre-match ^d+$ ]] &amp;&amp;</b>
<b>print text variable contains only &quot;d's&quot;.</b></pre>
</div>
<p class="Pp">If the <b>REMATCH_PCRE</b> option is set, the <b>=~</b> operator
    is equivalent to <b>-pcre-match</b>, and the <b>NO_CASE_MATCH</b> option may
    be used. Note that <b>NO_CASE_MATCH</b> never applies to the
    <b>pcre_match</b> builtin, instead use the <b>-i</b> switch of
    <b>pcre_compile</b>.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/PARAM/PRIVATE_MODULE"><a class="permalink" href="#THE_ZSH/PARAM/PRIVATE_MODULE">THE
  ZSH/PARAM/PRIVATE MODULE</a></h1>
<p class="Pp">The <b>zsh/param/private</b> module is used to create parameters
    whose scope is limited to the current function body, and <i>not</i> to other
    functions called by the current function.</p>
<p class="Pp">This module provides a single autoloaded builtin:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>private</b> [ {<b>+</b>|<b>-</b>}<b>AHUahlprtux</b> ] [
    {<b>+</b>|<b>-</b>}<b>EFLRZi</b> [ <i>n</i> ] ] [
    <i>name</i>[<b>=</b><i>value</i>] ... ]</dt>
  <dd>The <b>private</b> builtin accepts all the same options and arguments as
      <b>local</b> (<i>zshbuiltins</i>(1)) except for the `<b>-</b><b>T</b>'
      option. Tied parameters may not be made private.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If used at the top level (outside a function scope),
    <b>private</b> creates a normal parameter in the same manner as
    <b>declare</b> or <b>typeset</b>. A warning about this is printed if
    <b>WARN_CREATE_GLOBAL</b> is set (<i>zshoptions</i>(1)). Used inside a
    function scope, <b>private</b> creates a local parameter similar to one
    declared with <b>local</b>, except having special properties noted
  below.</p>
<p class="Pp">Special parameters which expose or manipulate internal shell
    state, such as <b>ARGC</b>, <b>argv</b>, <b>COLUMNS</b>, <b>LINES</b>,
    <b>UID</b>, <b>EUID</b>, <b>IFS</b>, <b>PROMPT</b>, <b>RANDOM</b>,
    <b>SECONDS</b>, etc., cannot be made private unless the `<b>-</b><b>h</b>'
    option is used to hide the special meaning of the parameter. This may change
    in the future.</p>
</div>
<p class="Pp">As with other <b>typeset</b> equivalents, <b>private</b> is both a
    builtin and a reserved word, so arrays may be assigned with parenthesized
    word list <i>name</i><b>=(</b><i>value</i>...<b>)</b> syntax. However, the
    reserved word `<b>private</b>' is not available until
    <b>zsh/param/private</b> is loaded, so care must be taken with order of
    execution and parsing for function definitions which use <b>private</b>. To
    compensate for this, the module also adds the option `<b>-P</b>' to the
    `<b>local</b>' builtin to declare private parameters.</p>
<p class="Pp">For example, this construction fails if <b>zsh/param/private</b>
    has not yet been loaded when `<b>bad_declaration</b>' is defined:</p>
<div class="Bd-indent">
<pre><b>bad_declaration() {</b>
<br/>
<b>  zmodload zsh/param/private</b>
<br/>
<b>  private array=( one two three )</b>
<b>}</b></pre>
</div>
<p class="Pp">This construction works because <b>local</b> is already a keyword,
    and the module is loaded before the statement is executed:</p>
<div class="Bd-indent">
<pre><b>good_declaration() {</b>
<br/>
<b>  zmodload zsh/param/private</b>
<br/>
<b>  local -P array=( one two three )</b>
<b>}</b></pre>
</div>
<p class="Pp">The following is usable in scripts but may have trouble with
    <b>autoload</b>:</p>
<div class="Bd-indent">
<pre><b>zmodload zsh/param/private</b>
<b>iffy_declaration() {</b>
<br/>
<b>  private array=( one two three )</b>
<b>}</b></pre>
</div>
<p class="Pp">The <b>private</b> builtin may always be used with scalar
    assignments and for declarations without assignments.</p>
<p class="Pp">Parameters declared with <b>private</b> have the following
    properties:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Within the function body where it is declared, the parameter behaves as a
      local, except as noted above for tied or special parameters.</dd>
  <dt>&#x2022;</dt>
  <dd>The type of a parameter declared private cannot be changed in the scope
      where it was declared, even if the parameter is unset. Thus an array
      cannot be assigned to a private scalar, etc.</dd>
  <dt>&#x2022;</dt>
  <dd>Within any other function called by the declaring function, the private
      parameter does <i>NOT</i> hide other parameters of the same name, so for
      example a global parameter of the same name is visible and may be assigned
      or unset. This includes calls to anonymous functions, although that may
      also change in the future.</dd>
  <dt>&#x2022;</dt>
  <dd>An exported private remains in the environment of inner scopes but appears
      unset for the current shell in those scopes. Generally, exporting private
      parameters should be avoided.</dd>
</dl>
<p class="Pp">Note that this differs from the static scope defined by compiled
    languages derived from C, in that the a new call to the same function
    creates a new scope, i.e., the parameter is still associated with the call
    stack rather than with the function definition. It differs from ksh
    `<b>typeset -S</b>' because the syntax used to define the function has no
    bearing on whether the parameter scope is respected.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/REGEX_MODULE"><a class="permalink" href="#THE_ZSH/REGEX_MODULE">THE
  ZSH/REGEX MODULE</a></h1>
<p class="Pp">The <b>zsh/regex</b> module makes available the following test
    condition:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><i>expr</i> <b>-regex-match</b> <i>regex</i></dt>
  <dd>Matches a string against a POSIX extended regular expression. On
      successful match, matched portion of the string will normally be placed in
      the <b>MATCH</b> variable. If there are any capturing parentheses within
      the regex, then the <b>match</b> array variable will contain those. If the
      match is not successful, then the variables will not be altered.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>[[ alphabetical -regex-match ^a([^a]+)a([^a]+)a ]] &amp;&amp;</b>
<b>print -l $MATCH X $match</b></pre>
</div>
<p class="Pp">If the option <b>REMATCH_PCRE</b> is not set, then the <b>=~</b>
    operator will automatically load this module as needed and will invoke the
    <b>-regex-match</b> operator.</p>
<p class="Pp">If <b>BASH_REMATCH</b> is set, then the array <b>BASH_REMATCH</b>
    will be set instead of <b>MATCH</b> and <b>match</b>.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/SCHED_MODULE"><a class="permalink" href="#THE_ZSH/SCHED_MODULE">THE
  ZSH/SCHED MODULE</a></h1>
<p class="Pp">The <b>zsh/sched</b> module makes available one builtin command
    and one parameter.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>sched</b> [<b>-o</b>]
    [<b>+</b>]<i>hh</i><b>:</b><i>mm</i>[<b>:</b><i>ss</i>] <i>command</i>
    ...</dt>
  <dd></dd>
  <dt><b>sched</b> [<b>-o</b>] [<b>+</b>]<i>seconds</i> <i>command</i> ...</dt>
  <dd></dd>
  <dt><b>sched</b> [ <b>-</b><i>item</i> ]</dt>
  <dd>Make an entry in the scheduled list of commands to execute. The time may
      be specified in either absolute or relative time, and either as hours,
      minutes and (optionally) seconds separated by a colon, or seconds alone.
      An absolute number of seconds indicates the time since the epoch
      (1970/01/01 00:00); this is useful in combination with the features in the
      <b>zsh/datetime</b> module, see the zsh/datetime module entry in
      <i>zshmodules</i>(1).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">With no arguments, prints the list of scheduled commands. If the
    scheduled command has the <b>-o</b> flag set, this is shown at the start of
    the command.</p>
<p class="Pp">With the argument `<b>-</b><i>item</i>', removes the given item
    from the list. The numbering of the list is continuous and entries are in
    time order, so the numbering can change when entries are added or
  deleted.</p>
<p class="Pp">Commands are executed either immediately before a prompt, or while
    the shell's line editor is waiting for input. In the latter case it is
    useful to be able to produce output that does not interfere with the line
    being edited. Providing the option <b>-o</b> causes the shell to clear the
    command line before the event and redraw it afterwards. This should be used
    with any scheduled event that produces visible output to the terminal; it is
    not needed, for example, with output that updates a terminal emulator's
    title bar.</p>
<p class="Pp">To effect changes to the editor buffer when an event executes, use
    the `<b>zle</b>' command with no arguments to test whether the editor is
    active, and if it is, then use `<b>zle </b><i>widget</i>' to access the
    editor via the named <i>widget</i>.</p>
<p class="Pp">The <b>sched</b> builtin is not made available by default when the
    shell starts in a mode emulating another shell. It can be made available
    with the command `<b>zmodload -F zsh/sched b:sched</b>'.</p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zsh_scheduled_events</b></dt>
  <dd>A readonly array corresponding to the events scheduled by the <b>sched</b>
      builtin. The indices of the array correspond to the numbers shown when
      <b>sched</b> is run with no arguments (provided that the <b>KSH_ARRAYS</b>
      option is not set). The value of the array consists of the scheduled time
      in seconds since the epoch (see the section `The zsh/datetime Module' for
      facilities for using this number), followed by a colon, followed by any
      options (which may be empty but will be preceded by a `<b>-</b>'
      otherwise), followed by a colon, followed by the command to be
    executed.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>sched</b> builtin should be used for manipulating the
    events. Note that this will have an immediate effect on the contents of the
    array, so that indices may become invalid.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/NET/SOCKET_MODULE"><a class="permalink" href="#THE_ZSH/NET/SOCKET_MODULE">THE
  ZSH/NET/SOCKET MODULE</a></h1>
<p class="Pp">The <b>zsh/net/socket</b> module makes available one builtin
    command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zsocket</b> [ <b>-altv</b> ] [ <b>-d</b> <i>fd</i> ] [ <i>args</i>
    ]</dt>
  <dd><b>zsocket</b> is implemented as a builtin to allow full use of shell
      command line editing, file I/O, and job control mechanisms.</dd>
</dl>
<section class="Ss">
<h2 class="Ss">Outbound Connections</h2>
<dl class="Bl-tag">
  <dt><b>zsocket</b> [ <b>-v</b> ] [ <b>-d</b> <i>fd</i> ] <i>filename</i></dt>
  <dd>Open a new Unix domain connection to <i>filename</i>. The shell parameter
      <b>REPLY</b> will be set to the file descriptor associated with that
      connection. Currently, only stream connections are supported.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>-d</b> is specified, its argument will be taken as the
    target file descriptor for the connection.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
<p class="Pp">File descriptors can be closed with normal shell syntax when no
    longer needed, for example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>exec {REPLY}&gt;&amp;-</b></pre>
</div>
</div>
</section>
<section class="Ss">
<h2 class="Ss">Inbound Connections</h2>
<dl class="Bl-tag">
  <dt><b>zsocket</b> <b>-l</b> [ <b>-v</b> ] [ <b>-d</b> <i>fd</i> ]
    <i>filename</i></dt>
  <dd><b>zsocket -l</b> will open a socket listening on <i>filename</i>. The
      shell parameter <b>REPLY</b> will be set to the file descriptor associated
      with that listener. The file descriptor remains open in subshells and
      forked external executables.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>-d</b> is specified, its argument will be taken as the
    target file descriptor for the connection.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="zsocket"><a class="permalink" href="#zsocket"><b>zsocket</b> <b>-a</b>
    [ <b>-tv</b> ] [ <b>-d</b> <i>targetfd</i> ] <i>listenfd</i></a></dt>
  <dd><b>zsocket -a</b> will accept an incoming connection to the socket
      associated with <i>listenfd</i>. The shell parameter <b>REPLY</b> will be
      set to the file descriptor associated with the inbound connection. The
      file descriptor remains open in subshells and forked external
    executables.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>-d</b> is specified, its argument will be taken as the
    target file descriptor for the connection.</p>
<p class="Pp">If <b>-t</b> is specified, <b>zsocket</b> will return if no
    incoming connection is pending. Otherwise it will wait for one.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/STAT_MODULE"><a class="permalink" href="#THE_ZSH/STAT_MODULE">THE
  ZSH/STAT MODULE</a></h1>
<p class="Pp">The <b>zsh/stat</b> module makes available one builtin command
    under two possible names:</p>
<p class="Pp"></p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zstat </b>[ <b>-gnNolLtTrs</b> ] [ <b>-f</b> <i>fd</i> ] [ <b>-H</b>
    <i>hash</i> ] [ <b>-A</b> <i>array</i> ] [ <b>-F</b> <i>fmt</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[ <b>+</b><i>element</i> ] [ <i>file</i> ... ]</dt>
  <dd></dd>
  <dt><b>stat</b> <i>...</i></dt>
  <dd>The command acts as a front end to the <b>stat</b> system call (see
      <i>stat</i>(2)). The same command is provided with two names; as the name
      <b>stat</b> is often used by an external command it is recommended that
      only the <b>zstat</b> form of the command is used. This can be arranged by
      loading the module with the command `<b>zmodload -F zsh/stat</b>
      <b>b:zstat</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the <b>stat</b> call fails, the appropriate system error
    message printed and status 1 is returned. The fields of <b>struct stat</b>
    give information about the files provided as arguments to the command. In
    addition to those available from the <b>stat</b> call, an extra element
    `<b>link</b>' is provided. These elements are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>device</b></dt>
  <dd>The number of the device on which the file resides.</dd>
  <dt id="inode"><a class="permalink" href="#inode"><b>inode</b></a></dt>
  <dd>The unique number of the file on this device (`<i>inode</i>' number).</dd>
  <dt id="mode"><a class="permalink" href="#mode"><b>mode</b></a></dt>
  <dd>The mode of the file; that is, the file's type and access permissions.
      With the <b>-s</b> option, this will be returned as a string corresponding
      to the first column in the display of the <b>ls -l</b> command.</dd>
  <dt id="nlink"><a class="permalink" href="#nlink"><b>nlink</b></a></dt>
  <dd>The number of hard links to the file.</dd>
  <dt id="uid"><a class="permalink" href="#uid"><b>uid</b></a></dt>
  <dd>The user ID of the owner of the file. With the <b>-s</b> option, this is
      displayed as a user name.</dd>
  <dt id="gid"><a class="permalink" href="#gid"><b>gid</b></a></dt>
  <dd>The group ID of the file. With the <b>-s</b> option, this is displayed as
      a group name.</dd>
  <dt id="rdev"><a class="permalink" href="#rdev"><b>rdev</b></a></dt>
  <dd>The raw device number. This is only useful for special devices.</dd>
  <dt id="size"><a class="permalink" href="#size"><b>size</b></a></dt>
  <dd>The size of the file in bytes.</dd>
  <dt><b>atime</b></dt>
  <dd></dd>
  <dt><b>mtime</b></dt>
  <dd></dd>
  <dt><b>ctime</b></dt>
  <dd>The last access, modification and inode change times of the file,
      respectively, as the number of seconds since midnight GMT on 1st January,
      1970. With the <b>-s</b> option, these are printed as strings for the
      local time zone; the format can be altered with the <b>-F</b> option, and
      with the <b>-g</b> option the times are in GMT.</dd>
  <dt id="blksize"><a class="permalink" href="#blksize"><b>blksize</b></a></dt>
  <dd>The number of bytes in one allocation block on the device on which the
      file resides.</dd>
  <dt id="block"><a class="permalink" href="#block"><b>block</b></a></dt>
  <dd>The number of disk blocks used by the file.</dd>
  <dt id="link"><a class="permalink" href="#link"><b>link</b></a></dt>
  <dd>If the file is a link and the <b>-L</b> option is in effect, this contains
      the name of the file linked to, otherwise it is empty. Note that if this
      element is selected (``<b>zstat +link</b>'') then the <b>-L</b> option is
      automatically used.</dd>
</dl>
<p class="Pp">A particular element may be selected by including its name
    preceded by a `<b>+</b>' in the option list; only one element is allowed.
    The element may be shortened to any unique set of leading characters.
    Otherwise, all elements will be shown for all files.</p>
<p class="Pp">Options:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-A</b> <i>array</i></dt>
  <dd>Instead of displaying the results on standard output, assign them to an
      <i>array</i>, one <b>struct stat</b> element per array element for each
      file in order. In this case neither the name of the element nor the name
      of the files appears in <i>array</i> unless the <b>-t</b> or <b>-n</b>
      options were given, respectively. If <b>-t</b> is given, the element name
      appears as a prefix to the appropriate array element; if <b>-n</b> is
      given, the file name appears as a separate array element preceding all the
      others. Other formatting options are respected.</dd>
  <dt id="H"><a class="permalink" href="#H"><b>-H</b> <i>hash</i></a></dt>
  <dd>Similar to <b>-A</b>, but instead assign the values to <i>hash</i>. The
      keys are the elements listed above. If the <b>-n</b> option is provided
      then the name of the file is included in the hash with key
    <b>name</b>.</dd>
  <dt id="f"><a class="permalink" href="#f"><b>-f</b> <i>fd</i></a></dt>
  <dd>Use the file on file descriptor <i>fd</i> instead of named files; no list
      of file names is allowed in this case.</dd>
  <dt id="F"><a class="permalink" href="#F"><b>-F</b> <i>fmt</i></a></dt>
  <dd>Supplies a <b>strftime</b> (see <i>strftime</i>(3)) string for the
      formatting of the time elements. The format string supports all of the zsh
      extensions described in the section EXPANSION OF PROMPT SEQUENCES in
      <i>zshmisc</i>(1). The <b>-s</b> option is implied.</dd>
  <dt id="g"><a class="permalink" href="#g"><b>-g</b></a></dt>
  <dd>Show the time elements in the GMT time zone. The <b>-s</b> option is
      implied.</dd>
  <dt id="l"><a class="permalink" href="#l"><b>-l</b></a></dt>
  <dd>List the names of the type elements (to standard output or an array as
      appropriate) and return immediately; arguments, and options other than
      <b>-A</b>, are ignored.</dd>
  <dt id="L"><a class="permalink" href="#L"><b>-L</b></a></dt>
  <dd>Perform an <b>lstat</b> (see <i>lstat</i>(2)) rather than a <b>stat</b>
      system call. In this case, if the file is a link, information about the
      link itself rather than the target file is returned. This option is
      required to make the <b>link</b> element useful. It's important to note
      that this is the exact opposite from <i>ls</i>(1), etc.</dd>
  <dt id="n"><a class="permalink" href="#n"><b>-n</b></a></dt>
  <dd>Always show the names of files. Usually these are only shown when output
      is to standard output and there is more than one file in the list.</dd>
  <dt id="N"><a class="permalink" href="#N"><b>-N</b></a></dt>
  <dd>Never show the names of files.</dd>
  <dt id="o"><a class="permalink" href="#o"><b>-o</b></a></dt>
  <dd>If a raw file mode is printed, show it in octal, which is more useful for
      human consumption than the default of decimal. A leading zero will be
      printed in this case. Note that this does not affect whether a raw or
      formatted file mode is shown, which is controlled by the <b>-r</b> and
      <b>-s</b> options, nor whether a mode is shown at all.</dd>
  <dt id="r~2"><a class="permalink" href="#r~2"><b>-r</b></a></dt>
  <dd>Print raw data (the default format) alongside string data (the <b>-s</b>
      format); the string data appears in parentheses after the raw data.</dd>
  <dt id="s~2"><a class="permalink" href="#s~2"><b>-s</b></a></dt>
  <dd>Print <b>mode</b>, <b>uid</b>, <b>gid</b> and the three time elements as
      strings instead of numbers. In each case the format is like that of <b>ls
      -l</b>.</dd>
  <dt id="t"><a class="permalink" href="#t"><b>-t</b></a></dt>
  <dd>Always show the type names for the elements of <b>struct stat</b>. Usually
      these are only shown when output is to standard output and no individual
      element has been selected.</dd>
  <dt id="T"><a class="permalink" href="#T"><b>-T</b></a></dt>
  <dd>Never show the type names of the <b>struct stat</b> elements.</dd>
</dl>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/SYSTEM_MODULE"><a class="permalink" href="#THE_ZSH/SYSTEM_MODULE">THE
  ZSH/SYSTEM MODULE</a></h1>
<p class="Pp">The <b>zsh/system</b> module makes available various builtin
    commands and parameters.</p>
<section class="Ss">
<h2 class="Ss" id="Builtins"><a class="permalink" href="#Builtins">Builtins</a></h2>
<dl class="Bl-tag">
  <dt><b>syserror</b> [ <b>-e</b> <i>errvar</i> ] [ <b>-p</b> <i>prefix</i> ] [
    <i>errno</i> | <i>errname</i> ]</dt>
  <dd>This command prints out the error message associated with <i>errno</i>, a
      system error number, followed by a newline to standard error.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Instead of the error number, a name <i>errname</i>, for example
    <b>ENOENT</b>, may be used. The set of names is the same as the contents of
    the array <b>errnos</b>, see below.</p>
<p class="Pp">If the string <i>prefix</i> is given, it is printed in front of
    the error message, with no intervening space.</p>
<p class="Pp">If <i>errvar</i> is supplied, the entire message, without a
    newline, is assigned to the parameter names <i>errvar</i> and nothing is
    output.</p>
<p class="Pp">A return status of 0 indicates the message was successfully
    printed (although it may not be useful if the error number was out of the
    system's range), a return status of 1 indicates an error in the parameters,
    and a return status of 2 indicates the error name was not recognised (no
    message is printed for this).</p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>sysopen</b> [ <b>-arw</b> ] [ <b>-m</b> <i>permissions</i> ] [
    <b>-o</b> <i>options</i> ]</dt>
  <dd></dd>
  <dt><b> </b><b>-u</b> <i>fd</i> <i>file</i></dt>
  <dd>This command opens a file. The <b>-r</b>, <b>-w</b> and <b>-a</b> flags
      indicate whether the file should be opened for reading, writing and
      appending, respectively. The <b>-m</b> option allows the initial
      permissions to use when creating a file to be specified in octal form. The
      file descriptor is specified with <b>-u</b>. Either an explicit file
      descriptor in the range 0 to 9 can be specified or a variable name can be
      given to which the file descriptor number will be assigned.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>-o</b> option allows various system specific options to be
    specified as a comma-separated list. The following is a list of possible
    options. Note that, depending on the system, some may not be available.</p>
<dl class="Bl-tag">
  <dt><b>cloexec</b></dt>
  <dd>mark file to be closed when other programs are executed (else the file
      descriptor remains open in subshells and forked external executables)</dd>
  <dt><b>create</b></dt>
  <dd></dd>
  <dt><b>creat</b></dt>
  <dd>create file if it does not exist</dd>
  <dt id="excl"><a class="permalink" href="#excl"><b>excl</b></a></dt>
  <dd>create file, error if it already exists</dd>
  <dt id="noatime"><a class="permalink" href="#noatime"><b>noatime</b></a></dt>
  <dd>suppress updating of the file atime</dd>
  <dt id="nofollow"><a class="permalink" href="#nofollow"><b>nofollow</b></a></dt>
  <dd>fail if <i>file</i> is a symbolic link</dd>
  <dt id="sync~2"><a class="permalink" href="#sync~2"><b>sync</b></a></dt>
  <dd>request that writes wait until data has been physically written</dd>
  <dt><b>truncate</b></dt>
  <dd></dd>
  <dt><b>trunc</b></dt>
  <dd>truncate file to size 0</dd>
</dl>
<p class="Pp">To close the file, use one of the following:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b></b><b>exec {</b><b></b><i>fd</i><b></b><b>}&lt;&amp;-</b><b></b>
<b></b><b>exec {</b><b></b><i>fd</i><b></b><b>}&gt;&amp;-</b><b></b><b></b></pre>
</div>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>sysread </b>[ <b>-c</b> <i>countvar</i> ] [ <b>-i</b> <i>infd</i> ] [
    <b>-o</b> <i>outfd</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[ <b>-s</b> <i>bufsize</i> ] [ <b>-t</b> <i>timeout</i> ] [
    <i>param</i> ]</dt>
  <dd>Perform a single system read from file descriptor <i>infd</i>, or zero if
      that is not given. The result of the read is stored in <i>param</i> or
      <b>REPLY</b> if that is not given. If <i>countvar</i> is given, the number
      of bytes read is assigned to the parameter named by <i>countvar</i>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The maximum number of bytes read is <i>bufsize</i> or 8192 if that
    is not given, however the command returns as soon as any number of bytes was
    successfully read.</p>
<p class="Pp">If <i>timeout</i> is given, it specifies a timeout in seconds,
    which may be zero to poll the file descriptor. This is handled by the
    <b>poll</b> system call if available, otherwise the <b>select</b> system
    call if available.</p>
<p class="Pp">If <i>outfd</i> is given, an attempt is made to write all the
    bytes just read to the file descriptor <i>outfd</i>. If this fails, because
    of a system error other than <b>EINTR</b> or because of an internal zsh
    error during an interrupt, the bytes read but not written are stored in the
    parameter named by <i>param</i> if supplied (no default is used in this
    case), and the number of bytes read but not written is stored in the
    parameter named by <i>countvar</i> if that is supplied. If it was
    successful, <i>countvar</i> contains the full number of bytes transferred,
    as usual, and <i>param</i> is not set.</p>
<p class="Pp">The error <b>EINTR</b> (interrupted system call) is handled
    internally so that shell interrupts are transparent to the caller. Any other
    error causes a return.</p>
<p class="Pp">The possible return statuses are</p>
<dl class="Bl-tag">
  <dt>0</dt>
  <dd>At least one byte of data was successfully read and, if appropriate,
      written.</dd>
  <dt>1</dt>
  <dd>There was an error in the parameters to the command. This is the only
      error for which a message is printed to standard error.</dd>
  <dt>2</dt>
  <dd>There was an error on the read, or on polling the input file descriptor
      for a timeout. The parameter <b>ERRNO</b> gives the error.</dd>
  <dt>3</dt>
  <dd>Data were successfully read, but there was an error writing them to
      <i>outfd</i>. The parameter <b>ERRNO</b> gives the error.</dd>
  <dt>4</dt>
  <dd>The attempt to read timed out. Note this does not set <b>ERRNO</b> as this
      is not a system error.</dd>
  <dt>5</dt>
  <dd>No system error occurred, but zero bytes were read. This usually indicates
      end of file. The parameters are set according to the usual rules; no write
      to <i>outfd</i> is attempted.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="sysseek"><a class="permalink" href="#sysseek"><b>sysseek</b> [
    <b>-u</b> <i>fd</i> ] [ <b>-w</b> <b>start</b>|<b>end</b>|<b>current</b> ]
    <i>offset</i></a></dt>
  <dd>The current file position at which future reads and writes will take place
      is adjusted to the specified byte offset. The <i>offset</i> is evaluated
      as a math expression. The <b>-u</b> option allows the file descriptor to
      be specified. By default the offset is specified relative to the start or
      the file but, with the <b>-w</b> option, it is possible to specify that
      the offset should be relative to the current position or the end of the
      file.</dd>
  <dt id="syswrite"><a class="permalink" href="#syswrite"><b>syswrite</b> [
    <b>-c</b> <i>countvar</i> ] [ <b>-o</b> <i>outfd</i> ] <i>data</i></a></dt>
  <dd>The data (a single string of bytes) are written to the file descriptor
      <i>outfd</i>, or 1 if that is not given, using the <b>write</b> system
      call. Multiple write operations may be used if the first does not write
      all the data.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <i>countvar</i> is given, the number of byte written is stored
    in the parameter named by <i>countvar</i>; this may not be the full length
    of <i>data</i> if an error occurred.</p>
<p class="Pp">The error <b>EINTR</b> (interrupted system call) is handled
    internally by retrying; otherwise an error causes the command to return. For
    example, if the file descriptor is set to non-blocking output, an error
    <b>EAGAIN</b> (on some systems, <b>EWOULDBLOCK</b>) may result in the
    command returning early.</p>
<p class="Pp">The return status may be 0 for success, 1 for an error in the
    parameters to the command, or 2 for an error on the write; no error message
    is printed in the last case, but the parameter <b>ERRNO</b> will reflect the
    error that occurred.</p>
</div>
<dl class="Bl-tag">
  <dt><b>zsystem flock</b> [ <b>-t</b> <i>timeout</i> ] [ <b>-f</b> <i>var</i> ]
    [<b>-er</b>] <i>file</i></dt>
  <dd></dd>
  <dt><b>zsystem flock -u</b> <i>fd_expr</i></dt>
  <dd>The builtin <b>zsystem</b>'s subcommand <b>flock</b> performs advisory
      file locking (via the <i>fcntl</i>(2) system call) over the entire
      contents of the given file. This form of locking requires the processes
      accessing the file to cooperate; its most obvious use is between two
      instances of the shell itself.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">In the first form the named <i>file</i>, which must already exist,
    is locked by opening a file descriptor to the file and applying a lock to
    the file descriptor. The lock terminates when the shell process that created
    the lock exits; it is therefore often convenient to create file locks within
    subshells, since the lock is automatically released when the subshell exits.
    Note that use of the <b>print</b> builtin with the <b>-u</b> option will, as
    a side effect, release the lock, as will redirection to the file in the
    shell holding the lock. To work around this use a subshell, e.g. `<b>(print
    message) &gt;&gt; </b><i>file</i>'. Status 0 is returned if the lock
    succeeds, else status 1.</p>
<p class="Pp">In the second form the file descriptor given by the arithmetic
    expression <i>fd_expr</i> is closed, releasing a lock. The file descriptor
    can be queried by using the `<b>-f</b> <i>var</i>' form during the lock; on
    a successful lock, the shell variable <i>var</i> is set to the file
    descriptor used for locking. The lock will be released if the file
    descriptor is closed by any other means, for example using `<b>exec
    {</b><i>var</i><b>}&gt;&amp;-</b>'; however, the form described here
    performs a safety check that the file descriptor is in use for file
  locking.</p>
<p class="Pp">By default the shell waits indefinitely for the lock to succeed.
    The option <b>-t</b> <i>timeout</i> specifies a timeout for the lock in
    seconds; currently this must be an integer. The shell will attempt to lock
    the file once a second during this period. If the attempt times out, status
    2 is returned.</p>
<p class="Pp">If the option <b>-e</b> is given, the file descriptor for the lock
    is preserved when the shell uses <b>exec</b> to start a new process;
    otherwise it is closed at that point and the lock released.</p>
<p class="Pp">If the option <b>-r</b> is given, the lock is only for reading,
    otherwise it is for reading and writing. The file descriptor is opened
    accordingly.</p>
</div>
<dl class="Bl-tag">
  <dt id="zsystem"><a class="permalink" href="#zsystem"><b>zsystem supports</b>
    <i>subcommand</i></a></dt>
  <dd>The builtin <b>zsystem</b>'s subcommand <b>supports</b> tests whether a
      given subcommand is supported. It returns status 0 if so, else status 1.
      It operates silently unless there was a syntax error (i.e. the wrong
      number of arguments), in which case status 255 is returned. Status 1 can
      indicate one of two things: <i>subcommand</i> is known but not supported
      by the current operating system, or <i>subcommand</i> is not known
      (possibly because this is an older version of the shell before it was
      implemented).</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Math_Functions"><a class="permalink" href="#Math_Functions">Math
  Functions</a></h2>
<dl class="Bl-tag">
  <dt><b>systell(</b><i>fd</i><b>)</b><i></i></dt>
  <dd>The systell math function returns the current file position for the file
      descriptor passed as an argument.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Parameters~2"><a class="permalink" href="#Parameters~2">Parameters</a></h2>
<dl class="Bl-tag">
  <dt><b>errnos</b></dt>
  <dd>A readonly array of the names of errors defined on the system. These are
      typically macros defined in C by including the system header file
      <b>errno.h</b>. The index of each name (assuming the option
      <b>KSH_ARRAYS</b> is unset) corresponds to the error number. Error numbers
      <i>num</i> before the last known error which have no name are given the
      name <b>E</b><i>num</i> in the array.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that aliases for errors are not handled; only the canonical
    name is used.</p>
</div>
<dl class="Bl-tag">
  <dt id="sysparams"><a class="permalink" href="#sysparams"><b>sysparams</b></a></dt>
  <dd>A readonly associative array. The keys are:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>pid</b></dt>
  <dd>Returns the process ID of the current process, even in subshells. Compare
      <b>$$</b>, which returns the process ID of the main shell process.</dd>
  <dt id="ppid"><a class="permalink" href="#ppid"><b>ppid</b></a></dt>
  <dd>Returns the process ID of the parent of the current process, even in
      subshells. Compare <b>$PPID</b>, which returns the process ID of the
      parent of the main shell process.</dd>
  <dt id="procsubstpid"><a class="permalink" href="#procsubstpid"><b>procsubstpid</b></a></dt>
  <dd>Returns the process ID of the last process started for process
      substitution, i.e. the <b>&lt;(</b><i>...</i><b>)</b> and
      <b>&gt;(</b><i>...</i><b>)</b> expansions.</dd>
</dl>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/NET/TCP_MODULE"><a class="permalink" href="#THE_ZSH/NET/TCP_MODULE">THE
  ZSH/NET/TCP MODULE</a></h1>
<p class="Pp">The <b>zsh/net/tcp</b> module makes available one builtin
  command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>ztcp</b> [ <b>-acflLtv</b> ] [ <b>-d</b> <i>fd</i> ] [ <i>args</i>
    ]</dt>
  <dd><b>ztcp</b> is implemented as a builtin to allow full use of shell command
      line editing, file I/O, and job control mechanisms.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>ztcp</b> is run with no options, it will output the contents
    of its session table.</p>
<p class="Pp">If it is run with only the option <b>-L</b>, it will output the
    contents of the session table in a format suitable for automatic parsing.
    The option is ignored if given with a command to open or close a session.
    The output consists of a set of lines, one per session, each containing the
    following elements separated by spaces:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>File descriptor</dt>
  <dd>The file descriptor in use for the connection. For normal inbound
      (<b>I</b>) and outbound (<b>O</b>) connections this may be read and
      written by the usual shell mechanisms. However, it should only be close
      with `<b>ztcp -c</b>'.</dd>
  <dt id="Connection"><a class="permalink" href="#Connection">Connection
    type</a></dt>
  <dd>A letter indicating how the session was created:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>Z</b></dt>
  <dd>A session created with the <b>zftp</b> command.</dd>
  <dt id="L~2"><a class="permalink" href="#L~2"><b>L</b></a></dt>
  <dd>A connection opened for listening with `<b>ztcp -l</b>'.</dd>
  <dt id="I"><a class="permalink" href="#I"><b>I</b></a></dt>
  <dd>An inbound connection accepted with `<b>ztcp -a</b>'.</dd>
  <dt id="O"><a class="permalink" href="#O"><b>O</b></a></dt>
  <dd>An outbound connection created with `<b>ztcp</b> <i>host</i>
    <i>...</i>'.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="The"><a class="permalink" href="#The">The local host</a></dt>
  <dd>This is usually set to an all-zero IP address as the address of the
      localhost is irrelevant.</dd>
  <dt id="The~2"><a class="permalink" href="#The~2">The local port</a></dt>
  <dd>This is likely to be zero unless the connection is for listening.</dd>
  <dt id="The~3"><a class="permalink" href="#The~3">The remote host</a></dt>
  <dd>This is the fully qualified domain name of the peer, if available, else an
      IP address. It is an all-zero IP address for a session opened for
      listening.</dd>
  <dt id="The~4"><a class="permalink" href="#The~4">The remote port</a></dt>
  <dd>This is zero for a connection opened for listening.</dd>
</dl>
</div>
<section class="Ss">
<h2 class="Ss">Outbound Connections</h2>
<dl class="Bl-tag">
  <dt><b>ztcp</b> [ <b>-v</b> ] [ <b>-d</b> <i>fd</i> ] <i>host</i> [
    <i>port</i> ]</dt>
  <dd>Open a new TCP connection to <i>host</i>. If the <i>port</i> is omitted,
      it will default to port 23. The connection will be added to the session
      table and the shell parameter <b>REPLY</b> will be set to the file
      descriptor associated with that connection.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>-d</b> is specified, its argument will be taken as the
    target file descriptor for the connection.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss">Inbound Connections</h2>
<dl class="Bl-tag">
  <dt><b>ztcp</b> <b>-l</b> [ <b>-v</b> ] [ <b>-d</b> <i>fd</i> ]
    <i>port</i></dt>
  <dd><b>ztcp -l</b> will open a socket listening on TCP <i>port</i>. The socket
      will be added to the session table and the shell parameter <b>REPLY</b>
      will be set to the file descriptor associated with that listener.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>-d</b> is specified, its argument will be taken as the
    target file descriptor for the connection.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="ztcp"><a class="permalink" href="#ztcp"><b>ztcp</b> <b>-a</b> [
    <b>-tv</b> ] [ <b>-d</b> <i>targetfd</i> ] <i>listenfd</i></a></dt>
  <dd><b>ztcp -a</b> will accept an incoming connection to the port associated
      with <i>listenfd</i>. The connection will be added to the session table
      and the shell parameter <b>REPLY</b> will be set to the file descriptor
      associated with the inbound connection.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If <b>-d</b> is specified, its argument will be taken as the
    target file descriptor for the connection.</p>
<p class="Pp">If <b>-t</b> is specified, <b>ztcp</b> will return if no incoming
    connection is pending. Otherwise it will wait for one.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Closing_Connections"><a class="permalink" href="#Closing_Connections">Closing
  Connections</a></h2>
<dl class="Bl-tag">
  <dt><b>ztcp</b> <b>-cf</b> [ <b>-v</b> ] [ <i>fd</i> ]</dt>
  <dd></dd>
  <dt><b>ztcp</b> <b>-c</b> [ <b>-v</b> ] [ <i>fd</i> ]</dt>
  <dd><b>ztcp -c</b> will close the socket associated with <i>fd</i>. The socket
      will be removed from the session table. If <i>fd</i> is not specified,
      <b>ztcp</b> will close everything in the session table.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Normally, sockets registered by zftp (see <i>zshmodules</i>(1) )
    cannot be closed this way. In order to force such a socket closed, use
    <b>-f</b>.</p>
<p class="Pp">In order to elicit more verbose output, use <b>-v</b>.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Example"><a class="permalink" href="#Example">Example</a></h2>
<p class="Pp">Here is how to create a TCP connection between two instances of
    zsh. We need to pick an unassigned port; here we use the randomly chosen
    5123.</p>
<p class="Pp">On <b>host1</b>,</p>
<div class="Bd-indent">
<pre><b>zmodload zsh/net/tcp</b>
<b>ztcp -l 5123</b>
<b>listenfd=$REPLY</b>
<b>ztcp -a $listenfd</b>
<b>fd=$REPLY</b></pre>
</div>
The second from last command blocks until there is an incoming connection.
<p class="Pp">Now create a connection from <b>host2</b> (which may, of course,
    be the same machine):</p>
<div class="Bd-indent">
<pre><b>zmodload zsh/net/tcp</b>
<b>ztcp host1 5123</b>
<b>fd=$REPLY</b></pre>
</div>
<p class="Pp">Now on each host, <b>$fd</b> contains a file descriptor for
    talking to the other. For example, on <b>host1</b>:</p>
<div class="Bd-indent">
<pre><b>print This is a message &gt;&amp;$fd</b></pre>
</div>
and on <b>host2</b>:
<div class="Bd-indent">
<pre><b>read -r line &lt;&amp;$fd; print -r - $line</b></pre>
</div>
prints `<b>This is a message</b>'.
<p class="Pp">To tidy up, on <b>host1</b>:</p>
<div class="Bd-indent">
<pre><b>ztcp -c $listenfd</b>
<b>ztcp -c $fd</b></pre>
</div>
and on <b>host2</b>
<div class="Bd-indent">
<pre><b>ztcp -c $fd</b></pre>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/TERMCAP_MODULE"><a class="permalink" href="#THE_ZSH/TERMCAP_MODULE">THE
  ZSH/TERMCAP MODULE</a></h1>
<p class="Pp">The <b>zsh/termcap</b> module makes available one builtin
  command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>echotc</b> <i>cap</i> [ <i>arg</i> ... ]</dt>
  <dd>Output the termcap value corresponding to the capability <i>cap</i>, with
      optional arguments.</dd>
</dl>
<p class="Pp">The <b>zsh/termcap</b> module makes available one parameter:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>termcap</b></dt>
  <dd>An associative array that maps termcap capability codes to their
    values.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/TERMINFO_MODULE"><a class="permalink" href="#THE_ZSH/TERMINFO_MODULE">THE
  ZSH/TERMINFO MODULE</a></h1>
<p class="Pp">The <b>zsh/terminfo</b> module makes available one builtin
    command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>echoti</b> <i>cap</i> [ <i>arg</i> ]</dt>
  <dd>Output the terminfo value corresponding to the capability <i>cap</i>,
      instantiated with <i>arg</i> if applicable.</dd>
</dl>
<p class="Pp">The <b>zsh/terminfo</b> module makes available one parameter:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>terminfo</b></dt>
  <dd>An associative array that maps terminfo capability names to their
    values.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZFTP_MODULE"><a class="permalink" href="#THE_ZSH/ZFTP_MODULE">THE
  ZSH/ZFTP MODULE</a></h1>
<p class="Pp">The <b>zsh/zftp</b> module makes available one builtin
  command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zftp</b> <i>subcommand</i> [ <i>args</i> ]</dt>
  <dd>The <b>zsh/zftp</b> module is a client for FTP (file transfer protocol).
      It is implemented as a builtin to allow full use of shell command line
      editing, file I/O, and job control mechanisms. Often, users will access it
      via shell functions providing a more powerful interface; a set is provided
      with the <b>zsh</b> distribution and is described in <i>zshzftpsys</i>(1).
      However, the <b>zftp</b> command is entirely usable in its own right.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">All commands consist of the command name <b>zftp</b> followed by
    the name of a subcommand. These are listed below. The return status of each
    subcommand is supposed to reflect the success or failure of the remote
    operation. See a description of the variable <b>ZFTP_VERBOSE</b> for more
    information on how responses from the server may be printed.</p>
</div>
<section class="Ss">
<h2 class="Ss" id="Subcommands"><a class="permalink" href="#Subcommands">Subcommands</a></h2>
<dl class="Bl-tag">
  <dt><b>open</b> <i>host</i>[<b>:</b><i>port</i>] [ <i>user</i> [
    <i>password</i> [ <i>account</i> ] ] ]</dt>
  <dd>Open a new FTP session to <i>host</i>, which may be the name of a TCP/IP
      connected host or an IP number in the standard dot notation. If the
      argument is in the form <i>host</i><b>:</b><i>port</i>, open a connection
      to TCP port <i>port</i> instead of the standard FTP port 21. This may be
      the name of a TCP service or a number: see the description of
      <b>ZFTP_PORT</b> below for more information.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If IPv6 addresses in colon format are used, the <i>host</i> should
    be surrounded by quoted square brackets to distinguish it from the
    <i>port</i>, for example <b>'[fe80::203:baff:fe02:8b56]'</b>. For
    consistency this is allowed with all forms of <i>host</i>.</p>
<p class="Pp">Remaining arguments are passed to the <b>login</b> subcommand.
    Note that if no arguments beyond <i>host</i> are supplied, <b>open</b> will
    <i>not</i> automatically call <b>login</b>. If no arguments at all are
    supplied, <b>open</b> will use the parameters set by the <b>params</b>
    subcommand.</p>
<p class="Pp">After a successful open, the shell variables <b>ZFTP_HOST</b>,
    <b>ZFTP_PORT</b>, <b>ZFTP_IP</b> and <b>ZFTP_SYSTEM</b> are available; see
    `Variables' below.</p>
</div>
<dl class="Bl-tag">
  <dt><b>login</b> [ <i>name</i> [ <i>password</i> [ <i>account</i> ] ] ]</dt>
  <dd></dd>
  <dt><b>user</b> [ <i>name</i> [ <i>password</i> [ <i>account</i> ] ] ]</dt>
  <dd>Login the user <i>name</i> with parameters <i>password</i> and
      <i>account</i>. Any of the parameters can be omitted, and will be read
      from standard input if needed (<i>name</i> is always needed). If standard
      input is a terminal, a prompt for each one will be printed on standard
      error and <i>password</i> will not be echoed. If any of the parameters are
      not used, a warning message is printed.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">After a successful login, the shell variables <b>ZFTP_USER</b>,
    <b>ZFTP_ACCOUNT</b> and <b>ZFTP_PWD</b> are available; see `Variables'
    below.</p>
<p class="Pp">This command may be re-issued when a user is already logged in,
    and the server will first be reinitialized for a new user.</p>
</div>
<dl class="Bl-tag">
  <dt><b>params</b> [ <i>host</i> [ <i>user</i> [ <i>password</i> [
    <i>account</i> ] ] ] ]</dt>
  <dd></dd>
  <dt><b>params</b> <b>-</b></dt>
  <dd>Store the given parameters for a later <b>open</b> command with no
      arguments. Only those given on the command line will be remembered. If no
      arguments are given, the parameters currently set are printed, although
      the password will appear as a line of stars; the return status is one if
      no parameters were set, zero otherwise.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Any of the parameters may be specified as a `<b>?</b>', which may
    need to be quoted to protect it from shell expansion. In this case, the
    appropriate parameter will be read from stdin as with the <b>login</b>
    subcommand, including special handling of <i>password</i>. If the `<b>?</b>'
    is followed by a string, that is used as the prompt for reading the
    parameter instead of the default message (any necessary punctuation and
    whitespace should be included at the end of the prompt). The first letter of
    the parameter (only) may be quoted with a `<b>\</b>'; hence an argument
    <b>&quot;\\$word&quot;</b> guarantees that the string from the shell
    parameter <b>$word</b> will be treated literally, whether or not it begins
    with a `<b>?</b>'.</p>
<p class="Pp">If instead a single `<b>-</b>' is given, the existing parameters,
    if any, are deleted. In that case, calling <b>open</b> with no arguments
    will cause an error.</p>
<p class="Pp">The list of parameters is not deleted after a <b>close</b>,
    however it will be deleted if the <b>zsh/zftp</b> module is unloaded.</p>
<p class="Pp">For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zftp params ftp.elsewhere.xx juser '?Password for juser: '</b></pre>
</div>
<p class="Pp">will store the host <b>ftp.elsewhere.xx</b> and the user
    <b>juser</b> and then prompt the user for the corresponding password with
    the given prompt.</p>
</div>
<dl class="Bl-tag">
  <dt id="test"><a class="permalink" href="#test"><b>test</b></a></dt>
  <dd>Test the connection; if the server has reported that it has closed the
      connection (maybe due to a timeout), return status 2; if no connection was
      open anyway, return status 1; else return status 0. The <b>test</b>
      subcommand is silent, apart from messages printed by the
      <b>$ZFTP_VERBOSE</b> mechanism, or error messages if the connection
      closes. There is no network overhead for this test.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The test is only supported on systems with either the
    <b>select(2)</b> or <b>poll(2)</b> system calls; otherwise the message
    `<b>not</b> <b>supported on this system</b>' is printed instead.</p>
<p class="Pp">The <b>test</b> subcommand will automatically be called at the
    start of any other subcommand for the current session when a connection is
    open.</p>
</div>
<dl class="Bl-tag">
  <dt id="cd~2"><a class="permalink" href="#cd~2"><b>cd</b>
    <i>directory</i></a></dt>
  <dd>Change the remote directory to <i>directory</i>. Also alters the shell
      variable <b>ZFTP_PWD</b>.</dd>
  <dt id="cdup"><a class="permalink" href="#cdup"><b>cdup</b></a></dt>
  <dd>Change the remote directory to the one higher in the directory tree. Note
      that <b>cd ..</b> will also work correctly on non-UNIX systems.</dd>
  <dt id="dir"><a class="permalink" href="#dir"><b>dir</b> [ <i>arg</i> ...
    ]</a></dt>
  <dd>Give a (verbose) listing of the remote directory. The <i>arg</i>s are
      passed directly to the server. The command's behaviour is implementation
      dependent, but a UNIX server will typically interpret <i>arg</i>s as
      arguments to the <b>ls</b> command and with no arguments return the result
      of `<b>ls -l</b>'. The directory is listed to standard output.</dd>
  <dt id="ls"><a class="permalink" href="#ls"><b>ls</b> [ <i>arg</i> ...
    ]</a></dt>
  <dd>Give a (short) listing of the remote directory. With no <i>arg</i>,
      produces a raw list of the files in the directory, one per line.
      Otherwise, up to vagaries of the server implementation, behaves similar to
      <b>dir</b>.</dd>
  <dt id="type"><a class="permalink" href="#type"><b>type</b> [ <i>type</i>
    ]</a></dt>
  <dd>Change the type for the transfer to <i>type</i>, or print the current type
      if <i>type</i> is absent. The allowed values are `<b>A</b>' (ASCII),
      `<b>I</b>' (Image, i.e. binary), or `<b>B</b>' (a synonym for
    `<b>I</b>').</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The FTP default for a transfer is ASCII. However, if <b>zftp</b>
    finds that the remote host is a UNIX machine with 8-bit byes, it will
    automatically switch to using binary for file transfers upon <b>open</b>.
    This can subsequently be overridden.</p>
<p class="Pp">The transfer type is only passed to the remote host when a data
    connection is established; this command involves no network overhead.</p>
</div>
<dl class="Bl-tag">
  <dt id="ascii"><a class="permalink" href="#ascii"><b>ascii</b></a></dt>
  <dd>The same as <b>type A</b>.</dd>
  <dt id="binary"><a class="permalink" href="#binary"><b>binary</b></a></dt>
  <dd>The same as <b>type I</b>.</dd>
  <dt id="mode~2"><a class="permalink" href="#mode~2"><b>mode</b> [ <b>S</b> |
    <b>B</b> ]</a></dt>
  <dd>Set the mode type to stream (<b>S</b>) or block (<b>B</b>). Stream mode is
      the default; block mode is not widely supported.</dd>
  <dt><b>remote</b> <i>file</i> ...</dt>
  <dd></dd>
  <dt><b>local</b> [ <i>file</i> ... ]</dt>
  <dd>Print the size and last modification time of the remote or local files. If
      there is more than one item on the list, the name of the file is printed
      first. The first number is the file size, the second is the last
      modification time of the file in the format <b>CCYYMMDDhhmmSS</b>
      consisting of year, month, date, hour, minutes and seconds in GMT. Note
      that this format, including the length, is guaranteed, so that time
      strings can be directly compared via the <b>[[</b> builtin's <b>&lt;</b>
      and <b>&gt;</b> operators, even if they are too long to be represented as
      integers.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Not all servers support the commands for retrieving this
    information. In that case, the <b>remote</b> command will print nothing and
    return status 2, compared with status 1 for a file not found.</p>
<p class="Pp">The <b>local</b> command (but not <b>remote</b>) may be used with
    no arguments, in which case the information comes from examining file
    descriptor zero. This is the same file as seen by a <b>put</b> command with
    no further redirection.</p>
</div>
<dl class="Bl-tag">
  <dt id="get"><a class="permalink" href="#get"><b>get</b> <i>file</i>
    ...</a></dt>
  <dd>Retrieve all <i>file</i>s from the server, concatenating them and sending
      them to standard output.</dd>
  <dt id="put"><a class="permalink" href="#put"><b>put</b> <i>file</i>
    ...</a></dt>
  <dd>For each <i>file</i>, read a file from standard input and send that to the
      remote host with the given name.</dd>
  <dt id="append"><a class="permalink" href="#append"><b>append</b> <i>file</i>
    ...</a></dt>
  <dd>As <b>put</b>, but if the remote <i>file</i> already exists, data is
      appended to it instead of overwriting it.</dd>
  <dt><b>getat</b> <i>file</i> <i>point</i></dt>
  <dd></dd>
  <dt><b>putat</b> <i>file</i> <i>point</i></dt>
  <dd></dd>
  <dt><b>appendat</b> <i>file</i> <i>point</i></dt>
  <dd>Versions of <b>get</b>, <b>put</b> and <b>append</b> which will start the
      transfer at the given <i>point</i> in the remote <i>file</i>. This is
      useful for appending to an incomplete local file. However, note that this
      ability is not universally supported by servers (and is not quite the
      behaviour specified by the standard).</dd>
  <dt id="delete"><a class="permalink" href="#delete"><b>delete</b> <i>file</i>
    ...</a></dt>
  <dd>Delete the list of files on the server.</dd>
  <dt id="mkdir~2"><a class="permalink" href="#mkdir~2"><b>mkdir</b>
    <i>directory</i></a></dt>
  <dd>Create a new directory <i>directory</i> on the server.</dd>
  <dt id="rmdir~2"><a class="permalink" href="#rmdir~2"><b>rmdir</b>
    <i>directory</i></a></dt>
  <dd>Delete the directory <i>directory</i> on the server.</dd>
  <dt id="rename"><a class="permalink" href="#rename"><b>rename</b>
    <i>old-name</i> <i>new-name</i></a></dt>
  <dd>Rename file <i>old-name</i> to <i>new-name</i> on the server.</dd>
  <dt id="site"><a class="permalink" href="#site"><b>site</b> <i>arg</i>
    ...</a></dt>
  <dd>Send a host-specific command to the server. You will probably only need
      this if instructed by the server to use it.</dd>
  <dt id="quote"><a class="permalink" href="#quote"><b>quote</b> <i>arg</i>
    ...</a></dt>
  <dd>Send the raw FTP command sequence to the server. You should be familiar
      with the FTP command set as defined in RFC959 before doing this. Useful
      commands may include <b>STAT</b> and <b>HELP</b>. Note also the mechanism
      for returning messages as described for the variable <b>ZFTP_VERBOSE</b>
      below, in particular that all messages from the control connection are
      sent to standard error.</dd>
  <dt><b>close</b></dt>
  <dd></dd>
  <dt><b>quit</b></dt>
  <dd>Close the current data connection. This unsets the shell parameters
      <b>ZFTP_HOST</b>, <b>ZFTP_PORT</b>, <b>ZFTP_IP</b>, <b>ZFTP_SYSTEM</b>,
      <b>ZFTP_USER</b>, <b>ZFTP_ACCOUNT</b>, <b>ZFTP_PWD</b>, <b>ZFTP_TYPE</b>
      and <b>ZFTP_MODE</b>.</dd>
  <dt id="session"><a class="permalink" href="#session"><b>session</b> [
    <i>sessname</i> ]</a></dt>
  <dd>Allows multiple FTP sessions to be used at once. The name of the session
      is an arbitrary string of characters; the default session is called
      `<b>default</b>'. If this command is called without an argument, it will
      list all the current sessions; with an argument, it will either switch to
      the existing session called <i>sessname</i>, or create a new session of
      that name.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Each session remembers the status of the connection, the set of
    connection-specific shell parameters (the same set as are unset when a
    connection closes, as given in the description of <b>close</b>), and any
    user parameters specified with the <b>params</b> subcommand. Changing to a
    previous session restores those values; changing to a new session
    initialises them in the same way as if <b>zftp</b> had just been loaded. The
    name of the current session is given by the parameter
  <b>ZFTP_SESSION</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="rmsession"><a class="permalink" href="#rmsession"><b>rmsession</b> [
    <i>sessname</i> ]</a></dt>
  <dd>Delete a session; if a name is not given, the current session is deleted.
      If the current session is deleted, the earliest existing session becomes
      the new current session, otherwise the current session is not changed. If
      the session being deleted is the only one, a new session called
      `<b>default</b>' is created and becomes the current session; note that
      this is a new session even if the session being deleted is also called
      `<b>default</b>'. It is recommended that sessions not be deleted while
      background commands which use <b>zftp</b> are still active.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Parameters~3"><a class="permalink" href="#Parameters~3">Parameters</a></h2>
<p class="Pp">The following shell parameters are used by <b>zftp</b>. Currently
    none of them are special.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>ZFTP_TMOUT</b></dt>
  <dd>Integer. The time in seconds to wait for a network operation to complete
      before returning an error. If this is not set when the module is loaded,
      it will be given the default value 60. A value of zero turns off timeouts.
      If a timeout occurs on the control connection it will be closed. Use a
      larger value if this occurs too frequently.</dd>
  <dt id="ZFTP_IP"><a class="permalink" href="#ZFTP_IP"><b>ZFTP_IP</b></a></dt>
  <dd>Readonly. The IP address of the current connection in dot notation.</dd>
  <dt id="ZFTP_HOST"><a class="permalink" href="#ZFTP_HOST"><b>ZFTP_HOST</b></a></dt>
  <dd>Readonly. The hostname of the current remote server. If the host was
      opened as an IP number, <b>ZFTP_HOST</b> contains that instead; this saves
      the overhead for a name lookup, as IP numbers are most commonly used when
      a nameserver is unavailable.</dd>
  <dt id="ZFTP_PORT"><a class="permalink" href="#ZFTP_PORT"><b>ZFTP_PORT</b></a></dt>
  <dd>Readonly. The number of the remote TCP port to which the connection is
      open (even if the port was originally specified as a named service).
      Usually this is the standard FTP port, 21.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">In the unlikely event that your system does not have the
    appropriate conversion functions, this appears in network byte order. If
    your system is little-endian, the port then consists of two swapped bytes
    and the standard port will be reported as 5376. In that case, numeric ports
    passed to <b>zftp open</b> will also need to be in this format.</p>
</div>
<dl class="Bl-tag">
  <dt id="ZFTP_SYSTEM"><a class="permalink" href="#ZFTP_SYSTEM"><b>ZFTP_SYSTEM</b></a></dt>
  <dd>Readonly. The system type string returned by the server in response to an
      FTP <b>SYST</b> request. The most interesting case is a string beginning
      <b>&quot;UNIX Type: L8&quot;</b>, which ensures maximum compatibility with
      a local UNIX host.</dd>
  <dt id="ZFTP_TYPE"><a class="permalink" href="#ZFTP_TYPE"><b>ZFTP_TYPE</b></a></dt>
  <dd>Readonly. The type to be used for data transfers , either `<b>A</b>' or
      `<b>I</b>'. Use the <b>type</b> subcommand to change this.</dd>
  <dt id="ZFTP_USER"><a class="permalink" href="#ZFTP_USER"><b>ZFTP_USER</b></a></dt>
  <dd>Readonly. The username currently logged in, if any.</dd>
  <dt id="ZFTP_ACCOUNT"><a class="permalink" href="#ZFTP_ACCOUNT"><b>ZFTP_ACCOUNT</b></a></dt>
  <dd>Readonly. The account name of the current user, if any. Most servers do
      not require an account name.</dd>
  <dt id="ZFTP_PWD"><a class="permalink" href="#ZFTP_PWD"><b>ZFTP_PWD</b></a></dt>
  <dd>Readonly. The current directory on the server.</dd>
  <dt id="ZFTP_CODE"><a class="permalink" href="#ZFTP_CODE"><b>ZFTP_CODE</b></a></dt>
  <dd>Readonly. The three digit code of the last FTP reply from the server as a
      string. This can still be read after the connection is closed, and is not
      changed when the current session changes.</dd>
  <dt id="ZFTP_REPLY"><a class="permalink" href="#ZFTP_REPLY"><b>ZFTP_REPLY</b></a></dt>
  <dd>Readonly. The last line of the last reply sent by the server. This can
      still be read after the connection is closed, and is not changed when the
      current session changes.</dd>
  <dt id="ZFTP_SESSION"><a class="permalink" href="#ZFTP_SESSION"><b>ZFTP_SESSION</b></a></dt>
  <dd>Readonly. The name of the current FTP session; see the description of the
      <b>session</b> subcommand.</dd>
  <dt id="ZFTP_PREFS"><a class="permalink" href="#ZFTP_PREFS"><b>ZFTP_PREFS</b></a></dt>
  <dd>A string of preferences for altering aspects of <b>zftp</b>'s behaviour.
      Each preference is a single character. The following are defined:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>P</b></dt>
  <dd>Passive: attempt to make the remote server initiate data transfers. This
      is slightly more efficient than sendport mode. If the letter <b>S</b>
      occurs later in the string, <b>zftp</b> will use sendport mode if passive
      mode is not available.</dd>
  <dt id="S"><a class="permalink" href="#S"><b>S</b></a></dt>
  <dd>Sendport: initiate transfers by the FTP <b>PORT</b> command. If this
      occurs before any <b>P</b> in the string, passive mode will never be
      attempted.</dd>
  <dt id="D"><a class="permalink" href="#D"><b>D</b></a></dt>
  <dd>Dumb: use only the bare minimum of FTP commands. This prevents the
      variables <b>ZFTP_SYSTEM</b> and <b>ZFTP_PWD</b> from being set, and will
      mean all connections default to ASCII type. It may prevent
      <b>ZFTP_SIZE</b> from being set during a transfer if the server does not
      send it anyway (many servers do).</dd>
</dl>
<p class="Pp">If <b>ZFTP_PREFS</b> is not set when <b>zftp</b> is loaded, it
    will be set to a default of `<b>PS</b>', i.e. use passive mode if available,
    otherwise fall back to sendport mode.</p>
</div>
<dl class="Bl-tag">
  <dt id="ZFTP_VERBOSE"><a class="permalink" href="#ZFTP_VERBOSE"><b>ZFTP_VERBOSE</b></a></dt>
  <dd>A string of digits between 0 and 5 inclusive, specifying which responses
      from the server should be printed. All responses go to standard error. If
      any of the numbers 1 to 5 appear in the string, raw responses from the
      server with reply codes beginning with that digit will be printed to
      standard error. The first digit of the three digit reply code is defined
      by RFC959 to correspond to:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>A positive preliminary reply.</dd>
  <dt>2.</dt>
  <dd>A positive completion reply.</dd>
  <dt>3.</dt>
  <dd>A positive intermediate reply.</dd>
  <dt>4.</dt>
  <dd>A transient negative completion reply.</dd>
  <dt>5.</dt>
  <dd>A permanent negative completion reply.</dd>
</dl>
<p class="Pp">It should be noted that, for unknown reasons, the reply `Service
    not available', which forces termination of a connection, is classified as
    421, i.e. `transient negative', an interesting interpretation of the word
    `transient'.</p>
<p class="Pp">The code 0 is special: it indicates that all but the last line of
    multiline replies read from the server will be printed to standard error in
    a processed format. By convention, servers use this mechanism for sending
    information for the user to read. The appropriate reply code, if it matches
    the same response, takes priority.</p>
<p class="Pp">If <b>ZFTP_VERBOSE</b> is not set when <b>zftp</b> is loaded, it
    will be set to the default value <b>450</b>, i.e., messages destined for the
    user and all errors will be printed. A null string is valid and specifies
    that no messages should be printed.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Functions"><a class="permalink" href="#Functions">Functions</a></h2>
<dl class="Bl-tag">
  <dt><b>zftp_chpwd</b></dt>
  <dd>If this function is set by the user, it is called every time the directory
      changes on the server, including when a user is logged in, or when a
      connection is closed. In the last case, <b>$ZFTP_PWD</b> will be unset;
      otherwise it will reflect the new directory.</dd>
  <dt id="zftp_progress"><a class="permalink" href="#zftp_progress"><b>zftp_progress</b></a></dt>
  <dd>If this function is set by the user, it will be called during a
      <b>get</b>, <b>put</b> or <b>append</b> operation each time sufficient
      data has been received from the host. During a <b>get</b>, the data is
      sent to standard output, so it is vital that this function should write to
      standard error or directly to the terminal, <i>not</i> to standard
    output.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When it is called with a transfer in progress, the following
    additional shell parameters are set:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>ZFTP_FILE</b></dt>
  <dd>The name of the remote file being transferred from or to.</dd>
  <dt id="ZFTP_TRANSFER"><a class="permalink" href="#ZFTP_TRANSFER"><b>ZFTP_TRANSFER</b></a></dt>
  <dd>A <b>G</b> for a <b>get</b> operation and a <b>P</b> for a <b>put</b>
      operation.</dd>
  <dt id="ZFTP_SIZE"><a class="permalink" href="#ZFTP_SIZE"><b>ZFTP_SIZE</b></a></dt>
  <dd>The total size of the complete file being transferred: the same as the
      first value provided by the <b>remote</b> and <b>local</b> subcommands for
      a particular file. If the server cannot supply this value for a remote
      file being retrieved, it will not be set. If input is from a pipe the
      value may be incorrect and correspond simply to a full pipe buffer.</dd>
  <dt id="ZFTP_COUNT"><a class="permalink" href="#ZFTP_COUNT"><b>ZFTP_COUNT</b></a></dt>
  <dd>The amount of data so far transferred; a number between zero and
      <b>$ZFTP_SIZE</b>, if that is set. This number is always available.</dd>
</dl>
<p class="Pp">The function is initially called with <b>ZFTP_TRANSFER</b> set
    appropriately and <b>ZFTP_COUNT</b> set to zero. After the transfer is
    finished, the function will be called one more time with
    <b>ZFTP_TRANSFER</b> set to <b>GF</b> or <b>PF</b>, in case it wishes to
    tidy up. It is otherwise never called twice with the same value of
    <b>ZFTP_COUNT</b>.</p>
<p class="Pp">Sometimes the progress meter may cause disruption. It is up to the
    user to decide whether the function should be defined and to use
    <b>unfunction</b> when necessary.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Problems"><a class="permalink" href="#Problems">Problems</a></h2>
<p class="Pp">A connection may not be opened in the left hand side of a pipe as
    this occurs in a subshell and the file information is not updated in the
    main shell. In the case of type or mode changes or closing the connection in
    a subshell, the information is returned but variables are not updated until
    the next call to <b>zftp</b>. Other status changes in subshells will not be
    reflected by changes to the variables (but should be otherwise
  harmless).</p>
<p class="Pp">Deleting sessions while a <b>zftp</b> command is active in the
    background can have unexpected effects, even if it does not use the session
    being deleted. This is because all shell subprocesses share information on
    the state of all connections, and deleting a session changes the ordering of
    that information.</p>
<p class="Pp">On some operating systems, the control connection is not valid
    after a fork(), so that operations in subshells, on the left hand side of a
    pipeline, or in the background are not possible, as they should be. This is
    presumably a bug in the operating system.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZLE_MODULE"><a class="permalink" href="#THE_ZSH/ZLE_MODULE">THE
  ZSH/ZLE MODULE</a></h1>
<p class="Pp">The <b>zsh/zle</b> module contains the Zsh Line Editor. See
    <i>zshzle</i>(1).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZLEPARAMETER_MODULE"><a class="permalink" href="#THE_ZSH/ZLEPARAMETER_MODULE">THE
  ZSH/ZLEPARAMETER MODULE</a></h1>
<p class="Pp">The <b>zsh/zleparameter</b> module defines two special parameters
    that can be used to access internal information of the Zsh Line Editor (see
    <i>zshzle</i>(1)).</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>keymaps</b></dt>
  <dd>This array contains the names of the keymaps currently defined.</dd>
  <dt id="widgets"><a class="permalink" href="#widgets"><b>widgets</b></a></dt>
  <dd>This associative array contains one entry per widget. The name of the
      widget is the key and the value gives information about the widget. It is
      either
    <br/>
     the string `<b>builtin</b>' for builtin widgets,
    <br/>
     a string of the form `<b>user:</b><i>name</i>' for user-defined widgets,
    <br/>
     where <i>name</i> is the name of the shell function implementing the
      widget,
    <br/>
     a string of the form `<b>completion:</b><i>type</i><b>:</b><i>name</i>'
    <br/>
     for completion widgets,
    <br/>
     or a null value if the widget is not yet fully defined. In the penultimate
      case, <i>type</i> is the name of the builtin widget the completion widget
      imitates in its behavior and <i>name</i> is the name of the shell function
      implementing the completion widget.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZPROF_MODULE"><a class="permalink" href="#THE_ZSH/ZPROF_MODULE">THE
  ZSH/ZPROF MODULE</a></h1>
<p class="Pp">When loaded, the <b>zsh/zprof</b> causes shell functions to be
    profiled. The profiling results can be obtained with the <b>zprof</b>
    builtin command made available by this module. There is no way to turn
    profiling off other than unloading the module.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zprof</b> [ <b>-c</b> ]</dt>
  <dd>Without the <b>-c</b> option, <b>zprof</b> lists profiling results to
      standard output. The format is comparable to that of commands like
      <b>gprof</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">At the top there is a summary listing all functions that were
    called at least once. This summary is sorted in decreasing order of the
    amount of time spent in each. The lines contain the number of the function
    in order, which is used in other parts of the list in suffixes of the form
    `<b>[</b><i>num</i><b>]</b>', then the number of calls made to the function.
    The next three columns list the time in milliseconds spent in the function
    and its descendants, the average time in milliseconds spent in the function
    and its descendants per call and the percentage of time spent in all shell
    functions used in this function and its descendants. The following three
    columns give the same information, but counting only the time spent in the
    function itself. The final column shows the name of the function.</p>
<p class="Pp">After the summary, detailed information about every function that
    was invoked is listed, sorted in decreasing order of the amount of time
    spent in each function and its descendants. Each of these entries consists
    of descriptions for the functions that called the function described, the
    function itself, and the functions that were called from it. The description
    for the function itself has the same format as in the summary (and shows the
    same information). The other lines don't show the number of the function at
    the beginning and have their function named indented to make it easier to
    distinguish the line showing the function described in the section from the
    surrounding lines.</p>
<p class="Pp">The information shown in this case is almost the same as in the
    summary, but only refers to the call hierarchy being displayed. For example,
    for a calling function the column showing the total running time lists the
    time spent in the described function and its descendants only for the times
    when it was called from that particular calling function. Likewise, for a
    called function, this columns lists the total time spent in the called
    function and its descendants only for the times when it was called from the
    function described.</p>
<p class="Pp">Also in this case, the column showing the number of calls to a
    function also shows a slash and then the total number of invocations made to
    the called function.</p>
<p class="Pp">As long as the <b>zsh/zprof</b> module is loaded, profiling will
    be done and multiple invocations of the <b>zprof</b> builtin command will
    show the times and numbers of calls since the module was loaded. With the
    <b>-c</b> option, the <b>zprof</b> builtin command will reset its internal
    counters and will not show the listing.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZPTY_MODULE"><a class="permalink" href="#THE_ZSH/ZPTY_MODULE">THE
  ZSH/ZPTY MODULE</a></h1>
<p class="Pp">The <b>zsh/zpty</b> module offers one builtin:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zpty</b> [ <b>-e</b> ] [ <b>-b</b> ] <i>name</i> [ <i>arg</i> ...
    ]</dt>
  <dd>The arguments following <i>name</i> are concatenated with spaces between,
      then executed as a command, as if passed to the <b>eval</b> builtin. The
      command runs under a newly assigned pseudo-terminal; this is useful for
      running commands non-interactively which expect an interactive
      environment. The <i>name</i> is not part of the command, but is used to
      refer to this command in later calls to <b>zpty</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">With the <b>-e</b> option, the pseudo-terminal is set up so that
    input characters are echoed.</p>
<p class="Pp">With the <b>-b</b> option, input to and output from the
    pseudo-terminal are made non-blocking.</p>
<p class="Pp">The shell parameter <b>REPLY</b> is set to the file descriptor
    assigned to the master side of the pseudo-terminal. This allows the terminal
    to be monitored with ZLE descriptor handlers (see <i>zshzle</i>(1)) or
    manipulated with <b>sysread</b> and <b>syswrite</b> (see THE ZSH/SYSTEM
    MODULE in <i>zshmodules</i>(1)). <i>Warning</i>: Use of <b>sysread</b> and
    <b>syswrite</b> is <i>not</i> recommended; use <b>zpty -r</b> and <b>zpty
    -w</b> unless you know exactly what you are doing.</p>
</div>
<dl class="Bl-tag">
  <dt id="zpty"><a class="permalink" href="#zpty"><b>zpty</b> <b>-d</b> [
    <i>name</i> ... ]</a></dt>
  <dd>The second form, with the <b>-d</b> option, is used to delete commands
      previously started, by supplying a list of their <i>name</i>s. If no
      <i>name</i> is given, all commands are deleted. Deleting a command causes
      the HUP signal to be sent to the corresponding process.</dd>
  <dt id="zpty~2"><a class="permalink" href="#zpty~2"><b>zpty</b> <b>-w</b> [
    <b>-n</b> ] <i>name</i> [ <i>string</i> ... ]</a></dt>
  <dd>The <b>-w</b> option can be used to send the to command <i>name</i> the
      given <i>string</i>s as input (separated by spaces). If the <b>-n</b>
      option is <i>not</i> given, a newline is added at the end.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If no <i>string</i> is provided, the standard input is copied to
    the pseudo-terminal; this may stop before copying the full input if the
    pseudo-terminal is non-blocking. The exact input is always copied: the
    <b>-n</b> option is not applied.</p>
<p class="Pp">Note that the command under the pseudo-terminal sees this input as
    if it were typed, so beware when sending special tty driver characters such
    as word-erase, line-kill, and end-of-file.</p>
</div>
<dl class="Bl-tag">
  <dt id="zpty~3"><a class="permalink" href="#zpty~3"><b>zpty</b> <b>-r</b> [
    <b>-mt</b> ] <i>name</i> [ <i>param</i> [ <i>pattern</i> ] ]</a></dt>
  <dd>The <b>-r</b> option can be used to read the output of the command
      <i>name</i>. With only a <i>name</i> argument, the output read is copied
      to the standard output. Unless the pseudo-terminal is non-blocking,
      copying continues until the command under the pseudo-terminal exits; when
      non-blocking, only as much output as is immediately available is copied.
      The return status is zero if any output is copied.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When also given a <i>param</i> argument, at most one line is read
    and stored in the parameter named <i>param</i>. Less than a full line may be
    read if the pseudo-terminal is non-blocking. The return status is zero if at
    least one character is stored in <i>param</i>.</p>
<p class="Pp">If a <i>pattern</i> is given as well, output is read until the
    whole string read matches the <i>pattern</i>, even in the non-blocking case.
    The return status is zero if the string read matches the pattern, or if the
    command has exited but at least one character could still be read. If the
    option <b>-m</b> is present, the return status is zero only if the pattern
    matches. As of this writing, a maximum of one megabyte of output can be
    consumed this way; if a full megabyte is read without matching the pattern,
    the return status is non-zero.</p>
<p class="Pp">In all cases, the return status is non-zero if nothing could be
    read, and is <b>2</b> if this is because the command has finished.</p>
<p class="Pp">If the <b>-r</b> option is combined with the <b>-t</b> option,
    <b>zpty</b> tests whether output is available before trying to read. If no
    output is available, <b>zpty</b> immediately returns the status <b>1</b>.
    When used with a <i>pattern</i>, the behaviour on a failed poll is similar
    to when the command has exited: the return value is zero if at least one
    character could still be read even if the pattern failed to match.</p>
</div>
<dl class="Bl-tag">
  <dt id="zpty~4"><a class="permalink" href="#zpty~4"><b>zpty</b> <b>-t</b>
    <i>name</i></a></dt>
  <dd>The <b>-t</b> option without the <b>-r</b> option can be used to test
      whether the command <i>name</i> is still running. It returns a zero status
      if the command is running and a non-zero value otherwise.</dd>
  <dt id="zpty~5"><a class="permalink" href="#zpty~5"><b>zpty</b> [ <b>-L</b>
    ]</a></dt>
  <dd>The last form, without any arguments, is used to list the commands
      currently defined. If the <b>-L</b> option is given, this is done in the
      form of calls to the <b>zpty</b> builtin.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZSELECT_MODULE"><a class="permalink" href="#THE_ZSH/ZSELECT_MODULE">THE
  ZSH/ZSELECT MODULE</a></h1>
<p class="Pp">The <b>zsh/zselect</b> module makes available one builtin
  command:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zselect</b> [ <b>-rwe</b> ] [ <b>-t</b> <i>timeout</i> ] [ <b>-a</b>
    <i>array</i> ] [ <b>-A</b> <i>assoc</i> ] [ <i>fd</i> ... ]</dt>
  <dd>The <b>zselect</b> builtin is a front-end to the `select' system call,
      which blocks until a file descriptor is ready for reading or writing, or
      has an error condition, with an optional timeout. If this is not available
      on your system, the command prints an error message and returns status 2
      (normal errors return status 1). For more information, see your systems
      documentation for <i>select</i>(3). Note there is no connection with the
      shell builtin of the same name.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Arguments and options may be intermingled in any order. Non-option
    arguments are file descriptors, which must be decimal integers. By default,
    file descriptors are to be tested for reading, i.e. <b>zselect</b> will
    return when data is available to be read from the file descriptor, or more
    precisely, when a read operation from the file descriptor will not block.
    After a <b>-r</b>, <b>-w</b> and <b>-e</b>, the given file descriptors are
    to be tested for reading, writing, or error conditions. These options and an
    arbitrary list of file descriptors may be given in any order.</p>
<p class="Pp">(The presence of an `error condition' is not well defined in the
    documentation for many implementations of the select system call. According
    to recent versions of the POSIX specification, it is really an
    <i>exception</i> condition, of which the only standard example is
    out-of-band data received on a socket. So zsh users are unlikely to find the
    <b>-e</b> option useful.)</p>
<p class="Pp">The option `<b>-t</b> <i>timeout</i>' specifies a timeout in
    hundredths of a second. This may be zero, in which case the file descriptors
    will simply be polled and <b>zselect</b> will return immediately. It is
    possible to call zselect with no file descriptors and a non-zero timeout for
    use as a finer-grained replacement for `sleep'; note, however, the return
    status is always 1 for a timeout.</p>
<p class="Pp">The option `<b>-a</b> <i>array</i>' indicates that <i>array</i>
    should be set to indicate the file descriptor(s) which are ready. If the
    option is not given, the array <b>reply</b> will be used for this purpose.
    The array will contain a string similar to the arguments for <b>zselect</b>.
    For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zselect -t 0 -r 0 -w 1</b></pre>
</div>
<p class="Pp">might return immediately with status 0 and <b>$reply</b>
    containing `<b>-r 0 -w</b> <b>1</b>' to show that both file descriptors are
    ready for the requested operations.</p>
<p class="Pp">The option `<b>-A</b> <i>assoc</i>' indicates that the associative
    array <i>assoc</i> should be set to indicate the file descriptor(s) which
    are ready. This option overrides the option <b>-a</b>, nor will <b>reply</b>
    be modified. The keys of <b>assoc</b> are the file descriptors, and the
    corresponding values are any of the characters `<b>rwe</b>' to indicate the
    condition.</p>
<p class="Pp">The command returns status 0 if some file descriptors are ready
    for reading. If the operation timed out, or a timeout of 0 was given and no
    file descriptors were ready, or there was an error, it returns status 1 and
    the array will not be set (nor modified in any way). If there was an error
    in the select operation the appropriate error message is printed.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_ZSH/ZUTIL_MODULE"><a class="permalink" href="#THE_ZSH/ZUTIL_MODULE">THE
  ZSH/ZUTIL MODULE</a></h1>
<p class="Pp">The <b>zsh/zutil</b> module only adds some builtins:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zstyle</b> [ <b>-L</b> [ <i>metapattern</i> [ <i>style</i> ] ] ]</dt>
  <dd></dd>
  <dt><b>zstyle</b> [ <b>-e</b> | <b>-</b> | <b>-</b><b>-</b> ] <i>pattern</i>
    <i>style</i> <i>string</i> ...</dt>
  <dd></dd>
  <dt><b>zstyle -d</b> [ <i>pattern</i> [ <i>style</i> ... ] ]</dt>
  <dd></dd>
  <dt><b>zstyle -g</b> <i>name</i> [ <i>pattern</i> [ <i>style</i> ] ]</dt>
  <dd></dd>
  <dt><b>zstyle -</b>{<b>a</b>|<b>b</b>|<b>s</b>} <i>context</i> <i>style</i>
    <i>name</i> [ <i>sep</i> ]</dt>
  <dd></dd>
  <dt><b>zstyle -</b>{<b>T</b>|<b>t</b>} <i>context</i> <i>style</i> [
    <i>string</i> ... ]</dt>
  <dd></dd>
  <dt><b>zstyle -m</b> <i>context</i> <i>style</i> <i>pattern</i></dt>
  <dd>This builtin command is used to define and lookup styles. Styles are pairs
      of names and values, where the values consist of any number of strings.
      They are stored together with patterns and lookup is done by giving a
      string, called the `<i>context</i>', which is matched against the
      patterns. The definition stored for the most specific pattern that matches
      will be returned.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">A pattern is considered to be more specific than another if it
    contains more components (substrings separated by colons) or if the patterns
    for the components are more specific, where simple strings are considered to
    be more specific than patterns and complex patterns are considered to be
    more specific than the pattern `<b>*</b>'. A `<b>*</b>' in the pattern will
    match zero or more characters in the context; colons are not treated
    specially in this regard. If two patterns are equally specific, the tie is
    broken in favour of the pattern that was defined first.</p>
<p class="Pp"><i>Example</i></p>
<p class="Pp">For example, to define your preferred form of precipitation
    depending on which city you're in, you might set the following in your
    <b>zshrc</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zstyle ':weather:europe:*' preferred-precipitation rain</b>
<b>zstyle ':weather:europe:germany:* preferred-precipitation none</b>
<b>zstyle ':weather:europe:germany:*:munich' preferred-precipitation snow</b></pre>
</div>
<p class="Pp">Then, the fictional `<b>weather</b>' plugin might run under the
    hood a command such as</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zstyle -s &quot;:weather:${continent}:${country}:${county}:${city}&quot; preferred-precipitation REPLY</b></pre>
</div>
<p class="Pp">in order to retrieve your preference into the scalar variable
    <b>$REPLY</b>.</p>
<p class="Pp"><i>Usage</i></p>
<p class="Pp">The forms that operate on patterns are the following.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zstyle</b> [ <b>-L</b> [ <i>metapattern</i> [ <i>style</i> ] ] ]</dt>
  <dd>Without arguments, lists style definitions. Styles are shown in alphabetic
      order and patterns are shown in the order <b>zstyle</b> will test
    them.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the <b>-L</b> option is given, listing is done in the form of
    calls to <b>zstyle</b>. The optional first argument, <i>metapattern</i>, is
    a pattern which will be matched against the string supplied as
    <i>pattern</i> when the style was defined. Note: this means, for example,
    `<b>zstyle -L &quot;:completion:*&quot;</b>' will match any supplied pattern
    beginning `<b>:completion:</b>', not just <b>&quot;:completion:*&quot;</b>:
    use <b>':completion:\*'</b> to match that. The optional second argument
    limits the output to a specific <i>style</i> (not a pattern). <b>-L</b> is
    not compatible with any other options.</p>
</div>
<dl class="Bl-tag">
  <dt id="zstyle"><a class="permalink" href="#zstyle"><b>zstyle</b> [ <b>-</b> |
    <b>-</b><b>-</b> | <b>-e</b> ] <i>pattern</i> <i>style</i> <i>string</i>
    ...</a></dt>
  <dd>Defines the given <i>style</i> for the <i>pattern</i> with the
      <i>string</i>s as the value. If the <b>-e</b> option is given, the
      <i>string</i>s will be concatenated (separated by spaces) and the
      resulting string will be evaluated (in the same way as it is done by the
      <b>eval</b> builtin command) when the style is looked up. In this case the
      parameter `<b>reply</b>' must be assigned to set the strings returned
      after the evaluation. Before evaluating the value, <b>reply</b> is unset,
      and if it is still unset after the evaluation, the style is treated as if
      it were not set.</dd>
  <dt id="zstyle~2"><a class="permalink" href="#zstyle~2"><b>zstyle -d</b> [
    <i>pattern</i> [ <i>style</i> ... ] ]</a></dt>
  <dd>Delete style definitions. Without arguments all definitions are deleted,
      with a <i>pattern</i> all definitions for that pattern are deleted and if
      any <i>style</i>s are given, then only those styles are deleted for the
      <i>pattern</i>.</dd>
  <dt id="zstyle~3"><a class="permalink" href="#zstyle~3"><b>zstyle -g</b>
    <i>name</i> [ <i>pattern</i> [ <i>style</i> ] ]</a></dt>
  <dd>Retrieve a style definition. The <i>name</i> is used as the name of an
      array in which the results are stored. Without any further arguments, all
      patterns defined are returned. With a <i>pattern</i> the styles defined
      for that pattern are returned and with both a <i>pattern</i> and a
      <i>style</i>, the value strings of that combination is returned.</dd>
</dl>
<p class="Pp">The other forms can be used to look up or test styles for a given
    context.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>zstyle -s</b> <i>context</i> <i>style</i> <i>name</i> [ <i>sep</i>
    ]</dt>
  <dd>The parameter <i>name</i> is set to the value of the style interpreted as
      a string. If the value contains several strings they are concatenated with
      spaces (or with the <i>sep</i> string if that is given) between them.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Return <b>0</b> if the style is set, <b>1</b> otherwise.</p>
</div>
<dl class="Bl-tag">
  <dt id="zstyle~4"><a class="permalink" href="#zstyle~4"><b>zstyle -b</b>
    <i>context</i> <i>style</i> <i>name</i></a></dt>
  <dd>The value is stored in <i>name</i> as a boolean, i.e. as the string
      `<b>yes</b>' if the value has only one string and that string is equal to
      one of `<b>yes</b>', `<b>true</b>', `<b>on</b>', or `<b>1</b>'. If the
      value is any other string or has more than one string, the parameter is
      set to `<b>no</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Return <b>0</b> if <i>name</i> is set to `<b>yes</b>', <b>1</b>
    otherwise.</p>
</div>
<dl class="Bl-tag">
  <dt id="zstyle~5"><a class="permalink" href="#zstyle~5"><b>zstyle -a</b>
    <i>context</i> <i>style</i> <i>name</i></a></dt>
  <dd>The value is stored in <i>name</i> as an array. If <i>name</i> is declared
      as an associative array, the first, third, etc. strings are used as the
      keys and the other strings are used as the values.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Return <b>0</b> if the style is set, <b>1</b> otherwise.</p>
</div>
<dl class="Bl-tag">
  <dt><b>zstyle -t</b> <i>context</i> <i>style</i> [ <i>string</i> ... ]</dt>
  <dd></dd>
  <dt><b>zstyle -T</b> <i>context</i> <i>style</i> [ <i>string</i> ... ]</dt>
  <dd>Test the value of a style, i.e. the <b>-t</b> option only returns a status
      (sets <b>$?</b>). Without any <i>string</i> the return status is zero if
      the style is defined for at least one matching pattern, has only one
      string in its value, and that is equal to one of `<b>true</b>',
      `<b>yes</b>', `<b>on</b>' or `<b>1</b>'. If any <i>string</i>s are given
      the status is zero if and only if at least one of the <i>string</i>s is
      equal to at least one of the strings in the value. If the style is defined
      but doesn't match, the return status is <b>1</b>. If the style is not
      defined, the status is <b>2</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>-T</b> option tests the values of the style like <b>-t</b>,
    but it returns status zero (rather than <b>2</b>) if the style is not
    defined for any matching pattern.</p>
</div>
<dl class="Bl-tag">
  <dt id="zstyle~6"><a class="permalink" href="#zstyle~6"><b>zstyle -m</b>
    <i>context</i> <i>style</i> <i>pattern</i></a></dt>
  <dd>Match a value. Returns status zero if the <i>pattern</i> matches at least
      one of the strings in the value.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><b>zformat -f</b> <i>param</i> <i>format</i> <i>spec</i> ...</dt>
  <dd></dd>
  <dt><b>zformat -a</b> <i>array</i> <i>sep</i> <i>spec</i> ...</dt>
  <dd>This builtin provides two different forms of formatting. The first form is
      selected with the <b>-f</b> option. In this case the <i>format</i> string
      will be modified by replacing sequences starting with a percent sign in it
      with strings from the <i>spec</i>s. Each <i>spec</i> should be of the form
      `<i>char</i><b>:</b><i>string</i>' which will cause every appearance of
      the sequence `<b>%</b><i>char</i>' in <i>format</i> to be replaced by the
      <i>string</i>. The `<b>%</b>' sequence may also contain optional minimum
      and maximum field width specifications between the `<b>%</b>' and the
      `<i>char</i>' in the form `<b>%</b><i>min</i><b>.</b><i>max</i><b>c</b>',
      i.e. the minimum field width is given first and if the maximum field width
      is used, it has to be preceded by a dot. Specifying a minimum field width
      makes the result be padded with spaces to the right if the <i>string</i>
      is shorter than the requested width. Padding to the left can be achieved
      by giving a negative minimum field width. If a maximum field width is
      specified, the <i>string</i> will be truncated after that many characters.
      After all `<b>%</b>' sequences for the given <i>spec</i>s have been
      processed, the resulting string is stored in the parameter
    <i>param</i>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>%</b>-escapes also understand ternary expressions in the
    form used by prompts. The <b>%</b> is followed by a `<b>(</b>' and then an
    ordinary format specifier character as described above. There may be a set
    of digits either before or after the `<b>(</b>'; these specify a test
    number, which defaults to zero. Negative numbers are also allowed. An
    arbitrary delimiter character follows the format specifier, which is
    followed by a piece of `true' text, the delimiter character again, a piece
    of `false' text, and a closing parenthesis. The complete expression (without
    the digits) thus looks like
    `<b>%(</b><i>X</i><b>.</b><i>text1</i><b>.</b><i>text2</i><b>)</b>', except
    that the `<b>.</b>' character is arbitrary. The value given for the format
    specifier in the <i>char</i><b>:</b><i>string</i> expressions is evaluated
    as a mathematical expression, and compared with the test number. If they are
    the same, <i>text1</i> is output, else <i>text2</i> is output. A parenthesis
    may be escaped in <i>text2</i> as <b>%)</b>. Either of <i>text1</i> or
    <i>text2</i> may contain nested <b>%</b>-escapes.</p>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zformat -f REPLY &quot;The answer is '%3(c.yes.no)'.&quot; c:3</b></pre>
</div>
<p class="Pp">outputs &quot;The answer is 'yes'.&quot; to <b>REPLY</b> since the
    value for the format specifier <b>c</b> is 3, agreeing with the digit
    argument to the ternary expression.</p>
<p class="Pp">The second form, using the <b>-a</b> option, can be used for
    aligning strings. Here, the <i>spec</i>s are of the form
    `<i>left</i><b>:</b><i>right</i>' where `<i>left</i>' and `<i>right</i>' are
    arbitrary strings. These strings are modified by replacing the colons by the
    <i>sep</i> string and padding the <i>left</i> strings with spaces to the
    right so that the <i>sep</i> strings in the result (and hence the
    <i>right</i> strings after them) are all aligned if the strings are printed
    below each other. All strings without a colon are left unchanged and all
    strings with an empty <i>right</i> string have the trailing colon removed.
    In both cases the lengths of the strings are not used to determine how the
    other strings are to be aligned. A colon in the <i>left</i> string can be
    escaped with a backslash. The resulting strings are stored in the
    <i>array</i>.</p>
</div>
<dl class="Bl-tag">
  <dt id="zregexparse"><a class="permalink" href="#zregexparse"><b>zregexparse</b></a></dt>
  <dd>This implements some internals of the <b>_regex_arguments</b>
    function.</dd>
  <dt id="zparseopts"><a class="permalink" href="#zparseopts"><b>zparseopts</b>
    [ <b>-D</b> <b>-E</b> <b>-F</b> <b>-K</b> <b>-M</b> ] [ <b>-a</b>
    <i>array</i> ] [ <b>-A</b> <i>assoc</i> ] [ <b>-</b> ] <i>spec</i>
    ...</a></dt>
  <dd>This builtin simplifies the parsing of options in positional parameters,
      i.e. the set of arguments given by <b>$*</b>. Each <i>spec</i> describes
      one option and must be of the form `<i>opt</i>[<b>=</b><i>array</i>]'. If
      an option described by <i>opt</i> is found in the positional parameters it
      is copied into the <i>array</i> specified with the <b>-a</b> option; if
      the optional `<b>=</b><i>array</i>' is given, it is instead copied into
      that array, which should be declared as a normal array and never as an
      associative array.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that it is an error to give any <i>spec</i> without an
    `<b>=</b><i>array</i>' unless one of the <b>-a</b> or <b>-A</b> options is
    used.</p>
<p class="Pp">Unless the <b>-E</b> option is given, parsing stops at the first
    string that isn't described by one of the <i>spec</i>s. Even with <b>-E</b>,
    parsing always stops at a positional parameter equal to `<b>-</b>' or
    `<b>-</b><b>-</b>'. See also <b>-F</b>.</p>
<p class="Pp">The <i>opt</i> description must be one of the following. Any of
    the special characters can appear in the option name provided it is preceded
    by a backslash.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><i>name</i></dt>
  <dd></dd>
  <dt><i>name</i><b>+</b></dt>
  <dd>The <i>name</i> is the name of the option without the leading `<b>-</b>'.
      To specify a GNU-style long option, one of the usual two leading
      `<b>-</b>' must be included in <i>name</i>; for example, a
      `<b>-</b><b>-file</b>' option is represented by a <i>name</i> of
      `<b>-file</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If a `<b>+</b>' appears after <i>name</i>, the option is appended
    to <i>array</i> each time it is found in the positional parameters; without
    the `<b>+</b>' only the <i>last</i> occurrence of the option is
  preserved.</p>
<p class="Pp">If one of these forms is used, the option takes no argument, so
    parsing stops if the next positional parameter does not also begin with
    `<b>-</b>' (unless the <b>-E</b> option is used).</p>
</div>
<dl class="Bl-tag">
  <dt><i>name</i><b>:</b></dt>
  <dd></dd>
  <dt><i>name</i><b>:-</b></dt>
  <dd></dd>
  <dt><i>name</i><b>::</b></dt>
  <dd>If one or two colons are given, the option takes an argument; with one
      colon, the argument is mandatory and with two colons it is optional. The
      argument is appended to the <i>array</i> after the option itself.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">An optional argument is put into the same array element as the
    option name (note that this makes empty strings as arguments
    indistinguishable). A mandatory argument is added as a separate element
    unless the `<b>:-</b>' form is used, in which case the argument is put into
    the same element.</p>
<p class="Pp">A `<b>+</b>' as described above may appear between the <i>name</i>
    and the first colon.</p>
</div>
<p class="Pp">In all cases, option-arguments must appear either immediately
    following the option in the same positional parameter or in the next one.
    Even an optional argument may appear in the next parameter, unless it begins
    with a `<b>-</b>'. There is no special handling of `<b>=</b>' as with
    GNU-style argument parsers; given the <i>spec</i> `<b>-foo:</b>', the
    positional parameter `<b>-</b><b>-foo=bar</b>' is parsed as
    `<b>-</b><b>-foo</b>' with an argument of `<b>=bar</b>'.</p>
<p class="Pp">When the names of two options that take no arguments overlap, the
    longest one wins, so that parsing for the <i>spec</i>s `<b>-foo -foobar</b>'
    (for example) is unambiguous. However, due to the aforementioned handling of
    option-arguments, ambiguities may arise when at least one overlapping
    <i>spec</i> takes an argument, as in `<b>-foo: -foobar</b>'. In that case,
    the last matching <i>spec</i> wins.</p>
<p class="Pp">The options of <b>zparseopts</b> itself cannot be stacked because,
    for example, the stack `<b>-DEK</b>' is indistinguishable from a <i>spec</i>
    for the GNU-style long option `<b>-</b><b>-DEK</b>'. The options of
    <b>zparseopts</b> itself are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-a</b> <i>array</i></dt>
  <dd>As described above, this names the default array in which to store the
      recognised options.</dd>
  <dt id="A"><a class="permalink" href="#A"><b>-A</b> <i>assoc</i></a></dt>
  <dd>If this is given, the options and their values are also put into an
      associative array with the option names as keys and the arguments (if any)
      as the values.</dd>
  <dt id="D~2"><a class="permalink" href="#D~2"><b>-D</b></a></dt>
  <dd>If this option is given, all options found are removed from the positional
      parameters of the calling shell or shell function, up to but not including
      any not described by the <i>spec</i>s. If the first such parameter is
      `<b>-</b>' or `<b>-</b><b>-</b>', it is removed as well. This is similar
      to using the <b>shift</b> builtin.</dd>
  <dt id="E"><a class="permalink" href="#E"><b>-E</b></a></dt>
  <dd>This changes the parsing rules to <i>not</i> stop at the first string that
      isn't described by one of the <i>spec</i>s. It can be used to test for or
      (if used together with <b>-D</b>) extract options and their arguments,
      ignoring all other options and arguments that may be in the positional
      parameters. As indicated above, parsing still stops at the first
      `<b>-</b>' or `<b>-</b><b>-</b>' not described by a <i>spec</i>, but it is
      not removed when used with <b>-D</b>.</dd>
  <dt id="F~2"><a class="permalink" href="#F~2"><b>-F</b></a></dt>
  <dd>If this option is given, <b>zparseopts</b> immediately stops at the first
      option-like parameter not described by one of the <i>spec</i>s, prints an
      error message, and returns status 1. Removal (<b>-D</b>) and extraction
      (<b>-E</b>) are not performed, and option arrays are not updated. This
      provides basic validation for the given options.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that the appearance in the positional parameters of an option
    without its required argument always aborts parsing and returns an error as
    described above regardless of whether this option is used.</p>
</div>
<dl class="Bl-tag">
  <dt id="K"><a class="permalink" href="#K"><b>-K</b></a></dt>
  <dd>With this option, the arrays specified with the <b>-a</b> option and with
      the `<b>=</b><i>array</i>' forms are kept unchanged when none of the
      <i>spec</i>s for them is used. Otherwise the entire array is replaced when
      any of the <i>spec</i>s is used. Individual elements of associative arrays
      specified with the <b>-A</b> option are preserved by <b>-K</b>. This
      allows assignment of default values to arrays before calling
      <b>zparseopts</b>.</dd>
  <dt id="M"><a class="permalink" href="#M"><b>-M</b></a></dt>
  <dd>This changes the assignment rules to implement a map among equivalent
      option names. If any <i>spec</i> uses the `<b>=</b><i>array</i>' form, the
      string <i>array</i> is interpreted as the name of another <i>spec</i>,
      which is used to choose where to store the values. If no other <i>spec</i>
      is found, the values are stored as usual. This changes only the way the
      values are stored, not the way <b>$*</b> is parsed, so results may be
      unpredictable if the `<i>name</i><b>+</b>' specifier is used
      inconsistently.</dd>
</dl>
<p class="Pp">For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>set -- -a -bx -c y -cz baz -cend</b>
<b>zparseopts a=foo b:=bar c+:=bar</b></pre>
</div>
<p class="Pp">will have the effect of</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>foo=(-a)</b>
<b>bar=(-b x -c y -c z)</b></pre>
</div>
<p class="Pp">The arguments from `<b>baz</b>' on will not be used.</p>
<p class="Pp">As an example for the <b>-E</b> option, consider:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>set -- -a x -b y -c z arg1 arg2</b>
<b>zparseopts -E -D b:=bar</b></pre>
</div>
<p class="Pp">will have the effect of</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>bar=(-b y)</b>
<b>set -- -a x -c z arg1 arg2</b></pre>
</div>
<p class="Pp">I.e., the option <b>-b</b> and its arguments are taken from the
    positional parameters and put into the array <b>bar</b>.</p>
<p class="Pp">The <b>-M</b> option can be used like this:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>set -- -a -bx -c y -cz baz -cend</b>
<b>zparseopts -A bar -M a=foo b+: c:=b</b></pre>
</div>
<p class="Pp">to have the effect of</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>foo=(-a)</b>
<b>bar=(-a '' -b xyz)</b></pre>
</div>
</div>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 14, 2020</td>
    <td class="foot-os">zsh 5.8</td>
  </tr>
</table>
</body>
</html>
