<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>MooseX::Getopt(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MooseX::Getopt(3pm)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">MooseX::Getopt(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">MooseX::Getopt - A Moose role for processing command line
  options</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 0.59</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  ## In your class
  package My::App;
  use Moose;
  with 'MooseX::Getopt';
  has 'out' =&gt; (is =&gt; 'rw', isa =&gt; 'Str', required =&gt; 1);
  has 'in'  =&gt; (is =&gt; 'rw', isa =&gt; 'Str', required =&gt; 1);
  # ... rest of the class here
  ## in your script
  #!/usr/bin/perl
  use My::App;
  my $app = My::App-&gt;new_with_options();
  # ... rest of the script here
  ## on the command line
  % perl my_app_script.pl -in file.input -out file.dump
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This is a role which provides an alternate constructor for
    creating objects using parameters passed in from the command line.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_new_with_options_(_params)_"><a class="permalink" href="#_new_with_options_(_params)_">&quot;new_with_options
  (%params)&quot;</a></h2>
<p class="Pp">This method will take a set of default
    <span class="Li">%params</span> and then collect parameters from the command
    line (possibly overriding those in <span class="Li">%params</span>) and then
    return a newly constructed object.</p>
<p class="Pp">The special parameter <span class="Li">&quot;argv&quot;</span>, if
    specified should point to an array reference with an array to use instead of
    <span class="Li">@ARGV</span>.</p>
<p class="Pp">If &quot;GetOptions&quot; in Getopt::Long fails (due to invalid
    arguments), <span class="Li">&quot;new_with_options&quot;</span> will throw
    an exception.</p>
<p class="Pp">If Getopt::Long::Descriptive is installed and any of the following
    command line parameters are passed, the program will exit with usage
    information (and the option's state will be stored in the help_flag
    attribute). You can add descriptions for each option by including a
    <b>documentation</b> option for each attribute to document.</p>
<p class="Pp"></p>
<pre>  -?
  --?
  -h
  --help
  --usage
</pre>
<p class="Pp">If you have Getopt::Long::Descriptive the
    <span class="Li">&quot;usage&quot;</span> parameter is also passed to
    <span class="Li">&quot;new&quot;</span> as the usage option.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_ARGV_"><a class="permalink" href="#_ARGV_">&quot;ARGV&quot;</a></h2>
<p class="Pp">This accessor contains a reference to a copy of the
    <span class="Li">@ARGV</span> array as it originally existed at the time of
    <span class="Li">&quot;new_with_options&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_extra_argv_"><a class="permalink" href="#_extra_argv_">&quot;extra_argv&quot;</a></h2>
<p class="Pp">This accessor contains an arrayref of leftover
    <span class="Li">@ARGV</span> elements that Getopt::Long did not parse. Note
    that the real <span class="Li">@ARGV</span> is left untouched.</p>
<p class="Pp"><b>Important</b>: By default, Getopt::Long will reject
    unrecognized <i>options</i> (that is, options that do not correspond with
    attributes using the Getopt trait). To disable this, and allow options to
    also be saved in <span class="Li">&quot;extra_argv&quot;</span> (for example
    to pass along to another class's
    <span class="Li">&quot;new_with_options&quot;</span>), you can either enable
    the <span class="Li">&quot;pass_through&quot;</span> option of Getopt::Long
    for your class: <span class="Li">&quot;use Getopt::Long</span>
    <span class="Li">qw(:config pass_through);&quot;</span> or specify a value
    for MooseX::Getopt::GLD's <span class="Li">&quot;getopt_conf&quot;</span>
    parameter.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_usage_"><a class="permalink" href="#_usage_">&quot;usage&quot;</a></h2>
<p class="Pp">This accessor contains the Getopt::Long::Descriptive::Usage object
    (if Getopt::Long::Descriptive is used).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_help_flag_"><a class="permalink" href="#_help_flag_">&quot;help_flag&quot;</a></h2>
<p class="Pp">This accessor contains the boolean state of the --help, --usage
    and --? options (true if any of these options were passed on the command
    line).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_print_usage_text_"><a class="permalink" href="#_print_usage_text_">&quot;print_usage_text&quot;</a></h2>
<p class="Pp">This method is called internally when the
    <span class="Li">&quot;help_flag&quot;</span> state is true. It prints the
    text from the <span class="Li">&quot;usage&quot;</span> object (see above)
    to <span class="Li">&quot;stdout&quot;</span> and then the program
    terminates normally. You can apply a method modification (see
    Moose::Manual::MethodModifiers) if different behaviour is desired, for
    example to include additional text.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_meta_"><a class="permalink" href="#_meta_">&quot;meta&quot;</a></h2>
<p class="Pp">This returns the role meta object.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_process_argv_(_params)_"><a class="permalink" href="#_process_argv_(_params)_">&quot;process_argv
  (%params)&quot;</a></h2>
<p class="Pp">This does most of the work of
    <span class="Li">&quot;new_with_options&quot;</span>, analyzing the
    parameters and <span class="Li">&quot;argv&quot;</span>, except for actually
    calling the constructor. It returns a MooseX::Getopt::ProcessedArgv object.
    <span class="Li">&quot;new_with_options&quot;</span> uses this method
    internally, so modifying this method via subclasses/roles will affect
    <span class="Li">&quot;new_with_options&quot;</span>.</p>
<p class="Pp">This module attempts to DWIM as much as possible with the command
    line parameters by introspecting your class's attributes. It will use the
    name of your attribute as the command line option, and if there is a type
    constraint defined, it will configure Getopt::Long to handle the option
    accordingly.</p>
<p class="Pp">You can use the trait MooseX::Getopt::Meta::Attribute::Trait or
    the attribute metaclass MooseX::Getopt::Meta::Attribute to get non-default
    command-line option names and aliases.</p>
<p class="Pp">You can use the trait
    MooseX::Getopt::Meta::Attribute::Trait::NoGetopt or the attribute metaclass
    MooseX::Getopt::Meta::Attribute::NoGetopt to have
    <span class="Li">&quot;MooseX::Getopt&quot;</span> ignore your attribute in
    the command-line options.</p>
<p class="Pp">By default, attributes which start with an underscore are not
    given command-line argument support, unless the attribute's metaclass is set
    to MooseX::Getopt::Meta::Attribute. If you don't want your accessors to have
    the leading underscore in their name, you can do this:</p>
<p class="Pp"></p>
<pre>  # for read/write attributes
  has '_foo' =&gt; (accessor =&gt; 'foo', ...);
  # or for read-only attributes
  has '_bar' =&gt; (reader =&gt; 'bar', ...);
</pre>
<p class="Pp">This will mean that Getopt will not handle a --foo parameter, but
    your code can still call the <span class="Li">&quot;foo&quot;</span>
  method.</p>
<p class="Pp">If your class also uses a configfile-loading role based on
    MooseX::ConfigFromFile, such as MooseX::SimpleConfig, MooseX::Getopt's
    <span class="Li">&quot;new_with_options&quot;</span> will load the
    configfile specified by the <span class="Li">&quot;--configfile&quot;</span>
    option (or the default you've given for the configfile attribute) for
  you.</p>
<p class="Pp">Options specified in multiple places follow the following
    precedence order: command-line overrides configfile, which overrides
    explicit new_with_options parameters.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Supported_Type_Constraints"><a class="permalink" href="#Supported_Type_Constraints">Supported
  Type Constraints</a></h2>
<dl class="Bl-tag">
  <dt id="Bool"><a class="permalink" href="#Bool"><i>Bool</i></a></dt>
  <dd>A <i>Bool</i> type constraint is set up as a boolean option with
      Getopt::Long. So that this attribute description:
    <p class="Pp"></p>
    <pre>  has 'verbose' =&gt; (is =&gt; 'rw', isa =&gt; 'Bool');
    </pre>
    <p class="Pp">would translate into
        <span class="Li">&quot;verbose!&quot;</span> as a Getopt::Long option
        descriptor, which would enable the following command line options:</p>
    <p class="Pp"></p>
    <pre>  % my_script.pl --verbose
  % my_script.pl --noverbose
    </pre>
  </dd>
  <dt id="Int"><a class="permalink" href="#Int"><i>Int</i>, <i>Float</i>,
    <i>Str</i></a></dt>
  <dd>These type constraints are set up as properly typed options with
      Getopt::Long, using the <span class="Li">&quot;=i&quot;</span>,
      <span class="Li">&quot;=f&quot;</span> and
      <span class="Li">&quot;=s&quot;</span> modifiers as appropriate.</dd>
  <dt id="ArrayRef"><a class="permalink" href="#ArrayRef"><i>ArrayRef</i></a></dt>
  <dd>An <i>ArrayRef</i> type constraint is set up as a multiple value option in
      Getopt::Long. So that this attribute description:
    <p class="Pp"></p>
    <pre>  has 'include' =&gt; (
      is      =&gt; 'rw',
      isa     =&gt; 'ArrayRef',
      default =&gt; sub { [] }
  );
    </pre>
    <p class="Pp">would translate into
        <span class="Li">&quot;includes=s@&quot;</span> as a Getopt::Long option
        descriptor, which would enable the following command line options:</p>
    <p class="Pp"></p>
    <pre>  % my_script.pl --include /usr/lib --include /usr/local/lib
    </pre>
  </dd>
  <dt id="HashRef"><a class="permalink" href="#HashRef"><i>HashRef</i></a></dt>
  <dd>A <i>HashRef</i> type constraint is set up as a hash value option in
      Getopt::Long. So that this attribute description:
    <p class="Pp"></p>
    <pre>  has 'define' =&gt; (
      is      =&gt; 'rw',
      isa     =&gt; 'HashRef',
      default =&gt; sub { {} }
  );
    </pre>
    <p class="Pp">would translate into
        <span class="Li">&quot;define=s%&quot;</span> as a Getopt::Long option
        descriptor, which would enable the following command line options:</p>
    <p class="Pp"></p>
    <pre>  % my_script.pl --define os=linux --define vendor=debian
    </pre>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Custom_Type_Constraints"><a class="permalink" href="#Custom_Type_Constraints">Custom
  Type Constraints</a></h2>
<p class="Pp">It is possible to create custom type constraint to option spec
    mappings if you need them. The process is fairly simple (but a little
    verbose maybe). First you create a custom subtype, like so:</p>
<p class="Pp"></p>
<pre>  subtype 'ArrayOfInts'
      =&gt; as 'ArrayRef'
      =&gt; where { scalar (grep { looks_like_number($_) } @$_)  };
</pre>
<p class="Pp">Then you register the mapping, like so:</p>
<p class="Pp"></p>
<pre>  MooseX::Getopt::OptionTypeMap-&gt;add_option_type_to_map(
      'ArrayOfInts' =&gt; '=i@'
  );
</pre>
<p class="Pp">Now any attribute declarations using this type constraint will get
    the custom option spec. So that, this:</p>
<p class="Pp"></p>
<pre>  has 'nums' =&gt; (
      is      =&gt; 'ro',
      isa     =&gt; 'ArrayOfInts',
      default =&gt; sub { [0] }
  );
</pre>
<p class="Pp">Will translate to the following on the command line:</p>
<p class="Pp"></p>
<pre>  % my_script.pl --nums 5 --nums 88 --nums 199
</pre>
<p class="Pp">This example is fairly trivial, but more complex validations are
    easily possible with a little creativity. The trick is balancing the type
    constraint validations with the Getopt::Long validations.</p>
<p class="Pp">Better examples are certainly welcome :)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Inferred_Type_Constraints"><a class="permalink" href="#Inferred_Type_Constraints">Inferred
  Type Constraints</a></h2>
<p class="Pp">If you define a custom subtype which is a subtype of one of the
    standard &quot;Supported Type Constraints&quot; above, and do not explicitly
    provide custom support as in &quot;Custom Type Constraints&quot; above,
    MooseX::Getopt will treat it like the parent type for Getopt purposes.</p>
<p class="Pp">For example, if you had the same custom
    <span class="Li">&quot;ArrayOfInts&quot;</span> subtype from the examples
    above, but did not add a new custom option type for it to the
    <span class="Li">&quot;OptionTypeMap&quot;</span>, it would be treated just
    like a normal <span class="Li">&quot;ArrayRef&quot;</span> type for Getopt
    purposes (that is, <span class="Li">&quot;=s@&quot;</span>).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="More_Customization_Options"><a class="permalink" href="#More_Customization_Options">More
  Customization Options</a></h2>
<p class="Pp">See &quot;Configuring Getopt::Long&quot; in Getopt::Long for many
    other customizations you can make to how options are parsed. Simply
    <span class="Li">&quot;use Getopt::Long qw(:config</span>
    <span class="Li">other_options...)&quot;</span> in your class to set
  these.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">MooseX::Getopt::Usage, an extension to generate man pages, with
    colour</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Stevan Little &lt;stevan@iinteractive.com&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is copyright (c) 2007 by Infinity Interactive,
  Inc.</p>
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONTRIBUTORS"><a class="permalink" href="#CONTRIBUTORS">CONTRIBUTORS</a></h1>
<ul class="Bl-bullet">
  <li>Brandon L Black &lt;blblack@gmail.com&gt;</li>
  <li>Chris Prather &lt;chris@prather.org&gt;</li>
  <li>Dagfinn Ilmari Mannsaaker &lt;ilmari@ilmari.org&gt;</li>
  <li>Damien Krotkine &lt;dkrotkine@weborama.com&gt;</li>
  <li>Devin Austin &lt;devin@devin-laptop.(none)&gt;</li>
  <li>Drew Taylor &lt;drew@drewtaylor.com&gt;</li>
  <li>Florian Ragwitz &lt;rafl@debian.org&gt;</li>
  <li>Gordon Irving &lt;goraxe@goraxe.me.uk&gt;</li>
  <li>Hans Dieter Pearcey &lt;hdp@weftsoar.net&gt;</li>
  <li>Hinrik Oern Sigurd`sson &lt;hinrik.sig@gmail.com&gt;</li>
  <li>Jesse Luehrs &lt;doy@tozt.net&gt;</li>
  <li>John Goulah &lt;jgoulah@cpan.org&gt;</li>
  <li>Jonathan Swartz &lt;swartz@pobox.com&gt;</li>
  <li>Justin Hunter &lt;justin.d.hunter@gmail.com&gt;</li>
  <li>Karen Etheridge &lt;ether@cpan.org&gt;</li>
  <li>Nelo Onyiah &lt;nelo.onyiah@gmail.com&gt;</li>
  <li>Ricardo SIGNES &lt;rjbs@cpan.org&gt;</li>
  <li>Ryan D Johnson &lt;ryan@innerfence.com&gt;</li>
  <li>Shlomi Fish &lt;shlomif@iglu.org.il&gt;</li>
  <li>Stevan Little &lt;stevan.little@iinteractive.com&gt;</li>
  <li>Todd Hepler &lt;thepler@employees.org&gt;</li>
  <li>Tomas Doran &lt;bobtfish@bobtfish.net&gt;</li>
  <li>Yuval Kogman &lt;nothingmuch@woobling.org&gt;</li>
  <li>AEvar Arnfjoerd` Bjarmason &lt;avarab@gmail.com&gt;</li>
</ul>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-11-30</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
