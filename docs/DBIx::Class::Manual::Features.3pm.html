<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>DBIx::Class::Manual::Features(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DBIx::Class::Manual::Features(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">DBIx::Class::Manual::Features(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">DBIx::Class::Manual::Features - A boatload of DBIx::Class features
    with links to respective documentation</p>
</section>
<section class="Sh">
<h1 class="Sh" id="META"><a class="permalink" href="#META">META</a></h1>
<section class="Ss">
<h2 class="Ss" id="Large_Community"><a class="permalink" href="#Large_Community">Large
  Community</a></h2>
<p class="Pp">There are hundres of DBIC contributors listed in <i>AUTHORS</i>.
    That ranges from documentation help, to test help, to added features, to
    entire database support.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Active_Community"><a class="permalink" href="#Active_Community">Active
  Community</a></h2>
<p class="Pp">Currently (June 9, 2010) 6 active branches (committed to in the
    last two weeks) in git. Last release (0.08122) had 14 new features, and 16
    bug fixes. Of course that ebbs and flows
    &lt;https://metacpan.org/changes/distribution/DBIx-Class&gt;.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Responsive_Community"><a class="permalink" href="#Responsive_Community">Responsive
  Community</a></h2>
<dl class="Bl-tag">
  <dt id="I"><a class="permalink" href="#I">I needed MSSQL order-by support; the
    community helped me add support</a></dt>
  <dd></dd>
  <dt id="generally"><a class="permalink" href="#generally">generally very
    welcoming of people willing to help</a></dt>
  <dd></dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="General_ORM"><a class="permalink" href="#General_ORM">General
  ORM</a></h1>
<p class="Pp">These are things that are in most other ORMs, but are still
    reasons to use DBIC over raw SQL.</p>
<section class="Ss">
<h2 class="Ss" id="Cross_"><a class="permalink" href="#Cross_">Cross DB</a></h2>
<p class="Pp">The vast majority of code should run on all databases without
    needing tweaking</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Basic_"><a class="permalink" href="#Basic_">Basic
  CRUD</a></h2>
<dl class="Bl-tag">
  <dt id="C"><a class="permalink" href="#C">C - Create</a></dt>
  <dd></dd>
  <dt id="R"><a class="permalink" href="#R">R - Retrieve</a></dt>
  <dd></dd>
  <dt id="U"><a class="permalink" href="#U">U - Update</a></dt>
  <dd></dd>
  <dt id="D"><a class="permalink" href="#D">D - Delete</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss">SQL: Create</h2>
<pre> my $sth = $dbh-&gt;prepare('
    INSERT INTO books
    (title, author_id)
    values (?,?)
 ');
 $sth-&gt;execute( 'A book title', $author_id );
</pre>
</section>
<section class="Ss">
<h2 class="Ss">DBIC: Create</h2>
<pre> my $book = $book_rs-&gt;create({
    title     =&gt; 'A book title',
    author_id =&gt; $author_id,
 });
</pre>
<p class="Pp">See &quot;create&quot; in DBIx::Class::ResultSet</p>
<dl class="Bl-tag">
  <dt id="No"><a class="permalink" href="#No">No need to pair placeholders and
    values</a></dt>
  <dd></dd>
  <dt id="Automatically"><a class="permalink" href="#Automatically">Automatically
    gets autoincremented id for you</a></dt>
  <dd></dd>
  <dt id="Transparently"><a class="permalink" href="#Transparently">Transparently
    uses INSERT ... RETURNING for databases that support it</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss">SQL: Read</h2>
<pre> my $sth = $dbh-&gt;prepare('
    SELECT title,
    authors.name as author_name
    FROM books, authors
    WHERE books.author = authors.id
 ');
 while ( my $book = $sth-&gt;fetchrow_hashref ) {
   say &quot;Author of $book-&gt;{title} is $book-&gt;{author_name}&quot;;
 }
</pre>
</section>
<section class="Ss">
<h2 class="Ss">DBIC: Read</h2>
<pre> my $book = $book_rs-&gt;find($book_id);
</pre>
<p class="Pp">or</p>
<p class="Pp"></p>
<pre> my $book = $book_rs-&gt;search({ title =&gt; 'A book title' }, { rows =&gt; 1 })-&gt;next;
</pre>
<p class="Pp">or</p>
<p class="Pp"></p>
<pre> my @books = $book_rs-&gt;search({ author =&gt; $author_id })-&gt;all;
</pre>
<p class="Pp">or</p>
<p class="Pp"></p>
<pre> while( my $book = $books_rs-&gt;next ) {
   printf &quot;Author of %s is %s\n&quot;, $book-&gt;title, $book-&gt;author-&gt;name;
 }
</pre>
<p class="Pp">See &quot;find&quot; in DBIx::Class::ResultSet, &quot;search&quot;
    in DBIx::Class::ResultSet, &quot;next&quot; in DBIx::Class::ResultSet, and
    &quot;all&quot; in DBIx::Class::ResultSet</p>
<p class="Pp"><b>TMTOWTDI!</b></p>
</section>
<section class="Ss">
<h2 class="Ss">SQL: Update</h2>
<pre> my $update = $dbh-&gt;prepare('
    UPDATE books
    SET title = ?
    WHERE id = ?
 ');
 $update-&gt;execute( 'New title', $book_id );
</pre>
</section>
<section class="Ss">
<h2 class="Ss">DBIC: Update</h2>
<pre> $book-&gt;update({ title =&gt; 'New title' });
</pre>
<p class="Pp">See &quot;update&quot; in DBIx::Class::Row</p>
<p class="Pp">Will not update unless value changes</p>
</section>
<section class="Ss">
<h2 class="Ss">SQL: Delete</h2>
<pre> my $delete = $dbh-&gt;prepare('DELETE FROM books WHERE id = ?');
 $delete-&gt;execute($book_id);
</pre>
</section>
<section class="Ss">
<h2 class="Ss">DBIC: Delete</h2>
<pre> $book-&gt;delete
</pre>
<p class="Pp">See &quot;delete&quot; in DBIx::Class::Row</p>
</section>
<section class="Ss">
<h2 class="Ss">SQL: Search</h2>
<pre> my $sth = $dbh-&gt;prepare('
   SELECT title,
   authors.name as author_name
   FROM books
   WHERE books.name LIKE &quot;%monte cristo%&quot; AND
   books.topic = &quot;jailbreak&quot;
 ');
</pre>
</section>
<section class="Ss">
<h2 class="Ss">DBIC: Search</h2>
<pre> my $book = $book_rs-&gt;search({
    'me.name'  =&gt; { -like =&gt; '%monte cristo%' },
    'me.topic' =&gt; 'jailbreak',
 })-&gt;next;
</pre>
<dl class="Bl-tag">
  <dt id="See"><a class="permalink" href="#See">See SQL::Abstract,
    &quot;next&quot; in DBIx::Class::ResultSet, and &quot;search&quot; in
    DBIx::Class::ResultSet</a></dt>
  <dd></dd>
  <dt>(kinda) introspectible</dt>
  <dd></dd>
  <dt id="Prettier"><a class="permalink" href="#Prettier">Prettier than
    SQL</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss">OO Overridability</h2>
<dl class="Bl-tag">
  <dt id="Override"><a class="permalink" href="#Override">Override new if you
    want to do validation</a></dt>
  <dd></dd>
  <dt id="Override~2"><a class="permalink" href="#Override~2">Override delete if
    you want to disable deletion</a></dt>
  <dd></dd>
  <dt id="and"><a class="permalink" href="#and">and on and on</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Convenience_Methods"><a class="permalink" href="#Convenience_Methods">Convenience
  Methods</a></h2>
<dl class="Bl-tag">
  <dt>&quot;find_or_create&quot; in DBIx::Class::ResultSet</dt>
  <dd></dd>
  <dt>&quot;update_or_create&quot; in DBIx::Class::ResultSet</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Non-column_methods"><a class="permalink" href="#Non-column_methods">Non-column
  methods</a></h2>
<p class="Pp">Need a method to get a user's gravatar URL? Add a
    <span class="Li">&quot;gravatar_url&quot;</span> method to the Result
  class</p>
</section>
<section class="Ss">
<h2 class="Ss">RELATIONSHIPS</h2>
<dl class="Bl-tag">
  <dt>&quot;belongs_to&quot; in DBIx::Class::Relationship</dt>
  <dd></dd>
  <dt>&quot;has_many&quot; in DBIx::Class::Relationship</dt>
  <dd></dd>
  <dt>&quot;might_have&quot; in DBIx::Class::Relationship</dt>
  <dd></dd>
  <dt>&quot;has_one&quot; in DBIx::Class::Relationship</dt>
  <dd></dd>
  <dt>&quot;many_to_many&quot; in DBIx::Class::Relationship</dt>
  <dd></dd>
  <dt id="SET"><a class="permalink" href="#SET">SET AND FORGET</a></dt>
  <dd></dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="DBIx::Class_Specific_Features"><a class="permalink" href="#DBIx::Class_Specific_Features">DBIx::Class
  Specific Features</a></h1>
<p class="Pp">These things may be in other ORM's, but they are very specific, so
    doubtful</p>
<section class="Ss">
<h2 class="Ss" id="_deploy"><a class="permalink" href="#_deploy">-&gt;deploy</a></h2>
<p class="Pp">Create a database from your DBIx::Class schema.</p>
<p class="Pp"></p>
<pre> my $schema = Frew::Schema-&gt;connect( $dsn, $user, $pass );
 $schema-&gt;deploy
</pre>
<p class="Pp">See &quot;deploy&quot; in DBIx::Class::Schema.</p>
<p class="Pp">See also: DBIx::Class::DeploymentHandler</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Schema::Loader"><a class="permalink" href="#Schema::Loader">Schema::Loader</a></h2>
<p class="Pp">Create a DBIx::Class schema from your database.</p>
<p class="Pp"></p>
<pre> package Frew::Schema;
 use strict;
 use warnings;
 use base 'DBIx::Class::Schema::Loader';
 __PACKAGE__-&gt;loader_options({
    naming =&gt; 'v7',
    debug  =&gt; $ENV{DBIC_TRACE},
 });
 1;
 # elsewhere...
 my $schema = Frew::Schema-&gt;connect( $dsn, $user, $pass );
</pre>
<p class="Pp">See DBIx::Class::Schema::Loader and &quot;CONSTRUCTOR
    OPTIONS&quot; in DBIx::Class::Schema::Loader::Base.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Populate"><a class="permalink" href="#Populate">Populate</a></h2>
<p class="Pp">Made for inserting lots of rows very quickly into database</p>
<p class="Pp"></p>
<pre> $schema-&gt;populate([ Users =&gt;
    [qw( username password )],
    [qw( frew     &gt;=4char$ )],
    [qw(      ...          )],
    [qw(      ...          )],
 );
</pre>
<p class="Pp">See &quot;populate&quot; in DBIx::Class::Schema</p>
<p class="Pp">I use populate here
    &lt;http://blog.afoolishmanifesto.com/archives/1255&gt; to export our whole
    (200M~) db to SQLite</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Multicreate"><a class="permalink" href="#Multicreate">Multicreate</a></h2>
<p class="Pp">Create an object and its related objects all at once</p>
<p class="Pp"></p>
<pre> $schema-&gt;resultset('Author')-&gt;create({
    name =&gt; 'Stephen King',
    books =&gt; [{ title =&gt; 'The Dark Tower' }],
    address =&gt; {
       street =&gt; '123 Turtle Back Lane',
       state  =&gt; { abbreviation =&gt; 'ME' },
       city   =&gt; { name =&gt; 'Lowell'     },
    },
 });
</pre>
<p class="Pp">See &quot;create&quot; in DBIx::Class::ResultSet</p>
<dl class="Bl-tag">
  <dt id="books"><a class="permalink" href="#books">books is a has_many</a></dt>
  <dd></dd>
  <dt id="address"><a class="permalink" href="#address">address is a belongs_to
    which in turn belongs to state and city each</a></dt>
  <dd></dd>
  <dt id="for"><a class="permalink" href="#for">for this to work right state and
    city must mark abbreviation and name as unique</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Extensible"><a class="permalink" href="#Extensible">Extensible</a></h2>
<p class="Pp">DBIx::Class helped pioneer fast MI in Perl 5 with Class::C3, so it
    is made to allow extensions to nearly every part of it.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Extensibility_example:_DBIx::Class::Helpers"><a class="permalink" href="#Extensibility_example:_DBIx::Class::Helpers">Extensibility
  example: DBIx::Class::Helpers</a></h2>
<dl class="Bl-tag">
  <dt id="DBIx::Class::Helper::ResultSet::IgnoreWantarray"><a class="permalink" href="#DBIx::Class::Helper::ResultSet::IgnoreWantarray">DBIx::Class::Helper::ResultSet::IgnoreWantarray</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::ResultSet::Random"><a class="permalink" href="#DBIx::Class::Helper::ResultSet::Random">DBIx::Class::Helper::ResultSet::Random</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::ResultSet::SetOperations"><a class="permalink" href="#DBIx::Class::Helper::ResultSet::SetOperations">DBIx::Class::Helper::ResultSet::SetOperations</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::Row::JoinTable"><a class="permalink" href="#DBIx::Class::Helper::Row::JoinTable">DBIx::Class::Helper::Row::JoinTable</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::Row::NumifyGet"><a class="permalink" href="#DBIx::Class::Helper::Row::NumifyGet">DBIx::Class::Helper::Row::NumifyGet</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::Row::SubClass"><a class="permalink" href="#DBIx::Class::Helper::Row::SubClass">DBIx::Class::Helper::Row::SubClass</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::Row::ToJSON"><a class="permalink" href="#DBIx::Class::Helper::Row::ToJSON">DBIx::Class::Helper::Row::ToJSON</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::Row::StorageValues"><a class="permalink" href="#DBIx::Class::Helper::Row::StorageValues">DBIx::Class::Helper::Row::StorageValues</a></dt>
  <dd></dd>
  <dt id="DBIx::Class::Helper::Row::OnColumnChange"><a class="permalink" href="#DBIx::Class::Helper::Row::OnColumnChange">DBIx::Class::Helper::Row::OnColumnChange</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Extensibility_example:_DBIx::Class::TimeStamp"><a class="permalink" href="#Extensibility_example:_DBIx::Class::TimeStamp">Extensibility
  example: DBIx::Class::TimeStamp</a></h2>
<dl class="Bl-tag">
  <dt id="See~2"><a class="permalink" href="#See~2">See
    DBIx::Class::TimeStamp</a></dt>
  <dd></dd>
  <dt id="Cross"><a class="permalink" href="#Cross">Cross DB</a></dt>
  <dd></dd>
  <dt id="set_on_create"><a class="permalink" href="#set_on_create">set_on_create</a></dt>
  <dd></dd>
  <dt id="set_on_update"><a class="permalink" href="#set_on_update">set_on_update</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Extensibility_example:_Kioku"><a class="permalink" href="#Extensibility_example:_Kioku">Extensibility
  example: Kioku</a></h2>
<dl class="Bl-tag">
  <dt id="See~3"><a class="permalink" href="#See~3">See
    DBIx::Class::Schema::KiokuDB</a></dt>
  <dd></dd>
  <dt id="Kioku"><a class="permalink" href="#Kioku">Kioku is the new
    hotness</a></dt>
  <dd></dd>
  <dt id="Mix"><a class="permalink" href="#Mix">Mix RDBMS with Object
    DB</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Result_vs_ResultSet"><a class="permalink" href="#Result_vs_ResultSet">Result
  vs ResultSet</a></h2>
<dl class="Bl-tag">
  <dt id="Result"><a class="permalink" href="#Result">Result == Row</a></dt>
  <dd></dd>
  <dt id="ResultSet"><a class="permalink" href="#ResultSet">ResultSet == Query
    Plan</a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="Internal"><a class="permalink" href="#Internal">Internal Join
    Optimizer for all DB's (!!!)</a></dt>
  <dd></dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>(less important but...)</dt>
  <dd></dd>
  <dt id="ResultSource"><a class="permalink" href="#ResultSource">ResultSource
    == Queryable collection of rows (Table, View, etc)</a></dt>
  <dd></dd>
  <dt id="Storage"><a class="permalink" href="#Storage">Storage ==
    Database</a></dt>
  <dd></dd>
  <dt id="Schema"><a class="permalink" href="#Schema">Schema == associates a set
    of ResultSources with a Storage</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="ResultSet_methods"><a class="permalink" href="#ResultSet_methods">ResultSet
  methods</a></h2>
<pre> package MyApp::Schema::ResultSet::Book;
 use strict;
 use warnings;
 use base 'DBIx::Class::ResultSet';
 sub good {
    my $self = shift;
    $self-&gt;search({
       $self-&gt;current_source_alias . '.rating' =&gt; { '&gt;=' =&gt; 4 }
    })
 };
 sub cheap {
    my $self = shift;
    $self-&gt;search({
       $self-&gt;current_source_alias . '.price' =&gt; { '&lt;=' =&gt; 5}
    })
 };
 # ...
 1;
</pre>
<p class="Pp">See &quot;Predefined searches&quot; in
    DBIx::Class::Manual::Cookbook</p>
<dl class="Bl-tag">
  <dt id="All"><a class="permalink" href="#All">All searches should be ResultSet
    methods</a></dt>
  <dd></dd>
  <dt id="Name"><a class="permalink" href="#Name">Name has obvious
    meaning</a></dt>
  <dd></dd>
  <dt>&quot;current_source_alias&quot; in DBIx::Class::ResultSet helps things to
    work no matter what</dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="ResultSet_method_in_Action"><a class="permalink" href="#ResultSet_method_in_Action">ResultSet
  method in Action</a></h2>
<pre> $schema-&gt;resultset('Book')-&gt;good
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="ResultSet_Chaining"><a class="permalink" href="#ResultSet_Chaining">ResultSet
  Chaining</a></h2>
<pre> $schema-&gt;resultset('Book')
    -&gt;good
    -&gt;cheap
    -&gt;recent
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="search_related"><a class="permalink" href="#search_related">search_related</a></h2>
<pre> my $score = $schema-&gt;resultset('User')
    -&gt;search({'me.userid' =&gt; 'frew'})
    -&gt;related_resultset('access')
    -&gt;related_resultset('mgmt')
    -&gt;related_resultset('orders')
    -&gt;telephone
    -&gt;search_related( shops =&gt; {
       'shops.datecompleted' =&gt; {
          -between =&gt; ['2009-10-01','2009-10-08']
       }
    })-&gt;completed
    -&gt;related_resultset('rpt_score')
    -&gt;search(undef, { rows =&gt; 1})
    -&gt;get_column('raw_scores')
    -&gt;next;
</pre>
<p class="Pp">The SQL that this produces (with placeholders filled in for
    clarity's sake) on our system (Microsoft SQL) is:</p>
<p class="Pp"></p>
<pre> SELECT raw_scores
   FROM (
     SELECT raw_scores, ROW_NUMBER() OVER (
         ORDER BY (
             SELECT (1)
           )
       ) AS rno__row__index
       FROM (
         SELECT rpt_score.raw_scores
           FROM users me
           JOIN access access
             ON access.userid = me.userid
           JOIN mgmt mgmt
             ON mgmt.mgmtid = access.mgmtid
           JOIN [order] orders
             ON orders.mgmtid = mgmt.mgmtid
           JOIN shop shops
             ON shops.orderno = orders.orderno
           JOIN rpt_scores rpt_score
             ON rpt_score.shopno = shops.shopno
         WHERE (
           datecompleted IS NOT NULL AND
           (
             (shops.datecompleted BETWEEN '2009-10-01' AND '2009-10-08')  AND
             (type = '1' AND me.userid = 'frew')
           )
         )
       ) rpt_score
   ) rpt_score
 WHERE rno__row__index BETWEEN 1 AND 1
</pre>
<p class="Pp">See: &quot;related_resultset&quot; in DBIx::Class::ResultSet,
    &quot;search_related&quot; in DBIx::Class::ResultSet, and
    &quot;get_column&quot; in DBIx::Class::ResultSet.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="bonus_rel_methods"><a class="permalink" href="#bonus_rel_methods">bonus
  rel methods</a></h2>
<pre> my $book = $author-&gt;create_related(
    books =&gt; {
       title =&gt; 'Another Discworld book',
    }
 );
 my $book2 = $pratchett-&gt;add_to_books({
    title =&gt; 'MOAR Discworld book',
 });
</pre>
<p class="Pp">See &quot;create_related&quot; in DBIx::Class::Relationship::Base
    and &quot;add_to_$rel&quot; in DBIx::Class::Relationship::Base</p>
<p class="Pp">Note that it automatically fills in foreign key for you</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Excellent_Transaction_Support"><a class="permalink" href="#Excellent_Transaction_Support">Excellent
  Transaction Support</a></h2>
<pre> $schema-&gt;txn_do(sub {
    ...
 });
 $schema-&gt;txn_begin; # &lt;-- low level
 # ...
 $schema-&gt;txn_commit;
</pre>
<p class="Pp">See &quot;txn_do&quot; in DBIx::Class::Schema,
    &quot;txn_begin&quot; in DBIx::Class::Schema, and &quot;txn_commit&quot; in
    DBIx::Class::Schema.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="InflateColumn"><a class="permalink" href="#InflateColumn">InflateColumn</a></h2>
<pre> package Frew::Schema::Result::Book;
 use strict;
 use warnings;
 use base 'DBIx::Class::Core';
 use DateTime::Format::MySQL;
 # Result code here
 __PACKAGE__-&gt;load_components('InflateColumn');
 __PACKAGE__-&gt;inflate_column(
    date_published =&gt; {
       inflate =&gt; sub { DateTime::Format::MySQL-&gt;parse_date( shift ) },
       deflate =&gt; sub { shift-&gt;ymd },
    },
 );
</pre>
<p class="Pp">See DBIx::Class::InflateColumn, &quot;inflate_column&quot; in
    DBIx::Class::InflateColumn, and DBIx::Class::InflateColumn::DateTime.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="InflateColumn:_deflation"><a class="permalink" href="#InflateColumn:_deflation">InflateColumn:
  deflation</a></h2>
<pre> $book-&gt;date_published(DateTime-&gt;now);
 $book-&gt;update;
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="InflateColumn:_inflation"><a class="permalink" href="#InflateColumn:_inflation">InflateColumn:
  inflation</a></h2>
<pre> say $book-&gt;date_published-&gt;month_abbr; # Nov
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="FilterColumn"><a class="permalink" href="#FilterColumn">FilterColumn</a></h2>
<pre> package Frew::Schema::Result::Book;
 use strict;
 use warnings;
 use base 'DBIx::Class::Core';
 # Result code here
 __PACKAGE__-&gt;load_components('FilterColumn');
 __PACKAGE__-&gt;filter_column(
    length =&gt; {
       to_storage   =&gt; 'to_metric',
       from_storage =&gt; 'to_imperial',
    },
 );
 sub to_metric   { $_[1] * .305 }
 sub to_imperial { $_[1] * 3.28 }
</pre>
<p class="Pp">See DBIx::Class::FilterColumn and &quot;filter_column&quot; in
    DBIx::Class::FilterColumn</p>
</section>
<section class="Ss">
<h2 class="Ss" id="ResultSetColumn"><a class="permalink" href="#ResultSetColumn">ResultSetColumn</a></h2>
<pre> my $rsc = $schema-&gt;resultset('Book')-&gt;get_column('price');
 $rsc-&gt;first;
 $rsc-&gt;all;
 $rsc-&gt;min;
 $rsc-&gt;max;
 $rsc-&gt;sum;
</pre>
<p class="Pp">See DBIx::Class::ResultSetColumn</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Aggregates"><a class="permalink" href="#Aggregates">Aggregates</a></h2>
<pre> my @res = $rs-&gt;search(undef, {
    select   =&gt; [
       'price',
       'genre',
       { max =&gt; price },
       { avg =&gt; price },
    ],
    as       =&gt; [
       qw(price genre max_price avg_price)
    ],
    group_by =&gt; [qw(price genre)],
 });
 for (@res) {
    say $_-&gt;price . ' ' . $_-&gt;genre;
    say $_-&gt;get_column('max_price');
    say $_-&gt;get_column('avg_price');
 }
</pre>
<p class="Pp">See &quot;select&quot; in DBIx::Class::ResultSet, &quot;as&quot;
    in DBIx::Class::ResultSet, and &quot;group_by&quot; in
    DBIx::Class::ResultSet</p>
<dl class="Bl-tag">
  <dt id="Careful,"><a class="permalink" href="#Careful,">Careful, get_column
    can basically mean <b>three</b> things</a></dt>
  <dd></dd>
  <dt id="private"><a class="permalink" href="#private">private in which case
    you should use an accessor</a></dt>
  <dd></dd>
  <dt id="public"><a class="permalink" href="#public">public for what there is
    no accessor for</a></dt>
  <dd></dd>
  <dt id="public~2"><a class="permalink" href="#public~2">public for get
    resultset column (prev example)</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss">HRI</h2>
<pre> $rs-&gt;search(undef, {
   result_class =&gt; 'DBIx::Class::ResultClass::HashRefInflator',
 });
</pre>
<p class="Pp">See &quot;result_class&quot; in DBIx::Class::ResultSet and
    DBIx::Class::ResultClass::HashRefInflator.</p>
<dl class="Bl-tag">
  <dt id="Easy"><a class="permalink" href="#Easy">Easy on memory</a></dt>
  <dd></dd>
  <dt id="Mega"><a class="permalink" href="#Mega">Mega fast</a></dt>
  <dd></dd>
  <dt id="Great"><a class="permalink" href="#Great">Great for quick
    debugging</a></dt>
  <dd></dd>
  <dt id="Great~2"><a class="permalink" href="#Great~2">Great for performance
    tuning (we went from 2m to &lt; 3s)</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Subquery_Support"><a class="permalink" href="#Subquery_Support">Subquery
  Support</a></h2>
<pre> my $inner_query = $schema-&gt;resultset('Artist')
    -&gt;search({
     name =&gt; [ 'Billy Joel', 'Brittany Spears' ],
 })-&gt;get_column('id')-&gt;as_query;
 my $rs = $schema-&gt;resultset('CD')-&gt;search({
     artist_id =&gt; { -in =&gt; $inner_query },
 });
</pre>
<p class="Pp">See &quot;Subqueries&quot; in DBIx::Class::Manual::Cookbook</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Bare_"><a class="permalink" href="#Bare_">Bare SQL w/
  Placeholders</a></h2>
<pre> $rs-&gt;update({
    # !!! SQL INJECTION VECTOR
    price =&gt; \&quot;price + $inc&quot;, # DON'T DO THIS
 });
</pre>
<p class="Pp">Better:</p>
<p class="Pp"></p>
<pre> $rs-&gt;update({
    price =&gt; \['price + ?', [inc =&gt; $inc]],
 });
</pre>
<p class="Pp">See &quot;Literal SQL with placeholders and bind values
    (subqueries)&quot; in SQL::Abstract</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FURTHER_QUESTIONS?"><a class="permalink" href="#FURTHER_QUESTIONS?">FURTHER
  QUESTIONS?</a></h1>
<p class="Pp">Check the list of additional DBIC resources.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This module is free software copyright by the DBIx::Class (DBIC)
    authors. You can redistribute it and/or modify it under the same terms as
    the DBIx::Class library.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-01-29</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
