<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   generated by cd2nroff 0.1 from CURLOPT_DNS_CACHE_TIMEOUT.md
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>CURLOPT_DNS_CACHE_TIMEOUT(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CURLOPT_DNS_CACHE_TIMEOUT(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">CURLOPT_DNS_CACHE_TIMEOUT(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">CURLOPT_DNS_CACHE_TIMEOUT - life-time for DNS cache entries</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;curl/curl.h&gt;
CURLcode curl_easy_setopt(CURL *handle, CURLOPT_DNS_CACHE_TIMEOUT, long age);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Pass a long, this sets the timeout in seconds. Name resolve
    results are kept in memory and used for this number of seconds. Set to zero
    to completely disable caching, or set to -1 to make the cached entries
    remain forever. By default, libcurl caches this info for 60 seconds.</p>
<p class="Pp">We recommend users not to tamper with this option unless strictly
    necessary. If you do, be careful of using large values that can make the
    cache size grow significantly if many different host names are used within
    that timeout period.</p>
<p class="Pp">The name resolve functions of various libc implementations do not
    re-read name server information unless explicitly told so (for example, by
    calling <i>res_init(3)</i>). This may cause libcurl to keep using the older
    server even if DHCP has updated the server info, and this may look like a
    DNS cache issue to the casual libcurl-app user.</p>
<p class="Pp">DNS entries have a &quot;TTL&quot; property but libcurl does not
    use that. This DNS cache timeout is entirely speculative that a name
    resolves to the same address for a small amount of time into the future.</p>
<p class="Pp">Since version 8.1.0, libcurl prunes entries from the DNS cache if
    it exceeds 30,000 entries no matter which timeout value is used.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DEFAULT"><a class="permalink" href="#DEFAULT">DEFAULT</a></h1>
<p class="Pp">60</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PROTOCOLS"><a class="permalink" href="#PROTOCOLS">PROTOCOLS</a></h1>
<p class="Pp">All</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>int main(void)
{
<br/>
  CURL *curl = curl_easy_init();
<br/>
  if(curl) {
<br/>
    CURLcode res;
<br/>
    curl_easy_setopt(curl, CURLOPT_URL, &quot;https://example.com/foo.bin&quot;);
<br/>
    /* only reuse addresses for a short time */
<br/>
    curl_easy_setopt(curl, CURLOPT_DNS_CACHE_TIMEOUT, 2L);
<br/>
    res = curl_easy_perform(curl);
<br/>
    /* in this second request, the cache is not be used if more than
<br/>
       two seconds have passed since the previous name resolve */
<br/>
    res = curl_easy_perform(curl);
<br/>
    curl_easy_cleanup(curl);
<br/>
  }
}</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AVAILABILITY"><a class="permalink" href="#AVAILABILITY">AVAILABILITY</a></h1>
<p class="Pp">Always</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">Returns CURLE_OK</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>CURLOPT_CONNECTTIMEOUT_MS</b>(3),
    <b>CURLOPT_DNS_SERVERS</b>(3), <b>CURLOPT_DNS_USE_GLOBAL_CACHE</b>(3),
    <b>CURLOPT_MAXAGE_CONN</b>(3), <b>CURLOPT_RESOLVE</b>(3)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 26, 2023</td>
    <td class="foot-os">ibcurl 8.4.0</td>
  </tr>
</table>
</body>
</html>
