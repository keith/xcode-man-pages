<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1989, 1990, 1993
  	The Regents of the University of California.  All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   4. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
       From: @(#)mtree.8	8.2 (Berkeley) 12/11/93
   $FreeBSD: src/usr.sbin/mtree/mtree.8,v 1.53 2005/07/31 03:30:47 keramida Exp $
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>MTREE(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MTREE(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">MTREE(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">mtree</code> &#x2014; <span class="Nd">map a
    directory hierarchy</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">mtree</code></td>
    <td>[<code class="Fl">-LPUcdeinqruxwD</code>]
      [<code class="Fl">-f</code>&#x00A0;<var class="Ar">spec</var>]
      [<code class="Fl">-f</code>&#x00A0;<var class="Ar">spec</var>]
      [<code class="Fl">-K</code>&#x00A0;<var class="Ar">keywords</var>]
      [<code class="Fl">-k</code>&#x00A0;<var class="Ar">keywords</var>]
      [<code class="Fl">-p</code>&#x00A0;<var class="Ar">path</var>]
      [<code class="Fl">-s</code>&#x00A0;<var class="Ar">seed</var>]
      [<code class="Fl">-X</code>&#x00A0;<var class="Ar">exclude-list</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">mtree</code> utility compares the file
    hierarchy rooted in the current directory against a specification read from
    the standard input. Messages are written to the standard output for any
    files whose characteristics do not match the specifications, or which are
    missing from either the file hierarchy or the specification.</p>
<p class="Pp">The options are as follows:</p>
<dl class="Bl-tag">
  <dt id="c"><a class="permalink" href="#c"><code class="Fl">-c</code></a></dt>
  <dd>Print a specification for the file hierarchy to the standard output.</dd>
  <dt id="d"><a class="permalink" href="#d"><code class="Fl">-d</code></a></dt>
  <dd>Ignore everything except directory type files.</dd>
  <dt id="e"><a class="permalink" href="#e"><code class="Fl">-e</code></a></dt>
  <dd>Do not complain about files that are in the file hierarchy, but not in the
      specification.</dd>
  <dt id="f"><a class="permalink" href="#f"><code class="Fl">-f</code></a>
    <var class="Ar">file</var></dt>
  <dd>Read the specification from <var class="Ar">file</var>, instead of from
      the standard input.
    <p class="Pp">If this option is specified twice, the two specifications are
        compared with each other, rather than to the file hierarchy. The
        specifications be sorted like output generated using
        <code class="Fl">-c</code>. The output format in this case is somewhat
        remniscent of <a class="Xr">comm(1)</a>, having &quot;in first spec
        only&quot;, &quot;in second spec only&quot;, and &quot;different&quot;
        columns, prefixed by zero, one and two TAB characters respectively. Each
        entry in the &quot;different&quot; column occupies two lines, one from
        each specification.</p>
  </dd>
  <dt id="D"><a class="permalink" href="#D"><code class="Fl">-D</code></a></dt>
  <dd>Do not set the XATTR_SHOWCOMPRESSION flag while processing extended
      attributes.</dd>
  <dt id="i"><a class="permalink" href="#i"><code class="Fl">-i</code></a></dt>
  <dd>Indent the output 4 spaces each time a directory level is descended when
      create a specification with the <code class="Fl">-c</code> option. This
      does not affect either the /set statements or the comment before each
      directory. It does however affect the comment before the close of each
      directory.</dd>
  <dt id="K"><a class="permalink" href="#K"><code class="Fl">-K</code></a>
    <var class="Ar">keywords</var></dt>
  <dd>Add the specified (whitespace or comma separated)
      <var class="Ar">keywords</var> to the current set of keywords.</dd>
  <dt id="k"><a class="permalink" href="#k"><code class="Fl">-k</code></a>
    <var class="Ar">keywords</var></dt>
  <dd>Use the ``type'' keyword plus the specified (whitespace or comma
      separated) <var class="Ar">keywords</var> instead of the current set of
      keywords.</dd>
  <dt id="L"><a class="permalink" href="#L"><code class="Fl">-L</code></a></dt>
  <dd>Follow all symbolic links in the file hierarchy.</dd>
  <dt id="n"><a class="permalink" href="#n"><code class="Fl">-n</code></a></dt>
  <dd>Do not emit pathname comments when creating a specification. Normally a
      comment is emitted before each directory and before the close of that
      directory when using the <code class="Fl">-c</code> option.</dd>
  <dt id="P"><a class="permalink" href="#P"><code class="Fl">-P</code></a></dt>
  <dd>Do not follow symbolic links in the file hierarchy, instead consider the
      symbolic link itself in any comparisons. This is the default.</dd>
  <dt id="p"><a class="permalink" href="#p"><code class="Fl">-p</code></a>
    <var class="Ar">path</var></dt>
  <dd>Use the file hierarchy rooted in <var class="Ar">path</var>, instead of
      the current directory.</dd>
  <dt id="q"><a class="permalink" href="#q"><code class="Fl">-q</code></a></dt>
  <dd>Quiet mode. Do not complain when a &#x201C;missing&#x201D; directory
      cannot be created because it already exists. This occurs when the
      directory is a symbolic link.</dd>
  <dt id="r"><a class="permalink" href="#r"><code class="Fl">-r</code></a></dt>
  <dd>Remove any files in the file hierarchy that are not described in the
      specification.</dd>
  <dt id="S"><a class="permalink" href="#S"><code class="Fl">-S</code></a></dt>
  <dd>Skip calculating the digest of the extended attributes of the file.</dd>
  <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a>
    <var class="Ar">seed</var></dt>
  <dd>Display a single checksum to the standard error output that represents all
      of the files for which the keyword <code class="Cm">cksum</code> was
      specified. The checksum is seeded with the specified value.</dd>
  <dt id="U"><a class="permalink" href="#U"><code class="Fl">-U</code></a></dt>
  <dd>Modify the owner, group, permissions, and modification time of existing
      files to match the specification and create any missing directories or
      symbolic links. User, group and permissions must all be specified for
      missing directories to be created. Corrected mismatches are not considered
      errors.</dd>
  <dt id="u"><a class="permalink" href="#u"><code class="Fl">-u</code></a></dt>
  <dd>Same as <code class="Fl">-U</code> except a status of 2 is returned if the
      file hierarchy did not match the specification.</dd>
  <dt id="w"><a class="permalink" href="#w"><code class="Fl">-w</code></a></dt>
  <dd>Make some error conditions non-fatal warnings.</dd>
  <dt id="X"><a class="permalink" href="#X"><code class="Fl">-X</code></a>
    <var class="Ar">exclude-list</var></dt>
  <dd>The specified file contains <a class="Xr">fnmatch(3)</a> patterns matching
      files to be excluded from the specification, one to a line. If the pattern
      contains a &#x2018;<code class="Li">/</code>&#x2019; character, it will be
      matched against entire pathnames (relative to the starting directory);
      otherwise, it will be matched against basenames only. No comments are
      allowed in the <var class="Ar">exclude-list</var> file.</dd>
  <dt id="x"><a class="permalink" href="#x"><code class="Fl">-x</code></a></dt>
  <dd>Do not descend below mount points in the file hierarchy.</dd>
</dl>
<p class="Pp">Specifications are mostly composed of ``keywords'', i.e., strings
    that specify values relating to files. No keywords have default values, and
    if a keyword has no value set, no checks based on it are performed.</p>
<p class="Pp">Currently supported keywords are as follows:</p>
<dl class="Bl-tag">
  <dt id="cksum"><a class="permalink" href="#cksum"><code class="Cm">cksum</code></a></dt>
  <dd>The checksum of the file using the default algorithm specified by the
      <a class="Xr">cksum(1)</a> utility.</dd>
  <dt id="flags"><a class="permalink" href="#flags"><code class="Cm">flags</code></a></dt>
  <dd>The file flags as a symbolic name. See <a class="Xr">chflags(1)</a> for
      information on these names. If no flags are to be set the string
      &#x201C;none&#x201D; may be used to override the current default.</dd>
  <dt id="ignore"><a class="permalink" href="#ignore"><code class="Cm">ignore</code></a></dt>
  <dd>Ignore any file hierarchy below this file.</dd>
  <dt id="gid"><a class="permalink" href="#gid"><code class="Cm">gid</code></a></dt>
  <dd>The file group as a numeric value.</dd>
  <dt id="gname"><a class="permalink" href="#gname"><code class="Cm">gname</code></a></dt>
  <dd>The file group as a symbolic name.</dd>
  <dt id="md5digest"><a class="permalink" href="#md5digest"><code class="Cm">md5digest</code></a></dt>
  <dd>The MD5 message digest of the file.</dd>
  <dt id="sha1digest"><a class="permalink" href="#sha1digest"><code class="Cm">sha1digest</code></a></dt>
  <dd>The FIPS 160-1 (&#x201C;SHA-1&#x201D;) message digest of the file.</dd>
  <dt id="ripemd160digest"><a class="permalink" href="#ripemd160digest"><code class="Cm">ripemd160digest</code></a></dt>
  <dd>The RIPEMD160 message digest of the file.</dd>
  <dt id="mode"><a class="permalink" href="#mode"><code class="Cm">mode</code></a></dt>
  <dd>The current file's permissions as a numeric (octal) or symbolic
    value.</dd>
  <dt id="nlink"><a class="permalink" href="#nlink"><code class="Cm">nlink</code></a></dt>
  <dd>The number of hard links the file is expected to have.</dd>
  <dt id="nochange"><a class="permalink" href="#nochange"><code class="Cm">nochange</code></a></dt>
  <dd>Make sure this file or directory exists but otherwise ignore all
      attributes.</dd>
  <dt id="uid"><a class="permalink" href="#uid"><code class="Cm">uid</code></a></dt>
  <dd>The file owner as a numeric value.</dd>
  <dt id="uname"><a class="permalink" href="#uname"><code class="Cm">uname</code></a></dt>
  <dd>The file owner as a symbolic name.</dd>
  <dt id="size"><a class="permalink" href="#size"><code class="Cm">size</code></a></dt>
  <dd>The size, in bytes, of the file.</dd>
  <dt id="link"><a class="permalink" href="#link"><code class="Cm">link</code></a></dt>
  <dd>The file the symbolic link is expected to reference.</dd>
  <dt id="time"><a class="permalink" href="#time"><code class="Cm">time</code></a></dt>
  <dd>The last modification time of the file.</dd>
  <dt id="btime"><a class="permalink" href="#btime"><code class="Cm">btime</code></a></dt>
  <dd>The creation (birth) time of the file.</dd>
  <dt id="atime"><a class="permalink" href="#atime"><code class="Cm">atime</code></a></dt>
  <dd>The last access time of the file.</dd>
  <dt id="ctime"><a class="permalink" href="#ctime"><code class="Cm">ctime</code></a></dt>
  <dd>The last metadata modification time of the file.</dd>
  <dt id="ptime"><a class="permalink" href="#ptime"><code class="Cm">ptime</code></a></dt>
  <dd>The time the file was added to its parent folder.</dd>
  <dt id="inode"><a class="permalink" href="#inode"><code class="Cm">inode</code></a></dt>
  <dd>The inode number of the file.</dd>
  <dt id="xattrsdigest"><a class="permalink" href="#xattrsdigest"><code class="Cm">xattrsdigest</code></a></dt>
  <dd>Digest of the extended attributes of the file.</dd>
  <dt id="acldigest"><a class="permalink" href="#acldigest"><code class="Cm">acldigest</code></a></dt>
  <dd>Digest of the access control list of the file.</dd>
  <dt id="nxattr"><a class="permalink" href="#nxattr"><code class="Cm">nxattr</code></a></dt>
  <dd>The number of extended attributes the file is expected to have.</dd>
  <dt id="dataless"><a class="permalink" href="#dataless"><code class="Cm">dataless</code></a></dt>
  <dd>Whether the file is dataless or not. Folders will not be materialized
      automatically if this option is provided.</dd>
  <dt id="purgeable"><a class="permalink" href="#purgeable"><code class="Cm">purgeable</code></a></dt>
  <dd>The APFS purgeable flags of the item.</dd>
  <dt id="protectionclass"><a class="permalink" href="#protectionclass"><code class="Cm">protectionclass</code></a></dt>
  <dd>The Data Protection class of the item. For more information, see
      https://support.apple.com/guide/security/data-protection-classes-secb010e978a/web</dd>
  <dt id="type"><a class="permalink" href="#type"><code class="Cm">type</code></a></dt>
  <dd>The type of the file; may be set to any one of the following:
    <p class="Pp"></p>
    <dl class="Bl-tag Bl-compact">
      <dt id="block"><a class="permalink" href="#block"><code class="Cm">block</code></a></dt>
      <dd>block special device</dd>
      <dt id="char"><a class="permalink" href="#char"><code class="Cm">char</code></a></dt>
      <dd>character special device</dd>
      <dt id="dir"><a class="permalink" href="#dir"><code class="Cm">dir</code></a></dt>
      <dd>directory</dd>
      <dt id="fifo"><a class="permalink" href="#fifo"><code class="Cm">fifo</code></a></dt>
      <dd>fifo</dd>
      <dt id="file"><a class="permalink" href="#file"><code class="Cm">file</code></a></dt>
      <dd>regular file</dd>
      <dt id="link~2"><a class="permalink" href="#link~2"><code class="Cm">link</code></a></dt>
      <dd>symbolic link</dd>
      <dt id="socket"><a class="permalink" href="#socket"><code class="Cm">socket</code></a></dt>
      <dd>socket</dd>
    </dl>
  </dd>
</dl>
<p class="Pp">The default set of keywords are <code class="Cm">flags</code>,
    <code class="Cm">gid</code>, <code class="Cm">mode</code>,
    <code class="Cm">nlink</code>, <code class="Cm">size</code>,
    <code class="Cm">link</code>, <code class="Cm">time</code>, and
    <code class="Cm">uid</code>.</p>
<p class="Pp">There are four types of lines in a specification.</p>
<p class="Pp">The first type of line sets a global value for a keyword, and
    consists of the string ``/set'' followed by whitespace, followed by sets of
    keyword/value pairs, separated by whitespace. Keyword/value pairs consist of
    a keyword, followed by an equals sign (``=''), followed by a value, without
    whitespace characters. Once a keyword has been set, its value remains
    unchanged until either reset or unset.</p>
<p class="Pp">The second type of line unsets keywords and consists of the string
    ``/unset'', followed by whitespace, followed by one or more keywords,
    separated by whitespace.</p>
<p class="Pp">The third type of line is a file specification and consists of a
    file name, followed by whitespace, followed by zero or more whitespace
    separated keyword/value pairs. The file name may be preceded by whitespace
    characters. The file name may contain any of the standard file name matching
    characters (``['', ``]'', ``?'' or ``*''), in which case files in the
    hierarchy will be associated with the first pattern that they match.</p>
<p class="Pp">Each of the keyword/value pairs consist of a keyword, followed by
    an equals sign (``=''), followed by the keyword's value, without whitespace
    characters. These values override, without changing, the global value of the
    corresponding keyword.</p>
<p class="Pp">All paths are relative. Specifying a directory will cause
    subsequent files to be searched for in that directory hierarchy. Which
    brings us to the last type of line in a specification: a line containing
    only the string &#x201C;<span class="Pa">..</span>&#x201D; causes the
    current directory path to ascend one level.</p>
<p class="Pp">Empty lines and lines whose first non-whitespace character is a
    hash mark (``#'') are ignored.</p>
<p class="Pp">The <code class="Nm">mtree</code> utility exits with a status of 0
    on success, 1 if any error occurred, and 2 if the file hierarchy did not
    match the specification. A status of 2 is converted to a status of 0 if the
    <code class="Fl">-U</code> option is used.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">/etc/mtree</span></dt>
  <dd>system specification directory</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp">The <code class="Nm">mtree</code> utility exits&#x00A0;0 on
    success, and&#x00A0;&gt;0 if an error occurs.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">The <code class="Fl">-d</code> and <code class="Fl">-u</code>
    options can be used in combination to create directory hierarchies for
    distributions and other such things; the files in
    <span class="Pa">/etc/mtree</span> were used to create almost all
    directories in this <span class="Ux">FreeBSD</span> distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">chflags(1)</a>, <a class="Xr">chgrp(1)</a>,
    <a class="Xr">chmod(1)</a>, <a class="Xr">cksum(1)</a>,
    <a class="Xr">md5(1)</a>, <a class="Xr">stat(2)</a>,
    <a class="Xr">fts(3)</a>, <a class="Xr">md5(3)</a>,
    <a class="Xr">chown(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Nm">mtree</code> utility appeared in
    <span class="Ux">4.3BSD-Reno</span>. The MD5 digest capability was added in
    <span class="Ux">FreeBSD 2.1</span>, in response to the widespread use of
    programs which can spoof <a class="Xr">cksum(1)</a>. The SHA-1 and RIPEMD160
    digests were added in <span class="Ux">FreeBSD 4.0</span>, as new attacks
    have demonstrated weaknesses in MD5. Support for file flags was added in
    <span class="Ux">FreeBSD 4.0</span>, and mostly comes from
    <span class="Ux">NetBSD</span>.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 29, 2005</td>
    <td class="foot-os">Mac OS X 12</td>
  </tr>
</table>
</body>
</html>
