<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Module::Build::Bundling(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Module::Build::Bundling(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Module::Build::Bundling(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Module::Build::Bundling - How to bundle Module::Build with a
    distribution</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  # Build.PL
  use inc::latest 'Module::Build';
  Module::Build-&gt;new(
    module_name =&gt; 'Foo::Bar',
    license =&gt; 'perl',
  )-&gt;create_build_script;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>WARNING -- THIS IS AN EXPERIMENTAL FEATURE</b></p>
<p class="Pp">In order to install a distribution using Module::Build, users must
    have Module::Build available on their systems. There are two ways to do
    this. The first way is to include Module::Build in the
    <span class="Li">&quot;configure_requires&quot;</span> metadata field. This
    field is supported by recent versions CPAN and CPANPLUS and is a standard
    feature in the Perl core as of Perl 5.10.1. Module::Build now adds itself to
    <span class="Li">&quot;configure_requires&quot;</span> by default.</p>
<p class="Pp">The second way supports older Perls that have not upgraded CPAN or
    CPANPLUS and involves bundling an entire copy of Module::Build into the
    distribution's <span class="Li">&quot;inc/&quot;</span> directory. This is
    the same approach used by Module::Install, a modern wrapper around
    ExtUtils::MakeMaker for Makefile.PL based distributions.</p>
<p class="Pp">The &quot;trick&quot; to making this work for Module::Build is
    making sure the highest version Module::Build is used, whether this is in
    <span class="Li">&quot;inc/&quot;</span> or already installed on the user's
    system. This ensures that all necessary features are available as well as
    any new bug fixes. This is done using the experimental inc::latest module,
    available on CPAN.</p>
<p class="Pp">A &quot;normal&quot; Build.PL looks like this (with only the
    minimum required fields):</p>
<p class="Pp"></p>
<pre>  use Module::Build;
  Module::Build-&gt;new(
    module_name =&gt; 'Foo::Bar',
    license     =&gt; 'perl',
  )-&gt;create_build_script;
</pre>
<p class="Pp">A &quot;bundling&quot; Build.PL replaces the initial
    &quot;use&quot; line with a nearly transparent replacement:</p>
<p class="Pp"></p>
<pre>  use inc::latest 'Module::Build';
  Module::Build-&gt;new(
    module_name =&gt; 'Foo::Bar',
    license =&gt; 'perl',
  )-&gt;create_build_script;
</pre>
<p class="Pp">For <i>authors</i>, when &quot;Build dist&quot; is run,
    Module::Build will be automatically bundled into
    <span class="Li">&quot;inc&quot;</span> according to the rules for
    inc::latest.</p>
<p class="Pp">For <i>users</i>, inc::latest will load the latest Module::Build,
    whether installed or bundled in
  <span class="Li">&quot;inc/&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUNDLING_OTHER_CONFIGURATION_DEPENDENCIES"><a class="permalink" href="#BUNDLING_OTHER_CONFIGURATION_DEPENDENCIES">BUNDLING
  OTHER CONFIGURATION DEPENDENCIES</a></h1>
<p class="Pp">The same approach works for other configuration dependencies --
    modules that <i>must</i> be available for Build.PL to run. All other
    dependencies can be specified as usual in the Build.PL and CPAN or CPANPLUS
    will install them after Build.PL finishes.</p>
<p class="Pp">For example, to bundle the Devel::AssertOS::Unix module (which
    ensures a &quot;Unix-like&quot; operating system), one could do this:</p>
<p class="Pp"></p>
<pre>  use inc::latest 'Devel::AssertOS::Unix';
  use inc::latest 'Module::Build';
  Module::Build-&gt;new(
    module_name =&gt; 'Foo::Bar',
    license =&gt; 'perl',
  )-&gt;create_build_script;
</pre>
<p class="Pp">The <span class="Li">&quot;inc::latest&quot;</span> module creates
    bundled directories based on the packlist file of an installed distribution.
    Even though <span class="Li">&quot;inc::latest&quot;</span> takes module
    name arguments, it is better to think of it as bundling and making available
    entire <i>distributions</i>. When a module is loaded through
    <span class="Li">&quot;inc::latest&quot;</span>, it looks in all bundled
    distributions in <span class="Li">&quot;inc/&quot;</span> for a newer module
    than can be found in the existing <span class="Li">@INC</span> array.</p>
<p class="Pp">Thus, the module-name provided should usually be the
    &quot;top-level&quot; module name of a distribution, though this is not
    strictly required. For example, Module::Build has a number of heuristics to
    map module names to packlists, allowing users to do things like this:</p>
<p class="Pp"></p>
<pre>  use inc::latest 'Devel::AssertOS::Unix';
</pre>
<p class="Pp">even though Devel::AssertOS::Unix is contained within the
    Devel-CheckOS distribution.</p>
<p class="Pp">At the current time, packlists are required. Thus, bundling
    dual-core modules, <i>including Module::Build</i>, may require a 'forced
    install' over versions in the latest version of perl in order to create the
    necessary packlist for bundling. This limitation will hopefully be addressed
    in a future version of Module::Build.</p>
<section class="Ss">
<h2 class="Ss">WARNING -- How to Manage Dependency Chains</h2>
<p class="Pp">Before bundling a distribution you must ensure that all
    prerequisites are also bundled and load in the correct order. For
    Module::Build itself, this should not be necessary, but it is necessary for
    any other distribution. (A future release of Module::Build will hopefully
    address this deficiency.)</p>
<p class="Pp">For example, if you need
    <span class="Li">&quot;Wibble&quot;</span>, but
    <span class="Li">&quot;Wibble&quot;</span> depends on
    <span class="Li">&quot;Wobble&quot;</span>, your Build.PL might look like
    this:</p>
<p class="Pp"></p>
<pre>  use inc::latest 'Wobble';
  use inc::latest 'Wibble';
  use inc::latest 'Module::Build';
  Module::Build-&gt;new(
    module_name =&gt; 'Foo::Bar',
    license =&gt; 'perl',
  )-&gt;create_build_script;
</pre>
<p class="Pp">Authors are strongly suggested to limit the bundling of additional
    dependencies if at all possible and to carefully test their distribution
    tarballs on older versions of Perl before uploading to CPAN.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">David Golden &lt;dagolden@cpan.org&gt;</p>
<p class="Pp">Development questions, bug reports, and patches should be sent to
    the Module-Build mailing list at &lt;module-build@perl.org&gt;.</p>
<p class="Pp">Bug reports are also welcome at
    &lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Module-Build&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>perl</b>(1), inc::latest, Module::Build(3),
    Module::Build::API(3), Module::Build::Cookbook(3),</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-05-21</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
