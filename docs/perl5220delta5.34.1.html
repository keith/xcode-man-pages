<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>PERL5220DELTA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERL5220DELTA(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERL5220DELTA(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">perl5220delta - what is new for perl v5.22.0</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This document describes differences between the 5.20.0 release and
    the 5.22.0 release.</p>
<p class="Pp">If you are upgrading from an earlier release such as 5.18.0, first
    read perl5200delta, which describes differences between 5.18.0 and
  5.20.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Core_Enhancements"><a class="permalink" href="#Core_Enhancements">Core
  Enhancements</a></h1>
<section class="Ss">
<h2 class="Ss" id="New_bitwise_operators"><a class="permalink" href="#New_bitwise_operators">New
  bitwise operators</a></h2>
<p class="Pp">A new experimental facility has been added that makes the four
    standard bitwise operators (<span class="Li">&quot;&amp; | ^ ~&quot;</span>)
    treat their operands consistently as numbers, and introduces four new dotted
    operators (<span class="Li">&quot;&amp;. |. ^. ~.&quot;</span>) that treat
    their operands consistently as strings. The same applies to the assignment
    variants (<span class="Li">&quot;&amp;= |= ^= &amp;.= |.=
  ^.=&quot;</span>).</p>
<p class="Pp">To use this, enable the &quot;bitwise&quot; feature and disable
    the &quot;experimental::bitwise&quot; warnings category. See &quot;Bitwise
    String Operators&quot; in perlop for details. [GH #14348]
    &lt;https://github.com/Perl/perl5/issues/14348&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="New_double-diamond_operator"><a class="permalink" href="#New_double-diamond_operator">New
  double-diamond operator</a></h2>
<p class="Pp"><span class="Li">&quot;&lt;&lt;&gt;&gt;&quot;</span> is like
    <span class="Li">&quot;&lt;&gt;&quot;</span> but uses three-argument
    <span class="Li">&quot;open&quot;</span> to open each file in
    <span class="Li">@ARGV</span>. This means that each element of
    <span class="Li">@ARGV</span> will be treated as an actual file name, and
    <span class="Li">&quot;|foo&quot;</span> won't be treated as a pipe
  open.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="New__"><a class="permalink" href="#New__">New &quot;\b&quot;
  boundaries in regular expressions</a></h2>
<p class="Pp"><i></i><span class="Li"><i>&quot;qr/\b{gcb}/&quot;</i></span><i></i></p>
<p class="Pp"><span class="Li">&quot;gcb&quot;</span> stands for Grapheme
    Cluster Boundary. It is a Unicode property that finds the boundary between
    sequences of characters that look like a single character to a native
    speaker of a language. Perl has long had the ability to deal with these
    through the <span class="Li">&quot;\X&quot;</span> regular escape sequence.
    Now, there is an alternative way of handling these. See &quot;\b{}, \b,
    \B{}, \B&quot; in perlrebackslash for details.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;qr/\b{wb}/&quot;</i></span><i></i></p>
<p class="Pp"><span class="Li">&quot;wb&quot;</span> stands for Word Boundary.
    It is a Unicode property that finds the boundary between words. This is
    similar to the plain <span class="Li">&quot;\b&quot;</span> (without braces)
    but is more suitable for natural language processing. It knows, for example,
    that apostrophes can occur in the middle of words. See &quot;\b{}, \b, \B{},
    \B&quot; in perlrebackslash for details.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;qr/\b{sb}/&quot;</i></span><i></i></p>
<p class="Pp"><span class="Li">&quot;sb&quot;</span> stands for Sentence
    Boundary. It is a Unicode property to aid in parsing natural language
    sentences. See &quot;\b{}, \b, \B{}, \B&quot; in perlrebackslash for
    details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Non-Capturing_Regular_Expression_Flag"><a class="permalink" href="#Non-Capturing_Regular_Expression_Flag">Non-Capturing
  Regular Expression Flag</a></h2>
<p class="Pp">Regular expressions now support a
    <span class="Li">&quot;/n&quot;</span> flag that disables capturing and
    filling in <span class="Li">$1</span>, <span class="Li">$2</span>, etc
    inside of groups:</p>
<p class="Pp"></p>
<pre>  &quot;hello&quot; =~ /(hi|hello)/n; # $1 is not set
</pre>
<p class="Pp">This is equivalent to putting
    <span class="Li">&quot;?:&quot;</span> at the beginning of every capturing
    group.</p>
<p class="Pp">See &quot;n&quot; in perlre for more information.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_use_re_"><a class="permalink" href="#_use_re_">&quot;use re
  'strict'&quot;</a></h2>
<p class="Pp">This applies stricter syntax rules to regular expression patterns
    compiled within its scope. This will hopefully alert you to typos and other
    unintentional behavior that backwards-compatibility issues prevent us from
    reporting in normal regular expression compilations. Because the behavior of
    this is subject to change in future Perl releases as we gain experience,
    using this pragma will raise a warning of category
    <span class="Li">&quot;experimental::re_strict&quot;</span>. See 'strict' in
    re.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Unicode_7.0_(with_correction)_is_now_supported"><a class="permalink" href="#Unicode_7.0_(with_correction)_is_now_supported">Unicode
  7.0 (with correction) is now supported</a></h2>
<p class="Pp">For details on what is in this release, see
    &lt;http://www.unicode.org/versions/Unicode7.0.0/&gt;. The version of
    Unicode 7.0 that comes with Perl includes a correction dealing with glyph
    shaping in Arabic (see
    &lt;http://www.unicode.org/errata/#current_errata&gt;).</p>
</section>
<section class="Ss">
<h2 class="Ss">&quot;use&#x00A0;locale&quot; can restrict which locale
  categories are affected</h2>
<p class="Pp">It is now possible to pass a parameter to
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> to specify a subset of
    locale categories to be locale-aware, with the remaining ones unaffected.
    See &quot;The &quot;use locale&quot; pragma&quot; in perllocale for
  details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Perl_now_supports_"><a class="permalink" href="#Perl_now_supports_">Perl
  now supports POSIX 2008 locale currency additions</a></h2>
<p class="Pp">On platforms that are able to handle POSIX.1-2008, the hash
    returned by <span class="Li">&quot;POSIX::localeconv()&quot;</span> includes
    the international currency fields added by that version of the POSIX
    standard. These are <span class="Li">&quot;int_n_cs_precedes&quot;</span>,
    <span class="Li">&quot;int_n_sep_by_space&quot;</span>,
    <span class="Li">&quot;int_n_sign_posn&quot;</span>,
    <span class="Li">&quot;int_p_cs_precedes&quot;</span>,
    <span class="Li">&quot;int_p_sep_by_space&quot;</span>, and
    <span class="Li">&quot;int_p_sign_posn&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Better_heuristics_on_older_platforms_for_determining_locale_UTF"><a class="permalink" href="#Better_heuristics_on_older_platforms_for_determining_locale_UTF">Better
  heuristics on older platforms for determining locale UTF-8ness</a></h2>
<p class="Pp">On platforms that implement neither the C99 standard nor the POSIX
    2001 standard, determining if the current locale is UTF-8 or not depends on
    heuristics. These are improved in this release.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Aliasing_via_reference"><a class="permalink" href="#Aliasing_via_reference">Aliasing
  via reference</a></h2>
<p class="Pp">Variables and subroutines can now be aliased by assigning to a
    reference:</p>
<p class="Pp"></p>
<pre>    \$c = \$d;
    \&amp;x = \&amp;y;
</pre>
<p class="Pp">Aliasing can also be accomplished by using a backslash before a
    <span class="Li">&quot;foreach&quot;</span> iterator variable; this is
    perhaps the most useful idiom this feature provides:</p>
<p class="Pp"></p>
<pre>    foreach \%hash (@array_of_hash_refs) { ... }
</pre>
<p class="Pp">This feature is experimental and must be enabled via
    <span class="Li">&quot;use&#x00A0;feature&#x00A0;'refaliasing'&quot;</span>.
    It will warn unless the
    <span class="Li">&quot;experimental::refaliasing&quot;</span> warnings
    category is disabled.</p>
<p class="Pp">See &quot;Assigning to References&quot; in perlref</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_prototype__with_no_arguments"><a class="permalink" href="#_prototype__with_no_arguments">&quot;prototype&quot;
  with no arguments</a></h2>
<p class="Pp"><span class="Li">&quot;prototype()&quot;</span> with no arguments
    now infers <span class="Li">$_</span>. [GH #14376]
    &lt;https://github.com/Perl/perl5/issues/14376&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="New__:const__subroutine_attribute"><a class="permalink" href="#New__:const__subroutine_attribute">New
  &quot;:const&quot; subroutine attribute</a></h2>
<p class="Pp">The <span class="Li">&quot;const&quot;</span> attribute can be
    applied to an anonymous subroutine. It causes the new sub to be executed
    immediately whenever one is created (<i>i.e.</i> when the
    <span class="Li">&quot;sub&quot;</span> expression is evaluated). Its value
    is captured and used to create a new constant subroutine that is returned.
    This feature is experimental. See &quot;Constant Functions&quot; in
  perlsub.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_fileno__now_works_on_directory_handles"><a class="permalink" href="#_fileno__now_works_on_directory_handles">&quot;fileno&quot;
  now works on directory handles</a></h2>
<p class="Pp">When the relevant support is available in the operating system,
    the <span class="Li">&quot;fileno&quot;</span> builtin now works on
    directory handles, yielding the underlying file descriptor in the same way
    as for filehandles. On operating systems without such support,
    <span class="Li">&quot;fileno&quot;</span> on a directory handle continues
    to return the undefined value, as before, but also sets
    <span class="Li">$!</span> to indicate that the operation is not
  supported.</p>
<p class="Pp">Currently, this uses either a
    <span class="Li">&quot;dd_fd&quot;</span> member in the OS
    <span class="Li">&quot;DIR&quot;</span> structure, or a
    <span class="Li">dirfd(3)</span> function as specified by POSIX.1-2008.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="List_form_of_pipe_open_implemented_for_Win32"><a class="permalink" href="#List_form_of_pipe_open_implemented_for_Win32">List
  form of pipe open implemented for Win32</a></h2>
<p class="Pp">The list form of pipe:</p>
<p class="Pp"></p>
<pre>  open my $fh, &quot;-|&quot;, &quot;program&quot;, @arguments;
</pre>
<p class="Pp">is now implemented on Win32. It has the same limitations as
    <span class="Li">&quot;system</span> <span class="Li">LIST&quot;</span> on
    Win32, since the Win32 API doesn't accept program arguments as a list.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Assignment_to_list_repetition"><a class="permalink" href="#Assignment_to_list_repetition">Assignment
  to list repetition</a></h2>
<p class="Pp"><span class="Li">&quot;(...) x ...&quot;</span> can now be used
    within a list that is assigned to, as long as the left-hand side is a valid
    lvalue. This allows
    <span class="Li">&quot;(undef,undef,$foo)&#x00A0;=&#x00A0;that_function()&quot;</span>
    to be written as
    <span class="Li">&quot;((undef)x2,&#x00A0;$foo)&#x00A0;=&#x00A0;that_function()&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Infinity_and_NaN_(not-a-number)_handling_improved"><a class="permalink" href="#Infinity_and_NaN_(not-a-number)_handling_improved">Infinity
  and NaN (not-a-number) handling improved</a></h2>
<p class="Pp">Floating point values are able to hold the special values
    infinity, negative infinity, and NaN (not-a-number). Now we more robustly
    recognize and propagate the value in computations, and on output normalize
    them to the strings <span class="Li">&quot;Inf&quot;</span>,
    <span class="Li">&quot;-Inf&quot;</span>, and
    <span class="Li">&quot;NaN&quot;</span>.</p>
<p class="Pp">See also the POSIX enhancements.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Floating_point_parsing_has_been_improved"><a class="permalink" href="#Floating_point_parsing_has_been_improved">Floating
  point parsing has been improved</a></h2>
<p class="Pp">Parsing and printing of floating point values has been
  improved.</p>
<p class="Pp">As a completely new feature, hexadecimal floating point literals
    (like <span class="Li">&quot;0x1.23p-4&quot;</span>) are now supported, and
    they can be output with
    <span class="Li">&quot;printf&#x00A0;&quot;%a&quot;&quot;</span>. See
    &quot;Scalar value constructors&quot; in perldata for more details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Packing_infinity_or_not-a-number_into_a_character_is_now_fatal"><a class="permalink" href="#Packing_infinity_or_not-a-number_into_a_character_is_now_fatal">Packing
  infinity or not-a-number into a character is now fatal</a></h2>
<p class="Pp">Before, when trying to pack infinity or not-a-number into a
    (signed) character, Perl would warn, and assumed you tried to pack
    <span class="Li">0xFF</span>; if you gave it as an argument to
    <span class="Li">&quot;chr&quot;</span>,
    <span class="Li">&quot;U+FFFD&quot;</span> was returned.</p>
<p class="Pp">But now, all such actions
    (<span class="Li">&quot;pack&quot;</span>,
    <span class="Li">&quot;chr&quot;</span>, and <span class="Li">&quot;print
    '%c'&quot;</span>) result in a fatal error.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Experimental_C_Backtrace_"><a class="permalink" href="#Experimental_C_Backtrace_">Experimental
  C Backtrace API</a></h2>
<p class="Pp">Perl now supports (via a C level API) retrieving the C level
    backtrace (similar to what symbolic debuggers like gdb do).</p>
<p class="Pp">The backtrace returns the stack trace of the C call frames, with
    the symbol names (function names), the object names (like &quot;perl&quot;),
    and if it can, also the source code locations (file:line).</p>
<p class="Pp">The supported platforms are Linux and OS X (some *BSD might work
    at least partly, but they have not yet been tested).</p>
<p class="Pp">The feature needs to be enabled with
    <span class="Li">&quot;Configure -Dusecbacktrace&quot;</span>.</p>
<p class="Pp">See &quot;C backtrace&quot; in perlhacktips for more
  information.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Security"><a class="permalink" href="#Security">Security</a></h1>
<section class="Ss">
<h2 class="Ss" id="Perl_is_now_compiled_with__"><a class="permalink" href="#Perl_is_now_compiled_with__">Perl
  is now compiled with &quot;-fstack-protector-strong&quot; if
  available</a></h2>
<p class="Pp">Perl has been compiled with the anti-stack-smashing option
    <span class="Li">&quot;-fstack-protector&quot;</span> since 5.10.1. Now Perl
    uses the newer variant called
    <span class="Li">&quot;-fstack-protector-strong&quot;</span>, if
  available.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The_Safe_module_could_allow_outside_packages_to_be_replaced"><a class="permalink" href="#The_Safe_module_could_allow_outside_packages_to_be_replaced">The
  Safe module could allow outside packages to be replaced</a></h2>
<p class="Pp">Critical bugfix: outside packages could be replaced. Safe has been
    patched to 2.38 to address this.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Perl_is_now_always_compiled_with__"><a class="permalink" href="#Perl_is_now_always_compiled_with__">Perl
  is now always compiled with &quot;-D_FORTIFY_SOURCE=2&quot; if
  available</a></h2>
<p class="Pp">The 'code hardening' option called
    <span class="Li">&quot;_FORTIFY_SOURCE&quot;</span>, available in gcc 4.*,
    is now always used for compiling Perl, if available.</p>
<p class="Pp">Note that this isn't necessarily a huge step since in many
    platforms the step had already been taken several years ago: many Linux
    distributions (like Fedora) have been using this option for Perl, and OS X
    has enforced the same for many years.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Incompatible_Changes"><a class="permalink" href="#Incompatible_Changes">Incompatible
  Changes</a></h1>
<section class="Ss">
<h2 class="Ss" id="Subroutine_signatures_moved_before_attributes"><a class="permalink" href="#Subroutine_signatures_moved_before_attributes">Subroutine
  signatures moved before attributes</a></h2>
<p class="Pp">The experimental sub signatures feature, as introduced in 5.20,
    parsed signatures after attributes. In this release, following feedback from
    users of the experimental feature, the positioning has been moved such that
    signatures occur after the subroutine name (if any) and before the attribute
    list (if any).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_&amp;__and__"><a class="permalink" href="#_&amp;__and__">&quot;&amp;&quot;
  and &quot;\&amp;&quot; prototypes accepts only subs</a></h2>
<p class="Pp">The <span class="Li">&quot;&amp;&quot;</span> prototype character
    now accepts only anonymous subs (<span class="Li">&quot;sub</span>
    <span class="Li">{...}&quot;</span>), things beginning with
    <span class="Li">&quot;\&amp;&quot;</span>, or an explicit
    <span class="Li">&quot;undef&quot;</span>. Formerly it erroneously also
    allowed references to arrays, hashes, and lists. [GH #2776]
    &lt;https://github.com/Perl/perl5/issues/2776&gt;. [GH #14186]
    &lt;https://github.com/Perl/perl5/issues/14186&gt;. [GH #14353]
    &lt;https://github.com/Perl/perl5/issues/14353&gt;.</p>
<p class="Pp">In addition, the <span class="Li">&quot;\&amp;&quot;</span>
    prototype was allowing subroutine calls, whereas now it only allows
    subroutines: <span class="Li">&amp;foo</span> is still permitted as an
    argument, while <span class="Li">&quot;&amp;foo()&quot;</span> and
    <span class="Li">&quot;foo()&quot;</span> no longer are. [GH #10633]
    &lt;https://github.com/Perl/perl5/issues/10633&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_use_encoding__is_now_lexical"><a class="permalink" href="#_use_encoding__is_now_lexical">&quot;use
  encoding&quot; is now lexical</a></h2>
<p class="Pp">The encoding pragma's effect is now limited to lexical scope. This
    pragma is deprecated, but in the meantime, it could adversely affect
    unrelated modules that are included in the same program; this change fixes
    that.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="List_slices_returning_empty_lists"><a class="permalink" href="#List_slices_returning_empty_lists">List
  slices returning empty lists</a></h2>
<p class="Pp">List slices now return an empty list only if the original list was
    empty (or if there are no indices). Formerly, a list slice would return an
    empty list if all indices fell outside the original list; now it returns a
    list of <span class="Li">&quot;undef&quot;</span> values in that case. [GH
    #12335] &lt;https://github.com/Perl/perl5/issues/12335&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_"><a class="permalink" href="#_">&quot;\N{}&quot; with a
  sequence of multiple spaces is now a fatal error</a></h2>
<p class="Pp">E.g.
    <span class="Li">&quot;\N{TOO&#x00A0;&#x00A0;MANY&#x00A0;SPACES}&quot;</span>
    or <span class="Li">&quot;\N{TRAILING&#x00A0;SPACE&#x00A0;}&quot;</span>.
    This has been deprecated since v5.18.</p>
</section>
<section class="Ss">
<h2 class="Ss">&quot;use&#x00A0;UNIVERSAL&#x00A0;'...'&quot; is now a fatal
  error</h2>
<p class="Pp">Importing functions from
    <span class="Li">&quot;UNIVERSAL&quot;</span> has been deprecated since
    v5.12, and is now a fatal error.
    <span class="Li">&quot;use&#x00A0;UNIVERSAL&quot;</span> without any
    arguments is still allowed.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="In_double-quotish__"><a class="permalink" href="#In_double-quotish__">In
  double-quotish &quot;\c<span class="Li"><i>X</i></span>&quot;, <i>X</i> must
  now be a printable ASCII character</a></h2>
<p class="Pp">In prior releases, failure to do this raised a deprecation
    warning.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Splitting_the_tokens__(?__and__(*__in_regular_expressions_is_now_a_fatal_compilation_error."><a class="permalink" href="#Splitting_the_tokens__(?__and__(*__in_regular_expressions_is_now_a_fatal_compilation_error.">Splitting
  the tokens &quot;(?&quot; and &quot;(*&quot; in regular expressions is now a
  fatal compilation error.</a></h2>
<p class="Pp">These had been deprecated since v5.18.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_qr/foo/x__now_ignores_all_Unicode_pattern_white_space"><a class="permalink" href="#_qr/foo/x__now_ignores_all_Unicode_pattern_white_space">&quot;qr/foo/x&quot;
  now ignores all Unicode pattern white space</a></h2>
<p class="Pp">The <span class="Li">&quot;/x&quot;</span> regular expression
    modifier allows the pattern to contain white space and comments (both of
    which are ignored) for improved readability. Until now, not all the white
    space characters that Unicode designates for this purpose were handled. The
    additional ones now recognized are:</p>
<p class="Pp"></p>
<pre>    U+0085 NEXT LINE
    U+200E LEFT-TO-RIGHT MARK
    U+200F RIGHT-TO-LEFT MARK
    U+2028 LINE SEPARATOR
    U+2029 PARAGRAPH SEPARATOR
</pre>
<p class="Pp">The use of these characters with
    <span class="Li">&quot;/x&quot;</span> outside bracketed character classes
    and when not preceded by a backslash has raised a deprecation warning since
    v5.18. Now they will be ignored.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Comment_lines_within__(?_"><a class="permalink" href="#Comment_lines_within__(?_">Comment
  lines within &quot;(?[&#x00A0;])&quot; are now ended only by a
  &quot;\n&quot;</a></h2>
<p class="Pp"><span class="Li">&quot;(?[&#x00A0;])&quot;</span> is an
    experimental feature, introduced in v5.18. It operates as if
    <span class="Li">&quot;/x&quot;</span> is always enabled. But there was a
    difference: comment lines (following a <span class="Li">&quot;#&quot;</span>
    character) were terminated by anything matching
    <span class="Li">&quot;\R&quot;</span> which includes all vertical
    whitespace, such as form feeds. For consistency, this is now changed to
    match what terminates comment lines outside
    <span class="Li">&quot;(?[&#x00A0;])&quot;</span>, namely a
    <span class="Li">&quot;\n&quot;</span> (even if escaped), which is the same
    as what terminates a heredoc string and formats.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_(?_..._)__operators_now_follow_standard_Perl_precedence"><a class="permalink" href="#_(?_..._)__operators_now_follow_standard_Perl_precedence">&quot;(?[...])&quot;
  operators now follow standard Perl precedence</a></h2>
<p class="Pp">This experimental feature allows set operations in regular
    expression patterns. Prior to this, the intersection operator had the same
    precedence as the other binary operators. Now it has higher precedence. This
    could lead to different outcomes than existing code expects (though the
    documentation has always noted that this change might happen, recommending
    fully parenthesizing the expressions). See &quot;Extended Bracketed
    Character Classes&quot; in perlrecharclass.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Omitting_____and__@__on_hash_and_array_names_is_no_longer_permitted"><a class="permalink" href="#Omitting_____and__@__on_hash_and_array_names_is_no_longer_permitted">Omitting
  &quot;%&quot; and &quot;@&quot; on hash and array names is no longer
  permitted</a></h2>
<p class="Pp">Really old Perl let you omit the
    <span class="Li">&quot;@&quot;</span> on array names and the
    <span class="Li">&quot;%&quot;</span> on hash names in some spots. This has
    issued a deprecation warning since Perl 5.000, and is no longer
  permitted.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_$!__text_is_now_in_English_outside_the_scope_of__use_locale_"><a class="permalink" href="#_$!__text_is_now_in_English_outside_the_scope_of__use_locale_">&quot;$!&quot;
  text is now in English outside the scope of &quot;use locale&quot;</a></h2>
<p class="Pp">Previously, the text, unlike almost everything else, always came
    out based on the current underlying locale of the program. (Also affected on
    some systems is <span class="Li">&quot;$^E&quot;</span>.) For programs that
    are unprepared to handle locale differences, this can cause garbage text to
    be displayed. It's better to display text that is translatable via some tool
    than garbage text which is much harder to figure out.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_$!__text_will_be_returned_in_"><a class="permalink" href="#_$!__text_will_be_returned_in_">&quot;$!&quot;
  text will be returned in UTF-8 when appropriate</a></h2>
<p class="Pp">The stringification of <span class="Li">$!</span> and
    <span class="Li">$^E</span> will have the UTF-8 flag set when the text is
    actually non-ASCII UTF-8. This will enable programs that are set up to be
    locale-aware to properly output messages in the user's native language. Code
    that needs to continue the 5.20 and earlier behavior can do the
    stringification within the scopes of both
    <span class="Li">&quot;use&#x00A0;bytes&quot;</span> and
    <span class="Li">&quot;use&#x00A0;locale&#x00A0;&quot;:messages&quot;&quot;</span>.
    Within these two scopes, no other Perl operations will be affected by
    locale; only <span class="Li">$!</span> and <span class="Li">$^E</span>
    stringification. The <span class="Li">&quot;bytes&quot;</span> pragma causes
    the UTF-8 flag to not be set, just as in previous Perl releases. This
    resolves [GH #12035] &lt;https://github.com/Perl/perl5/issues/12035&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Support_for__?PATTERN?__without_explicit_operator_has_been_removed"><a class="permalink" href="#Support_for__?PATTERN?__without_explicit_operator_has_been_removed">Support
  for &quot;?PATTERN?&quot; without explicit operator has been removed</a></h2>
<p class="Pp">The <span class="Li">&quot;m?PATTERN?&quot;</span> construct,
    which allows matching a regex only once, previously had an alternative form
    that was written directly with a question mark delimiter, omitting the
    explicit <span class="Li">&quot;m&quot;</span> operator. This usage has
    produced a deprecation warning since 5.14.0. It is now a syntax error, so
    that the question mark can be available for use in new operators.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_defined(@array)__and__defined(_hash)__are_now_fatal_errors"><a class="permalink" href="#_defined(@array)__and__defined(_hash)__are_now_fatal_errors">&quot;defined(@array)&quot;
  and &quot;defined(%hash)&quot; are now fatal errors</a></h2>
<p class="Pp">These have been deprecated since v5.6.1 and have raised
    deprecation warnings since v5.16.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_a_hash_or_an_array_as_a_reference_are_now_fatal_errors"><a class="permalink" href="#Using_a_hash_or_an_array_as_a_reference_are_now_fatal_errors">Using
  a hash or an array as a reference are now fatal errors</a></h2>
<p class="Pp">For example,
    <span class="Li">&quot;%foo-&gt;{&quot;bar&quot;}&quot;</span> now causes a
    fatal compilation error. These have been deprecated since before v5.8, and
    have raised deprecation warnings since then.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_the__*__prototype"><a class="permalink" href="#Changes_to_the__*__prototype">Changes
  to the &quot;*&quot; prototype</a></h2>
<p class="Pp">The <span class="Li">&quot;*&quot;</span> character in a
    subroutine's prototype used to allow barewords to take precedence over most,
    but not all, subroutine names. It was never consistent and exhibited buggy
    behavior.</p>
<p class="Pp">Now it has been changed, so subroutines always take precedence
    over barewords, which brings it into conformity with similarly prototyped
    built-in functions:</p>
<p class="Pp"></p>
<pre>    sub splat(*) { ... }
    sub foo { ... }
    splat(foo); # now always splat(foo())
    splat(bar); # still splat('bar') as before
    close(foo); # close(foo())
    close(bar); # close('bar')
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Deprecations"><a class="permalink" href="#Deprecations">Deprecations</a></h1>
<section class="Ss">
<h2 class="Ss" id="Setting__$__ENCODING___to_anything_but__undef_"><a class="permalink" href="#Setting__$__ENCODING___to_anything_but__undef_">Setting
  &quot;${^ENCODING}&quot; to anything but &quot;undef&quot;</a></h2>
<p class="Pp">This variable allows Perl scripts to be written in an encoding
    other than ASCII or UTF-8. However, it affects all modules globally, leading
    to wrong answers and segmentation faults. New scripts should be written in
    UTF-8; old scripts should be converted to UTF-8, which is easily done with
    the piconv utility.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Use_of_non-graphic_characters_in_single-character_variable_names"><a class="permalink" href="#Use_of_non-graphic_characters_in_single-character_variable_names">Use
  of non-graphic characters in single-character variable names</a></h2>
<p class="Pp">The syntax for single-character variable names is more lenient
    than for longer variable names, allowing the one-character name to be a
    punctuation character or even invisible (a non-graphic). Perl v5.20
    deprecated the ASCII-range controls as such a name. Now, all non-graphic
    characters that formerly were allowed are deprecated. The practical effect
    of this occurs only when not under
    <span class="Li">&quot;use&#x00A0;utf8&quot;</span>, and affects just the C1
    controls (code points 0x80 through 0xFF), NO-BREAK SPACE, and SOFT
  HYPHEN.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Inlining_of__sub_()___$var____with_observable_side-effects"><a class="permalink" href="#Inlining_of__sub_()___$var____with_observable_side-effects">Inlining
  of &quot;sub () { $var }&quot; with observable side-effects</a></h2>
<p class="Pp">In many cases Perl makes
    <span class="Li">&quot;sub&#x00A0;()&#x00A0;{&#x00A0;$var&#x00A0;}&quot;</span>
    into an inlinable constant subroutine, capturing the value of
    <span class="Li">$var</span> at the time the
    <span class="Li">&quot;sub&quot;</span> expression is evaluated. This can
    break the closure behavior in those cases where <span class="Li">$var</span>
    is subsequently modified, since the subroutine won't return the changed
    value. (Note that this all only applies to anonymous subroutines with an
    empty prototype (<span class="Li">&quot;sub&#x00A0;()&quot;</span>).)</p>
<p class="Pp">This usage is now deprecated in those cases where the variable
    could be modified elsewhere. Perl detects those cases and emits a
    deprecation warning. Such code will likely change in the future and stop
    producing a constant.</p>
<p class="Pp">If your variable is only modified in the place where it is
    declared, then Perl will continue to make the sub inlinable with no
    warnings.</p>
<p class="Pp"></p>
<pre>    sub make_constant {
        my $var = shift;
        return sub () { $var }; # fine
    }
    sub make_constant_deprecated {
        my $var;
        $var = shift;
        return sub () { $var }; # deprecated
    }
    sub make_constant_deprecated2 {
        my $var = shift;
        log_that_value($var); # could modify $var
        return sub () { $var }; # deprecated
    }
</pre>
<p class="Pp">In the second example above, detecting that
    <span class="Li">$var</span> is assigned to only once is too hard to detect.
    That it happens in a spot other than the
    <span class="Li">&quot;my&quot;</span> declaration is enough for Perl to
    find it suspicious.</p>
<p class="Pp">This deprecation warning happens only for a simple variable for
    the body of the sub. (A <span class="Li">&quot;BEGIN&quot;</span> block or
    <span class="Li">&quot;use&quot;</span> statement inside the sub is ignored,
    because it does not become part of the sub's body.) For more complex cases,
    such as
    <span class="Li">&quot;sub&#x00A0;()&#x00A0;{&#x00A0;do_something()&#x00A0;if&#x00A0;0;&#x00A0;$var&#x00A0;}&quot;</span>
    the behavior has changed such that inlining does not happen if the variable
    is modifiable elsewhere. Such cases should be rare.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Use_of_multiple__/x__regexp_modifiers"><a class="permalink" href="#Use_of_multiple__/x__regexp_modifiers">Use
  of multiple &quot;/x&quot; regexp modifiers</a></h2>
<p class="Pp">It is now deprecated to say something like any of the
  following:</p>
<p class="Pp"></p>
<pre>    qr/foo/xx;
    /(?xax:foo)/;
    use re qw(/amxx);
</pre>
<p class="Pp">That is, now <span class="Li">&quot;x&quot;</span> should only
    occur once in any string of contiguous regular expression pattern modifiers.
    We do not believe there are any occurrences of this in all of CPAN. This is
    in preparation for a future Perl release having
    <span class="Li">&quot;/xx&quot;</span> permit white-space for readability
    in bracketed character classes (those enclosed in square brackets:
    <span class="Li">&quot;[...]&quot;</span>).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_a_NO-BREAK_space_in_a_character_alias_for__"><a class="permalink" href="#Using_a_NO-BREAK_space_in_a_character_alias_for__">Using
  a NO-BREAK space in a character alias for &quot;\N{...}&quot; is now
  deprecated</a></h2>
<p class="Pp">This non-graphic character is essentially indistinguishable from a
    regular space, and so should not be allowed. See &quot;CUSTOM ALIASES&quot;
    in charnames.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="A_literal_____should_now_be_escaped_in_a_pattern"><a class="permalink" href="#A_literal_____should_now_be_escaped_in_a_pattern">A
  literal &quot;{&quot; should now be escaped in a pattern</a></h2>
<p class="Pp">If you want a literal left curly bracket (also called a left
    brace) in a regular expression pattern, you should now escape it by either
    preceding it with a backslash (<span class="Li">&quot;\{&quot;</span>) or
    enclosing it within square brackets <span class="Li">&quot;[{]&quot;</span>,
    or by using <span class="Li">&quot;\Q&quot;</span>; otherwise a deprecation
    warning will be raised. This was first announced as forthcoming in the v5.16
    release; it will allow future extensions to the language to happen.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Making_all_warnings_fatal_is_discouraged"><a class="permalink" href="#Making_all_warnings_fatal_is_discouraged">Making
  all warnings fatal is discouraged</a></h2>
<p class="Pp">The documentation for fatal warnings notes that
    <span class="Li">&quot;use warnings FATAL =&gt; 'all'&quot;</span> is
    discouraged, and provides stronger language about the risks of fatal
    warnings in general.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Performance_Enhancements"><a class="permalink" href="#Performance_Enhancements">Performance
  Enhancements</a></h1>
<ul class="Bl-bullet">
  <li>If a method or class name is known at compile time, a hash is precomputed
      to speed up run-time method lookup. Also, compound method names like
      <span class="Li">&quot;SUPER::new&quot;</span> are parsed at compile time,
      to save having to parse them at run time.</li>
  <li>Array and hash lookups (especially nested ones) that use only constants or
      simple variables as keys, are now considerably faster. See &quot;Internal
      Changes&quot; for more details.</li>
  <li><span class="Li">&quot;(...)x1&quot;</span>,
      <span class="Li">&quot;(&quot;constant&quot;)x0&quot;</span> and
      <span class="Li">&quot;($scalar)x0&quot;</span> are now optimised in list
      context. If the right-hand argument is a constant 1, the repetition
      operator disappears. If the right-hand argument is a constant 0, the whole
      expression is optimised to the empty list, so long as the left-hand
      argument is a simple scalar or constant. (That is,
      <span class="Li">&quot;(foo())x0&quot;</span> is not subject to this
      optimisation.)</li>
  <li><span class="Li">&quot;substr&quot;</span> assignment is now optimised
      into 4-argument <span class="Li">&quot;substr&quot;</span> at the end of a
      subroutine (or as the argument to
      <span class="Li">&quot;return&quot;</span>). Previously, this optimisation
      only happened in void context.</li>
  <li>In <span class="Li">&quot;\L...&quot;</span>,
      <span class="Li">&quot;\Q...&quot;</span>, etc., the extra
      &quot;stringify&quot; op is now optimised away, making these just as fast
      as <span class="Li">&quot;lcfirst&quot;</span>,
      <span class="Li">&quot;quotemeta&quot;</span>, etc.</li>
  <li>Assignment to an empty list is now sometimes faster. In particular, it
      never calls <span class="Li">&quot;FETCH&quot;</span> on tied arguments on
      the right-hand side, whereas it used to sometimes.</li>
  <li>There is a performance improvement of up to 20% when
      <span class="Li">&quot;length&quot;</span> is applied to a non-magical,
      non-tied string, and either <span class="Li">&quot;use bytes&quot;</span>
      is in scope or the string doesn't use UTF-8 internally.</li>
  <li>On most perl builds with 64-bit integers, memory usage for non-magical,
      non-tied scalars containing only a floating point value has been reduced
      by between 8 and 32 bytes, depending on OS.</li>
  <li>In <span class="Li">&quot;@array = split&quot;</span>, the assignment can
      be optimized away, so that <span class="Li">&quot;split&quot;</span>
      writes directly to the array. This optimisation was happening only for
      package arrays other than <span class="Li">@_</span>, and only sometimes.
      Now this optimisation happens almost all the time.</li>
  <li><span class="Li">&quot;join&quot;</span> is now subject to constant
      folding. So for example
      <span class="Li">&quot;join&#x00A0;&quot;-&quot;,&#x00A0;&quot;a&quot;,&#x00A0;&quot;b&quot;&quot;</span>
      is converted at compile-time to <span class="Li">&quot;a-b&quot;</span>.
      Moreover, <span class="Li">&quot;join&quot;</span> with a scalar or
      constant for the separator and a single-item list to join is simplified to
      a stringification, and the separator doesn't even get evaluated.</li>
  <li><span class="Li">&quot;qq(@array)&quot;</span> is implemented using two
      ops: a stringify op and a join op. If the
      <span class="Li">&quot;qq&quot;</span> contains nothing but a single
      array, the stringification is optimized away.</li>
  <li><span class="Li">&quot;our&#x00A0;$var&quot;</span> and
      <span class="Li">&quot;our($s,@a,%h)&quot;</span> in void context are no
      longer evaluated at run time. Even a whole sequence of
      <span class="Li">&quot;our&#x00A0;$foo;&quot;</span> statements will
      simply be skipped over. The same applies to
      <span class="Li">&quot;state&quot;</span> variables.</li>
  <li>Many internal functions have been refactored to improve performance and
      reduce their memory footprints. [GH #13659]
      &lt;https://github.com/Perl/perl5/issues/13659&gt; [GH #13856]
      &lt;https://github.com/Perl/perl5/issues/13856&gt; [GH #13874]
      &lt;https://github.com/Perl/perl5/issues/13874&gt;</li>
  <li><span class="Li">&quot;-T&quot;</span> and
      <span class="Li">&quot;-B&quot;</span> filetests will return sooner when
      an empty file is detected. [GH #13686]
      &lt;https://github.com/Perl/perl5/issues/13686&gt;</li>
  <li>Hash lookups where the key is a constant are faster.</li>
  <li>Subroutines with an empty prototype and a body containing just
      <span class="Li">&quot;undef&quot;</span> are now eligible for inlining.
      [GH #14077] &lt;https://github.com/Perl/perl5/issues/14077&gt;</li>
  <li>Subroutines in packages no longer need to be stored in typeglobs:
      declaring a subroutine will now put a simple sub reference directly in the
      stash if possible, saving memory. The typeglob still notionally exists, so
      accessing it will cause the stash entry to be upgraded to a typeglob
      (<i>i.e.</i> this is just an internal implementation detail). This
      optimization does not currently apply to XSUBs or exported subroutines,
      and method calls will undo it, since they cache things in typeglobs. [GH
      #13392] &lt;https://github.com/Perl/perl5/issues/13392&gt;</li>
  <li>The functions
      <span class="Li">&quot;utf8::native_to_unicode()&quot;</span> and
      <span class="Li">&quot;utf8::unicode_to_native()&quot;</span> (see utf8)
      are now optimized out on ASCII platforms. There is now not even a minimal
      performance hit in writing code portable between ASCII and EBCDIC
      platforms.</li>
  <li>Win32 Perl uses 8 KB less of per-process memory than before for every perl
      process, because some data is now memory mapped from disk and shared
      between processes from the same perl binary.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Modules_and_Pragmata"><a class="permalink" href="#Modules_and_Pragmata">Modules
  and Pragmata</a></h1>
<section class="Ss">
<h2 class="Ss" id="Updated_Modules_and_Pragmata"><a class="permalink" href="#Updated_Modules_and_Pragmata">Updated
  Modules and Pragmata</a></h2>
<p class="Pp">Many of the libraries distributed with perl have been upgraded
    since v5.20.0. For a complete list of changes, run:</p>
<p class="Pp"></p>
<pre>  corelist --diff 5.20.0 5.22.0
</pre>
<p class="Pp">You can substitute your favorite version in place of 5.20.0,
  too.</p>
<p class="Pp">Some notable changes include:</p>
<ul class="Bl-bullet">
  <li>Archive::Tar has been upgraded to version 2.04.
    <p class="Pp">Tests can now be run in parallel.</p>
  </li>
  <li>attributes has been upgraded to version 0.27.
    <p class="Pp">The usage of <span class="Li">&quot;memEQs&quot;</span> in the
        XS has been corrected. [GH #14072]
        &lt;https://github.com/Perl/perl5/issues/14072&gt;</p>
    <p class="Pp">Avoid reading beyond the end of a buffer. [perl #122629]</p>
  </li>
  <li>B has been upgraded to version 1.58.
    <p class="Pp">It provides a new
        <span class="Li">&quot;B::safename&quot;</span> function, based on the
        existing <span class="Li">&quot;B::GV-&gt;SAFENAME&quot;</span>, that
        converts <span class="Li">&quot;\cOPEN&quot;</span> to
        <span class="Li">&quot;^OPEN&quot;</span>.</p>
    <p class="Pp">Nulled COPs are now of class
        <span class="Li">&quot;B::COP&quot;</span>, rather than
        <span class="Li">&quot;B::OP&quot;</span>.</p>
    <p class="Pp"><span class="Li">&quot;B::REGEXP&quot;</span> objects now
        provide a <span class="Li">&quot;qr_anoncv&quot;</span> method for
        accessing the implicit CV associated with
        <span class="Li">&quot;qr//&quot;</span> things containing code blocks,
        and a <span class="Li">&quot;compflags&quot;</span> method that returns
        the pertinent flags originating from the
        <span class="Li">&quot;qr//blahblah&quot;</span> op.</p>
    <p class="Pp"><span class="Li">&quot;B::PMOP&quot;</span> now provides a
        <span class="Li">&quot;pmregexp&quot;</span> method returning a
        <span class="Li">&quot;B::REGEXP&quot;</span> object. Two new classes,
        <span class="Li">&quot;B::PADNAME&quot;</span> and
        <span class="Li">&quot;B::PADNAMELIST&quot;</span>, have been
        introduced.</p>
    <p class="Pp">A bug where, after an ithread creation or pseudofork,
        special/immortal SVs in the child ithread/pseudoprocess did not have the
        correct class of <span class="Li">&quot;B::SPECIAL&quot;</span>, has
        been fixed. The <span class="Li">&quot;id&quot;</span> and
        <span class="Li">&quot;outid&quot;</span> PADLIST methods have been
        added.</p>
  </li>
  <li>B::Concise has been upgraded to version 0.996.
    <p class="Pp">Null ops that are part of the execution chain are now given
        sequence numbers.</p>
    <p class="Pp">Private flags for nulled ops are now dumped with mnemonics as
        they would be for the non-nulled counterparts.</p>
  </li>
  <li>B::Deparse has been upgraded to version 1.35.
    <p class="Pp">It now deparses <span class="Li">&quot;+sub : attr { ...
        }&quot;</span> correctly at the start of a statement. Without the
        initial <span class="Li">&quot;+&quot;</span>,
        <span class="Li">&quot;sub&quot;</span> would be a statement label.</p>
    <p class="Pp"><span class="Li">&quot;BEGIN&quot;</span> blocks are now
        emitted in the right place most of the time, but the change
        unfortunately introduced a regression, in that
        <span class="Li">&quot;BEGIN&quot;</span> blocks occurring just before
        the end of the enclosing block may appear below it instead.</p>
    <p class="Pp"><span class="Li">&quot;B::Deparse&quot;</span> no longer puts
        erroneous <span class="Li">&quot;local&quot;</span> here and there, such
        as for <span class="Li">&quot;LIST = tr/a//d&quot;</span>. [perl
        #119815]</p>
    <p class="Pp">Adjacent <span class="Li">&quot;use&quot;</span> statements
        are no longer accidentally nested if one contains a
        <span class="Li">&quot;do&quot;</span> block. [perl #115066]</p>
    <p class="Pp">Parenthesised arrays in lists passed to
        <span class="Li">&quot;\&quot;</span> are now correctly deparsed with
        parentheses (<i>e.g.</i>, <span class="Li">&quot;\(@a, (@b),
        @c)&quot;</span> now retains the parentheses around
        <span class="Li">@b</span>), thus preserving the flattening behavior of
        referenced parenthesised arrays. Formerly, it only worked for one array:
        <span class="Li">&quot;\(@a)&quot;</span>.</p>
    <p class="Pp"><span class="Li">&quot;local our&quot;</span> is now deparsed
        correctly, with the <span class="Li">&quot;our&quot;</span>
      included.</p>
    <p class="Pp"><span class="Li">&quot;for($foo; !$bar; $baz)
        {...}&quot;</span> was deparsed without the
        <span class="Li">&quot;!&quot;</span> (or
        <span class="Li">&quot;not&quot;</span>). This has been fixed.</p>
    <p class="Pp">Core keywords that conflict with lexical subroutines are now
        deparsed with the <span class="Li">&quot;CORE::&quot;</span> prefix.</p>
    <p class="Pp"><span class="Li">&quot;foreach state $x (...)
        {...}&quot;</span> now deparses correctly with
        <span class="Li">&quot;state&quot;</span> and not
        <span class="Li">&quot;my&quot;</span>.</p>
    <p class="Pp"><span class="Li">&quot;our @array = split(...)&quot;</span>
        now deparses correctly with <span class="Li">&quot;our&quot;</span> in
        those cases where the assignment is optimized away.</p>
    <p class="Pp">It now deparses
        <span class="Li">&quot;our(</span><span class="Li"><i>LIST</i></span><span class="Li">)&quot;</span>
        and typed lexical (<span class="Li">&quot;my Dog $spot&quot;</span>)
        correctly.</p>
    <p class="Pp">Deparse <span class="Li">$#_</span> as that instead of as
        <span class="Li">$#{_}</span>. [GH #14545]
        &lt;https://github.com/Perl/perl5/issues/14545&gt;</p>
    <p class="Pp">BEGIN blocks at the end of the enclosing scope are now
        deparsed in the right place. [perl #77452]</p>
    <p class="Pp">BEGIN blocks were sometimes deparsed as __ANON__, but are now
        always called BEGIN.</p>
    <p class="Pp">Lexical subroutines are now fully deparsed. [perl #116553]</p>
    <p class="Pp"><span class="Li">&quot;Anything =~ y///r&quot;</span> with
        <span class="Li">&quot;/r&quot;</span> no longer omits the left-hand
        operand.</p>
    <p class="Pp">The op trees that make up regexp code blocks are now deparsed
        for real. Formerly, the original string that made up the regular
        expression was used. That caused problems with
        <span class="Li">&quot;qr/(?{&lt;&lt;heredoc})/&quot;</span> and
        multiline code blocks, which were deparsed incorrectly. [perl #123217]
        [perl #115256]</p>
    <p class="Pp"><span class="Li">$;</span> at the end of a statement no longer
        loses its semicolon. [perl #123357]</p>
    <p class="Pp">Some cases of subroutine declarations stored in the stash in
        shorthand form were being omitted.</p>
    <p class="Pp">Non-ASCII characters are now consistently escaped in strings,
        instead of some of the time. (There are still outstanding problems with
        regular expressions and identifiers that have not been fixed.)</p>
    <p class="Pp">When prototype sub calls are deparsed with
        <span class="Li">&quot;&amp;&quot;</span> (<i>e.g.</i>, under the
        <b>-P</b> option), <span class="Li">&quot;scalar&quot;</span> is now
        added where appropriate, to force the scalar context implied by the
        prototype.</p>
    <p class="Pp"><span class="Li">&quot;require(foo())&quot;</span>,
        <span class="Li">&quot;do(foo())&quot;</span>,
        <span class="Li">&quot;goto(foo())&quot;</span> and similar constructs
        with loop controls are now deparsed correctly. The outer parentheses are
        not optional.</p>
    <p class="Pp">Whitespace is no longer escaped in regular expressions,
        because it was getting erroneously escaped within
        <span class="Li">&quot;(?x:...)&quot;</span> sections.</p>
    <p class="Pp"><span class="Li">&quot;sub foo { foo() }&quot;</span> is now
        deparsed with those mandatory parentheses.</p>
    <p class="Pp"><span class="Li">&quot;/@array/&quot;</span> is now deparsed
        as a regular expression, and not just
      <span class="Li">@array</span>.</p>
    <p class="Pp"><span class="Li">&quot;/@{-}/&quot;</span>,
        <span class="Li">&quot;/@{+}/&quot;</span> and
        <span class="Li">$#{1}</span> are now deparsed with the braces, which
        are mandatory in these cases.</p>
    <p class="Pp">In deparsing feature bundles,
        <span class="Li">&quot;B::Deparse&quot;</span> was emitting
        <span class="Li">&quot;no feature;&quot;</span> first instead of
        <span class="Li">&quot;no feature ':all';&quot;</span>. This has been
        fixed.</p>
    <p class="Pp"><span class="Li">&quot;chdir FH&quot;</span> is now deparsed
        without quotation marks.</p>
    <p class="Pp"><span class="Li">&quot;\my @a&quot;</span> is now deparsed
        without parentheses. (Parenthese would flatten the array.)</p>
    <p class="Pp"><span class="Li">&quot;system&quot;</span> and
        <span class="Li">&quot;exec&quot;</span> followed by a block are now
        deparsed correctly. Formerly there was an erroneous
        <span class="Li">&quot;do&quot;</span> before the block.</p>
    <p class="Pp"><span class="Li">&quot;use constant QR =&gt;
        qr/.../flags&quot;</span> followed by
        <span class="Li">&quot;&quot;&quot; =~ QR&quot;</span> is no longer
        without the flags.</p>
    <p class="Pp">Deparsing <span class="Li">&quot;BEGIN { undef &amp;foo
        }&quot;</span> with the <b>-w</b> switch enabled started to emit
        'uninitialized' warnings in Perl 5.14. This has been fixed.</p>
    <p class="Pp">Deparsing calls to subs with a
        <span class="Li">&quot;(;+)&quot;</span> prototype resulted in an
        infinite loop. The <span class="Li">&quot;(;$&quot;</span>)
        <span class="Li">&quot;(_)&quot;</span> and
        <span class="Li">&quot;(;_)&quot;</span> prototypes were given the wrong
        precedence, causing <span class="Li">&quot;foo($a&lt;$b)&quot;</span> to
        be deparsed without the parentheses.</p>
    <p class="Pp">Deparse now provides a defined state sub in inner subs.</p>
  </li>
  <li>B::Op_private has been added.
    <p class="Pp">B::Op_private provides detailed information about the flags
        used in the <span class="Li">&quot;op_private&quot;</span> field of perl
        opcodes.</p>
  </li>
  <li>bigint, bignum, bigrat have been upgraded to version 0.39.
    <p class="Pp">Document in CAVEATS that using strings as numbers won't always
        invoke the big number overloading, and how to invoke it. [rt.perl.org
        #123064]</p>
  </li>
  <li>Carp has been upgraded to version 1.36.
    <p class="Pp"><span class="Li">&quot;Carp::Heavy&quot;</span> now ignores
        version mismatches with Carp if Carp is newer than 1.12, since
        <span class="Li">&quot;Carp::Heavy&quot;</span>'s guts were merged into
        Carp at that point. [GH #13708]
        &lt;https://github.com/Perl/perl5/issues/13708&gt;</p>
    <p class="Pp">Carp now handles non-ASCII platforms better.</p>
    <p class="Pp">Off-by-one error fix for Perl &lt; 5.14.</p>
  </li>
  <li>constant has been upgraded to version 1.33.
    <p class="Pp">It now accepts fully-qualified constant names, allowing
        constants to be defined in packages other than the caller.</p>
  </li>
  <li>CPAN has been upgraded to version 2.11.
    <p class="Pp">Add support for
        <span class="Li">&quot;Cwd::getdcwd()&quot;</span> and introduce
        workaround for a misbehavior seen on Strawberry Perl 5.20.1.</p>
    <p class="Pp">Fix <span class="Li">&quot;chdir()&quot;</span> after building
        dependencies bug.</p>
    <p class="Pp">Introduce experimental support for plugins/hooks.</p>
    <p class="Pp">Integrate the <span class="Li">&quot;App::Cpan&quot;</span>
        sources.</p>
    <p class="Pp">Do not check recursion on optional dependencies.</p>
    <p class="Pp">Sanity check <i>META.yml</i> to contain a hash. [cpan #95271]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=95271&gt;</p>
  </li>
  <li>CPAN::Meta::Requirements has been upgraded to version 2.132.
    <p class="Pp">Works around limitations in
        <span class="Li">&quot;version::vpp&quot;</span> detecting v-string
        magic and adds support for forthcoming ExtUtils::MakeMaker bootstrap
        <i>version.pm</i> for Perls older than 5.10.0.</p>
  </li>
  <li>Data::Dumper has been upgraded to version 2.158.
    <p class="Pp">Fixes CVE-2014-4330 by adding a configuration variable/option
        to limit recursion when dumping deep data structures.</p>
    <p class="Pp">Changes to resolve Coverity issues. XS dumps incorrectly
        stored the name of code references stored in a GLOB. [GH #13911]
        &lt;https://github.com/Perl/perl5/issues/13911&gt;</p>
  </li>
  <li>DynaLoader has been upgraded to version 1.32.
    <p class="Pp">Remove <span class="Li">&quot;dl_nonlazy&quot;</span> global
        if unused in Dynaloader. [perl #122926]</p>
  </li>
  <li>Encode has been upgraded to version 2.72.
    <p class="Pp"><span class="Li">&quot;piconv&quot;</span> now has better
        error handling when the encoding name is nonexistent, and a build
        breakage when upgrading Encode in perl-5.8.2 and earlier has been
      fixed.</p>
    <p class="Pp">Building in C++ mode on Windows now works.</p>
  </li>
  <li>Errno has been upgraded to version 1.23.
    <p class="Pp">Add <span class="Li">&quot;-P&quot;</span> to the preprocessor
        command-line on GCC 5. GCC added extra line directives, breaking parsing
        of error code definitions. [rt.perl.org #123784]</p>
  </li>
  <li>experimental has been upgraded to version 0.013.
    <p class="Pp">Hardcodes features for Perls older than 5.15.7.</p>
  </li>
  <li>ExtUtils::CBuilder has been upgraded to version 0.280221.
    <p class="Pp">Fixes a regression on Android. [GH #14064]
        &lt;https://github.com/Perl/perl5/issues/14064&gt;</p>
  </li>
  <li>ExtUtils::Manifest has been upgraded to version 1.70.
    <p class="Pp">Fixes a bug with
        <span class="Li">&quot;maniread()&quot;</span>'s handling of quoted
        filenames and improves <span class="Li">&quot;manifind()&quot;</span> to
        follow symlinks. [GH #14003]
        &lt;https://github.com/Perl/perl5/issues/14003&gt;</p>
  </li>
  <li>ExtUtils::ParseXS has been upgraded to version 3.28.
    <p class="Pp">Only declare <span class="Li">&quot;file&quot;</span> unused
        if we actually define it. Improve generated
        <span class="Li">&quot;RETVAL&quot;</span> code generation to avoid
        repeated references to <span class="Li">ST(0)</span>. [perl #123278]
        Broaden and document the <span class="Li">&quot;/OBJ$/&quot;</span> to
        <span class="Li">&quot;/REF$/&quot;</span> typemap optimization for the
        <span class="Li">&quot;DESTROY&quot;</span> method. [perl #123418]</p>
  </li>
  <li>Fcntl has been upgraded to version 1.13.
    <p class="Pp">Add support for the Linux pipe buffer size
        <span class="Li">&quot;fcntl()&quot;</span> commands.</p>
  </li>
  <li>File::Find has been upgraded to version 1.29.
    <p class="Pp"><span class="Li">&quot;find()&quot;</span> and
        <span class="Li">&quot;finddepth()&quot;</span> will now warn if passed
        inappropriate or misspelled options.</p>
  </li>
  <li>File::Glob has been upgraded to version 1.24.
    <p class="Pp">Avoid <span class="Li">&quot;SvIV()&quot;</span> expanding to
        call <span class="Li">&quot;get_sv()&quot;</span> three times in a few
        places. [perl #123606]</p>
  </li>
  <li>HTTP::Tiny has been upgraded to version 0.054.
    <p class="Pp"><span class="Li">&quot;keep_alive&quot;</span> is now
        fork-safe and thread-safe.</p>
  </li>
  <li>IO has been upgraded to version 1.35.
    <p class="Pp">The XS implementation has been fixed for the sake of older
        Perls.</p>
  </li>
  <li>IO::Socket has been upgraded to version 1.38.
    <p class="Pp">Document the limitations of the
        <span class="Li">&quot;connected()&quot;</span> method. [perl
      #123096]</p>
  </li>
  <li>IO::Socket::IP has been upgraded to version 0.37.
    <p class="Pp">A better fix for subclassing
        <span class="Li">&quot;connect()&quot;</span>. [cpan #95983]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=95983&gt; [cpan #97050]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=97050&gt;</p>
    <p class="Pp">Implements Timeout for
        <span class="Li">&quot;connect()&quot;</span>. [cpan #92075]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=92075&gt;</p>
  </li>
  <li>The libnet collection of modules has been upgraded to version 3.05.
    <p class="Pp">Support for IPv6 and SSL to
        <span class="Li">&quot;Net::FTP&quot;</span>,
        <span class="Li">&quot;Net::NNTP&quot;</span>,
        <span class="Li">&quot;Net::POP3&quot;</span> and
        <span class="Li">&quot;Net::SMTP&quot;</span>. Improvements in
        <span class="Li">&quot;Net::SMTP&quot;</span> authentication.</p>
  </li>
  <li>Locale::Codes has been upgraded to version 3.34.
    <p class="Pp">Fixed a bug in the scripts used to extract data from
        spreadsheets that prevented the SHP currency code from being found.
        [cpan #94229]
      &lt;https://rt.cpan.org/Ticket/Display.html?id=94229&gt;</p>
    <p class="Pp">New codes have been added.</p>
  </li>
  <li>Math::BigInt has been upgraded to version 1.9997.
    <p class="Pp">Synchronize POD changes from the CPAN release.
        <span class="Li">&quot;Math::BigFloat-&gt;blog(x)&quot;</span> would
        sometimes return <span class="Li">&quot;blog(2*x)&quot;</span> when the
        accuracy was greater than 70 digits. The result of
        <span class="Li">&quot;Math::BigFloat-&gt;bdiv()&quot;</span> in list
        context now satisfies <span class="Li">&quot;x = quotient * divisor +
        remainder&quot;</span>.</p>
    <p class="Pp">Correct handling of subclasses. [cpan #96254]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=96254&gt; [cpan #96329]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=96329&gt;</p>
  </li>
  <li>Module::Metadata has been upgraded to version 1.000026.
    <p class="Pp">Support installations on older perls with an
        ExtUtils::MakeMaker earlier than 6.63_03</p>
  </li>
  <li>overload has been upgraded to version 1.26.
    <p class="Pp">A redundant <span class="Li">&quot;ref $sub&quot;</span> check
        has been removed.</p>
  </li>
  <li>The PathTools module collection has been upgraded to version 3.56.
    <p class="Pp">A warning from the <b>gcc</b> compiler is now avoided when
        building the XS.</p>
    <p class="Pp">Don't turn leading <span class="Li">&quot;//&quot;</span> into
        <span class="Li">&quot;/&quot;</span> on Cygwin. [perl #122635]</p>
  </li>
  <li>perl5db.pl has been upgraded to version 1.49.
    <p class="Pp">The debugger would cause an assertion failure. [GH #14605]
        &lt;https://github.com/Perl/perl5/issues/14605&gt;</p>
    <p class="Pp"><span class="Li">&quot;fork()&quot;</span> in the debugger
        under <span class="Li">&quot;tmux&quot;</span> will now create a new
        window for the forked process. [GH #13602]
        &lt;https://github.com/Perl/perl5/issues/13602&gt;</p>
    <p class="Pp">The debugger now saves the current working directory on
        startup and restores it when you restart your program with
        <span class="Li">&quot;R&quot;</span> or
        <span class="Li">&quot;rerun&quot;</span>. [GH #13691]
        &lt;https://github.com/Perl/perl5/issues/13691&gt;</p>
  </li>
  <li>PerlIO::scalar has been upgraded to version 0.22.
    <p class="Pp">Reading from a position well past the end of the scalar now
        correctly returns end of file. [perl #123443]</p>
    <p class="Pp">Seeking to a negative position still fails, but no longer
        leaves the file position set to a negation location.</p>
    <p class="Pp"><span class="Li">&quot;eof()&quot;</span> on a
        <span class="Li">&quot;PerlIO::scalar&quot;</span> handle now properly
        returns true when the file position is past the 2GB mark on 32-bit
        systems.</p>
    <p class="Pp">Attempting to write at file positions impossible for the
        platform now fail early rather than wrapping at 4GB.</p>
  </li>
  <li>Pod::Perldoc has been upgraded to version 3.25.
    <p class="Pp">Filehandles opened for reading or writing now have
        <span class="Li">&quot;:encoding(UTF-8)&quot;</span> set. [cpan #98019]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=98019&gt;</p>
  </li>
  <li>POSIX has been upgraded to version 1.53.
    <p class="Pp">The C99 math functions and constants (for example
        <span class="Li">&quot;acosh&quot;</span>,
        <span class="Li">&quot;isinf&quot;</span>,
        <span class="Li">&quot;isnan&quot;</span>,
        <span class="Li">&quot;round&quot;</span>,
        <span class="Li">&quot;trunc&quot;</span>;
        <span class="Li">&quot;M_E&quot;</span>,
        <span class="Li">&quot;M_SQRT2&quot;</span>,
        <span class="Li">&quot;M_PI&quot;</span>) have been added.</p>
    <p class="Pp"><span class="Li">&quot;POSIX::tmpnam()&quot;</span> now
        produces a deprecation warning. [perl #122005]</p>
  </li>
  <li>Safe has been upgraded to version 2.39.
    <p class="Pp"><span class="Li">&quot;reval&quot;</span> was not propagating
        void context properly.</p>
  </li>
  <li>Scalar-List-Utils has been upgraded to version 1.41.
    <p class="Pp">A new module, Sub::Util, has been added, containing functions
        related to CODE refs, including
        <span class="Li">&quot;subname&quot;</span> (inspired by
        <span class="Li">&quot;Sub::Identity&quot;</span>) and
        <span class="Li">&quot;set_subname&quot;</span> (copied and renamed from
        <span class="Li">&quot;Sub::Name&quot;</span>). The use of
        <span class="Li">&quot;GetMagic&quot;</span> in
        <span class="Li">&quot;List::Util::reduce()&quot;</span> has also been
        fixed. [cpan #63211]
        &lt;https://rt.cpan.org/Ticket/Display.html?id=63211&gt;</p>
  </li>
  <li>SDBM_File has been upgraded to version 1.13.
    <p class="Pp">Simplified the build process. [perl #123413]</p>
  </li>
  <li>Time::Piece has been upgraded to version 1.29.
    <p class="Pp">When pretty printing negative
        <span class="Li">&quot;Time::Seconds&quot;</span>, the &quot;minus&quot;
        is no longer lost.</p>
  </li>
  <li>Unicode::Collate has been upgraded to version 1.12.
    <p class="Pp">Version 0.67's improved discontiguous contractions is
        invalidated by default and is supported as a parameter
        <span class="Li">&quot;long_contraction&quot;</span>.</p>
  </li>
  <li>Unicode::Normalize has been upgraded to version 1.18.
    <p class="Pp">The XSUB implementation has been removed in favor of pure
        Perl.</p>
  </li>
  <li>Unicode::UCD has been upgraded to version 0.61.
    <p class="Pp">A new function <b>property_values()</b> has been added to
        return a given property's possible values.</p>
    <p class="Pp">A new function <b>charprop()</b> has been added to return the
        value of a given property for a given code point.</p>
    <p class="Pp">A new function <b>charprops_all()</b> has been added to return
        the values of all Unicode properties for a given code point.</p>
    <p class="Pp">A bug has been fixed so that <b>propaliases()</b> returns the
        correct short and long names for the Perl extensions where it was
        incorrect.</p>
    <p class="Pp">A bug has been fixed so that <b>prop_value_aliases()</b>
        returns <span class="Li">&quot;undef&quot;</span> instead of a wrong
        result for properties that are Perl extensions.</p>
    <p class="Pp">This module now works on EBCDIC platforms.</p>
  </li>
  <li>utf8 has been upgraded to version 1.17
    <p class="Pp">A mismatch between the documentation and the code in
        <span class="Li">&quot;utf8::downgrade()&quot;</span> was fixed in favor
        of the documentation. The optional second argument is now correctly
        treated as a perl boolean (true/false semantics) and not as an
      integer.</p>
  </li>
  <li>version has been upgraded to version 0.9909.
    <p class="Pp">Numerous changes. See the <i>Changes</i> file in the CPAN
        distribution for details.</p>
  </li>
  <li>Win32 has been upgraded to version 0.51.
    <p class="Pp"><span class="Li">&quot;GetOSName()&quot;</span> now supports
        Windows 8.1, and building in C++ mode now works.</p>
  </li>
  <li>Win32API::File has been upgraded to version 0.1202
    <p class="Pp">Building in C++ mode now works.</p>
  </li>
  <li>XSLoader has been upgraded to version 0.20.
    <p class="Pp">Allow XSLoader to load modules from a different namespace.
        [perl #122455]</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Removed_Modules_and_Pragmata"><a class="permalink" href="#Removed_Modules_and_Pragmata">Removed
  Modules and Pragmata</a></h2>
<p class="Pp">The following modules (and associated modules) have been removed
    from the core perl distribution:</p>
<ul class="Bl-bullet">
  <li>CGI</li>
  <li>Module::Build</li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Documentation"><a class="permalink" href="#Documentation">Documentation</a></h1>
<section class="Ss">
<h2 class="Ss" id="New_Documentation"><a class="permalink" href="#New_Documentation">New
  Documentation</a></h2>
<p class="Pp"><i>perlunicook</i></p>
<p class="Pp">This document, by Tom Christiansen, provides examples of handling
    Unicode in Perl.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Existing_Documentation"><a class="permalink" href="#Changes_to_Existing_Documentation">Changes
  to Existing Documentation</a></h2>
<p class="Pp"><i>perlaix</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>A note on long doubles has been added.</dd>
</dl>
<p class="Pp"><i>perlapi</i></p>
<ul class="Bl-bullet">
  <li>Note that <span class="Li">&quot;SvSetSV&quot;</span> doesn't do set
      magic.</li>
  <li><span class="Li">&quot;sv_usepvn_flags&quot;</span> - fix documentation to
      mention the use of <span class="Li">&quot;Newx&quot;</span> instead of
      <span class="Li">&quot;malloc&quot;</span>.
    <p class="Pp">[GH #13835]
      &lt;https://github.com/Perl/perl5/issues/13835&gt;</p>
  </li>
  <li>Clarify where <span class="Li">&quot;NUL&quot;</span> may be embedded or
      is required to terminate a string.</li>
  <li>Some documentation that was previously missing due to formatting errors is
      now included.</li>
  <li>Entries are now organized into groups rather than by the file where they
      are found.</li>
  <li>Alphabetical sorting of entries is now done consistently (automatically by
      the POD generator) to make entries easier to find when scanning.</li>
</ul>
<p class="Pp"><i>perldata</i></p>
<ul class="Bl-bullet">
  <li>The syntax of single-character variable names has been brought up-to-date
      and more fully explained.</li>
  <li>Hexadecimal floating point numbers are described, as are infinity and
    NaN.</li>
</ul>
<p class="Pp"><i>perlebcdic</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>This document has been significantly updated in the light of recent
      improvements to EBCDIC support.</dd>
</dl>
<p class="Pp"><i>perlfilter</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Added a LIMITATIONS section.</dd>
</dl>
<p class="Pp"><i>perlfunc</i></p>
<ul class="Bl-bullet">
  <li>Mention that <span class="Li">&quot;study()&quot;</span> is currently a
      no-op.</li>
  <li>Calling <span class="Li">&quot;delete&quot;</span> or
      <span class="Li">&quot;exists&quot;</span> on array values is now
      described as &quot;strongly discouraged&quot; rather than
      &quot;deprecated&quot;.</li>
  <li>Improve documentation of <span class="Li">&quot;our&quot;</span>.</li>
  <li><span class="Li">&quot;-l&quot;</span> now notes that it will return false
      if symlinks aren't supported by the file system. [GH #13695]
      &lt;https://github.com/Perl/perl5/issues/13695&gt;</li>
  <li>Note that <span class="Li">&quot;exec LIST&quot;</span> and
      <span class="Li">&quot;system LIST&quot;</span> may fall back to the shell
      on Win32. Only the indirect-object syntax <span class="Li">&quot;exec
      PROGRAM LIST&quot;</span> and <span class="Li">&quot;system PROGRAM
      LIST&quot;</span> will reliably avoid using the shell.
    <p class="Pp">This has also been noted in perlport.</p>
    <p class="Pp">[GH #13907]
      &lt;https://github.com/Perl/perl5/issues/13907&gt;</p>
  </li>
</ul>
<p class="Pp"><i>perlguts</i></p>
<ul class="Bl-bullet">
  <li>The OOK example has been updated to account for COW changes and a change
      in the storage of the offset.</li>
  <li>Details on C level symbols and libperl.t added.</li>
  <li>Information on Unicode handling has been added</li>
  <li>Information on EBCDIC handling has been added</li>
</ul>
<p class="Pp"><i>perlhack</i></p>
<ul class="Bl-bullet">
  <li>A note has been added about running on platforms with non-ASCII character
      sets</li>
  <li>A note has been added about performance testing</li>
</ul>
<p class="Pp"><i>perlhacktips</i></p>
<ul class="Bl-bullet">
  <li>Documentation has been added illustrating the perils of assuming that
      there is no change to the contents of static memory pointed to by the
      return values of Perl's wrappers for C library functions.</li>
  <li>Replacements for <span class="Li">&quot;tmpfile&quot;</span>,
      <span class="Li">&quot;atoi&quot;</span>,
      <span class="Li">&quot;strtol&quot;</span>, and
      <span class="Li">&quot;strtoul&quot;</span> are now recommended.</li>
  <li>Updated documentation for the
      <span class="Li">&quot;test.valgrind&quot;</span>
      <span class="Li">&quot;make&quot;</span> target. [GH #13658]
      &lt;https://github.com/Perl/perl5/issues/13658&gt;</li>
  <li>Information is given about writing test files portably to non-ASCII
      platforms.</li>
  <li>A note has been added about how to get a C language stack backtrace.</li>
</ul>
<p class="Pp"><i>perlhpux</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Note that the message &quot;Redeclaration of &quot;sendpath&quot; with a
      different storage class specifier&quot; is harmless.</dd>
</dl>
<p class="Pp"><i>perllocale</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Updated for the enhancements in v5.22, along with some
    clarifications.</dd>
</dl>
<p class="Pp"><i>perlmodstyle</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Instead of pointing to the module list, we are now pointing to PrePAN
      &lt;http://prepan.org/&gt;.</dd>
</dl>
<p class="Pp"><i>perlop</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Updated for the enhancements in v5.22, along with some
    clarifications.</dd>
</dl>
<p class="Pp"><i>perlpodspec</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The specification of the pod language is changing so that the default
      encoding of pods that aren't in UTF-8 (unless otherwise indicated) is
      CP1252 instead of ISO 8859-1 (Latin1).</dd>
</dl>
<p class="Pp"><i>perlpolicy</i></p>
<ul class="Bl-bullet">
  <li>We now have a code of conduct for the <i>p5p</i> mailing list, as
      documented in &quot;STANDARDS OF CONDUCT&quot; in perlpolicy.</li>
  <li>The conditions for marking an experimental feature as non-experimental are
      now set out.</li>
  <li>Clarification has been made as to what sorts of changes are permissible in
      maintenance releases.</li>
</ul>
<p class="Pp"><i>perlport</i></p>
<ul class="Bl-bullet">
  <li>Out-of-date VMS-specific information has been fixed and/or
    simplified.</li>
  <li>Notes about EBCDIC have been added.</li>
</ul>
<p class="Pp"><i>perlre</i></p>
<ul class="Bl-bullet">
  <li>The description of the <span class="Li">&quot;/x&quot;</span> modifier has
      been clarified to note that comments cannot be continued onto the next
      line by escaping them; and there is now a list of all the characters that
      are considered whitespace by this modifier.</li>
  <li>The new <span class="Li">&quot;/n&quot;</span> modifier is described.</li>
  <li>A note has been added on how to make bracketed character class ranges
      portable to non-ASCII machines.</li>
</ul>
<p class="Pp"><i>perlrebackslash</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Added documentation of <span class="Li">&quot;\b{sb}&quot;</span>,
      <span class="Li">&quot;\b{wb}&quot;</span>,
      <span class="Li">&quot;\b{gcb}&quot;</span>, and
      <span class="Li">&quot;\b{g}&quot;</span>.</dd>
</dl>
<p class="Pp"><i>perlrecharclass</i></p>
<ul class="Bl-bullet">
  <li>Clarifications have been added to &quot;Character Ranges&quot; in
      perlrecharclass to the effect <span class="Li">&quot;[A-Z]&quot;</span>,
      <span class="Li">&quot;[a-z]&quot;</span>,
      <span class="Li">&quot;[0-9]&quot;</span> and any subranges thereof in
      regular expression bracketed character classes are guaranteed to match
      exactly what a naive English speaker would expect them to match, even on
      platforms (such as EBCDIC) where perl has to do extra work to accomplish
      this.</li>
  <li>The documentation of Bracketed Character Classes has been expanded to
      cover the improvements in <span class="Li">&quot;qr/[\N{named
      sequence}]/&quot;</span> (see under &quot;Selected Bug Fixes&quot;).</li>
</ul>
<p class="Pp"><i>perlref</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>A new section has been added Assigning to References</dd>
</dl>
<p class="Pp"><i>perlsec</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Comments added on algorithmic complexity and tied hashes.</dd>
</dl>
<p class="Pp"><i>perlsyn</i></p>
<ul class="Bl-bullet">
  <li>An ambiguity in the documentation of the
      <span class="Li">&quot;...&quot;</span> statement has been corrected. [GH
      #14054] &lt;https://github.com/Perl/perl5/issues/14054&gt;</li>
  <li>The empty conditional in <span class="Li">&quot;for&quot;</span> and
      <span class="Li">&quot;while&quot;</span> is now documented in
    perlsyn.</li>
</ul>
<p class="Pp"><i>perlunicode</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>This has had extensive revisions to bring it up-to-date with current
      Unicode support and to make it more readable. Notable is that Unicode 7.0
      changed what it should do with non-characters. Perl retains the old way of
      handling for reasons of backward compatibility. See &quot;Noncharacter
      code points&quot; in perlunicode.</dd>
</dl>
<p class="Pp"><i>perluniintro</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Advice for how to make sure your strings and regular expression patterns
      are interpreted as Unicode has been updated.</dd>
</dl>
<p class="Pp"><i>perlvar</i></p>
<ul class="Bl-bullet">
  <li><span class="Li">$]</span> is no longer listed as being deprecated.
      Instead, discussion has been added on the advantages and disadvantages of
      using it versus <span class="Li">$^V</span>.
      <span class="Li">$OLD_PERL_VERSION</span> was re-added to the
      documentation as the long form of <span class="Li">$]</span>.</li>
  <li><span class="Li">&quot;${^ENCODING}&quot;</span> is now marked as
      deprecated.</li>
  <li>The entry for <span class="Li">&quot;%^H&quot;</span> has been clarified
      to indicate it can only handle simple values.</li>
</ul>
<p class="Pp"><i>perlvms</i></p>
<ul class="Bl-bullet">
  <li>Out-of-date and/or incorrect material has been removed.</li>
  <li>Updated documentation on environment and shell interaction in VMS.</li>
</ul>
<p class="Pp"><i>perlxs</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Added a discussion of locale issues in XS code.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Diagnostics"><a class="permalink" href="#Diagnostics">Diagnostics</a></h1>
<p class="Pp">The following additions or changes have been made to diagnostic
    output, including warnings and fatal error messages. For the complete list
    of diagnostic messages, see perldiag.</p>
<section class="Ss">
<h2 class="Ss" id="New_Diagnostics"><a class="permalink" href="#New_Diagnostics">New
  Diagnostics</a></h2>
<p class="Pp"><i>New Errors</i></p>
<ul class="Bl-bullet">
  <li>Bad symbol for scalar
    <p class="Pp">(P) An internal request asked to add a scalar entry to
        something that wasn't a symbol table entry.</p>
  </li>
  <li>Can't use a hash as a reference
    <p class="Pp">(F) You tried to use a hash as a reference, as in
        <span class="Li">&quot;%foo-&gt;{&quot;bar&quot;}&quot;</span> or
        <span class="Li">&quot;%$ref-&gt;{&quot;hello&quot;}&quot;</span>.
        Versions of perl &lt;= 5.6.1 used to allow this syntax, but shouldn't
        have.</p>
  </li>
  <li>Can't use an array as a reference
    <p class="Pp">(F) You tried to use an array as a reference, as in
        <span class="Li">&quot;@foo-&gt;[23]&quot;</span> or
        <span class="Li">&quot;@$ref-&gt;[99]&quot;</span>. Versions of perl
        &lt;= 5.6.1 used to allow this syntax, but shouldn't have.</p>
  </li>
  <li>Can't use 'defined(@array)' (Maybe you should just omit the
      <b>defined()</b>?)
    <p class="Pp">(F) <span class="Li">&quot;defined()&quot;</span> is not
        useful on arrays because it checks for an undefined <i>scalar</i> value.
        If you want to see if the array is empty, just use
        <span class="Li">&quot;if&#x00A0;(@array)&#x00A0;{&#x00A0;#&#x00A0;not&#x00A0;empty&#x00A0;}&quot;</span>
        for example.</p>
  </li>
  <li>Can't use 'defined(%hash)' (Maybe you should just omit the
      <b>defined()</b>?)
    <p class="Pp">(F) <span class="Li">&quot;defined()&quot;</span> is not
        usually right on hashes.</p>
    <p class="Pp">Although
        <span class="Li">&quot;defined&#x00A0;%hash&quot;</span> is false on a
        plain not-yet-used hash, it becomes true in several non-obvious
        circumstances, including iterators, weak references, stash names, even
        remaining true after
        <span class="Li">&quot;undef&#x00A0;%hash&quot;</span>. These things
        make <span class="Li">&quot;defined&#x00A0;%hash&quot;</span> fairly
        useless in practice, so it now generates a fatal error.</p>
    <p class="Pp">If a check for non-empty is what you wanted then just put it
        in boolean context (see &quot;Scalar values&quot; in perldata):</p>
    <p class="Pp"></p>
    <pre>    if (%hash) {
       # not empty
    }
    </pre>
    <p class="Pp">If you had
        <span class="Li">&quot;defined&#x00A0;%Foo::Bar::QUUX&quot;</span> to
        check whether such a package variable exists then that's never really
        been reliable, and isn't a good way to enquire about the features of a
        package, or whether it's loaded, etc.</p>
  </li>
  <li>Cannot chr <span class="Li">%f</span>
    <p class="Pp">(F) You passed an invalid number (like an infinity or
        not-a-number) to <span class="Li">&quot;chr&quot;</span>.</p>
  </li>
  <li>Cannot compress <span class="Li">%f</span> in pack
    <p class="Pp">(F) You tried converting an infinity or not-a-number to an
        unsigned character, which makes no sense.</p>
  </li>
  <li>Cannot pack <span class="Li">%f</span> with '%c'
    <p class="Pp">(F) You tried converting an infinity or not-a-number to a
        character, which makes no sense.</p>
  </li>
  <li>Cannot print <span class="Li">%f</span> with '%c'
    <p class="Pp">(F) You tried printing an infinity or not-a-number as a
        character (<span class="Li">%c</span>), which makes no sense. Maybe you
        meant <span class="Li">'%s'</span>, or just stringifying it?</p>
  </li>
  <li>charnames alias definitions may not contain a sequence of multiple spaces
    <p class="Pp">(F) You defined a character name which had multiple space
        characters in a row. Change them to single spaces. Usually these names
        are defined in the <span class="Li">&quot;:alias&quot;</span> import
        argument to <span class="Li">&quot;use charnames&quot;</span>, but they
        could be defined by a translator installed into
        <span class="Li">$^H{charnames}</span>. See &quot;CUSTOM ALIASES&quot;
        in charnames.</p>
  </li>
  <li>charnames alias definitions may not contain trailing white-space
    <p class="Pp">(F) You defined a character name which ended in a space
        character. Remove the trailing space(s). Usually these names are defined
        in the <span class="Li">&quot;:alias&quot;</span> import argument to
        <span class="Li">&quot;use charnames&quot;</span>, but they could be
        defined by a translator installed into
        <span class="Li">$^H{charnames}</span>. See &quot;CUSTOM ALIASES&quot;
        in charnames.</p>
  </li>
  <li>:const is not permitted on named subroutines
    <p class="Pp">(F) The <span class="Li">&quot;const&quot;</span> attribute
        causes an anonymous subroutine to be run and its value captured at the
        time that it is cloned. Named subroutines are not cloned like this, so
        the attribute does not make sense on them.</p>
  </li>
  <li>Hexadecimal float: internal error
    <p class="Pp">(F) Something went horribly bad in hexadecimal float
      handling.</p>
  </li>
  <li>Hexadecimal float: unsupported long double format
    <p class="Pp">(F) You have configured Perl to use long doubles but the
        internals of the long double format are unknown, therefore the
        hexadecimal float output is impossible.</p>
  </li>
  <li>Illegal suidscript
    <p class="Pp">(F) The script run under suidperl was somehow illegal.</p>
  </li>
  <li>In '(?...)', the '(' and '?' must be adjacent in regex; marked by
      &lt;--&#x00A0;HERE in m/%s/
    <p class="Pp">(F) The two-character sequence
        <span class="Li">&quot;(?&quot;</span> in this context in a regular
        expression pattern should be an indivisible token, with nothing
        intervening between the <span class="Li">&quot;(&quot;</span> and the
        <span class="Li">&quot;?&quot;</span>, but you separated them.</p>
  </li>
  <li>In '(*VERB...)', the '(' and '*' must be adjacent in regex; marked by
      &lt;--&#x00A0;HERE in m/%s/
    <p class="Pp">(F) The two-character sequence
        <span class="Li">&quot;(*&quot;</span> in this context in a regular
        expression pattern should be an indivisible token, with nothing
        intervening between the <span class="Li">&quot;(&quot;</span> and the
        <span class="Li">&quot;*&quot;</span>, but you separated them.</p>
  </li>
  <li>Invalid quantifier in {,} in regex; marked by &lt;-- HERE in m/%s/
    <p class="Pp">(F) The pattern looks like a {min,max} quantifier, but the min
        or max could not be parsed as a valid number: either it has leading
        zeroes, or it represents too big a number to cope with. The
        &lt;--&#x00A0;HERE shows where in the regular expression the problem was
        discovered. See perlre.</p>
  </li>
  <li>'%s' is an unknown bound type in regex
    <p class="Pp">(F) You used <span class="Li">&quot;\b{...}&quot;</span> or
        <span class="Li">&quot;\B{...}&quot;</span> and the
        <span class="Li">&quot;...&quot;</span> is not known to Perl. The
        current valid ones are given in &quot;\b{}, \b, \B{}, \B&quot; in
        perlrebackslash.</p>
  </li>
  <li>Missing or undefined argument to require
    <p class="Pp">(F) You tried to call
        <span class="Li">&quot;require&quot;</span> with no argument or with an
        undefined value as an argument.
        <span class="Li">&quot;require&quot;</span> expects either a package
        name or a file-specification as an argument. See &quot;require&quot; in
        perlfunc.</p>
    <p class="Pp">Formerly, <span class="Li">&quot;require&quot;</span> with no
        argument or <span class="Li">&quot;undef&quot;</span> warned about a
        Null filename.</p>
  </li>
</ul>
<p class="Pp"><i>New Warnings</i></p>
<ul class="Bl-bullet">
  <li>\C is deprecated in regex
    <p class="Pp">(D deprecated) The <span class="Li">&quot;/\C/&quot;</span>
        character class was deprecated in v5.20, and now emits a warning. It is
        intended that it will become an error in v5.24. This character class
        matches a single byte even if it appears within a multi-byte character,
        breaks encapsulation, and can corrupt UTF-8 strings.</p>
  </li>
  <li>&quot;%s&quot; is more clearly written simply as &quot;%s&quot; in regex;
      marked by &lt;-- HERE in m/%s/
    <p class="Pp">(W regexp) (only under
        <span class="Li">&quot;use&#x00A0;re&#x00A0;'strict'&quot;</span> or
        within <span class="Li">&quot;(?[...])&quot;</span>)</p>
    <p class="Pp">You specified a character that has the given plainer way of
        writing it, and which is also portable to platforms running with
        different character sets.</p>
  </li>
  <li>Argument &quot;%s&quot; treated as 0 in increment (++)
    <p class="Pp">(W numeric) The indicated string was fed as an argument to the
        <span class="Li">&quot;++&quot;</span> operator which expects either a
        number or a string matching
        <span class="Li">&quot;/^[a-zA-Z]*[0-9]*\z/&quot;</span>. See
        &quot;Auto-increment and Auto-decrement&quot; in perlop for details.</p>
  </li>
  <li>Both or neither range ends should be Unicode in regex; marked by &lt;--
      HERE in m/%s/
    <p class="Pp">(W regexp) (only under
        <span class="Li">&quot;use&#x00A0;re&#x00A0;'strict'&quot;</span> or
        within <span class="Li">&quot;(?[...])&quot;</span>)</p>
    <p class="Pp">In a bracketed character class in a regular expression
        pattern, you had a range which has exactly one end of it specified using
        <span class="Li">&quot;\N{}&quot;</span>, and the other end is specified
        using a non-portable mechanism. Perl treats the range as a Unicode
        range, that is, all the characters in it are considered to be the
        Unicode characters, and which may be different code points on some
        platforms Perl runs on. For example,
        <span class="Li">&quot;[\N{U+06}-\x08]&quot;</span> is treated as if you
        had instead said
        <span class="Li">&quot;[\N{U+06}-\N{U+08}]&quot;</span>, that is it
        matches the characters whose code points in Unicode are 6, 7, and 8. But
        that <span class="Li">&quot;\x08&quot;</span> might indicate that you
        meant something different, so the warning gets raised.</p>
  </li>
  <li>Can't do %s(&quot;%s&quot;) on non-UTF-8 locale; resolved to
      &quot;%s&quot;.
    <p class="Pp">(W locale) You are 1) running under
        &quot;<span class="Li">&quot;use locale&quot;</span>&quot;; 2) the
        current locale is not a UTF-8 one; 3) you tried to do the designated
        case-change operation on the specified Unicode character; and 4) the
        result of this operation would mix Unicode and locale rules, which
        likely conflict.</p>
    <p class="Pp">The warnings category
        <span class="Li">&quot;locale&quot;</span> is new.</p>
  </li>
  <li>:const is experimental
    <p class="Pp">(S experimental::const_attr) The
        <span class="Li">&quot;const&quot;</span> attribute is experimental. If
        you want to use the feature, disable the warning with
        <span class="Li">&quot;no warnings</span>
        <span class="Li">'experimental::const_attr'&quot;</span>, but know that
        in doing so you are taking the risk that your code may break in a future
        Perl version.</p>
  </li>
  <li>gmtime(%f) failed
    <p class="Pp">(W overflow) You called
        <span class="Li">&quot;gmtime&quot;</span> with a number that it could
        not handle: too large, too small, or NaN. The returned value is
        <span class="Li">&quot;undef&quot;</span>.</p>
  </li>
  <li>Hexadecimal float: exponent overflow
    <p class="Pp">(W overflow) The hexadecimal floating point has larger
        exponent than the floating point supports.</p>
  </li>
  <li>Hexadecimal float: exponent underflow
    <p class="Pp">(W overflow) The hexadecimal floating point has smaller
        exponent than the floating point supports.</p>
  </li>
  <li>Hexadecimal float: mantissa overflow
    <p class="Pp">(W overflow) The hexadecimal floating point literal had more
        bits in the mantissa (the part between the
        <span class="Li">&quot;0x&quot;</span> and the exponent, also known as
        the fraction or the significand) than the floating point supports.</p>
  </li>
  <li>Hexadecimal float: precision loss
    <p class="Pp">(W overflow) The hexadecimal floating point had internally
        more digits than could be output. This can be caused by unsupported long
        double formats, or by 64-bit integers not being available (needed to
        retrieve the digits under some configurations).</p>
  </li>
  <li>Locale '%s' may not work well.%s
    <p class="Pp">(W locale) You are using the named locale, which is a
        non-UTF-8 one, and which perl has determined is not fully compatible
        with what it can handle. The second <span class="Li">%s</span> gives a
        reason.</p>
    <p class="Pp">The warnings category
        <span class="Li">&quot;locale&quot;</span> is new.</p>
  </li>
  <li>localtime(%f) failed
    <p class="Pp">(W overflow) You called
        <span class="Li">&quot;localtime&quot;</span> with a number that it
        could not handle: too large, too small, or NaN. The returned value is
        <span class="Li">&quot;undef&quot;</span>.</p>
  </li>
  <li>Negative repeat count does nothing
    <p class="Pp">(W numeric) You tried to execute the
        <span class="Li">&quot;x&quot;</span> repetition operator fewer than 0
        times, which doesn't make sense.</p>
  </li>
  <li>NO-BREAK SPACE in a charnames alias definition is deprecated
    <p class="Pp">(D deprecated) You defined a character name which contained a
        no-break space character. Change it to a regular space. Usually these
        names are defined in the <span class="Li">&quot;:alias&quot;</span>
        import argument to <span class="Li">&quot;use charnames&quot;</span>,
        but they could be defined by a translator installed into
        <span class="Li">$^H{charnames}</span>. See &quot;CUSTOM ALIASES&quot;
        in charnames.</p>
  </li>
  <li>Non-finite repeat count does nothing
    <p class="Pp">(W numeric) You tried to execute the
        <span class="Li">&quot;x&quot;</span> repetition operator
        <span class="Li">&quot;Inf&quot;</span> (or
        <span class="Li">&quot;-Inf&quot;</span>) or NaN times, which doesn't
        make sense.</p>
  </li>
  <li>PerlIO layer ':win32' is experimental
    <p class="Pp">(S experimental::win32_perlio) The
        <span class="Li">&quot;:win32&quot;</span> PerlIO layer is experimental.
        If you want to take the risk of using this layer, simply disable this
        warning:</p>
    <p class="Pp"></p>
    <pre>    no warnings &quot;experimental::win32_perlio&quot;;
    </pre>
  </li>
  <li>Ranges of ASCII printables should be some subset of &quot;0-9&quot;,
      &quot;A-Z&quot;, or &quot;a-z&quot; in regex; marked by &lt;-- HERE in
      m/%s/
    <p class="Pp">(W regexp) (only under
        <span class="Li">&quot;use&#x00A0;re&#x00A0;'strict'&quot;</span> or
        within <span class="Li">&quot;(?[...])&quot;</span>)</p>
    <p class="Pp">Stricter rules help to find typos and other errors. Perhaps
        you didn't even intend a range here, if the
        <span class="Li">&quot;-&quot;</span> was meant to be some other
        character, or should have been escaped (like
        <span class="Li">&quot;\-&quot;</span>). If you did intend a range, the
        one that was used is not portable between ASCII and EBCDIC platforms,
        and doesn't have an obvious meaning to a casual reader.</p>
    <p class="Pp"></p>
    <pre> [3-7]    # OK; Obvious and portable
 [d-g]    # OK; Obvious and portable
 [A-Y]    # OK; Obvious and portable
 [A-z]    # WRONG; Not portable; not clear what is meant
 [a-Z]    # WRONG; Not portable; not clear what is meant
 [%-.]    # WRONG; Not portable; not clear what is meant
 [\x41-Z] # WRONG; Not portable; not obvious to non-geek
    </pre>
    <p class="Pp">(You can force portability by specifying a Unicode range,
        which means that the endpoints are specified by
        <span class="Li">&quot;\N{...}&quot;</span>, but the meaning may still
        not be obvious.) The stricter rules require that ranges that start or
        stop with an ASCII character that is not a control have all their
        endpoints be a literal character, and not some escape sequence (like
        <span class="Li">&quot;\x41&quot;</span>), and the ranges must be all
        digits, or all uppercase letters, or all lowercase letters.</p>
  </li>
  <li>Ranges of digits should be from the same group in regex; marked by &lt;--
      HERE in m/%s/
    <p class="Pp">(W regexp) (only under
        <span class="Li">&quot;use&#x00A0;re&#x00A0;'strict'&quot;</span> or
        within <span class="Li">&quot;(?[...])&quot;</span>)</p>
    <p class="Pp">Stricter rules help to find typos and other errors. You
        included a range, and at least one of the end points is a decimal digit.
        Under the stricter rules, when this happens, both end points should be
        digits in the same group of 10 consecutive digits.</p>
  </li>
  <li>Redundant argument in <span class="Li">%s</span>
    <p class="Pp">(W redundant) You called a function with more arguments than
        were needed, as indicated by information within other arguments you
        supplied (<i>e.g</i>. a printf format). Currently only emitted when a
        printf-type format required fewer arguments than were supplied, but
        might be used in the future for <i>e.g.</i> &quot;pack&quot; in
        perlfunc.</p>
    <p class="Pp">The warnings category
        <span class="Li">&quot;redundant&quot;</span> is new. See also [GH
        #13534] &lt;https://github.com/Perl/perl5/issues/13534&gt;.</p>
  </li>
  <li>Replacement list is longer than search list
    <p class="Pp">This is not a new diagnostic, but in earlier releases was
        accidentally not displayed if the transliteration contained wide
        characters. This is now fixed, so that you may see this diagnostic in
        places where you previously didn't (but should have).</p>
  </li>
  <li>Use of \b{} for non-UTF-8 locale is wrong. Assuming a UTF-8 locale
    <p class="Pp">(W locale) You are matching a regular expression using locale
        rules, and a Unicode boundary is being matched, but the locale is not a
        Unicode one. This doesn't make sense. Perl will continue, assuming a
        Unicode (UTF-8) locale, but the results could well be wrong except if
        the locale happens to be ISO-8859-1 (Latin1) where this message is
        spurious and can be ignored.</p>
    <p class="Pp">The warnings category
        <span class="Li">&quot;locale&quot;</span> is new.</p>
  </li>
  <li>Using /u for '%s' instead of /%s in regex; marked by &lt;-- HERE in m/%s/
    <p class="Pp">(W regexp) You used a Unicode boundary
        (<span class="Li">&quot;\b{...}&quot;</span> or
        <span class="Li">&quot;\B{...}&quot;</span>) in a portion of a regular
        expression where the character set modifiers
        <span class="Li">&quot;/a&quot;</span> or
        <span class="Li">&quot;/aa&quot;</span> are in effect. These two
        modifiers indicate an ASCII interpretation, and this doesn't make sense
        for a Unicode definition. The generated regular expression will compile
        so that the boundary uses all of Unicode. No other portion of the
        regular expression is affected.</p>
  </li>
  <li>The bitwise feature is experimental
    <p class="Pp">(S experimental::bitwise) This warning is emitted if you use
        bitwise operators (<span class="Li">&quot;&amp; | ^ ~ &amp;. |. ^.
        ~.&quot;</span>) with the &quot;bitwise&quot; feature enabled. Simply
        suppress the warning if you want to use the feature, but know that in
        doing so you are taking the risk of using an experimental feature which
        may change or be removed in a future Perl version:</p>
    <p class="Pp"></p>
    <pre>    no warnings &quot;experimental::bitwise&quot;;
    use feature &quot;bitwise&quot;;
    $x |.= $y;
    </pre>
  </li>
  <li>Unescaped left brace in regex is deprecated, passed through in regex;
      marked by &lt;-- HERE in m/%s/
    <p class="Pp">(D deprecated, regexp) You used a literal
        <span class="Li">&quot;{&quot;</span> character in a regular expression
        pattern. You should change to use <span class="Li">&quot;\{&quot;</span>
        instead, because a future version of Perl (tentatively v5.26) will
        consider this to be a syntax error. If the pattern delimiters are also
        braces, any matching right brace (<span class="Li">&quot;}&quot;</span>)
        should also be escaped to avoid confusing the parser, for example,</p>
    <p class="Pp"></p>
    <pre>    qr{abc\{def\}ghi}
    </pre>
  </li>
  <li>Use of literal non-graphic characters in variable names is deprecated
    <p class="Pp">(D deprecated) Using literal non-graphic (including control)
        characters in the source to refer to the <i>^FOO</i> variables, like
        <span class="Li">$^X</span> and
        <span class="Li">&quot;${^GLOBAL_PHASE}&quot;</span> is now
      deprecated.</p>
  </li>
  <li>Useless use of attribute &quot;const&quot;
    <p class="Pp">(W misc) The <span class="Li">&quot;const&quot;</span>
        attribute has no effect except on anonymous closure prototypes. You
        applied it to a subroutine via attributes.pm. This is only useful inside
        an attribute handler for an anonymous subroutine.</p>
  </li>
  <li>Useless use of /d modifier in transliteration operator
    <p class="Pp">This is not a new diagnostic, but in earlier releases was
        accidentally not displayed if the transliteration contained wide
        characters. This is now fixed, so that you may see this diagnostic in
        places where you previously didn't (but should have).</p>
  </li>
  <li>&quot;use re 'strict'&quot; is experimental
    <p class="Pp">(S experimental::re_strict) The things that are different when
        a regular expression pattern is compiled under
        <span class="Li">'strict'</span> are subject to change in future Perl
        releases in incompatible ways; there are also proposals to change how to
        enable strict checking instead of using this subpragma. This means that
        a pattern that compiles today may not in a future Perl release. This
        warning is to alert you to that risk.</p>
  </li>
  <li>Warning: unable to close filehandle properly: <span class="Li">%s</span>
    <p class="Pp">Warning: unable to close filehandle <span class="Li">%s</span>
        properly: <span class="Li">%s</span></p>
    <p class="Pp">(S io) Previously, perl silently ignored any errors when doing
        an implicit close of a filehandle, <i>i.e.</i> where the reference count
        of the filehandle reached zero and the user's code hadn't already called
        <span class="Li">&quot;close()&quot;</span>; <i>e.g.</i></p>
    <p class="Pp"></p>
    <pre>    {
        open my $fh, '&gt;', $file  or die &quot;open: '$file': $!\n&quot;;
        print $fh, $data  or die;
    } # implicit close here
    </pre>
    <p class="Pp">In a situation such as disk full, due to buffering, the error
        may only be detected during the final close, so not checking the result
        of the close is dangerous.</p>
    <p class="Pp">So perl now warns in such situations.</p>
  </li>
  <li>Wide character (U+%X) in <span class="Li">%s</span>
    <p class="Pp">(W locale) While in a single-byte locale (<i>i.e.</i>, a
        non-UTF-8 one), a multi-byte character was encountered. Perl considers
        this character to be the specified Unicode code point. Combining
        non-UTF-8 locales and Unicode is dangerous. Almost certainly some
        characters will have two different representations. For example, in the
        ISO 8859-7 (Greek) locale, the code point 0xC3 represents a Capital
        Gamma. But so also does 0x393. This will make string comparisons
        unreliable.</p>
    <p class="Pp">You likely need to figure out how this multi-byte character
        got mixed up with your single-byte locale (or perhaps you thought you
        had a UTF-8 locale, but Perl disagrees).</p>
    <p class="Pp">The warnings category
        <span class="Li">&quot;locale&quot;</span> is new.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Existing_Diagnostics"><a class="permalink" href="#Changes_to_Existing_Diagnostics">Changes
  to Existing Diagnostics</a></h2>
<ul class="Bl-bullet">
  <li>&lt;&gt; should be quotes
    <p class="Pp">This warning has been changed to &lt;&gt; at require-statement
        should be quotes to make the issue more identifiable.</p>
  </li>
  <li>Argument &quot;%s&quot; isn't numeric%s
    <p class="Pp">The perldiag entry for this warning has added this clarifying
        note:</p>
    <p class="Pp"></p>
    <pre> Note that for the Inf and NaN (infinity and not-a-number) the
 definition of &quot;numeric&quot; is somewhat unusual: the strings themselves
 (like &quot;Inf&quot;) are considered numeric, and anything following them is
 considered non-numeric.
    </pre>
  </li>
  <li>Global symbol &quot;%s&quot; requires explicit package name
    <p class="Pp">This message has had '(did you forget to declare &quot;my
        <span class="Li">%s</span>&quot;?)' appended to it, to make it more
        helpful to new Perl programmers. [GH #13732]
        &lt;https://github.com/Perl/perl5/issues/13732&gt;</p>
  </li>
  <li>'&quot;my&quot; variable &amp;foo::bar can't be in a package' has been
      reworded to say 'subroutine' instead of 'variable'.</li>
  <li>\N{} in character class restricted to one character in regex; marked by
      &lt;--&#x00A0;HERE in m/%s/
    <p class="Pp">This message has had <i>character class</i> changed to
        <i>inverted character</i> <i>class or as a range end-point is</i> to
        reflect improvements in <span class="Li">&quot;qr/[\N{named
        sequence}]/&quot;</span> (see under &quot;Selected Bug Fixes&quot;).</p>
  </li>
  <li>panic: frexp
    <p class="Pp">This message has had ': <span class="Li">%f</span>' appended
        to it, to show what the offending floating point number is.</p>
  </li>
  <li><i>Possible precedence problem on bitwise
      </i><span class="Li"><i>%c</i></span><i> operator</i> reworded as Possible
      precedence problem on bitwise <span class="Li">%s</span> operator.</li>
  <li>Unsuccessful <span class="Li">%s</span> on filename containing newline
    <p class="Pp">This warning is now only produced when the newline is at the
        end of the filename.</p>
  </li>
  <li>&quot;Variable <span class="Li">%s</span> will not stay shared&quot; has
      been changed to say &quot;Subroutine&quot; when it is actually a lexical
      sub that will not stay shared.</li>
  <li>Variable length lookbehind not implemented in regex m/%s/
    <p class="Pp">The perldiag entry for this warning has had information about
        Unicode behavior added.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Diagnostic_Removals"><a class="permalink" href="#Diagnostic_Removals">Diagnostic
  Removals</a></h2>
<ul class="Bl-bullet">
  <li>&quot;Ambiguous use of -foo resolved as -&amp;<b>foo()</b>&quot;
    <p class="Pp">There is actually no ambiguity here, and this impedes the use
        of negated constants; <i>e.g.</i>,
        <span class="Li">&quot;-Inf&quot;</span>.</p>
  </li>
  <li>&quot;Constant is not a FOO reference&quot;
    <p class="Pp">Compile-time checking of constant dereferencing (<i>e.g.</i>,
        <span class="Li">&quot;my_constant-&gt;()&quot;</span>) has been
        removed, since it was not taking overloading into account. [GH #9891]
        &lt;https://github.com/Perl/perl5/issues/9891&gt; [GH #14044]
        &lt;https://github.com/Perl/perl5/issues/14044&gt;</p>
  </li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Utility_Changes"><a class="permalink" href="#Utility_Changes">Utility
  Changes</a></h1>
<section class="Ss">
<h2 class="Ss"><i>find2perl</i>, <i>s2p</i> and <i>a2p</i> removal</h2>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The <i>x2p/</i> directory has been removed from the Perl core.
    <p class="Pp">This removes find2perl, s2p and a2p. They have all been
        released to CPAN as separate distributions
        (<span class="Li">&quot;App::find2perl&quot;</span>,
        <span class="Li">&quot;App::s2p&quot;</span>,
        <span class="Li">&quot;App::a2p&quot;</span>).</p>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="h2ph"><a class="permalink" href="#h2ph">h2ph</a></h2>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd><i>h2ph</i> now handles hexadecimal constants in the compiler's predefined
      macro definitions, as visible in
      <span class="Li">$Config{cppsymbols}</span>. [GH #14491]
      &lt;https://github.com/Perl/perl5/issues/14491&gt;.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="encguess"><a class="permalink" href="#encguess">encguess</a></h2>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>No longer depends on non-core modules.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Configuration_and_Compilation"><a class="permalink" href="#Configuration_and_Compilation">Configuration
  and Compilation</a></h1>
<ul class="Bl-bullet">
  <li><i>Configure</i> now checks for
      <span class="Li">&quot;lrintl()&quot;</span>,
      <span class="Li">&quot;lroundl()&quot;</span>,
      <span class="Li">&quot;llrintl()&quot;</span>, and
      <span class="Li">&quot;llroundl()&quot;</span>.</li>
  <li><i>Configure</i> with <span class="Li">&quot;-Dmksymlinks&quot;</span>
      should now be faster. [GH #13890]
      &lt;https://github.com/Perl/perl5/issues/13890&gt;.</li>
  <li>The <span class="Li">&quot;pthreads&quot;</span> and
      <span class="Li">&quot;cl&quot;</span> libraries will be linked by default
      if present. This allows XS modules that require threading to work on
      non-threaded perls. Note that you must still pass
      <span class="Li">&quot;-Dusethreads&quot;</span> if you want a threaded
      perl.</li>
  <li>To get more precision and range for floating point numbers one can now use
      the GCC quadmath library which implements the quadruple precision floating
      point numbers on x86 and IA-64 platforms. See <i>INSTALL</i> for
    details.</li>
  <li>MurmurHash64A and MurmurHash64B can now be configured as the internal hash
      function.</li>
  <li><span class="Li">&quot;make test.valgrind&quot;</span> now supports
      parallel testing.
    <p class="Pp">For example:</p>
    <p class="Pp"></p>
    <pre>    TEST_JOBS=9 make test.valgrind
    </pre>
    <p class="Pp">See &quot;valgrind&quot; in perlhacktips for more
      information.</p>
    <p class="Pp">[GH #13658]
      &lt;https://github.com/Perl/perl5/issues/13658&gt;</p>
  </li>
  <li>The MAD (Misc Attribute Decoration) build option has been removed
    <p class="Pp">This was an unmaintained attempt at preserving the Perl parse
        tree more faithfully so that automatic conversion of Perl 5 to Perl 6
        would have been easier.</p>
    <p class="Pp">This build-time configuration option had been unmaintained for
        years, and had probably seriously diverged on both Perl 5 and Perl 6
        sides.</p>
  </li>
  <li>A new compilation flag,
      <span class="Li">&quot;-DPERL_OP_PARENT&quot;</span> is available. For
      details, see the discussion below at &quot;Internal Changes&quot;.</li>
  <li>Pathtools no longer tries to load XS on miniperl. This speeds up building
      perl slightly.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Testing"><a class="permalink" href="#Testing">Testing</a></h1>
<ul class="Bl-bullet">
  <li><i>t/porting/re_context.t</i> has been added to test that utf8 and its
      dependencies only use the subset of the
      <span class="Li">&quot;$1..$n&quot;</span> capture vars that
      <span class="Li">&quot;Perl_save_re_context()&quot;</span> is hard-coded
      to localize, because that function has no efficient way of determining at
      runtime what vars to localize.</li>
  <li>Tests for performance issues have been added in the file
      <i>t/perf/taint.t</i>.</li>
  <li>Some regular expression tests are written in such a way that they will run
      very slowly if certain optimizations break. These tests have been moved
      into new files, <i>t/re/speed.t</i> and <i>t/re/speed_thr.t</i>, and are
      run with a <span class="Li">&quot;watchdog()&quot;</span>.</li>
  <li><span class="Li">&quot;test.pl&quot;</span> now allows
      <span class="Li">&quot;plan skip_all =&gt; $reason&quot;</span>, to make
      it more compatible with
    <span class="Li">&quot;Test::More&quot;</span>.</li>
  <li>A new test script, <i>op/infnan.t</i>, has been added to test if infinity
      and NaN are working correctly. See &quot;Infinity and NaN (not-a-number)
      handling improved&quot;.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Platform_Support"><a class="permalink" href="#Platform_Support">Platform
  Support</a></h1>
<section class="Ss">
<h2 class="Ss" id="Regained_Platforms"><a class="permalink" href="#Regained_Platforms">Regained
  Platforms</a></h2>
<dl class="Bl-tag">
  <dt id="IRIX"><a class="permalink" href="#IRIX">IRIX and Tru64 platforms are
    working again.</a></dt>
  <dd>Some <span class="Li">&quot;make test&quot;</span> failures remain: [GH
      #14557] &lt;https://github.com/Perl/perl5/issues/14557&gt; and [GH #14727]
      &lt;https://github.com/Perl/perl5/issues/14727&gt; for IRIX; [GH #14629]
      &lt;https://github.com/Perl/perl5/issues/14629&gt;, [cpan #99605]
      &lt;https://rt.cpan.org/Public/Bug/Display.html?id=99605&gt;, and [cpan
      #104836] &lt;https://rt.cpan.org/Ticket/Display.html?id=104836&gt; for
      Tru64.</dd>
  <dt id="z/OS"><a class="permalink" href="#z/OS">z/OS running EBCDIC Code Page
    1047</a></dt>
  <dd>Core perl now works on this EBCDIC platform. Earlier perls also worked,
      but, even though support wasn't officially withdrawn, recent perls would
      not compile and run well. Perl 5.20 would work, but had many bugs which
      have now been fixed. Many CPAN modules that ship with Perl still fail
      tests, including <span class="Li">&quot;Pod::Simple&quot;</span>. However
      the version of <span class="Li">&quot;Pod::Simple&quot;</span> currently
      on CPAN should work; it was fixed too late to include in Perl 5.22. Work
      is under way to fix many of the still-broken CPAN modules, which likely
      will be installed on CPAN when completed, so that you may not have to wait
      until Perl 5.24 to get a working version.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Discontinued_Platforms"><a class="permalink" href="#Discontinued_Platforms">Discontinued
  Platforms</a></h2>
<dl class="Bl-tag">
  <dt id="NeXTSTEP/OPENSTEP"><a class="permalink" href="#NeXTSTEP/OPENSTEP">NeXTSTEP/OPENSTEP</a></dt>
  <dd>NeXTSTEP was a proprietary operating system bundled with NeXT's
      workstations in the early to mid 90s; OPENSTEP was an API specification
      that provided a NeXTSTEP-like environment on a non-NeXTSTEP system. Both
      are now long dead, so support for building Perl on them has been
    removed.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Platform-Specific_Notes"><a class="permalink" href="#Platform-Specific_Notes">Platform-Specific
  Notes</a></h2>
<dl class="Bl-tag">
  <dt id="EBCDIC"><a class="permalink" href="#EBCDIC">EBCDIC</a></dt>
  <dd>Special handling is required of the perl interpreter on EBCDIC platforms
      to get <span class="Li">&quot;qr/[i-j]/&quot;</span> to match only
      <span class="Li">&quot;i&quot;</span> and
      <span class="Li">&quot;j&quot;</span>, since there are 7 characters
      between the code points for <span class="Li">&quot;i&quot;</span> and
      <span class="Li">&quot;j&quot;</span>. This special handling had only been
      invoked when both ends of the range are literals. Now it is also invoked
      if any of the <span class="Li">&quot;\N{...}&quot;</span> forms for
      specifying a character by name or Unicode code point is used instead of a
      literal. See &quot;Character Ranges&quot; in perlrecharclass.</dd>
  <dt id="HP-UX"><a class="permalink" href="#HP-UX">HP-UX</a></dt>
  <dd>The archname now distinguishes use64bitint from use64bitall.</dd>
  <dt id="Android"><a class="permalink" href="#Android">Android</a></dt>
  <dd>Build support has been improved for cross-compiling in general and for
      Android in particular.</dd>
  <dt id="VMS"><a class="permalink" href="#VMS">VMS</a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>When spawning a subprocess without waiting, the return value is now the
      correct PID.</li>
  <li>Fix a prototype so linking doesn't fail under the VMS C++ compiler.</li>
  <li><span class="Li">&quot;finite&quot;</span>,
      <span class="Li">&quot;finitel&quot;</span>, and
      <span class="Li">&quot;isfinite&quot;</span> detection has been added to
      <span class="Li">&quot;configure.com&quot;</span>, environment handling
      has had some minor changes, and a fix for legacy feature checking
    status.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt id="Win32"><a class="permalink" href="#Win32">Win32</a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li><i>miniperl.exe</i> is now built with
      <span class="Li">&quot;-fno-strict-aliasing&quot;</span>, allowing 64-bit
      builds to complete on GCC 4.8. [GH #14556]
      &lt;https://github.com/Perl/perl5/issues/14556&gt;</li>
  <li><span class="Li">&quot;nmake minitest&quot;</span> now works on Win32. Due
      to dependency issues you need to build <span class="Li">&quot;nmake
      test-prep&quot;</span> first, and a small number of the tests fail. [GH
      #14318] &lt;https://github.com/Perl/perl5/issues/14318&gt;</li>
  <li>Perl can now be built in C++ mode on Windows by setting the makefile macro
      <span class="Li">&quot;USE_CPLUSPLUS&quot;</span> to the value
      &quot;define&quot;.</li>
  <li>The list form of piped open has been implemented for Win32. Note: unlike
      <span class="Li">&quot;system LIST&quot;</span> this does not fall back to
      the shell. [GH #13574]
    &lt;https://github.com/Perl/perl5/issues/13574&gt;</li>
  <li>New <span class="Li">&quot;DebugSymbols&quot;</span> and
      <span class="Li">&quot;DebugFull&quot;</span> configuration options added
      to Windows makefiles.</li>
  <li>Previously, compiling XS modules (including CPAN ones) using Visual C++
      for Win64 resulted in around a dozen warnings per file from
      <i>hv_func.h</i>. These warnings have been silenced.</li>
  <li>Support for building without PerlIO has been removed from the Windows
      makefiles. Non-PerlIO builds were all but deprecated in Perl 5.18.0 and
      are already not supported by <i>Configure</i> on POSIX systems.</li>
  <li>Between 2 and 6 milliseconds and seven I/O calls have been saved per
      attempt to open a perl module for each path in
      <span class="Li">@INC</span>.</li>
  <li>Intel C builds are now always built with C99 mode on.</li>
  <li><span class="Li">%I64d</span> is now being used instead of
      <span class="Li">%lld</span> for MinGW.</li>
  <li>In the experimental <span class="Li">&quot;:win32&quot;</span> layer, a
      crash in <span class="Li">&quot;open&quot;</span> was fixed. Also opening
      <i>/dev/null</i> (which works under Win32 Perl's default
      <span class="Li">&quot;:unix&quot;</span> layer) was implemented for
      <span class="Li">&quot;:win32&quot;</span>. [GH #13968]
      &lt;https://github.com/Perl/perl5/issues/13968&gt;</li>
  <li>A new makefile option,
      <span class="Li">&quot;USE_LONG_DOUBLE&quot;</span>, has been added to the
      Windows dmake makefile for gcc builds only. Set this to &quot;define&quot;
      if you want perl to use long doubles to give more accuracy and range for
      floating point numbers.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt id="OpenBSD"><a class="permalink" href="#OpenBSD">OpenBSD</a></dt>
  <dd>On OpenBSD, Perl will now default to using the system
      <span class="Li">&quot;malloc&quot;</span> due to the security features it
      provides. Perl's own malloc wrapper has been in use since v5.14 due to
      performance reasons, but the OpenBSD project believes the tradeoff is
      worth it and would prefer that users who need the speed specifically ask
      for it.
    <p class="Pp">[GH #13888]
        &lt;https://github.com/Perl/perl5/issues/13888&gt;.</p>
  </dd>
  <dt id="Solaris"><a class="permalink" href="#Solaris">Solaris</a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>We now look for the Sun Studio compiler in both <i>/opt/solstudio*</i> and
      <i>/opt/solarisstudio*</i>.</li>
  <li>Builds on Solaris 10 with <span class="Li">&quot;-Dusedtrace&quot;</span>
      would fail early since make didn't follow implied dependencies to build
      <span class="Li">&quot;perldtrace.h&quot;</span>. Added an explicit
      dependency to <span class="Li">&quot;depend&quot;</span>. [GH #13334]
      &lt;https://github.com/Perl/perl5/issues/13334&gt;</li>
  <li>C99 options have been cleaned up; hints look for
      <span class="Li">&quot;solstudio&quot;</span> as well as
      <span class="Li">&quot;SUNWspro&quot;</span>; and support for native
      <span class="Li">&quot;setenv&quot;</span> has been added.</li>
</ul>
</div>
<div class="Bd-indent"></div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Internal_Changes"><a class="permalink" href="#Internal_Changes">Internal
  Changes</a></h1>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Experimental support has been added to allow ops in the optree to locate
      their parent, if any. This is enabled by the non-default build option
      <span class="Li">&quot;-DPERL_OP_PARENT&quot;</span>. It is envisaged that
      this will eventually become enabled by default, so XS code which directly
      accesses the <span class="Li">&quot;op_sibling&quot;</span> field of ops
      should be updated to be future-proofed.
    <p class="Pp">On <span class="Li">&quot;PERL_OP_PARENT&quot;</span> builds,
        the <span class="Li">&quot;op_sibling&quot;</span> field has been
        renamed <span class="Li">&quot;op_sibparent&quot;</span> and a new flag,
        <span class="Li">&quot;op_moresib&quot;</span>, added. On the last op in
        a sibling chain, <span class="Li">&quot;op_moresib&quot;</span> is false
        and <span class="Li">&quot;op_sibparent&quot;</span> points to the
        parent (if any) rather than being
        <span class="Li">&quot;NULL&quot;</span>.</p>
    <p class="Pp">To make existing code work transparently whether using
        <span class="Li">&quot;PERL_OP_PARENT&quot;</span> or not, a number of
        new macros and functions have been added that should be used, rather
        than directly manipulating
        <span class="Li">&quot;op_sibling&quot;</span>.</p>
    <p class="Pp">For the case of just reading
        <span class="Li">&quot;op_sibling&quot;</span> to determine the next
        sibling, two new macros have been added. A simple scan through a sibling
        chain like this:</p>
    <p class="Pp"></p>
    <pre>    for (; kid-&gt;op_sibling; kid = kid-&gt;op_sibling) { ... }
    </pre>
    <p class="Pp">should now be written as:</p>
    <p class="Pp"></p>
    <pre>    for (; OpHAS_SIBLING(kid); kid = OpSIBLING(kid)) { ... }
    </pre>
    <p class="Pp">For altering optrees, a general-purpose function
        <span class="Li">&quot;op_sibling_splice()&quot;</span> has been added,
        which allows for manipulation of a chain of sibling ops. By analogy with
        the Perl function <span class="Li">&quot;splice()&quot;</span>, it
        allows you to cut out zero or more ops from a sibling chain and replace
        them with zero or more new ops. It transparently handles all the
        updating of sibling, parent, op_last pointers etc.</p>
    <p class="Pp">If you need to manipulate ops at a lower level, then three new
        macros, <span class="Li">&quot;OpMORESIB_set&quot;</span>,
        <span class="Li">&quot;OpLASTSIB_set&quot;</span> and
        <span class="Li">&quot;OpMAYBESIB_set&quot;</span> are intended to be a
        low-level portable way to set
        <span class="Li">&quot;op_sibling&quot;</span> /
        <span class="Li">&quot;op_sibparent&quot;</span> while also updating
        <span class="Li">&quot;op_moresib&quot;</span>. The first sets the
        sibling pointer to a new sibling, the second makes the op the last
        sibling, and the third conditionally does the first or second action.
        Note that unlike <span class="Li">&quot;op_sibling_splice()&quot;</span>
        these macros won't maintain consistency in the parent at the same time
        (<i>e.g.</i> by updating <span class="Li">&quot;op_first&quot;</span>
        and <span class="Li">&quot;op_last&quot;</span> where appropriate).</p>
    <p class="Pp">A C-level <span class="Li">&quot;Perl_op_parent()&quot;</span>
        function and a Perl-level
        <span class="Li">&quot;B::OP::parent()&quot;</span> method have been
        added. The C function only exists under
        <span class="Li">&quot;PERL_OP_PARENT&quot;</span> builds (using it is
        build-time error on vanilla perls).
        <span class="Li">&quot;B::OP::parent()&quot;</span> exists always, but
        on a vanilla build it always returns
        <span class="Li">&quot;NULL&quot;</span>. Under
        <span class="Li">&quot;PERL_OP_PARENT&quot;</span>, they return the
        parent of the current op, if any. The variable
        <span class="Li">$B::OP::does_parent</span> allows you to determine
        whether <span class="Li">&quot;B&quot;</span> supports retrieving an
        op's parent.</p>
    <p class="Pp"><span class="Li">&quot;PERL_OP_PARENT&quot;</span> was
        introduced in 5.21.2, but the interface was changed considerably in
        5.21.11. If you updated your code before the 5.21.11 changes, it may
        require further revision. The main changes after 5.21.2 were:</p>
  </dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>The <span class="Li">&quot;OP_SIBLING&quot;</span> and
      <span class="Li">&quot;OP_HAS_SIBLING&quot;</span> macros have been
      renamed <span class="Li">&quot;OpSIBLING&quot;</span> and
      <span class="Li">&quot;OpHAS_SIBLING&quot;</span> for consistency with
      other op-manipulating macros.</li>
  <li>The <span class="Li">&quot;op_lastsib&quot;</span> field has been renamed
      <span class="Li">&quot;op_moresib&quot;</span>, and its meaning
    inverted.</li>
  <li>The macro <span class="Li">&quot;OpSIBLING_set&quot;</span> has been
      removed, and has been superseded by
      <span class="Li">&quot;OpMORESIB_set&quot;</span> <i>et al</i>.</li>
  <li>The <span class="Li">&quot;op_sibling_splice()&quot;</span> function now
      accepts a null <span class="Li">&quot;parent&quot;</span> argument where
      the splicing doesn't affect the first or last ops in the sibling
    chain</li>
</ul>
</div>
<div class="Bd-indent"></div>
<ul class="Bl-bullet">
  <li>Macros have been created to allow XS code to better manipulate the POSIX
      locale category <span class="Li">&quot;LC_NUMERIC&quot;</span>. See
      &quot;Locale-related functions and macros&quot; in perlapi.</li>
  <li>The previous <span class="Li">&quot;atoi&quot;</span> <i>et al</i>
      replacement function, <span class="Li">&quot;grok_atou&quot;</span>, has
      now been superseded by <span class="Li">&quot;grok_atoUV&quot;</span>. See
      perlclib for details.</li>
  <li>A new function,
      <span class="Li">&quot;Perl_sv_get_backrefs()&quot;</span>, has been added
      which allows you retrieve the weak references, if any, which point at an
      SV.</li>
  <li>The <span class="Li">&quot;screaminstr()&quot;</span> function has been
      removed. Although marked as public API, it was undocumented and had no
      usage in CPAN modules. Calling it has been fatal since 5.17.0.</li>
  <li>The <span class="Li">&quot;newDEFSVOP()&quot;</span>,
      <span class="Li">&quot;block_start()&quot;</span>,
      <span class="Li">&quot;block_end()&quot;</span> and
      <span class="Li">&quot;intro_my()&quot;</span> functions have been added
      to the API.</li>
  <li>The internal <span class="Li">&quot;convert&quot;</span> function in
      <i>op.c</i> has been renamed
      <span class="Li">&quot;op_convert_list&quot;</span> and added to the
    API.</li>
  <li>The <span class="Li">&quot;sv_magic()&quot;</span> function no longer
      forbids &quot;ext&quot; magic on read-only values. After all, perl can't
      know whether the custom magic will modify the SV or not. [GH #14202]
      &lt;https://github.com/Perl/perl5/issues/14202&gt;.</li>
  <li>Accessing &quot;CvPADLIST&quot; in perlapi on an XSUB is now forbidden.
    <p class="Pp">The <span class="Li">&quot;CvPADLIST&quot;</span> field has
        been reused for a different internal purpose for XSUBs. So in
        particular, you can no longer rely on it being NULL as a test of whether
        a CV is an XSUB. Use <span class="Li">&quot;CvISXSUB()&quot;</span>
        instead.</p>
  </li>
  <li>SVs of type <span class="Li">&quot;SVt_NV&quot;</span> are now sometimes
      bodiless when the build configuration and platform allow it: specifically,
      when <span class="Li">&quot;sizeof(NV) &lt;=</span>
      <span class="Li">sizeof(IV)&quot;</span>. &quot;Bodiless&quot; means that
      the NV value is stored directly in the head of an SV, without requiring a
      separate body to be allocated. This trick has already been used for IVs
      since 5.9.2 (though in the case of IVs, it is always used, regardless of
      platform and build configuration).</li>
  <li>The <span class="Li">$DB::single</span>,
      <span class="Li">$DB::signal</span> and <span class="Li">$DB::trace</span>
      variables now have set- and get-magic that stores their values as IVs, and
      those IVs are used when testing their values in
      <span class="Li">&quot;pp_dbstate()&quot;</span>. This prevents perl from
      recursing infinitely if an overloaded object is assigned to any of those
      variables. [GH #14013]
    &lt;https://github.com/Perl/perl5/issues/14013&gt;.</li>
  <li><span class="Li">&quot;Perl_tmps_grow()&quot;</span>, which is marked as
      public API but is undocumented, has been removed from the public API. This
      change does not affect XS code that uses the
      <span class="Li">&quot;EXTEND_MORTAL&quot;</span> macro to pre-extend the
      mortal stack.</li>
  <li>Perl's internals no longer sets or uses the
      <span class="Li">&quot;SVs_PADMY&quot;</span> flag.
      <span class="Li">&quot;SvPADMY()&quot;</span> now returns a true value for
      anything not marked <span class="Li">&quot;PADTMP&quot;</span> and
      <span class="Li">&quot;SVs_PADMY&quot;</span> is now defined as 0.</li>
  <li>The macros <span class="Li">&quot;SETsv&quot;</span> and
      <span class="Li">&quot;SETsvUN&quot;</span> have been removed. They were
      no longer used in the core since commit 6f1401dc2a five years ago, and
      have not been found present on CPAN.</li>
  <li>The <span class="Li">&quot;SvFAKE&quot;</span> bit (unused on HVs) got
      informally reserved by David Mitchell for future work on vtables.</li>
  <li>The <span class="Li">&quot;sv_catpvn_flags()&quot;</span> function accepts
      <span class="Li">&quot;SV_CATBYTES&quot;</span> and
      <span class="Li">&quot;SV_CATUTF8&quot;</span> flags, which specify
      whether the appended string is bytes or UTF-8, respectively. (These flags
      have in fact been present since 5.16.0, but were formerly not regarded as
      part of the API.)</li>
  <li>A new opcode class, <span class="Li">&quot;METHOP&quot;</span>, has been
      introduced. It holds information used at runtime to improve the
      performance of class/object method calls.
    <p class="Pp"><span class="Li">&quot;OP_METHOD&quot;</span> and
        <span class="Li">&quot;OP_METHOD_NAMED&quot;</span> have changed from
        being <span class="Li">&quot;UNOP/SVOP&quot;</span> to being
        <span class="Li">&quot;METHOP&quot;</span>.</p>
  </li>
  <li><span class="Li">&quot;cv_name()&quot;</span> is a new API function that
      can be passed a CV or GV. It returns an SV containing the name of the
      subroutine, for use in diagnostics.
    <p class="Pp">[GH #12767] &lt;https://github.com/Perl/perl5/issues/12767&gt;
        [GH #13392] &lt;https://github.com/Perl/perl5/issues/13392&gt;</p>
  </li>
  <li><span class="Li">&quot;cv_set_call_checker_flags()&quot;</span> is a new
      API function that works like
      <span class="Li">&quot;cv_set_call_checker()&quot;</span>, except that it
      allows the caller to specify whether the call checker requires a full GV
      for reporting the subroutine's name, or whether it could be passed a CV
      instead. Whatever value is passed will be acceptable to
      <span class="Li">&quot;cv_name()&quot;</span>.
      <span class="Li">&quot;cv_set_call_checker()&quot;</span> guarantees there
      will be a GV, but it may have to create one on the fly, which is
      inefficient. [GH #12767]
      &lt;https://github.com/Perl/perl5/issues/12767&gt;</li>
  <li><span class="Li">&quot;CvGV&quot;</span> (which is not part of the API) is
      now a more complex macro, which may call a function and reify a GV. For
      those cases where it has been used as a boolean,
      <span class="Li">&quot;CvHASGV&quot;</span> has been added, which will
      return true for CVs that notionally have GVs, but without reifying the GV.
      <span class="Li">&quot;CvGV&quot;</span> also returns a GV now for lexical
      subs. [GH #13392] &lt;https://github.com/Perl/perl5/issues/13392&gt;</li>
  <li>The &quot;sync_locale&quot; in perlapi function has been added to the
      public API. Changing the program's locale should be avoided by XS code.
      Nevertheless, certain non-Perl libraries called from XS need to do so,
      such as <span class="Li">&quot;Gtk&quot;</span>. When this happens, Perl
      needs to be told that the locale has changed. Use this function to do so,
      before returning to Perl.</li>
  <li>The defines and labels for the flags in the
      <span class="Li">&quot;op_private&quot;</span> field of OPs are now
      auto-generated from data in <i>regen/op_private</i>. The noticeable effect
      of this is that some of the flag output of
      <span class="Li">&quot;Concise&quot;</span> might differ slightly, and the
      flag output of <span class="Li">&quot;perl&#x00A0;-Dx&quot;</span> may
      differ considerably (they both use the same set of labels now). Also,
      debugging builds now have a new assertion in
      <span class="Li">&quot;op_free()&quot;</span> to ensure that the op
      doesn't have any unrecognized flags set in
      <span class="Li">&quot;op_private&quot;</span>.</li>
  <li>The deprecated variable <span class="Li">&quot;PL_sv_objcount&quot;</span>
      has been removed.</li>
  <li>Perl now tries to keep the locale category
      <span class="Li">&quot;LC_NUMERIC&quot;</span> set to &quot;C&quot; except
      around operations that need it to be set to the program's underlying
      locale. This protects the many XS modules that cannot cope with the
      decimal radix character not being a dot. Prior to this release, Perl
      initialized this category to &quot;C&quot;, but a call to
      <span class="Li">&quot;POSIX::setlocale()&quot;</span> would change it.
      Now such a call will change the underlying locale of the
      <span class="Li">&quot;LC_NUMERIC&quot;</span> category for the program,
      but the locale exposed to XS code will remain &quot;C&quot;. There are new
      macros to manipulate the LC_NUMERIC locale, including
      <span class="Li">&quot;STORE_LC_NUMERIC_SET_TO_NEEDED&quot;</span> and
      <span class="Li">&quot;STORE_LC_NUMERIC_FORCE_TO_UNDERLYING&quot;</span>.
      See &quot;Locale-related functions and macros&quot; in perlapi.</li>
  <li>A new macro <span class="Li">&quot;isUTF8_CHAR&quot;</span> has been
      written which efficiently determines if the string given by its parameters
      begins with a well-formed UTF-8 encoded character.</li>
  <li>The following private API functions had their context parameter removed:
      <span class="Li">&quot;Perl_cast_ulong&quot;</span>,
      <span class="Li">&quot;Perl_cast_i32&quot;</span>,
      <span class="Li">&quot;Perl_cast_iv&quot;</span>,
      <span class="Li">&quot;Perl_cast_uv&quot;</span>,
      <span class="Li">&quot;Perl_cv_const_sv&quot;</span>,
      <span class="Li">&quot;Perl_mg_find&quot;</span>,
      <span class="Li">&quot;Perl_mg_findext&quot;</span>,
      <span class="Li">&quot;Perl_mg_magical&quot;</span>,
      <span class="Li">&quot;Perl_mini_mktime&quot;</span>,
      <span class="Li">&quot;Perl_my_dirfd&quot;</span>,
      <span class="Li">&quot;Perl_sv_backoff&quot;</span>,
      <span class="Li">&quot;Perl_utf8_hop&quot;</span>.
    <p class="Pp">Note that the prefix-less versions of those functions that are
        part of the public API, such as
        <span class="Li">&quot;cast_i32()&quot;</span>, remain unaffected.</p>
  </li>
  <li>The <span class="Li">&quot;PADNAME&quot;</span> and
      <span class="Li">&quot;PADNAMELIST&quot;</span> types are now separate
      types, and no longer simply aliases for SV and AV. [GH #14250]
      &lt;https://github.com/Perl/perl5/issues/14250&gt;.</li>
  <li>Pad names are now always UTF-8. The
      <span class="Li">&quot;PadnameUTF8&quot;</span> macro always returns true.
      Previously, this was effectively the case already, but any support for two
      different internal representations of pad names has now been removed.</li>
  <li>A new op class, <span class="Li">&quot;UNOP_AUX&quot;</span>, has been
      added. This is a subclass of <span class="Li">&quot;UNOP&quot;</span> with
      an <span class="Li">&quot;op_aux&quot;</span> field added, which points to
      an array of unions of UV, SV* etc. It is intended for where an op needs to
      store more data than a simple <span class="Li">&quot;op_sv&quot;</span> or
      whatever. Currently the only op of this type is
      <span class="Li">&quot;OP_MULTIDEREF&quot;</span> (see next item).</li>
  <li>A new op has been added,
      <span class="Li">&quot;OP_MULTIDEREF&quot;</span>, which performs one or
      more nested array and hash lookups where the key is a constant or simple
      variable. For example the expression
      <span class="Li">$a[0]{$k}[$i]</span>, which previously involved ten
      <span class="Li">&quot;rv2Xv&quot;</span>,
      <span class="Li">&quot;Xelem&quot;</span>,
      <span class="Li">&quot;gvsv&quot;</span> and
      <span class="Li">&quot;const&quot;</span> ops is now performed by a single
      <span class="Li">&quot;multideref&quot;</span> op. It can also handle
      <span class="Li">&quot;local&quot;</span>,
      <span class="Li">&quot;exists&quot;</span> and
      <span class="Li">&quot;delete&quot;</span>. A non-simple index expression,
      such as <span class="Li">&quot;[$i+1]&quot;</span> is still done using
      <span class="Li">&quot;aelem&quot;</span>/<span class="Li">&quot;helem&quot;</span>,
      and single-level array lookup with a small constant index is still done
      using <span class="Li">&quot;aelemfast&quot;</span>.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Selected_Bug_Fixes"><a class="permalink" href="#Selected_Bug_Fixes">Selected
  Bug Fixes</a></h1>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;close&quot;</span> now sets
      <span class="Li">$!</span>
    <p class="Pp">When an I/O error occurs, the fact that there has been an
        error is recorded in the handle.
        <span class="Li">&quot;close&quot;</span> returns false for such a
        handle. Previously, the value of <span class="Li">$!</span> would be
        untouched by <span class="Li">&quot;close&quot;</span>, so the common
        convention of writing
        <span class="Li">&quot;close&#x00A0;$fh&#x00A0;or&#x00A0;die&#x00A0;$!&quot;</span>
        did not work reliably. Now the handle records the value of
        <span class="Li">$!</span>, too, and
        <span class="Li">&quot;close&quot;</span> restores it.</p>
  </li>
  <li><span class="Li">&quot;no re&quot;</span> now can turn off everything that
      <span class="Li">&quot;use re&quot;</span> enables
    <p class="Pp">Previously, running <span class="Li">&quot;no re&quot;</span>
        would turn off only a few things. Now it can turn off all the enabled
        things. For example, the only way to stop debugging, once enabled, was
        to exit the enclosing block; that is now fixed.</p>
  </li>
  <li><span class="Li">&quot;pack(&quot;D&quot;, $x)&quot;</span> and
      <span class="Li">&quot;pack(&quot;F&quot;, $x)&quot;</span> now zero the
      padding on x86 long double builds. Under some build options on GCC 4.8 and
      later, they used to either overwrite the zero-initialized padding, or
      bypass the initialized buffer entirely. This caused <i>op/pack.t</i> to
      fail. [GH #14554] &lt;https://github.com/Perl/perl5/issues/14554&gt;</li>
  <li>Extending an array cloned from a parent thread could result in
      &quot;Modification of a read-only value attempted&quot; errors when
      attempting to modify the new elements. [GH #14605]
      &lt;https://github.com/Perl/perl5/issues/14605&gt;</li>
  <li>An assertion failure and subsequent crash with
      <span class="Li">&quot;*x=&lt;y&gt;&quot;</span> has been fixed. [GH
      #14493] &lt;https://github.com/Perl/perl5/issues/14493&gt;</li>
  <li>A possible crashing/looping bug related to compiling lexical subs has been
      fixed. [GH #14596] &lt;https://github.com/Perl/perl5/issues/14596&gt;</li>
  <li>UTF-8 now works correctly in function names, in unquoted HERE-document
      terminators, and in variable names used as array indexes. [GH #14601]
      &lt;https://github.com/Perl/perl5/issues/14601&gt;</li>
  <li>Repeated global pattern matches in scalar context on large tainted strings
      were exponentially slow depending on the current match position in the
      string. [GH #14238]
    &lt;https://github.com/Perl/perl5/issues/14238&gt;</li>
  <li>Various crashes due to the parser getting confused by syntax errors have
      been fixed. [GH #14496] &lt;https://github.com/Perl/perl5/issues/14496&gt;
      [GH #14497] &lt;https://github.com/Perl/perl5/issues/14497&gt; [GH #14548]
      &lt;https://github.com/Perl/perl5/issues/14548&gt; [GH #14564]
      &lt;https://github.com/Perl/perl5/issues/14564&gt;</li>
  <li><span class="Li">&quot;split&quot;</span> in the scope of lexical
      <span class="Li">$_</span> has been fixed not to fail assertions. [GH
      #14483] &lt;https://github.com/Perl/perl5/issues/14483&gt;</li>
  <li><span class="Li">&quot;my $x : attr&quot;</span> syntax inside various
      list operators no longer fails assertions. [GH #14500]
      &lt;https://github.com/Perl/perl5/issues/14500&gt;</li>
  <li>An <span class="Li">&quot;@&quot;</span> sign in quotes followed by a
      non-ASCII digit (which is not a valid identifier) would cause the parser
      to crash, instead of simply trying the
      <span class="Li">&quot;@&quot;</span> as literal. This has been fixed. [GH
      #14553] &lt;https://github.com/Perl/perl5/issues/14553&gt;</li>
  <li><span class="Li">&quot;*bar::=*foo::=*glob_with_hash&quot;</span> has been
      crashing since Perl 5.14, but no longer does. [GH #14512]
      &lt;https://github.com/Perl/perl5/issues/14512&gt;</li>
  <li><span class="Li">&quot;foreach&quot;</span> in scalar context was not
      pushing an item on to the stack, resulting in bugs.
      (<span class="Li">&quot;print&#x00A0;4,&#x00A0;scalar&#x00A0;do&#x00A0;{&#x00A0;foreach(@x){}&#x00A0;}&#x00A0;+&#x00A0;1&quot;</span>
      would print 5.) It has been fixed to return
      <span class="Li">&quot;undef&quot;</span>. [GH #14569]
      &lt;https://github.com/Perl/perl5/issues/14569&gt;</li>
  <li>Several cases of data used to store environment variable contents in core
      C code being potentially overwritten before being used have been fixed.
      [GH #14476] &lt;https://github.com/Perl/perl5/issues/14476&gt;</li>
  <li>Some patterns starting with <span class="Li">&quot;/.*..../&quot;</span>
      matched against long strings have been slow since v5.8, and some of the
      form <span class="Li">&quot;/.*..../i&quot;</span> have been slow since
      v5.18. They are now all fast again. [GH #14475]
      &lt;https://github.com/Perl/perl5/issues/14475&gt;.</li>
  <li>The original visible value of <span class="Li">$/</span> is now preserved
      when it is set to an invalid value. Previously if you set
      <span class="Li">$/</span> to a reference to an array, for example, perl
      would produce a runtime error and not set
      <span class="Li">&quot;PL_rs&quot;</span>, but Perl code that checked
      <span class="Li">$/</span> would see the array reference. [GH #14245]
      &lt;https://github.com/Perl/perl5/issues/14245&gt;.</li>
  <li>In a regular expression pattern, a POSIX class, like
      <span class="Li">&quot;[:ascii:]&quot;</span>, must be inside a bracketed
      character class, like <span class="Li">&quot;qr/[[:ascii:]]/&quot;</span>.
      A warning is issued when something looking like a POSIX class is not
      inside a bracketed class. That warning wasn't getting generated when the
      POSIX class was negated: <span class="Li">&quot;[:^ascii:]&quot;</span>.
      This is now fixed.</li>
  <li>Perl 5.14.0 introduced a bug whereby
      <span class="Li">&quot;eval&#x00A0;{&#x00A0;LABEL:&#x00A0;}&quot;</span>
      would crash. This has been fixed. [GH #14438]
      &lt;https://github.com/Perl/perl5/issues/14438&gt;.</li>
  <li>Various crashes due to the parser getting confused by syntax errors have
      been fixed. [GH #14421]
      &lt;https://github.com/Perl/perl5/issues/14421&gt;. [GH #14472]
      &lt;https://github.com/Perl/perl5/issues/14472&gt;. [GH #14480]
      &lt;https://github.com/Perl/perl5/issues/14480&gt;. [GH #14447]
      &lt;https://github.com/Perl/perl5/issues/14447&gt;.</li>
  <li>Code like <span class="Li">&quot;/$a[/&quot;</span> used to read the next
      line of input and treat it as though it came immediately after the opening
      bracket. Some invalid code consequently would parse and run, but some code
      caused crashes, so this is now disallowed. [GH #14462]
      &lt;https://github.com/Perl/perl5/issues/14462&gt;.</li>
  <li>Fix argument underflow for <span class="Li">&quot;pack&quot;</span>. [GH
      #14525] &lt;https://github.com/Perl/perl5/issues/14525&gt;.</li>
  <li>Fix handling of non-strict <span class="Li">&quot;\x{}&quot;</span>. Now
      <span class="Li">&quot;\x{}&quot;</span> is equivalent to
      <span class="Li">&quot;\x{0}&quot;</span> instead of faulting.</li>
  <li><span class="Li">&quot;stat -t&quot;</span> is now no longer treated as
      stackable, just like <span class="Li">&quot;-t stat&quot;</span>. [GH
      #14499] &lt;https://github.com/Perl/perl5/issues/14499&gt;.</li>
  <li>The following no longer causes a SEGV:
      <span class="Li">&quot;qr{x+(y(?0))*}&quot;</span>.</li>
  <li>Fixed infinite loop in parsing backrefs in regexp patterns.</li>
  <li>Several minor bug fixes in behavior of Infinity and NaN, including
      warnings when stringifying Infinity-like or NaN-like strings. For example,
      &quot;NaNcy&quot; doesn't numify to NaN anymore.</li>
  <li>A bug in regular expression patterns that could lead to segfaults and
      other crashes has been fixed. This occurred only in patterns compiled with
      <span class="Li">&quot;/i&quot;</span> while taking into account the
      current POSIX locale (which usually means they have to be compiled within
      the scope of <span class="Li">&quot;use&#x00A0;locale&quot;</span>), and
      there must be a string of at least 128 consecutive bytes to match. [GH
      #14389] &lt;https://github.com/Perl/perl5/issues/14389&gt;.</li>
  <li><span class="Li">&quot;s///g&quot;</span> now works on very long strings
      (where there are more than 2 billion iterations) instead of dying with
      'Substitution loop'. [GH #11742]
      &lt;https://github.com/Perl/perl5/issues/11742&gt;. [GH #14190]
      &lt;https://github.com/Perl/perl5/issues/14190&gt;.</li>
  <li><span class="Li">&quot;gmtime&quot;</span> no longer crashes with
      not-a-number values. [GH #14365]
      &lt;https://github.com/Perl/perl5/issues/14365&gt;.</li>
  <li><span class="Li">&quot;\()&quot;</span> (a reference to an empty list),
      and <span class="Li">&quot;y///&quot;</span> with lexical
      <span class="Li">$_</span> in scope, could both do a bad write past the
      end of the stack. They have both been fixed to extend the stack
    first.</li>
  <li><span class="Li">&quot;prototype()&quot;</span> with no arguments used to
      read the previous item on the stack, so
      <span class="Li">&quot;print&#x00A0;&quot;foo&quot;,&#x00A0;prototype()&quot;</span>
      would print foo's prototype. It has been fixed to infer
      <span class="Li">$_</span> instead. [GH #14376]
      &lt;https://github.com/Perl/perl5/issues/14376&gt;.</li>
  <li>Some cases of lexical state subs declared inside predeclared subs could
      crash, for example when evalling a string including the name of an outer
      variable, but no longer do.</li>
  <li>Some cases of nested lexical state subs inside anonymous subs could cause
      'Bizarre copy' errors or possibly even crashes.</li>
  <li>When trying to emit warnings, perl's default debugger (<i>perl5db.pl</i>)
      was sometimes giving 'Undefined subroutine &amp;DB::db_warn called'
      instead. This bug, which started to occur in Perl 5.18, has been fixed.
      [GH #14400] &lt;https://github.com/Perl/perl5/issues/14400&gt;.</li>
  <li>Certain syntax errors in substitutions, such as
      <span class="Li">&quot;s/${&lt;&gt;{})//&quot;</span>, would crash, and
      had done so since Perl 5.10. (In some cases the crash did not start
      happening till 5.16.) The crash has, of course, been fixed. [GH #14391]
      &lt;https://github.com/Perl/perl5/issues/14391&gt;.</li>
  <li>Fix a couple of string grow size calculation overflows; in particular, a
      repeat expression like
      <span class="Li">&quot;33&#x00A0;x&#x00A0;~3&quot;</span> could cause a
      large buffer overflow since the new output buffer size was not correctly
      handled by <span class="Li">&quot;SvGROW()&quot;</span>. An expression
      like this now properly produces a memory wrap panic. [GH #14401]
      &lt;https://github.com/Perl/perl5/issues/14401&gt;.</li>
  <li><span class="Li">&quot;formline(&quot;@...&quot;,
      &quot;a&quot;);&quot;</span> would crash. The
      <span class="Li">&quot;FF_CHECKNL&quot;</span> case in
      <span class="Li">&quot;pp_formline()&quot;</span> didn't set the pointer
      used to mark the chop position, which led to the
      <span class="Li">&quot;FF_MORE&quot;</span> case crashing with a
      segmentation fault. This has been fixed. [GH #14388]
      &lt;https://github.com/Perl/perl5/issues/14388&gt;.</li>
  <li>A possible buffer overrun and crash when parsing a literal pattern during
      regular expression compilation has been fixed. [GH #14416]
      &lt;https://github.com/Perl/perl5/issues/14416&gt;.</li>
  <li><span class="Li">&quot;fchmod()&quot;</span> and
      <span class="Li">&quot;futimes()&quot;</span> now set
      <span class="Li">$!</span> when they fail due to being passed a closed
      file handle. [GH #14073]
      &lt;https://github.com/Perl/perl5/issues/14073&gt;.</li>
  <li><span class="Li">&quot;op_free()&quot;</span> and
      <span class="Li">&quot;scalarvoid()&quot;</span> no longer crash due to a
      stack overflow when freeing a deeply recursive op tree. [GH #11866]
      &lt;https://github.com/Perl/perl5/issues/11866&gt;.</li>
  <li>In Perl 5.20.0, <span class="Li">$^N</span> accidentally had the internal
      UTF-8 flag turned off if accessed from a code block within a regular
      expression, effectively UTF-8-encoding the value. This has been fixed. [GH
      #14211] &lt;https://github.com/Perl/perl5/issues/14211&gt;.</li>
  <li>A failed <span class="Li">&quot;semctl&quot;</span> call no longer
      overwrites existing items on the stack, which means that
      <span class="Li">&quot;(semctl(-1,0,0,0))[0]&quot;</span> no longer gives
      an &quot;uninitialized&quot; warning.</li>
  <li><span class="Li">&quot;else{foo()}&quot;</span> with no space before
      <span class="Li">&quot;foo&quot;</span> is now better at assigning the
      right line number to that statement. [GH #14070]
      &lt;https://github.com/Perl/perl5/issues/14070&gt;.</li>
  <li>Sometimes the assignment in <span class="Li">&quot;@array =
      split&quot;</span> gets optimised so that
      <span class="Li">&quot;split&quot;</span> itself writes directly to the
      array. This caused a bug, preventing this assignment from being used in
      lvalue context. So
      <span class="Li">&quot;(@a=split//,&quot;foo&quot;)=bar()&quot;</span> was
      an error. (This bug probably goes back to Perl 3, when the optimisation
      was added.) It has now been fixed. [GH #14183]
      &lt;https://github.com/Perl/perl5/issues/14183&gt;.</li>
  <li>When an argument list fails the checks specified by a subroutine signature
      (which is still an experimental feature), the resulting error messages now
      give the file and line number of the caller, not of the called subroutine.
      [GH #13643] &lt;https://github.com/Perl/perl5/issues/13643&gt;.</li>
  <li>The flip-flop operators (<span class="Li">&quot;..&quot;</span> and
      <span class="Li">&quot;...&quot;</span> in scalar context) used to
      maintain a separate state for each recursion level (the number of times
      the enclosing sub was called recursively), contrary to the documentation.
      Now each closure has one internal state for each flip-flop. [GH #14110]
      &lt;https://github.com/Perl/perl5/issues/14110&gt;.</li>
  <li>The flip-flop operator (<span class="Li">&quot;..&quot;</span> in scalar
      context) would return the same scalar each time, unless the containing
      subroutine was called recursively. Now it always returns a new scalar. [GH
      #14110] &lt;https://github.com/Perl/perl5/issues/14110&gt;.</li>
  <li><span class="Li">&quot;use&quot;</span>,
      <span class="Li">&quot;no&quot;</span>, statement labels, special blocks
      (<span class="Li">&quot;BEGIN&quot;</span>) and pod are now permitted as
      the first thing in a <span class="Li">&quot;map&quot;</span> or
      <span class="Li">&quot;grep&quot;</span> block, the block after
      <span class="Li">&quot;print&quot;</span> or
      <span class="Li">&quot;say&quot;</span> (or other functions) returning a
      handle, and within <span class="Li">&quot;${...}&quot;</span>,
      <span class="Li">&quot;@{...}&quot;</span>, etc. [GH #14088]
      &lt;https://github.com/Perl/perl5/issues/14088&gt;.</li>
  <li>The repetition operator <span class="Li">&quot;x&quot;</span> now
      propagates lvalue context to its left-hand argument when used in contexts
      like <span class="Li">&quot;foreach&quot;</span>. That allows
      <span class="Li">&quot;for(($#that_array)x2)&#x00A0;{&#x00A0;...&#x00A0;}&quot;</span>
      to work as expected if the loop modifies <span class="Li">$_</span>.</li>
  <li><span class="Li">&quot;(...) x ...&quot;</span> in scalar context used to
      corrupt the stack if one operand was an object with &quot;x&quot;
      overloading, causing erratic behavior. [GH #13811]
      &lt;https://github.com/Perl/perl5/issues/13811&gt;.</li>
  <li>Assignment to a lexical scalar is often optimised away; for example in
      <span class="Li">&quot;my $x; $x = $y + $z&quot;</span>, the assign
      operator is optimised away and the add operator writes its result directly
      to <span class="Li">$x</span>. Various bugs related to this optimisation
      have been fixed. Certain operators on the right-hand side would sometimes
      fail to assign the value at all or assign the wrong value, or would call
      STORE twice or not at all on tied variables. The operators affected were
      <span class="Li">&quot;$foo++&quot;</span>,
      <span class="Li">&quot;$foo--&quot;</span>, and
      <span class="Li">&quot;-$foo&quot;</span> under
      <span class="Li">&quot;use</span> <span class="Li">integer&quot;</span>,
      <span class="Li">&quot;chomp&quot;</span>,
      <span class="Li">&quot;chr&quot;</span> and
      <span class="Li">&quot;setpgrp&quot;</span>.</li>
  <li>List assignments were sometimes buggy if the same scalar ended up on both
      sides of the assignment due to use of
      <span class="Li">&quot;tied&quot;</span>,
      <span class="Li">&quot;values&quot;</span> or
      <span class="Li">&quot;each&quot;</span>. The result would be the wrong
      value getting assigned.</li>
  <li><span class="Li">&quot;setpgrp($nonzero)&quot;</span> (with one argument)
      was accidentally changed in 5.16 to mean
      <span class="Li">setpgrp(0)</span>. This has been fixed.</li>
  <li><span class="Li">&quot;__SUB__&quot;</span> could return the wrong value
      or even corrupt memory under the debugger (the
      <span class="Li">&quot;-d&quot;</span> switch) and in subs containing
      <span class="Li">&quot;eval $string&quot;</span>.</li>
  <li>When
      <span class="Li">&quot;sub&#x00A0;()&#x00A0;{&#x00A0;$var&#x00A0;}&quot;</span>
      becomes inlinable, it now returns a different scalar each time, just as a
      non-inlinable sub would, though Perl still optimises the copy away in
      cases where it would make no observable difference.</li>
  <li><span class="Li">&quot;my&#x00A0;sub&#x00A0;f&#x00A0;()&#x00A0;{&#x00A0;$var&#x00A0;}&quot;</span>
      and
      <span class="Li">&quot;sub&#x00A0;()&#x00A0;:&#x00A0;attr&#x00A0;{&#x00A0;$var&#x00A0;}&quot;</span>
      are no longer eligible for inlining. The former would crash; the latter
      would just throw the attributes away. An exception is made for the
      little-known <span class="Li">&quot;:method&quot;</span> attribute, which
      does nothing much.</li>
  <li>Inlining of subs with an empty prototype is now more consistent than
      before. Previously, a sub with multiple statements, of which all but the
      last were optimised away, would be inlinable only if it were an anonymous
      sub containing a string <span class="Li">&quot;eval&quot;</span> or
      <span class="Li">&quot;state&quot;</span> declaration or closing over an
      outer lexical variable (or any anonymous sub under the debugger). Now any
      sub that gets folded to a single constant after statements have been
      optimised away is eligible for inlining. This applies to things like
      <span class="Li">&quot;sub</span> <span class="Li">() { jabber() if DEBUG;
      42 }&quot;</span>.
    <p class="Pp">Some subroutines with an explicit
        <span class="Li">&quot;return&quot;</span> were being made inlinable,
        contrary to the documentation, Now
        <span class="Li">&quot;return&quot;</span> always prevents inlining.</p>
  </li>
  <li>On some systems, such as VMS, <span class="Li">&quot;crypt&quot;</span>
      can return a non-ASCII string. If a scalar assigned to had contained a
      UTF-8 string previously, then <span class="Li">&quot;crypt&quot;</span>
      would not turn off the UTF-8 flag, thus corrupting the return value. This
      would happen with
      <span class="Li">&quot;$lexical&#x00A0;=&#x00A0;crypt&#x00A0;...&quot;</span>.</li>
  <li><span class="Li">&quot;crypt&quot;</span> no longer calls
      <span class="Li">&quot;FETCH&quot;</span> twice on a tied first
    argument.</li>
  <li>An unterminated here-doc on the last line of a quote-like operator
      (<span class="Li">&quot;qq[${ &lt;&lt;END }]&quot;</span>,
      <span class="Li">&quot;/(?{ &lt;&lt;END })/&quot;</span>) no longer causes
      a double free. It started doing so in 5.18.</li>
  <li><span class="Li">&quot;index()&quot;</span> and
      <span class="Li">&quot;rindex()&quot;</span> no longer crash when used on
      strings over 2GB in size. [GH #13700]
      &lt;https://github.com/Perl/perl5/issues/13700&gt;.</li>
  <li>A small, previously intentional, memory leak in
      <span class="Li">&quot;PERL_SYS_INIT&quot;</span>/<span class="Li">&quot;PERL_SYS_INIT3&quot;</span>
      on Win32 builds was fixed. This might affect embedders who repeatedly
      create and destroy perl engines within the same process.</li>
  <li><span class="Li">&quot;POSIX::localeconv()&quot;</span> now returns the
      data for the program's underlying locale even when called from outside the
      scope of <span class="Li">&quot;use&#x00A0;locale&quot;</span>.</li>
  <li><span class="Li">&quot;POSIX::localeconv()&quot;</span> now works properly
      on platforms which don't have
      <span class="Li">&quot;LC_NUMERIC&quot;</span> and/or
      <span class="Li">&quot;LC_MONETARY&quot;</span>, or for which Perl has
      been compiled to disregard either or both of these locale categories. In
      such circumstances, there are now no entries for the corresponding values
      in the hash returned by
    <span class="Li">&quot;localeconv()&quot;</span>.</li>
  <li><span class="Li">&quot;POSIX::localeconv()&quot;</span> now marks
      appropriately the values it returns as UTF-8 or not. Previously they were
      always returned as bytes, even if they were supposed to be encoded as
      UTF-8.</li>
  <li>On Microsoft Windows, within the scope of
      <span class="Li">&quot;use&#x00A0;locale&quot;</span>, the following POSIX
      character classes gave results for many locales that did not conform to
      the POSIX standard: <span class="Li">&quot;[[:alnum:]]&quot;</span>,
      <span class="Li">&quot;[[:alpha:]]&quot;</span>,
      <span class="Li">&quot;[[:blank:]]&quot;</span>,
      <span class="Li">&quot;[[:digit:]]&quot;</span>,
      <span class="Li">&quot;[[:graph:]]&quot;</span>,
      <span class="Li">&quot;[[:lower:]]&quot;</span>,
      <span class="Li">&quot;[[:print:]]&quot;</span>,
      <span class="Li">&quot;[[:punct:]]&quot;</span>,
      <span class="Li">&quot;[[:upper:]]&quot;</span>,
      <span class="Li">&quot;[[:word:]]&quot;</span>, and
      <span class="Li">&quot;[[:xdigit:]]&quot;</span>. This was because the
      underlying Microsoft implementation does not follow the standard. Perl now
      takes special precautions to correct for this.</li>
  <li>Many issues have been detected by Coverity
      &lt;http://www.coverity.com/&gt; and fixed.</li>
  <li><span class="Li">&quot;system()&quot;</span> and friends should now work
      properly on more Android builds.
    <p class="Pp">Due to an oversight, the value specified through
        <span class="Li">&quot;-Dtargetsh&quot;</span> to <i>Configure</i> would
        end up being ignored by some of the build process. This caused perls
        cross-compiled for Android to end up with defective versions of
        <span class="Li">&quot;system()&quot;</span>,
        <span class="Li">&quot;exec()&quot;</span> and backticks: the commands
        would end up looking for <span class="Li">&quot;/bin/sh&quot;</span>
        instead of <span class="Li">&quot;/system/bin/sh&quot;</span>, and so
        would fail for the vast majority of devices, leaving
        <span class="Li">$!</span> as
        <span class="Li">&quot;ENOENT&quot;</span>.</p>
  </li>
  <li><span class="Li">&quot;qr(...\(...\)...)&quot;</span>,
      <span class="Li">&quot;qr[...\[...\]...]&quot;</span>, and
      <span class="Li">&quot;qr{...\{...\}...}&quot;</span> now work. Previously
      it was impossible to escape these three left-characters with a backslash
      within a regular expression pattern where otherwise they would be
      considered metacharacters, and the pattern opening delimiter was the
      character, and the closing delimiter was its mirror character.</li>
  <li><span class="Li">&quot;s///e&quot;</span> on tainted UTF-8 strings
      corrupted <span class="Li">&quot;pos()&quot;</span>. This bug, introduced
      in 5.20, is now fixed. [GH #13948]
      &lt;https://github.com/Perl/perl5/issues/13948&gt;.</li>
  <li>A non-word boundary in a regular expression
      (<span class="Li">&quot;\B&quot;</span>) did not always match the end of
      the string; in particular <span class="Li">&quot;q{} =~ /\B/&quot;</span>
      did not match. This bug, introduced in perl 5.14, is now fixed. [GH
      #13917] &lt;https://github.com/Perl/perl5/issues/13917&gt;.</li>
  <li><span class="Li">&quot;&quot; P&quot; =~ /(?=.*P)P/&quot;</span> should
      match, but did not. This is now fixed. [GH #13954]
      &lt;https://github.com/Perl/perl5/issues/13954&gt;.</li>
  <li>Failing to compile <span class="Li">&quot;use Foo&quot;</span> in an
      <span class="Li">&quot;eval&quot;</span> could leave a spurious
      <span class="Li">&quot;BEGIN&quot;</span> subroutine definition, which
      would produce a &quot;Subroutine BEGIN redefined&quot; warning on the next
      use of <span class="Li">&quot;use&quot;</span>, or other
      <span class="Li">&quot;BEGIN&quot;</span> block. [GH #13926]
      &lt;https://github.com/Perl/perl5/issues/13926&gt;.</li>
  <li><span class="Li">&quot;method { BLOCK } ARGS&quot;</span> syntax now
      correctly parses the arguments if they begin with an opening brace. [GH
      #9085] &lt;https://github.com/Perl/perl5/issues/9085&gt;.</li>
  <li>External libraries and Perl may have different ideas of what the locale
      is. This is problematic when parsing version strings if the locale's
      numeric separator has been changed. Version parsing has been patched to
      ensure it handles the locales correctly. [GH #13863]
      &lt;https://github.com/Perl/perl5/issues/13863&gt;.</li>
  <li>A bug has been fixed where zero-length assertions and code blocks inside
      of a regex could cause <span class="Li">&quot;pos&quot;</span> to see an
      incorrect value. [GH #14016]
      &lt;https://github.com/Perl/perl5/issues/14016&gt;.</li>
  <li>Dereferencing of constants now works correctly for typeglob constants.
      Previously the glob was stringified and its name looked up. Now the glob
      itself is used. [GH #9891]
      &lt;https://github.com/Perl/perl5/issues/9891&gt;</li>
  <li>When parsing a sigil (<span class="Li">&quot;$&quot;</span>
      <span class="Li">&quot;@&quot;</span>
      <span class="Li">&quot;%&quot;</span>
      <span class="Li">&quot;&amp;)&quot;</span> followed by braces, the parser
      no longer tries to guess whether it is a block or a hash constructor
      (causing a syntax error when it guesses the latter), since it can only be
      a block.</li>
  <li><span class="Li">&quot;undef&#x00A0;$reference&quot;</span> now frees the
      referent immediately, instead of hanging on to it until the next
      statement. [GH #14032]
    &lt;https://github.com/Perl/perl5/issues/14032&gt;</li>
  <li>Various cases where the name of a sub is used (autoload, overloading,
      error messages) used to crash for lexical subs, but have been fixed.</li>
  <li>Bareword lookup now tries to avoid vivifying packages if it turns out the
      bareword is not going to be a subroutine name.</li>
  <li>Compilation of anonymous constants (<i>e.g.</i>,
      <span class="Li">&quot;sub () { 3 }&quot;</span>) no longer deletes any
      subroutine named <span class="Li">&quot;__ANON__&quot;</span> in the
      current package. Not only was
      <span class="Li">&quot;*__ANON__{CODE}&quot;</span> cleared, but there was
      a memory leak, too. This bug goes back to Perl 5.8.0.</li>
  <li>Stub declarations like <span class="Li">&quot;sub f;&quot;</span> and
      <span class="Li">&quot;sub f ();&quot;</span> no longer wipe out constants
      of the same name declared by <span class="Li">&quot;use
      constant&quot;</span>. This bug was introduced in Perl 5.10.0.</li>
  <li><span class="Li">&quot;qr/[\N{named sequence}]/&quot;</span> now works
      properly in many instances.
    <p class="Pp">Some names known to
        <span class="Li">&quot;\N{...}&quot;</span> refer to a sequence of
        multiple characters, instead of the usual single character. Bracketed
        character classes generally only match single characters, but now
        special handling has been added so that they can match named sequences,
        but not if the class is inverted or the sequence is specified as the
        beginning or end of a range. In these cases, the only behavior change
        from before is a slight rewording of the fatal error message given when
        this class is part of a <span class="Li">&quot;?[...])&quot;</span>
        construct. When the <span class="Li">&quot;[...]&quot;</span> stands
        alone, the same non-fatal warning as before is raised, and only the
        first character in the sequence is used, again just as before.</p>
  </li>
  <li>Tainted constants evaluated at compile time no longer cause unrelated
      statements to become tainted. [GH #14059]
      &lt;https://github.com/Perl/perl5/issues/14059&gt;</li>
  <li><span class="Li">&quot;open&#x00A0;$$fh,&#x00A0;...&quot;</span>, which
      vivifies a handle with a name like
      <span class="Li">&quot;main::_GEN_0&quot;</span>, was not giving the
      handle the right reference count, so a double free could happen.</li>
  <li>When deciding that a bareword was a method name, the parser would get
      confused if an <span class="Li">&quot;our&quot;</span> sub with the same
      name existed, and look up the method in the package of the
      <span class="Li">&quot;our&quot;</span> sub, instead of the package of the
      invocant.</li>
  <li>The parser no longer gets confused by
      <span class="Li">&quot;\U=&quot;</span> within a double-quoted string. It
      used to produce a syntax error, but now compiles it correctly. [GH #10882]
      &lt;https://github.com/Perl/perl5/issues/10882&gt;</li>
  <li>It has always been the intention for the
      <span class="Li">&quot;-B&quot;</span> and
      <span class="Li">&quot;-T&quot;</span> file test operators to treat UTF-8
      encoded files as text. (perlfunc has been updated to say this.)
      Previously, it was possible for some files to be considered UTF-8 that
      actually weren't valid UTF-8. This is now fixed. The operators now work on
      EBCDIC platforms as well.</li>
  <li>Under some conditions warning messages raised during regular expression
      pattern compilation were being output more than once. This has now been
      fixed.</li>
  <li>Perl 5.20.0 introduced a regression in which a UTF-8 encoded regular
      expression pattern that contains a single ASCII lowercase letter did not
      match its uppercase counterpart. That has been fixed in both 5.20.1 and
      5.22.0. [GH #14051]
    &lt;https://github.com/Perl/perl5/issues/14051&gt;</li>
  <li>Constant folding could incorrectly suppress warnings if lexical warnings
      (<span class="Li">&quot;use warnings&quot;</span> or
      <span class="Li">&quot;no warnings&quot;</span>) were not in effect and
      <span class="Li">$^W</span> were false at compile time and true at run
      time.</li>
  <li>Loading Unicode tables during a regular expression match could cause
      assertion failures under debugging builds if the previous match used the
      very same regular expression. [GH #14081]
      &lt;https://github.com/Perl/perl5/issues/14081&gt;</li>
  <li>Thread cloning used to work incorrectly for lexical subs, possibly causing
      crashes or double frees on exit.</li>
  <li>Since Perl 5.14.0, deleting
      <span class="Li">$SomePackage::{__ANON__}</span> and then undefining an
      anonymous subroutine could corrupt things internally, resulting in
      Devel::Peek crashing or B.pm giving nonsensical data. This has been
    fixed.</li>
  <li><span class="Li">&quot;(caller&#x00A0;$n)[3]&quot;</span> now reports
      names of lexical subs, instead of treating them as
      <span class="Li">&quot;(unknown)&quot;</span>.</li>
  <li><span class="Li">&quot;sort subname LIST&quot;</span> now supports using a
      lexical sub as the comparison routine.</li>
  <li>Aliasing (<i>e.g.</i>, via
      <span class="Li">&quot;*x&#x00A0;=&#x00A0;*y&quot;</span>) could confuse
      list assignments that mention the two names for the same variable on
      either side, causing wrong values to be assigned. [GH #5788]
      &lt;https://github.com/Perl/perl5/issues/5788&gt;</li>
  <li>Long here-doc terminators could cause a bad read on short lines of input.
      This has been fixed. It is doubtful that any crash could have occurred.
      This bug goes back to when here-docs were introduced in Perl 3.000
      twenty-five years ago.</li>
  <li>An optimization in <span class="Li">&quot;split&quot;</span> to treat
      <span class="Li">&quot;split&#x00A0;/^/&quot;</span> like
      <span class="Li">&quot;split&#x00A0;/^/m&quot;</span> had the unfortunate
      side-effect of also treating
      <span class="Li">&quot;split&#x00A0;/\A/&quot;</span> like
      <span class="Li">&quot;split&#x00A0;/^/m&quot;</span>, which it should
      not. This has been fixed. (Note, however, that
      <span class="Li">&quot;split&#x00A0;/^x/&quot;</span> does not behave like
      <span class="Li">&quot;split&#x00A0;/^x/m&quot;</span>, which is also
      considered to be a bug and will be fixed in a future version.) [GH #14086]
      &lt;https://github.com/Perl/perl5/issues/14086&gt;</li>
  <li>The little-known
      <span class="Li">&quot;my&#x00A0;Class&#x00A0;$var&quot;</span> syntax
      (see fields and attributes) could get confused in the scope of
      <span class="Li">&quot;use utf8&quot;</span> if
      <span class="Li">&quot;Class&quot;</span> were a constant whose value
      contained Latin-1 characters.</li>
  <li>Locking and unlocking values via Hash::Util or
      <span class="Li">&quot;Internals::SvREADONLY&quot;</span> no longer has
      any effect on values that were read-only to begin with. Previously,
      unlocking such values could result in crashes, hangs or other erratic
      behavior.</li>
  <li>Some unterminated <span class="Li">&quot;(?(...)...)&quot;</span>
      constructs in regular expressions would either crash or give erroneous
      error messages. <span class="Li">&quot;/(?(1)/&quot;</span> is one such
      example.</li>
  <li><span class="Li">&quot;pack&#x00A0;&quot;w&quot;,&#x00A0;$tied&quot;</span>
      no longer calls FETCH twice.</li>
  <li>List assignments like
      <span class="Li">&quot;($x,&#x00A0;$z)&#x00A0;=&#x00A0;(1,&#x00A0;$y)&quot;</span>
      now work correctly if <span class="Li">$x</span> and
      <span class="Li">$y</span> have been aliased by
      <span class="Li">&quot;foreach&quot;</span>.</li>
  <li>Some patterns including code blocks with syntax errors, such as
      <span class="Li">&quot;/&#x00A0;(?{(^{})/&quot;</span>, would hang or fail
      assertions on debugging builds. Now they produce errors.</li>
  <li>An assertion failure when parsing <span class="Li">&quot;sort&quot;</span>
      with debugging enabled has been fixed. [GH #14087]
      &lt;https://github.com/Perl/perl5/issues/14087&gt;.</li>
  <li><span class="Li">&quot;*a&#x00A0;=&#x00A0;*b;&#x00A0;@a&#x00A0;=&#x00A0;split&#x00A0;//,&#x00A0;$b[1]&quot;</span>
      could do a bad read and produce junk results.</li>
  <li>In
      <span class="Li">&quot;()&#x00A0;=&#x00A0;@array&#x00A0;=&#x00A0;split&quot;</span>,
      the <span class="Li">&quot;()&#x00A0;=&quot;</span> at the beginning no
      longer confuses the optimizer into assuming a limit of 1.</li>
  <li>Fatal warnings no longer prevent the output of syntax errors. [GH #14155]
      &lt;https://github.com/Perl/perl5/issues/14155&gt;.</li>
  <li>Fixed a NaN double-to-long-double conversion error on VMS. For quiet NaNs
      (and only on Itanium, not Alpha) negative infinity instead of NaN was
      produced.</li>
  <li>Fixed the issue that caused <span class="Li">&quot;make
      distclean&quot;</span> to incorrectly leave some files behind. [GH #14108]
      &lt;https://github.com/Perl/perl5/issues/14108&gt;.</li>
  <li>AIX now sets the length in <span class="Li">&quot;getsockopt&quot;</span>
      correctly. [GH #13484] &lt;https://github.com/Perl/perl5/issues/13484&gt;.
      [cpan #91183] &lt;https://rt.cpan.org/Ticket/Display.html?id=91183&gt;.
      [cpan #85570]
    &lt;https://rt.cpan.org/Ticket/Display.html?id=85570&gt;.</li>
  <li>The optimization phase of a regexp compilation could run
      &quot;forever&quot; and exhaust all memory under certain circumstances;
      now fixed. [GH #13984]
    &lt;https://github.com/Perl/perl5/issues/13984&gt;.</li>
  <li>The test script <i>t/op/crypt.t</i> now uses the SHA-256 algorithm if the
      default one is disabled, rather than giving failures. [GH #13715]
      &lt;https://github.com/Perl/perl5/issues/13715&gt;.</li>
  <li>Fixed an off-by-one error when setting the size of a shared array. [GH
      #14151] &lt;https://github.com/Perl/perl5/issues/14151&gt;.</li>
  <li>Fixed a bug that could cause perl to enter an infinite loop during
      compilation. In particular, a <span class="Li">while(1)</span> within a
      sublist, <i>e.g.</i>
    <p class="Pp"></p>
    <pre>    sub foo { () = ($a, my $b, ($c, do { while(1) {} })) }
    </pre>
    <p class="Pp">The bug was introduced in 5.20.0 [GH #14165]
        &lt;https://github.com/Perl/perl5/issues/14165&gt;.</p>
  </li>
  <li>On Win32, if a variable was <span class="Li">&quot;local&quot;</span>-ized
      in a pseudo-process that later forked, restoring the original value in the
      child pseudo-process caused memory corruption and a crash in the child
      pseudo-process (and therefore the OS process). [GH #8641]
      &lt;https://github.com/Perl/perl5/issues/8641&gt;.</li>
  <li>Calling <span class="Li">&quot;write&quot;</span> on a format with a
      <span class="Li">&quot;^**&quot;</span> field could produce a panic in
      <span class="Li">&quot;sv_chop()&quot;</span> if there were insufficient
      arguments or if the variable used to fill the field was empty. [GH #14255]
      &lt;https://github.com/Perl/perl5/issues/14255&gt;.</li>
  <li>Non-ASCII lexical sub names now appear without trailing junk when they
      appear in error messages.</li>
  <li>The <span class="Li">&quot;\@&quot;</span> subroutine prototype no longer
      flattens parenthesized arrays (taking a reference to each element), but
      takes a reference to the array itself. [GH #9111]
      &lt;https://github.com/Perl/perl5/issues/9111&gt;.</li>
  <li>A block containing nothing except a C-style
      <span class="Li">&quot;for&quot;</span> loop could corrupt the stack,
      causing lists outside the block to lose elements or have elements
      overwritten. This could happen with <span class="Li">&quot;map {
      for(...){...} } ...&quot;</span> and with lists containing
      <span class="Li">&quot;do { for(...){...} }&quot;</span>. [GH #14269]
      &lt;https://github.com/Perl/perl5/issues/14269&gt;.</li>
  <li><span class="Li">&quot;scalar()&quot;</span> now propagates lvalue
      context, so that
      <span class="Li">&quot;for(scalar($#foo))&#x00A0;{&#x00A0;...&#x00A0;}&quot;</span>
      can modify <span class="Li">$#foo</span> through
      <span class="Li">$_</span>.</li>
  <li><span class="Li">&quot;qr/@array(?{block})/&quot;</span> no longer dies
      with &quot;Bizarre copy of ARRAY&quot;. [GH #14292]
      &lt;https://github.com/Perl/perl5/issues/14292&gt;.</li>
  <li><span class="Li">&quot;eval&#x00A0;'$variable'&quot;</span> in nested
      named subroutines would sometimes look up a global variable even with a
      lexical variable in scope.</li>
  <li>In perl 5.20.0, <span class="Li">&quot;sort CORE::fake&quot;</span> where
      'fake' is anything other than a keyword, started chopping off the last 6
      characters and treating the result as a sort sub name. The previous
      behavior of treating <span class="Li">&quot;CORE::fake&quot;</span> as a
      sort sub name has been restored. [GH #14323]
      &lt;https://github.com/Perl/perl5/issues/14323&gt;.</li>
  <li>Outside of <span class="Li">&quot;use utf8&quot;</span>, a
      single-character Latin-1 lexical variable is disallowed. The error message
      for it, &quot;Can't use global <span class="Li">$foo</span>...&quot;, was
      giving garbage instead of the variable name.</li>
  <li><span class="Li">&quot;readline&quot;</span> on a nonexistent handle was
      causing <span class="Li">&quot;${^LAST_FH}&quot;</span> to produce a
      reference to an undefined scalar (or fail an assertion). Now
      <span class="Li">&quot;${^LAST_FH}&quot;</span> ends up undefined.</li>
  <li><span class="Li">&quot;(...) x ...&quot;</span> in void context now
      applies scalar context to the left-hand argument, instead of the context
      the current sub was called in. [GH #14174]
      &lt;https://github.com/Perl/perl5/issues/14174&gt;.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Known_Problems"><a class="permalink" href="#Known_Problems">Known
  Problems</a></h1>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;pack&quot;</span>-ing a NaN on a perl compiled with
      Visual C 6 does not behave properly, leading to a test failure in
      <i>t/op/infnan.t</i>. [GH #14705]
      &lt;https://github.com/Perl/perl5/issues/14705&gt;</li>
  <li>A goal is for Perl to be able to be recompiled to work reasonably well on
      any Unicode version. In Perl 5.22, though, the earliest such version is
      Unicode 5.1 (current is 7.0).</li>
  <li>EBCDIC platforms</li>
</ul>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>The <span class="Li">&quot;cmp&quot;</span> (and hence
      <span class="Li">&quot;sort&quot;</span>) operators do not necessarily
      give the correct results when both operands are UTF-EBCDIC encoded strings
      and there is a mixture of ASCII and/or control characters, along with
      other characters.</li>
  <li>Ranges containing <span class="Li">&quot;\N{...}&quot;</span> in the
      <span class="Li">&quot;tr///&quot;</span> (and
      <span class="Li">&quot;y///&quot;</span>) transliteration operators are
      treated differently than the equivalent ranges in regular expression
      patterns. They should, but don't, cause the values in the ranges to all be
      treated as Unicode code points, and not native ones. (&quot;Version 8
      Regular Expressions&quot; in perlre gives details as to how it should
      work.)</li>
  <li>Encode and encoding are mostly broken.</li>
  <li>Many CPAN modules that are shipped with core show failing tests.</li>
  <li><span class="Li">&quot;pack&quot;</span>/<span class="Li">&quot;unpack&quot;</span>
      with <span class="Li">&quot;U0&quot;</span> format may not work
    properly.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The following modules are known to have test failures with this version of
      Perl. In many cases, patches have been submitted, so there will hopefully
      be new releases soon:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>B::Generate version 1.50</li>
  <li>B::Utils version 0.25</li>
  <li>Coro version 6.42</li>
  <li>Dancer version 1.3130</li>
  <li>Data::Alias version 1.18</li>
  <li>Data::Dump::Streamer version 2.38</li>
  <li>Data::Util version 0.63</li>
  <li>Devel::Spy version 0.07</li>
  <li>invoker version 0.34</li>
  <li>Lexical::Var version 0.009</li>
  <li>LWP::ConsoleLogger version 0.000018</li>
  <li>Mason version 2.22</li>
  <li>NgxQueue version 0.02</li>
  <li>Padre version 1.00</li>
  <li>Parse::Keyword 0.08</li>
</ul>
</div>
<div class="Bd-indent"></div>
</section>
<section class="Sh">
<h1 class="Sh" id="Obituary"><a class="permalink" href="#Obituary">Obituary</a></h1>
<p class="Pp">Brian McCauley died on May 8, 2015. He was a frequent poster to
    Usenet, Perl Monks, and other Perl forums, and made several CPAN
    contributions under the nick NOBULL, including to the Perl FAQ. He attended
    almost every YAPC::Europe, and indeed, helped organise YAPC::Europe 2006 and
    the QA Hackathon 2009. His wit and his delight in intricate systems were
    particularly apparent in his love of board games; many Perl mongers will
    have fond memories of playing Fluxx and other games with Brian. He will be
    missed.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Acknowledgements"><a class="permalink" href="#Acknowledgements">Acknowledgements</a></h1>
<p class="Pp">Perl 5.22.0 represents approximately 12 months of development
    since Perl 5.20.0 and contains approximately 590,000 lines of changes across
    2,400 files from 94 authors.</p>
<p class="Pp">Excluding auto-generated files, documentation and release tools,
    there were approximately 370,000 lines of changes to 1,500 .pm, .t, .c and
    .h files.</p>
<p class="Pp">Perl continues to flourish into its third decade thanks to a
    vibrant community of users and developers. The following people are known to
    have contributed the improvements that became Perl 5.22.0:</p>
<p class="Pp">Aaron Crane, Abhijit Menon-Sen, Abigail, Alberto Simo~es, Alex
    Solovey, Alex Vandiver, Alexandr Ciornii, Alexandre (Midnite) Jousset,
    Andreas Koenig, Andreas Voegele, Andrew Fresh, Andy Dougherty, Anthony
    Heading, Aristotle Pagaltzis, brian d foy, Brian Fraser, Chad Granum, Chris
    'BinGOs' Williams, Craig A. Berry, Dagfinn Ilmari Mannsaaker, Daniel Dragan,
    Darin McBride, Dave Rolsky, David Golden, David Mitchell, David Wheeler,
    Dmitri Tikhonov, Doug Bell, E. Choroba, Ed J, Eric Herman, Father
    Chrysostomos, George Greer, Glenn D. Golden, Graham Knop, H.Merijn Brand,
    Herbert Breunung, Hugo van der Sanden, James E Keenan, James McCoy, James
    Raspass, Jan Dubois, Jarkko Hietaniemi, Jasmine Ngan, Jerry D. Hedden, Jim
    Cromie, John Goodyear, kafka, Karen Etheridge, Karl Williamson, Kent
    Fredric, kmx, Lajos Veres, Leon Timmermans, Lukas Mai, Mathieu Arnold,
    Matthew Horsfall, Max Maischein, Michael Bunk, Nicholas Clark, Niels
    Thykier, Niko Tyni, Norman Koch, Olivier Mengue, Peter John Acklam, Peter
    Martini, Petr PisaX, Philippe Bruhat (BooK), Pierre Bogossian, Rafael
    Garcia-Suarez, Randy Stauner, Reini Urban, Ricardo Signes, Rob Hoelz,
    Rostislav Skudnov, Sawyer X, Shirakata Kentaro, Shlomi Fish, Sisyphus,
    Slaven Rezic, Smylers, Steffen Mueller, Steve Hay, Sullivan Beck, syber,
    Tadeusz SoXnierz, Thomas Sibley, Todd Rinaldo, Tony Cook, Vincent Pit,
    Vladimir Marek, Yaroslav Kuzmin, Yves Orton, AEvar Arnfjoerd` Bjarmason.</p>
<p class="Pp">The list above is almost certainly incomplete as it is
    automatically generated from version control history. In particular, it does
    not include the names of the (very much appreciated) contributors who
    reported issues to the Perl bug tracker.</p>
<p class="Pp">Many of the changes included in this version originated in the
    CPAN modules included in Perl's core. We're grateful to the entire CPAN
    community for helping Perl to flourish.</p>
<p class="Pp">For a more complete list of all of Perl's historical contributors,
    please see the <i>AUTHORS</i> file in the Perl source distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Reporting_Bugs"><a class="permalink" href="#Reporting_Bugs">Reporting
  Bugs</a></h1>
<p class="Pp">If you find what you think is a bug, you might check the articles
    recently posted to the comp.lang.perl.misc newsgroup and the perl bug
    database at &lt;https://rt.perl.org/&gt;. There may also be information at
    &lt;http://www.perl.org/&gt;, the Perl Home Page.</p>
<p class="Pp">If you believe you have an unreported bug, please run the perlbug
    program included with your release. Be sure to trim your bug down to a tiny
    but sufficient test case. Your bug report, along with the output of
    <span class="Li">&quot;perl -V&quot;</span>, will be sent off to
    perlbug@perl.org to be analysed by the Perl porting team.</p>
<p class="Pp">If the bug you are reporting has security implications, which make
    it inappropriate to send to a publicly archived mailing list, then please
    send it to perl5-security-report@perl.org. This points to a closed
    subscription unarchived mailing list, which includes all the core
    committers, who will be able to help assess the impact of issues, figure out
    a resolution, and help co-ordinate the release of patches to mitigate or fix
    the problem across all platforms on which Perl is supported. Please only use
    this address for security issues in the Perl core, not for modules
    independently distributed on CPAN.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">The <i>Changes</i> file for an explanation of how to view
    exhaustive details on what changed.</p>
<p class="Pp">The <i>INSTALL</i> file for how to build Perl.</p>
<p class="Pp">The <i>README</i> file for general stuff.</p>
<p class="Pp">The <i>Artistic</i> and <i>Copying</i> files for copyright
    information.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2021-05-04</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
