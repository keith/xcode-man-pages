<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Test::Specio(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::Specio(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::Specio(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Test::Specio - Test helpers for Specio
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
version 0.46
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  use Test::Specio qw( test_constraint :vars );

  test_constraint(
      t('Foo'), {
          accept =&gt; [ 'foo', 'bar' ],
          reject =&gt; [ 42,    {}, $EMPTY_STRING, $HASH_REF ],
      }
  );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This package provides some helper functions and variables for testing Specio
  types.
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORTS"><a class="permalink" href="#EXPORTS">EXPORTS</a></h1>
This module provides the following exports:
<section class="Ss">
<h2 class="Ss" id="test_constraint(_$type,_$tests,___$describer___)"><a class="permalink" href="#test_constraint(_$type,_$tests,___$describer___)">test_constraint(
  $type, $tests, [ $describer ] )</a></h2>
This subroutine accepts two arguments. The first should be a Specio type object.
  The second is hashref which can contain the keys
  <span class="Li">&quot;accept&quot;</span> and
  <span class="Li">&quot;reject&quot;</span>. Each key should contain an
  arrayref of values which the type accepts or rejects.
<p class="Pp">The third argument is optional. This is a sub reference which will
    be called to generate a description of the value being tested. This defaults
    to calling this package's <span class="Li">&quot;describe&quot;</span> sub,
    but you can provide your own.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="describe($value)"><a class="permalink" href="#describe($value)">describe($value)</a></h2>
Given a value, this subroutine returns a string describing that value in a
  useful way for test output. It know about the various classes used for the
  variables exported by this package and will do something intelligent when such
  a variable.
</section>
<section class="Ss">
<h2 class="Ss" id="builtins_tests(_$GLOB,_$GLOB_OVERLOAD,_$GLOB_OVERLOAD_FH_)"><a class="permalink" href="#builtins_tests(_$GLOB,_$GLOB_OVERLOAD,_$GLOB_OVERLOAD_FH_)">builtins_tests(
  $GLOB, $GLOB_OVERLOAD, $GLOB_OVERLOAD_FH )</a></h2>
This subroutine returns a hashref containing test variables for all builtin
  types. The hashref has a form like this:
<p class="Pp"><span class="Li"></span></p>
<pre>
  {
      Bool =&gt; {
          accept =&gt; [
              $ZERO,
              $ONE,
              $BOOL_OVERLOAD_TRUE,
              $BOOL_OVERLOAD_FALSE,
              ...,
          ],
          reject =&gt; [
              $INT,
              $NEG_INT,
              $NUM,
              $NEG_NUM,
              ...,
              $OBJECT,
          ],
      },
      Maybe =&gt; {...},
  }
</pre>
<p class="Pp">You need to pass in a glob, an object which overloads
    globification, and an object which overloads globification to return an open
    filehandle. See below for more details on how to create these things.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Variables"><a class="permalink" href="#Variables">Variables</a></h2>
This module also exports many variables containing values which are useful for
  testing constraints. Note that references are always empty unless stated
  otherwise. You can import these variables individually or import all of them
  with the <span class="Li">&quot;:vars&quot;</span> import tag.
<ul class="Bl-bullet">
  <li><span class="Li">$ZERO</span></li>
  <li><span class="Li">$ONE</span></li>
  <li><span class="Li">$INT</span>
    <p class="Pp">An arbitrary positive integer.</p>
  </li>
  <li><span class="Li">$NEG_INT</span>
    <p class="Pp">An arbitrary negative integer.</p>
  </li>
  <li><span class="Li">$NUM</span>
    <p class="Pp">An arbitrary positive non-integer number.</p>
  </li>
  <li><span class="Li">$NEG_NUM</span>
    <p class="Pp">An arbitrary negative non-integer number.</p>
  </li>
  <li><span class="Li">$EMPTY_STRING</span></li>
  <li><span class="Li">$STRING</span>
    <p class="Pp">An arbitrary non-empty string.</p>
  </li>
  <li><span class="Li">$NUM_IN_STRING</span>
    <p class="Pp">An arbitrary string which contains a number.</p>
  </li>
  <li><span class="Li">$INT_WITH_NL1</span>
    <p class="Pp">An string containing an integer followed by a newline.</p>
  </li>
  <li><span class="Li">$INT_WITH_NL2</span>
    <p class="Pp">An string containing a newline followed by an integer.</p>
  </li>
  <li><span class="Li">$SCALAR_REF</span></li>
  <li><span class="Li">$SCALAR_REF_REF</span>
    <p class="Pp">A reference containing a reference to a scalar.</p>
  </li>
  <li><span class="Li">$ARRAY_REF</span></li>
  <li><span class="Li">$HASH_REF</span></li>
  <li><span class="Li">$CODE_REF</span></li>
  <li><span class="Li">$GLOB_REF</span></li>
  <li><span class="Li">$FH</span>
    <p class="Pp">An opened filehandle.</p>
  </li>
  <li><span class="Li">$FH_OBJECT</span>
    <p class="Pp">An opened IO::File object.</p>
  </li>
  <li><span class="Li">$REGEX</span>
    <p class="Pp">A regex created with
      <span class="Li">&quot;qr//&quot;</span>.</p>
  </li>
  <li><span class="Li">$REGEX_OBJ</span>
    <p class="Pp">A regex created with <span class="Li">&quot;qr//&quot;</span>
        that was then blessed into class.</p>
  </li>
  <li><span class="Li">$FAKE_REGEX</span>
    <p class="Pp">A non-regex blessed into the
        <span class="Li">&quot;Regexp&quot;</span> class which Perl uses
        internally for <span class="Li">&quot;qr//&quot;</span> objects.</p>
  </li>
  <li><span class="Li">$OBJECT</span>
    <p class="Pp">An arbitrary object.</p>
  </li>
  <li><span class="Li">$UNDEF</span></li>
  <li><span class="Li">$CLASS_NAME</span>
    <p class="Pp">A string containing a loaded package name.</p>
  </li>
  <li><span class="Li">$BOOL_OVERLOAD_TRUE</span>
    <p class="Pp">An object which overloads boolification to return true.</p>
  </li>
  <li><span class="Li">$BOOL_OVERLOAD_FALSE</span>
    <p class="Pp">An object which overloads boolification to return false.</p>
  </li>
  <li><span class="Li">$STR_OVERLOAD_EMPTY</span>
    <p class="Pp">An object which overloads stringification to return an empty
        string.</p>
  </li>
  <li><span class="Li">$STR_OVERLOAD_FULL</span>
    <p class="Pp">An object which overloads stringification to return a
        non-empty string.</p>
  </li>
  <li><span class="Li">$STR_OVERLOAD_CLASS_NAME</span>
    <p class="Pp">An object which overloads stringification to return a loaded
        package name.</p>
  </li>
  <li><span class="Li">$NUM_OVERLOAD_ZERO</span></li>
  <li><span class="Li">$NUM_OVERLOAD_ONE</span></li>
  <li><span class="Li">$NUM_OVERLOAD_NEG</span></li>
  <li><span class="Li">$NUM_OVERLOAD_DECIMAL</span></li>
  <li><span class="Li">$NUM_OVERLOAD_NEG_DECIMAL</span></li>
  <li><span class="Li">$CODE_OVERLOAD</span></li>
  <li><span class="Li">$SCALAR_OVERLOAD</span>
    <p class="Pp">An object which overloads scalar dereferencing to return a
        non-empty string.</p>
  </li>
  <li><span class="Li">$ARRAY_OVERLOAD</span>
    <p class="Pp">An object which overloads array dereferencing to return a
        non-empty array.</p>
  </li>
  <li><span class="Li">$HASH_OVERLOAD</span>
    <p class="Pp">An object which overloads hash dereferencing to return a
        non-empty hash.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Globs_and_the__T::GlobOverload_package"><a class="permalink" href="#Globs_and_the__T::GlobOverload_package">Globs
  and the _T::GlobOverload package</a></h2>
To create a glob you can pass around for tests, use this code:
<p class="Pp"><span class="Li"></span></p>
<pre>
  my $GLOB = do {
      no warnings 'once';
      *SOME_GLOB;
  };
</pre>
<p class="Pp">The <span class="Li">&quot;_T::GlobOverload&quot;</span> package
    is defined when you load <span class="Li">&quot;Test::Specio&quot;</span> so
    you can create your own glob overloading objects. Such objects cannot be
    exported because the glob they return does not transfer across packages
    properly.</p>
<p class="Pp">You can create such a variable like this:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  local *FOO;
  my $GLOB_OVERLOAD = _T::GlobOverload-&gt;new( \*FOO );
</pre>
<p class="Pp">If you want to create a glob overloading object that returns a
    filehandle, do this:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  local *BAR;
  open BAR, '&lt;', $^X or die &quot;Could not open $^X for the test&quot;;
  my $GLOB_OVERLOAD_FH = _T::GlobOverload-&gt;new( \*BAR );
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
Bugs may be submitted at &lt;https://github.com/houseabsolute/Specio/issues&gt;.
<p class="Pp">I am also usually active on IRC as 'autarch' on
    <span class="Li">&quot;irc://irc.perl.org&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE"><a class="permalink" href="#SOURCE">SOURCE</a></h1>
The source code repository for Specio can be found at
  &lt;https://github.com/houseabsolute/Specio&gt;.
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Dave Rolsky &lt;autarch@urth.org&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
This software is Copyright (c) 2012 - 2020 by Dave Rolsky.
<p class="Pp">This is free software, licensed under:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  The Artistic License 2.0 (GPL Compatible)
</pre>
<p class="Pp">The full text of the license can be found in the <i>LICENSE</i>
    file included with this distribution.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-03-14</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
