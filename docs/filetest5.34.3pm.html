<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>filetest(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">filetest(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">filetest(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">filetest - Perl pragma to control the filetest permission
    operators</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    $can_perhaps_read = -r &quot;file&quot;;      # use the mode bits
    {
        use filetest 'access';          # intuit harder
        $can_really_read = -r &quot;file&quot;;
    }
    $can_perhaps_read = -r &quot;file&quot;;      # use the mode bits again
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This pragma tells the compiler to change the behaviour of the
    filetest permission operators, <span class="Li">&quot;-r&quot;</span>
    <span class="Li">&quot;-w&quot;</span>
    <span class="Li">&quot;-x&quot;</span>
    <span class="Li">&quot;-R&quot;</span>
    <span class="Li">&quot;-W&quot;</span>
    <span class="Li">&quot;-X&quot;</span> (see perlfunc).</p>
<p class="Pp">The default behaviour of file test operators is to use the simple
    mode bits as returned by the <b>stat()</b> family of system calls. However,
    many operating systems have additional features to define more complex
    access rights, for example ACLs (Access Control Lists). For such
    environments, <span class="Li">&quot;use filetest&quot;</span> may help the
    permission operators to return results more consistent with other tools.</p>
<p class="Pp">The <span class="Li">&quot;use filetest&quot;</span> or
    <span class="Li">&quot;no filetest&quot;</span> statements affect file tests
    defined in their block, up to the end of the closest enclosing block (they
    are lexically block-scoped).</p>
<p class="Pp">Currently, only the <span class="Li">&quot;access&quot;</span>
    sub-pragma is implemented. It enables (or disables) the use of
    <b>access()</b> when available, that is, on most UNIX systems and other
    POSIX environments. See details below.</p>
<section class="Ss">
<h2 class="Ss" id="Consider_this_carefully"><a class="permalink" href="#Consider_this_carefully">Consider
  this carefully</a></h2>
<p class="Pp">The <b>stat()</b> mode bits are probably right for most of the
    files and directories found on your system, because few people want to use
    the additional features offered by <b>access()</b>. But you may encounter
    surprises if your program runs on a system that uses ACLs, since the
    <b>stat()</b> information won't reflect the actual permissions.</p>
<p class="Pp">There may be a slight performance decrease in the filetest
    operations when the filetest pragma is in effect, because checking bits is
    very cheap.</p>
<p class="Pp">Also, note that using the file tests for security purposes is a
    lost cause from the start: there is a window open for race conditions (who
    is to say that the permissions will not change between the test and the real
    operation?). Therefore if you are serious about security, just try the real
    operation and test for its success - think in terms of atomic operations.
    Filetests are more useful for filesystem administrative tasks, when you have
    no need for the content of the elements on disk.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The__access__sub-pragma"><a class="permalink" href="#The__access__sub-pragma">The
  &quot;access&quot; sub-pragma</a></h2>
<p class="Pp">UNIX and POSIX systems provide an abstract <b>access()</b>
    operating system call, which should be used to query the read, write, and
    execute rights. This function hides various distinct approaches in
    additional operating system specific security features, like Access Control
    Lists (ACLs)</p>
<p class="Pp">The extended filetest functionality is used by Perl only when the
    argument of the operators is a filename, not when it is a filehandle.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Limitation_with_regard_to____"><a class="permalink" href="#Limitation_with_regard_to____">Limitation
  with regard to &quot;_&quot;</a></h2>
<p class="Pp">Because <b>access()</b> does not invoke <b>stat()</b> (at least
    not in a way visible to Perl), <b>the stat result cache &quot;_&quot; is not
    set</b>. This means that the outcome of the following two tests is
    different. The first has the stat bits of <i>/etc/passwd</i> in
    <span class="Li">&quot;_&quot;</span>, and in the second case this still
    contains the bits of <span class="Li">&quot;/etc&quot;</span>.</p>
<p class="Pp"></p>
<pre> { -d '/etc';
   -w '/etc/passwd';
   print -f _ ? 'Yes' : 'No';   # Yes
 }
 { use filetest 'access';
   -d '/etc';
   -w '/etc/passwd';
   print -f _ ? 'Yes' : 'No';   # No
 }
</pre>
<p class="Pp">Of course, unless your OS does not implement <b>access()</b>, in
    which case the pragma is simply ignored. Best not to use
    <span class="Li">&quot;_&quot;</span> at all in a file where the filetest
    pragma is active!</p>
<p class="Pp">As a side effect, as <span class="Li">&quot;_&quot;</span> doesn't
    work, stacked filetest operators (<span class="Li">&quot;-f -w
    $file&quot;</span>) won't work either.</p>
<p class="Pp">This limitation might be removed in a future version of perl.</p>
</section>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-06-14</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
