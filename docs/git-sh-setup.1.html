<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
       Title: git-sh-setup
      Author: [FIXME: author] [see http://www.docbook.org/tdg5/en/html/author]
   Generator: DocBook XSL Stylesheets v1.79.2 <http://docbook.sf.net/>
        Date: 2025-07-22
      Manual: Git Manual
      Source: Git 2.50.1.428.g0e8243a355
    Language: English
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>GIT-SH-SETUP(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GIT-SH-SETUP(1)</td>
    <td class="head-vol">Git Manual</td>
    <td class="head-rtitle">GIT-SH-SETUP(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">git-sh-setup - Common Git shell script setup code</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><i>. &quot;$(git --exec-path)/git-sh-setup&quot;</i></pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This is not a command the end user would want to run. Ever. This
    documentation is meant for people who are studying the Porcelain-ish scripts
    and/or are writing new ones.</p>
<p class="Pp">The <i>git sh-setup</i> scriptlet is designed to be sourced (using
    .) by other shell scripts to set up some variables pointing at the normal
    Git directories and a few helper shell functions.</p>
<p class="Pp">Before sourcing it, your script should set up a few variables;
    <b>USAGE</b> (and <b>LONG_USAGE</b>, if any) is used to define the message
    given by <b>usage</b>() shell function. <b>SUBDIRECTORY_OK</b> can be set if
    the script can run from a subdirectory of the working tree (some commands do
    not).</p>
<p class="Pp">The scriptlet sets <b>GIT_DIR</b> and <b>GIT_OBJECT_DIRECTORY</b>
    shell variables, but does <b>not</b> export them to the environment.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<p class="Pp">die</p>
<div class="Bd-indent">exit after emitting the supplied error message to the
  standard error stream.</div>
<p class="Pp">usage</p>
<div class="Bd-indent">die with the usage message.</div>
<p class="Pp">set_reflog_action</p>
<div class="Bd-indent">Set <b>GIT_REFLOG_ACTION</b> environment to a given
  string (typically the name of the program) unless it is already set. Whenever
  the script runs a <b>git</b> command that updates refs, a reflog entry is
  created using the value of this string to leave the record of what command
  updated the ref.</div>
<p class="Pp">git_editor</p>
<div class="Bd-indent">runs an editor of user&#x2019;s choice (GIT_EDITOR,
  core.editor, VISUAL or EDITOR) on a given file, but error out if no editor is
  specified and the terminal is dumb.</div>
<p class="Pp">is_bare_repository</p>
<div class="Bd-indent">outputs <b>true</b> or <b>false</b> to the standard
  output stream to indicate if the repository is a bare repository (i.e. without
  an associated working tree).</div>
<p class="Pp">cd_to_toplevel</p>
<div class="Bd-indent">runs chdir to the toplevel of the working tree.</div>
<p class="Pp">require_work_tree</p>
<div class="Bd-indent">checks if the current directory is within the working
  tree of the repository, and otherwise dies.</div>
<p class="Pp">require_work_tree_exists</p>
<div class="Bd-indent">checks if the working tree associated with the repository
  exists, and otherwise dies. Often done before calling cd_to_toplevel, which is
  impossible to do if there is no working tree.</div>
<p class="Pp">require_clean_work_tree &lt;action&gt; [&lt;hint&gt;]</p>
<div class="Bd-indent">checks that the working tree and index associated with
  the repository have no uncommitted changes to tracked files. Otherwise it
  emits an error message of the form <b>Cannot</b> <i>&lt;action&gt;</i><b>:</b>
  <i>&lt;reason&gt;</i>. <i>&lt;hint&gt;</i>, and dies. Example:
<p class="Pp"></p>
<div class="Bd-indent">
<pre>require_clean_work_tree rebase &quot;Please commit or stash them.&quot;</pre>
</div>
</div>
<p class="Pp">get_author_ident_from_commit</p>
<div class="Bd-indent">outputs code for use with eval to set the
  GIT_AUTHOR_NAME, GIT_AUTHOR_EMAIL and GIT_AUTHOR_DATE variables for a given
  commit.</div>
<p class="Pp">create_virtual_base</p>
<div class="Bd-indent">modifies the first file so only lines in common with the
  second file remain. If there is insufficient common material, then the first
  file is left empty. The result is suitable as a virtual base input for a 3-way
  merge.</div>
</section>
<section class="Sh">
<h1 class="Sh" id="GIT"><a class="permalink" href="#GIT">GIT</a></h1>
<p class="Pp">Part of the <b>git</b>(1) suite</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/06/2021</td>
    <td class="foot-os">Git 2.32.0</td>
  </tr>
</table>
</body>
</html>
