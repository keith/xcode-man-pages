<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Sub::Defer(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Sub::Defer(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Sub::Defer(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Sub::Defer - Defer generation of subroutines until they are first called
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
 use Sub::Defer;

 my $deferred = defer_sub 'Logger::time_since_first_log' =&gt; sub {
    my $t = time;
    sub { time - $t };
 };

  Logger-&gt;time_since_first_log; # returns 0 and replaces itself
  Logger-&gt;time_since_first_log; # returns time - $t
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
These subroutines provide the user with a convenient way to defer creation of
  subroutines and methods until they are first called.
</section>
<section class="Sh">
<h1 class="Sh" id="SUBROUTINES"><a class="permalink" href="#SUBROUTINES">SUBROUTINES</a></h1>
<section class="Ss">
<h2 class="Ss" id="defer_sub"><a class="permalink" href="#defer_sub">defer_sub</a></h2>
<span class="Li"></span>
<pre>
 my $coderef = defer_sub $name =&gt; sub { ... }, \%options;
</pre>
<p class="Pp">This subroutine returns a coderef that encapsulates the provided
    sub - when it is first called, the provided sub is called and is -itself-
    expected to return a subroutine which will be goto'ed to on subsequent
    calls.</p>
<p class="Pp">If a name is provided, this also installs the sub as that name -
    and when the subroutine is undeferred will re-install the final version for
    speed.</p>
<p class="Pp">Exported by default.</p>
<p class="Pp"><i>Options</i></p>
<p class="Pp">A hashref of options can optionally be specified.</p>
<dl class="Bl-tag">
  <dt>package</dt>
  <dd>The package to generate the sub in. Will be overridden by a fully
      qualified <span class="Li">$name</span> option. If not specified, will
      default to the caller's package.</dd>
  <dt>attributes</dt>
  <dd>The &quot;Subroutine Attributes&quot; in perlsub to apply to the sub
      generated. Should be specified as an array reference.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="undefer_sub"><a class="permalink" href="#undefer_sub">undefer_sub</a></h2>
<span class="Li"></span>
<pre>
 my $coderef = undefer_sub \&amp;Foo::name;
</pre>
<p class="Pp">If the passed coderef has been deferred this will
    &quot;undefer&quot; it. If the passed coderef has not been deferred, this
    will just return it.</p>
<p class="Pp">If this is confusing, take a look at the example in the
    &quot;SYNOPSIS&quot;.</p>
<p class="Pp">Exported by default.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="defer_info"><a class="permalink" href="#defer_info">defer_info</a></h2>
<span class="Li"></span>
<pre>
 my $data = defer_info $sub;
 my ($name, $generator, $options, $undeferred_sub) = @$data;
</pre>
<p class="Pp">Returns original arguments to defer_sub, plus the undeferred
    version if this sub has already been undeferred.</p>
<p class="Pp">Note that <span class="Li">$sub</span> can be either the original
    deferred version or the undeferred version for convenience.</p>
<p class="Pp">Not exported by default.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="undefer_all"><a class="permalink" href="#undefer_all">undefer_all</a></h2>
<span class="Li"></span>
<pre>
 undefer_all();
</pre>
<p class="Pp">This will undefer all deferred subs in one go. This can be very
    useful in a forking environment where child processes would each have to
    undefer the same subs. By calling this just before you start forking
    children you can undefer all currently deferred subs in the parent so that
    the children do not have to do it. Note this may bake the behavior of some
    subs that were intended to calculate their behavior later, so it shouldn't
    be used midway through a module load or class definition.</p>
<p class="Pp">Exported by default.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="undefer_package"><a class="permalink" href="#undefer_package">undefer_package</a></h2>
<span class="Li"></span>
<pre>
  undefer_package($package);
</pre>
<p class="Pp">This undefers all deferred subs in a package.</p>
<p class="Pp">Not exported by default.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
See Sub::Quote for support and contact information.
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
See Sub::Quote for authors.
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
See Sub::Quote for the copyright and license.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-01</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
