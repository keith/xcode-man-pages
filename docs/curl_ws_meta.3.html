<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   **************************************************************************
   *                                  _   _ ____  _
   *  Project                     ___| | | |  _ \| |
   *                             / __| | | | |_) | |
   *                            | (__| |_| |  _ <| |___
   *                             \___|\___/|_| \_\_____|
   *
   * Copyright (C) 1998 - 2022, Daniel Stenberg, <daniel@haxx.se>, et al.
   *
   * This software is licensed as described in the file COPYING, which
   * you should have received as part of this distribution. The terms
   * are also available at https://curl.se/docs/copyright.html.
   *
   * You may opt to use, copy, modify, merge, publish, distribute and/or sell
   * copies of the Software, and permit persons to whom the Software is
   * furnished to do so, under the terms of the COPYING file.
   *
   * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
   * KIND, either express or implied.
   *
   * SPDX-License-Identifier: curl
   *
   **************************************************************************
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>curl_ws_meta(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">curl_ws_meta(3)</td>
    <td class="head-vol">libcurl Manual</td>
    <td class="head-rtitle">curl_ws_meta(3)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">curl_ws_meta - meta data WebSocket information</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;curl/easy.h&gt;
struct curl_ws_frame {
<br/>
  int age;              /* zero */
<br/>
  int flags;            /* See the CURLWS_* defines */
<br/>
  curl_off_t offset;    /* the offset of this data into the frame */
<br/>
  curl_off_t bytesleft; /* number of pending bytes left of the payload */
};
struct curl_ws_frame *curl_ws_meta(CURL *curl);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This function call is EXPERIMENTAL.</p>
<p class="Pp">When the write callback (<i>CURLOPT_WRITEFUNCTION(3)</i>) is
    invoked on received WebSocket traffic, <i>curl_ws_meta(3)</i> can be called
    from within the callback to provide additional information about the current
    frame.</p>
<p class="Pp">This function only works from within the callback, and only when
    receiving WebSocket data.</p>
<p class="Pp">This function requires an easy handle as input argument for
    libcurl to know what transfer the question is about, but as there is no such
    pointer provided to the callback by libcurl itself, applications that want
    to use <i>curl_ws_meta(3)</i> need to pass it on to the callback on its
  own.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="struct_fields"><a class="permalink" href="#struct_fields">struct
  fields</a></h1>
<dl class="Bl-tag">
  <dt id="age"><a class="permalink" href="#age">age</a></dt>
  <dd>This field specify the age of this struct. It is always zero for now.</dd>
  <dt id="flags"><a class="permalink" href="#flags">flags</a></dt>
  <dd>This is a bitmask with individual bits set that describes the WebSocket
      data. See the list below.</dd>
  <dt id="offset"><a class="permalink" href="#offset">offset</a></dt>
  <dd>When this frame is a continuation of fragment data already delivered, this
      is the offset into the final fragment where this piece belongs.</dd>
  <dt id="bytesleft"><a class="permalink" href="#bytesleft">bytesleft</a></dt>
  <dd>If this is not a complete fragment, the <i>bytesleft</i> field informs
      about how many additional bytes are expected to arrive before this
      fragment is complete.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FLAGS"><a class="permalink" href="#FLAGS">FLAGS</a></h1>
<dl class="Bl-tag">
  <dt id="CURLWS_TEXT"><a class="permalink" href="#CURLWS_TEXT">CURLWS_TEXT</a></dt>
  <dd>The buffer contains text data. Note that this makes a difference to
      WebSocket but libcurl itself will not make any verification of the content
      or precautions that you actually receive valid UTF-8 content.</dd>
  <dt id="CURLWS_BINARY"><a class="permalink" href="#CURLWS_BINARY">CURLWS_BINARY</a></dt>
  <dd>This is binary data.</dd>
  <dt id="CURLWS_CONT"><a class="permalink" href="#CURLWS_CONT">CURLWS_CONT</a></dt>
  <dd>This is not the final fragment of the message, it implies that there will
      be another fragment coming as part of the same message.</dd>
  <dt id="CURLWS_CLOSE"><a class="permalink" href="#CURLWS_CLOSE">CURLWS_CLOSE</a></dt>
  <dd>This transfer is now closed.</dd>
  <dt id="CURLWS_PING"><a class="permalink" href="#CURLWS_PING">CURLWS_PING</a></dt>
  <dd>This as an incoming ping message, that expects a pong response.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>
/* we pass a pointer to this struct to the callback */
struct customdata {
<br/>
  CURL *easy;
<br/>
  void *ptr;
};
static size_t writecb(unsigned char *buffer,
<br/>
                      size_t size, size_t nitems, void *p)
{
<br/>
  struct customdata *c = (struct customdata *)p;
<br/>
  struct curl_ws_frame *m = curl_ws_meta(c-&gt;easy);
<br/>
  /* m-&gt;flags tells us about the traffic */
}
{
<br/>
  struct customdata custom;
<br/>
  custom.easy = easy;
<br/>
  custom.ptr = NULL;
<br/>
  curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, writecb);
<br/>
  curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;custom);
}</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AVAILABILITY"><a class="permalink" href="#AVAILABILITY">AVAILABILITY</a></h1>
<p class="Pp">Added in 7.86.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">This function returns a pointer to a <i>curl_ws_frame</i> struct
    with information that is valid for this specific callback invocation. If it
    cannot return this information, or if the function is called in the wrong
    context, it returns NULL.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>curl_easy_setopt</b>(3), <b>curl_easy_getinfo</b>(3),
    <b>curl_ws_send</b>(3), <b>curl_ws_recv</b>(3), </p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">October 3, 2022</td>
    <td class="foot-os">libcurl 7.87.0</td>
  </tr>
</table>
</body>
</html>
