<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   -*- nroff -*-
   Portions of this file are subject to the following copyright.
   See the Net-SNMP COPYING file for more details and other
   copyrights that may apply:
   /***********************************************************
   	Copyright 1989 by Carnegie Mellon University
  
                         All Rights Reserved
  
   Permission to use, copy, modify, and distribute this software and its
   documentation for any purpose and without fee is hereby granted,
   provided that the above copyright notice appear in all copies and that
   both that copyright notice and this permission notice appear in
   supporting documentation, and that the name of CMU not be
   used in advertising or publicity pertaining to distribution of the
   software without specific, written prior permission.
  
   CMU DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING
   ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT SHALL
   CMU BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR
   ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
   WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,
   ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
   SOFTWARE.
   ******************************************************************/
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>SNMPTRAPD(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SNMPTRAPD(8)</td>
    <td class="head-vol">Net-SNMP</td>
    <td class="head-rtitle">SNMPTRAPD(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">snmptrapd - Receive and log SNMP trap messages.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>snmptrapd</b> [OPTIONS] [LISTENING ADDRESSES]</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>snmptrapd</b> is an SNMP application that receives and logs
    SNMP TRAP and INFORM messages.</p>
<p class="Pp">Note: the default is to listen on UDP port 162 on all IPv4
    interfaces. Since 162 is a privileged port, <b>snmptrapd</b> must typically
    be run as root.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt id="a"><a class="permalink" href="#a"><b>-a</b></a></dt>
  <dd>Ignore authenticationFailure traps.</dd>
  <dt id="A"><a class="permalink" href="#A"><b>-A</b></a></dt>
  <dd>Append to the log file rather than truncating it.
    <p class="Pp">Note that this needs to come <i>before</i> any -Lf options
        that it should apply to.</p>
  </dd>
  <dt id="c"><a class="permalink" href="#c"><b>-c</b><i> FILE</i></a></dt>
  <dd>Read <i>FILE</i> as a configuration file (or a comma-separated list of
      configuration files).</dd>
  <dt id="C"><a class="permalink" href="#C"><b>-C</b></a></dt>
  <dd>Do not read any configuration files except the one optionally specified by
      the <b>-c</b> option.</dd>
  <dt id="d"><a class="permalink" href="#d"><b>-d</b></a></dt>
  <dd>Dump (in hexadecimal) the sent and received SNMP packets.</dd>
  <dt id="D_TOKEN_,...__"><a class="permalink" href="#D_TOKEN_,...__"><b>-D[TOKEN[,...]]</b></a></dt>
  <dd>Turn on debugging output for the given <i>TOKEN</i>(s). Try <i>ALL</i> for
      extremely verbose output.</dd>
  <dt id="f"><a class="permalink" href="#f"><b>-f</b></a></dt>
  <dd>Do not fork() from the calling shell.</dd>
  <dt id="F"><a class="permalink" href="#F"><b>-F</b><i> FORMAT</i></a></dt>
  <dd>When logging to standard output, use the format in the string
      <i>FORMAT</i>. See the section <b>FORMAT SPECIFICATIONS</b> below for more
      details.</dd>
  <dt id="h,"><a class="permalink" href="#h,"><b>-h, --help</b></a></dt>
  <dd>Display a brief usage message and then exit.</dd>
  <dt id="H"><a class="permalink" href="#H"><b>-H</b></a></dt>
  <dd>Display a list of configuration file directives understood by the trap
      daemon and then exit.</dd>
  <dt id="I"><a class="permalink" href="#I"><b>-I
    <i>[-]INITLIST</i></b></a></dt>
  <dd>Specifies which modules should (or should not) be initialized when
      snmptrapd starts up. If the comma-separated <i>INITLIST</i> is preceded
      with a '-', it is the list of modules that should <i>not</i> be started.
      Otherwise this is the list of the <i>only</i> modules that should be
      started.
    <p class="Pp">To get a list of compiled modules, run snmptrapd with the
        arguments <i>-Dmib_init -H</i> (assuming debugging support has been
        compiled in).</p>
  </dd>
  <dt id="L_efos_"><a class="permalink" href="#L_efos_"><b>-L[efos]</b></a></dt>
  <dd>Specify where logging output should be directed (standard error or output,
      to a file or via syslog). See LOGGING OPTIONS in <i>snmpcmd(1)</i> for
      details.</dd>
  <dt id="m"><a class="permalink" href="#m"><b>-m</b> <i>MIBLIST</i></a></dt>
  <dd>Specifies a colon separated list of MIB modules to load for this
      application. This overrides the environment variable MIBS. See
      <i>snmpcmd(1)</i> for details.</dd>
  <dt id="M"><a class="permalink" href="#M"><b>-M</b> <i>DIRLIST</i></a></dt>
  <dd>Specifies a colon separated list of directories to search for MIBs. This
      overrides the environment variable MIBDIRS. See <i>snmpcmd(1)</i> for
      details.</dd>
  <dt id="n"><a class="permalink" href="#n"><b>-n</b></a></dt>
  <dd>Do not attempt to translate source addresses of incoming packets into
      hostnames.</dd>
  <dt id="p"><a class="permalink" href="#p"><b>-p</b><i> FILE</i></a></dt>
  <dd>Save the process ID of the trap daemon in <i>FILE</i>.</dd>
  <dt id="O"><a class="permalink" href="#O"><b>-O</b><i>
    [abeEfnqQsStTuUvxX]</i></a></dt>
  <dd>Specifies how MIB objects and other output should be displayed. See the
      section <b>OUTPUT OPTIONS</b> in the <i>snmpcmd(1)</i> manual page for
      details.</dd>
  <dt id="t"><a class="permalink" href="#t"><b>-t</b></a></dt>
  <dd>Do not log traps to syslog. This disables logging to syslog. This is
      useful if you want the snmptrapd application to <b>only</b> run traphandle
      hooks and not to log any traps to any location.</dd>
  <dt id="v,"><a class="permalink" href="#v,"><b>-v, --version</b></a></dt>
  <dd>Print version information for the trap daemon and then exit.</dd>
  <dt id="x"><a class="permalink" href="#x"><b>-x <i>ADDRESS</i></b></a></dt>
  <dd>Connect to the AgentX master agent on the specified address, rather than
      the default &quot;/var/agentx/master&quot;. See <i>snmpd(8)</i> for
      details of the format of such addresses.</dd>
  <dt><b>--</b><i>name</i><b>=&quot;value&quot;</b></dt>
  <dd>Allows to specify any token (&quot;name&quot;) supported in the
      <i>snmptrapd.conf</i> file and sets its value to &quot;value&quot;.
      Overrides the corresponding token in the <i>snmptrapd.conf</i> file. See
      <i>snmptrapd.conf(5)</i> for the full list of tokens.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FORMAT_SPECIFICATIONS"><a class="permalink" href="#FORMAT_SPECIFICATIONS">FORMAT
  SPECIFICATIONS</a></h1>
<p class="Pp"><b>snmptrapd</b> interprets format strings similarly to
    <i>printf(3)</i>. It understands the following formatting sequences:</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>%%</b></dt>
  <dd>a literal %</dd>
  <dt><b>%a</b></dt>
  <dd>the contents of the agent-addr field of the PDU (v1 TRAPs only)</dd>
  <dt><b>%A</b></dt>
  <dd>the hostname corresponding to the contents of the agent-addr field of the
      PDU, if available, otherwise the contents of the agent-addr field of the
      PDU (v1 TRAPs only).</dd>
  <dt><b>%b</b></dt>
  <dd>PDU source address (Note: this is not necessarily an IPv4 address)</dd>
  <dt><b>%B</b></dt>
  <dd>PDU source hostname if available, otherwise PDU source address (see note
      above)</dd>
  <dt><b>%h</b></dt>
  <dd>current hour on the local system</dd>
  <dt><b>%H</b></dt>
  <dd>the hour field from the sysUpTime.0 varbind</dd>
  <dt><b>%j</b></dt>
  <dd>current minute on the local system</dd>
  <dt><b>%J</b></dt>
  <dd>the minute field from the sysUpTime.0 varbind</dd>
  <dt><b>%k</b></dt>
  <dd>current second on the local system</dd>
  <dt><b>%K</b></dt>
  <dd>the seconds field from the sysUpTime.0 varbind</dd>
  <dt><b>%l</b></dt>
  <dd>current day of month on the local system</dd>
  <dt><b>%L</b></dt>
  <dd>the day of month field from the sysUpTime.0 varbind</dd>
  <dt><b>%m</b></dt>
  <dd>current (numeric) month on the local system</dd>
  <dt><b>%M</b></dt>
  <dd>the numeric month field from the sysUpTime.0 varbind</dd>
  <dt><b>%N</b></dt>
  <dd>enterprise string</dd>
  <dt><b>%q</b></dt>
  <dd>trap sub-type (numeric, in decimal)</dd>
  <dt><b>%P</b></dt>
  <dd>security information from the PDU (community name for v1/v2c, user and
      context for v3)</dd>
  <dt><b>%t</b></dt>
  <dd>decimal number of seconds since the operating system epoch (as returned by
      <i>time(2)</i>)</dd>
  <dt><b>%T</b></dt>
  <dd>the value of the sysUpTime.0 varbind in seconds</dd>
  <dt><b>%v</b></dt>
  <dd>list of variable-bindings from the notification payload. These will be
      separated by a tab, or by a comma and a blank if the alternate form is
      requested See also %V</dd>
  <dt><b>%V</b></dt>
  <dd>specifies the variable-bindings separator. This takes a sequence of
      characters, up to the next % (to embed a % in the string, use \%)</dd>
  <dt><b>%w</b></dt>
  <dd>trap type (numeric, in decimal)</dd>
  <dt><b>%W</b></dt>
  <dd>trap description</dd>
  <dt><b>%y</b></dt>
  <dd>current year on the local system</dd>
  <dt><b>%Y</b></dt>
  <dd>the year field from the sysUpTime.0 varbind</dd>
</dl>
</div>
<p class="Pp">In addition to these values, an optional field width and precision
    may also be specified , just as in <i>printf(3)</i>, and a flag value. The
    following flags are supported:</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-</b></dt>
  <dd>left justify</dd>
  <dt><b>0</b></dt>
  <dd>use leading zeros</dd>
  <dt><b>#</b></dt>
  <dd>use alternate form</dd>
</dl>
</div>
<p class="Pp">The &quot;use alternate form&quot; flag changes the behavior of
    various format string sequences:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Time information will be displayed based on GMT (rather than the local
      timezone)</dd>
  <dt></dt>
  <dd>The variable-bindings will be a comma-separated list (rather than a
      tab-separated one)</dd>
  <dt></dt>
  <dd>The system uptime will be broken down into a human-meaningful format
      (rather than being a simple integer)</dd>
</dl>
<section class="Ss">
<h2 class="Ss" id="Examples:"><a class="permalink" href="#Examples:">Examples:</a></h2>
<p class="Pp">To get a message like &quot;14:03 TRAP3.1 from
    humpty.ucd.edu&quot; you could use something like this:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>snmptrapd -P -F &quot;%02.2h:%02.2j TRAP%w.%q from %A\n&quot;</pre>
</div>
<p class="Pp">If you want the same thing but in GMT rather than local time,
  use</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>snmptrapd -P -F &quot;%#02.2h:%#02.2j TRAP%w.%q from %A\n&quot;</pre>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="LISTENING_ADDRESSES"><a class="permalink" href="#LISTENING_ADDRESSES">LISTENING
  ADDRESSES</a></h1>
<p class="Pp">By default, <b>snmptrapd</b> listens for incoming SNMP TRAP and
    INFORM packets on UDP port 162 on all IPv4 interfaces. However, it is
    possible to modify this behaviour by specifying one or more listening
    addresses as arguments to <b>snmptrapd</b>. See the <i>snmpd(8)</i> manual
    page for more information about the format of listening addresses.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTIFICATION-LOG-MIB_SUPPORT"><a class="permalink" href="#NOTIFICATION-LOG-MIB_SUPPORT">NOTIFICATION-LOG-MIB
  SUPPORT</a></h1>
<p class="Pp">As of net-snmp 5.0, the snmptrapd application supports the
    NOTIFICATION-LOG-MIB. It does this by opening an AgentX subagent connection
    to the master snmpd agent and registering the notification log tables. As
    long as the snmpd application is started first, it will attach itself to it
    and thus you should be able to view the last recorded notifications via the
    nlmLogTable and nlmLogVariableTable. See the snmptrapd.conf file and the
    &quot;doNotRetainNotificationLogs&quot; token for turning off this support.
    See the NOTIFICATION-LOG-MIB for more details about the MIB itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXTENSIBILITY_AND_CONFIGURATION"><a class="permalink" href="#EXTENSIBILITY_AND_CONFIGURATION">EXTENSIBILITY
  AND CONFIGURATION</a></h1>
<p class="Pp">See the <i>snmptrapd.conf(5)</i> manual page.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">snmpcmd(1), snmpd(8), printf(3), snmptrapd.conf(5), syslog(8),
    variables(5)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">30 Mar 2011</td>
    <td class="foot-os">V5.6.2.1</td>
  </tr>
</table>
</body>
</html>
