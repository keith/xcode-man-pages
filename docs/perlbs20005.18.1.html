<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>PERLBS2000(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERLBS2000(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERLBS2000(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">perlbs2000 - building and installing Perl for BS2000.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">This document will help you Configure, build, test and install
    Perl on BS2000 in the POSIX subsystem.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This is a ported perl for the POSIX subsystem in BS2000 VERSION
    OSD V3.1A or later. It may work on other versions, but we started porting
    and testing it with 3.1A and are currently using Version V4.0A.</p>
<p class="Pp">You may need the following GNU programs in order to install
  perl:</p>
<section class="Ss">
<h2 class="Ss" id="gzip_on_"><a class="permalink" href="#gzip_on_">gzip on
  BS2000</a></h2>
<p class="Pp">We used version 1.2.4, which could be installed out of the box
    with one failure during 'make check'.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="bison_on_"><a class="permalink" href="#bison_on_">bison on
  BS2000</a></h2>
<p class="Pp">The yacc coming with BS2000 POSIX didn't work for us. So we had to
    use bison. We had to make a few changes to perl in order to use the pure
    (reentrant) parser of bison. We used version 1.25, but we had to add a few
    changes due to EBCDIC. See below for more details concerning yacc.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Unpacking_Perl_Distribution_on_"><a class="permalink" href="#Unpacking_Perl_Distribution_on_">Unpacking
  Perl Distribution on BS2000</a></h2>
<p class="Pp">To extract an ASCII tar archive on BS2000 POSIX you need an ASCII
    filesystem (we used the mountpoint /usr/local/ascii for this). Now you
    extract the archive in the ASCII filesystem without I/O-conversion:</p>
<p class="Pp">cd /usr/local/ascii export IO_CONVERSION=NO gunzip &lt;
    /usr/local/src/perl.tar.gz | pax -r</p>
<p class="Pp">You may ignore the error message for the first element of the
    archive (this doesn't look like a tar archive / skipping to next file...),
    it's only the directory which will be created automatically anyway.</p>
<p class="Pp">After extracting the archive you copy the whole directory tree to
    your EBCDIC filesystem. <b>This time you use I/O-conversion</b>:</p>
<p class="Pp">cd /usr/local/src IO_CONVERSION=YES cp -r
    /usr/local/ascii/perl5.005_02 ./</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Compiling_Perl_on_"><a class="permalink" href="#Compiling_Perl_on_">Compiling
  Perl on BS2000</a></h2>
<p class="Pp">There is a &quot;hints&quot; file for BS2000 called hints.posix-bc
    (because posix-bc is the OS name given by `uname`) that specifies the
    correct values for most things. The major problem is (of course) the EBCDIC
    character set. We have german EBCDIC version.</p>
<p class="Pp">Because of our problems with the native yacc we used GNU bison to
    generate a pure (=reentrant) parser for perly.y. So our yacc is really the
    following script:</p>
<p class="Pp">-----8&lt;-----/usr/local/bin/yacc-----8&lt;----- #!
  /usr/bin/sh</p>
<p class="Pp"># Bison as a reentrant yacc:</p>
<p class="Pp"># save parameters: params=&quot;&quot; while [[ $# -gt 1 ]]; do
  <br/>
   params=&quot;$params <span class="Li">$1</span>&quot;
  <br/>
   shift done</p>
<p class="Pp"># add flag <span class="Li">%pure_parser:</span></p>
<p class="Pp">tmpfile=/tmp/bison.$$.y echo <span class="Li">%pure_parser</span>
    &gt; <span class="Li">$tmpfile</span> cat <span class="Li">$1</span>
    &gt;&gt; <span class="Li">$tmpfile</span></p>
<p class="Pp"># call bison:</p>
<p class="Pp">echo &quot;/usr/local/bin/bison --yacc
    <span class="Li">$params</span> <span class="Li">$1</span>\t\t\t(Pure
    Parser)&quot; /usr/local/bin/bison --yacc <span class="Li">$params</span>
    <span class="Li">$tmpfile</span></p>
<p class="Pp"># cleanup:</p>
<p class="Pp">rm -f <span class="Li">$tmpfile</span>
    -----8&lt;----------8&lt;-----</p>
<p class="Pp">We still use the normal yacc for a2p.y though!!! We made a
    softlink called byacc to distinguish between the two versions:</p>
<p class="Pp">ln -s /usr/bin/yacc /usr/local/bin/byacc</p>
<p class="Pp">We build perl using GNU make. We tried the native make once and it
    worked too.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Testing_Perl_on_"><a class="permalink" href="#Testing_Perl_on_">Testing
  Perl on BS2000</a></h2>
<p class="Pp">We still got a few errors during <span class="Li">&quot;make
    test&quot;</span>. Some of them are the result of using bison. Bison prints
    <i>parser error</i> instead of <i>syntax</i> <i>error</i>, so we may ignore
    them. The following list shows our errors, your results may differ:</p>
<p class="Pp">op/numconvert.......FAILED tests 1409-1440
    op/regexp...........FAILED tests 483, 496 op/regexp_noamp.....FAILED tests
    483, 496 pragma/overload.....FAILED tests 152-153, 170-171
    pragma/warnings.....FAILED tests 14, 82, 129, 155, 192, 205, 207
    lib/bigfloat........FAILED tests 351-352, 355 lib/bigfltpm........FAILED
    tests 354-355, 358 lib/complex.........FAILED tests 267, 487
    lib/dumper..........FAILED tests 43, 45 Failed 11/231 test scripts, 95.24%
    okay. 57/10595 subtests failed, 99.46% okay.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Installing_Perl_on_"><a class="permalink" href="#Installing_Perl_on_">Installing
  Perl on BS2000</a></h2>
<p class="Pp">We have no nroff on BS2000 POSIX (yet), so we ignored any errors
    while installing the documentation.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_Perl_in_the_Posix-Shell_of_"><a class="permalink" href="#Using_Perl_in_the_Posix-Shell_of_">Using
  Perl in the Posix-Shell of BS2000</a></h2>
<p class="Pp">BS2000 POSIX doesn't support the shebang notation
    (<span class="Li">&quot;#!/usr/local/bin/perl&quot;</span>), so you have to
    use the following lines instead:</p>
<p class="Pp">: # use perl
  <br/>
   eval 'exec /usr/local/bin/perl -S <span class="Li">$0</span>
    ${1+&quot;$@&quot;}'
  <br/>
   if <span class="Li">$running_under_some_shell</span>;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_Perl_in__native__"><a class="permalink" href="#Using_Perl_in__native__">Using
  Perl in &quot;native&quot; BS2000</a></h2>
<p class="Pp">We don't have much experience with this yet, but try the
    following:</p>
<p class="Pp">Copy your Perl executable to a BS2000 LLM using bs2cp:</p>
<p class="Pp"><span class="Li">&quot;bs2cp /usr/local/bin/perl
    'bs2:perl(perl,l)'&quot;</span></p>
<p class="Pp">Now you can start it with the following (SDF) command:</p>
<p class="Pp"><span class="Li">&quot;/START-PROG
    FROM-FILE=*MODULE(PERL,PERL),PROG-MODE=*ANY,RUN-MODE=*ADV&quot;</span></p>
<p class="Pp">First you get the BS2000 commandline prompt ('*'). Here you may
    enter your parameters, e.g. <span class="Li">&quot;-e 'print &quot;Hello
    World!\\n&quot;;'&quot;</span> (note the double backslash!) or
    <span class="Li">&quot;-w&quot;</span> and the name of your Perl script.
    Filenames starting with <span class="Li">&quot;/&quot;</span> are searched
    in the Posix filesystem, others are searched in the BS2000 filesystem. You
    may even use wildcards if you put a <span class="Li">&quot;%&quot;</span> in
    front of your filename (e.g. <span class="Li">&quot;-w</span>
    <span class="Li">checkfiles.pl %*.c&quot;</span>). Read your C/C++ manual
    for additional possibilities of the commandline prompt (look for
    PARAMETER-PROMPTING).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Floating_point_anomalies_on_"><a class="permalink" href="#Floating_point_anomalies_on_">Floating
  point anomalies on BS2000</a></h2>
<p class="Pp">There appears to be a bug in the floating point implementation on
    BS2000 POSIX systems such that calling <i>int()</i> on the product of a
    number and a small magnitude number is not the same as calling <i>int()</i>
    on the quotient of that number and a large magnitude number. For example, in
    the following Perl code:</p>
<p class="Pp"></p>
<pre>    my $x = 100000.0;
    my $y = int($x * 1e-5) * 1e5; # '0'
    my $z = int($x / 1e+5) * 1e5;  # '100000'
    print &quot;\$y is $y and \$z is $z\n&quot;; # $y is 0 and $z is 100000
</pre>
<p class="Pp">Although one would expect the quantities
    <span class="Li">$y</span> and <span class="Li">$z</span> to be the same and
    equal to 100000 they will differ and instead will be 0 and 100000
    respectively.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_PerlIO_and_different_encodings_on_"><a class="permalink" href="#Using_PerlIO_and_different_encodings_on_">Using
  PerlIO and different encodings on ASCII and EBCDIC partitions</a></h2>
<p class="Pp">Since version 5.8 Perl uses the new PerlIO on BS2000. This enables
    you using different encodings per IO channel. For example you may use</p>
<p class="Pp"></p>
<pre>    use Encode;
    open($f, &quot;&gt;:encoding(ascii)&quot;, &quot;test.ascii&quot;);
    print $f &quot;Hello World!\n&quot;;
    open($f, &quot;&gt;:encoding(posix-bc)&quot;, &quot;test.ebcdic&quot;);
    print $f &quot;Hello World!\n&quot;;
    open($f, &quot;&gt;:encoding(latin1)&quot;, &quot;test.latin1&quot;);
    print $f &quot;Hello World!\n&quot;;
    open($f, &quot;&gt;:encoding(utf8)&quot;, &quot;test.utf8&quot;);
    print $f &quot;Hello World!\n&quot;;
</pre>
<p class="Pp">to get two files containing &quot;Hello World!\n&quot; in ASCII,
    EBCDIC, ISO Latin-1 (in this example identical to ASCII) respective
    UTF-EBCDIC (in this example identical to normal EBCDIC). See the
    documentation of Encode::PerlIO for details.</p>
<p class="Pp">As the PerlIO layer uses raw IO internally, all this totally
    ignores the type of your filesystem (ASCII or EBCDIC) and the IO_CONVERSION
    environment variable. If you want to get the old behavior, that the BS2000
    IO functions determine conversion depending on the filesystem PerlIO still
    is your friend. You use IO_CONVERSION as usual and tell Perl, that it should
    use the native IO layer:</p>
<p class="Pp"></p>
<pre>    export IO_CONVERSION=YES
    export PERLIO=stdio
</pre>
<p class="Pp">Now your IO would be ASCII on ASCII partitions and EBCDIC on
    EBCDIC partitions. See the documentation of PerlIO (without
    <span class="Li">&quot;Encode::&quot;</span>!) for further
  possibilities.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Thomas Dorner</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">INSTALL, perlport.</p>
<section class="Ss">
<h2 class="Ss" id="Mailing_list"><a class="permalink" href="#Mailing_list">Mailing
  list</a></h2>
<p class="Pp">If you are interested in the z/OS (formerly known as OS/390) and
    POSIX-BC (BS2000) ports of Perl then see the perl-mvs mailing list. To
    subscribe, send an empty message to perl-mvs-subscribe@perl.org.</p>
<p class="Pp">See also:</p>
<p class="Pp"></p>
<pre>    http://lists.perl.org/list/perl-mvs.html
</pre>
<p class="Pp">There are web archives of the mailing list at:</p>
<p class="Pp"></p>
<pre>    http://www.xray.mpe.mpg.de/mailing-lists/perl-mvs/
    http://archive.develooper.com/perl-mvs@perl.org/
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">This document was originally written by Thomas Dorner for the
    5.005 release of Perl.</p>
<p class="Pp">This document was podified for the 5.6 release of perl 11 July
    2000.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-01-31</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
