<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>AEA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AEA(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">AEA(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">aea</code> &#x2014; <span class="Nd">Manipulate
    Apple Encrypted Archives</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">aea <b>command</b> [<b>options</b>]</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">aea creates and manipulates Apple Encrypted Archives (AEA)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERBS"><a class="permalink" href="#VERBS">VERBS</a></h1>
<p class="Pp"><b>encrypt</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Create
    a new AEA archive
  <br/>
  <b>decrypt</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Decrypt
    an AEA archive
  <br/>
  <b>sign</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Sign
    an AEA archive
  <br/>
  <b>append</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Append
    data to an existing AEA archive
  <br/>
  <b>id</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Identify
    an AEA archive</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt id="v"><a class="permalink" href="#v"><code class="Fl">-v</code></a></dt>
  <dd>Increase verbosity. Default is silent operation.</dd>
  <dt id="h"><a class="permalink" href="#h"><code class="Fl">-h</code></a></dt>
  <dd>Print usage and exit.</dd>
  <dt id="i"><a class="permalink" href="#i"><code class="Fl">-i</code></a>
    <code class="Fl">-<i>input_file</i></code></dt>
  <dd>Input file. Default is <i>stdin</i>.</dd>
  <dt id="o"><a class="permalink" href="#o"><code class="Fl">-o</code></a>
    <code class="Fl">-<i>output_file</i></code></dt>
  <dd>Output file. Default is <i>stdout</i>.</dd>
  <dt id="profile"><a class="permalink" href="#profile"><code class="Fl">-profile</code></a>
    <code class="Fl">-<i>profile</i></code></dt>
  <dd>
    <br/>
    Archive profile, one of the following (both index and id are allowed):
    <br/>
    - 0: hkdf_sha256_hmac__none__ecdsa_p256 - no encryption, signed
    <br/>
    - 1: hkdf_sha256_aesctr_hmac__symmetric__none - symmetric key encryption
    <br/>
    - 2: hkdf_sha256_aesctr_hmac__symmetric__ecdsa_p256 - symmetric key
      encryption, signed
    <br/>
    - 3: hkdf_sha256_aesctr_hmac__ecdhe_p256__none - ECDHE encryption
    <br/>
    - 4: hkdf_sha256_aesctr_hmac__ecdhe_p256__ecdsa_p256 - ECDHE encryption,
      signed
    <br/>
    - 5: hkdf_sha256_aesctr_hmac__scrypt__none - scrypt encryption (password
      based)</dd>
  <dt id="a"><a class="permalink" href="#a"><code class="Fl">-a</code></a>
    <code class="Fl">-<i>algorithm</i></code></dt>
  <dd>Compression algorithm used when creating archives. One of <i>lzfse</i>,
      <i>lzma</i>, <i>lz4</i>, <i>zlib</i>, <i>copy</i>. Default is
      <i>lzfse</i>.</dd>
  <dt id="b"><a class="permalink" href="#b"><code class="Fl">-b</code></a>
    <code class="Fl">-<i>block_size</i></code></dt>
  <dd>Block size used for compression+encryption, a number with optional
      <i>b</i>, <i>k</i>, <i>m</i>, <i>g</i> suffix (bytes are assumed if no
      suffix is specified). Default is <i>1m</i>.</dd>
  <dt id="t"><a class="permalink" href="#t"><code class="Fl">-t</code></a>
    <code class="Fl">-<i>worker_threads</i></code></dt>
  <dd>Number of worker threads. Default is the number of physical CPU on the
      running machine.</dd>
  <dt id="checksum"><a class="permalink" href="#checksum"><code class="Fl">-checksum</code></a>
    <code class="Fl">-<i>checksum_mode</i></code></dt>
  <dd>Block checksum mode, one of <i>none</i>, <i>murmur64</i>,
    <i>sha256</i>.</dd>
  <dt id="key"><a class="permalink" href="#key"><code class="Fl">-key</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>File containing or receiving the symmetric encryption key.</dd>
  <dt id="key-value"><a class="permalink" href="#key-value"><code class="Fl">-key-value</code></a>
    <code class="Fl">-<i>&lt;key&gt;</i></code></dt>
  <dd>Symmetric encryption key, encoded either as <i>hex:...</i>, or
      <i>base64:...</i>.</dd>
  <dt id="key-gen"><a class="permalink" href="#key-gen"><code class="Fl">-key-gen</code></a></dt>
  <dd>When creating a new archive, generate a new random high entropy symmetric
      key, and store it in the file specified by <b>-key</b>. The new key is
      stored as <i>hex:...</i> in the file.</dd>
  <dt id="password"><a class="permalink" href="#password"><code class="Fl">-password&#x00A0;<i>password_file</i></code></a></dt>
  <dd>File containing or receiving the encryption password.</dd>
  <dt id="password-value"><a class="permalink" href="#password-value"><code class="Fl">--password-value</code></a>
    <code class="Fl">-<i>&lt;password&gt;</i></code></dt>
  <dd>Encryption password.</dd>
  <dt id="password-gen"><a class="permalink" href="#password-gen"><code class="Fl">-password-gen</code></a></dt>
  <dd>When creating a new archive, generate a new random high entropy password,
      and store it in the file specified by <b>-password</b>.</dd>
  <dt id="auth-data-key"><a class="permalink" href="#auth-data-key"><code class="Fl">--auth-data-key</code></a>
    <code class="Fl">-<i>&lt;string&gt;</i></code></dt>
  <dd>Define the key for the next <i>-auth-data</i> or <i>-auth-data-value</i>
      option. If this option is specified at least once, the auth data blob in
      the archive will be stored using the key-&gt;value format, and all
      occurrences of fI-auth-data or <i>-auth-data-value</i><i> must be preceded
      by a </i><i>-auth-data-key</i><i>.</i></dd>
  <dt id="auth-data"><a class="permalink" href="#auth-data"><code class="Fl"><i>-</i><i>-auth-data</i></code></a>
    <code class="Fl"><i>-</i><i></i><i>data_file</i></code></dt>
  <dd>Insert the contents of <i>data_file</i> in the container as authentication
      data. This option can be specified multiple times. Authentication data is
      stored in plain text in the container, and can be used to store public key
      certificates for example.</dd>
  <dt id="auth-data-value"><a class="permalink" href="#auth-data-value"><code class="Fl">--auth-data-value</code></a>
    <code class="Fl">-<i>&lt;data&gt;</i></code></dt>
  <dd>Insert the contents of <i>data</i> (encoded either as <i>hex:...</i>, or
      <i>base64:...</i>) in the container as authentication data. This option
      can be specified multiple times. Authentication data is stored in plain
      text in the container, and can be used to store public key certificates
      for example.</dd>
  <dt id="sign-pub"><a class="permalink" href="#sign-pub"><code class="Fl">--sign-pub</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>File containing the signature public key. Used to decrypt a signed
      container, or encrypt a container without signing it.</dd>
  <dt id="sign-priv"><a class="permalink" href="#sign-priv"><code class="Fl">--sign-priv</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>File containing the signature private key. Used to sign a container.</dd>
  <dt id="recipient-pub"><a class="permalink" href="#recipient-pub"><code class="Fl">--recipient-pub</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>File containing the recipient public key. Used to encrypt a container in
      the ECDHE modes.</dd>
  <dt id="recipient-priv"><a class="permalink" href="#recipient-priv"><code class="Fl">--recipient-priv</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>File containing the recipient private key. Used to decrypt a container in
      the ECDHE modes.</dd>
  <dt id="master-key"><a class="permalink" href="#master-key"><code class="Fl">--master-key</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>When creating a new container, if this option is given, the file will
      receive the container main key, needed for future <b>append</b>
      operations. The main key is only intended to unlock an existing container
      to append new data, and should be kept by the container creator.</dd>
  <dt id="signature-key"><a class="permalink" href="#signature-key"><code class="Fl">--signature-key</code></a>
    <code class="Fl">-<i>key_file</i></code></dt>
  <dd>When creating an new signed container, if this option is given, the file
      will receive the signature encryption key. if only the signature public
      key is passed with <b>-sign-pub</b> when creating a new signed container,
      the container needs to be signed offline using the <b>sign</b> command.
      This requires both the signature private key <b>-sign-priv</b>, and this
      signature encryption key.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Encrypt <i>foo</i> into <i>foo.aea</i> using a new random
    symmetric key stored in <i>foo.key</i></p>
<p class="Pp"><cite class="Rs">&#x00A0; aea encrypt -profile
    hkdf_sha256_aesctr_hmac__symmetric__none -i foo -o foo.aea -key
    foo.key</cite></p>
<p class="Pp">Decrypt <i>foo.aea</i> into <i>bar</i></p>
<p class="Pp"><cite class="Rs">&#x00A0; aea decrypt -i foo.aea -o bar -key
    foo.key</cite></p>
<p class="Pp">Alice encrypts and signs <i>foo</i> into <i>foo.aea</i>, so only
    Bob can decrypt it.</p>
<p class="Pp"><cite class="Rs">&#x00A0; aea encrypt -profile
    hkdf_sha256_aesctr_hmac__ecdhe_p256__ecdsa_p256 -i foo -o foo.aea -sign-priv
    alice.priv -recipient-pub bob.pub</cite></p>
<p class="Pp">Bob decrypts <i>foo.aea</i> into <i>bar</i> using his private key,
    and at the same time verifying Alice signed it.</p>
<p class="Pp"><cite class="Rs">&#x00A0; aea decrypt -i foo.aea -o bar -sign-pub
    alice.pub -recipient-priv bob.priv</cite></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">aa(1)</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 5, 2020</td>
    <td class="foot-os">macOS</td>
  </tr>
</table>
</body>
</html>
