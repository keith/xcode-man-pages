<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit. -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>TclDOM(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TclDOM(n)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">TclDOM(n)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">::dom::DOMImplementation - Tcl language binding for the W3C
    Document Object Model</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>package require dom</b></p>
<p class="Pp"><b>dom</b><b>2.5</b><b></b></p>
<p class="Pp"><b>::dom</b><b>::dom::tcl</b><b>::dom::libxml2</b><b></b></p>
<p class="Pp"><b>::dom::DOMImplementation</b><i> </i><i>method</i> ?<i> args ...
    ?</i></p>
<p class="Pp"><b>::dom::create</b><i> </i><i>element</i><i></i></p>
<p class="Pp"><b>::dom::parse</b><i> </i><i>xml</i> ?<i> option</i><i> value ...
    ?</i><i></i></p>
<p class="Pp"><b>::dom::serialize</b><i> </i><i>token</i> ?<i> option</i><i>
    value ... ?</i><i></i></p>
<p class="Pp"><b>::dom::document</b><i> </i><i>method</i><i> </i><i>token</i>
    ?<i> args ... ?</i></p>
<p class="Pp"><b>::dom::node</b><i> </i><i>method</i><i> </i><i>token</i> ?<i>
    args ... ?</i></p>
<p class="Pp"><b>::dom::element</b><i> </i><i>method</i><i> </i><i>token</i>
    ?<i> args ... ?</i></p>
<p class="Pp"><b>::dom::event</b><i> </i><i>method</i><i> </i><i>token</i> ?<i>
    args ... ?</i></p>
<p class="Pp"><b>::dom::selectNode</b><i> </i><i>token</i><i> </i><i>xpath</i>
    ?<i> option value ... ?</i></p>
<pre>
</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">TclDOM is a Tcl language binding for the (DOM). DOM provides a
    view of a XML (or HTML) document as a tree structure. Currently, TclDOM only
    supports XML documents.</p>
<p class="Pp"></p>
<p class="Pp">The package implements most of the DOM Level 1 interfaces and also
    some Level 2 and Level 3 interfaces. There are also a number of non-standard
    commands and methods provided for the convenience of application developers
    (these are documented).</p>
<p class="Pp"></p>
<p class="Pp">The DOM specification should be read in conjunction with this
    reference manual, as it explains the meaning and purpose of the various
    interfaces. This manual is not a tutorial on how to use the DOM.</p>
<p class="Pp"></p>
<p class="Pp">TclDOM also provides several implementations of the API, with a
    layered architecture. A generic layer provides a stable API to the
    application, and specific implementations may register themselves.
    Currently, three implementations exists: a pure-Tcl implementation, a C
    implementation (based on TclDOMPro) and another C implementation based on
    the Gnome libxml2 &amp; gdome2 libraries.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="PACKAGES_AND_NAMESPACES"><a class="permalink" href="#PACKAGES_AND_NAMESPACES">PACKAGES
  AND NAMESPACES</a></h1>
<p class="Pp">The TclDOM generic layer defines the package and also a Tcl
    namespace using that name. The generic layer also uses the package name
  .</p>
<p class="Pp"></p>
<p class="Pp">Implementations define their own package name and Tcl namespace
    within the generic layer:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="Tcl"><a class="permalink" href="#Tcl"><i></i><b>Tcl
    implementation</b><b></b></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Package , Tcl namespace <b>::dom::tcl</b>.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="TclDOMPro"><a class="permalink" href="#TclDOMPro"><i></i><b>TclDOMPro</b><b></b></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Package , Tcl namespace <b>::dom::c</b>.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="libxml2"><a class="permalink" href="#libxml2"><i></i><b>libxml2</b><b></b></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Package , Tcl namespace <b>::dom::libxml2</b>.</p>
<p class="Pp"></p>
</div>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="TOKENS"><a class="permalink" href="#TOKENS">TOKENS</a></h1>
<p class="Pp">The TclDOM API uses as identifiers for nodes within the document
    tree. This technique has been used to allow alternate implementations of
    TclDOM to be efficient, while retaining compatibility with the pure-Tcl
    implementation.</p>
<p class="Pp"></p>
<p class="Pp">The format of the token itself as well as the data structure
    referred to by the token are public and an application should not rely on
    these. Instead, an application should use the accessor methods provided by
    the API.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DOM_INTERFACES"><a class="permalink" href="#DOM_INTERFACES">DOM
  INTERFACES</a></h1>
<p class="Pp">Each in the DOM specification is implemented with a Tcl command in
    the <b>dom</b> namespace. A few interfaces have not been mapped to Tcl
    commands because Tcl already provides the required functionality, for
    example the interface.</p>
<p class="Pp"></p>
<p class="Pp">s for interfaces are methods (subcommands) of the corresponding
    Tcl command.</p>
<p class="Pp"></p>
<p class="Pp">Each of an interface is a configuration option for an object in
    the document tree.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONVENIENCE_COMMANDS_AND_METHODS"><a class="permalink" href="#CONVENIENCE_COMMANDS_AND_METHODS">CONVENIENCE
  COMMANDS AND METHODS</a></h1>
<p class="Pp">DOM doesn't always provide an interface, method or attribute for
    every function required. For example, until DOM Level 3 for was no standard
    for creating, parsing and serializing a document. Sometimes using the
    standard DOM interface is awkward. TclDOM provides a number of non-standard
    features to overcome these problems.</p>
<p class="Pp"></p>
<p class="Pp">A major convenience is that each method of the interface is also
    defined as a command. For example, rather than using
    <b>dom::DOMImplementation create</b> to create a new document, the shorter
    command <b>dom::create</b> may be used.</p>
<p class="Pp"></p>
<p class="Pp">Implementations may also provide direct access to specific
    features. Refer to the documentation for a DOM implementation.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt><b>::dom::DOMImplementation</b></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">The <b>::dom::DOMImplementation</b> command implements the DOM
    interface. It is used to provide implementation-specific features not
    explicitly defined in the DOM specification.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="Command"><a class="permalink" href="#Command">Command Options</a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">The following command options may be used. These are also
    available as commands.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="hasFeature"><a class="permalink" href="#hasFeature"><i></i><b></b><b>hasFeature</b>
    <i> hasFeature</i><i> </i><i>feature</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Provides a test for existence of a feature. Returns if a feature
    is implemented, otherwise. Uses the default DOM implementation.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="create"><a class="permalink" href="#create"><i></i><b></b><b>create</b>
    <i> create</i><i> </i><i>type</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Creates the root node of a new DOM document, using the default DOM
    implementation. The document element type may be specified as an argument,
    in which case that element is created. The return value is a token referring
    to the root node of the newly created document.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="createDocument"><a class="permalink" href="#createDocument"><i></i><b></b><b>createDocument</b>
    <i> createDocument</i><i> </i><i>nsURI</i><i> </i><i>type</i><i>
    </i><i>doctype</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Creates the root node of a new DOM document, using the default DOM
    implementation. The document element namespace URI and local-name (element
    type) may be specified as an argument, in which case that element is
    created. If the document type is given then the newly created document is
    configured to use that document type. The return value is a token referring
    to the root node of the newly created document.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="createDocumentType"><a class="permalink" href="#createDocumentType"><i></i><b></b><b>createDocumentType</b>
    <i> createDocumentType</i><i> </i><i>token</i><i> </i><i>name</i><i>
    </i><i>publicid</i><i> </i><i>systemid</i><i>
    </i><i>internaldtd</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Creates a Document Type Declaration, using the default DOM
    implementation. The return value is a token for the newly created document
    type declaration.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="createNode"><a class="permalink" href="#createNode"><i></i><b></b><b>createNode</b>
    <i> createNode</i><i> </i><i>token</i><i> </i><i>xpath</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">May create a node in the document. <i> </i><i>token</i> specifies
    a context for the XPath expression given by <i> </i><i>xpath</i>. The
    expression must resolve to a node. If the node exists then no further action
    is taken. Otherwise the node is created. The token of the matched or newly
    created node is returned.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="destroy"><a class="permalink" href="#destroy"><i></i><b></b><b>destroy</b>
    <i> destroy</i><i> </i><i>token</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method frees all data structures associated with a DOM node.
    The <i> </i><i>token</i> argument must refer to a valid token for any node
    in the document tree. The node is removed from the tree before it is
    destroyed. If the node has children, they will also be destroyed.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="isNode"><a class="permalink" href="#isNode"><i></i><b></b><b>isNode</b>
    <i> isNode</i><i> </i><i>token</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Tests whether the given token is a valid token for some DOM node
    in the default DOM implementation.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="parse"><a class="permalink" href="#parse"><i></i><b></b><b>parse</b>
    <i> parse</i><i> </i><i>xml</i> ?<i> </i><i>option</i><i>
    </i><i>value</i>?<i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method parses XML formatted text given by the <i>
    </i><i>xml</i> argument and constructs a DOM tree for the document. The
    return result is the token of the root node of the newly created
  document.</p>
<p class="Pp"></p>
<p class="Pp">This method requires an event-based XML parser to be loaded to
    perform the parsing operation. The package itself does not include an XML
    parser. Support for the use of is provided. Any other Tcl event-based XML
    parser implementing the TclXML API may also be used. The <i> -parser</i> may
    be used to specify which XML parser to use.</p>
<p class="Pp"></p>
<p class="Pp">In some circumstances, a DOM implementation may parse the XML
    document directly, for example libxml2. In this case, it may not be possible
    to interpose on the parsing operation.</p>
<p class="Pp"></p>
<p class="Pp">Valid configuration options are:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="parser"><a class="permalink" href="#parser"><i></i><b></b><i>
    -parser</i><i> ?</i><i> {}</i><i> expat</i><i> tcl?</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This option specifies which XML parser to use to parse the XML
    data. If an empty string is given then the default behaviour described above
    is used. The value <i> expat</i> specifies that the Expat parser must be
    used. The value <i> tcl</i> specifies that the Tcl-only parser must be used.
    If an explicit value is given and that parser cannot be loaded then the
    command will fail, despite the fact that another parser may be
  available.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="progresscommand"><a class="permalink" href="#progresscommand"><i></i><b></b><i>
    -progresscommand</i><i> </i><i>script</i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This option specifies a Tcl command to be invoked from time to
    time while the DOM tree is being constructed. The script will be invoked
    after a certain number of element start tags have been processed, given by
    the <i> -chunksize</i> option.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="chunksize"><a class="permalink" href="#chunksize"><i></i><b></b><i>
    -chunksize</i><i> </i><i>integer</i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This option specifies how many element start tags to process
    before invoking the script given by the <i> -progresscommand</i> option.</p>
<p class="Pp"></p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="selectNode"><a class="permalink" href="#selectNode"><i></i><b></b><b>selectNode</b>
    <i> selectNode</i><i> </i><i>token</i><i> </i><i>xpath</i> ?<i> option value
    ... ?</i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">Resolves the XPath location path given by <i> </i><i>xpath</i>.
    <i> </i><i>token</i> is the initial context for the location path. Returns
    the resulting nodeset as a Tcl list.</p>
<p class="Pp"></p>
<p class="Pp">The following options may be specified:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="namespaces"><a class="permalink" href="#namespaces"><i></i><b></b><i>
    -namespaces</i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">The value for this option is a list of prefix-URI pairs. Each of
    these pairs defines an XML Namespace and its prefix for the purposes of
    evaluating the XPath expression. The document itself may use a different
    prefix for the same XML Namespace.</p>
<p class="Pp"></p>
<p class="Pp">This option may be repeated, in which case the lists of namespace
    pairs are merged and all of the XML Namespaces registered.</p>
<p class="Pp"></p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="serialize"><a class="permalink" href="#serialize"><i></i><b></b><b>serialize</b>
    <i> serialize</i><i> </i><i>token</i> ?<i> </i><i>option</i><i>
    </i><i>value</i>?<i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the XML formatted text corresponding to the
    node given by <i> token</i>. The text is guaranteed to be a well-formed XML
    document, unless the <i> -method</i> option specifies a non-XML output
    method.</p>
<p class="Pp"></p>
<p class="Pp">Valid configuration options are:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="newline"><a class="permalink" href="#newline"><i></i><b></b><i>
    -newline</i><i> </i><i>elementlist</i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This option specifies a list of element types for which newline
    characters will be added before and after the start and end tags for those
    elements upon serialization.</p>
<p class="Pp"></p>
<p class="Pp">White space is significant in XML, so the package never adds extra
    white spacefor purposes of &quot;pretty-printing&quot; the XML source
    document. On some platforms, such as VMS, this can actually cause serious
    problems due to line length limitations. This option provides the
    convenience of adding newlines to certain nominated element types for
    formatting the source into lines.</p>
<p class="Pp"></p>
<p class="Pp">Examples:</p>
<p class="Pp"></p>
<p class="Pp">Suppose the following DOM document is constructed:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
set doc [::dom::DOMImplementation create]
set top [::dom::document createElement $doc Root]
set node [::dom::document createElement $top First]
::dom::document createElement $node Second
::dom::document createElement $top First
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">Without the <i> -newline</i> option the serialized document would
    be:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
::dom::DOMImplementation serialize $doc
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">With the <i> -newline</i> option the serialized document would
  be:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
::dom::DOMImplementation serialize $doc -newline First
</pre>
</div>
<p class="Pp"></p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="trim"><a class="permalink" href="#trim"><i></i><b></b><b>trim</b> <i>
    trim</i><i> </i><i>token</i><i></i></a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method removes any node containing only white space from the
    document tree of the node given by <i> </i><i>token</i>.</p>
<p class="Pp"></p>
</div>
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt><b>::dom::document</b></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">This command implements the Document interface in the DOM
    specification. The most important aspect of this command are its factory
    methods for creating nodes.</p>
<p class="Pp"></p>
<p class="Pp">The methods accepted by this command are as follows:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="dom::node"><a class="permalink" href="#dom::node"><b>dom::node</b></a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">This command implements generic functions for DOM nodes.</p>
<p class="Pp"></p>
<p class="Pp">The methods accepted by this command are as follows:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="dom::element"><a class="permalink" href="#dom::element"><b>dom::element</b></a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">This command provides functions for element type nodes.</p>
<p class="Pp"></p>
<p class="Pp">Valid methods for this command are as follows:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="dom::processinginstruction"><a class="permalink" href="#dom::processinginstruction"><b>dom::processinginstruction</b></a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">This command provides functions for processingInstruction type
    nodes.</p>
<p class="Pp"></p>
<p class="Pp">Valid methods for this command are as follows:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="dom::event"><a class="permalink" href="#dom::event"><b>dom::event</b></a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">This command provides functions for event type nodes.</p>
<p class="Pp"></p>
<p class="Pp">Valid methods for this command are as follows:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<p class="Pp"></p>
</div>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="IMPLEMENTATIONS"><a class="permalink" href="#IMPLEMENTATIONS">IMPLEMENTATIONS</a></h1>
<p class="Pp">This section documents the various implmentations of the TclDOM
    API.</p>
<dl class="Bl-tag">
  <dt id="Tcl~2"><a class="permalink" href="#Tcl~2">Tcl Implementation</a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">The Tcl implementation is provided by the package.</p>
<p class="Pp"></p>
<p class="Pp">It is a reference implementation, and implements the TclDOM API as
    described above.</p>
<p class="Pp"></p>
<p class="Pp">A DOM tree using this implementation may be created using the
    <b>dom::tcl::create</b> command.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="libxml2~2"><a class="permalink" href="#libxml2~2">libxml2
    Implementation</a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">The TclDOM/libxml2 implementation is a wrapper for the . It is
    provided by the package. It is a high-performance library, making use of Tcl
    objects for fast access to tree nodes.</p>
<p class="Pp"></p>
<p class="Pp">A DOM tree using this implementation may be created using the
    <b>dom::libxml2::create</b> command.</p>
<p class="Pp"></p>
<p class="Pp"></p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="Notes"><a class="permalink" href="#Notes">Notes</a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
</dl>
</div>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">Tcl</td>
    <td class="foot-os">Tcl Built-In Commands</td>
  </tr>
</table>
</body>
</html>
