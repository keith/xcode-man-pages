<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Package::Stash(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Package::Stash(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Package::Stash(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Package::Stash - routines for manipulating stashes</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 0.36</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  my $stash = Package::Stash-&gt;new('Foo');
  $stash-&gt;add_symbol('%foo', {bar =&gt; 1});
  # $Foo::foo{bar} == 1
  $stash-&gt;has_symbol('$foo') # false
  my $namespace = $stash-&gt;namespace;
  *{ $namespace-&gt;{foo} }{HASH} # {bar =&gt; 1}
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Manipulating stashes (Perl's symbol tables) is occasionally
    necessary, but incredibly messy, and easy to get wrong. This module hides
    all of that behind a simple API.</p>
<p class="Pp">NOTE: Most methods in this class require a variable specification
    that includes a sigil. If this sigil is absent, it is assumed to represent
    the IO slot.</p>
<p class="Pp">Due to limitations in the typeglob API available to perl code, and
    to typeglob manipulation in perl being quite slow, this module provides two
    implementations - one in pure perl, and one using XS. The XS implementation
    is to be preferred for most usages; the pure perl one is provided for cases
    where XS modules are not a possibility. The current implementation in use
    can be set by setting
    <span class="Li">$ENV{PACKAGE_STASH_IMPLEMENTATION}</span> or
    <span class="Li">$Package::Stash::IMPLEMENTATION</span> before loading
    Package::Stash (with the environment variable taking precedence), otherwise,
    it will use the XS implementation if possible, falling back to the pure perl
    one.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="new_$package_name"><a class="permalink" href="#new_$package_name">new
  $package_name</a></h2>
<p class="Pp">Creates a new <span class="Li">&quot;Package::Stash&quot;</span>
    object, for the package given as the only argument.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="name"><a class="permalink" href="#name">name</a></h2>
<p class="Pp">Returns the name of the package that this object represents.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="namespace"><a class="permalink" href="#namespace">namespace</a></h2>
<p class="Pp">Returns the raw stash itself.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="add_symbol_$variable_$value__opts"><a class="permalink" href="#add_symbol_$variable_$value__opts">add_symbol
  $variable $value %opts</a></h2>
<p class="Pp">Adds a new package symbol, for the symbol given as
    <span class="Li">$variable</span>, and optionally gives it an initial value
    of <span class="Li">$value</span>. <span class="Li">$variable</span> should
    be the name of variable including the sigil, so</p>
<p class="Pp"></p>
<pre>  Package::Stash-&gt;new('Foo')-&gt;add_symbol('%foo')
</pre>
<p class="Pp">will create <span class="Li">%Foo::foo</span>.</p>
<p class="Pp">Valid options (all optional) are
    <span class="Li">&quot;filename&quot;</span>,
    <span class="Li">&quot;first_line_num&quot;</span>, and
    <span class="Li">&quot;last_line_num&quot;</span>.</p>
<p class="Pp"><span class="Li">$opts{filename}</span>,
    <span class="Li">$opts{first_line_num}</span>, and
    <span class="Li">$opts{last_line_num}</span> can be used to indicate where
    the symbol should be regarded as having been defined. Currently these values
    are only used if the symbol is a subroutine
    ('<span class="Li">&quot;&amp;&quot;</span>' sigil) and only if
    <span class="Li">&quot;$^P &amp; 0x10&quot;</span> is true, in which case
    the special <span class="Li">%DB::sub</span> hash is updated to record the
    values of <span class="Li">&quot;filename&quot;</span>,
    <span class="Li">&quot;first_line_num&quot;</span>, and
    <span class="Li">&quot;last_line_num&quot;</span> for the subroutine. If
    these are not passed, their values are inferred (as much as possible) from
    <span class="Li">&quot;caller&quot;</span> information.</p>
<p class="Pp">This is especially useful for debuggers and profilers, which use
    <span class="Li">%DB::sub</span> to determine where the source code for a
    subroutine can be found. See
    &lt;http://perldoc.perl.org/perldebguts.html#Debugger-Internals&gt; for more
    information about <span class="Li">%DB::sub</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="remove_glob_$name"><a class="permalink" href="#remove_glob_$name">remove_glob
  $name</a></h2>
<p class="Pp">Removes all package variables with the given name, regardless of
    sigil.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="has_symbol_$variable"><a class="permalink" href="#has_symbol_$variable">has_symbol
  $variable</a></h2>
<p class="Pp">Returns whether or not the given package variable (including
    sigil) exists.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="get_symbol_$variable"><a class="permalink" href="#get_symbol_$variable">get_symbol
  $variable</a></h2>
<p class="Pp">Returns the value of the given package variable (including
  sigil).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="get_or_add_symbol_$variable"><a class="permalink" href="#get_or_add_symbol_$variable">get_or_add_symbol
  $variable</a></h2>
<p class="Pp">Like <span class="Li">&quot;get_symbol&quot;</span>, except that
    it will return an empty hashref or arrayref if the variable doesn't
  exist.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="remove_symbol_$variable"><a class="permalink" href="#remove_symbol_$variable">remove_symbol
  $variable</a></h2>
<p class="Pp">Removes the package variable described by
    <span class="Li">$variable</span> (which includes the sigil); other
    variables with the same name but different sigils will be untouched.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="list_all_symbols_$type_filter"><a class="permalink" href="#list_all_symbols_$type_filter">list_all_symbols
  $type_filter</a></h2>
<p class="Pp">Returns a list of package variable names in the package, without
    sigils. If a <span class="Li">&quot;type_filter&quot;</span> is passed, it
    is used to select package variables of a given type, where valid types are
    the slots of a typeglob ('SCALAR', 'CODE', 'HASH', etc). Note that if the
    package contained any <span class="Li">&quot;BEGIN&quot;</span> blocks, perl
    will leave an empty typeglob in the
    <span class="Li">&quot;BEGIN&quot;</span> slot, so this will show up if no
    filter is used (and similarly for <span class="Li">&quot;INIT&quot;</span>,
    <span class="Li">&quot;END&quot;</span>, etc).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="get_all_symbols_$type_filter"><a class="permalink" href="#get_all_symbols_$type_filter">get_all_symbols
  $type_filter</a></h2>
<p class="Pp">Returns a hashref, keyed by the variable names in the package. If
    <span class="Li">$type_filter</span> is passed, the hash will contain every
    variable of that type in the package as values, otherwise, it will contain
    the typeglobs corresponding to the variable names (basically, a clone of the
    stash).</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="WORKING_WITH_VARIABLES"><a class="permalink" href="#WORKING_WITH_VARIABLES">WORKING
  WITH VARIABLES</a></h1>
<p class="Pp">It is important to note, that when working with scalar variables,
    the default behavior is to <b>copy</b> values.</p>
<p class="Pp"></p>
<pre>  my $stash = Package::Stash-&gt;new('Some::Namespace');
  my $variable = 1;
  # $Some::Namespace::name is a copy of $variable
  $stash-&gt;add_symbol('$name', $variable);
  $variable++
  # $Some::Namespace::name == 1 , $variable == 2
</pre>
<p class="Pp">This will likely confuse people who expect it to work the same as
    typeglob assignment, which simply creates new references to existing
    variables.</p>
<p class="Pp"></p>
<pre>  my $variable = 1;
  {
      no strict 'refs';
      # assign $Package::Stash::name = $variable
      *{'Package::Stash::name'} = \$variable;
  }
  $variable++ # affects both names
</pre>
<p class="Pp">If this behaviour is desired when working with Package::Stash,
    simply pass Package::Stash a scalar ref:</p>
<p class="Pp"></p>
<pre>  my $stash = Package::Stash-&gt;new('Some::Namespace');
  my $variable = 1;
  # $Some::Namespace::name is now $variable
  $stash-&gt;add_symbol('$name', \$variable);
  $variable++
  # $Some::Namespace::name == 2 , $variable == 2
</pre>
<p class="Pp">This will be what you want as well if you're ever working with
    Readonly variables:</p>
<p class="Pp"></p>
<pre>  use Readonly;
  Readonly my $value, 'hello';
  $stash-&gt;add_symbol('$name', \$value); # reference
  print $Some::Namespace::name; # hello
  # Tries to modify the read-only 'hello' and dies.
  $Some::Namespace::name .= &quot; world&quot;;
  $stash-&gt;add_symbol('$name', $value); # copy
  print $Some::Namespace::name; # hello
  # No problem, modifying a copy, not the original
  $Some::Namespace::name .= &quot; world&quot;;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS_/_CAVEATS"><a class="permalink" href="#BUGS_/_CAVEATS">BUGS
  / CAVEATS</a></h1>
<ul class="Bl-bullet">
  <li>Prior to perl 5.10, scalar slots are only considered to exist if they are
      defined
    <p class="Pp">This is due to a shortcoming within perl itself. See
        &quot;Making References&quot; in perlref point 7 for more
      information.</p>
  </li>
  <li>GLOB and FORMAT variables are not (yet) accessible through this
    module.</li>
  <li>Also, see the BUGS section for the specific backends (Package::Stash::XS
      and Package::Stash::PP)</li>
</ul>
<p class="Pp">Please report any bugs through RT: email
    <span class="Li">&quot;bug-package-stash at rt.cpan.org&quot;</span>, or
    browse to
    &lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Package-Stash&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Class::MOP::Package
    <p class="Pp">This module is a factoring out of code that used to live
      here</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
<p class="Pp">You can find this documentation for this module with the perldoc
    command.</p>
<p class="Pp"></p>
<pre>    perldoc Package::Stash
</pre>
<p class="Pp">You can also look for information at:</p>
<ul class="Bl-bullet">
  <li>MetaCPAN
    <p class="Pp">&lt;https://metacpan.org/release/Package-Stash&gt;</p>
  </li>
  <li>Github
    <p class="Pp">&lt;https://github.com/doy/package-stash&gt;</p>
  </li>
  <li>RT: CPAN's request tracker
    <p class="Pp">&lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Package-Stash&gt;</p>
  </li>
  <li>CPAN Ratings
    <p class="Pp">&lt;http://cpanratings.perl.org/d/Package-Stash&gt;</p>
  </li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">Based on code from Class::MOP::Package, by Stevan Little and the
    Moose Cabal.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Jesse Luehrs &lt;doy@tozt.net&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is copyright (c) 2013 by Jesse Luehrs.</p>
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-09-03</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
