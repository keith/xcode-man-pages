<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Test::Most(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::Most(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::Most(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test::Most - Most commonly needed test functions and features.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">Version 0.34</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">Instead of this:</p>
<p class="Pp"></p>
<pre>    use strict;
    use warnings;
    use Test::Exception 0.88;
    use Test::Differences 0.500;
    use Test::Deep 0.106;
    use Test::Warn 0.11;
    use Test::More tests =&gt; 42;
</pre>
<p class="Pp">You type this:</p>
<p class="Pp"></p>
<pre>    use Test::Most tests =&gt; 42;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Test::Most exists to reduce boilerplate and to make your testing
    life easier. We provide &quot;one stop shopping&quot; for most commonly used
    testing modules. In fact, we often require the latest versions so that you
    get bug fixes through Test::Most and don't have to keep upgrading these
    modules separately.</p>
<p class="Pp">This module provides you with the most commonly used testing
    functions, along with automatically turning on strict and warning and gives
    you a bit more fine-grained control over your test suite.</p>
<p class="Pp"></p>
<pre>    use Test::Most tests =&gt; 4, 'die';
    ok 1, 'Normal calls to ok() should succeed';
    is 2, 2, '... as should all passing tests';
    eq_or_diff [3], [4], '... but failing tests should die';
    ok 4, '... will never get to here';
</pre>
<p class="Pp">As you can see, the <span class="Li">&quot;eq_or_diff&quot;</span>
    test will fail. Because 'die' is in the import list, the test program will
    halt at that point.</p>
<p class="Pp">If you do not want strict and warnings enabled, you must
    explicitly disable them. Thus, you must be explicit about what you want and
    no longer need to worry about accidentally forgetting them.</p>
<p class="Pp"></p>
<pre>    use Test::Most tests =&gt; 4;
    no strict;
    no warnings;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORT"><a class="permalink" href="#EXPORT">EXPORT</a></h1>
<p class="Pp">All functions from the following modules will automatically be
    exported into your namespace:</p>
<ul class="Bl-bullet">
  <li>Test::More</li>
  <li>Test::Exception</li>
  <li>Test::Differences</li>
  <li>Test::Deep</li>
  <li>Test::Warn</li>
</ul>
<p class="Pp">Functions which are <i>optionally</i> exported from any of those
    modules must be referred to by their fully-qualified name:</p>
<p class="Pp"></p>
<pre>  Test::Deep::render_stack( $var, $stack );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<p class="Pp">Several other functions are also automatically exported:</p>
<section class="Ss">
<h2 class="Ss" id="_die_on_fail_"><a class="permalink" href="#_die_on_fail_">&quot;die_on_fail&quot;</a></h2>
<pre> die_on_fail;
 is_deeply $foo, bar, '... we throw an exception if this fails';
</pre>
<p class="Pp">This function, if called, will cause the test program to throw a
    Test::Most::Exception, effectively halting the test.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_bail_on_fail_"><a class="permalink" href="#_bail_on_fail_">&quot;bail_on_fail&quot;</a></h2>
<pre> bail_on_fail;
 is_deeply $foo, bar, '... we bail out if this fails';
</pre>
<p class="Pp">This function, if called, will cause the test suite to
    <b>BAIL_OUT()</b> if any tests fail after it.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_restore_fail_"><a class="permalink" href="#_restore_fail_">&quot;restore_fail&quot;</a></h2>
<pre> die_on_fail;
 is_deeply $foo, bar, '... we throw an exception if this fails';
 restore_fail;
 cmp_bag(\@got, \@bag, '... we will not throw an exception if this fails';
</pre>
<p class="Pp">This restores the original test failure behavior, so subsequent
    tests will no longer throw an exception or <b>BAIL_OUT()</b>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_set_failure_handler_"><a class="permalink" href="#_set_failure_handler_">&quot;set_failure_handler&quot;</a></h2>
<p class="Pp">If you prefer other behavior to 'die_on_fail' or 'bail_on_fail',
    you can set your own failure handler:</p>
<p class="Pp"></p>
<pre> set_failure_handler( sub {
     my $builder = shift;
     if ( $builder &amp;&amp; $builder-&gt;{Test_Results}[-1] =~ /critical/ ) {
        send_admin_email(&quot;critical failure in tests&quot;);
     }
 } );
</pre>
<p class="Pp">It receives the <span class="Li">&quot;Test::Builder&quot;</span>
    instance as its only argument.</p>
<p class="Pp"><b>Important</b>: Note that if the failing test is the very last
    test run, then the <span class="Li">$builder</span> will likely be
    undefined. This is an unfortunate side effect of how
    <span class="Li">&quot;Test::Builder&quot;</span> has been designed.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_explain_"><a class="permalink" href="#_explain_">&quot;explain&quot;</a></h2>
<p class="Pp">Similar to <span class="Li">&quot;note()&quot;</span>, the output
    will only be seen by the user by using the
    <span class="Li">&quot;-v&quot;</span> switch with
    <span class="Li">&quot;prove&quot;</span> or reading the raw TAP.</p>
<p class="Pp">Unlike <span class="Li">&quot;note()&quot;</span>, any reference
    in the argument list is automatically expanded using
    <span class="Li">&quot;Data::Dumper&quot;</span>. Thus, instead of this:</p>
<p class="Pp"></p>
<pre> my $self = Some::Object-&gt;new($id);
 use Data::Dumper;
 explain 'I was just created', Dumper($self);
</pre>
<p class="Pp">You can now just do this:</p>
<p class="Pp"></p>
<pre> my $self = Some::Object-&gt;new($id);
 explain 'I was just created:  ', $self;
</pre>
<p class="Pp">That output will look similar to:</p>
<p class="Pp"></p>
<pre> I was just created: bless( {
   'id' =&gt; 2,
   'stack' =&gt; []
 }, 'Some::Object' )
</pre>
<p class="Pp">Note that the &quot;dumpered&quot; output has the
    <span class="Li">&quot;Data::Dumper&quot;</span> variables
    <span class="Li">$Indent</span>,
    <span class="Li">&quot;Sortkeys&quot;</span> and
    <span class="Li">&quot;Terse&quot;</span> all set to the value of
    <span class="Li">1</span> (one). This allows for a much cleaner diagnostic
    output and at the present time cannot be overridden.</p>
<p class="Pp">Note that Test::More's <span class="Li">&quot;explain&quot;</span>
    acts differently. This <span class="Li">&quot;explain&quot;</span> is
    equivalent to <span class="Li">&quot;note explain&quot;</span> in
    Test::More.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_show_"><a class="permalink" href="#_show_">&quot;show&quot;</a></h2>
<p class="Pp">Experimental. Just like
    <span class="Li">&quot;explain&quot;</span>, but also tries to show you the
    lexical variable names:</p>
<p class="Pp"></p>
<pre> my $var   = 3;
 my @array = qw/ foo bar /;
 show $var, \@array;
 __END__
 $var = 3;
 @array = [
     'foo',
     'bar'
 ];
</pre>
<p class="Pp">It will show <span class="Li">$VAR1</span>,
    <span class="Li">$VAR2</span> ... <span class="Li">$VAR_N</span> for every
    variable it cannot figure out the variable name to:</p>
<p class="Pp"></p>
<pre> my @array = qw/ foo bar /;
 show @array;
 __END__
 $VAR1 = 'foo';
 $VAR2 = 'bar';
</pre>
<p class="Pp">Note that this relies on Data::Dumper::Names version 0.03 or
    greater. If this is not present, it will warn and call explain instead.
    Also, it can only show the names for lexical variables. Globals such as
    <span class="Li">%ENV</span> or <span class="Li">&quot;%@&quot;</span> are
    not accessed via PadWalker and thus cannot be shown. It would be nice to
    find a workaround for this.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_always_explain__and__always_show_"><a class="permalink" href="#_always_explain__and__always_show_">&quot;always_explain&quot;
  and &quot;always_show&quot;</a></h2>
<p class="Pp">These are identical to <span class="Li">&quot;explain&quot;</span>
    and <span class="Li">&quot;show&quot;</span>, but like Test::More's
    <span class="Li">&quot;diag&quot;</span> function, these will always emit
    output, regardless of whether or not you're in verbose mode.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_all_done_"><a class="permalink" href="#_all_done_">&quot;all_done&quot;</a></h2>
<p class="Pp"><b>DEPRECATED</b>. Use the new
    <span class="Li">&quot;done_testing()&quot;</span> (added in Test::More
    since 0.87_01). Instead. We're leaving this in here for a long deprecation
    cycle. After a while, we might even start warning.</p>
<p class="Pp">If the plan is specified as
    <span class="Li">&quot;defer_plan&quot;</span>, you may call
    <span class="Li">&amp;all_done</span> at the end of the test with an
    optional test number. This lets you set the plan without knowing the plan
    before you run the tests.</p>
<p class="Pp">If you call it without a test number, the tests will still fail if
    you don't get to the end of the test. This is useful if you don't want to
    specify a plan but the tests exit unexpectedly. For example, the following
    would <i>pass</i> with <span class="Li">&quot;no_plan&quot;</span> but fails
    with <span class="Li">&quot;all_done&quot;</span>.</p>
<p class="Pp"></p>
<pre> use Test::More 'defer_plan';
 ok 1;
 exit;
 ok 2;
 all_done;
</pre>
<p class="Pp">See &quot;Deferred plans&quot; for more information.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORT_ON_DEMAND"><a class="permalink" href="#EXPORT_ON_DEMAND">EXPORT
  ON DEMAND</a></h1>
<p class="Pp">The following will be exported only if requested:</p>
<section class="Ss">
<h2 class="Ss" id="_timeit_"><a class="permalink" href="#_timeit_">&quot;timeit&quot;</a></h2>
<p class="Pp">Prototype: <span class="Li">&quot;timeit(&amp;;$)&quot;</span></p>
<p class="Pp">This function will warn if
    <span class="Li">&quot;Time::HiRes&quot;</span> is not installed. The test
    will still be run, but no timing information will be displayed.</p>
<p class="Pp"></p>
<pre> use Test::Most 'timeit';
 timeit { is expensive_function(), $some_value, $message }
    &quot;expensive_function()&quot;;
 timeit { is expensive_function(), $some_value, $message };
</pre>
<p class="Pp"><span class="Li">&quot;timeit&quot;</span> accepts a code
    reference and an optional message. After the test is run, will
    <span class="Li">&quot;explain&quot;</span> the time of the function using
    <span class="Li">&quot;Time::HiRes&quot;</span>. If a message is supplied,
    it will be formatted as:</p>
<p class="Pp"></p>
<pre>  sprintf &quot;$message: took %s seconds&quot; =&gt; $time;
</pre>
<p class="Pp">Otherwise, it will be formatted as:</p>
<p class="Pp"></p>
<pre>  sprintf &quot;$filename line $line: took %s seconds&quot; =&gt; $time;
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="DIE_OR_BAIL_ON_FAIL"><a class="permalink" href="#DIE_OR_BAIL_ON_FAIL">DIE
  OR BAIL ON FAIL</a></h1>
<p class="Pp">Sometimes you want your test suite to throw an exception or
    <b>BAIL_OUT()</b> if a test fails. In order to provide maximum flexibility,
    there are three ways to accomplish each of these.</p>
<section class="Ss">
<h2 class="Ss" id="Import_list"><a class="permalink" href="#Import_list">Import
  list</a></h2>
<pre> use Test::Most 'die', tests =&gt; 7;
 use Test::Most qw&lt; no_plan bail &gt;;
</pre>
<p class="Pp">If <span class="Li">&quot;die&quot;</span> or
    <span class="Li">&quot;bail&quot;</span> is anywhere in the import list, the
    test program/suite will throw a
    <span class="Li">&quot;Test::Most::Exception&quot;</span> or
    <span class="Li">&quot;BAIL_OUT()&quot;</span> as appropriate the first time
    a test fails. Calling <span class="Li">&quot;restore_fail&quot;</span>
    anywhere in the test program will restore the original behavior (not
    throwing an exception or bailing out).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Functions"><a class="permalink" href="#Functions">Functions</a></h2>
<pre> use Test::Most 'no_plan';
 ok $bar, 'The test suite will continue if this passes';
 die_on_fail;
 is_deeply $foo, bar, '... we throw an exception if this fails';
 restore_fail;
 ok $baz, 'The test suite will continue if this passes';
</pre>
<p class="Pp">The <span class="Li">&quot;die_on_fail&quot;</span> and
    <span class="Li">&quot;bail_on_fail&quot;</span> functions will
    automatically set the desired behavior at runtime.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Environment_variables"><a class="permalink" href="#Environment_variables">Environment
  variables</a></h2>
<pre> DIE_ON_FAIL=1 prove t/
 BAIL_ON_FAIL=1 prove t/
</pre>
<p class="Pp">If the <span class="Li">&quot;DIE_ON_FAIL&quot;</span> or
    <span class="Li">&quot;BAIL_ON_FAIL&quot;</span> environment variables are
    true, any tests which use <span class="Li">&quot;Test::Most&quot;</span>
    will throw an exception or call BAIL_OUT on test failure.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="MISCELLANEOUS"><a class="permalink" href="#MISCELLANEOUS">MISCELLANEOUS</a></h1>
<section class="Ss">
<h2 class="Ss" id="Moose"><a class="permalink" href="#Moose">Moose</a></h2>
<p class="Pp">It used to be that this module would produce a warning when used
    with Moose:</p>
<p class="Pp"></p>
<pre>    Prototype mismatch: sub main::blessed ($) vs none
</pre>
<p class="Pp">This was because Test::Deep exported a
    <span class="Li">&quot;blessed()&quot;</span> function by default, but its
    prototype did not match the Moose version's prototype. We now exclude the
    Test::Deep version by default. If you need it, you can call the
    fully-qualified version or request it on the command line:</p>
<p class="Pp"></p>
<pre>    use Test::Most 'blessed';
</pre>
<p class="Pp">Note that as of version <span class="Li">0.34</span>,
    <span class="Li">&quot;reftype&quot;</span> is also excluded from
    <span class="Li">&quot;Test::Deep&quot;</span>'s import list. This was
    causing issues with people trying to use
    <span class="Li">&quot;Scalar::Util&quot;</span>'s
    <span class="Li">&quot;reftype&quot;</span> function.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Excluding_Test_Modules"><a class="permalink" href="#Excluding_Test_Modules">Excluding
  Test Modules</a></h2>
<p class="Pp">Sometimes you want a exclude a particular test module. For
    example, Test::Deep, when used with Moose, produces the following
  warning:</p>
<p class="Pp"></p>
<pre>    Prototype mismatch: sub main::blessed ($) vs none
</pre>
<p class="Pp">You can exclude this with by adding the module to the import list
    with a '-' symbol in front:</p>
<p class="Pp"></p>
<pre>    use Test::Most tests =&gt; 42, '-Test::Deep';
</pre>
<p class="Pp">See
    &lt;https://rt.cpan.org/Ticket/Display.html?id=54362&amp;results=e73ff63c5bf9ba0f796efdba5773cf3f&gt;
    for more information.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Excluding_Test_Symbols"><a class="permalink" href="#Excluding_Test_Symbols">Excluding
  Test Symbols</a></h2>
<p class="Pp">Sometimes you don't want to exclude an entire test module, but
    just a particular symbol that is causing issues You can exclude the
    symbol(s) in the standard way, by specifying the symbol in the import list
    with a '!' in front:</p>
<p class="Pp"></p>
<pre>    use Test::Most tests =&gt; 42, '!throws_ok';
</pre>
</section>
<section class="Ss">
<h2 class="Ss">Deferred plans</h2>
<p class="Pp"><b>DEPRECATED</b> and will be removed in some future release of
    this module. Using <span class="Li">&quot;defer_plan&quot;</span> will
    <span class="Li">&quot;carp()&quot;</span>. Use
    <span class="Li">&quot;done_testing()&quot;</span> from Test::More
  instead.</p>
<p class="Pp"></p>
<pre> use Test::Most qw&lt;defer_plan&gt;;
 use My::Tests;
 my $test_count = My::Tests-&gt;run;
 all_done($test_count);
</pre>
<p class="Pp">Sometimes it's difficult to know the plan up front, but you can
    calculate the plan as your tests run. As a result, you want to defer the
    plan until the end of the test. Typically, the best you can do is this:</p>
<p class="Pp"></p>
<pre> use Test::More 'no_plan';
 use My::Tests;
 My::Tests-&gt;run;
</pre>
<p class="Pp">But when you do that,
    <span class="Li">&quot;Test::Builder&quot;</span> merely asserts that the
    number of tests you <i>ran</i> is the number of tests. Until now, there was
    no way of asserting that the number of tests you <i>expected</i> is the
    number of tests unless you do so before any tests have run. This fixes that
    problem.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="One-stop_shopping"><a class="permalink" href="#One-stop_shopping">One-stop
  shopping</a></h2>
<p class="Pp">We generally require the latest stable versions of various test
    modules. Why? Because they have bug fixes and new features. You don't want
    to have to keep remembering them, so periodically we'll release new versions
    of Test::Most just for bug fixes.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_use_ok_"><a class="permalink" href="#_use_ok_">&quot;use
  ok&quot;</a></h2>
<p class="Pp">We do not bundle Test::use::ok, though it's been requested. That's
    because <span class="Li">&quot;use_ok&quot;</span> is broken, but
    Test::use::ok is also subtly broken (and a touch harder to fix). See
    &lt;http://use.perl.org/~Ovid/journal/39859&gt; for more information.</p>
<p class="Pp">If you want to test if you can use a module, just use it. If it
    fails, the test will still fail and that's the desired result.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="RATIONALE"><a class="permalink" href="#RATIONALE">RATIONALE</a></h1>
<p class="Pp">People want more control over their test suites. Sometimes when
    you see hundreds of tests failing and whizzing by, you want the test suite
    to simply halt on the first failure. This module gives you that control.</p>
<p class="Pp">As for the reasons for the four test modules chosen, I ran code
    over a local copy of the CPAN to find the most commonly used testing
    modules. Here's the top twenty as of January 2010 (the numbers are different
    because we're now counting distributions which use a given module rather
    than simply the number of times a module is used).</p>
<p class="Pp"></p>
<pre>    1   Test::More                          14111
    2   Test                                 1736
    3   Test::Exception                       744
    4   Test::Simple                          331
    5   Test::Pod                             328
    6   Test::Pod::Coverage                   274
    7   Test::Perl::Critic                    248
    8   Test::Base                            228
    9   Test::NoWarnings                      155
    10  Test::Distribution                    142
    11  Test::Kwalitee                        138
    12  Test::Deep                            128
    13  Test::Warn                            127
    14  Test::Differences                     102
    15  Test::Spelling                        101
    16  Test::MockObject                       87
    17  Test::Builder::Tester                  84
    18  Test::WWW::Mechanize::Catalyst         79
    19  Test::UseAllModules                    63
    20  Test::YAML::Meta                       61
</pre>
<p class="Pp">Test::Most is number 24 on that list, if you're curious. See
    &lt;http://blogs.perl.org/users/ovid/2010/01/most-popular-testing-modules---january-2010.html&gt;.</p>
<p class="Pp">The modules chosen seemed the best fit for what
    <span class="Li">&quot;Test::Most&quot;</span> is trying to do. As of 0.02,
    we've added Test::Warn by request. It's not in the top ten, but it's a great
    and useful module.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Curtis Poe, <span class="Li">&quot;&lt;ovid at
    cpan.org&gt;&quot;</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Please report any bugs or feature requests to
    <span class="Li">&quot;bug-test-extended at</span>
    <span class="Li">rt.cpan.org&quot;</span>, or through the web interface at
    &lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Test-Most&gt;. I will be
    notified, and then you'll automatically be notified of progress on your bug
    as I make changes.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
<p class="Pp">You can find documentation for this module with the perldoc
    command.</p>
<p class="Pp"></p>
<pre>    perldoc Test::Most
</pre>
<p class="Pp">You can also look for information at:</p>
<ul class="Bl-bullet">
  <li>RT: CPAN's request tracker
    <p class="Pp">&lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Test-Most&gt;</p>
  </li>
  <li>AnnoCPAN: Annotated CPAN documentation
    <p class="Pp">&lt;http://annocpan.org/dist/Test-Most&gt;</p>
  </li>
  <li>CPAN Ratings
    <p class="Pp">&lt;http://cpanratings.perl.org/d/Test-Most&gt;</p>
  </li>
  <li>Search CPAN
    <p class="Pp">&lt;http://search.cpan.org/dist/Test-Most&gt;</p>
  </li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="TODO"><a class="permalink" href="#TODO">TODO</a></h1>
<section class="Ss">
<h2 class="Ss">Deferred plans</h2>
<p class="Pp">Sometimes you don't know the number of tests you will run when you
    use <span class="Li">&quot;Test::More&quot;</span>. The
    <span class="Li">&quot;plan()&quot;</span> function allows you to delay
    specifying the plan, but you must still call it before the tests are run.
    This is an error:</p>
<p class="Pp"></p>
<pre> use Test::More;
 my $tests = 0;
 foreach my $test (
     my $count = run($test); # assumes tests are being run
     $tests += $count;
 }
 plan($tests);
</pre>
<p class="Pp">The way around this is typically to use 'no_plan' and when the
    tests are done, <span class="Li">&quot;Test::Builder&quot;</span> merely
    sets the plan to the number of tests run. We'd like for the programmer to
    specify this number instead of letting
    <span class="Li">&quot;Test::Builder&quot;</span> do it. However,
    <span class="Li">&quot;Test::Builder&quot;</span> internals are a bit
    difficult to work with, so we're delaying this feature.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Cleaner_"><a class="permalink" href="#Cleaner_">Cleaner
  <b>skip()</b></a></h2>
<pre> if ( $some_condition ) {
     skip $message, $num_tests;
 }
 else {
     # run those tests
 }
</pre>
<p class="Pp">That would be cleaner and I might add it if enough people want
  it.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
<p class="Pp">Because of how Perl handles arguments, and because diagnostics are
    not really part of the Test Anything Protocol, what actually happens
    internally is that we note that a test has failed and we throw an exception
    or bail out as soon as the <i>next</i> test is called (but before it runs).
    This means that its arguments are automatically evaluated before we can take
    action:</p>
<p class="Pp"></p>
<pre> use Test::Most qw&lt;no_plan die&gt;;
 ok $foo, 'Die if this fails';
 ok factorial(123456),
   '... but wait a loooong time before you throw an exception';
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ACKNOWLEDGEMENTS"><a class="permalink" href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a></h1>
<p class="Pp">Many thanks to <span class="Li">&quot;perl-qa&quot;</span> for
    arguing about this so much that I just went ahead and did it :)</p>
<p class="Pp">Thanks to Aristotle for suggesting a better way to die or
  bailout.</p>
<p class="Pp">Thanks to 'swillert' (&lt;http://use.perl.org/~swillert/&gt;) for
    suggesting a better implementation of my &quot;dumper explain&quot; idea
    (&lt;http://use.perl.org/~Ovid/journal/37004&gt;).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_&amp;_LICENSE"><a class="permalink" href="#COPYRIGHT_&amp;_LICENSE">COPYRIGHT
  &amp; LICENSE</a></h1>
<p class="Pp">Copyright 2008 Curtis Poe, all rights reserved.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-04-04</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
