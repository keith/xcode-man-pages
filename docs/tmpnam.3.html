<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1988, 1991, 1993
  	The Regents of the University of California.  All rights reserved.
  
   This code is derived from software contributed to Berkeley by
   the American National Standards Committee X3, on Information
   Processing Systems.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   4. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
       @(#)tmpnam.3	8.2 (Berkeley) 11/17/93
   $FreeBSD: src/lib/libc/stdio/tmpnam.3,v 1.20 2007/03/16 21:46:24 maxim Exp $
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>TMPFILE(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TMPFILE(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">TMPFILE(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">tempnam</code>, <code class="Nm">tmpfile</code>,
  <code class="Nm">tmpnam</code> &#x2014;
<div class="Nd">temporary file routines</div>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<code class="In">#include &lt;<a class="In">stdio.h</a>&gt;</code>
<p class="Pp"><var class="Ft">FILE *</var>
  <br/>
  <code class="Fn">tmpfile</code>(<var class="Fa">void</var>);</p>
<p class="Pp"><var class="Ft">char *</var>
  <br/>
  <code class="Fn">tmpnam</code>(<var class="Fa">char *s</var>);</p>
<p class="Pp"><var class="Ft">char *</var>
  <br/>
  <code class="Fn">tempnam</code>(<var class="Fa">const char *dir</var>,
    <var class="Fa">const char *pfx</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <code class="Fn">tmpfile</code>() function returns a pointer to a stream
  associated with a file descriptor returned by the routine
  <a class="Xr">mkstemp(3)</a>. The created file is unlinked before
  <code class="Fn">tmpfile</code>() returns, causing the file to be
  automatically deleted when the last reference to it is closed. The file is
  opened with the access value &#x2018;<code class="Li">w+</code>&#x2019;. If
  the environment variable <code class="Ev">TMPDIR</code> is defined, the file
  is created in the specified directory. The default location, if
  <code class="Ev">TMPDIR</code> is not set, is <span class="Pa">/tmp</span>.
<p class="Pp">The <code class="Fn">tmpnam</code>() function returns a pointer to
    a file name, in the <code class="Dv">P_tmpdir</code> directory, which did
    not reference an existing file at some indeterminate point in the past.
    <code class="Dv">P_tmpdir</code> is defined in the include file
    <code class="In">&lt;<a class="In">stdio.h</a>&gt;</code>. If the argument
    <var class="Fa">s</var> is non-<code class="Dv">NULL</code>, the file name
    is copied to the buffer it references. Otherwise, the file name is copied to
    a static buffer. In either case, <code class="Fn">tmpnam</code>() returns a
    pointer to the file name.</p>
<p class="Pp">The buffer referenced by <var class="Fa">s</var> is expected to be
    at least <code class="Dv">L_tmpnam</code> bytes in length.
    <code class="Dv">L_tmpnam</code> is defined in the include file
    <code class="In">&lt;<a class="In">stdio.h</a>&gt;</code>.</p>
<p class="Pp">The <code class="Fn">tempnam</code>() function is similar to
    <code class="Fn">tmpnam</code>(), but provides the ability to specify the
    directory which will contain the temporary file and the file name
  prefix.</p>
<p class="Pp">The argument <var class="Fa">dir</var> (if
    non-<code class="Dv">NULL</code>), the directory
    <code class="Dv">P_tmpdir</code>, the environment variable
    <code class="Ev">TMPDIR</code> (if set), the directory
    <span class="Pa">/tmp</span> and finally, the current directory, are tried,
    in the listed order, as directories in which to store the temporary
  file.</p>
<p class="Pp">The argument <var class="Fa">pfx</var>, if
    non-<code class="Dv">NULL</code>, is used to specify a file name prefix,
    which will be the first part of the created file name. The
    <code class="Fn">tempnam</code>() function allocates memory in which to
    store the file name; the returned pointer may be used as a subsequent
    argument to <a class="Xr">free(3)</a>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
The <code class="Fn">tmpfile</code>() function returns a pointer to an open file
  stream on success, and a <code class="Dv">NULL</code> pointer on error.
<p class="Pp">The <code class="Fn">tmpnam</code>() and
    <code class="Fn">tempfile</code>() functions return a pointer to a file name
    on success, and a <code class="Dv">NULL</code> pointer on error.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#TMPDIR"><code class="Ev" id="TMPDIR">TMPDIR</code></a></dt>
  <dd>[<code class="Fn">tempnam</code>() only] If set, the directory in which
      the temporary file is stored. <code class="Ev">TMPDIR</code> is ignored
      for processes for which <a class="Xr">issetugid(2)</a> is true.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPATIBILITY"><a class="permalink" href="#COMPATIBILITY">COMPATIBILITY</a></h1>
These interfaces are provided from System V and ANSI compatibility only.
<p class="Pp">Most historic implementations of these functions provide only a
    limited number of possible temporary file names (usually 26) before file
    names will start being recycled. System V implementations of these functions
    (and of <a class="Xr">mktemp(3)</a>) use the <a class="Xr">access(2)</a>
    system call to determine whether or not the temporary file may be created.
    This has obvious ramifications for setuid or setgid programs, complicating
    the portable use of these interfaces in such programs.</p>
<p class="Pp">The <code class="Fn">tmpfile</code>() interface should not be used
    in software expected to be used on other systems if there is any possibility
    that the user does not wish the temporary file to be publicly readable and
    writable.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ERRORS"><a class="permalink" href="#ERRORS">ERRORS</a></h1>
The <code class="Fn">tmpfile</code>() function may fail and set the global
  variable <var class="Va">errno</var> for any of the errors specified for the
  library functions <a class="Xr">fdopen(3)</a> or <a class="Xr">mkstemp(3)</a>.
<p class="Pp">The <code class="Fn">tmpnam</code>() function may fail and set
    <var class="Va">errno</var> for any of the errors specified for the library
    function <a class="Xr">mktemp(3)</a>.</p>
<p class="Pp">The <code class="Fn">tempnam</code>() function may fail and set
    <var class="Va">errno</var> for any of the errors specified for the library
    functions <a class="Xr">malloc(3)</a> or <a class="Xr">mktemp(3)</a>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SECURITY_CONSIDERATIONS"><a class="permalink" href="#SECURITY_CONSIDERATIONS">SECURITY
  CONSIDERATIONS</a></h1>
The <code class="Fn">tmpnam</code>() and <code class="Fn">tempnam</code>()
  functions are susceptible to a race condition occurring between the selection
  of the file name and the creation of the file, which allows malicious users to
  potentially overwrite arbitrary files in the system, depending on the level of
  privilege of the running program. Additionally, there is no means by which
  file permissions may be specified. It is strongly suggested that
  <a class="Xr">mkstemp(3)</a> be used in place of these functions. (See the
  FSA.)
</section>
<section class="Sh">
<h1 class="Sh" id="LEGACY_DESCRIPTION"><a class="permalink" href="#LEGACY_DESCRIPTION">LEGACY
  DESCRIPTION</a></h1>
In legacy mode, the order directories are tried by the
  <code class="Fn">tempnam</code>() function is different; the environment
  variable <code class="Ev">TMPDIR</code> (if defined) is used first.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">mkstemp(3)</a>, <a class="Xr">mktemp(3)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="STANDARDS"><a class="permalink" href="#STANDARDS">STANDARDS</a></h1>
The <code class="Fn">tmpfile</code>() and <code class="Fn">tmpnam</code>()
  functions conform to <span class="St">ISO/IEC 9899:1990
  (&#x201C;ISO&#x00A0;C90&#x201D;)</span>.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">November 12, 2008</td>
    <td class="foot-os">Mac OS X 11.0</td>
  </tr>
</table>
</body>
</html>
