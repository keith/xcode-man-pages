<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2006-2011 Apple Inc. All rights reserved.
  
   @APPLE_LICENSE_HEADER_START@
  
   This file contains Original Code and/or Modifications of Original Code
   as defined in and that are subject to the Apple Public Source License
   Version 2.0 (the 'License'). You may not use this file except in
   compliance with the License. Please obtain a copy of the License at
   http://www.opensource.apple.com/apsl/ and read it before using this
   file.
  
   The Original Code and all software distributed under the License are
   distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
   EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
   INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
   Please see the License for the specific language governing rights and
   limitations under the License.
  
   @APPLE_LICENSE_HEADER_END@
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>notifyutil(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">notifyutil(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">notifyutil(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">notifyutil</code> &#x2014;
<div class="Nd">notification command line utility</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">notifyutil</code></td>
    <td>[<code class="Fl">-q</code>] [<code class="Fl">-v</code>]
      [<code class="Fl">-z</code> <var class="Ar">msec</var>]
      [<code class="Fl">-M</code>] [<code class="Fl">-R</code>] [command
      <code class="Li">...</code>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">notifyutil</code> is a command-line utility for interacting
  with the <a class="Xr">notify(3)</a> notification system and the
  <a class="Xr">notifyd(8)</a> server. It may be used to post notifications,
  detect and report notifications, and to examine and set the state values
  associated with notification keys.
<p class="Pp">If <code class="Nm">notifyutil</code> is used to monitor one or
    more notification keys, it prints the notification key when the
    corresponding notification is received. The <code class="Fl">-v</code>
    (verbose) and <code class="Fl">-q</code> (quiet) flags, if specified, modify
    the output behavior.</p>
<p class="Pp">The <code class="Fl">-v</code> flag causes
    <code class="Nm">notifyutil</code> to print a time stamp, the notification
    key, the current state value for that key, and the type of the notification
    (port, file, etc). The <code class="Fl">-q</code> flag supresses any output
    except for state values fetched following a <code class="Fl">-g</code>
    command.</p>
<p class="Pp">Commands listed in the table below are processed in left to right
    order from the command line.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#p"><code class="Fl" id="p">-p</code></a>
    <var class="Ar">key</var></dt>
  <dd>Post a notification for <var class="Ar">key</var>.</dd>
  <dt><a class="permalink" href="#w"><code class="Fl" id="w">-w</code></a>
    <var class="Ar">key</var></dt>
  <dd>Register for <var class="Ar">key</var> and wait forever for
    notifications.</dd>
  <dt><code class="Fl">-</code><var class="Ar">#</var>
    <var class="Ar">key</var></dt>
  <dd>Register for <var class="Ar">key</var> and wait for
      <var class="Ar">#</var> (an integer) notifications.</dd>
  <dt></dt>
  <dd><a class="permalink" href="#E.g."><code class="Li" id="E.g.">E.g.</code></a>
      <code class="Fl">-1</code> <var class="Ar">key</var> waits for a single
      notification.</dd>
  <dt><a class="permalink" href="#g"><code class="Fl" id="g">-g</code></a>
    <var class="Ar">key</var></dt>
  <dd>Get state value for <var class="Ar">key</var>.</dd>
  <dt><a class="permalink" href="#s"><code class="Fl" id="s">-s</code></a>
    <var class="Ar">key</var> <var class="Ar">val</var></dt>
  <dd>Set state value for <var class="Ar">key</var>.</dd>
  <dt><a class="permalink" href="#port"><code class="Fl" id="port">-port</code></a></dt>
  <dd>Use mach port notifications for subsequent <code class="Fl">-w</code> or
      <code class="Fl">-</code><var class="Ar">#</var> registrations.</dd>
  <dt></dt>
  <dd>This is the default registration type.</dd>
  <dt><a class="permalink" href="#file"><code class="Fl" id="file">-file</code></a></dt>
  <dd>Use file descriptor notifications for subsequent registrations.</dd>
  <dt><a class="permalink" href="#check"><code class="Fl" id="check">-check</code></a></dt>
  <dd>Use shared memory notifications for subsequent registrations.</dd>
  <dt><a class="permalink" href="#signal"><code class="Fl" id="signal">-signal</code></a>
    [<var class="Ar">#</var>]</dt>
  <dd>Use signal notifications for subsequent registrations.</dd>
  <dt></dt>
  <dd>Signal 1 (HUP) is the default, but an alternate signal may be
    specified.</dd>
  <dt><a class="permalink" href="#dispatch"><code class="Fl" id="dispatch">-dispatch</code></a></dt>
  <dd>Use dispatch for subsequent registrations.</dd>
</dl>
</div>
<p class="Pp">When invoked with any combination of <code class="Fl">-w</code>
    and <code class="Fl">-</code><var class="Ar">#</var> actions,
    <code class="Nm">notifyutil</code> registers for notification for the
    specified key(s). If any key is given with a <code class="Fl">-w</code>
    action, <code class="Nm">notifyutil</code> runs until interrupted with
    Control-C. If all registrations are invoked with
    <code class="Fl">-</code><var class="Ar">#</var>, the program continues to
    run until the corresponding number of notifications for each key have been
    received.</p>
<p class="Pp">By default, <code class="Nm">notifyutil</code> uses mach port
    registration (using <code class="Fn">notify_register_mach_port</code>()) for
    keys given with a <code class="Fl">-w</code> or
    <code class="Fl">-</code><var class="Ar">#</var> flag. The
    <code class="Fl">-file</code> command causes
    <code class="Nm">notifyutil</code> to use
    <code class="Fn">notify_register_file_descriptor</code>() for any subsequent
    <code class="Fl">-w</code> or
    <code class="Fl">-</code><var class="Ar">#</var> registrations. Similarly,
    <code class="Fl">-check</code> causes <code class="Nm">notifyutil</code> to
    use <code class="Fn">notify_register_check</code>() for subsequent
    registrations, <code class="Fl">-signal</code> switches to
    <code class="Fn">notify_register_signal</code>(), and
    <code class="Fl">-dispatch</code> causes it to use
    <code class="Fn">notify_register_dispatch</code>() for subsequent
    registrations.</p>
<p class="Pp">If any registrations are made following the use of the
    <code class="Fl">-check</code> command, <code class="Nm">notifyutil</code>
    will start a timer and check for shared memory notifications every 100
    milliseconds. An alternate timer value may be set following the
    <code class="Fl">-z</code> flag.</p>
<p class="Pp">The <code class="Fl">-M</code> flag causes
    <code class="Nm">notifyutil</code> to use multiplex all notifications over a
    single mach connection with <code class="Nm">notifyd</code>. Notifications
    (except shared memory notifications) are received and redistributed by a
    dispatch handler.</p>
<p class="Pp">The <code class="Fl">-R</code> flag causes
    <code class="Nm">notifyutil</code> to regenerate all its registrations in
    the unlikely event that <code class="Nm">notifyd</code> restarts.</p>
<p class="Pp">Note that a notification key and its associated state variable
    only exist when there are one or more current registrations for that key.
    Setting the state for a key that has no registrations has no effect. Thus
    the command</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">notifyutil -s foo.bar 123 -g
  foo.bar</code></div>
<p class="Pp">will print</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">foo.bar 0</code></div>
<p class="Pp">unless foo.bar is registered by some other process. However, the
    command</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">notifyutil -w foo.bar -s foo.bar 123
  -g foo.bar</code></div>
<p class="Pp">prints</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">foo.bar 123</code></div>
<p class="Pp">since the &#x201C;-w foo.bar&#x201D; registration ensures the key
    and its state variable exist before the value is set, and continue to exist
    when the value is fetched.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
notify(3), notifyd(8)
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">November 4, 2011</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
