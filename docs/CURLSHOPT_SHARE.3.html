<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   **************************************************************************
   *                                  _   _ ____  _
   *  Project                     ___| | | |  _ \| |
   *                             / __| | | | |_) | |
   *                            | (__| |_| |  _ <| |___
   *                             \___|\___/|_| \_\_____|
   *
   * Copyright (C) Daniel Stenberg, <daniel@haxx.se>, et al.
   *
   * This software is licensed as described in the file COPYING, which
   * you should have received as part of this distribution. The terms
   * are also available at https://curl.se/docs/copyright.html.
   *
   * You may opt to use, copy, modify, merge, publish, distribute and/or sell
   * copies of the Software, and permit persons to whom the Software is
   * furnished to do so, under the terms of the COPYING file.
   *
   * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
   * KIND, either express or implied.
   *
   * SPDX-License-Identifier: curl
   *
   **************************************************************************
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>CURLSHOPT_SHARE(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CURLSHOPT_SHARE(3)</td>
    <td class="head-vol">libcurl</td>
    <td class="head-rtitle">CURLSHOPT_SHARE(3)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">CURLSHOPT_SHARE - add data to share</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;curl/curl.h&gt;
CURLSHcode curl_share_setopt(CURLSH *share, CURLSHOPT_SHARE, long type);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <i>type</i> parameter specifies what specific data that should
    be shared and kept in the share object that was created with
    <i>curl_share_init(3)</i>. The given <i>type</i> must be be one of the
    values described below. You can set <i>CURLSHOPT_SHARE(3)</i> multiple times
    with different data arguments to have the share object share multiple types
    of data. Unset a type again by setting <i>CURLSHOPT_UNSHARE(3)</i>.</p>
<dl class="Bl-tag">
  <dt id="CURL_LOCK_DATA_COOKIE"><a class="permalink" href="#CURL_LOCK_DATA_COOKIE">CURL_LOCK_DATA_COOKIE</a></dt>
  <dd>Cookie data is shared across the easy handles using this shared object.
      Note that this does not activate an easy handle's cookie handling. You can
      do that separately by using <i>CURLOPT_COOKIEFILE(3)</i> for example.</dd>
  <dt id="CURL_LOCK_DATA_DNS"><a class="permalink" href="#CURL_LOCK_DATA_DNS">CURL_LOCK_DATA_DNS</a></dt>
  <dd>Cached DNS hosts are shared across the easy handles using this shared
      object. Note that when you use the multi interface, all easy handles added
      to the same multi handle share DNS cache by default without using this
      option.</dd>
  <dt id="CURL_LOCK_DATA_SSL_SESSION"><a class="permalink" href="#CURL_LOCK_DATA_SSL_SESSION">CURL_LOCK_DATA_SSL_SESSION</a></dt>
  <dd>SSL session IDs are shared across the easy handles using this shared
      object. This reduces the time spent in the SSL handshake when reconnecting
      to the same server. Note SSL session IDs are reused within the same easy
      handle by default. Note this symbol was added in 7.10.3 but was not
      implemented until 7.23.0.</dd>
  <dt id="CURL_LOCK_DATA_CONNECT"><a class="permalink" href="#CURL_LOCK_DATA_CONNECT">CURL_LOCK_DATA_CONNECT</a></dt>
  <dd>Put the connection cache in the share object and make all easy handles
      using this share object share the connection cache.
    <p class="Pp">It is not supported to share connections between multiple
        concurrent threads.</p>
    <p class="Pp">Connections that are used for HTTP/1.1 Pipelining or HTTP/2
        multiplexing only get additional transfers added to them if the existing
        connection is held by the same multi or easy handle. libcurl does not
        support doing HTTP/2 streams in different threads using a shared
        connection.</p>
    <p class="Pp">Support for <b>CURL_LOCK_DATA_CONNECT</b> was added in 7.57.0,
        but the symbol existed before this.</p>
    <p class="Pp">Note that when you use the multi interface, all easy handles
        added to the same multi handle shares connection cache by default
        without using this option.</p>
  </dd>
  <dt id="CURL_LOCK_DATA_PSL"><a class="permalink" href="#CURL_LOCK_DATA_PSL">CURL_LOCK_DATA_PSL</a></dt>
  <dd>The Public Suffix List stored in the share object is made available to all
      easy handle bound to the later. Since the Public Suffix List is
      periodically refreshed, this avoids updates in too many different
      contexts.
    <p class="Pp">Added in 7.61.0.</p>
    <p class="Pp">Note that when you use the multi interface, all easy handles
        added to the same multi handle shares PSL cache by default without using
        this option.</p>
  </dd>
  <dt id="CURL_LOCK_DATA_HSTS"><a class="permalink" href="#CURL_LOCK_DATA_HSTS">CURL_LOCK_DATA_HSTS</a></dt>
  <dd>The in-memory HSTS cache.
    <p class="Pp">It is not supported to share the HSTS between multiple
        concurrent threads.</p>
    <p class="Pp">Added in 7.88.0</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PROTOCOLS"><a class="permalink" href="#PROTOCOLS">PROTOCOLS</a></h1>
<p class="Pp">All</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>
<br/>
  CURLSHcode sh;
<br/>
  share = curl_share_init();
<br/>
  sh = curl_share_setopt(share, CURLSHOPT_SHARE, CURL_LOCK_DATA_COOKIE);
<br/>
  if(sh)
<br/>
    printf(&quot;Error: %s\n&quot;, curl_share_strerror(sh));</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AVAILABILITY"><a class="permalink" href="#AVAILABILITY">AVAILABILITY</a></h1>
<p class="Pp">Added in 7.10</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">CURLSHE_OK (zero) means that the option was set properly, non-zero
    means an error occurred. See <i>libcurl-errors(3)</i> for the full list with
    descriptions.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>curl_share_cleanup</b>(3), <b>curl_share_init</b>(3),
    <b>curl_share_setopt</b>(3), <b>CURLSHOPT_UNSHARE</b>(3)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 26, 2023</td>
    <td class="foot-os">ibcurl 8.4.0</td>
  </tr>
</table>
</body>
</html>
