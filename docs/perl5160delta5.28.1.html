<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>PERL5160DELTA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERL5160DELTA(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERL5160DELTA(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
perl5160delta - what is new for perl v5.16.0
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This document describes differences between the 5.14.0 release and the 5.16.0
  release.
<p class="Pp">If you are upgrading from an earlier release such as 5.12.0, first
    read perl5140delta, which describes differences between 5.12.0 and
  5.14.0.</p>
<p class="Pp">Some bug fixes in this release have been backported to later
    releases of 5.14.x. Those are indicated with the 5.14.x version in
    parentheses.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Notice"><a class="permalink" href="#Notice">Notice</a></h1>
With the release of Perl 5.16.0, the 5.12.x series of releases is now out of its
  support period. There may be future 5.12.x releases, but only in the event of
  a critical security issue. Users of Perl 5.12 or earlier should consider
  upgrading to a more recent release of Perl.
<p class="Pp">This policy is described in greater detail in perlpolicy.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Core_Enhancements"><a class="permalink" href="#Core_Enhancements">Core
  Enhancements</a></h1>
<section class="Ss">
<h2 class="Ss" id="_use__f(CIVERSION_fP_"><a class="permalink" href="#_use__f(CIVERSION_fP_">&quot;use
  <i>VERSION</i>&quot;</a></h2>
As of this release, version declarations like <span class="Li">&quot;use
  v5.16&quot;</span> now disable all features before enabling the new feature
  bundle. This means that the following holds true:
<p class="Pp"><span class="Li"></span></p>
<pre>
    use 5.016;
    # only 5.16 features enabled here
    use 5.014;
    # only 5.14 features enabled here (not 5.16)
</pre>
<p class="Pp"><span class="Li">&quot;use v5.12&quot;</span> and higher continue
    to enable strict, but explicit <span class="Li">&quot;use</span>
    <span class="Li">strict&quot;</span> and <span class="Li">&quot;no
    strict&quot;</span> now override the version declaration, even when they
    come first:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    no strict;
    use 5.012;
    # no strict here
</pre>
<p class="Pp">There is a new &quot;:default&quot; feature bundle that represents
    the set of features enabled before any version declaration or
    <span class="Li">&quot;use feature&quot;</span> has been seen. Version
    declarations below 5.10 now enable the &quot;:default&quot; feature set.
    This does not actually change the behavior of
    <span class="Li">&quot;use</span> <span class="Li">v5.8&quot;</span>,
    because features added to the &quot;:default&quot; set are those that were
    traditionally enabled by default, before they could be turned off.</p>
<p class="Pp"><span class="Li">&quot;no feature&quot;</span> now resets to the
    default feature set. To disable all features (which is likely to be a pretty
    special-purpose request, since it presumably won't match any named set of
    semantics) you can now write <span class="Li">&quot;no feature
    ':all'&quot;</span>.</p>
<p class="Pp"><span class="Li">$[</span> is now disabled under
    <span class="Li">&quot;use v5.16&quot;</span>. It is part of the default
    feature set and can be turned on or off explicitly with
    <span class="Li">&quot;use feature</span>
    <span class="Li">'array_base'&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_____SUB_____"><a class="permalink" href="#_____SUB_____">&quot;__SUB__&quot;</a></h2>
The new <span class="Li">&quot;__SUB__&quot;</span> token, available under the
  <span class="Li">&quot;current_sub&quot;</span> feature (see feature) or
  <span class="Li">&quot;use v5.16&quot;</span>, returns a reference to the
  current subroutine, making it easier to write recursive closures.
</section>
<section class="Ss">
<h2 class="Ss" id="New_and_Improved_Built-ins"><a class="permalink" href="#New_and_Improved_Built-ins">New
  and Improved Built-ins</a></h2>
<i>More consistent </i><i>&quot;eval&quot;</i><i></i>
<p class="Pp">The <span class="Li">&quot;eval&quot;</span> operator sometimes
    treats a string argument as a sequence of characters and sometimes as a
    sequence of bytes, depending on the internal encoding. The internal encoding
    is not supposed to make any difference, but there is code that relies on
    this inconsistency.</p>
<p class="Pp">The new <span class="Li">&quot;unicode_eval&quot;</span> and
    <span class="Li">&quot;evalbytes&quot;</span> features (enabled under
    <span class="Li">&quot;use</span> <span class="Li">5.16.0&quot;</span>)
    resolve this. The <span class="Li">&quot;unicode_eval&quot;</span> feature
    causes <span class="Li">&quot;eval</span>
    <span class="Li">$string&quot;</span> to treat the string always as Unicode.
    The <span class="Li">&quot;evalbytes&quot;</span> features provides a
    function, itself called <span class="Li">&quot;evalbytes&quot;</span>, which
    evaluates its argument always as a string of bytes.</p>
<p class="Pp">These features also fix oddities with source filters leaking to
    outer dynamic scopes.</p>
<p class="Pp">See feature for more detail.</p>
<p class="Pp"><i></i><i>&quot;substr&quot;</i><i> lvalue revamp</i></p>
<p class="Pp">When <span class="Li">&quot;substr&quot;</span> is called in
    lvalue or potential lvalue context with two or three arguments, a special
    lvalue scalar is returned that modifies the original string (the first
    argument) when assigned to.</p>
<p class="Pp">Previously, the offsets (the second and third arguments) passed to
    <span class="Li">&quot;substr&quot;</span> would be converted immediately to
    match the string, negative offsets being translated to positive and offsets
    beyond the end of the string being truncated.</p>
<p class="Pp">Now, the offsets are recorded without modification in the special
    lvalue scalar that is returned, and the original string is not even looked
    at by <span class="Li">&quot;substr&quot;</span> itself, but only when the
    returned lvalue is read or modified.</p>
<p class="Pp">These changes result in an incompatible change:</p>
<p class="Pp">If the original string changes length after the call to
    <span class="Li">&quot;substr&quot;</span> but before assignment to its
    return value, negative offsets will remember their position from the end of
    the string, affecting code like this:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    my $string = &quot;string&quot;;
    my $lvalue = \substr $string, -4, 2;
    print $$lvalue, &quot;\n&quot;; # prints &quot;ri&quot;
    $string = &quot;bailing twine&quot;;
    print $$lvalue, &quot;\n&quot;; # prints &quot;wi&quot;; used to print &quot;il&quot;
</pre>
<p class="Pp">The same thing happens with an omitted third argument. The
    returned lvalue will always extend to the end of the string, even if the
    string becomes longer.</p>
<p class="Pp">Since this change also allowed many bugs to be fixed (see
    &quot;The <span class="Li">&quot;substr&quot;</span> operator&quot;), and
    since the behavior of negative offsets has never been specified, the change
    was deemed acceptable.</p>
<p class="Pp"><i>Return value of </i><i>&quot;tied&quot;</i><i></i></p>
<p class="Pp">The value returned by <span class="Li">&quot;tied&quot;</span> on
    a tied variable is now the actual scalar that holds the object to which the
    variable is tied. This lets ties be weakened with
    <span class="Li">&quot;Scalar::Util::weaken(tied</span>
    <span class="Li">$tied_variable)&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Unicode_Support"><a class="permalink" href="#Unicode_Support">Unicode
  Support</a></h2>
<i>Supports (</i><i>almost</i><i>) Unicode 6.1</i>
<p class="Pp">Besides the addition of whole new scripts, and new characters in
    existing scripts, this new version of Unicode, as always, makes some changes
    to existing characters. One change that may trip up some applications is
    that the General Category of two characters in the Latin-1 range, PILCROW
    SIGN and SECTION SIGN, has been changed from Other_Symbol to
    Other_Punctuation. The same change has been made for a character in each of
    Tibetan, Ethiopic, and Aegean. The code points U+3248..U+324F (CIRCLED
    NUMBER TEN ON BLACK SQUARE through CIRCLED NUMBER EIGHTY ON BLACK SQUARE)
    have had their General Category changed from Other_Symbol to Other_Numeric.
    The Line Break property has changes for Hebrew and Japanese; and because of
    other changes in 6.1, the Perl regular expression construct
    <span class="Li">&quot;\X&quot;</span> now works differently for some
    characters in Thai and Lao.</p>
<p class="Pp">New aliases (synonyms) have been defined for many property values;
    these, along with the previously existing ones, are all cross-indexed in
    perluniprops.</p>
<p class="Pp">The return value of
    <span class="Li">&quot;charnames::viacode()&quot;</span> is affected by
    other changes:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 Code point      Old Name             New Name
   U+000A    LINE FEED (LF)        LINE FEED
   U+000C    FORM FEED (FF)        FORM FEED
   U+000D    CARRIAGE RETURN (CR)  CARRIAGE RETURN
   U+0085    NEXT LINE (NEL)       NEXT LINE
   U+008E    SINGLE-SHIFT 2        SINGLE-SHIFT-2
   U+008F    SINGLE-SHIFT 3        SINGLE-SHIFT-3
   U+0091    PRIVATE USE 1         PRIVATE USE-1
   U+0092    PRIVATE USE 2         PRIVATE USE-2
   U+2118    SCRIPT CAPITAL P      WEIERSTRASS ELLIPTIC FUNCTION
</pre>
<p class="Pp">Perl will accept any of these names as input, but
    <span class="Li">&quot;charnames::viacode()&quot;</span> now returns the new
    name of each pair. The change for U+2118 is considered by Unicode to be a
    correction, that is the original name was a mistake (but again, it will
    remain forever valid to use it to refer to U+2118). But most of these
    changes are the fallout of the mistake Unicode 6.0 made in naming a
    character used in Japanese cell phones to be &quot;BELL&quot;, which
    conflicts with the longstanding industry use of (and Unicode's
    recommendation to use) that name to mean the ASCII control character at
    U+0007. Therefore, that name has been deprecated in Perl since v5.14, and
    any use of it will raise a warning message (unless turned off). The name
    &quot;ALERT&quot; is now the preferred name for this code point, with
    &quot;BEL&quot; an acceptable short form. The name for the new cell phone
    character, at code point U+1F514, remains undefined in this version of Perl
    (hence we don't implement quite all of Unicode 6.1), but starting in v5.18,
    BELL will mean this character, and not U+0007.</p>
<p class="Pp">Unicode has taken steps to make sure that this sort of mistake
    does not happen again. The Standard now includes all generally accepted
    names and abbreviations for control characters, whereas previously it didn't
    (though there were recommended names for most of them, which Perl used).
    This means that most of those recommended names are now officially in the
    Standard. Unicode did not recommend names for the four code points listed
    above between U+008E and U+008F, and in standardizing them Unicode subtly
    changed the names that Perl had previously given them, by replacing the
    final blank in each name by a hyphen. Unicode also officially accepts names
    that Perl had deprecated, such as FILE SEPARATOR. Now the only deprecated
    name is BELL. Finally, Perl now uses the new official names instead of the
    old (now considered obsolete) names for the first four code points in the
    list above (the ones which have the parentheses in them).</p>
<p class="Pp">Now that the names have been placed in the Unicode standard, these
    kinds of changes should not happen again, though corrections, such as to
    U+2118, are still possible.</p>
<p class="Pp">Unicode also added some name abbreviations, which Perl now
    accepts: SP for SPACE; TAB for CHARACTER TABULATION; NEW LINE, END OF LINE,
    NL, and EOL for LINE FEED; LOCKING-SHIFT ONE for SHIFT OUT; LOCKING-SHIFT
    ZERO for SHIFT IN; and ZWNBSP for ZERO WIDTH NO-BREAK SPACE.</p>
<p class="Pp">More details on this version of Unicode are provided in
    &lt;http://www.unicode.org/versions/Unicode6.1.0/&gt;.</p>
<p class="Pp"><i></i><i>&quot;use charnames&quot;</i><i> is no longer needed for
    </i> <i>&quot;\N{</i><i>name</i><i>}&quot;</i><i></i></p>
<p class="Pp">When
    <span class="Li">&quot;\N{</span><i>name</i><span class="Li">}&quot;</span>
    is encountered, the <span class="Li">&quot;charnames&quot;</span> module is
    now automatically loaded when needed as if the
    <span class="Li">&quot;:full&quot;</span> and
    <span class="Li">&quot;:short&quot;</span> options had been specified. See
    charnames for more information.</p>
<p class="Pp"><i></i><i>&quot;\N{...}&quot;</i><i> can now have Unicode loose
    name matching</i></p>
<p class="Pp">This is described in the
    <span class="Li">&quot;charnames&quot;</span> item in &quot;Updated Modules
    and Pragmata&quot; below.</p>
<p class="Pp"><i>Unicode Symbol Names</i></p>
<p class="Pp">Perl now has proper support for Unicode in symbol names. It used
    to be that <span class="Li">&quot;*{$foo}&quot;</span> would ignore the
    internal UTF8 flag and use the bytes of the underlying representation to
    look up the symbol. That meant that
    <span class="Li">&quot;*{&quot;\x{100}&quot;}&quot;</span> and
    <span class="Li">&quot;*{&quot;\xc4\x80&quot;}&quot;</span> would return the
    same thing. All these parts of Perl have been fixed to account for
  Unicode:</p>
<ul class="Bl-bullet">
  <li>Method names (including those passed to <span class="Li">&quot;use
      overload&quot;</span>)</li>
  <li>Typeglob names (including names of variables, subroutines, and
      filehandles)</li>
  <li>Package names</li>
  <li><span class="Li">&quot;goto&quot;</span></li>
  <li>Symbolic dereferencing</li>
  <li>Second argument to <span class="Li">&quot;bless()&quot;</span> and
      <span class="Li">&quot;tie()&quot;</span></li>
  <li>Return value of <span class="Li">&quot;ref()&quot;</span></li>
  <li>Subroutine prototypes</li>
  <li>Attributes</li>
  <li>Various warnings and error messages that mention variable names or values,
      methods, etc.</li>
</ul>
<p class="Pp">In addition, a parsing bug has been fixed that prevented
    <span class="Li">&quot;*{e}&quot;</span> from implicitly quoting the name,
    but instead interpreted it as <span class="Li">&quot;*{+e}&quot;</span>,
    which would cause a strict violation.</p>
<p class="Pp"><span class="Li">&quot;*{&quot;*a::b&quot;}&quot;</span>
    automatically strips off the * if it is followed by an ASCII letter. That
    has been extended to all Unicode identifier characters.</p>
<p class="Pp">One-character non-ASCII non-punctuation variables (like
    <span class="Li">&quot;$e&quot;</span>) are now subject to &quot;Used only
    once&quot; warnings. They used to be exempt, as they were treated as
    punctuation variables.</p>
<p class="Pp">Also, single-character Unicode punctuation variables (like
    <span class="Li">$X</span>) are now supported [perl #69032].</p>
<p class="Pp"><i>Improved ability to mix locales and Unicode, including UTF-8
    locales</i></p>
<p class="Pp">An optional parameter has been added to <span class="Li">&quot;use
    locale&quot;</span></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 use locale ':not_characters';
</pre>
<p class="Pp">which tells Perl to use all but the
    <span class="Li">&quot;LC_CTYPE&quot;</span> and
    <span class="Li">&quot;LC_COLLATE&quot;</span> portions of the current
    locale. Instead, the character set is assumed to be Unicode. This lets
    locales and Unicode be seamlessly mixed, including the increasingly frequent
    UTF-8 locales. When using this hybrid form of locales, the
    <span class="Li">&quot;:locale&quot;</span> layer to the open pragma can be
    used to interface with the file system, and there are CPAN modules available
    for ARGV and environment variable conversions.</p>
<p class="Pp">Full details are in perllocale.</p>
<p class="Pp"><i>New function </i><i>&quot;fc&quot;</i><i> and corresponding
    escape sequence </i><i>&quot;\F&quot;</i><i> for Unicode foldcase</i></p>
<p class="Pp">Unicode foldcase is an extension to lowercase that gives better
    results when comparing two strings case-insensitively. It has long been used
    internally in regular expression <span class="Li">&quot;/i&quot;</span>
    matching. Now it is available explicitly through the new
    <span class="Li">&quot;fc&quot;</span> function call (enabled by
    <span class="Li">&quot;use&#x00A0;feature&#x00A0;'fc'&quot;</span>, or
    <span class="Li">&quot;use v5.16&quot;</span>, or explicitly callable via
    <span class="Li">&quot;CORE::fc&quot;</span>) or through the new
    <span class="Li">&quot;\F&quot;</span> sequence in double-quotish
  strings.</p>
<p class="Pp">Full details are in &quot;fc&quot; in perlfunc.</p>
<p class="Pp"><i>The Unicode </i><i>&quot;Script_Extensions&quot;</i><i>
    property is now supported.</i></p>
<p class="Pp">New in Unicode 6.0, this is an improved
    <span class="Li">&quot;Script&quot;</span> property. Details are in
    &quot;Scripts&quot; in perlunicode.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1XS_s0_Changes"><a class="permalink" href="#_s-1XS_s0_Changes">XS
  Changes</a></h2>
<i>Improved typemaps for Some Builtin Types</i>
<p class="Pp">Most XS authors will know there is a longstanding bug in the
    OUTPUT typemap for T_AVREF (<span class="Li">&quot;AV*&quot;</span>),
    T_HVREF (<span class="Li">&quot;HV*&quot;</span>), T_CVREF
    (<span class="Li">&quot;CV*&quot;</span>), and T_SVREF
    (<span class="Li">&quot;SVREF&quot;</span> or
    <span class="Li">&quot;\$foo&quot;</span>) that requires manually
    decrementing the reference count of the return value instead of the typemap
    taking care of this. For backwards-compatibility, this cannot be changed in
    the default typemaps. But we now provide additional typemaps
    <span class="Li">&quot;T_AVREF_REFCOUNT_FIXED&quot;</span>, etc. that do not
    exhibit this bug. Using them in your extension is as simple as having one
    line in your <span class="Li">&quot;TYPEMAP&quot;</span> section:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  HV*   T_HVREF_REFCOUNT_FIXED
</pre>
<p class="Pp"><i></i><i>&quot;is_utf8_char()&quot;</i><i></i></p>
<p class="Pp">The XS-callable function
    <span class="Li">&quot;is_utf8_char()&quot;</span>, when presented with
    malformed UTF-8 input, can read up to 12 bytes beyond the end of the string.
    This cannot be fixed without changing its API, and so its use is now
    deprecated. Use <span class="Li">&quot;is_utf8_char_buf()&quot;</span>
    (described just below) instead.</p>
<p class="Pp"><i>Added </i><i>&quot;is_utf8_char_buf()&quot;</i><i></i></p>
<p class="Pp">This function is designed to replace the deprecated
    &quot;<b>is_utf8_char()</b>&quot; function. It includes an extra parameter
    to make sure it doesn't read past the end of the input buffer.</p>
<p class="Pp"><i>Other </i><i>&quot;is_utf8_foo()&quot;</i><i> functions, as
    well as </i><i>&quot;utf8_to_foo()&quot;</i><i>, etc.</i></p>
<p class="Pp">Most other XS-callable functions that take UTF-8 encoded input
    implicitly assume that the UTF-8 is valid (not malformed) with respect to
    buffer length. Do not do things such as change a character's case or see if
    it is alphanumeric without first being sure that it is valid UTF-8. This can
    be safely done for a whole string by using one of the functions
    <span class="Li">&quot;is_utf8_string()&quot;</span>,
    <span class="Li">&quot;is_utf8_string_loc()&quot;</span>, and
    <span class="Li">&quot;is_utf8_string_loclen()&quot;</span>.</p>
<p class="Pp"><i>New Pad API</i></p>
<p class="Pp">Many new functions have been added to the API for manipulating
    lexical pads. See &quot;Pad Data Structures&quot; in perlapi for more
    information.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Special_Variables"><a class="permalink" href="#Changes_to_Special_Variables">Changes
  to Special Variables</a></h2>
<i></i><i>$$</i><i> can be assigned to</i>
<p class="Pp"><span class="Li">$$</span> was made read-only in Perl 5.8.0. But
    only sometimes: <span class="Li">&quot;local $$&quot;</span> would make it
    writable again. Some CPAN modules were using <span class="Li">&quot;local
    $$&quot;</span> or XS code to bypass the read-only check, so there is no
    reason to keep <span class="Li">$$</span> read-only. (This change also
    allowed a bug to be fixed while maintaining backward compatibility.)</p>
<p class="Pp"><i></i><i>$^X</i><i> converted to an absolute path on FreeBSD, OS
    X and Solaris</i></p>
<p class="Pp"><span class="Li">$^X</span> is now converted to an absolute path
    on OS X, FreeBSD (without needing <i>/proc</i> mounted) and Solaris 10 and
    11. This augments the previous approach of using <i>/proc</i> on Linux,
    FreeBSD, and NetBSD (in all cases, where mounted).</p>
<p class="Pp">This makes relocatable perl installations more useful on these
    platforms. (See &quot;Relocatable <span class="Li">@INC</span>&quot; in
    <i>INSTALL</i>)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Debugger_Changes"><a class="permalink" href="#Debugger_Changes">Debugger
  Changes</a></h2>
<i>Features inside the debugger</i>
<p class="Pp">The current Perl's feature bundle is now enabled for commands
    entered in the interactive debugger.</p>
<p class="Pp"><i>New option for the debugger's </i><b><i>t</i></b><i>
    command</i></p>
<p class="Pp">The <b>t</b> command in the debugger, which toggles tracing mode,
    now accepts a numeric argument that determines how many levels of subroutine
    calls to trace.</p>
<p class="Pp"><i></i><i>&quot;enable&quot;</i><i> and
    </i><i>&quot;disable&quot;</i> <i></i></p>
<p class="Pp">The debugger now has <span class="Li">&quot;disable&quot;</span>
    and <span class="Li">&quot;enable&quot;</span> commands for disabling
    existing breakpoints and re-enabling them. See perldebug.</p>
<p class="Pp"><i>Breakpoints with file names</i></p>
<p class="Pp">The debugger's &quot;b&quot; command for setting breakpoints now
    lets a line number be prefixed with a file name. See &quot;b [file]:[line]
    [condition]&quot; in perldebug.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The__CORE__Namespace"><a class="permalink" href="#The__CORE__Namespace">The
  &quot;CORE&quot; Namespace</a></h2>
<i>The </i><i>&quot;CORE::&quot;</i><i> prefix</i>
<p class="Pp">The <span class="Li">&quot;CORE::&quot;</span> prefix can now be
    used on keywords enabled by feature.pm, even outside the scope of
    <span class="Li">&quot;use feature&quot;</span>.</p>
<p class="Pp"><i>Subroutines in the </i><i>&quot;CORE&quot;</i><i>
  namespace</i></p>
<p class="Pp">Many Perl keywords are now available as subroutines in the CORE
    namespace. This lets them be aliased:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    BEGIN { *entangle = \&amp;CORE::tie }
    entangle $variable, $package, @args;
</pre>
<p class="Pp">And for prototypes to be bypassed:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    sub mytie(\[%$*@]$@) {
        my ($ref, $pack, @args) = @_;
        ... do something ...
        goto &amp;CORE::tie;
    }
</pre>
<p class="Pp">Some of these cannot be called through references or via
    <span class="Li">&amp;foo</span> syntax, but must be called as
  barewords.</p>
<p class="Pp">See CORE for details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Other_Changes"><a class="permalink" href="#Other_Changes">Other
  Changes</a></h2>
<i>Anonymous handles</i>
<p class="Pp">Automatically generated file handles are now named __ANONIO__ when
    the variable name cannot be determined, rather than
    <span class="Li">$_</span>_ANONIO__.</p>
<p class="Pp"><i>Autoloaded sort Subroutines</i></p>
<p class="Pp">Custom sort subroutines can now be autoloaded [perl #30661]:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    sub AUTOLOAD { ... }
    @sorted = sort foo @list; # uses AUTOLOAD
</pre>
<p class="Pp"><i></i><i>&quot;continue&quot;</i><i> no longer requires the
    &quot;switch&quot; feature</i></p>
<p class="Pp">The <span class="Li">&quot;continue&quot;</span> keyword has two
    meanings. It can introduce a <span class="Li">&quot;continue&quot;</span>
    block after a loop, or it can exit the current
    <span class="Li">&quot;when&quot;</span> block. Up to now, the latter
    meaning was valid only with the &quot;switch&quot; feature enabled, and was
    a syntax error otherwise. Since the main purpose of feature.pm is to avoid
    conflicts with user-defined subroutines, there is no reason for
    <span class="Li">&quot;continue&quot;</span> to depend on it.</p>
<p class="Pp"><i>DTrace probes for interpreter phase change</i></p>
<p class="Pp">The <span class="Li">&quot;phase-change&quot;</span> probes will
    fire when the interpreter's phase changes, which tracks the
    <span class="Li">&quot;${^GLOBAL_PHASE}&quot;</span> variable.
    <span class="Li">&quot;arg0&quot;</span> is the new phase name;
    <span class="Li">&quot;arg1&quot;</span> is the old one. This is useful for
    limiting your instrumentation to one or more of: compile time, run time, or
    destruct time.</p>
<p class="Pp"><i></i><i>&quot;__FILE__()&quot;</i><i> Syntax</i></p>
<p class="Pp">The <span class="Li">&quot;__FILE__&quot;</span>,
    <span class="Li">&quot;__LINE__&quot;</span> and
    <span class="Li">&quot;__PACKAGE__&quot;</span> tokens can now be written
    with an empty pair of parentheses after them. This makes them parse the same
    way as <span class="Li">&quot;time&quot;</span>,
    <span class="Li">&quot;fork&quot;</span> and other built-in functions.</p>
<p class="Pp"><i>The </i><i>&quot;\$&quot;</i><i> prototype accepts any scalar
    lvalue</i></p>
<p class="Pp">The <span class="Li">&quot;\$&quot;</span> and
    <span class="Li">&quot;\[$]&quot;</span> subroutine prototypes now accept
    any scalar lvalue argument. Previously they accepted only scalars beginning
    with <span class="Li">&quot;$&quot;</span> and hash and array elements. This
    change makes them consistent with the way the built-in
    <span class="Li">&quot;read&quot;</span> and
    <span class="Li">&quot;recv&quot;</span> functions (among others) parse
    their arguments. This means that one can override the built-in functions
    with custom subroutines that parse their arguments the same way.</p>
<p class="Pp"><i></i><i>&quot;_&quot;</i><i> in subroutine prototypes</i></p>
<p class="Pp">The <span class="Li">&quot;_&quot;</span> character in subroutine
    prototypes is now allowed before <span class="Li">&quot;@&quot;</span> or
    <span class="Li">&quot;%&quot;</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Security"><a class="permalink" href="#Security">Security</a></h1>
<section class="Ss">
<h2 class="Ss" id="Use__is_utf8_char_buf()__and_not__is_utf8_char()_"><a class="permalink" href="#Use__is_utf8_char_buf()__and_not__is_utf8_char()_">Use
  &quot;is_utf8_char_buf()&quot; and not &quot;is_utf8_char()&quot;</a></h2>
The latter function is now deprecated because its API is insufficient to
  guarantee that it doesn't read (up to 12 bytes in the worst case) beyond the
  end of its input string. See <b>is_utf8_char_buf()</b>.
</section>
<section class="Ss">
<h2 class="Ss" id="Malformed__s-1UTF_-8_s0_input_could_cause_attempts_to_read_beyond_the_end_of_the_buffer"><a class="permalink" href="#Malformed__s-1UTF_-8_s0_input_could_cause_attempts_to_read_beyond_the_end_of_the_buffer">Malformed
  UTF-8 input could cause attempts to read beyond the end of the buffer</a></h2>
Two new XS-accessible functions,
  <span class="Li">&quot;utf8_to_uvchr_buf()&quot;</span> and
  <span class="Li">&quot;utf8_to_uvuni_buf()&quot;</span> are now available to
  prevent this, and the Perl core has been converted to use them. See
  &quot;Internal Changes&quot;.
</section>
<section class="Ss">
<h2 class="Ss" id="_File::Glob::bsd_glob()__memory_error_with__s-1GLOB_ALTDIRFUNC_s0_(_s-1CVE_-2011_-2728_s0)."><a class="permalink" href="#_File::Glob::bsd_glob()__memory_error_with__s-1GLOB_ALTDIRFUNC_s0_(_s-1CVE_-2011_-2728_s0).">&quot;File::Glob::bsd_glob()&quot;
  memory error with GLOB_ALTDIRFUNC (CVE-2011-2728).</a></h2>
Calling <span class="Li">&quot;File::Glob::bsd_glob&quot;</span> with the
  unsupported flag GLOB_ALTDIRFUNC would cause an access violation / segfault. A
  Perl program that accepts a flags value from an external source could expose
  itself to denial of service or arbitrary code execution attacks. There are no
  known exploits in the wild. The problem has been corrected by explicitly
  disabling all unsupported flags and setting unused function pointers to null.
  Bug reported by Clement Lecigne. (5.14.2)
</section>
<section class="Ss">
<h2 class="Ss" id="Privileges_are_now_set_correctly_when_assigning_to_$("><a class="permalink" href="#Privileges_are_now_set_correctly_when_assigning_to_$(">Privileges
  are now set correctly when assigning to $(</a></h2>
A hypothetical bug (probably unexploitable in practice) because the incorrect
  setting of the effective group ID while setting <span class="Li">$(</span> has
  been fixed. The bug would have affected only systems that have
  <span class="Li">&quot;setresgid()&quot;</span> but not
  <span class="Li">&quot;setregid()&quot;</span>, but no such systems are known
  to exist.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Deprecations"><a class="permalink" href="#Deprecations">Deprecations</a></h1>
<section class="Ss">
<h2 class="Ss" id="Don't_read_the_Unicode_data_base_files_in__fIlib/unicore_fP"><a class="permalink" href="#Don't_read_the_Unicode_data_base_files_in__fIlib/unicore_fP">Don't
  read the Unicode data base files in <i>lib/unicore</i></a></h2>
It is now deprecated to directly read the Unicode data base files. These are
  stored in the <i>lib/unicore</i> directory. Instead, you should use the new
  functions in Unicode::UCD. These provide a stable API, and give complete
  information.
<p class="Pp">Perl may at some point in the future change or remove these files.
    The file which applications were most likely to have used is
    <i>lib/unicore/ToDigit.pl</i>. &quot;<b>prop_invmap()</b>&quot; in
    Unicode::UCD can be used to get at its data instead.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1XS_s0_functions__is_utf8_char()_,__utf8_to_uvchr()__and__utf8_to_uvuni()_"><a class="permalink" href="#_s-1XS_s0_functions__is_utf8_char()_,__utf8_to_uvchr()__and__utf8_to_uvuni()_">XS
  functions &quot;is_utf8_char()&quot;, &quot;utf8_to_uvchr()&quot; and
  &quot;utf8_to_uvuni()&quot;</a></h2>
This function is deprecated because it could read beyond the end of the input
  string. Use the new <b>is_utf8_char_buf()</b>,
  <span class="Li">&quot;utf8_to_uvchr_buf()&quot;</span> and
  <span class="Li">&quot;utf8_to_uvuni_buf()&quot;</span> instead.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Future_Deprecations"><a class="permalink" href="#Future_Deprecations">Future
  Deprecations</a></h1>
This section serves as a notice of features that are <i>likely</i> to be removed
  or deprecated in the next release of perl (5.18.0). If your code depends on
  these features, you should contact the Perl 5 Porters via the mailing list
  &lt;http://lists.perl.org/list/perl5-porters.html&gt; or perlbug to explain
  your use case and inform the deprecation process.
<section class="Ss">
<h2 class="Ss" id="Core_Modules"><a class="permalink" href="#Core_Modules">Core
  Modules</a></h2>
These modules may be marked as deprecated <i>from the core</i>. This only means
  that they will no longer be installed by default with the core distribution,
  but will remain available on the CPAN.
<ul class="Bl-bullet">
  <li>CPANPLUS</li>
  <li>Filter::Simple</li>
  <li>PerlIO::mmap</li>
  <li>Pod::LaTeX</li>
  <li>Pod::Parser</li>
  <li>SelfLoader</li>
  <li>Text::Soundex</li>
  <li>Thread.pm</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Platforms_with_no_supporting_programmers"><a class="permalink" href="#Platforms_with_no_supporting_programmers">Platforms
  with no supporting programmers</a></h2>
These platforms will probably have their special build support removed during
  the 5.17.0 development series.
<ul class="Bl-bullet">
  <li>BeOS</li>
  <li>djgpp</li>
  <li>dgux</li>
  <li>EPOC</li>
  <li>MPE/iX</li>
  <li>Rhapsody</li>
  <li>UTS</li>
  <li>VM/ESA</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Other_Future_Deprecations"><a class="permalink" href="#Other_Future_Deprecations">Other
  Future Deprecations</a></h2>
<ul class="Bl-bullet">
  <li>Swapping of $&lt; and $&gt;
    <p class="Pp">For more information about this future deprecation, see the
        relevant RT ticket
        &lt;https://rt.perl.org/rt3/Ticket/Display.html?id=96212&gt;.</p>
  </li>
  <li>sfio, stdio
    <p class="Pp">Perl supports being built without PerlIO proper, using a stdio
        or sfio wrapper instead. A perl build like this will not support IO
        layers and thus Unicode IO, making it rather handicapped.</p>
    <p class="Pp">PerlIO supports a <span class="Li">&quot;stdio&quot;</span>
        layer if stdio use is desired, and similarly a sfio layer could be
        produced.</p>
  </li>
  <li>Unescaped literal <span class="Li">&quot;{&quot;</span> in regular
      expressions.
    <p class="Pp">Starting with v5.20, it is planned to require a literal
        <span class="Li">&quot;{&quot;</span> to be escaped, for example by
        preceding it with a backslash. In v5.18, a deprecated warning message
        will be emitted for all such uses. This affects only patterns that are
        to match a literal <span class="Li">&quot;{&quot;</span>. Other uses of
        this character, such as part of a quantifier or sequence as in those
        below, are completely unaffected:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    /foo{3,5}/
    /\p{Alphabetic}/
    /\N{DIGIT ZERO}
    </pre>
    <p class="Pp">Removing this will permit extensions to Perl's pattern syntax
        and better error checking for existing syntax. See
        &quot;Quantifiers&quot; in perlre for an example.</p>
  </li>
  <li>Revamping <span class="Li">&quot;\Q&quot;</span> semantics in
      double-quotish strings when combined with other escapes.
    <p class="Pp">There are several bugs and inconsistencies involving
        combinations of <span class="Li">&quot;\Q&quot;</span> and escapes like
        <span class="Li">&quot;\x&quot;</span>,
        <span class="Li">&quot;\L&quot;</span>, etc., within a
        <span class="Li">&quot;\Q...\E&quot;</span> pair. These need to be
        fixed, and doing so will necessarily change current behavior. The
        changes have not yet been settled.</p>
  </li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Incompatible_Changes"><a class="permalink" href="#Incompatible_Changes">Incompatible
  Changes</a></h1>
<section class="Ss">
<h2 class="Ss" id="Special_blocks_called_in_void_context"><a class="permalink" href="#Special_blocks_called_in_void_context">Special
  blocks called in void context</a></h2>
Special blocks (<span class="Li">&quot;BEGIN&quot;</span>,
  <span class="Li">&quot;CHECK&quot;</span>,
  <span class="Li">&quot;INIT&quot;</span>,
  <span class="Li">&quot;UNITCHECK&quot;</span>,
  <span class="Li">&quot;END&quot;</span>) are now called in void context. This
  avoids wasteful copying of the result of the last statement [perl #108794].
</section>
<section class="Ss">
<h2 class="Ss" id="The__overloading__pragma_and_regexp_objects"><a class="permalink" href="#The__overloading__pragma_and_regexp_objects">The
  &quot;overloading&quot; pragma and regexp objects</a></h2>
With <span class="Li">&quot;no overloading&quot;</span>, regular expression
  objects returned by <span class="Li">&quot;qr//&quot;</span> are now
  stringified as &quot;Regexp=REGEXP(0xbe600d)&quot; instead of the regular
  expression itself [perl #108780].
</section>
<section class="Ss">
<h2 class="Ss" id="Two__s-1XS_s0_typemap_Entries_removed"><a class="permalink" href="#Two__s-1XS_s0_typemap_Entries_removed">Two
  XS typemap Entries removed</a></h2>
Two presumably unused XS typemap entries have been removed from the core
  typemap: T_DATAUNIT and T_CALLBACK. If you are, against all odds, a user of
  these, please see the instructions on how to restore them in perlxstypemap.
</section>
<section class="Ss">
<h2 class="Ss" id="Unicode_6.1_has_incompatibilities_with_Unicode_6.0"><a class="permalink" href="#Unicode_6.1_has_incompatibilities_with_Unicode_6.0">Unicode
  6.1 has incompatibilities with Unicode 6.0</a></h2>
These are detailed in &quot;Supports (almost) Unicode 6.1&quot; above. You can
  compile this version of Perl to use Unicode 6.0. See &quot;Hacking Perl to
  work on earlier Unicode versions (for very serious hackers only)&quot; in
  perlunicode.
</section>
<section class="Ss">
<h2 class="Ss" id="Borland_compiler"><a class="permalink" href="#Borland_compiler">Borland
  compiler</a></h2>
All support for the Borland compiler has been dropped. The code had not worked
  for a long time anyway.
</section>
<section class="Ss">
<h2 class="Ss" id="Certain_deprecated_Unicode_properties_are_no_longer_supported_by_default"><a class="permalink" href="#Certain_deprecated_Unicode_properties_are_no_longer_supported_by_default">Certain
  deprecated Unicode properties are no longer supported by default</a></h2>
Perl should never have exposed certain Unicode properties that are used by
  Unicode internally and not meant to be publicly available. Use of these has
  generated deprecated warning messages since Perl 5.12. The removed properties
  are Other_Alphabetic, Other_Default_Ignorable_Code_Point,
  Other_Grapheme_Extend, Other_ID_Continue, Other_ID_Start, Other_Lowercase,
  Other_Math, and Other_Uppercase.
<p class="Pp">Perl may be recompiled to include any or all of them; instructions
    are given in &quot;Unicode character properties that are NOT accepted by
    Perl&quot; in perluniprops.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Dereferencing__s-1IO_s0_thingies_as_typeglobs"><a class="permalink" href="#Dereferencing__s-1IO_s0_thingies_as_typeglobs">Dereferencing
  IO thingies as typeglobs</a></h2>
The <span class="Li">&quot;*{...}&quot;</span> operator, when passed a reference
  to an IO thingy (as in <span class="Li">&quot;*{*STDIN{IO}}&quot;</span>),
  creates a new typeglob containing just that IO object. Previously, it would
  stringify as an empty string, but some operators would treat it as undefined,
  producing an &quot;uninitialized&quot; warning. Now it stringifies as
  __ANONIO__ [perl #96326].
</section>
<section class="Ss">
<h2 class="Ss" id="User-defined_case-changing_operations"><a class="permalink" href="#User-defined_case-changing_operations">User-defined
  case-changing operations</a></h2>
This feature was deprecated in Perl 5.14, and has now been removed. The CPAN
  module Unicode::Casing provides better functionality without the drawbacks
  that this feature had, as are detailed in the 5.14 documentation:
  &lt;http://perldoc.perl.org/5.14.0/perlunicode.html#User-Defined-Case-Mappings-%28for-serious-hackers-only%29&gt;
</section>
<section class="Ss">
<h2 class="Ss" id="XSUBs_are_now_'static'"><a class="permalink" href="#XSUBs_are_now_'static'">XSUBs
  are now 'static'</a></h2>
XSUB C functions are now 'static', that is, they are not visible from outside
  the compilation unit. Users can use the new
  <span class="Li">&quot;XS_EXTERNAL(name)&quot;</span> and
  <span class="Li">&quot;XS_INTERNAL(name)&quot;</span> macros to pick the
  desired linking behavior. The ordinary
  <span class="Li">&quot;XS(name)&quot;</span> declaration for XSUBs will
  continue to declare non-'static' XSUBs for compatibility, but the XS compiler,
  ExtUtils::ParseXS (<span class="Li">&quot;xsubpp&quot;</span>) will emit
  'static' XSUBs by default. ExtUtils::ParseXS's behavior can be reconfigured
  from XS using the <span class="Li">&quot;EXPORT_XSUB_SYMBOLS&quot;</span>
  keyword. See perlxs for details.
</section>
<section class="Ss">
<h2 class="Ss" id="Weakening_read-only_references"><a class="permalink" href="#Weakening_read-only_references">Weakening
  read-only references</a></h2>
Weakening read-only references is no longer permitted. It should never have
  worked anyway, and could sometimes result in crashes.
</section>
<section class="Ss">
<h2 class="Ss" id="Tying_scalars_that_hold_typeglobs"><a class="permalink" href="#Tying_scalars_that_hold_typeglobs">Tying
  scalars that hold typeglobs</a></h2>
Attempting to tie a scalar after a typeglob was assigned to it would instead tie
  the handle in the typeglob's IO slot. This meant that it was impossible to tie
  the scalar itself. Similar problems affected
  <span class="Li">&quot;tied&quot;</span> and
  <span class="Li">&quot;untie&quot;</span>: <span class="Li">&quot;tied
  $scalar&quot;</span> would return false on a tied scalar if the last thing
  returned was a typeglob, and <span class="Li">&quot;untie $scalar&quot;</span>
  on such a tied scalar would do nothing.
<p class="Pp">We fixed this problem before Perl 5.14.0, but it caused problems
    with some CPAN modules, so we put in a deprecation cycle instead.</p>
<p class="Pp">Now the deprecation has been removed and this bug has been fixed.
    So <span class="Li">&quot;tie $scalar&quot;</span> will always tie the
    scalar, not the handle it holds. To tie the handle, use
    <span class="Li">&quot;tie *$scalar&quot;</span> (with an explicit
    asterisk). The same applies to <span class="Li">&quot;tied
    *$scalar&quot;</span> and <span class="Li">&quot;untie
    *$scalar&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="IPC::Open3_no_longer_provides__xfork()_,__xclose_on_exec()__and__xpipe_anon()_"><a class="permalink" href="#IPC::Open3_no_longer_provides__xfork()_,__xclose_on_exec()__and__xpipe_anon()_">IPC::Open3
  no longer provides &quot;xfork()&quot;, &quot;xclose_on_exec()&quot; and
  &quot;xpipe_anon()&quot;</a></h2>
All three functions were private, undocumented, and unexported. They do not
  appear to be used by any code on CPAN. Two have been inlined and one deleted
  entirely.
</section>
<section class="Ss">
<h2 class="Ss" id="$$_no_longer_caches__s-1PID_s0"><a class="permalink" href="#$$_no_longer_caches__s-1PID_s0">$$
  no longer caches PID</a></h2>
Previously, if one called <b>fork</b>(3) from C, Perl's notion of
  <span class="Li">$$</span> could go out of sync with what <b>getpid()</b>
  returns. By always fetching the value of <span class="Li">$$</span> via
  <b>getpid()</b>, this potential bug is eliminated. Code that depends on the
  caching behavior will break. As described in Core Enhancements,
  <span class="Li">$$</span> is now writable, but it will be reset during a
  fork.
</section>
<section class="Ss">
<h2 class="Ss" id="$$_and__getppid()__no_longer_emulate__s-1POSIX_s0_semantics_under_LinuxThreads"><a class="permalink" href="#$$_and__getppid()__no_longer_emulate__s-1POSIX_s0_semantics_under_LinuxThreads">$$
  and &quot;getppid()&quot; no longer emulate POSIX semantics under
  LinuxThreads</a></h2>
The POSIX emulation of <span class="Li">$$</span> and
  <span class="Li">&quot;getppid()&quot;</span> under the obsolete LinuxThreads
  implementation has been removed. This only impacts users of Linux 2.4 and
  users of Debian GNU/kFreeBSD up to and including 6.0, not the vast majority of
  Linux installations that use NPTL threads.
<p class="Pp">This means that <span class="Li">&quot;getppid()&quot;</span>,
    like <span class="Li">$$</span>, is now always guaranteed to return the OS's
    idea of the current state of the process, not perl's cached version of
  it.</p>
<p class="Pp">See the documentation for $$ for details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$_,_$_,_$(_and_$)_are_no_longer_cached"><a class="permalink" href="#$_,_$_,_$(_and_$)_are_no_longer_cached">$&lt;,
  $&gt;, $( and $) are no longer cached</a></h2>
Similarly to the changes to <span class="Li">$$</span> and
  <span class="Li">&quot;getppid()&quot;</span>, the internal caching of
  <span class="Li">$&lt;</span>, <span class="Li">$&gt;</span>,
  <span class="Li">$(</span> and <span class="Li">$)</span> has been removed.
<p class="Pp">When we cached these values our idea of what they were would drift
    out of sync with reality if someone (e.g., someone embedding perl) called
    <span class="Li">&quot;sete?[ug]id()&quot;</span> without updating
    <span class="Li">&quot;PL_e?[ug]id&quot;</span>. Having to deal with this
    complexity wasn't worth it given how cheap the
    <span class="Li">&quot;gete?[ug]id()&quot;</span> system call is.</p>
<p class="Pp">This change will break a handful of CPAN modules that use the
    XS-level <span class="Li">&quot;PL_uid&quot;</span>,
    <span class="Li">&quot;PL_gid&quot;</span>,
    <span class="Li">&quot;PL_euid&quot;</span> or
    <span class="Li">&quot;PL_egid&quot;</span> variables.</p>
<p class="Pp">The fix for those breakages is to use
    <span class="Li">&quot;PerlProc_gete?[ug]id()&quot;</span> to retrieve them
    (e.g., <span class="Li">&quot;PerlProc_getuid()&quot;</span>), and not to
    assign to <span class="Li">&quot;PL_e?[ug]id&quot;</span> if you change the
    UID/GID/EUID/EGID. There is no longer any need to do so since perl will
    always retrieve the up-to-date version of those values from the OS.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Which_Non-ASCII_characters_get_quoted_by__quotemeta__and___eQ__has_changed"><a class="permalink" href="#Which_Non-ASCII_characters_get_quoted_by__quotemeta__and___eQ__has_changed">Which
  Non-ASCII characters get quoted by &quot;quotemeta&quot; and &quot;\Q&quot;
  has changed</a></h2>
This is unlikely to result in a real problem, as Perl does not attach special
  meaning to any non-ASCII character, so it is currently irrelevant which are
  quoted or not. This change fixes bug [perl #77654] and brings Perl's behavior
  more into line with Unicode's recommendations. See &quot;quotemeta&quot; in
  perlfunc.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Performance_Enhancements"><a class="permalink" href="#Performance_Enhancements">Performance
  Enhancements</a></h1>
<ul class="Bl-bullet">
  <li>Improved performance for Unicode properties in regular expressions
    <p class="Pp">Matching a code point against a Unicode property is now done
        via a binary search instead of linear. This means for example that the
        worst case for a 1000 item property is 10 probes instead of 1000. This
        inefficiency has been compensated for in the past by permanently storing
        in a hash the results of a given probe plus the results for the adjacent
        64 code points, under the theory that near-by code points are likely to
        be searched for. A separate hash was used for each mention of a Unicode
        property in each regular expression. Thus,
        <span class="Li">&quot;qr/\p{foo}abc\p{foo}/&quot;</span> would generate
        two hashes. Any probes in one instance would be unknown to the other,
        and the hashes could expand separately to be quite large if the regular
        expression were used on many different widely-separated code points.
        Now, however, there is just one hash shared by all instances of a given
        property. This means that if <span class="Li">&quot;\p{foo}&quot;</span>
        is matched against &quot;A&quot; in one regular expression in a thread,
        the result will be known immediately to all regular expressions, and the
        relentless march of using up memory is slowed considerably.</p>
  </li>
  <li>Version declarations with the <span class="Li">&quot;use&quot;</span>
      keyword (e.g., <span class="Li">&quot;use 5.012&quot;</span>) are now
      faster, as they enable features without loading <i>feature.pm</i>.</li>
  <li><span class="Li">&quot;local $_&quot;</span> is faster now, as it no
      longer iterates through magic that it is not going to copy anyway.</li>
  <li>Perl 5.12.0 sped up the destruction of objects whose classes define empty
      <span class="Li">&quot;DESTROY&quot;</span> methods (to prevent
      autoloading), by simply not calling such empty methods. This release takes
      this optimization a step further, by not calling any
      <span class="Li">&quot;DESTROY&quot;</span> method that begins with a
      <span class="Li">&quot;return&quot;</span> statement. This can be useful
      for destructors that are only used for debugging:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    use constant DEBUG =&gt; 1;
    sub DESTROY { return unless DEBUG; ... }
    </pre>
    <p class="Pp">Constant-folding will reduce the first statement to
        <span class="Li">&quot;return;&quot;</span> if DEBUG is set to 0,
        triggering this optimization.</p>
  </li>
  <li>Assigning to a variable that holds a typeglob or copy-on-write scalar is
      now much faster. Previously the typeglob would be stringified or the
      copy-on-write scalar would be copied before being clobbered.</li>
  <li>Assignment to <span class="Li">&quot;substr&quot;</span> in void context
      is now more than twice its previous speed. Instead of creating and
      returning a special lvalue scalar that is then assigned to,
      <span class="Li">&quot;substr&quot;</span> modifies the original string
      itself.</li>
  <li><span class="Li">&quot;substr&quot;</span> no longer calculates a value to
      return when called in void context.</li>
  <li>Due to changes in File::Glob, Perl's
      <span class="Li">&quot;glob&quot;</span> function and its
      <span class="Li">&quot;&lt;...&gt;&quot;</span> equivalent are now much
      faster. The splitting of the pattern into words has been rewritten in C,
      resulting in speed-ups of 20% for some cases.
    <p class="Pp">This does not affect <span class="Li">&quot;glob&quot;</span>
        on VMS, as it does not use File::Glob.</p>
  </li>
  <li>The short-circuiting operators
      <span class="Li">&quot;&amp;&amp;&quot;</span>,
      <span class="Li">&quot;||&quot;</span>, and
      <span class="Li">&quot;//&quot;</span>, when chained (such as
      <span class="Li">&quot;$a || $b || $c&quot;</span>), are now considerably
      faster to short-circuit, due to reduced optree traversal.</li>
  <li>The implementation of <span class="Li">&quot;s///r&quot;</span> makes one
      fewer copy of the scalar's value.</li>
  <li>Recursive calls to lvalue subroutines in lvalue scalar context use less
      memory.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Modules_and_Pragmata"><a class="permalink" href="#Modules_and_Pragmata">Modules
  and Pragmata</a></h1>
<section class="Ss">
<h2 class="Ss" id="Deprecated_Modules"><a class="permalink" href="#Deprecated_Modules">Deprecated
  Modules</a></h2>
<dl class="Bl-tag">
  <dt>Version::Requirements</dt>
  <dd>Version::Requirements is now DEPRECATED, use CPAN::Meta::Requirements,
      which is a drop-in replacement. It will be deleted from perl.git blead in
      v5.17.0.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="New_Modules_and_Pragmata"><a class="permalink" href="#New_Modules_and_Pragmata">New
  Modules and Pragmata</a></h2>
<ul class="Bl-bullet">
  <li>arybase -- this new module implements the <span class="Li">$[</span>
      variable.</li>
  <li>PerlIO::mmap 0.010 has been added to the Perl core.
    <p class="Pp">The <span class="Li">&quot;mmap&quot;</span> PerlIO layer is
        no longer implemented by perl itself, but has been moved out into the
        new PerlIO::mmap module.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Updated_Modules_and_Pragmata"><a class="permalink" href="#Updated_Modules_and_Pragmata">Updated
  Modules and Pragmata</a></h2>
This is only an overview of selected module updates. For a complete list of
  updates, run:
<p class="Pp"><span class="Li"></span></p>
<pre>
    $ corelist --diff 5.14.0 5.16.0
</pre>
<p class="Pp">You can substitute your favorite version in place of 5.14.0,
  too.</p>
<ul class="Bl-bullet">
  <li>Archive::Extract has been upgraded from version 0.48 to 0.58.
    <p class="Pp">Includes a fix for FreeBSD to only use
        <span class="Li">&quot;unzip&quot;</span> if it is located in
        <span class="Li">&quot;/usr/local/bin&quot;</span>, as FreeBSD 9.0 will
        ship with a limited <span class="Li">&quot;unzip&quot;</span> in
        <span class="Li">&quot;/usr/bin&quot;</span>.</p>
  </li>
  <li>Archive::Tar has been upgraded from version 1.76 to 1.82.
    <p class="Pp">Adjustments to handle files &gt;8gb (&gt;0777777777777 octal)
        and a feature to return the MD5SUM of files in the archive.</p>
  </li>
  <li>base has been upgraded from version 2.16 to 2.18.
    <p class="Pp"><span class="Li">&quot;base&quot;</span> no longer sets a
        module's <span class="Li">$VERSION</span> to &quot;-1&quot; when a
        module it loads does not define a <span class="Li">$VERSION</span>. This
        change has been made because &quot;-1&quot; is not a valid version
        number under the new &quot;lax&quot; criteria used internally by
        <span class="Li">&quot;UNIVERSAL::VERSION&quot;</span>. (See version for
        more on &quot;lax&quot; version criteria.)</p>
    <p class="Pp"><span class="Li">&quot;base&quot;</span> no longer internally
        skips loading modules it has already loaded and instead relies on
        <span class="Li">&quot;require&quot;</span> to inspect
        <span class="Li">%INC</span>. This fixes a bug when
        <span class="Li">&quot;base&quot;</span> is used with code that clear
        <span class="Li">%INC</span> to force a module to be reloaded.</p>
  </li>
  <li>Carp has been upgraded from version 1.20 to 1.26.
    <p class="Pp">It now includes last read filehandle info and puts a dot after
        the file and line number, just like errors from
        <span class="Li">&quot;die&quot;</span> [perl #106538].</p>
  </li>
  <li>charnames has been updated from version 1.18 to 1.30.
    <p class="Pp"><span class="Li">&quot;charnames&quot;</span> can now be
        invoked with a new option, <span class="Li">&quot;:loose&quot;</span>,
        which is like the existing <span class="Li">&quot;:full&quot;</span>
        option, but enables Unicode loose name matching. Details are in
        &quot;LOOSE MATCHES&quot; in charnames.</p>
  </li>
  <li>B::Deparse has been upgraded from version 1.03 to 1.14. This fixes
      numerous deparsing bugs.</li>
  <li>CGI has been upgraded from version 3.52 to 3.59.
    <p class="Pp">It uses the public and documented FCGI.pm API in CGI::Fast.
        CGI::Fast was using an FCGI API that was deprecated and removed from
        documentation more than ten years ago. Usage of this deprecated API with
        FCGI &gt;= 0.70 or FCGI &lt;= 0.73 introduces a security issue.
        &lt;https://rt.cpan.org/Public/Bug/Display.html?id=68380&gt;
        &lt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-2766&gt;</p>
    <p class="Pp">Things that may break your code:</p>
    <p class="Pp"><span class="Li">&quot;url()&quot;</span> was fixed to return
        <span class="Li">&quot;PATH_INFO&quot;</span> when it is explicitly
        requested with either the <span class="Li">&quot;path=&gt;1&quot;</span>
        or <span class="Li">&quot;path_info=&gt;1&quot;</span> flag.</p>
    <p class="Pp">If your code is running under mod_rewrite (or compatible) and
        you are calling <span class="Li">&quot;self_url()&quot;</span> or you
        are calling <span class="Li">&quot;url()&quot;</span> and passing
        <span class="Li">&quot;path_info=&gt;1&quot;</span>, these methods will
        actually be returning <span class="Li">&quot;PATH_INFO&quot;</span> now,
        as you have explicitly requested or
        <span class="Li">&quot;self_url()&quot;</span> has requested on your
        behalf.</p>
    <p class="Pp">The <span class="Li">&quot;PATH_INFO&quot;</span> has been
        omitted in such URLs since the issue was introduced in the 3.12 release
        in December, 2005.</p>
    <p class="Pp">This bug is so old your application may have come to depend on
        it or workaround it. Check for application before upgrading to this
        release.</p>
    <p class="Pp">Examples of affected method calls:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $q-&gt;url(-absolute =&gt; 1, -query =&gt; 1, -path_info =&gt; 1);
  $q-&gt;url(-path=&gt;1);
  $q-&gt;url(-full=&gt;1,-path=&gt;1);
  $q-&gt;url(-rewrite=&gt;1,-path=&gt;1);
  $q-&gt;self_url();
    </pre>
    <p class="Pp">We no longer read from STDIN when the Content-Length is not
        set, preventing requests with no Content-Length from sometimes freezing.
        This is consistent with the CGI RFC 3875, and is also consistent with
        CGI::Simple. However, the old behavior may have been expected by some
        command-line uses of CGI.pm.</p>
    <p class="Pp">In addition, the DELETE HTTP verb is now supported.</p>
  </li>
  <li>Compress::Zlib has been upgraded from version 2.035 to 2.048.
    <p class="Pp">IO::Compress::Zip and IO::Uncompress::Unzip now have support
        for LZMA (method 14). There is a fix for a CRC issue in
        IO::Compress::Unzip and it supports Streamed Stored context now. And
        fixed a Zip64 issue in IO::Compress::Zip when the content size was
        exactly 0xFFFFFFFF.</p>
  </li>
  <li>Digest::SHA has been upgraded from version 5.61 to 5.71.
    <p class="Pp">Added BITS mode to the addfile method and shasum. This makes
        partial-byte inputs possible via files/STDIN and lets shasum check all
        8074 NIST Msg vectors, where previously special programming was required
        to do this.</p>
  </li>
  <li>Encode has been upgraded from version 2.42 to 2.44.
    <p class="Pp">Missing aliases added, a deep recursion error fixed and
        various documentation updates.</p>
    <p class="Pp">Addressed 'decode_xs n-byte heap-overflow' security bug in
        Unicode.xs (CVE-2011-2939). (5.14.2)</p>
  </li>
  <li>ExtUtils::CBuilder updated from version 0.280203 to 0.280206.
    <p class="Pp">The new version appends CFLAGS and LDFLAGS to their Config.pm
        counterparts.</p>
  </li>
  <li>ExtUtils::ParseXS has been upgraded from version 2.2210 to 3.16.
    <p class="Pp">Much of ExtUtils::ParseXS, the module behind the XS compiler
        <span class="Li">&quot;xsubpp&quot;</span>, was rewritten and cleaned
        up. It has been made somewhat more extensible and now finally uses
        strictures.</p>
    <p class="Pp">The typemap logic has been moved into a separate module,
        ExtUtils::Typemaps. See &quot;New Modules and Pragmata&quot;, above.</p>
    <p class="Pp">For a complete set of changes, please see the
        ExtUtils::ParseXS changelog, available on the CPAN.</p>
  </li>
  <li>File::Glob has been upgraded from version 1.12 to 1.17.
    <p class="Pp">On Windows, tilde (~) expansion now checks the
        <span class="Li">&quot;USERPROFILE&quot;</span> environment variable,
        after checking <span class="Li">&quot;HOME&quot;</span>.</p>
    <p class="Pp">It has a new <span class="Li">&quot;:bsd_glob&quot;</span>
        export tag, intended to replace
        <span class="Li">&quot;:glob&quot;</span>. Like
        <span class="Li">&quot;:glob&quot;</span> it overrides
        <span class="Li">&quot;glob&quot;</span> with a function that does not
        split the glob pattern into words, but, unlike
        <span class="Li">&quot;:glob&quot;</span>, it iterates properly in
        scalar context, instead of returning the last file.</p>
    <p class="Pp">There are other changes affecting Perl's own
        <span class="Li">&quot;glob&quot;</span> operator (which uses File::Glob
        internally, except on VMS). See &quot;Performance Enhancements&quot; and
        &quot;Selected Bug Fixes&quot;.</p>
  </li>
  <li>FindBin updated from version 1.50 to 1.51.
    <p class="Pp">It no longer returns a wrong result if a script of the same
        name as the current one exists in the path and is executable.</p>
  </li>
  <li>HTTP::Tiny has been upgraded from version 0.012 to 0.017.
    <p class="Pp">Added support for using
        <span class="Li">$ENV{http_proxy}</span> to set the default proxy
      host.</p>
    <p class="Pp">Adds additional shorthand methods for all common HTTP verbs, a
        <span class="Li">&quot;post_form()&quot;</span> method for POST-ing
        x-www-form-urlencoded data and a
        <span class="Li">&quot;www_form_urlencode()&quot;</span> utility
      method.</p>
  </li>
  <li>IO has been upgraded from version 1.25_04 to 1.25_06, and IO::Handle from
      version 1.31 to 1.33.
    <p class="Pp">Together, these upgrades fix a problem with IO::Handle's
        <span class="Li">&quot;getline&quot;</span> and
        <span class="Li">&quot;getlines&quot;</span> methods. When these methods
        are called on the special ARGV handle, the next file is automatically
        opened, as happens with the built-in
        <span class="Li">&quot;&lt;&gt;&quot;</span> and
        <span class="Li">&quot;readline&quot;</span> functions. But, unlike the
        built-ins, these methods were not respecting the caller's use of the
        open pragma and applying the appropriate I/O layers to the newly-opened
        file [rt.cpan.org #66474].</p>
  </li>
  <li>IPC::Cmd has been upgraded from version 0.70 to 0.76.
    <p class="Pp">Capturing of command output (both
        <span class="Li">&quot;STDOUT&quot;</span> and
        <span class="Li">&quot;STDERR&quot;</span>) is now supported using
        IPC::Open3 on MSWin32 without requiring IPC::Run.</p>
  </li>
  <li>IPC::Open3 has been upgraded from version 1.09 to 1.12.
    <p class="Pp">Fixes a bug which prevented use of
        <span class="Li">&quot;open3&quot;</span> on Windows when
        <span class="Li">*STDIN</span>, <span class="Li">*STDOUT</span> or
        <span class="Li">*STDERR</span> had been localized.</p>
    <p class="Pp">Fixes a bug which prevented duplicating numeric file
        descriptors on Windows.</p>
    <p class="Pp"><span class="Li">&quot;open3&quot;</span> with &quot;-&quot;
        for the program name works once more. This was broken in version 1.06
        (and hence in Perl 5.14.0) [perl #95748].</p>
  </li>
  <li>Locale::Codes has been upgraded from version 3.16 to 3.21.
    <p class="Pp">Added Language Extension codes (langext) and Language
        Variation codes (langvar) as defined in the IANA language registry.</p>
    <p class="Pp">Added language codes from ISO 639-5</p>
    <p class="Pp">Added language/script codes from the IANA language subtag
        registry</p>
    <p class="Pp">Fixed an uninitialized value warning [rt.cpan.org #67438].</p>
    <p class="Pp">Fixed the return value for the all_XXX_codes and all_XXX_names
        functions [rt.cpan.org #69100].</p>
    <p class="Pp">Reorganized modules to move Locale::MODULE to
        Locale::Codes::MODULE to allow for cleaner future additions. The
        original four modules (Locale::Language, Locale::Currency,
        Locale::Country, Locale::Script) will continue to work, but all new sets
        of codes will be added in the Locale::Codes namespace.</p>
    <p class="Pp">The code2XXX, XXX2code, all_XXX_codes, and all_XXX_names
        functions now support retired codes. All codesets may be specified by a
        constant or by their name now. Previously, they were specified only by a
        constant.</p>
    <p class="Pp">The alias_code function exists for backward compatibility. It
        has been replaced by rename_country_code. The alias_code function will
        be removed some time after September, 2013.</p>
    <p class="Pp">All work is now done in the central module (Locale::Codes).
        Previously, some was still done in the wrapper modules
        (Locale::Codes::*). Added Language Family codes (langfam) as defined in
        ISO 639-5.</p>
  </li>
  <li>Math::BigFloat has been upgraded from version 1.993 to 1.997.
    <p class="Pp">The <span class="Li">&quot;numify&quot;</span> method has been
        corrected to return a normalized Perl number (the result of
        <span class="Li">&quot;0 + $thing&quot;</span>), instead of a string
        [rt.cpan.org #66732].</p>
  </li>
  <li>Math::BigInt has been upgraded from version 1.994 to 1.998.
    <p class="Pp">It provides a new <span class="Li">&quot;bsgn&quot;</span>
        method that complements the <span class="Li">&quot;babs&quot;</span>
        method.</p>
    <p class="Pp">It fixes the internal
        <span class="Li">&quot;objectify&quot;</span> function's handling of
        &quot;foreign objects&quot; so they are converted to the appropriate
        class (Math::BigInt or Math::BigFloat).</p>
  </li>
  <li>Math::BigRat has been upgraded from version 0.2602 to 0.2603.
    <p class="Pp"><span class="Li">&quot;int()&quot;</span> on a Math::BigRat
        object containing -1/2 now creates a Math::BigInt containing 0, rather
        than -0. Math::BigInt does not even support negative zero, so the
        resulting object was actually malformed [perl #95530].</p>
  </li>
  <li>Math::Complex has been upgraded from version 1.56 to 1.59 and Math::Trig
      from version 1.2 to 1.22.
    <p class="Pp">Fixes include: correct copy constructor usage; fix polarwise
        formatting with numeric format specifier; and more stable
        <span class="Li">&quot;great_circle_direction&quot;</span>
      algorithm.</p>
  </li>
  <li>Module::CoreList has been upgraded from version 2.51 to 2.66.
    <p class="Pp">The <span class="Li">&quot;corelist&quot;</span> utility now
        understands the <span class="Li">&quot;-r&quot;</span> option for
        displaying Perl release dates and the
        <span class="Li">&quot;--diff&quot;</span> option to print the set of
        modlib changes between two perl distributions.</p>
  </li>
  <li>Module::Metadata has been upgraded from version 1.000004 to 1.000009.
    <p class="Pp">Adds <span class="Li">&quot;provides&quot;</span> method to
        generate a CPAN META provides data structure correctly; use of
        <span class="Li">&quot;package_versions_from_directory&quot;</span> is
        discouraged.</p>
  </li>
  <li>ODBM_File has been upgraded from version 1.10 to 1.12.
    <p class="Pp">The XS code is now compiled with
        <span class="Li">&quot;PERL_NO_GET_CONTEXT&quot;</span>, which will aid
        performance under ithreads.</p>
  </li>
  <li>open has been upgraded from version 1.08 to 1.10.
    <p class="Pp">It no longer turns off layers on standard handles when invoked
        without the &quot;:std&quot; directive. Similarly, when invoked
        <i>with</i> the &quot;:std&quot; directive, it now clears layers on
        STDERR before applying the new ones, and not just on STDIN and STDOUT
        [perl #92728].</p>
  </li>
  <li>overload has been upgraded from version 1.13 to 1.18.
    <p class="Pp"><span class="Li">&quot;overload::Overloaded&quot;</span> no
        longer calls <span class="Li">&quot;can&quot;</span> on the class, but
        uses another means to determine whether the object has overloading. It
        was never correct for it to call
        <span class="Li">&quot;can&quot;</span>, as overloading does not respect
        AUTOLOAD. So classes that autoload methods and implement
        <span class="Li">&quot;can&quot;</span> no longer have to account for
        overloading [perl #40333].</p>
    <p class="Pp">A warning is now produced for invalid arguments. See &quot;New
        Diagnostics&quot;.</p>
  </li>
  <li>PerlIO::scalar has been upgraded from version 0.11 to 0.14.
    <p class="Pp">(This is the module that implements
        <span class="Li">&quot;open $fh, '&gt;', \$scalar&quot;</span>.)</p>
    <p class="Pp">It fixes a problem with <span class="Li">&quot;open my $fh,
        &quot;&gt;&quot;, \$scalar&quot;</span> not working if
        <span class="Li">$scalar</span> is a copy-on-write scalar. (5.14.2)</p>
    <p class="Pp">It also fixes a hang that occurs with
        <span class="Li">&quot;readline&quot;</span> or
        <span class="Li">&quot;&lt;$fh&gt;&quot;</span> if a typeglob has been
        assigned to <span class="Li">$scalar</span> [perl #92258].</p>
    <p class="Pp">It no longer assumes during
        <span class="Li">&quot;seek&quot;</span> that
        <span class="Li">$scalar</span> is a string internally. If it didn't
        crash, it was close to doing so [perl #92706]. Also, the internal print
        routine no longer assumes that the position set by
        <span class="Li">&quot;seek&quot;</span> is valid, but extends the
        string to that position, filling the intervening bytes (between the old
        length and the seek position) with nulls [perl #78980].</p>
    <p class="Pp">Printing to an in-memory handle now works if the
        <span class="Li">$scalar</span> holds a reference, stringifying the
        reference before modifying it. References used to be treated as empty
        strings.</p>
    <p class="Pp">Printing to an in-memory handle no longer crashes if the
        <span class="Li">$scalar</span> happens to hold a number internally, but
        no string buffer.</p>
    <p class="Pp">Printing to an in-memory handle no longer creates scalars that
        confuse the regular expression engine [perl #108398].</p>
  </li>
  <li>Pod::Functions has been upgraded from version 1.04 to 1.05.
    <p class="Pp"><i>Functions.pm</i> is now generated at perl build time from
        annotations in <i>perlfunc.pod</i>. This will ensure that Pod::Functions
        and perlfunc remain in synchronisation.</p>
  </li>
  <li>Pod::Html has been upgraded from version 1.11 to 1.1502.
    <p class="Pp">This is an extensive rewrite of Pod::Html to use Pod::Simple
        under the hood. The output has changed significantly.</p>
  </li>
  <li>Pod::Perldoc has been upgraded from version 3.15_03 to 3.17.
    <p class="Pp">It corrects the search paths on VMS [perl #90640].
      (5.14.1)</p>
    <p class="Pp">The <b>-v</b> option now fetches the right section for
        <span class="Li">$0</span>.</p>
    <p class="Pp">This upgrade has numerous significant fixes. Consult its
        changelog on the CPAN for more information.</p>
  </li>
  <li>POSIX has been upgraded from version 1.24 to 1.30.
    <p class="Pp">POSIX no longer uses AutoLoader. Any code which was relying on
        this implementation detail was buggy, and may fail because of this
        change. The module's Perl code has been considerably simplified, roughly
        halving the number of lines, with no change in functionality. The XS
        code has been refactored to reduce the size of the shared object by
        about 12%, with no change in functionality. More POSIX functions now
        have tests.</p>
    <p class="Pp"><span class="Li">&quot;sigsuspend&quot;</span> and
        <span class="Li">&quot;pause&quot;</span> now run signal handlers before
        returning, as the whole point of these two functions is to wait until a
        signal has arrived, and then return <i>after</i> it has been triggered.
        Delayed, or &quot;safe&quot;, signals were preventing that from
        happening, possibly resulting in race conditions [perl #107216].</p>
    <p class="Pp"><span class="Li">&quot;POSIX::sleep&quot;</span> is now a
        direct call into the underlying OS
        <span class="Li">&quot;sleep&quot;</span> function, instead of being a
        Perl wrapper on <span class="Li">&quot;CORE::sleep&quot;</span>.
        <span class="Li">&quot;POSIX::dup2&quot;</span> now returns the correct
        value on Win32 (<i>i.e.</i>, the file descriptor).
        <span class="Li">&quot;POSIX::SigSet&quot;</span>
        <span class="Li">&quot;sigsuspend&quot;</span> and
        <span class="Li">&quot;sigpending&quot;</span> and
        <span class="Li">&quot;POSIX::pause&quot;</span> now dispatch safe
        signals immediately before returning to their caller.</p>
    <p class="Pp"><span class="Li">&quot;POSIX::Termios::setattr&quot;</span>
        now defaults the third argument to
        <span class="Li">&quot;TCSANOW&quot;</span>, instead of 0. On most
        platforms <span class="Li">&quot;TCSANOW&quot;</span> is defined to be
        0, but on some 0 is not a valid parameter, which caused a call with
        defaults to fail.</p>
  </li>
  <li>Socket has been upgraded from version 1.94 to 2.001.
    <p class="Pp">It has new functions and constants for handling IPv6
      sockets:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    pack_ipv6_mreq
    unpack_ipv6_mreq
    IPV6_ADD_MEMBERSHIP
    IPV6_DROP_MEMBERSHIP
    IPV6_MTU
    IPV6_MTU_DISCOVER
    IPV6_MULTICAST_HOPS
    IPV6_MULTICAST_IF
    IPV6_MULTICAST_LOOP
    IPV6_UNICAST_HOPS
    IPV6_V6ONLY
    </pre>
  </li>
  <li>Storable has been upgraded from version 2.27 to 2.34.
    <p class="Pp">It no longer turns copy-on-write scalars into read-only
        scalars when freezing and thawing.</p>
  </li>
  <li>Sys::Syslog has been upgraded from version 0.27 to 0.29.
    <p class="Pp">This upgrade closes many outstanding bugs.</p>
  </li>
  <li>Term::ANSIColor has been upgraded from version 3.00 to 3.01.
    <p class="Pp">Only interpret an initial array reference as a list of colors,
        not any initial reference, allowing the colored function to work
        properly on objects with stringification defined.</p>
  </li>
  <li>Term::ReadLine has been upgraded from version 1.07 to 1.09.
    <p class="Pp">Term::ReadLine now supports any event loop, including
        unpublished ones and simple IO::Select, loops without the need to
        rewrite existing code for any particular framework [perl #108470].</p>
  </li>
  <li>threads::shared has been upgraded from version 1.37 to 1.40.
    <p class="Pp">Destructors on shared objects used to be ignored sometimes if
        the objects were referenced only by shared data structures. This has
        been mostly fixed, but destructors may still be ignored if the objects
        still exist at global destruction time [perl #98204].</p>
  </li>
  <li>Unicode::Collate has been upgraded from version 0.73 to 0.89.
    <p class="Pp">Updated to CLDR 1.9.1</p>
    <p class="Pp">Locales updated to CLDR 2.0: mk, mt, nb, nn, ro, ru, sk, sr,
        sv, uk, zh__pinyin, zh__stroke</p>
    <p class="Pp">Newly supported locales: bn, fa, ml, mr, or, pa, sa, si,
        si__dictionary, sr_Latn, sv__reformed, ta, te, th, ur, wae.</p>
    <p class="Pp">Tailored compatibility ideographs as well as unified
        ideographs for the locales: ja, ko, zh__big5han, zh__gb2312han,
        zh__pinyin, zh__stroke.</p>
    <p class="Pp">Locale/*.pl files are now searched for in
        <span class="Li">@INC</span>.</p>
  </li>
  <li>Unicode::Normalize has been upgraded from version 1.10 to 1.14.
    <p class="Pp">Fixes for the removal of
        <i>unicore/CompositionExclusions.txt</i> from core.</p>
  </li>
  <li>Unicode::UCD has been upgraded from version 0.32 to 0.43.
    <p class="Pp">This adds four new functions:
        <span class="Li">&quot;prop_aliases()&quot;</span> and
        <span class="Li">&quot;prop_value_aliases()&quot;</span>, which are used
        to find all Unicode-approved synonyms for property names, or to convert
        from one name to another;
        <span class="Li">&quot;prop_invlist&quot;</span> which returns all code
        points matching a given Unicode binary property; and
        <span class="Li">&quot;prop_invmap&quot;</span> which returns the
        complete specification of a given Unicode property.</p>
  </li>
  <li>Win32API::File has been upgraded from version 0.1101 to 0.1200.
    <p class="Pp">Added SetStdHandle and GetStdHandle functions</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Removed_Modules_and_Pragmata"><a class="permalink" href="#Removed_Modules_and_Pragmata">Removed
  Modules and Pragmata</a></h2>
As promised in Perl 5.14.0's release notes, the following modules have been
  removed from the core distribution, and if needed should be installed from
  CPAN instead.
<ul class="Bl-bullet">
  <li>Devel::DProf has been removed from the Perl core. Prior version was
      20110228.00.</li>
  <li>Shell has been removed from the Perl core. Prior version was 0.72_01.</li>
  <li>Several old perl4-style libraries which have been deprecated with 5.14 are
      now removed:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    abbrev.pl assert.pl bigfloat.pl bigint.pl bigrat.pl cacheout.pl
    complete.pl ctime.pl dotsh.pl exceptions.pl fastcwd.pl flush.pl
    getcwd.pl getopt.pl getopts.pl hostname.pl importenv.pl
    lib/find{,depth}.pl look.pl newgetopt.pl open2.pl open3.pl
    pwd.pl shellwords.pl stat.pl tainted.pl termcap.pl timelocal.pl
    </pre>
    <p class="Pp">They can be found on CPAN as Perl4::CoreLibs.</p>
  </li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Documentation"><a class="permalink" href="#Documentation">Documentation</a></h1>
<section class="Ss">
<h2 class="Ss" id="New_Documentation"><a class="permalink" href="#New_Documentation">New
  Documentation</a></h2>
<i>perldtrace</i>
<p class="Pp">perldtrace describes Perl's DTrace support, listing the provided
    probes and gives examples of their use.</p>
<p class="Pp"><i>perlexperiment</i></p>
<p class="Pp">This document is intended to provide a list of experimental
    features in Perl. It is still a work in progress.</p>
<p class="Pp"><i>perlootut</i></p>
<p class="Pp">This a new OO tutorial. It focuses on basic OO concepts, and then
    recommends that readers choose an OO framework from CPAN.</p>
<p class="Pp"><i>perlxstypemap</i></p>
<p class="Pp">The new manual describes the XS typemapping mechanism in
    unprecedented detail and combines new documentation with information
    extracted from perlxs and the previously unofficial list of all core
    typemaps.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Existing_Documentation"><a class="permalink" href="#Changes_to_Existing_Documentation">Changes
  to Existing Documentation</a></h2>
<i>perlapi</i>
<ul class="Bl-bullet">
  <li>The HV API has long accepted negative lengths to show that the key is in
      UTF8. This is now documented.</li>
  <li>The <span class="Li">&quot;boolSV()&quot;</span> macro is now
    documented.</li>
</ul>
<p class="Pp"><i>perlfunc</i></p>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;dbmopen&quot;</span> treats a 0 mode as a special
      case, that prevents a nonexistent file from being created. This has been
      the case since Perl 5.000, but was never documented anywhere. Now the
      perlfunc entry mentions it [perl #90064].</li>
  <li>As an accident of history, <span class="Li">&quot;open $fh, '&lt;:',
      ...&quot;</span> applies the default layers for the platform
      (<span class="Li">&quot;:raw&quot;</span> on Unix,
      <span class="Li">&quot;:crlf&quot;</span> on Windows), ignoring whatever
      is declared by open.pm. This seems such a useful feature it has been
      documented in perlfunc and open.</li>
  <li>The entry for <span class="Li">&quot;split&quot;</span> has been
      rewritten. It is now far clearer than before.</li>
</ul>
<p class="Pp"><i>perlguts</i></p>
<ul class="Bl-bullet">
  <li>A new section, Autoloading with XSUBs, has been added, which explains the
      two APIs for accessing the name of the autoloaded sub.</li>
  <li>Some function descriptions in perlguts were confusing, as it was not clear
      whether they referred to the function above or below the description. This
      has been clarified [perl #91790].</li>
</ul>
<p class="Pp"><i>perlobj</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>This document has been rewritten from scratch, and its coverage of various
      OO concepts has been expanded.</dd>
</dl>
<p class="Pp"><i>perlop</i></p>
<ul class="Bl-bullet">
  <li>Documentation of the smartmatch operator has been reworked and moved from
      perlsyn to perlop where it belongs.
    <p class="Pp">It has also been corrected for the case of
        <span class="Li">&quot;undef&quot;</span> on the left-hand side. The
        list of different smart match behaviors had an item in the wrong
      place.</p>
  </li>
  <li>Documentation of the ellipsis statement
      (<span class="Li">&quot;...&quot;</span>) has been reworked and moved from
      perlop to perlsyn.</li>
  <li>The explanation of bitwise operators has been expanded to explain how they
      work on Unicode strings (5.14.1).</li>
  <li>More examples for <span class="Li">&quot;m//g&quot;</span> have been added
      (5.14.1).</li>
  <li>The <span class="Li">&quot;&lt;&lt;\FOO&quot;</span> here-doc syntax has
      been documented (5.14.1).</li>
</ul>
<p class="Pp"><i>perlpragma</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>There is now a standard convention for naming keys in the
      <span class="Li">&quot;%^H&quot;</span>, documented under Key naming.</dd>
</dl>
<p class="Pp"><i>&quot;Laundering and Detecting Tainted Data&quot; in
    perlsec</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The example function for checking for taintedness contained a subtle
      error. <span class="Li">$@</span> needs to be localized to prevent its
      changing this global's value outside the function. The preferred method to
      check for this remains &quot;tainted&quot; in Scalar::Util.</dd>
</dl>
<p class="Pp"><i>perllol</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>perllol has been expanded with examples using the new
      <span class="Li">&quot;push $scalar&quot;</span> syntax introduced in Perl
      5.14.0 (5.14.1).</dd>
</dl>
<p class="Pp"><i>perlmod</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>perlmod now states explicitly that some types of explicit symbol table
      manipulation are not supported. This codifies what was effectively already
      the case [perl #78074].</dd>
</dl>
<p class="Pp"><i>perlpodstyle</i></p>
<ul class="Bl-bullet">
  <li>The tips on which formatting codes to use have been corrected and greatly
      expanded.</li>
  <li>There are now a couple of example one-liners for previewing POD files
      after they have been edited.</li>
</ul>
<p class="Pp"><i>perlre</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The <span class="Li">&quot;(*COMMIT)&quot;</span> directive is now listed
      in the right section (Verbs without an argument).</dd>
</dl>
<p class="Pp"><i>perlrun</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>perlrun has undergone a significant clean-up. Most notably, the
      <b>-0x...</b> form of the <b>-0</b> flag has been clarified, and the final
      section on environment variables has been corrected and expanded
    (5.14.1).</dd>
</dl>
<p class="Pp"><i>perlsub</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The ($;) prototype syntax, which has existed for rather a long time, is
      now documented in perlsub. It lets a unary function have the same
      precedence as a list operator.</dd>
</dl>
<p class="Pp"><i>perltie</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The required syntax for tying handles has been documented.</dd>
</dl>
<p class="Pp"><i>perlvar</i></p>
<ul class="Bl-bullet">
  <li>The documentation for $! has been corrected and clarified. It used to
      state that $! could be <span class="Li">&quot;undef&quot;</span>, which is
      not the case. It was also unclear whether system calls set C's
      <span class="Li">&quot;errno&quot;</span> or Perl's
      <span class="Li">$!</span> [perl #91614].</li>
  <li>Documentation for $$ has been amended with additional cautions regarding
      changing the process ID.</li>
</ul>
<p class="Pp"><i>Other Changes</i></p>
<ul class="Bl-bullet">
  <li>perlxs was extended with documentation on inline typemaps.</li>
  <li>perlref has a new Circular References section explaining how circularities
      may not be freed and how to solve that with weak references.</li>
  <li>Parts of perlapi were clarified, and Perl equivalents of some C functions
      have been added as an additional mode of exposition.</li>
  <li>A few parts of perlre and perlrecharclass were clarified.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Removed_Documentation"><a class="permalink" href="#Removed_Documentation">Removed
  Documentation</a></h2>
<i>Old OO Documentation</i>
<p class="Pp">The old OO tutorials, perltoot, perltooc, and perlboot, have been
    removed. The perlbot (bag of object tricks) document has been removed as
    well.</p>
<p class="Pp"><i>Development Deltas</i></p>
<p class="Pp">The perldelta files for development releases are no longer
    packaged with perl. These can still be found in the perl source code
    repository.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Diagnostics"><a class="permalink" href="#Diagnostics">Diagnostics</a></h1>
The following additions or changes have been made to diagnostic output,
  including warnings and fatal error messages. For the complete list of
  diagnostic messages, see perldiag.
<section class="Ss">
<h2 class="Ss" id="New_Diagnostics"><a class="permalink" href="#New_Diagnostics">New
  Diagnostics</a></h2>
<i>New Errors</i>
<ul class="Bl-bullet">
  <li>Cannot set tied <span class="Li">@DB::args</span>
    <p class="Pp">This error occurs when
        <span class="Li">&quot;caller&quot;</span> tries to set
        <span class="Li">@DB::args</span> but finds it tied. Before this error
        was added, it used to crash instead.</p>
  </li>
  <li>Cannot tie unreifiable array
    <p class="Pp">This error is part of a safety check that the
        <span class="Li">&quot;tie&quot;</span> operator does before tying a
        special array like <span class="Li">@_</span>. You should never see this
        message.</p>
  </li>
  <li>&amp;CORE::%s cannot be called directly
    <p class="Pp">This occurs when a subroutine in the
        <span class="Li">&quot;CORE::&quot;</span> namespace is called with
        <span class="Li">&amp;foo</span> syntax or through a reference. Some
        subroutines in this package cannot yet be called that way, but must be
        called as barewords. See &quot;Subroutines in the
        <span class="Li">&quot;CORE&quot;</span> namespace&quot;, above.</p>
  </li>
  <li>Source filters apply only to byte streams
    <p class="Pp">This new error occurs when you try to activate a source filter
        (usually by loading a source filter module) within a string passed to
        <span class="Li">&quot;eval&quot;</span> under the
        <span class="Li">&quot;unicode_eval&quot;</span> feature.</p>
  </li>
</ul>
<p class="Pp"><i>New Warnings</i></p>
<ul class="Bl-bullet">
  <li>defined(@array) is deprecated
    <p class="Pp">The long-deprecated
        <span class="Li">&quot;defined(@array)&quot;</span> now also warns for
        package variables. Previously it issued a warning for lexical variables
        only.</p>
  </li>
  <li><b>length()</b> used on <span class="Li">%s</span>
    <p class="Pp">This new warning occurs when
        <span class="Li">&quot;length&quot;</span> is used on an array or hash,
        instead of <span class="Li">&quot;scalar(@array)&quot;</span> or
        <span class="Li">&quot;scalar(keys %hash)&quot;</span>.</p>
  </li>
  <li>lvalue attribute <span class="Li">%s</span> already-defined subroutine
    <p class="Pp">attributes.pm now emits this warning when the :lvalue
        attribute is applied to a Perl subroutine that has already been defined,
        as doing so can have unexpected side-effects.</p>
  </li>
  <li>overload arg '%s' is invalid
    <p class="Pp">This warning, in the &quot;overload&quot; category, is
        produced when the overload pragma is given an argument it doesn't
        recognize, presumably a mistyped operator.</p>
  </li>
  <li>$[ used in <span class="Li">%s</span> (did you mean $] ?)
    <p class="Pp">This new warning exists to catch the mistaken use of
        <span class="Li">$[</span> in version checks.
        <span class="Li">$]</span>, not <span class="Li">$[</span>, contains the
        version number.</p>
  </li>
  <li>Useless assignment to a temporary
    <p class="Pp">Assigning to a temporary scalar returned from an lvalue
        subroutine now produces this warning [perl #31946].</p>
  </li>
  <li>Useless use of \E
    <p class="Pp"><span class="Li">&quot;\E&quot;</span> does nothing unless
        preceded by <span class="Li">&quot;\Q&quot;</span>,
        <span class="Li">&quot;\L&quot;</span> or
        <span class="Li">&quot;\U&quot;</span>.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Removed_Errors"><a class="permalink" href="#Removed_Errors">Removed
  Errors</a></h2>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>&quot;sort is now a reserved word&quot;
    <p class="Pp">This error used to occur when
        <span class="Li">&quot;sort&quot;</span> was called without arguments,
        followed by <span class="Li">&quot;;&quot;</span> or
        <span class="Li">&quot;)&quot;</span>. (E.g.,
        <span class="Li">&quot;sort;&quot;</span> would die, but
        <span class="Li">&quot;{sort}&quot;</span> was OK.) This error message
        was added in Perl 3 to catch code like
        <span class="Li">&quot;close(sort)&quot;</span> which would no longer
        work. More than two decades later, this message is no longer
        appropriate. Now <span class="Li">&quot;sort&quot;</span> without
        arguments is always allowed, and returns an empty list, as it did in
        those cases where it was already allowed [perl #90030].</p>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Existing_Diagnostics"><a class="permalink" href="#Changes_to_Existing_Diagnostics">Changes
  to Existing Diagnostics</a></h2>
<ul class="Bl-bullet">
  <li>The &quot;Applying pattern match...&quot; or similar warning produced when
      an array or hash is on the left-hand side of the
      <span class="Li">&quot;=~&quot;</span> operator now mentions the name of
      the variable.</li>
  <li>The &quot;Attempt to free non-existent shared string&quot; has had the
      spelling of &quot;non-existent&quot; corrected to &quot;nonexistent&quot;.
      It was already listed with the correct spelling in perldiag.</li>
  <li>The error messages for using <span class="Li">&quot;default&quot;</span>
      and <span class="Li">&quot;when&quot;</span> outside a topicalizer have
      been standardized to match the messages for
      <span class="Li">&quot;continue&quot;</span> and loop controls. They now
      read 'Can't &quot;default&quot; outside a topicalizer' and 'Can't
      &quot;when&quot; outside a topicalizer'. They both used to be 'Can't use
      <b>when()</b> outside a topicalizer' [perl #91514].</li>
  <li>The message, &quot;Code point 0x%X is not Unicode, no properties match it;
      all inverse properties do&quot; has been changed to &quot;Code point 0x%X
      is not Unicode, all \p{} matches fail; all \P{} matches
    succeed&quot;.</li>
  <li>Redefinition warnings for constant subroutines used to be mandatory, even
      occurring under <span class="Li">&quot;no warnings&quot;</span>. Now they
      respect the warnings pragma.</li>
  <li>The &quot;glob failed&quot; warning message is now suppressible via
      <span class="Li">&quot;no warnings&quot;</span> [perl #111656].</li>
  <li>The Invalid version format error message now says &quot;negative version
      number&quot; within the parentheses, rather than &quot;non-numeric
      data&quot;, for negative numbers.</li>
  <li>The two warnings Possible attempt to put comments in <b>qw()</b> list and
      Possible attempt to separate words with commas are no longer mutually
      exclusive: the same <span class="Li">&quot;qw&quot;</span> construct may
      produce both.</li>
  <li>The uninitialized warning for <span class="Li">&quot;y///r&quot;</span>
      when <span class="Li">$_</span> is implicit and undefined now mentions the
      variable name, just like the non-/r variation of the operator.</li>
  <li>The 'Use of &quot;foo&quot; without parentheses is ambiguous' warning has
      been extended to apply also to user-defined subroutines with a (;$)
      prototype, and not just to built-in functions.</li>
  <li>Warnings that mention the names of lexical
      (<span class="Li">&quot;my&quot;</span>) variables with Unicode characters
      in them now respect the presence or absence of the
      <span class="Li">&quot;:utf8&quot;</span> layer on the output handle,
      instead of outputting UTF8 regardless. Also, the correct names are
      included in the strings passed to <span class="Li">$SIG{__WARN__}</span>
      handlers, rather than the raw UTF8 bytes.</li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Utility_Changes"><a class="permalink" href="#Utility_Changes">Utility
  Changes</a></h1>
<i>h2ph</i>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>h2ph used to generate code of the form
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  unless(defined(&amp;FOO)) {
    sub FOO () {42;}
  }
    </pre>
    <p class="Pp">But the subroutine is a compile-time declaration, and is hence
        unaffected by the condition. It has now been corrected to emit a string
        <span class="Li">&quot;eval&quot;</span> around the subroutine [perl
        #99368].</p>
  </dd>
</dl>
<p class="Pp"><i>splain</i></p>
<ul class="Bl-bullet">
  <li><i>splain</i> no longer emits backtraces with the first line number
      repeated.
    <p class="Pp">This:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    Uncaught exception from user code:
            Cannot fwiddle the fwuddle at -e line 1.
     at -e line 1
            main::baz() called at -e line 1
            main::bar() called at -e line 1
            main::foo() called at -e line 1
    </pre>
    <p class="Pp">has become this:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    Uncaught exception from user code:
            Cannot fwiddle the fwuddle at -e line 1.
            main::baz() called at -e line 1
            main::bar() called at -e line 1
            main::foo() called at -e line 1
    </pre>
  </li>
  <li>Some error messages consist of multiple lines that are listed as separate
      entries in perldiag. splain has been taught to find the separate entries
      in these cases, instead of simply failing to find the message.</li>
</ul>
<p class="Pp"><i>zipdetails</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>This is a new utility, included as part of an IO::Compress::Base upgrade.
    <p class="Pp">zipdetails displays information about the internal record
        structure of the zip file. It is not concerned with displaying any
        details of the compressed data stored in the zip file.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="Configuration_and_Compilation"><a class="permalink" href="#Configuration_and_Compilation">Configuration
  and Compilation</a></h1>
<ul class="Bl-bullet">
  <li><i>regexp.h</i> has been modified for compatibility with GCC's
      <b>-Werror</b> option, as used by some projects that include perl's header
      files (5.14.1).</li>
  <li><span class="Li">&quot;USE_LOCALE{,_COLLATE,_CTYPE,_NUMERIC}&quot;</span>
      have been added the output of perl -V as they have affect the behavior of
      the interpreter binary (albeit in only a small area).</li>
  <li>The code and tests for IPC::Open2 have been moved from
      <i>ext/IPC-Open2</i> into <i>ext/IPC-Open3</i>, as
      <span class="Li">&quot;IPC::Open2::open2()&quot;</span> is implemented as
      a thin wrapper around
      <span class="Li">&quot;IPC::Open3::_open3()&quot;</span>, and hence is
      very tightly coupled to it.</li>
  <li>The magic types and magic vtables are now generated from data in a new
      script <i>regen/mg_vtable.pl</i>, instead of being maintained by hand. As
      different EBCDIC variants can't agree on the code point for '~', the
      character to code point conversion is done at build time by
      <i>generate_uudmap</i> to a new generated header <i>mg_data.h</i>.
      <span class="Li">&quot;PL_vtbl_bm&quot;</span> and
      <span class="Li">&quot;PL_vtbl_fm&quot;</span> are now defined by the
      pre-processor as <span class="Li">&quot;PL_vtbl_regexp&quot;</span>,
      instead of being distinct C variables.
      <span class="Li">&quot;PL_vtbl_sig&quot;</span> has been removed.</li>
  <li>Building with <span class="Li">&quot;-DPERL_GLOBAL_STRUCT&quot;</span>
      works again. This configuration is not generally used.</li>
  <li>Perl configured with <i>MAD</i> now correctly frees
      <span class="Li">&quot;MADPROP&quot;</span> structures when OPs are freed.
      <span class="Li">&quot;MADPROP&quot;</span>s are now allocated with
      <span class="Li">&quot;PerlMemShared_malloc()&quot;</span></li>
  <li><i>makedef.pl</i> has been refactored. This should have no noticeable
      affect on any of the platforms that use it as part of their build (AIX,
      VMS, Win32).</li>
  <li><span class="Li">&quot;useperlio&quot;</span> can no longer be
    disabled.</li>
  <li>The file <i>global.sym</i> is no longer needed, and has been removed. It
      contained a list of all exported functions, one of the files generated by
      <i>regen/embed.pl</i> from data in <i>embed.fnc</i> and
      <i>regen/opcodes</i>. The code has been refactored so that the only user
      of <i>global.sym</i>, <i>makedef.pl</i>, now reads <i>embed.fnc</i> and
      <i>regen/opcodes</i> directly, removing the need to store the list of
      exported functions in an intermediate file.
    <p class="Pp">As <i>global.sym</i> was never installed, this change should
        not be visible outside the build process.</p>
  </li>
  <li><i>pod/buildtoc</i>, used by the build process to build perltoc, has been
      refactored and simplified. It now contains only code to build perltoc; the
      code to regenerate Makefiles has been moved to
      <i>Porting/pod_rules.pl</i>. It's a bug if this change has any material
      effect on the build process.</li>
  <li><i>pod/roffitall</i> is now built by <i>pod/buildtoc</i>, instead of being
      shipped with the distribution. Its list of manpages is now generated (and
      therefore current). See also RT #103202 for an unresolved related
    issue.</li>
  <li>The man page for <span class="Li">&quot;XS::Typemap&quot;</span> is no
      longer installed. <span class="Li">&quot;XS::Typemap&quot;</span> is a
      test module which is not installed, hence installing its documentation
      makes no sense.</li>
  <li>The -Dusesitecustomize and -Duserelocatableinc options now work together
      properly.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Platform_Support"><a class="permalink" href="#Platform_Support">Platform
  Support</a></h1>
<section class="Ss">
<h2 class="Ss" id="Platform-Specific_Notes"><a class="permalink" href="#Platform-Specific_Notes">Platform-Specific
  Notes</a></h2>
<i>Cygwin</i>
<ul class="Bl-bullet">
  <li>Since version 1.7, Cygwin supports native UTF-8 paths. If Perl is built
      under that environment, directory and filenames will be UTF-8
    encoded.</li>
  <li>Cygwin does not initialize all original Win32 environment variables. See
      <i>README.cygwin</i> for a discussion of the newly-added
      <span class="Li">&quot;Cygwin::sync_winenv()&quot;</span> function [perl
      #110190] and for further links.</li>
</ul>
<p class="Pp"><i>HP-UX</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>HP-UX PA-RISC/64 now supports gcc-4.x
    <p class="Pp">A fix to correct the socketsize now makes the test suite pass
        on HP-UX PA-RISC for 64bitall builds. (5.14.2)</p>
  </dd>
</dl>
<p class="Pp"><i>VMS</i></p>
<ul class="Bl-bullet">
  <li>Remove unnecessary includes, fix miscellaneous compiler warnings and close
      some unclosed comments on <i>vms/vms.c</i>.</li>
  <li>Remove sockadapt layer from the VMS build.</li>
  <li>Explicit support for VMS versions before v7.0 and DEC C versions before
      v6.0 has been removed.</li>
  <li>Since Perl 5.10.1, the home-grown <span class="Li">&quot;stat&quot;</span>
      wrapper has been unable to distinguish between a directory name containing
      an underscore and an otherwise-identical filename containing a dot in the
      same position (e.g., t/test_pl as a directory and t/test.pl as a file).
      This problem has been corrected.</li>
  <li>The build on VMS now permits names of the resulting symbols in C code for
      Perl longer than 31 characters. Symbols like
      <span class="Li">&quot;Perl__it_was_the_best_of_times_it_was_the_worst_of_times&quot;</span>
      can now be created freely without causing the VMS linker to seize up.</li>
</ul>
<p class="Pp"><i>GNU/Hurd</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Numerous build and test failures on GNU/Hurd have been resolved with hints
      for building DBM modules, detection of the library search path, and
      enabling of large file support.</dd>
</dl>
<p class="Pp"><i>OpenVOS</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Perl is now built with dynamic linking on OpenVOS, the minimum supported
      version of which is now Release 17.1.0.</dd>
</dl>
<p class="Pp"><i>SunOS</i></p>
<p class="Pp">The CC workshop C++ compiler is now detected and used on systems
    that ship without cc.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Internal_Changes"><a class="permalink" href="#Internal_Changes">Internal
  Changes</a></h1>
<ul class="Bl-bullet">
  <li>The compiled representation of formats is now stored via the
      <span class="Li">&quot;mg_ptr&quot;</span> of their
      <span class="Li">&quot;PERL_MAGIC_fm&quot;</span>. Previously it was
      stored in the string buffer, beyond
      <span class="Li">&quot;SvLEN()&quot;</span>, the regular end of the
      string. <span class="Li">&quot;SvCOMPILED()&quot;</span> and
      <span class="Li">&quot;SvCOMPILED_{on,off}()&quot;</span> now exist solely
      for compatibility for XS code. The first is always 0, the other two now
      no-ops. (5.14.1)</li>
  <li>Some global variables have been marked
      <span class="Li">&quot;const&quot;</span>, members in the interpreter
      structure have been re-ordered, and the opcodes have been re-ordered. The
      op <span class="Li">&quot;OP_AELEMFAST&quot;</span> has been split into
      <span class="Li">&quot;OP_AELEMFAST&quot;</span> and
      <span class="Li">&quot;OP_AELEMFAST_LEX&quot;</span>.</li>
  <li>When empting a hash of its elements (e.g., via undef(%h), or
      <span class="Li">%h</span>=()), HvARRAY field is no longer temporarily
      zeroed. Any destructors called on the freed elements see the remaining
      elements. Thus, <span class="Li">%h</span>=() becomes more like
      <span class="Li">&quot;delete $h{$_} for keys %h&quot;</span>.</li>
  <li>Boyer-Moore compiled scalars are now PVMGs, and the Boyer-Moore tables are
      now stored via the mg_ptr of their
      <span class="Li">&quot;PERL_MAGIC_bm&quot;</span>. Previously they were
      PVGVs, with the tables stored in the string buffer, beyond
      <span class="Li">&quot;SvLEN()&quot;</span>. This eliminates the last
      place where the core stores data beyond
      <span class="Li">&quot;SvLEN()&quot;</span>.</li>
  <li>Simplified logic in <span class="Li">&quot;Perl_sv_magic()&quot;</span>
      introduces a small change of behavior for error cases involving unknown
      magic types. Previously, if
      <span class="Li">&quot;Perl_sv_magic()&quot;</span> was passed a magic
      type unknown to it, it would</li>
</ul>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>Croak &quot;Modification of a read-only value attempted&quot; if read
    only</dd>
  <dt>2.</dt>
  <dd>Return without error if the SV happened to already have this magic</dd>
  <dt>3.</dt>
  <dd>otherwise croak &quot;Don't know how to handle magic of type
    \\%o&quot;</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">Now it will always croak &quot;Don't know how to handle magic of
    type \\%o&quot;, even on read-only values, or SVs which already have the
    unknown magic type.</p>
</div>
<ul class="Bl-bullet">
  <li>The experimental <span class="Li">&quot;fetch_cop_label&quot;</span>
      function has been renamed to
      <span class="Li">&quot;cop_fetch_label&quot;</span>.</li>
  <li>The <span class="Li">&quot;cop_store_label&quot;</span> function has been
      added to the API, but is experimental.</li>
  <li><i>embedvar.h</i> has been simplified, and one level of macro indirection
      for PL_* variables has been removed for the default (non-multiplicity)
      configuration. PERLVAR*() macros now directly expand their arguments to
      tokens such as <span class="Li">&quot;PL_defgv&quot;</span>, instead of
      expanding to <span class="Li">&quot;PL_Idefgv&quot;</span>, with
      <i>embedvar.h</i> defining a macro to map
      <span class="Li">&quot;PL_Idefgv&quot;</span> to
      <span class="Li">&quot;PL_defgv&quot;</span>. XS code which has
      unwarranted chumminess with the implementation may need updating.</li>
  <li>An API has been added to explicitly choose whether to export XSUB symbols.
      More detail can be found in the comments for commit e64345f8.</li>
  <li>The <span class="Li">&quot;is_gv_magical_sv&quot;</span> function has been
      eliminated and merged with
      <span class="Li">&quot;gv_fetchpvn_flags&quot;</span>. It used to be
      called to determine whether a GV should be autovivified in rvalue context.
      Now it has been replaced with a new
      <span class="Li">&quot;GV_ADDMG&quot;</span> flag (not part of the
    API).</li>
  <li>The returned code point from the function
      <span class="Li">&quot;utf8n_to_uvuni()&quot;</span> when the input is
      malformed UTF-8, malformations are allowed, and
      <span class="Li">&quot;utf8&quot;</span> warnings are off is now the
      Unicode REPLACEMENT CHARACTER whenever the malformation is such that no
      well-defined code point can be computed. Previously the returned value was
      essentially garbage. The only malformations that have well-defined values
      are a zero-length string (0 is the return), and overlong UTF-8
    sequences.</li>
  <li>Padlists are now marked <span class="Li">&quot;AvREAL&quot;</span>; i.e.,
      reference-counted. They have always been reference-counted, but were not
      marked real, because <i>pad.c</i> did its own clean-up, instead of using
      the usual clean-up code in <i>sv.c</i>. That caused problems in thread
      cloning, so now the <span class="Li">&quot;AvREAL&quot;</span> flag is on,
      but is turned off in <i>pad.c</i> right before the padlist is freed (after
      <i>pad.c</i> has done its custom freeing of the pads).</li>
  <li>All C files that make up the Perl core have been converted to UTF-8.</li>
  <li>These new functions have been added as part of the work on Unicode
      symbols:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    HvNAMELEN
    HvNAMEUTF8
    HvENAMELEN
    HvENAMEUTF8
    gv_init_pv
    gv_init_pvn
    gv_init_pvsv
    gv_fetchmeth_pv
    gv_fetchmeth_pvn
    gv_fetchmeth_sv
    gv_fetchmeth_pv_autoload
    gv_fetchmeth_pvn_autoload
    gv_fetchmeth_sv_autoload
    gv_fetchmethod_pv_flags
    gv_fetchmethod_pvn_flags
    gv_fetchmethod_sv_flags
    gv_autoload_pv
    gv_autoload_pvn
    gv_autoload_sv
    newGVgen_flags
    sv_derived_from_pv
    sv_derived_from_pvn
    sv_derived_from_sv
    sv_does_pv
    sv_does_pvn
    sv_does_sv
    whichsig_pv
    whichsig_pvn
    whichsig_sv
    newCONSTSUB_flags
    </pre>
    <p class="Pp">The gv_fetchmethod_*_flags functions, like
        gv_fetchmethod_flags, are experimental and may change in a future
        release.</p>
  </li>
  <li>The following functions were added. These are <i>not</i> part of the API:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    GvNAMEUTF8
    GvENAMELEN
    GvENAME_HEK
    CopSTASH_flags
    CopSTASH_flags_set
    PmopSTASH_flags
    PmopSTASH_flags_set
    sv_sethek
    HEKfARG
    </pre>
    <p class="Pp">There is also a <span class="Li">&quot;HEKf&quot;</span> macro
        corresponding to <span class="Li">&quot;SVf&quot;</span>, for
        interpolating HEKs in formatted strings.</p>
  </li>
  <li><span class="Li">&quot;sv_catpvn_flags&quot;</span> takes a couple of new
      internal-only flags, <span class="Li">&quot;SV_CATBYTES&quot;</span> and
      <span class="Li">&quot;SV_CATUTF8&quot;</span>, which tell it whether the
      char array to be concatenated is UTF8. This allows for more efficient
      concatenation than creating temporary SVs to pass to
      <span class="Li">&quot;sv_catsv&quot;</span>.</li>
  <li>For XS AUTOLOAD subs, <span class="Li">$AUTOLOAD</span> is set once more,
      as it was in 5.6.0. This is in addition to setting
      <span class="Li">&quot;SvPVX(cv)&quot;</span>, for compatibility with 5.8
      to 5.14. See &quot;Autoloading with XSUBs&quot; in perlguts.</li>
  <li>Perl now checks whether the array (the linearized isa) returned by a MRO
      plugin begins with the name of the class itself, for which the array was
      created, instead of assuming that it does. This prevents the first element
      from being skipped during method lookup. It also means that
      <span class="Li">&quot;mro::get_linear_isa&quot;</span> may return an
      array with one more element than the MRO plugin provided [perl
    #94306].</li>
  <li><span class="Li">&quot;PL_curstash&quot;</span> is now
    reference-counted.</li>
  <li>There are now feature bundle hints in
      <span class="Li">&quot;PL_hints&quot;</span> (<span class="Li">$^H</span>)
      that version declarations use, to avoid having to load <i>feature.pm</i>.
      One setting of the hint bits indicates a &quot;custom&quot; feature
      bundle, which means that the entries in
      <span class="Li">&quot;%^H&quot;</span> still apply. <i>feature.pm</i>
      uses that.
    <p class="Pp">The <span class="Li">&quot;HINT_FEATURE_MASK&quot;</span>
        macro is defined in <i>perl.h</i> along with other hints. Other macros
        for setting and testing features and bundles are in the new
        <i>feature.h</i>. <span class="Li">&quot;FEATURE_IS_ENABLED&quot;</span>
        (which has moved to <i>feature.h</i>) is no longer used throughout the
        codebase, but more specific macros, e.g.,
        <span class="Li">&quot;FEATURE_SAY_IS_ENABLED&quot;</span>, that are
        defined in <i>feature.h</i>.</p>
  </li>
  <li><i>lib/feature.pm</i> is now a generated file, created by the new
      <i>regen/feature.pl</i> script, which also generates
    <i>feature.h</i>.</li>
  <li>Tied arrays are now always <span class="Li">&quot;AvREAL&quot;</span>. If
      <span class="Li">@_</span> or <span class="Li">&quot;DB::args&quot;</span>
      is tied, it is reified first, to make sure this is always the case.</li>
  <li>Two new functions <span class="Li">&quot;utf8_to_uvchr_buf()&quot;</span>
      and <span class="Li">&quot;utf8_to_uvuni_buf()&quot;</span> have been
      added. These are the same as
      <span class="Li">&quot;utf8_to_uvchr&quot;</span> and
      <span class="Li">&quot;utf8_to_uvuni&quot;</span> (which are now
      deprecated), but take an extra parameter that is used to guard against
      reading beyond the end of the input string. See
      &quot;utf8_to_uvchr_buf&quot; in perlapi and &quot;utf8_to_uvuni_buf&quot;
      in perlapi.</li>
  <li>The regular expression engine now does TRIE case insensitive matches under
      Unicode. This may change the output of <span class="Li">&quot;use re
      'debug';&quot;</span>, and will speed up various things.</li>
  <li>There is a new <span class="Li">&quot;wrap_op_checker()&quot;</span>
      function, which provides a thread-safe alternative to writing to
      <span class="Li">&quot;PL_check&quot;</span> directly.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Selected_Bug_Fixes"><a class="permalink" href="#Selected_Bug_Fixes">Selected
  Bug Fixes</a></h1>
<section class="Ss">
<h2 class="Ss" id="Array_and_hash"><a class="permalink" href="#Array_and_hash">Array
  and hash</a></h2>
<ul class="Bl-bullet">
  <li>A bug has been fixed that would cause a &quot;Use of freed value in
      iteration&quot; error if the next two hash elements that would be iterated
      over are deleted [perl #85026]. (5.14.1)</li>
  <li>Deleting the current hash iterator (the hash element that would be
      returned by the next call to <span class="Li">&quot;each&quot;</span>) in
      void context used not to free it [perl #85026].</li>
  <li>Deletion of methods via <span class="Li">&quot;delete
      $Class::{method}&quot;</span> syntax used to update method caches if
      called in void context, but not scalar or list context.</li>
  <li>When hash elements are deleted in void context, the internal hash entry is
      now freed before the value is freed, to prevent destructors called by that
      latter freeing from seeing the hash in an inconsistent state. It was
      possible to cause double-frees if the destructor freed the hash itself
      [perl #100340].</li>
  <li>A <span class="Li">&quot;keys&quot;</span> optimization in Perl 5.12.0 to
      make it faster on empty hashes caused
      <span class="Li">&quot;each&quot;</span> not to reset the iterator if
      called after the last element was deleted.</li>
  <li>Freeing deeply nested hashes no longer crashes [perl #44225].</li>
  <li>It is possible from XS code to create hashes with elements that have no
      values. The hash element and slice operators used to crash when handling
      these in lvalue context. They now produce a &quot;Modification of
      non-creatable hash value attempted&quot; error message.</li>
  <li>If list assignment to a hash or array triggered destructors that freed the
      hash or array itself, a crash would ensue. This is no longer the case
      [perl #107440].</li>
  <li>It used to be possible to free the typeglob of a localized array or hash
      (e.g., <span class="Li">&quot;local @{&quot;x&quot;}; delete
      $::{x}&quot;</span>), resulting in a crash on scope exit.</li>
  <li>Some core bugs affecting Hash::Util have been fixed: locking a hash
      element that is a glob copy no longer causes the next assignment to it to
      corrupt the glob (5.14.2), and unlocking a hash element that holds a
      copy-on-write scalar no longer causes modifications to that scalar to
      modify other scalars that were sharing the same string buffer.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="C__s-1API_s0_fixes"><a class="permalink" href="#C__s-1API_s0_fixes">C
  API fixes</a></h2>
<ul class="Bl-bullet">
  <li>The <span class="Li">&quot;newHVhv&quot;</span> XS function now works on
      tied hashes, instead of crashing or returning an empty hash.</li>
  <li>The <span class="Li">&quot;SvIsCOW&quot;</span> C macro now returns false
      for read-only copies of typeglobs, such as those created by:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $hash{elem} = *foo;
  Hash::Util::lock_value %hash, 'elem';
    </pre>
    <p class="Pp">It used to return true.</p>
  </li>
  <li>The <span class="Li">&quot;SvPVutf8&quot;</span> C function no longer
      tries to modify its argument, resulting in errors [perl #108994].</li>
  <li><span class="Li">&quot;SvPVutf8&quot;</span> now works properly with
      magical variables.</li>
  <li><span class="Li">&quot;SvPVbyte&quot;</span> now works properly
    non-PVs.</li>
  <li>When presented with malformed UTF-8 input, the XS-callable functions
      <span class="Li">&quot;is_utf8_string()&quot;</span>,
      <span class="Li">&quot;is_utf8_string_loc()&quot;</span>, and
      <span class="Li">&quot;is_utf8_string_loclen()&quot;</span> could read
      beyond the end of the input string by up to 12 bytes. This no longer
      happens. [perl #32080]. However, currently,
      <span class="Li">&quot;is_utf8_char()&quot;</span> still has this defect,
      see &quot;<b>is_utf8_char()</b>&quot; above.</li>
  <li>The C-level <span class="Li">&quot;pregcomp&quot;</span> function could
      become confused about whether the pattern was in UTF8 if the pattern was
      an overloaded, tied, or otherwise magical scalar [perl #101940].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Compile-time_hints"><a class="permalink" href="#Compile-time_hints">Compile-time
  hints</a></h2>
<ul class="Bl-bullet">
  <li>Tying <span class="Li">&quot;%^H&quot;</span> no longer causes perl to
      crash or ignore the contents of <span class="Li">&quot;%^H&quot;</span>
      when entering a compilation scope [perl #106282].</li>
  <li><span class="Li">&quot;eval $string&quot;</span> and
      <span class="Li">&quot;require&quot;</span> used not to localize
      <span class="Li">&quot;%^H&quot;</span> during compilation if it was empty
      at the time the <span class="Li">&quot;eval&quot;</span> call itself was
      compiled. This could lead to scary side effects, like
      <span class="Li">&quot;use re &quot;/m&quot;&quot;</span> enabling other
      flags that the surrounding code was trying to enable for its caller [perl
      #68750].</li>
  <li><span class="Li">&quot;eval $string&quot;</span> and
      <span class="Li">&quot;require&quot;</span> no longer localize hints
      (<span class="Li">$^H</span> and <span class="Li">&quot;%^H&quot;</span>)
      at run time, but only during compilation of the
      <span class="Li">$string</span> or required file. This makes
      <span class="Li">&quot;BEGIN { $^H{foo}=7 }&quot;</span> equivalent to
      <span class="Li">&quot;BEGIN { eval '$^H{foo}=7' }&quot;</span> [perl
      #70151].</li>
  <li>Creating a BEGIN block from XS code (via
      <span class="Li">&quot;newXS&quot;</span> or
      <span class="Li">&quot;newATTRSUB&quot;</span>) would, on completion, make
      the hints of the current compiling code the current hints. This could
      cause warnings to occur in a non-warning scope.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Copy-on-write_scalars"><a class="permalink" href="#Copy-on-write_scalars">Copy-on-write
  scalars</a></h2>
Copy-on-write or shared hash key scalars were introduced in 5.8.0, but most Perl
  code did not encounter them (they were used mostly internally). Perl 5.10.0
  extended them, such that assigning
  <span class="Li">&quot;__PACKAGE__&quot;</span> or a hash key to a scalar
  would make it copy-on-write. Several parts of Perl were not updated to account
  for them, but have now been fixed.
<ul class="Bl-bullet">
  <li><span class="Li">&quot;utf8::decode&quot;</span> had a nasty bug that
      would modify copy-on-write scalars' string buffers in place (i.e.,
      skipping the copy). This could result in hashes having two elements with
      the same key [perl #91834]. (5.14.2)</li>
  <li>Lvalue subroutines were not allowing COW scalars to be returned. This was
      fixed for lvalue scalar context in Perl 5.12.3 and 5.14.0, but list
      context was not fixed until this release.</li>
  <li>Elements of restricted hashes (see the fields pragma) containing
      copy-on-write values couldn't be deleted, nor could such hashes be cleared
      (<span class="Li">&quot;%hash = ()&quot;</span>). (5.14.2)</li>
  <li>Localizing a tied variable used to make it read-only if it contained a
      copy-on-write string. (5.14.2)</li>
  <li>Assigning a copy-on-write string to a stash element no longer causes a
      double free. Regardless of this change, the results of such assignments
      are still undefined.</li>
  <li>Assigning a copy-on-write string to a tied variable no longer stops that
      variable from being tied if it happens to be a PVMG or PVLV
    internally.</li>
  <li>Doing a substitution on a tied variable returning a copy-on-write scalar
      used to cause an assertion failure or an &quot;Attempt to free nonexistent
      shared string&quot; warning.</li>
  <li>This one is a regression from 5.12: In 5.14.0, the bitwise assignment
      operators <span class="Li">&quot;|=&quot;</span>,
      <span class="Li">&quot;^=&quot;</span> and
      <span class="Li">&quot;&amp;=&quot;</span> started leaving the left-hand
      side undefined if it happened to be a copy-on-write string [perl
    #108480].</li>
  <li>Storable, Devel::Peek and PerlIO::scalar had similar problems. See
      &quot;Updated Modules and Pragmata&quot;, above.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="The_debugger"><a class="permalink" href="#The_debugger">The
  debugger</a></h2>
<ul class="Bl-bullet">
  <li><i>dumpvar.pl</i>, and therefore the <span class="Li">&quot;x&quot;</span>
      command in the debugger, have been fixed to handle objects blessed into
      classes whose names contain &quot;=&quot;. The contents of such objects
      used not to be dumped [perl #101814].</li>
  <li>The &quot;R&quot; command for restarting a debugger session has been fixed
      to work on Windows, or any other system lacking a
      <span class="Li">&quot;POSIX::_SC_OPEN_MAX&quot;</span> constant [perl
      #87740].</li>
  <li>The <span class="Li">&quot;#line 42 foo&quot;</span> directive used not to
      update the arrays of lines used by the debugger if it occurred in a string
      eval. This was partially fixed in 5.14, but it worked only for a single
      <span class="Li">&quot;#line 42 foo&quot;</span> in each eval. Now it
      works for multiple.</li>
  <li>When subroutine calls are intercepted by the debugger, the name of the
      subroutine or a reference to it is stored in
      <span class="Li">$DB::sub</span>, for the debugger to access. Sometimes
      (such as <span class="Li">&quot;$foo = *bar; undef *bar;
      &amp;$foo&quot;</span>) <span class="Li">$DB::sub</span> would be set to a
      name that could not be used to find the subroutine, and so the debugger's
      attempt to call it would fail. Now the check to see whether a reference is
      needed is more robust, so those problems should not happen anymore
      [rt.cpan.org #69862].</li>
  <li>Every subroutine has a filename associated with it that the debugger uses.
      The one associated with constant subroutines used to be misallocated when
      cloned under threads. Consequently, debugging threaded applications could
      result in memory corruption [perl #96126].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Dereferencing_operators"><a class="permalink" href="#Dereferencing_operators">Dereferencing
  operators</a></h2>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;defined(${&quot;...&quot;})&quot;</span>,
      <span class="Li">&quot;defined(*{&quot;...&quot;})&quot;</span>, etc.,
      used to return true for most, but not all built-in variables, if they had
      not been used yet. This bug affected
      <span class="Li">&quot;${^GLOBAL_PHASE}&quot;</span> and
      <span class="Li">&quot;${^UTF8CACHE}&quot;</span>, among others. It also
      used to return false if the package name was given as well
      (<span class="Li">&quot;${&quot;::!&quot;}&quot;</span>) [perl #97978,
      #97492].</li>
  <li>Perl 5.10.0 introduced a similar bug:
      <span class="Li">&quot;defined(*{&quot;foo&quot;})&quot;</span> where
      &quot;foo&quot; represents the name of a built-in global variable used to
      return false if the variable had never been used before, but only on the
      <i>first</i> call. This, too, has been fixed.</li>
  <li>Since 5.6.0, <span class="Li">&quot;*{ ... }&quot;</span> has been
      inconsistent in how it treats undefined values. It would die in strict
      mode or lvalue context for most undefined values, but would be treated as
      the empty string (with a warning) for the specific scalar return by
      <span class="Li">&quot;undef()&quot;</span>
      (<span class="Li">&amp;PL_sv_undef</span> internally). This has been
      corrected. <span class="Li">&quot;undef()&quot;</span> is now treated like
      other undefined scalars, as in Perl 5.005.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Filehandle,_last-accessed"><a class="permalink" href="#Filehandle,_last-accessed">Filehandle,
  last-accessed</a></h2>
Perl has an internal variable that stores the last filehandle to be accessed. It
  is used by <span class="Li">$.</span> and by
  <span class="Li">&quot;tell&quot;</span> and
  <span class="Li">&quot;eof&quot;</span> without arguments.
<ul class="Bl-bullet">
  <li>It used to be possible to set this internal variable to a glob copy and
      then modify that glob copy to be something other than a glob, and still
      have the last-accessed filehandle associated with the variable after
      assigning a glob to it again:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    my $foo = *STDOUT;  # $foo is a glob copy
    &lt;$foo&gt;;             # $foo is now the last-accessed handle
    $foo = 3;           # no longer a glob
    $foo = *STDERR;     # still the last-accessed handle
    </pre>
    <p class="Pp">Now the <span class="Li">&quot;$foo = 3&quot;</span>
        assignment unsets that internal variable, so there is no last-accessed
        filehandle, just as if <span class="Li">&quot;&lt;$foo&gt;&quot;</span>
        had never happened.</p>
    <p class="Pp">This also prevents some unrelated handle from becoming the
        last-accessed handle if <span class="Li">$foo</span> falls out of scope
        and the same internal SV gets used for another handle [perl #97988].</p>
  </li>
  <li>A regression in 5.14 caused these statements not to set that internal
      variable:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    my $fh = *STDOUT;
    tell $fh;
    eof  $fh;
    seek $fh, 0,0;
    tell     *$fh;
    eof      *$fh;
    seek     *$fh, 0,0;
    readline *$fh;
    </pre>
    <p class="Pp">This is now fixed, but <span class="Li">&quot;tell *{ *$fh
        }&quot;</span> still has the problem, and it is not clear how to fix it
        [perl #106536].</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Filetests_and__stat_"><a class="permalink" href="#Filetests_and__stat_">Filetests
  and &quot;stat&quot;</a></h2>
The term &quot;filetests&quot; refers to the operators that consist of a hyphen
  followed by a single letter: <span class="Li">&quot;-r&quot;</span>,
  <span class="Li">&quot;-x&quot;</span>,
  <span class="Li">&quot;-M&quot;</span>, etc. The term &quot;stacked&quot; when
  applied to filetests means followed by another filetest operator sharing the
  same operand, as in <span class="Li">&quot;-r -x -w $fooo&quot;</span>.
<ul class="Bl-bullet">
  <li><span class="Li">&quot;stat&quot;</span> produces more consistent
      warnings. It no longer warns for &quot;_&quot; [perl #71002] and no longer
      skips the warning at times for other unopened handles. It no longer warns
      about an unopened handle when the operating system's
      <span class="Li">&quot;fstat&quot;</span> function fails.</li>
  <li><span class="Li">&quot;stat&quot;</span> would sometimes return negative
      numbers for large inode numbers, because it was using the wrong internal C
      type. [perl #84590]</li>
  <li><span class="Li">&quot;lstat&quot;</span> is documented to fall back to
      <span class="Li">&quot;stat&quot;</span> (with a warning) when given a
      filehandle. When passed an IO reference, it was actually doing the
      equivalent of <span class="Li">&quot;stat&#x00A0;_&quot;</span> and
      ignoring the handle.</li>
  <li><span class="Li">&quot;-T _&quot;</span> with no preceding
      <span class="Li">&quot;stat&quot;</span> used to produce a confusing
      &quot;uninitialized&quot; warning, even though there is no visible
      uninitialized value to speak of.</li>
  <li><span class="Li">&quot;-T&quot;</span>,
      <span class="Li">&quot;-B&quot;</span>,
      <span class="Li">&quot;-l&quot;</span> and
      <span class="Li">&quot;-t&quot;</span> now work when stacked with other
      filetest operators [perl #77388].</li>
  <li>In 5.14.0, filetest ops (<span class="Li">&quot;-r&quot;</span>,
      <span class="Li">&quot;-x&quot;</span>, etc.) started calling FETCH on a
      tied argument belonging to the previous argument to a list operator, if
      called with a bareword argument or no argument at all. This has been
      fixed, so <span class="Li">&quot;push @foo, $tied, -r&quot;</span> no
      longer calls FETCH on <span class="Li">$tied</span>.</li>
  <li>In Perl 5.6, <span class="Li">&quot;-l&quot;</span> followed by anything
      other than a bareword would treat its argument as a file name. That was
      changed in 5.8 for glob references
      (<span class="Li">&quot;\*foo&quot;</span>), but not for globs themselves
      (<span class="Li">*foo</span>). <span class="Li">&quot;-l&quot;</span>
      started returning <span class="Li">&quot;undef&quot;</span> for glob
      references without setting the last stat buffer that the &quot;_&quot;
      handle uses, but only if warnings were turned on. With warnings off, it
      was the same as 5.6. In other words, it was simply buggy and inconsistent.
      Now the 5.6 behavior has been restored.</li>
  <li><span class="Li">&quot;-l&quot;</span> followed by a bareword no longer
      &quot;eats&quot; the previous argument to the list operator in whose
      argument list it resides. Hence, <span class="Li">&quot;print
      &quot;bar&quot;, -l foo&quot;</span> now actually prints &quot;bar&quot;,
      because <span class="Li">&quot;-l&quot;</span> on longer eats it.</li>
  <li>Perl keeps several internal variables to keep track of the last stat
      buffer, from which file(handle) it originated, what type it was, and
      whether the last stat succeeded.
    <p class="Pp">There were various cases where these could get out of synch,
        resulting in inconsistent or erratic behavior in edge cases (every
        mention of <span class="Li">&quot;-T&quot;</span> applies to
        <span class="Li">&quot;-B&quot;</span> as well):</p>
  </li>
</ul>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li><span class="Li">&quot;-T
      </span><i>HANDLE</i><span class="Li">&quot;</span>, even though it does a
      <span class="Li">&quot;stat&quot;</span>, was not resetting the last stat
      type, so an <span class="Li">&quot;lstat _&quot;</span> following it would
      merrily return the wrong results. Also, it was not setting the success
      status.</li>
  <li>Freeing the handle last used by <span class="Li">&quot;stat&quot;</span>
      or a filetest could result in
      <span class="Li">&quot;-T&#x00A0;_&quot;</span> using an unrelated
    handle.</li>
  <li><span class="Li">&quot;stat&quot;</span> with an IO reference would not
      reset the stat type or record the filehandle for
      <span class="Li">&quot;-T&#x00A0;_&quot;</span> to use.</li>
  <li>Fatal warnings could cause the stat buffer not to be reset for a filetest
      operator on an unopened filehandle or
      <span class="Li">&quot;-l&quot;</span> on any handle. Fatal warnings also
      stopped <span class="Li">&quot;-T&quot;</span> from setting
      <span class="Li">$!</span>.</li>
  <li>When the last stat was on an unreadable file, <span class="Li">&quot;-T
      _&quot;</span> is supposed to return
      <span class="Li">&quot;undef&quot;</span>, leaving the last stat buffer
      unchanged. But it was setting the stat type, causing
      <span class="Li">&quot;lstat _&quot;</span> to stop working.</li>
  <li><span class="Li">&quot;-T
      </span><i>FILENAME</i><span class="Li">&quot;</span> was not resetting the
      internal stat buffers for unreadable files.</li>
</ul>
</div>
<div class="Bd-indent">
<p class="Pp">These have all been fixed.</p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Formats"><a class="permalink" href="#Formats">Formats</a></h2>
<ul class="Bl-bullet">
  <li>Several edge cases have been fixed with formats and
      <span class="Li">&quot;formline&quot;</span>; in particular, where the
      format itself is potentially variable (such as with ties and overloading),
      and where the format and data differ in their encoding. In both these
      cases, it used to possible for the output to be corrupted [perl
    #91032].</li>
  <li><span class="Li">&quot;formline&quot;</span> no longer converts its
      argument into a string in-place. So passing a reference to
      <span class="Li">&quot;formline&quot;</span> no longer destroys the
      reference [perl #79532].</li>
  <li>Assignment to <span class="Li">$^A</span> (the format output accumulator)
      now recalculates the number of lines output.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="_given__and__when_"><a class="permalink" href="#_given__and__when_">&quot;given&quot;
  and &quot;when&quot;</a></h2>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;given&quot;</span> was not scoping its implicit
      <span class="Li">$_</span> properly, resulting in memory leaks or
      &quot;Variable is not available&quot; warnings [perl #94682].</li>
  <li><span class="Li">&quot;given&quot;</span> was not calling set-magic on the
      implicit lexical <span class="Li">$_</span> that it uses. This meant, for
      example, that <span class="Li">&quot;pos&quot;</span> would be remembered
      from one execution of the same <span class="Li">&quot;given&quot;</span>
      block to the next, even if the input were a different variable [perl
      #84526].</li>
  <li><span class="Li">&quot;when&quot;</span> blocks are now capable of
      returning variables declared inside the enclosing
      <span class="Li">&quot;given&quot;</span> block [perl #93548].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="The__glob__operator"><a class="permalink" href="#The__glob__operator">The
  &quot;glob&quot; operator</a></h2>
<ul class="Bl-bullet">
  <li>On OSes other than VMS, Perl's <span class="Li">&quot;glob&quot;</span>
      operator (and the <span class="Li">&quot;&lt;...&gt;&quot;</span> form)
      use File::Glob underneath. File::Glob splits the pattern into words,
      before feeding each word to its
      <span class="Li">&quot;bsd_glob&quot;</span> function.
    <p class="Pp">There were several inconsistencies in the way the split was
        done. Now quotation marks (' and &quot;) are always treated as
        shell-style word delimiters (that allow whitespace as part of a word)
        and backslashes are always preserved, unless they exist to escape
        quotation marks. Before, those would only sometimes be the case,
        depending on whether the pattern contained whitespace. Also, escaped
        whitespace at the end of the pattern is no longer stripped [perl
        #40470].</p>
  </li>
  <li><span class="Li">&quot;CORE::glob&quot;</span> now works as a way to call
      the default globbing function. It used to respect overrides, despite the
      <span class="Li">&quot;CORE::&quot;</span> prefix.</li>
  <li>Under miniperl (used to configure modules when perl itself is built),
      <span class="Li">&quot;glob&quot;</span> now clears
      <span class="Li">%ENV</span> before calling csh, since the latter croaks
      on some systems if it does not like the contents of the LS_COLORS
      environment variable [perl #98662].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Lvalue_subroutines"><a class="permalink" href="#Lvalue_subroutines">Lvalue
  subroutines</a></h2>
<ul class="Bl-bullet">
  <li>Explicit return now returns the actual argument passed to return, instead
      of copying it [perl #72724, #72706].</li>
  <li>Lvalue subroutines used to enforce lvalue syntax (i.e., whatever can go on
      the left-hand side of <span class="Li">&quot;=&quot;</span>) for the last
      statement and the arguments to return. Since lvalue subroutines are not
      always called in lvalue context, this restriction has been lifted.</li>
  <li>Lvalue subroutines are less restrictive about what values can be returned.
      It used to croak on values returned by
      <span class="Li">&quot;shift&quot;</span> and
      <span class="Li">&quot;delete&quot;</span> and from other subroutines, but
      no longer does so [perl #71172].</li>
  <li>Empty lvalue subroutines (<span class="Li">&quot;sub :lvalue
      {}&quot;</span>) used to return <span class="Li">@_</span> in list
      context. All subroutines used to do this, but regular subs were fixed in
      Perl 5.8.2. Now lvalue subroutines have been likewise fixed.</li>
  <li>Autovivification now works on values returned from lvalue subroutines
      [perl #7946], as does returning <span class="Li">&quot;keys&quot;</span>
      in lvalue context.</li>
  <li>Lvalue subroutines used to copy their return values in rvalue context. Not
      only was this a waste of CPU cycles, but it also caused bugs. A
      <span class="Li">&quot;($)&quot;</span> prototype would cause an lvalue
      sub to copy its return value [perl #51408], and
      <span class="Li">&quot;while(lvalue_sub() =~ m/.../g) { ... }&quot;</span>
      would loop endlessly [perl #78680].</li>
  <li>When called in potential lvalue context (e.g., subroutine arguments or a
      list passed to <span class="Li">&quot;for&quot;</span>), lvalue
      subroutines used to copy any read-only value that was returned. E.g.,
      <span class="Li">&quot; sub :lvalue { $] } &quot;</span> would not return
      <span class="Li">$]</span>, but a copy of it.</li>
  <li>When called in potential lvalue context, an lvalue subroutine returning
      arrays or hashes used to bind the arrays or hashes to scalar variables,
      resulting in bugs. This was fixed in 5.14.0 if an array were the first
      thing returned from the subroutine (but not for
      <span class="Li">&quot;$scalar, @array&quot;</span> or hashes being
      returned). Now a more general fix has been applied [perl #23790].</li>
  <li>Method calls whose arguments were all surrounded with
      <span class="Li">&quot;my()&quot;</span> or
      <span class="Li">&quot;our()&quot;</span> (as in
      <span class="Li">&quot;$object-&gt;method(my($a,$b))&quot;</span>) used to
      force lvalue context on the subroutine. This would prevent lvalue methods
      from returning certain values.</li>
  <li>Lvalue sub calls that are not determined to be such at compile time
      (<span class="Li">&amp;$name</span> or &amp;{&quot;name&quot;}) are no
      longer exempt from strict refs if they occur in the last statement of an
      lvalue subroutine [perl #102486].</li>
  <li>Sub calls whose subs are not visible at compile time, if they occurred in
      the last statement of an lvalue subroutine, would reject non-lvalue
      subroutines and die with &quot;Can't modify non-lvalue subroutine
      call&quot; [perl #102486].
    <p class="Pp">Non-lvalue sub calls whose subs <i>are</i> visible at compile
        time exhibited the opposite bug. If the call occurred in the last
        statement of an lvalue subroutine, there would be no error when the
        lvalue sub was called in lvalue context. Perl would blindly assign to
        the temporary value returned by the non-lvalue subroutine.</p>
  </li>
  <li><span class="Li">&quot;AUTOLOAD&quot;</span> routines used to take
      precedence over the actual sub being called (i.e., when autoloading wasn't
      needed), for sub calls in lvalue or potential lvalue context, if the
      subroutine was not visible at compile time.</li>
  <li>Applying the <span class="Li">&quot;:lvalue&quot;</span> attribute to an
      XSUB or to an aliased subroutine stub with <span class="Li">&quot;sub foo
      :lvalue;&quot;</span> syntax stopped working in Perl 5.12. This has been
      fixed.</li>
  <li>Applying the :lvalue attribute to subroutine that is already defined does
      not work properly, as the attribute changes the way the sub is compiled.
      Hence, Perl 5.12 began warning when an attempt is made to apply the
      attribute to an already defined sub. In such cases, the attribute is
      discarded.
    <p class="Pp">But the change in 5.12 missed the case where custom attributes
        are also present: that case still silently and ineffectively applied the
        attribute. That omission has now been corrected.
        <span class="Li">&quot;sub foo :lvalue :Whatever&quot;</span> (when
        <span class="Li">&quot;foo&quot;</span> is already defined) now warns
        about the :lvalue attribute, and does not apply it.</p>
  </li>
  <li>A bug affecting lvalue context propagation through nested lvalue
      subroutine calls has been fixed. Previously, returning a value in nested
      rvalue context would be treated as lvalue context by the inner subroutine
      call, resulting in some values (such as read-only values) being
    rejected.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Overloading"><a class="permalink" href="#Overloading">Overloading</a></h2>
<ul class="Bl-bullet">
  <li>Arithmetic assignment (<span class="Li">&quot;$left +=
      $right&quot;</span>) involving overloaded objects that rely on the
      'nomethod' override no longer segfault when the left operand is not
      overloaded.</li>
  <li>Errors that occur when methods cannot be found during overloading now
      mention the correct package name, as they did in 5.8.x, instead of
      erroneously mentioning the &quot;overload&quot; package, as they have
      since 5.10.0.</li>
  <li>Undefining <span class="Li">%overload::</span> no longer causes a
    crash.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Prototypes_of_built-in_keywords"><a class="permalink" href="#Prototypes_of_built-in_keywords">Prototypes
  of built-in keywords</a></h2>
<ul class="Bl-bullet">
  <li>The <span class="Li">&quot;prototype&quot;</span> function no longer dies
      for the <span class="Li">&quot;__FILE__&quot;</span>,
      <span class="Li">&quot;__LINE__&quot;</span> and
      <span class="Li">&quot;__PACKAGE__&quot;</span> directives. It now returns
      an empty-string prototype for them, because they are syntactically
      indistinguishable from nullary functions like
      <span class="Li">&quot;time&quot;</span>.</li>
  <li><span class="Li">&quot;prototype&quot;</span> now returns
      <span class="Li">&quot;undef&quot;</span> for all overridable infix
      operators, such as <span class="Li">&quot;eq&quot;</span>, which are not
      callable in any way resembling functions. It used to return incorrect
      prototypes for some and die for others [perl #94984].</li>
  <li>The prototypes of several built-in
      functions--<span class="Li">&quot;getprotobynumber&quot;</span>,
      <span class="Li">&quot;lock&quot;</span>,
      <span class="Li">&quot;not&quot;</span> and
      <span class="Li">&quot;select&quot;</span>--have been corrected, or at
      least are now closer to reality than before.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Regular_expressions"><a class="permalink" href="#Regular_expressions">Regular
  expressions</a></h2>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;/[[:ascii:]]/&quot;</span> and
      <span class="Li">&quot;/[[:blank:]]/&quot;</span> now use locale rules
      under <span class="Li">&quot;use locale&quot;</span> when the platform
      supports that. Previously, they used the platform's native character
    set.</li>
  <li><span class="Li">&quot;m/[[:ascii:]]/i&quot;</span> and
      <span class="Li">&quot;/\p{ASCII}/i&quot;</span> now match identically
      (when not under a differing locale). This fixes a regression introduced in
      5.14 in which the first expression could match characters outside of
      ASCII, such as the KELVIN SIGN.</li>
  <li><span class="Li">&quot;/.*/g&quot;</span> would sometimes refuse to match
      at the end of a string that ends with &quot;\n&quot;. This has been fixed
      [perl #109206].</li>
  <li>Starting with 5.12.0, Perl used to get its internal bookkeeping muddled up
      after assigning <span class="Li">&quot;${ qr// }&quot;</span> to a hash
      element and locking it with Hash::Util. This could result in double frees,
      crashes, or erratic behavior.</li>
  <li>The new (in 5.14.0) regular expression modifier
      <span class="Li">&quot;/a&quot;</span> when repeated like
      <span class="Li">&quot;/aa&quot;</span> forbids the characters outside the
      ASCII range that match characters inside that range from matching under
      <span class="Li">&quot;/i&quot;</span>. This did not work under some
      circumstances, all involving alternation, such as:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 &quot;\N{KELVIN SIGN}&quot; =~ /k|foo/iaa;
    </pre>
    <p class="Pp">succeeded inappropriately. This is now fixed.</p>
  </li>
  <li>5.14.0 introduced some memory leaks in regular expression character
      classes such as <span class="Li">&quot;[\w\s]&quot;</span>, which have now
      been fixed. (5.14.1)</li>
  <li>An edge case in regular expression matching could potentially loop. This
      happened only under <span class="Li">&quot;/i&quot;</span> in bracketed
      character classes that have characters with multi-character folds, and the
      target string to match against includes the first portion of the fold,
      followed by another character that has a multi-character fold that begins
      with the remaining portion of the fold, plus some more.
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 &quot;s\N{U+DF}&quot; =~ /[\x{DF}foo]/i
    </pre>
    <p class="Pp">is one such case. <span class="Li">&quot;\xDF&quot;</span>
        folds to <span class="Li">&quot;ss&quot;</span>. (5.14.1)</p>
  </li>
  <li>A few characters in regular expression pattern matches did not match
      correctly in some circumstances, all involving
      <span class="Li">&quot;/i&quot;</span>. The affected characters are:
      COMBINING GREEK YPOGEGRAMMENI, GREEK CAPITAL LETTER IOTA, GREEK CAPITAL
      LETTER UPSILON, GREEK PROSGEGRAMMENI, GREEK SMALL LETTER IOTA WITH
      DIALYTIKA AND OXIA, GREEK SMALL LETTER IOTA WITH DIALYTIKA AND TONOS,
      GREEK SMALL LETTER UPSILON WITH DIALYTIKA AND OXIA, GREEK SMALL LETTER
      UPSILON WITH DIALYTIKA AND TONOS, LATIN SMALL LETTER LONG S, LATIN SMALL
      LIGATURE LONG S T, and LATIN SMALL LIGATURE ST.</li>
  <li>A memory leak regression in regular expression compilation under threading
      has been fixed.</li>
  <li>A regression introduced in 5.14.0 has been fixed. This involved an
      inverted bracketed character class in a regular expression that consisted
      solely of a Unicode property. That property wasn't getting inverted
      outside the Latin1 range.</li>
  <li>Three problematic Unicode characters now work better in regex pattern
      matching under <span class="Li">&quot;/i&quot;</span>.
    <p class="Pp">In the past, three Unicode characters: LATIN SMALL LETTER
        SHARP S, GREEK SMALL LETTER IOTA WITH DIALYTIKA AND TONOS, and GREEK
        SMALL LETTER UPSILON WITH DIALYTIKA AND TONOS, along with the sequences
        that they fold to (including &quot;ss&quot; for LATIN SMALL LETTER SHARP
        S), did not properly match under <span class="Li">&quot;/i&quot;</span>.
        5.14.0 fixed some of these cases, but introduced others, including a
        panic when one of the characters or sequences was used in the
        <span class="Li">&quot;(?(DEFINE)&quot;</span> regular expression
        predicate. The known bugs that were introduced in 5.14 have now been
        fixed; as well as some other edge cases that have never worked until
        now. These all involve using the characters and sequences outside
        bracketed character classes under
        <span class="Li">&quot;/i&quot;</span>. This closes [perl #98546].</p>
    <p class="Pp">There remain known problems when using certain characters with
        multi-character folds inside bracketed character classes, including such
        constructs as <span class="Li">&quot;qr/[\N{LATIN SMALL LETTER
        SHARP}a-z]/i&quot;</span>. These remaining bugs are addressed in [perl
        #89774].</p>
  </li>
  <li>RT #78266: The regex engine has been leaking memory when accessing named
      captures that weren't matched as part of a regex ever since 5.10 when they
      were introduced; e.g., this would consume over a hundred MB of memory:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    for (1..10_000_000) {
        if (&quot;foo&quot; =~ /(foo|(?&lt;capture&gt;bar))?/) {
            my $capture = $+{capture}
        }
    }
    system &quot;ps -o rss $$&quot;'
    </pre>
  </li>
  <li>In 5.14, <span class="Li">&quot;/[[:lower:]]/i&quot;</span> and
      <span class="Li">&quot;/[[:upper:]]/i&quot;</span> no longer matched the
      opposite case. This has been fixed [perl #101970].</li>
  <li>A regular expression match with an overloaded object on the right-hand
      side would sometimes stringify the object too many times.</li>
  <li>A regression has been fixed that was introduced in 5.14, in
      <span class="Li">&quot;/i&quot;</span> regular expression matching, in
      which a match improperly fails if the pattern is in UTF-8, the target
      string is not, and a Latin-1 character precedes a character in the string
      that should match the pattern. [perl #101710]</li>
  <li>In case-insensitive regular expression pattern matching, no longer on
      UTF-8 encoded strings does the scan for the start of match look only at
      the first possible position. This caused matches such as
      <span class="Li">&quot;&quot;f\x{FB00}&quot; =~ /ff/i&quot;</span> to
      fail.</li>
  <li>The regexp optimizer no longer crashes on debugging builds when merging
      fixed-string nodes with inconvenient contents.</li>
  <li>A panic involving the combination of the regular expression modifiers
      <span class="Li">&quot;/aa&quot;</span> and the
      <span class="Li">&quot;\b&quot;</span> escape sequence introduced in
      5.14.0 has been fixed [perl #95964]. (5.14.2)</li>
  <li>The combination of the regular expression modifiers
      <span class="Li">&quot;/aa&quot;</span> and the
      <span class="Li">&quot;\b&quot;</span> and
      <span class="Li">&quot;\B&quot;</span> escape sequences did not work
      properly on UTF-8 encoded strings. All non-ASCII characters under
      <span class="Li">&quot;/aa&quot;</span> should be treated as non-word
      characters, but what was happening was that Unicode rules were used to
      determine wordness/non-wordness for non-ASCII characters. This is now
      fixed [perl #95968].</li>
  <li><span class="Li">&quot;(?foo: ...)&quot;</span> no longer loses passed in
      character set.</li>
  <li>The trie optimization used to have problems with alternations containing
      an empty <span class="Li">&quot;(?:)&quot;</span>, causing
      <span class="Li">&quot;&quot;x&quot; =~
      /\A(?&gt;(?:(?:)A|B|C?x))\z/&quot;</span> not to match, whereas it should
      [perl #111842].</li>
  <li>Use of lexical (<span class="Li">&quot;my&quot;</span>) variables in code
      blocks embedded in regular expressions will no longer result in memory
      corruption or crashes.
    <p class="Pp">Nevertheless, these code blocks are still experimental, as
        there are still problems with the wrong variables being closed over (in
        loops for instance) and with abnormal exiting (e.g.,
        <span class="Li">&quot;die&quot;</span>) causing memory corruption.</p>
  </li>
  <li>The <span class="Li">&quot;\h&quot;</span>,
      <span class="Li">&quot;\H&quot;</span>,
      <span class="Li">&quot;\v&quot;</span> and
      <span class="Li">&quot;\V&quot;</span> regular expression metacharacters
      used to cause a panic error message when trying to match at the end of the
      string [perl #96354].</li>
  <li>The abbreviations for four C1 control characters
      <span class="Li">&quot;MW&quot;</span>
      <span class="Li">&quot;PM&quot;</span>,
      <span class="Li">&quot;RI&quot;</span>, and
      <span class="Li">&quot;ST&quot;</span> were previously unrecognized by
      <span class="Li">&quot;\N{}&quot;</span>, <b>vianame()</b>, and
      <b>string_vianame()</b>.</li>
  <li>Mentioning a variable named &quot;&amp;&quot; other than
      <span class="Li">$&amp;</span> (i.e.,
      <span class="Li">&quot;@&amp;&quot;</span> or
      <span class="Li">&quot;%&amp;&quot;</span>) no longer stops
      <span class="Li">$&amp;</span> from working. The same applies to variables
      named &quot;'&quot; and &quot;`&quot; [perl #24237].</li>
  <li>Creating a <span class="Li">&quot;UNIVERSAL::AUTOLOAD&quot;</span> sub no
      longer stops <span class="Li">&quot;%+&quot;</span>,
      <span class="Li">&quot;%-&quot;</span> and
      <span class="Li">&quot;%!&quot;</span> from working some of the time [perl
      #105024].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Smartmatching"><a class="permalink" href="#Smartmatching">Smartmatching</a></h2>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;~~&quot;</span> now correctly handles the
      precedence of Any~~Object, and is not tricked by an overloaded object on
      the left-hand side.</li>
  <li>In Perl 5.14.0, <span class="Li">&quot;$tainted ~~ @array&quot;</span>
      stopped working properly. Sometimes it would erroneously fail (when
      <span class="Li">$tainted</span> contained a string that occurs in the
      array <i>after</i> the first element) or erroneously succeed (when
      <span class="Li">&quot;undef&quot;</span> occurred after the first
      element) [perl #93590].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="The__sort__operator"><a class="permalink" href="#The__sort__operator">The
  &quot;sort&quot; operator</a></h2>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;sort&quot;</span> was not treating
      <span class="Li">&quot;sub {}&quot;</span> and <span class="Li">&quot;sub
      {()}&quot;</span> as equivalent when such a sub was provided as the
      comparison routine. It used to croak on <span class="Li">&quot;sub
      {()}&quot;</span>.</li>
  <li><span class="Li">&quot;sort&quot;</span> now works once more with custom
      sort routines that are XSUBs. It stopped working in 5.10.0.</li>
  <li><span class="Li">&quot;sort&quot;</span> with a constant for a custom sort
      routine, although it produces unsorted results, no longer crashes. It
      started crashing in 5.10.0.</li>
  <li>Warnings emitted by <span class="Li">&quot;sort&quot;</span> when a custom
      comparison routine returns a non-numeric value now contain &quot;in
      sort&quot; and show the line number of the
      <span class="Li">&quot;sort&quot;</span> operator, rather than the last
      line of the comparison routine. The warnings also now occur only if
      warnings are enabled in the scope where
      <span class="Li">&quot;sort&quot;</span> occurs. Previously the warnings
      would occur if enabled in the comparison routine's scope.</li>
  <li><span class="Li">&quot;sort { $a &lt;=&gt; $b }&quot;</span>, which is
      optimized internally, now produces &quot;uninitialized&quot; warnings for
      NaNs (not-a-number values), since
      <span class="Li">&quot;&lt;=&gt;&quot;</span> returns
      <span class="Li">&quot;undef&quot;</span> for those. This brings it in
      line with
      <span class="Li">&quot;sort&#x00A0;{&#x00A0;1;&#x00A0;$a&#x00A0;&lt;=&gt;&#x00A0;$b&#x00A0;}&quot;</span>
      and other more complex cases, which are not optimized [perl #94390].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="The__substr__operator"><a class="permalink" href="#The__substr__operator">The
  &quot;substr&quot; operator</a></h2>
<ul class="Bl-bullet">
  <li>Tied (and otherwise magical) variables are no longer exempt from the
      &quot;Attempt to use reference as lvalue in substr&quot; warning.</li>
  <li>That warning now occurs when the returned lvalue is assigned to, not when
      <span class="Li">&quot;substr&quot;</span> itself is called. This makes a
      difference only if the return value of
      <span class="Li">&quot;substr&quot;</span> is referenced and later
      assigned to.</li>
  <li>Passing a substring of a read-only value or a typeglob to a function
      (potential lvalue context) no longer causes an immediate &quot;Can't
      coerce&quot; or &quot;Modification of a read-only value&quot; error. That
      error occurs only if the passed value is assigned to.
    <p class="Pp">The same thing happens with the &quot;substr outside of
        string&quot; error. If the lvalue is only read from, not written to, it
        is now just a warning, as with rvalue
        <span class="Li">&quot;substr&quot;</span>.</p>
  </li>
  <li><span class="Li">&quot;substr&quot;</span> assignments no longer call
      FETCH twice if the first argument is a tied variable, just once.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Support_for_embedded_nulls"><a class="permalink" href="#Support_for_embedded_nulls">Support
  for embedded nulls</a></h2>
Some parts of Perl did not work correctly with nulls (<span class="Li">&quot;chr
  0&quot;</span>) embedded in strings. That meant that, for instance,
  <span class="Li">&quot;$m = &quot;a\0b&quot;; foo-&gt;$m&quot;</span> would
  call the &quot;a&quot; method, instead of the actual method name contained in
  <span class="Li">$m</span>. These parts of perl have been fixed to support
  nulls:
<ul class="Bl-bullet">
  <li>Method names</li>
  <li>Typeglob names (including filehandle and subroutine names)</li>
  <li>Package names, including the return value of
      <span class="Li">&quot;ref()&quot;</span></li>
  <li>Typeglob elements
    (<span class="Li">*foo{&quot;THING\0stuff&quot;}</span>)</li>
  <li>Signal names</li>
  <li>Various warnings and error messages that mention variable names or values,
      methods, etc.</li>
</ul>
<p class="Pp">One side effect of these changes is that blessing into
    &quot;\0&quot; no longer causes <span class="Li">&quot;ref()&quot;</span> to
    return false.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Threading_bugs"><a class="permalink" href="#Threading_bugs">Threading
  bugs</a></h2>
<ul class="Bl-bullet">
  <li>Typeglobs returned from threads are no longer cloned if the parent thread
      already has a glob with the same name. This means that returned
      subroutines will now assign to the right package variables [perl
    #107366].</li>
  <li>Some cases of threads crashing due to memory allocation during cloning
      have been fixed [perl #90006].</li>
  <li>Thread joining would sometimes emit &quot;Attempt to free unreferenced
      scalar&quot; warnings if <span class="Li">&quot;caller&quot;</span> had
      been used from the <span class="Li">&quot;DB&quot;</span> package before
      thread creation [perl #98092].</li>
  <li>Locking a subroutine (via <span class="Li">&quot;lock
      &amp;sub&quot;</span>) is no longer a compile-time error for regular subs.
      For lvalue subroutines, it no longer tries to return the sub as a scalar,
      resulting in strange side effects like <span class="Li">&quot;ref
      \$_&quot;</span> returning &quot;CODE&quot; in some instances.
    <p class="Pp"><span class="Li">&quot;lock &amp;sub&quot;</span> is now a
        run-time error if threads::shared is loaded (a no-op otherwise), but
        that may be rectified in a future version.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Tied_variables"><a class="permalink" href="#Tied_variables">Tied
  variables</a></h2>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Various cases in which FETCH was being ignored or called too many times
      have been fixed:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li><span class="Li">&quot;PerlIO::get_layers&quot;</span> [perl #97956]</li>
  <li><span class="Li">&quot;$tied =~ y/a/b/&quot;</span>,
      <span class="Li">&quot;chop $tied&quot;</span> and
      <span class="Li">&quot;chomp $tied&quot;</span> when
      <span class="Li">$tied</span> holds a reference.</li>
  <li>When calling <span class="Li">&quot;local $_&quot;</span> [perl
    #105912]</li>
  <li>Four-argument <span class="Li">&quot;select&quot;</span></li>
  <li>A tied buffer passed to <span class="Li">&quot;sysread&quot;</span></li>
  <li><span class="Li">&quot;$tied .= &lt;&gt;&quot;</span></li>
  <li>Three-argument <span class="Li">&quot;open&quot;</span>, the third being a
      tied file handle (as in <span class="Li">&quot;open $fh,
      &quot;&gt;&amp;&quot;, $tied&quot;</span>)</li>
  <li><span class="Li">&quot;sort&quot;</span> with a reference to a tied glob
      for the comparison routine.</li>
  <li><span class="Li">&quot;..&quot;</span> and
      <span class="Li">&quot;...&quot;</span> in list context [perl
    #53554].</li>
  <li><span class="Li">&quot;${$tied}&quot;</span>,
      <span class="Li">&quot;@{$tied}&quot;</span>,
      <span class="Li">&quot;%{$tied}&quot;</span> and
      <span class="Li">&quot;*{$tied}&quot;</span> where the tied variable
      returns a string (<span class="Li">&quot;&amp;{}&quot;</span> was
      unaffected)</li>
  <li><span class="Li">&quot;defined ${ $tied_variable }&quot;</span></li>
  <li>Various functions that take a filehandle argument in rvalue context
      (<span class="Li">&quot;close&quot;</span>,
      <span class="Li">&quot;readline&quot;</span>, etc.) [perl #97482]</li>
  <li>Some cases of dereferencing a complex expression, such as
      <span class="Li">&quot;${ (), $tied } = 1&quot;</span>, used to call
      <span class="Li">&quot;FETCH&quot;</span> multiple times, but now call it
      once.</li>
  <li><span class="Li">&quot;$tied-&gt;method&quot;</span> where
      <span class="Li">$tied</span> returns a package name--even resulting in a
      failure to call the method, due to memory corruption</li>
  <li>Assignments like <span class="Li">&quot;*$tied =
      \&amp;{&quot;...&quot;}&quot;</span> and <span class="Li">&quot;*glob =
      $tied&quot;</span></li>
  <li><span class="Li">&quot;chdir&quot;</span>,
      <span class="Li">&quot;chmod&quot;</span>,
      <span class="Li">&quot;chown&quot;</span>,
      <span class="Li">&quot;utime&quot;</span>,
      <span class="Li">&quot;truncate&quot;</span>,
      <span class="Li">&quot;stat&quot;</span>,
      <span class="Li">&quot;lstat&quot;</span> and the filetest ops
      (<span class="Li">&quot;-r&quot;</span>,
      <span class="Li">&quot;-x&quot;</span>, etc.)</li>
</ul>
</div>
<div class="Bd-indent"></div>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;caller&quot;</span> sets
      <span class="Li">@DB::args</span> to the subroutine arguments when called
      from the DB package. It used to crash when doing so if
      <span class="Li">@DB::args</span> happened to be tied. Now it croaks
      instead.</li>
  <li>Tying an element of <span class="Li">%ENV</span> or
      <span class="Li">&quot;%^H&quot;</span> and then deleting that element
      would result in a call to the tie object's DELETE method, even though
      tying the element itself is supposed to be equivalent to tying a scalar
      (the element is, of course, a scalar) [perl #67490].</li>
  <li>When Perl autovivifies an element of a tied array or hash (which entails
      calling STORE with a new reference), it now calls FETCH immediately after
      the STORE, instead of assuming that FETCH would have returned the same
      reference. This can make it easier to implement tied objects [perl #35865,
      #43011].</li>
  <li>Four-argument <span class="Li">&quot;select&quot;</span> no longer
      produces its &quot;Non-string passed as bitmask&quot; warning on tied or
      tainted variables that are strings.</li>
  <li>Localizing a tied scalar that returns a typeglob no longer stops it from
      being tied till the end of the scope.</li>
  <li>Attempting to <span class="Li">&quot;goto&quot;</span> out of a tied
      handle method used to cause memory corruption or crashes. Now it produces
      an error message instead [perl #8611].</li>
  <li>A bug has been fixed that occurs when a tied variable is used as a
      subroutine reference: if the last thing assigned to or returned from the
      variable was a reference or typeglob, the
      <span class="Li">&quot;\&amp;$tied&quot;</span> could either crash or
      return the wrong subroutine. The reference case is a regression introduced
      in Perl 5.10.0. For typeglobs, it has probably never worked till now.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Version_objects_and_vstrings"><a class="permalink" href="#Version_objects_and_vstrings">Version
  objects and vstrings</a></h2>
<ul class="Bl-bullet">
  <li>The bitwise complement operator (and possibly other operators, too) when
      passed a vstring would leave vstring magic attached to the return value,
      even though the string had changed. This meant that
      <span class="Li">&quot;version-&gt;new(~v1.2.3)&quot;</span> would create
      a version looking like &quot;v1.2.3&quot; even though the string passed to
      <span class="Li">&quot;version-&gt;new&quot;</span> was actually
      &quot;\376\375\374&quot;. This also caused B::Deparse to deparse
      <span class="Li">&quot;~v1.2.3&quot;</span> incorrectly, without the
      <span class="Li">&quot;~&quot;</span> [perl #29070].</li>
  <li>Assigning a vstring to a magic (e.g., tied, <span class="Li">$!</span>)
      variable and then assigning something else used to blow away all magic.
      This meant that tied variables would come undone,
      <span class="Li">$!</span> would stop getting updated on failed system
      calls, <span class="Li">$|</span> would stop setting autoflush, and other
      mischief would take place. This has been fixed.</li>
  <li><span class="Li">&quot;version-&gt;new(&quot;version&quot;)&quot;</span>
      and <span class="Li">&quot;printf &quot;%vd&quot;,
      &quot;version&quot;&quot;</span> no longer crash [perl #102586].</li>
  <li>Version comparisons, such as those that happen implicitly with
      <span class="Li">&quot;use</span> <span class="Li">v5.43&quot;</span>, no
      longer cause locale settings to change [perl #105784].</li>
  <li>Version objects no longer cause memory leaks in boolean context [perl
      #109762].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Warnings,_redefinition"><a class="permalink" href="#Warnings,_redefinition">Warnings,
  redefinition</a></h2>
<ul class="Bl-bullet">
  <li>Subroutines from the <span class="Li">&quot;autouse&quot;</span> namespace
      are once more exempt from redefinition warnings. This used to work in
      5.005, but was broken in 5.6 for most subroutines. For subs created via XS
      that redefine subroutines from the
      <span class="Li">&quot;autouse&quot;</span> package, this stopped working
      in 5.10.</li>
  <li>New XSUBs now produce redefinition warnings if they overwrite existing
      subs, as they did in 5.8.x. (The
      <span class="Li">&quot;autouse&quot;</span> logic was reversed in 5.10-14.
      Only subroutines from the <span class="Li">&quot;autouse&quot;</span>
      namespace would warn when clobbered.)</li>
  <li><span class="Li">&quot;newCONSTSUB&quot;</span> used to use compile-time
      warning hints, instead of run-time hints. The following code should never
      produce a redefinition warning, but it used to, if
      <span class="Li">&quot;newCONSTSUB&quot;</span> redefined an existing
      subroutine:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    use warnings;
    BEGIN {
        no warnings;
        some_XS_function_that_calls_new_CONSTSUB();
    }
    </pre>
  </li>
  <li>Redefinition warnings for constant subroutines are on by default (what are
      known as severe warnings in perldiag). This occurred only when it was a
      glob assignment or declaration of a Perl subroutine that caused the
      warning. If the creation of XSUBs triggered the warning, it was not a
      default warning. This has been corrected.</li>
  <li>The internal check to see whether a redefinition warning should occur used
      to emit &quot;uninitialized&quot; warnings in cases like this:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    use warnings &quot;uninitialized&quot;;
    use constant {u =&gt; undef, v =&gt; undef};
    sub foo(){u}
    sub foo(){v}
    </pre>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Warnings,__Uninitialized_"><a class="permalink" href="#Warnings,__Uninitialized_">Warnings,
  &quot;Uninitialized&quot;</a></h2>
<ul class="Bl-bullet">
  <li>Various functions that take a filehandle argument in rvalue context
      (<span class="Li">&quot;close&quot;</span>,
      <span class="Li">&quot;readline&quot;</span>, etc.) used to warn twice for
      an undefined handle [perl #97482].</li>
  <li><span class="Li">&quot;dbmopen&quot;</span> now only warns once, rather
      than three times, if the mode argument is
      <span class="Li">&quot;undef&quot;</span> [perl #90064].</li>
  <li>The <span class="Li">&quot;+=&quot;</span> operator does not usually warn
      when the left-hand side is <span class="Li">&quot;undef&quot;</span>, but
      it was doing so for tied variables. This has been fixed [perl
    #44895].</li>
  <li>A bug fix in Perl 5.14 introduced a new bug, causing
      &quot;uninitialized&quot; warnings to report the wrong variable if the
      operator in question had two operands and one was
      <span class="Li">&quot;%{...}&quot;</span> or
      <span class="Li">&quot;@{...}&quot;</span>. This has been fixed [perl
      #103766].</li>
  <li><span class="Li">&quot;..&quot;</span> and
      <span class="Li">&quot;...&quot;</span> in list context now mention the
      name of the variable in &quot;uninitialized&quot; warnings for string (as
      opposed to numeric) ranges.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Weak_references"><a class="permalink" href="#Weak_references">Weak
  references</a></h2>
<ul class="Bl-bullet">
  <li>Weakening the first argument to an automatically-invoked
      <span class="Li">&quot;DESTROY&quot;</span> method could result in
      erroneous &quot;DESTROY created new reference&quot; errors or crashes. Now
      it is an error to weaken a read-only reference.</li>
  <li>Weak references to lexical hashes going out of scope were not going stale
      (becoming undefined), but continued to point to the hash.</li>
  <li>Weak references to lexical variables going out of scope are now broken
      before any magical methods (e.g., DESTROY on a tie object) are called.
      This prevents such methods from modifying the variable that will be seen
      the next time the scope is entered.</li>
  <li>Creating a weak reference to an <span class="Li">@ISA</span> array or
      accessing the array index (<span class="Li">$#ISA</span>) could result in
      confused internal bookkeeping for elements later added to the
      <span class="Li">@ISA</span> array. For instance, creating a weak
      reference to the element itself could push that weak reference on to
      <span class="Li">@ISA</span>; and elements added after use of
      <span class="Li">$#ISA</span> would be ignored by method lookup [perl
      #85670].</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Other_notable_fixes"><a class="permalink" href="#Other_notable_fixes">Other
  notable fixes</a></h2>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;quotemeta&quot;</span> now quotes consistently the
      same non-ASCII characters under <span class="Li">&quot;use feature
      'unicode_strings'&quot;</span>, regardless of whether the string is
      encoded in UTF-8 or not, hence fixing the last vestiges (we hope) of the
      notorious &quot;The &quot;Unicode Bug&quot;&quot; in perlunicode. [perl
      #77654].
    <p class="Pp">Which of these code points is quoted has changed, based on
        Unicode's recommendations. See &quot;quotemeta&quot; in perlfunc for
        details.</p>
  </li>
  <li><span class="Li">&quot;study&quot;</span> is now a no-op, presumably
      fixing all outstanding bugs related to study causing regex matches to
      behave incorrectly!</li>
  <li>When one writes <span class="Li">&quot;open foo || die&quot;</span>, which
      used to work in Perl 4, a &quot;Precedence problem&quot; warning is
      produced. This warning used erroneously to apply to fully-qualified
      bareword handle names not followed by
      <span class="Li">&quot;||&quot;</span>. This has been corrected.</li>
  <li>After package aliasing (<span class="Li">&quot;*foo:: =
      *bar::&quot;</span>), <span class="Li">&quot;select&quot;</span> with 0 or
      1 argument would sometimes return a name that could not be used to refer
      to the filehandle, or sometimes it would return
      <span class="Li">&quot;undef&quot;</span> even when a filehandle was
      selected. Now it returns a typeglob reference in such cases.</li>
  <li><span class="Li">&quot;PerlIO::get_layers&quot;</span> no longer ignores
      some arguments that it thinks are numeric, while treating others as
      filehandle names. It is now consistent for flat scalars (i.e., not
      references).</li>
  <li>Unrecognized switches on <span class="Li">&quot;#!&quot;</span> line
    <p class="Pp">If a switch, such as <b>-x</b>, that cannot occur on the
        <span class="Li">&quot;#!&quot;</span> line is used there, perl dies
        with &quot;Can't emulate...&quot;.</p>
    <p class="Pp">It used to produce the same message for switches that perl did
        not recognize at all, whether on the command line or the
        <span class="Li">&quot;#!&quot;</span> line.</p>
    <p class="Pp">Now it produces the &quot;Unrecognized switch&quot; error
        message [perl #104288].</p>
  </li>
  <li><span class="Li">&quot;system&quot;</span> now temporarily blocks the
      SIGCHLD signal handler, to prevent the signal handler from stealing the
      exit status [perl #105700].</li>
  <li>The <span class="Li">%n</span> formatting code for
      <span class="Li">&quot;printf&quot;</span> and
      <span class="Li">&quot;sprintf&quot;</span>, which causes the number of
      characters to be assigned to the next argument, now actually assigns the
      number of characters, instead of the number of bytes.
    <p class="Pp">It also works now with special lvalue functions like
        <span class="Li">&quot;substr&quot;</span> and with nonexistent hash and
        array elements [perl #3471, #103492].</p>
  </li>
  <li>Perl skips copying values returned from a subroutine, for the sake of
      speed, if doing so would make no observable difference. Because of faulty
      logic, this would happen with the result of
      <span class="Li">&quot;delete&quot;</span>,
      <span class="Li">&quot;shift&quot;</span> or
      <span class="Li">&quot;splice&quot;</span>, even if the result was
      referenced elsewhere. It also did so with tied variables about to be freed
      [perl #91844, #95548].</li>
  <li><span class="Li">&quot;utf8::decode&quot;</span> now refuses to modify
      read-only scalars [perl #91850].</li>
  <li>Freeing <span class="Li">$_</span> inside a
      <span class="Li">&quot;grep&quot;</span> or
      <span class="Li">&quot;map&quot;</span> block, a code block embedded in a
      regular expression, or an <span class="Li">@INC</span> filter (a
      subroutine returned by a subroutine in <span class="Li">@INC</span>) used
      to result in double frees or crashes [perl #91880, #92254, #92256].</li>
  <li><span class="Li">&quot;eval&quot;</span> returns
      <span class="Li">&quot;undef&quot;</span> in scalar context or an empty
      list in list context when there is a run-time error. When
      <span class="Li">&quot;eval&quot;</span> was passed a string in list
      context and a syntax error occurred, it used to return a list containing a
      single undefined element. Now it returns an empty list in list context for
      all errors [perl #80630].</li>
  <li><span class="Li">&quot;goto &amp;func&quot;</span> no longer crashes, but
      produces an error message, when the unwinding of the current subroutine's
      scope fires a destructor that undefines the subroutine being
      &quot;goneto&quot; [perl #99850].</li>
  <li>Perl now holds an extra reference count on the package that code is
      currently compiling in. This means that the following code no longer
      crashes [perl #101486]:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    package Foo;
    BEGIN {*Foo:: = *Bar::}
    sub foo;
    </pre>
  </li>
  <li>The <span class="Li">&quot;x&quot;</span> repetition operator no longer
      crashes on 64-bit builds with large repeat counts [perl #94560].</li>
  <li>Calling <span class="Li">&quot;require&quot;</span> on an implicit
      <span class="Li">$_</span> when
      <span class="Li">*CORE::GLOBAL::require</span> has been overridden does
      not segfault anymore, and <span class="Li">$_</span> is now passed to the
      overriding subroutine [perl #78260].</li>
  <li><span class="Li">&quot;use&quot;</span> and
      <span class="Li">&quot;require&quot;</span> are no longer affected by the
      I/O layers active in the caller's scope (enabled by open.pm) [perl
      #96008].</li>
  <li><span class="Li">&quot;our $::e; $e&quot;</span> (which is invalid) no
      longer produces the &quot;Compilation error at lib/utf8_heavy.pl...&quot;
      error message, which it started emitting in 5.10.0 [perl #99984].</li>
  <li>On 64-bit systems, <span class="Li">&quot;read()&quot;</span> now
      understands large string offsets beyond the 32-bit range.</li>
  <li>Errors that occur when processing subroutine attributes no longer cause
      the subroutine's op tree to leak.</li>
  <li>Passing the same constant subroutine to both
      <span class="Li">&quot;index&quot;</span> and
      <span class="Li">&quot;formline&quot;</span> no longer causes one or the
      other to fail [perl #89218]. (5.14.1)</li>
  <li>List assignment to lexical variables declared with attributes in the same
      statement (<span class="Li">&quot;my ($x,@y) : blimp =
      (72,94)&quot;</span>) stopped working in Perl 5.8.0. It has now been
      fixed.</li>
  <li>Perl 5.10.0 introduced some faulty logic that made &quot;U*&quot; in the
      middle of a pack template equivalent to &quot;U0&quot; if the input string
      was empty. This has been fixed [perl #90160]. (5.14.2)</li>
  <li>Destructors on objects were not called during global destruction on
      objects that were not referenced by any scalars. This could happen if an
      array element were blessed (e.g., <span class="Li">&quot;bless
      \$a[0]&quot;</span>) or if a closure referenced a blessed variable
      (<span class="Li">&quot;bless \my @a; sub foo { @a }&quot;</span>).
    <p class="Pp">Now there is an extra pass during global destruction to fire
        destructors on any objects that might be left after the usual passes
        that check for objects referenced by scalars [perl #36347].</p>
  </li>
  <li>Fixed a case where it was possible that a freed buffer may have been read
      from when parsing a here document [perl #90128]. (5.14.1)</li>
  <li><span class="Li">&quot;each(</span><i>ARRAY</i><span class="Li">)&quot;</span>
      is now wrapped in <span class="Li">&quot;defined(...)&quot;</span>, like
      <span class="Li">&quot;each(</span><i>HASH</i><span class="Li">)&quot;</span>,
      inside a <span class="Li">&quot;while&quot;</span> condition [perl
      #90888].</li>
  <li>A problem with context propagation when a
      <span class="Li">&quot;do&quot;</span> block is an argument to
      <span class="Li">&quot;return&quot;</span> has been fixed. It used to
      cause <span class="Li">&quot;undef&quot;</span> to be returned in certain
      cases of a <span class="Li">&quot;return&quot;</span> inside an
      <span class="Li">&quot;if&quot;</span> block which itself is followed by
      another <span class="Li">&quot;return&quot;</span>.</li>
  <li>Calling <span class="Li">&quot;index&quot;</span> with a tainted constant
      no longer causes constants in subsequently compiled code to become tainted
      [perl #64804].</li>
  <li>Infinite loops like <span class="Li">&quot;1 while 1&quot;</span> used to
      stop <span class="Li">&quot;strict 'subs'&quot;</span> mode from working
      for the rest of the block.</li>
  <li>For list assignments like <span class="Li">&quot;($a,$b) =
      ($b,$a)&quot;</span>, Perl has to make a copy of the items on the
      right-hand side before assignment them to the left. For efficiency's sake,
      it assigns the values on the right straight to the items on the left if no
      one variable is mentioned on both sides, as in
      <span class="Li">&quot;($a,$b) =</span>
      <span class="Li">($c,$d)&quot;</span>. The logic for determining when it
      can cheat was faulty, in that
      <span class="Li">&quot;&amp;&amp;&quot;</span> and
      <span class="Li">&quot;||&quot;</span> on the right-hand side could fool
      it. So <span class="Li">&quot;($a,$b) =</span>
      <span class="Li">$some_true_value &amp;&amp; ($b,$a)&quot;</span> would
      end up assigning the value of <span class="Li">$b</span> to both
    scalars.</li>
  <li>Perl no longer tries to apply lvalue context to the string in
      <span class="Li">&quot;(&quot;string&quot;, $variable) ||= 1&quot;</span>
      (which used to be an error). Since the left-hand side of
      <span class="Li">&quot;||=&quot;</span> is evaluated in scalar context,
      that's a scalar comma operator, which gives all but the last item void
      context. There is no such thing as void lvalue context, so it was a
      mistake for Perl to try to force it [perl #96942].</li>
  <li><span class="Li">&quot;caller&quot;</span> no longer leaks memory when
      called from the DB package if <span class="Li">@DB::args</span> was
      assigned to after the first call to
      <span class="Li">&quot;caller&quot;</span>. Carp was triggering this bug
      [perl #97010]. (5.14.2)</li>
  <li><span class="Li">&quot;close&quot;</span> and similar filehandle
      functions, when called on built-in global variables (like
      <span class="Li">$+</span>), used to die if the variable happened to hold
      the undefined value, instead of producing the usual &quot;Use of
      uninitialized value&quot; warning.</li>
  <li>When autovivified file handles were introduced in Perl 5.6.0,
      <span class="Li">&quot;readline&quot;</span> was inadvertently made to
      autovivify when called as
      <span class="Li">&quot;readline($foo)&quot;</span> (but not as
      <span class="Li">&quot;&lt;$foo&gt;&quot;</span>). It has now been fixed
      never to autovivify.</li>
  <li>Calling an undefined anonymous subroutine (e.g., what
      <span class="Li">$x</span> holds after <span class="Li">&quot;undef
      &amp;{$x = sub{}}&quot;</span>) used to cause a &quot;Not a CODE
      reference&quot; error, which has been corrected to &quot;Undefined
      subroutine called&quot; [perl #71154].</li>
  <li>Causing <span class="Li">@DB::args</span> to be freed between uses of
      <span class="Li">&quot;caller&quot;</span> no longer results in a crash
      [perl #93320].</li>
  <li><span class="Li">&quot;setpgrp($foo)&quot;</span> used to be equivalent to
      <span class="Li">&quot;($foo, setpgrp)&quot;</span>, because
      <span class="Li">&quot;setpgrp&quot;</span> was ignoring its argument if
      there was just one. Now it is equivalent to
      <span class="Li">&quot;setpgrp($foo,0)&quot;</span>.</li>
  <li><span class="Li">&quot;shmread&quot;</span> was not setting the scalar
      flags correctly when reading from shared memory, causing the existing
      cached numeric representation in the scalar to persist [perl #98480].</li>
  <li><span class="Li">&quot;++&quot;</span> and
      <span class="Li">&quot;--&quot;</span> now work on copies of globs,
      instead of dying.</li>
  <li><span class="Li">&quot;splice()&quot;</span> doesn't warn when truncating
    <p class="Pp">You can now limit the size of an array using
        <span class="Li">&quot;splice(@a,MAX_LEN)&quot;</span> without worrying
        about warnings.</p>
  </li>
  <li><span class="Li">$$</span> is no longer tainted. Since this value comes
      directly from <span class="Li">&quot;getpid()&quot;</span>, it is always
      safe.</li>
  <li>The parser no longer leaks a filehandle if STDIN was closed before parsing
      started [perl #37033].</li>
  <li><span class="Li">&quot;die;&quot;</span> with a non-reference, non-string,
      or magical (e.g., tainted) value in $@ now properly propagates that value
      [perl #111654].</li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Known_Problems"><a class="permalink" href="#Known_Problems">Known
  Problems</a></h1>
<ul class="Bl-bullet">
  <li>On Solaris, we have two kinds of failure.
    <p class="Pp">If <i>make</i> is Sun's <i>make</i>, we get an error about a
        badly formed macro assignment in the <i>Makefile</i>. That happens when
        <i>./Configure</i> tries to make depends. <i>Configure</i> then exits 0,
        but further <i>make</i>-ing fails.</p>
    <p class="Pp">If <i>make</i> is <i>gmake</i>, <i>Configure</i> completes,
        then we get errors related to <i>/usr/include/stdbool.h</i></p>
  </li>
  <li>On Win32, a number of tests hang unless STDERR is redirected. The cause of
      this is still under investigation.</li>
  <li>When building as root with a umask that prevents files from being
      other-readable, <i>t/op/filetest.t</i> will fail. This is a test bug, not
      a bug in perl's behavior.</li>
  <li>Configuring with a recent gcc and link-time-optimization, such as
      <span class="Li">&quot;Configure -Doptimize='-O2 -flto'&quot;</span> fails
      because the optimizer optimizes away some of Configure's tests. A
      workaround is to omit the <span class="Li">&quot;-flto&quot;</span> flag
      when running Configure, but add it back in while actually building,
      something like
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    sh Configure -Doptimize=-O2                                             
    make OPTIMIZE='-O2 -flto'
    </pre>
  </li>
  <li>The following CPAN modules have test failures with perl 5.16. Patches have
      been submitted for all of these, so hopefully there will be new releases
      soon:</li>
</ul>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>Date::Pcalc version 6.1</li>
  <li>Module::CPANTS::Analyse version 0.85
    <p class="Pp">This fails due to problems in Module::Find 0.10 and
        File::MMagic 1.27.</p>
  </li>
  <li>PerlIO::Util version 0.72</li>
</ul>
</div>
<div class="Bd-indent"></div>
</section>
<section class="Sh">
<h1 class="Sh" id="Acknowledgements"><a class="permalink" href="#Acknowledgements">Acknowledgements</a></h1>
Perl 5.16.0 represents approximately 12 months of development since Perl 5.14.0
  and contains approximately 590,000 lines of changes across 2,500 files from
  139 authors.
<p class="Pp">Perl continues to flourish into its third decade thanks to a
    vibrant community of users and developers. The following people are known to
    have contributed the improvements that became Perl 5.16.0:</p>
<p class="Pp">Aaron Crane, Abhijit Menon-Sen, Abigail, Alan Haggai Alavi,
    Alberto Simo~es, Alexandr Ciornii, Andreas Koenig, Andy Dougherty, Aristotle
    Pagaltzis, Bo Johansson, Bo Lindbergh, Breno G. de Oliveira, brian d foy,
    Brian Fraser, Brian Greenfield, Carl Hayter, Chas. Owens, Chia-liang Kao,
    Chip Salzenberg, Chris 'BinGOs' Williams, Christian Hansen, Christopher J.
    Madsen, chromatic, Claes Jacobsson, Claudio Ramirez, Craig A. Berry, Damian
    Conway, Daniel Kahn Gillmor, Darin McBride, Dave Rolsky, David Cantrell,
    David Golden, David Leadbeater, David Mitchell, Dee Newcum, Dennis
    Kaarsemaker, Dominic Hargreaves, Douglas Christopher Wilson, Eric Brine,
    Father Chrysostomos, Florian Ragwitz, Frederic Briere, George Greer, Gerard
    Goossen, Gisle Aas, H.Merijn Brand, Hojung Youn, Ian Goodacre, James E
    Keenan, Jan Dubois, Jerry D. Hedden, Jesse Luehrs, Jesse Vincent, Jilles
    Tjoelker, Jim Cromie, Jim Meyering, Joel Berger, Johan Vromans, Johannes
    Plunien, John Hawkinson, John P. Linderman, John Peacock, Joshua ben Jore,
    Juerd Waalboer, Karl Williamson, Karthik Rajagopalan, Keith Thompson, Kevin
    J. Woolley, Kevin Ryde, Laurent Dami, Leo Lapworth, Leon Brocard, Leon
    Timmermans, Louis Strous, Lukas Mai, Marc Green, Marcel Gruenauer, Mark A.
    Stratman, Mark Dootson, Mark Jason Dominus, Martin Hasch, Matthew Horsfall,
    Max Maischein, Michael G Schwern, Michael Witten, Mike Sheldrake, Moritz
    Lenz, Nicholas Clark, Niko Tyni, Nuno Carvalho, Pau Amma, Paul Evans, Paul
    Green, Paul Johnson, Perlover, Peter John Acklam, Peter Martini, Peter
    Scott, Phil Monsen, Pino Toscano, Rafael Garcia-Suarez, Rainer Tammer, Reini
    Urban, Ricardo Signes, Robin Barker, Rodolfo Carvalho, Salvador Fandin~o,
    Sam Kimbrel, Samuel Thibault, Shawn M Moore, Shigeya Suzuki, Shirakata
    Kentaro, Shlomi Fish, Sisyphus, Slaven Rezic, Spiros Denaxas, Steffen
    Mueller, Steffen Schwigon, Stephen Bennett, Stephen Oberholtzer, Stevan
    Little, Steve Hay, Steve Peters, Thomas Sibley, Thorsten Glaser, Timothe
    Litt, Todd Rinaldo, Tom Christiansen, Tom Hukins, Tony Cook, Vadim
    Konovalov, Vincent Pit, Vladimir Timofeev, Walt Mankowski, Yves Orton,
    Zefram, Zsban Ambrus, AEvar Arnfjoerd` Bjarmason.</p>
<p class="Pp">The list above is almost certainly incomplete as it is
    automatically generated from version control history. In particular, it does
    not include the names of the (very much appreciated) contributors who
    reported issues to the Perl bug tracker.</p>
<p class="Pp">Many of the changes included in this version originated in the
    CPAN modules included in Perl's core. We're grateful to the entire CPAN
    community for helping Perl to flourish.</p>
<p class="Pp">For a more complete list of all of Perl's historical contributors,
    please see the <i>AUTHORS</i> file in the Perl source distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Reporting_Bugs"><a class="permalink" href="#Reporting_Bugs">Reporting
  Bugs</a></h1>
If you find what you think is a bug, you might check the articles recently
  posted to the comp.lang.perl.misc newsgroup and the perl bug database at
  &lt;http://rt.perl.org/perlbug/&gt;. There may also be information at
  &lt;http://www.perl.org/&gt;, the Perl Home Page.
<p class="Pp">If you believe you have an unreported bug, please run the perlbug
    program included with your release. Be sure to trim your bug down to a tiny
    but sufficient test case. Your bug report, along with the output of
    <span class="Li">&quot;perl -V&quot;</span>, will be sent off to
    perlbug@perl.org to be analysed by the Perl porting team.</p>
<p class="Pp">If the bug you are reporting has security implications, which make
    it inappropriate to send to a publicly archived mailing list, then please
    send it to perl5-security-report@perl.org. This points to a closed
    subscription unarchived mailing list, which includes all core committers,
    who will be able to help assess the impact of issues, figure out a
    resolution, and help co-ordinate the release of patches to mitigate or fix
    the problem across all platforms on which Perl is supported. Please use this
    address only for security issues in the Perl core, not for modules
    independently distributed on CPAN.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
The <i>Changes</i> file for an explanation of how to view exhaustive details on
  what changed.
<p class="Pp">The <i>INSTALL</i> file for how to build Perl.</p>
<p class="Pp">The <i>README</i> file for general stuff.</p>
<p class="Pp">The <i>Artistic</i> and <i>Copying</i> files for copyright
    information.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-03-01</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
