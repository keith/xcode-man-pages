<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>rsync(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">rsync(1)</td>
    <td class="head-vol"></td>
    <td class="head-rtitle">rsync(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">rsync - faster, flexible replacement for rcp</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">rsync [OPTION]... SRC [SRC]... DEST</p>
<p class="Pp">rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST</p>
<p class="Pp">rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST</p>
<p class="Pp">rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST</p>
<p class="Pp">rsync [OPTION]... SRC</p>
<p class="Pp">rsync [OPTION]... [USER@]HOST:SRC [DEST]</p>
<p class="Pp">rsync [OPTION]... [USER@]HOST::SRC [DEST]</p>
<p class="Pp">rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The version of rsync described by this man page, samba rsync, is
    in the process of being replaced by openrsync. When /usr/bin/rsync is
    invoked, the actual implementation that is executed will depend on the set
    of flags passed on the command-line.</p>
<p class="Pp">There are two ways to force a specific rsync implementation to be
    selected. To change the default system-wide, a symlink may be placed at
    /var/select/rsync with a target of either &quot;rsync_samba&quot; for this
    version of rsync, or &quot;rsync_openrsync&quot; for openrsync. To select a
    specific implementation for a single invocation of rsync, the CHOSEN_RSYNC
    environment variable may be set to either &quot;rsync_samba&quot; or
    &quot;rsync_openrsync&quot; as with the /var/select symlink.</p>
<p class="Pp">rsync is a program that behaves in much the same way that rcp
    does, but has many more options and uses the rsync remote-update protocol to
    greatly speed up file transfers when the destination file is being
  updated.</p>
<p class="Pp">The rsync remote-update protocol allows rsync to transfer just the
    differences between two sets of files across the network connection, using
    an efficient checksum-search algorithm described in the technical report
    that accompanies this package.</p>
<p class="Pp">Some of the additional features of rsync are:</p>
<dl class="Bl-tag">
  <dt id="o"><a class="permalink" href="#o">o</a></dt>
  <dd>support for copying links, devices, owners, groups, and permissions</dd>
  <dt id="o~2"><a class="permalink" href="#o~2">o</a></dt>
  <dd>exclude and exclude-from options similar to GNU tar</dd>
  <dt id="o~3"><a class="permalink" href="#o~3">o</a></dt>
  <dd>a CVS exclude mode for ignoring the same files that CVS would ignore</dd>
  <dt id="o~4"><a class="permalink" href="#o~4">o</a></dt>
  <dd>can use any transparent remote shell, including ssh or rsh</dd>
  <dt id="o~5"><a class="permalink" href="#o~5">o</a></dt>
  <dd>does not require super-user privileges</dd>
  <dt id="o~6"><a class="permalink" href="#o~6">o</a></dt>
  <dd>pipelining of file transfers to minimize latency costs</dd>
  <dt id="o~7"><a class="permalink" href="#o~7">o</a></dt>
  <dd>support for anonymous or authenticated rsync daemons (ideal for mirroring)
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="GENERAL"><a class="permalink" href="#GENERAL">GENERAL</a></h1>
<p class="Pp">Rsync copies files either to or from a remote host, or locally on
    the current host (it does not support copying files between two remote
    hosts).</p>
<p class="Pp">There are two different ways for rsync to contact a remote system:
    using a remote-shell program as the transport (such as ssh or rsh) or
    contacting an rsync daemon directly via TCP. The remote-shell transport is
    used whenever the source or destination path contains a single colon (:)
    separator after a host specification. Contacting an rsync daemon directly
    happens when the source or destination path contains a double colon (::)
    separator after a host specification, OR when an rsync:// URL is specified
    (see also the &quot;USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL
    CONNECTION&quot; section for an exception to this latter rule).</p>
<p class="Pp">As a special case, if a single source arg is specified without a
    destination, the files are listed in an output format similar to &quot;ls
    -l&quot;.</p>
<p class="Pp">As expected, if neither the source or destination path specify a
    remote host, the copy occurs locally (see also the <b>--list-only</b>
    option).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SETUP"><a class="permalink" href="#SETUP">SETUP</a></h1>
<p class="Pp">See the file README for installation instructions.</p>
<p class="Pp">Once installed, you can use rsync to any machine that you can
    access via a remote shell (as well as some that you can access using the
    rsync daemon-mode protocol). For remote transfers, a modern rsync uses ssh
    for its communications, but it may have been configured to use a different
    remote shell by default, such as rsh or remsh.</p>
<p class="Pp">You can also specify any remote shell you like, either by using
    the <b>-e</b> command line option, or by setting the RSYNC_RSH environment
    variable.</p>
<p class="Pp">Note that rsync must be installed on both the source and
    destination machines.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USAGE"><a class="permalink" href="#USAGE">USAGE</a></h1>
<p class="Pp">You use rsync in the same way you use rcp. You must specify a
    source and a destination, one of which may be remote.</p>
<p class="Pp">Perhaps the best way to explain the syntax is with some
  examples:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -t *.c foo:src/</span></div>
<p class="Pp"></p>
<p class="Pp">This would transfer all files matching the pattern *.c from the
    current directory to the directory src on the machine foo. If any of the
    files already exist on the remote system then the rsync remote-update
    protocol is used to update the file by sending only the differences. See the
    tech report for details.</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -avz foo:src/bar
  /data/tmp</span></div>
<p class="Pp"></p>
<p class="Pp">This would recursively transfer all files from the directory
    src/bar on the machine foo into the /data/tmp/bar directory on the local
    machine. The files are transferred in &quot;archive&quot; mode, which
    ensures that symbolic links, devices, attributes, permissions, ownerships,
    etc. are preserved in the transfer. Additionally, compression will be used
    to reduce the size of data portions of the transfer.</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -avz foo:src/bar/
  /data/tmp</span></div>
<p class="Pp"></p>
<p class="Pp">A trailing slash on the source changes this behavior to avoid
    creating an additional directory level at the destination. You can think of
    a trailing / on a source as meaning &quot;copy the contents of this
    directory&quot; as opposed to &quot;copy the directory by name&quot;, but in
    both cases the attributes of the containing directory are transferred to the
    containing directory on the destination. In other words, each of the
    following commands copies the files in the same way, including their setting
    of the attributes of /dest/foo:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -av /src/foo /dest</span>
<br/>
<span class="Li">rsync -av /src/foo/ /dest/foo</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">Note also that host and module references don't require a trailing
    slash to copy the contents of the default directory. For example, both of
    these copy the remote directory's contents into &quot;/dest&quot;:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -av host: /dest</span>
<br/>
<span class="Li">rsync -av host::module /dest</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">You can also use rsync in local-only mode, where both the source
    and destination don't have a ':' in the name. In this case it behaves like
    an improved copy command.</p>
<p class="Pp">Finally, you can list all the (listable) modules available from a
    particular rsync daemon by leaving off the module name:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync
  somehost.mydomain.com::</span></div>
<p class="Pp"></p>
<p class="Pp">See the following section for more details.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ADVANCED_USAGE"><a class="permalink" href="#ADVANCED_USAGE">ADVANCED
  USAGE</a></h1>
<p class="Pp">The syntax for requesting multiple files from a remote host
    involves using quoted spaces in the SRC. Some examples:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync host::'modname/dir1/file1
  modname/dir2/file2' /dest</span></div>
<p class="Pp"></p>
<p class="Pp">This would copy file1 and file2 into /dest from an rsync daemon.
    Each additional arg must include the same &quot;modname/&quot; prefix as the
    first one, and must be preceded by a single space. All other spaces are
    assumed to be a part of the filenames.</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -av host:'dir1/file1 dir2/file2'
  /dest</span></div>
<p class="Pp"></p>
<p class="Pp">This would copy file1 and file2 into /dest using a remote shell.
    This word-splitting is done by the remote shell, so if it doesn't work it
    means that the remote shell isn't configured to split its args based on
    whitespace (a very rare setting, but not unknown). If you need to transfer a
    filename that contains whitespace, you'll need to either escape the
    whitespace in a way that the remote shell will understand, or use wildcards
    in place of the spaces. Two examples of this are:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -av host:'file\ name\ with\
  spaces' /dest</span>
<br/>
<span class="Li">rsync -av host:file?name?with?spaces /dest</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">This latter example assumes that your shell passes through
    unmatched wildcards. If it complains about &quot;no match&quot;, put the
    name in quotes.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONNECTING_TO_AN_RSYNC_DAEMON"><a class="permalink" href="#CONNECTING_TO_AN_RSYNC_DAEMON">CONNECTING
  TO AN RSYNC DAEMON</a></h1>
<p class="Pp">It is also possible to use rsync without a remote shell as the
    transport. In this case you will directly connect to a remote rsync daemon,
    typically using TCP port 873. (This obviously requires the daemon to be
    running on the remote system, so refer to the STARTING AN RSYNC DAEMON TO
    ACCEPT CONNECTIONS section below for information on that.)</p>
<p class="Pp">Using rsync in this way is the same as using it with a remote
    shell except that:</p>
<dl class="Bl-tag">
  <dt id="o~8"><a class="permalink" href="#o~8">o</a></dt>
  <dd>you either use a double colon :: instead of a single colon to separate the
      hostname from the path, or you use an rsync:// URL.</dd>
  <dt id="o~9"><a class="permalink" href="#o~9">o</a></dt>
  <dd>the first word of the &quot;path&quot; is actually a module name.</dd>
  <dt id="o~10"><a class="permalink" href="#o~10">o</a></dt>
  <dd>the remote daemon may print a message of the day when you connect.</dd>
  <dt id="o~11"><a class="permalink" href="#o~11">o</a></dt>
  <dd>if you specify no path name on the remote daemon then the list of
      accessible paths on the daemon will be shown.</dd>
  <dt id="o~12"><a class="permalink" href="#o~12">o</a></dt>
  <dd>if you specify no local destination then a listing of the specified files
      on the remote daemon is provided.</dd>
  <dt id="o~13"><a class="permalink" href="#o~13">o</a></dt>
  <dd>you must not specify the <b>--rsh</b> (<b>-e</b>) option.
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">An example that copies all the files in a remote module named
    &quot;src&quot;:</p>
<p class="Pp"></p>
<pre>
<br/>
    rsync -av host::src /dest</pre>
<p class="Pp"></p>
<p class="Pp">Some modules on the remote daemon may require authentication. If
    so, you will receive a password prompt when you connect. You can avoid the
    password prompt by setting the environment variable RSYNC_PASSWORD to the
    password you want to use or using the <b>--password-file</b> option. This
    may be useful when scripting rsync.</p>
<p class="Pp">WARNING: On some systems environment variables are visible to all
    users. On those systems using <b>--password-file</b> is recommended.</p>
<p class="Pp">You may establish the connection via a web proxy by setting the
    environment variable RSYNC_PROXY to a hostname:port pair pointing to your
    web proxy. Note that your web proxy's configuration must support proxy
    connections to port 873.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_RSYNC-DAEMON_FEATURES_VIA_A_REMOTE-SHELL_CONNECTION"><a class="permalink" href="#USING_RSYNC-DAEMON_FEATURES_VIA_A_REMOTE-SHELL_CONNECTION">USING
  RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION</a></h1>
<p class="Pp">It is sometimes useful to use various features of an rsync daemon
    (such as named modules) without actually allowing any new socket connections
    into a system (other than what is already required to allow remote-shell
    access). Rsync supports connecting to a host using a remote shell and then
    spawning a single-use &quot;daemon&quot; server that expects to read its
    config file in the home dir of the remote user. This can be useful if you
    want to encrypt a daemon-style transfer's data, but since the daemon is
    started up fresh by the remote user, you may not be able to use features
    such as chroot or change the uid used by the daemon. (For another way to
    encrypt a daemon transfer, consider using ssh to tunnel a local port to a
    remote machine and configure a normal rsync daemon on that remote host to
    only allow connections from &quot;localhost&quot;.)</p>
<p class="Pp">From the user's perspective, a daemon transfer via a remote-shell
    connection uses nearly the same command-line syntax as a normal rsync-daemon
    transfer, with the only exception being that you must explicitly set the
    remote shell program on the command-line with the <b>--rsh=COMMAND</b>
    option. (Setting the RSYNC_RSH in the environment will not turn on this
    functionality.) For example:</p>
<p class="Pp"></p>
<pre>
<br/>
    rsync -av --rsh=ssh host::module /dest</pre>
<p class="Pp"></p>
<p class="Pp">If you need to specify a different remote-shell user, keep in mind
    that the user@ prefix in front of the host is specifying the rsync-user
    value (for a module that requires user-based authentication). This means
    that you must give the '-l user' option to ssh when specifying the
    remote-shell, as in this example that uses the short version of the
    <b>--rsh</b> option:</p>
<p class="Pp"></p>
<pre>
<br/>
    rsync -av -e &quot;ssh -l ssh-user&quot; rsync-user@host::module /dest</pre>
<p class="Pp"></p>
<p class="Pp">The &quot;ssh-user&quot; will be used at the ssh level; the
    &quot;rsync-user&quot; will be used to log-in to the &quot;module&quot;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STARTING_AN_RSYNC_DAEMON_TO_ACCEPT_CONNECTIONS"><a class="permalink" href="#STARTING_AN_RSYNC_DAEMON_TO_ACCEPT_CONNECTIONS">STARTING
  AN RSYNC DAEMON TO ACCEPT CONNECTIONS</a></h1>
<p class="Pp">In order to connect to an rsync daemon, the remote system needs to
    have a daemon already running (or it needs to have configured something like
    inetd to spawn an rsync daemon for incoming connections on a particular
    port). For full information on how to start a daemon that will handling
    incoming socket connections, see the <b>rsyncd.conf</b>(5) man page -- that
    is the config file for the daemon, and it contains the full details for how
    to run the daemon (including stand-alone and inetd configurations).</p>
<p class="Pp">If you're using one of the remote-shell transports for the
    transfer, there is no need to manually start an rsync daemon.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Here are some examples of how I use rsync.</p>
<p class="Pp">To backup my wife's home directory, which consists of large MS
    Word files and mail folders, I use a cron job that runs</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -Cavz .
  arvidsjaur:backup</span></div>
<p class="Pp"></p>
<p class="Pp">each night over a PPP connection to a duplicate directory on my
    machine &quot;arvidsjaur&quot;.</p>
<p class="Pp">To synchronize my samba source trees I use the following Makefile
    targets:</p>
<p class="Pp"></p>
<pre>
<br/>
    get:
<br/>
            rsync -avuzb --exclude '*~' samba:samba/ .
<br/>
    put:
<br/>
            rsync -Cavuzb . samba:samba/
<br/>
    sync: get put</pre>
<p class="Pp"></p>
<p class="Pp">this allows me to sync with a CVS directory at the other end of
    the connection. I then do CVS operations on the remote machine, which saves
    a lot of time as the remote CVS protocol isn't very efficient.</p>
<p class="Pp">I mirror a directory between my &quot;old&quot; and
    &quot;new&quot; ftp sites with the command:</p>
<p class="Pp"><span class="Li">rsync -az -e ssh --delete ~ftp/pub/samba
    nimbus:&quot;~ftp/pub/tridge&quot;</span></p>
<p class="Pp">This is launched from cron every few hours.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS_SUMMARY"><a class="permalink" href="#OPTIONS_SUMMARY">OPTIONS
  SUMMARY</a></h1>
<p class="Pp">Here is a short summary of the options available in rsync. Please
    refer to the detailed description below for a complete description.</p>
<pre>
<br/>
 -v, --verbose               increase verbosity
<br/>
 -q, --quiet                 suppress non-error messages
<br/>
     --no-motd               suppress daemon-mode MOTD (see caveat)
<br/>
 -c, --checksum              skip based on checksum, not mod-time &amp; size
<br/>
 -a, --archive               archive mode; same as -rlptgoD (no -H)
<br/>
     --no-OPTION             turn off an implied OPTION (e.g. --no-D)
<br/>
 -r, --recursive             recurse into directories
<br/>
 -R, --relative              use relative path names
<br/>
     --no-implied-dirs       don't send implied dirs with --relative
<br/>
 -b, --backup                make backups (see --suffix &amp; --backup-dir)
<br/>
     --backup-dir=DIR        make backups into hierarchy based in DIR
<br/>
     --suffix=SUFFIX         backup suffix (default ~ w/o --backup-dir)
<br/>
 -u, --update                skip files that are newer on the receiver
<br/>
     --inplace               update destination files in-place
<br/>
     --append                append data onto shorter files
<br/>
 -d, --dirs                  transfer directories without recursing
<br/>
 -l, --links                 copy symlinks as symlinks
<br/>
 -L, --copy-links            transform symlink into referent file/dir
<br/>
     --copy-unsafe-links     only &quot;unsafe&quot; symlinks are transformed
<br/>
     --safe-links            ignore symlinks that point outside the tree
<br/>
 -k, --copy-dirlinks         transform symlink to dir into referent dir
<br/>
 -K, --keep-dirlinks         treat symlinked dir on receiver as dir
<br/>
 -H, --hard-links            preserve hard links
<br/>
 -p, --perms                 preserve permissions
<br/>
     --executability         preserve executability
<br/>
     --chmod=CHMOD           affect file and/or directory permissions
<br/>
 -o, --owner                 preserve owner (super-user only)
<br/>
 -g, --group                 preserve group
<br/>
     --devices               preserve device files (super-user only)
<br/>
     --specials              preserve special files
<br/>
 -D                          same as --devices --specials
<br/>
 -t, --times                 preserve times
<br/>
 -O, --omit-dir-times        omit directories when preserving times
<br/>
     --super                 receiver attempts super-user activities
<br/>
 -S, --sparse                handle sparse files efficiently
<br/>
 -n, --dry-run               show what would have been transferred
<br/>
 -W, --whole-file            copy files whole (without rsync algorithm)
<br/>
 -x, --one-file-system       don't cross filesystem boundaries
<br/>
 -B, --block-size=SIZE       force a fixed checksum block-size
<br/>
 -e, --rsh=COMMAND           specify the remote shell to use
<br/>
     --rsync-path=PROGRAM    specify the rsync to run on remote machine
<br/>
     --existing              skip creating new files on receiver
<br/>
     --ignore-existing       skip updating files that exist on receiver
<br/>
     --remove-source-files   sender removes synchronized files (non-dir)
<br/>
     --del                   an alias for --delete-during
<br/>
     --delete                delete extraneous files from dest dirs
<br/>
     --delete-before         receiver deletes before transfer (default)
<br/>
     --delete-during         receiver deletes during xfer, not before
<br/>
     --delete-after          receiver deletes after transfer, not before
<br/>
     --delete-excluded       also delete excluded files from dest dirs
<br/>
     --ignore-errors         delete even if there are I/O errors
<br/>
     --force                 force deletion of dirs even if not empty
<br/>
     --max-delete=NUM        don't delete more than NUM files
<br/>
     --max-size=SIZE         don't transfer any file larger than SIZE
<br/>
     --min-size=SIZE         don't transfer any file smaller than SIZE
<br/>
     --partial               keep partially transferred files
<br/>
     --partial-dir=DIR       put a partially transferred file into DIR
<br/>
     --delay-updates         put all updated files into place at end
<br/>
 -m, --prune-empty-dirs      prune empty directory chains from file-list
<br/>
     --numeric-ids           don't map uid/gid values by user/group name
<br/>
     --timeout=TIME          set I/O timeout in seconds
<br/>
 -I, --ignore-times          don't skip files that match size and time
<br/>
     --size-only             skip files that match in size
<br/>
     --modify-window=NUM     compare mod-times with reduced accuracy
<br/>
 -T, --temp-dir=DIR          create temporary files in directory DIR
<br/>
 -y, --fuzzy                 find similar file for basis if no dest file
<br/>
     --compare-dest=DIR      also compare received files relative to DIR
<br/>
     --copy-dest=DIR         ... and include copies of unchanged files
<br/>
     --link-dest=DIR         hardlink to files in DIR when unchanged
<br/>
 -z, --compress              compress file data during the transfer
<br/>
     --compress-level=NUM    explicitly set compression level
<br/>
 -C, --cvs-exclude           auto-ignore files in the same way CVS does
<br/>
 -f, --filter=RULE           add a file-filtering RULE
<br/>
 -F                          same as --filter='dir-merge /.rsync-filter'
<br/>
                             repeated: --filter='- .rsync-filter'
<br/>
     --exclude=PATTERN       exclude files matching PATTERN
<br/>
     --exclude-from=FILE     read exclude patterns from FILE
<br/>
     --include=PATTERN       don't exclude files matching PATTERN
<br/>
     --include-from=FILE     read include patterns from FILE
<br/>
     --files-from=FILE       read list of source-file names from FILE
<br/>
 -0, --from0                 all *from/filter files are delimited by 0s
<br/>
     --address=ADDRESS       bind address for outgoing socket to daemon
<br/>
     --port=PORT             specify double-colon alternate port number
<br/>
     --sockopts=OPTIONS      specify custom TCP options
<br/>
     --blocking-io           use blocking I/O for the remote shell
<br/>
     --stats                 give some file-transfer stats
<br/>
 -8, --8-bit-output          leave high-bit chars unescaped in output
<br/>
 -h, --human-readable        output numbers in a human-readable format
<br/>
     --progress              show progress during transfer
<br/>
 -P                          same as --partial --progress
<br/>
 -i, --itemize-changes       output a change-summary for all updates
<br/>
     --out-format=FORMAT     output updates using the specified FORMAT
<br/>
     --log-file=FILE         log what we're doing to the specified FILE
<br/>
     --log-file-format=FMT   log updates using the specified FMT
<br/>
     --password-file=FILE    read password from FILE
<br/>
     --list-only             list the files instead of copying them
<br/>
     --bwlimit=KBPS          limit I/O bandwidth; KBytes per second
<br/>
     --write-batch=FILE      write a batched update to FILE
<br/>
     --only-write-batch=FILE like --write-batch but w/o updating dest
<br/>
     --read-batch=FILE       read a batched update from FILE
<br/>
     --protocol=NUM          force an older protocol version to be used
<br/>
     --checksum-seed=NUM     set block/file checksum seed (advanced)
<br/>
 -4, --ipv4                  prefer IPv4
<br/>
 -6, --ipv6                  prefer IPv6
<br/>
 -E, --extended-attributes   copy extended attributes, resource forks
<br/>
     --cache                 disable fcntl(F_NOCACHE)
<br/>
     --version               print version number
(-h) --help                  show this help (see below for -h comment)</pre>
<p class="Pp"></p>
<p class="Pp">Rsync can also be run as a daemon, in which case the following
    options are accepted:</p>
<pre>
<br/>
     --daemon                run as an rsync daemon
<br/>
     --address=ADDRESS       bind to the specified address
<br/>
     --bwlimit=KBPS          limit I/O bandwidth; KBytes per second
<br/>
     --config=FILE           specify alternate rsyncd.conf file
<br/>
     --no-detach             do not detach from the parent
<br/>
     --port=PORT             listen on alternate port number
<br/>
     --log-file=FILE         override the &quot;log file&quot; setting
<br/>
     --log-file-format=FMT   override the &quot;log format&quot; setting
<br/>
     --sockopts=OPTIONS      specify custom TCP options
<br/>
 -v, --verbose               increase verbosity
<br/>
 -4, --ipv4                  prefer IPv4
<br/>
 -6, --ipv6                  prefer IPv6
<br/>
 -h, --help                  show this help (if used after --daemon)</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">rsync uses the GNU long options package. Many of the command line
    options have two variants, one short and one long. These are shown below,
    separated by commas. Some options only have a long variant. The '=' for
    options that take a parameter is optional; whitespace can be used
  instead.</p>
<dl class="Bl-tag">
  <dt id="help"><a class="permalink" href="#help"><b>--help</b></a></dt>
  <dd>Print a short help page describing the options available in rsync and
      exit. For backward-compatibility with older versions of rsync, the help
      will also be output if you use the <b>-h</b> option without any other
      args.</dd>
  <dt id="version"><a class="permalink" href="#version"><b>--version</b></a></dt>
  <dd>print the rsync version number and exit.</dd>
  <dt id="v,"><a class="permalink" href="#v,"><b>-v, --verbose</b></a></dt>
  <dd>This option increases the amount of information you are given during the
      transfer. By default, rsync works silently. A single <b>-v</b> will give
      you information about what files are being transferred and a brief summary
      at the end. Two <b>-v</b> flags will give you information on what files
      are being skipped and slightly more information at the end. More than two
      <b>-v</b> flags should only be used if you are debugging rsync.</dd>
  <dt></dt>
  <dd>Note that the names of the transferred files that are output are done
      using a default <b>--out-format</b> of &quot;%n%L&quot;, which tells you
      just the name of the file and, if the item is a link, where it points. At
      the single <b>-v</b> level of verbosity, this does not mention when a file
      gets its attributes changed. If you ask for an itemized list of changed
      attributes (either <b>--itemize-changes</b> or adding &quot;%i&quot; to
      the <b>--out-format</b> setting), the output (on the client) increases to
      mention all items that are changed in any way. See the <b>--out-format</b>
      option for more details.</dd>
  <dt id="q,"><a class="permalink" href="#q,"><b>-q, --quiet</b></a></dt>
  <dd>This option decreases the amount of information you are given during the
      transfer, notably suppressing information messages from the remote server.
      This flag is useful when invoking rsync from cron.</dd>
  <dt id="no"><a class="permalink" href="#no"><b>--no-motd</b></a></dt>
  <dd>This option affects the information that is output by the client at the
      start of a daemon transfer. This suppresses the message-of-the-day (MOTD)
      text, but it also affects the list of modules that the daemon sends in
      response to the &quot;rsync host::&quot; request (due to a limitation in
      the rsync protocol), so omit this option if you want to request the list
      of modules from the deamon.</dd>
  <dt id="I,"><a class="permalink" href="#I,"><b>-I, --ignore-times</b></a></dt>
  <dd>Normally rsync will skip any files that are already the same size and have
      the same modification time-stamp. This option turns off this &quot;quick
      check&quot; behavior, causing all files to be updated.</dd>
  <dt id="size"><a class="permalink" href="#size"><b>--size-only</b></a></dt>
  <dd>Normally rsync will not transfer any files that are already the same size
      and have the same modification time-stamp. With the <b>--size-only</b>
      option, files will not be transferred if they have the same size,
      regardless of timestamp. This is useful when starting to use rsync after
      using another mirroring system which may not preserve timestamps
    exactly.</dd>
  <dt id="modify"><a class="permalink" href="#modify"><b>--modify-window</b></a></dt>
  <dd>When comparing two timestamps, rsync treats the timestamps as being equal
      if they differ by no more than the modify-window value. This is normally 0
      (for an exact match), but you may find it useful to set this to a larger
      value in some situations. In particular, when transferring to or from an
      MS Windows FAT filesystem (which represents times with a 2-second
      resolution), <b>--modify-window=1</b> is useful (allowing times to differ
      by up to 1 second).</dd>
  <dt id="c,"><a class="permalink" href="#c,"><b>-c, --checksum</b></a></dt>
  <dd>This forces the sender to checksum <i>every</i> regular file using a
      128-bit MD4 checksum. It does this during the initial file-system scan as
      it builds the list of all available files. The receiver then checksums its
      version of each file (if it exists and it has the same size as its
      sender-side counterpart) in order to decide which files need to be
      updated: files with either a changed size or a changed checksum are
      selected for transfer. Since this whole-file checksumming of all files on
      both sides of the connection occurs in addition to the automatic checksum
      verifications that occur during a file's transfer, this option can be
      quite slow.</dd>
  <dt></dt>
  <dd>Note that rsync always verifies that each <i>transferred</i> file was
      correctly reconstructed on the receiving side by checking its whole-file
      checksum, but that automatic after-the-transfer verification has nothing
      to do with this option's before-the-transfer &quot;Does this file need to
      be updated?&quot; check.</dd>
  <dt id="a,"><a class="permalink" href="#a,"><b>-a, --archive</b></a></dt>
  <dd>This is equivalent to <b>-rlptgoD</b>. It is a quick way of saying you
      want recursion and want to preserve almost everything (with -H being a
      notable omission). The only exception to the above equivalence is when
      <b>--files-from</b> is specified, in which case <b>-r</b> is not
    implied.</dd>
  <dt></dt>
  <dd>Note that <b>-a</b> <b>does not preserve hardlinks</b>, because finding
      multiply-linked files is expensive. You must separately specify
    <b>-H</b>.</dd>
  <dt id="no~2"><a class="permalink" href="#no~2">--no-OPTION</a></dt>
  <dd>You may turn off one or more implied options by prefixing the option name
      with &quot;no-&quot;. Not all options may be prefixed with a
      &quot;no-&quot;: only options that are implied by other options (e.g.
      <b>--no-D</b>, <b>--no-perms</b>) or have different defaults in various
      circumstances (e.g. <b>--no-whole-file</b>, <b>--no-blocking-io</b>,
      <b>--no-dirs</b>). You may specify either the short or the long option
      name after the &quot;no-&quot; prefix (e.g. <b>--no-R</b> is the same as
      <b>--no-relative</b>).</dd>
  <dt></dt>
  <dd>For example: if you want to use <b>-a</b> (<b>--archive</b>) but don't
      want <b>-o</b> (<b>--owner</b>), instead of converting <b>-a</b> into
      <b>-rlptgD</b>, you could specify <b>-a --no-o</b> (or <b>-a
      --no-owner</b>).</dd>
  <dt></dt>
  <dd>The order of the options is important: if you specify <b>--no-r -a</b>,
      the <b>-r</b> option would end up being turned on, the opposite of <b>-a
      --no-r</b>. Note also that the side-effects of the <b>--files-from</b>
      option are NOT positional, as it affects the default state of several
      options and slightly changes the meaning of <b>-a</b> (see the
      <b>--files-from</b> option for more details).</dd>
  <dt id="r,"><a class="permalink" href="#r,"><b>-r, --recursive</b></a></dt>
  <dd>This tells rsync to copy directories recursively. See also <b>--dirs</b>
      (<b>-d</b>).</dd>
  <dt id="R,"><a class="permalink" href="#R,"><b>-R, --relative</b></a></dt>
  <dd>Use relative paths. This means that the full path names specified on the
      command line are sent to the server rather than just the last parts of the
      filenames. This is particularly useful when you want to send several
      different directories at the same time. For example, if you used this
      command:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -av /foo/bar/baz.c
  remote:/tmp/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>... this would create a file named baz.c in /tmp/ on the remote machine.
      If instead you used</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -avR /foo/bar/baz.c
  remote:/tmp/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>then a file named /tmp/foo/bar/baz.c would be created on the remote
      machine -- the full path name is preserved. To limit the amount of path
      information that is sent, you have a couple options: (1) With a modern
      rsync on the sending side (beginning with 2.6.7), you can insert a dot and
      a slash into the source path, like this:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -avR /foo/./bar/baz.c
  remote:/tmp/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>That would create /tmp/bar/baz.c on the remote machine. (Note that the dot
      must be followed by a slash, so &quot;/foo/.&quot; would not be
      abbreviated.) (2) For older rsync versions, you would need to use a chdir
      to limit the source path. For example, when pushing files:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> (cd /foo; rsync -avR bar/baz.c
  remote:/tmp/) </span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>(Note that the parens put the two commands into a sub-shell, so that the
      &quot;cd&quot; command doesn't remain in effect for future commands.) If
      you're pulling files, use this idiom (which doesn't work with an rsync
      daemon):</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -avR --rsync-path=&quot;cd /foo;
  rsync&quot; \ </span>
<br/>
<span class="Li"> remote:bar/baz.c /tmp/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="no~3"><a class="permalink" href="#no~3"><b>--no-implied-dirs</b></a></dt>
  <dd>This option affects the default behavior of the <b>--relative</b> option.
      When it is specified, the attributes of the implied directories from the
      source names are not included in the transfer. This means that the
      corresponding path elements on the destination system are left unchanged
      if they exist, and any missing implied directories are created with
      default attributes. This even allows these implied path elements to have
      big differences, such as being a symlink to a directory on one side of the
      transfer, and a real directory on the other side.</dd>
  <dt></dt>
  <dd>For instance, if a command-line arg or a files-from entry told rsync to
      transfer the file &quot;path/foo/file&quot;, the directories
      &quot;path&quot; and &quot;path/foo&quot; are implied when
      <b>--relative</b> is used. If &quot;path/foo&quot; is a symlink to
      &quot;bar&quot; on the destination system, the receiving rsync would
      ordinarily delete &quot;path/foo&quot;, recreate it as a directory, and
      receive the file into the new directory. With <b>--no-implied-dirs</b>,
      the receiving rsync updates &quot;path/foo/file&quot; using the existing
      path elements, which means that the file ends up being created in
      &quot;path/bar&quot;. Another way to accomplish this link preservation is
      to use the <b>--keep-dirlinks</b> option (which will also affect symlinks
      to directories in the rest of the transfer).</dd>
  <dt></dt>
  <dd>In a similar but opposite scenario, if the transfer of
      &quot;path/foo/file&quot; is requested and &quot;path/foo&quot; is a
      symlink on the sending side, running without <b>--no-implied-dirs</b>
      would cause rsync to transform &quot;path/foo&quot; on the receiving side
      into an identical symlink, and then attempt to transfer
      &quot;path/foo/file&quot;, which might fail if the duplicated symlink did
      not point to a directory on the receiving side. Another way to avoid this
      sending of a symlink as an implied directory is to use
      <b>--copy-unsafe-links</b>, or <b>--copy-dirlinks</b> (both of which also
      affect symlinks in the rest of the transfer -- see their descriptions for
      full details).</dd>
  <dt id="b,"><a class="permalink" href="#b,"><b>-b, --backup</b></a></dt>
  <dd>With this option, preexisting destination files are renamed as each file
      is transferred or deleted. You can control where the backup file goes and
      what (if any) suffix gets appended using the <b>--backup-dir</b> and
      <b>--suffix</b> options.</dd>
  <dt></dt>
  <dd>Note that if you don't specify <b>--backup-dir</b>, (1) the
      <b>--omit-dir-times</b> option will be implied, and (2) if <b>--delete</b>
      is also in effect (without <b>--delete-excluded</b>), rsync will add a
      &quot;protect&quot; filter-rule for the backup suffix to the end of all
      your existing excludes (e.g. -f &quot;P *~&quot;). This will prevent
      previously backed-up files from being deleted. Note that if you are
      supplying your own filter rules, you may need to manually insert your own
      exclude/protect rule somewhere higher up in the list so that it has a high
      enough priority to be effective (e.g., if your rules specify a trailing
      inclusion/exclusion of '*', the auto-added rule would never be
    reached).</dd>
  <dt id="backup"><a class="permalink" href="#backup"><b>--backup-dir=DIR</b></a></dt>
  <dd>In combination with the <b>--backup</b> option, this tells rsync to store
      all backups in the specified directory on the receiving side. This can be
      used for incremental backups. You can additionally specify a backup suffix
      using the <b>--suffix</b> option (otherwise the files backed up in the
      specified directory will keep their original filenames).</dd>
  <dt id="suffix=SUFFIX"><a class="permalink" href="#suffix=SUFFIX"><b>--suffix=SUFFIX</b></a></dt>
  <dd>This option allows you to override the default backup suffix used with the
      <b>--backup</b> (<b>-b</b>) option. The default suffix is a ~ if no
      -<b>-backup-dir</b> was specified, otherwise it is an empty string.</dd>
  <dt id="u,"><a class="permalink" href="#u,"><b>-u, --update</b></a></dt>
  <dd>This forces rsync to skip any files which exist on the destination and
      have a modified time that is newer than the source file. (If an existing
      destination file has a modify time equal to the source file's, it will be
      updated if the sizes are different.)</dd>
  <dt></dt>
  <dd>In the current implementation of <b>--update</b>, a difference of file
      format between the sender and receiver is always considered to be
      important enough for an update, no matter what date is on the objects. In
      other words, if the source has a directory or a symlink where the
      destination has a file, the transfer would occur regardless of the
      timestamps. This might change in the future (feel free to comment on this
      on the mailing list if you have an opinion).</dd>
  <dt id="inplace"><a class="permalink" href="#inplace"><b>--inplace</b></a></dt>
  <dd>This causes rsync not to create a new copy of the file and then move it
      into place. Instead rsync will overwrite the existing file, meaning that
      the rsync algorithm can't accomplish the full amount of network reduction
      it might be able to otherwise (since it does not yet try to sort data
      matches). One exception to this is if you combine the option with
      <b>--backup</b>, since rsync is smart enough to use the backup file as the
      basis file for the transfer.</dd>
  <dt></dt>
  <dd>This option is useful for transfer of large files with block-based changes
      or appended data, and also on systems that are disk bound, not network
      bound.</dd>
  <dt></dt>
  <dd>The option implies <b>--partial</b> (since an interrupted transfer does
      not delete the file), but conflicts with <b>--partial-dir</b> and
      <b>--delay-updates</b>. Prior to rsync 2.6.4 <b>--inplace</b> was also
      incompatible with <b>--compare-dest</b> and <b>--link-dest</b>.</dd>
  <dt></dt>
  <dd>WARNING: The file's data will be in an inconsistent state during the
      transfer (and possibly afterward if the transfer gets interrupted), so you
      should not use this option to update files that are in use. Also note that
      rsync will be unable to update a file in-place that is not writable by the
      receiving user.</dd>
  <dt id="append"><a class="permalink" href="#append"><b>--append</b></a></dt>
  <dd>This causes rsync to update a file by appending data onto the end of the
      file, which presumes that the data that already exists on the receiving
      side is identical with the start of the file on the sending side. If that
      is not true, the file will fail the checksum test, and the resend will do
      a normal <b>--inplace</b> update to correct the mismatched data. Only
      files on the receiving side that are shorter than the corresponding file
      on the sending side (as well as new files) are sent. Implies
      <b>--inplace</b>, but does not conflict with <b>--sparse</b> (though the
      <b>--sparse</b> option will be auto-disabled if a resend of the
      already-existing data is required).</dd>
  <dt id="d,"><a class="permalink" href="#d,"><b>-d, --dirs</b></a></dt>
  <dd>Tell the sending side to include any directories that are encountered.
      Unlike <b>--recursive</b>, a directory's contents are not copied unless
      the directory name specified is &quot;.&quot; or ends with a trailing
      slash (e.g. &quot;.&quot;, &quot;dir/.&quot;, &quot;dir/&quot;, etc.).
      Without this option or the <b>--recursive</b> option, rsync will skip all
      directories it encounters (and output a message to that effect for each
      one). If you specify both <b>--dirs</b> and <b>--recursive</b>,
      <b>--recursive</b> takes precedence.</dd>
  <dt id="l,"><a class="permalink" href="#l,"><b>-l, --links</b></a></dt>
  <dd>When symlinks are encountered, recreate the symlink on the
    destination.</dd>
  <dt id="L,"><a class="permalink" href="#L,"><b>-L, --copy-links</b></a></dt>
  <dd>When symlinks are encountered, the item that they point to (the referent)
      is copied, rather than the symlink. In older versions of rsync, this
      option also had the side-effect of telling the receiving side to follow
      symlinks, such as symlinks to directories. In a modern rsync such as this
      one, you'll need to specify <b>--keep-dirlinks</b> (<b>-K</b>) to get this
      extra behavior. The only exception is when sending files to an rsync that
      is too old to understand <b>-K</b> -- in that case, the <b>-L</b> option
      will still have the side-effect of <b>-K</b> on that older receiving
      rsync.</dd>
  <dt id="copy"><a class="permalink" href="#copy"><b>--copy-unsafe-links</b></a></dt>
  <dd>This tells rsync to copy the referent of symbolic links that point outside
      the copied tree. Absolute symlinks are also treated like ordinary files,
      and so are any symlinks in the source path itself when <b>--relative</b>
      is used. This option has no additional effect if <b>--copy-links</b> was
      also specified.</dd>
  <dt id="safe"><a class="permalink" href="#safe"><b>--safe-links</b></a></dt>
  <dd>This tells rsync to ignore any symbolic links which point outside the
      copied tree. All absolute symlinks are also ignored. Using this option in
      conjunction with <b>--relative</b> may give unexpected results.</dd>
  <dt id="K,"><a class="permalink" href="#K,"><b>-K,
    --copy-dirlinks</b></a></dt>
  <dd>This option causes the sending side to treat a symlink to a directory as
      though it were a real directory. This is useful if you don't want symlinks
      to non-directories to be affected, as they would be using
      <b>--copy-links</b>.</dd>
  <dt></dt>
  <dd>Without this option, if the sending side has replaced a directory with a
      symlink to a directory, the receiving side will delete anything that is in
      the way of the new symlink, including a directory hierarchy (as long as
      <b>--force</b> or <b>--delete</b> is in effect).</dd>
  <dt></dt>
  <dd>See also <b>--keep-dirlinks</b> for an analogous option for the receiving
      side.</dd>
  <dt id="K,~2"><a class="permalink" href="#K,~2"><b>-K,
    --keep-dirlinks</b></a></dt>
  <dd>This option causes the receiving side to treat a symlink to a directory as
      though it were a real directory, but only if it matches a real directory
      from the sender. Without this option, the receiver's symlink would be
      deleted and replaced with a real directory.</dd>
  <dt></dt>
  <dd>For example, suppose you transfer a directory &quot;foo&quot; that
      contains a file &quot;file&quot;, but &quot;foo&quot; is a symlink to
      directory &quot;bar&quot; on the receiver. Without <b>--keep-dirlinks</b>,
      the receiver deletes symlink &quot;foo&quot;, recreates it as a directory,
      and receives the file into the new directory. With <b>--keep-dirlinks</b>,
      the receiver keeps the symlink and &quot;file&quot; ends up in
      &quot;bar&quot;.</dd>
  <dt></dt>
  <dd>See also <b>--copy-dirlinks</b> for an analogous option for the sending
      side.</dd>
  <dt id="H,"><a class="permalink" href="#H,"><b>-H, --hard-links</b></a></dt>
  <dd>This tells rsync to look for hard-linked files in the transfer and link
      together the corresponding files on the receiving side. Without this
      option, hard-linked files in the transfer are treated as though they were
      separate files.</dd>
  <dt></dt>
  <dd>Note that rsync can only detect hard links if both parts of the link are
      in the list of files being sent.</dd>
  <dt id="p,"><a class="permalink" href="#p,"><b>-p, --perms</b></a></dt>
  <dd>This option causes the receiving rsync to set the destination permissions
      to be the same as the source permissions. (See also the <b>--chmod</b>
      option for a way to modify what rsync considers to be the source
      permissions.)</dd>
  <dt></dt>
  <dd>When this option is <i>off</i>, permissions are set as follows:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o~14"><a class="permalink" href="#o~14">o</a></dt>
  <dd>Existing files (including updated files) retain their existing
      permissions, though the <b>--executability</b> option might change just
      the execute permission for the file.</dd>
  <dt id="o~15"><a class="permalink" href="#o~15">o</a></dt>
  <dd>New files get their &quot;normal&quot; permission bits set to the source
      file's permissions masked with the receiving end's umask setting, and
      their special permission bits disabled except in the case where a new
      directory inherits a setgid bit from its parent directory.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Thus, when <b>--perms</b> and <b>--executability</b> are both disabled,
      rsync's behavior is the same as that of other file-copy utilities, such as
      <b>cp</b>(1) and <b>tar</b>(1).</dd>
  <dt></dt>
  <dd>In summary: to give destination files (both old and new) the source
      permissions, use <b>--perms</b>. To give new files the destination-default
      permissions (while leaving existing files unchanged), make sure that the
      <b>--perms</b> option is off and use <b>--chmod=ugo=rwX</b> (which ensures
      that all non-masked bits get enabled). If you'd care to make this latter
      behavior easier to type, you could define a popt alias for it, such as
      putting this line in the file ~/.popt (this defines the <b>-s</b> option,
      and includes --no-g to use the default group of the destination dir):</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync alias -s --no-p --no-g
  --chmod=ugo=rwX</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>You could then use this new option in a command such as this one:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -asv src/ dest/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>(Caveat: make sure that <b>-a</b> does not follow <b>-s</b>, or it will
      re-enable the &quot;--no-*&quot; options.)</dd>
  <dt></dt>
  <dd>The preservation of the destination's setgid bit on newly-created
      directories when <b>--perms</b> is off was added in rsync 2.6.7. Older
      rsync versions erroneously preserved the three special permission bits for
      newly-created files when <b>--perms</b> was off, while overriding the
      destination's setgid bit setting on a newly-created directory. (Keep in
      mind that it is the version of the receiving rsync that affects this
      behavior.)</dd>
  <dt id="executability"><a class="permalink" href="#executability"><b>--executability</b></a></dt>
  <dd>This option causes rsync to preserve the executability (or
      non-executability) of regular files when <b>--perms</b> is not enabled. A
      regular file is considered to be executable if at least one 'x' is turned
      on in its permissions. When an existing destination file's executability
      differs from that of the corresponding source file, rsync modifies the
      destination file's permissions as follows:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o~16"><a class="permalink" href="#o~16">o</a></dt>
  <dd>To make a file non-executable, rsync turns off all its 'x'
    permissions.</dd>
  <dt id="o~17"><a class="permalink" href="#o~17">o</a></dt>
  <dd>To make a file executable, rsync turns on each 'x' permission that has a
      corresponding 'r' permission enabled.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>If <b>--perms</b> is enabled, this option is ignored.</dd>
  <dt id="chmod"><a class="permalink" href="#chmod"><b>--chmod</b></a></dt>
  <dd>This option tells rsync to apply one or more comma-separated
      &quot;chmod&quot; strings to the permission of the files in the transfer.
      The resulting value is treated as though it was the permissions that the
      sending side supplied for the file, which means that this option can seem
      to have no effect on existing files if <b>--perms</b> is not enabled.</dd>
  <dt></dt>
  <dd>In addition to the normal parsing rules specified in the <b>chmod</b>(1)
      manpage, you can specify an item that should only apply to a directory by
      prefixing it with a 'D', or specify an item that should only apply to a
      file by prefixing it with a 'F'. For example:</dd>
</dl>
<div class="Bd-indent">--chmod=Dg+s,ug+w,Fo-w,+X</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>It is also legal to specify multiple <b>--chmod</b> options, as each
      additional option is just appended to the list of changes to make.</dd>
  <dt></dt>
  <dd>See the <b>--perms</b> and <b>--executability</b> options for how the
      resulting permission value can be applied to the files in the
    transfer.</dd>
  <dt id="o,"><a class="permalink" href="#o,"><b>-o, --owner</b></a></dt>
  <dd>This option causes rsync to set the owner of the destination file to be
      the same as the source file, but only if the receiving rsync is being run
      as the super-user (see also the <b>--super</b> option to force rsync to
      attempt super-user activities). Without this option, the owner is set to
      the invoking user on the receiving side.</dd>
  <dt></dt>
  <dd>The preservation of ownership will associate matching names by default,
      but may fall back to using the ID number in some circumstances (see also
      the <b>--numeric-ids</b> option for a full discussion).</dd>
  <dt id="g,"><a class="permalink" href="#g,"><b>-g, --group</b></a></dt>
  <dd>This option causes rsync to set the group of the destination file to be
      the same as the source file. If the receiving program is not running as
      the super-user (or if <b>--no-super</b> was specified), only groups that
      the invoking user on the receiving side is a member of will be preserved.
      Without this option, the group is set to the default group of the invoking
      user on the receiving side.</dd>
  <dt></dt>
  <dd>The preservation of group information will associate matching names by
      default, but may fall back to using the ID number in some circumstances
      (see also the <b>--numeric-ids</b> option for a full discussion).</dd>
  <dt id="devices"><a class="permalink" href="#devices"><b>--devices</b></a></dt>
  <dd>This option causes rsync to transfer character and block device files to
      the remote system to recreate these devices. This option has no effect if
      the receiving rsync is not run as the super-user and <b>--super</b> is not
      specified.</dd>
  <dt id="specials"><a class="permalink" href="#specials"><b>--specials</b></a></dt>
  <dd>This option causes rsync to transfer special files such as named sockets
      and fifos.</dd>
  <dt id="D"><a class="permalink" href="#D"><b>-D</b></a></dt>
  <dd>The <b>-D</b> option is equivalent to <b>--devices</b>
    <b>--specials</b>.</dd>
  <dt id="t,"><a class="permalink" href="#t,"><b>-t, --times</b></a></dt>
  <dd>This tells rsync to transfer modification times along with the files and
      update them on the remote system. Note that if this option is not used,
      the optimization that excludes files that have not been modified cannot be
      effective; in other words, a missing <b>-t</b> or <b>-a</b> will cause the
      next transfer to behave as if it used <b>-I</b>, causing all files to be
      updated (though the rsync algorithm will make the update fairly efficient
      if the files haven't actually changed, you're much better off using
      <b>-t</b>).</dd>
  <dt id="O,"><a class="permalink" href="#O,"><b>-O,
    --omit-dir-times</b></a></dt>
  <dd>This tells rsync to omit directories when it is preserving modification
      times (see <b>--times</b>). If NFS is sharing the directories on the
      receiving side, it is a good idea to use <b>-O</b>. This option is
      inferred if you use <b>--backup</b> without <b>--backup-dir</b>.</dd>
  <dt id="super"><a class="permalink" href="#super"><b>--super</b></a></dt>
  <dd>This tells the receiving side to attempt super-user activities even if the
      receiving rsync wasn't run by the super-user. These activities include:
      preserving users via the <b>--owner</b> option, preserving all groups (not
      just the current user's groups) via the <b>--groups</b> option, and
      copying devices via the <b>--devices</b> option. This is useful for
      systems that allow such activities without being the super-user, and also
      for ensuring that you will get errors if the receiving side isn't being
      running as the super-user. To turn off super-user activities, the
      super-user can use <b>--no-super</b>.</dd>
  <dt id="S,"><a class="permalink" href="#S,"><b>-S, --sparse</b></a></dt>
  <dd>Try to handle sparse files efficiently so they take up less space on the
      destination. Conflicts with <b>--inplace</b> because it's not possible to
      overwrite data in a sparse fashion.</dd>
  <dt></dt>
  <dd>NOTE: Don't use this option when the destination is a Solaris
      &quot;tmpfs&quot; filesystem. It doesn't seem to handle seeks over null
      regions correctly and ends up corrupting the files.</dd>
  <dt id="n,"><a class="permalink" href="#n,"><b>-n, --dry-run</b></a></dt>
  <dd>This tells rsync to not do any file transfers, instead it will just report
      the actions it would have taken.</dd>
  <dt id="W,"><a class="permalink" href="#W,"><b>-W, --whole-file</b></a></dt>
  <dd>With this option the incremental rsync algorithm is not used and the whole
      file is sent as-is instead. The transfer may be faster if this option is
      used when the bandwidth between the source and destination machines is
      higher than the bandwidth to disk (especially when the &quot;disk&quot; is
      actually a networked filesystem). This is the default when both the source
      and destination are specified as local paths.</dd>
  <dt id="x,"><a class="permalink" href="#x,"><b>-x,
    --one-file-system</b></a></dt>
  <dd>This tells rsync to avoid crossing a filesystem boundary when recursing.
      This does not limit the user's ability to specify items to copy from
      multiple filesystems, just rsync's recursion through the hierarchy of each
      directory that the user specified, and also the analogous recursion on the
      receiving side during deletion. Also keep in mind that rsync treats a
      &quot;bind&quot; mount to the same device as being on the same
    filesystem.</dd>
  <dt></dt>
  <dd>If this option is repeated, rsync omits all mount-point directories from
      the copy. Otherwise, it includes an empty directory at each mount-point it
      encounters (using the attributes of the mounted directory because those of
      the underlying mount-point directory are inaccessible).</dd>
  <dt></dt>
  <dd>If rsync has been told to collapse symlinks (via <b>--copy-links</b> or
      <b>--copy-unsafe-links</b>), a symlink to a directory on another device is
      treated like a mount-point. Symlinks to non-directories are unaffected by
      this option.</dd>
  <dt id="existing,"><a class="permalink" href="#existing,"><b>--existing,
    --ignore-non-existing</b></a></dt>
  <dd>This tells rsync to skip creating files (including directories) that do
      not exist yet on the destination. If this option is combined with the
      <b>--ignore-existing</b> option, no files will be updated (which can be
      useful if all you want to do is to delete extraneous files).</dd>
  <dt id="ignore"><a class="permalink" href="#ignore"><b>--ignore-existing</b></a></dt>
  <dd>This tells rsync to skip updating files that already exist on the
      destination (this does <i>not</i> ignore existing directores, or nothing
      would get done). See also <b>--existing</b>.</dd>
  <dt id="remove"><a class="permalink" href="#remove"><b>--remove-source-files</b></a></dt>
  <dd>This tells rsync to remove from the sending side the files (meaning
      non-directories) that are a part of the transfer and have been
      successfully duplicated on the receiving side.</dd>
  <dt id="delete"><a class="permalink" href="#delete"><b>--delete</b></a></dt>
  <dd>This tells rsync to delete extraneous files from the receiving side (ones
      that aren't on the sending side), but only for the directories that are
      being synchronized. You must have asked rsync to send the whole directory
      (e.g. &quot;dir&quot; or &quot;dir/&quot;) without using a wildcard for
      the directory's contents (e.g. &quot;dir/*&quot;) since the wildcard is
      expanded by the shell and rsync thus gets a request to transfer individual
      files, not the files' parent directory. Files that are excluded from
      transfer are also excluded from being deleted unless you use the
      <b>--delete-excluded</b> option or mark the rules as only matching on the
      sending side (see the include/exclude modifiers in the FILTER RULES
      section).</dd>
  <dt></dt>
  <dd>Prior to rsync 2.6.7, this option would have no effect unless
      <b>--recursive</b> was in effect. Beginning with 2.6.7, deletions will
      also occur when <b>--dirs</b> (<b>-d</b>) is in effect, but only for
      directories whose contents are being copied.</dd>
  <dt></dt>
  <dd>This option can be dangerous if used incorrectly! It is a very good idea
      to run first using the <b>--dry-run</b> option (<b>-n</b>) to see what
      files would be deleted to make sure important files aren't listed.</dd>
  <dt></dt>
  <dd>If the sending side detects any I/O errors, then the deletion of any files
      at the destination will be automatically disabled. This is to prevent
      temporary filesystem failures (such as NFS errors) on the sending side
      causing a massive deletion of files on the destination. You can override
      this with the <b>--ignore-errors</b> option.</dd>
  <dt></dt>
  <dd>The <b>--delete</b> option may be combined with one of the --delete-WHEN
      options without conflict, as well as <b>--delete-excluded</b>. However, if
      none of the --delete-WHEN options are specified, rsync will currently
      choose the <b>--delete-before</b> algorithm. A future version may change
      this to choose the <b>--delete-during</b> algorithm. See also
      <b>--delete-after</b>.</dd>
  <dt id="delete~2"><a class="permalink" href="#delete~2"><b>--delete-before</b></a></dt>
  <dd>Request that the file-deletions on the receiving side be done before the
      transfer starts. This is the default if <b>--delete</b> or
      <b>--delete-excluded</b> is specified without one of the --delete-WHEN
      options. See <b>--delete</b> (which is implied) for more details on
      file-deletion.</dd>
  <dt></dt>
  <dd>Deleting before the transfer is helpful if the filesystem is tight for
      space and removing extraneous files would help to make the transfer
      possible. However, it does introduce a delay before the start of the
      transfer, and this delay might cause the transfer to timeout (if
      <b>--timeout</b> was specified).</dd>
  <dt id="delete~3"><a class="permalink" href="#delete~3"><b>--delete-during,
    --del</b></a></dt>
  <dd>Request that the file-deletions on the receiving side be done
      incrementally as the transfer happens. This is a faster method than
      choosing the before- or after-transfer algorithm, but it is only supported
      beginning with rsync version 2.6.4. See <b>--delete</b> (which is implied)
      for more details on file-deletion.</dd>
  <dt id="delete~4"><a class="permalink" href="#delete~4"><b>--delete-after</b></a></dt>
  <dd>Request that the file-deletions on the receiving side be done after the
      transfer has completed. This is useful if you are sending new
      per-directory merge files as a part of the transfer and you want their
      exclusions to take effect for the delete phase of the current transfer.
      See <b>--delete</b> (which is implied) for more details on
    file-deletion.</dd>
  <dt id="delete~5"><a class="permalink" href="#delete~5"><b>--delete-excluded</b></a></dt>
  <dd>In addition to deleting the files on the receiving side that are not on
      the sending side, this tells rsync to also delete any files on the
      receiving side that are excluded (see <b>--exclude</b>). See the FILTER
      RULES section for a way to make individual exclusions behave this way on
      the receiver, and for a way to protect files from
      <b>--delete-excluded</b>. See <b>--delete</b> (which is implied) for more
      details on file-deletion.</dd>
  <dt id="ignore~2"><a class="permalink" href="#ignore~2"><b>--ignore-errors</b></a></dt>
  <dd>Tells <b>--delete</b> to go ahead and delete files even when there are I/O
      errors.</dd>
  <dt id="force"><a class="permalink" href="#force"><b>--force</b></a></dt>
  <dd>This option tells rsync to delete a non-empty directory when it is to be
      replaced by a non-directory. This is only relevant if deletions are not
      active (see <b>--delete</b> for details).</dd>
  <dt></dt>
  <dd>Note for older rsync versions: <b>--force</b> used to still be required
      when using <b>--delete-after</b>, and it used to be non-functional unless
      the <b>--recursive</b> option was also enabled.</dd>
  <dt id="max"><a class="permalink" href="#max"><b>--max-delete=NUM</b></a></dt>
  <dd>This tells rsync not to delete more than NUM files or directories (NUM
      must be non-zero). This is useful when mirroring very large trees to
      prevent disasters.</dd>
  <dt id="max~2"><a class="permalink" href="#max~2"><b>--max-size=SIZE</b></a></dt>
  <dd>This tells rsync to avoid transferring any file that is larger than the
      specified SIZE. The SIZE value can be suffixed with a string to indicate a
      size multiplier, and may be a fractional value (e.g.
      &quot;<b>--max-size=1.5m</b>&quot;).</dd>
  <dt></dt>
  <dd>The suffixes are as follows: &quot;K&quot; (or &quot;KiB&quot;) is a
      kibibyte (1024), &quot;M&quot; (or &quot;MiB&quot;) is a mebibyte
      (1024*1024), and &quot;G&quot; (or &quot;GiB&quot;) is a gibibyte
      (1024*1024*1024). If you want the multiplier to be 1000 instead of 1024,
      use &quot;KB&quot;, &quot;MB&quot;, or &quot;GB&quot;. (Note: lower-case
      is also accepted for all values.) Finally, if the suffix ends in either
      &quot;+1&quot; or &quot;-1&quot;, the value will be offset by one byte in
      the indicated direction.</dd>
  <dt></dt>
  <dd>Examples: --max-size=1.5mb-1 is 1499999 bytes, and --max-size=2g+1 is
      2147483649 bytes.</dd>
  <dt id="min"><a class="permalink" href="#min"><b>--min-size=SIZE</b></a></dt>
  <dd>This tells rsync to avoid transferring any file that is smaller than the
      specified SIZE, which can help in not transferring small, junk files. See
      the <b>--max-size</b> option for a description of SIZE.</dd>
  <dt id="B,"><a class="permalink" href="#B,"><b>-B,
    --block-size=BLOCKSIZE</b></a></dt>
  <dd>This forces the block size used in the rsync algorithm to a fixed value.
      It is normally selected based on the size of each file being updated. See
      the technical report for details.</dd>
  <dt id="e,"><a class="permalink" href="#e,"><b>-e, --rsh=COMMAND</b></a></dt>
  <dd>This option allows you to choose an alternative remote shell program to
      use for communication between the local and remote copies of rsync.
      Typically, rsync is configured to use ssh by default, but you may prefer
      to use rsh on a local network.</dd>
  <dt></dt>
  <dd>If this option is used with <b>[user@]host::module/path</b>, then the
      remote shell <i>COMMAND</i> will be used to run an rsync daemon on the
      remote host, and all data will be transmitted through that remote shell
      connection, rather than through a direct socket connection to a running
      rsync daemon on the remote host. See the section &quot;USING RSYNC-DAEMON
      FEATURES VIA A REMOTE-SHELL CONNECTION&quot; above.</dd>
  <dt></dt>
  <dd>Command-line arguments are permitted in COMMAND provided that COMMAND is
      presented to rsync as a single argument. You must use spaces (not tabs or
      other whitespace) to separate the command and args from each other, and
      you can use single- and/or double-quotes to preserve spaces in an argument
      (but not backslashes). Note that doubling a single-quote inside a
      single-quoted string gives you a single-quote; likewise for double-quotes
      (though you need to pay attention to which quotes your shell is parsing
      and which quotes rsync is parsing). Some examples:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> -e 'ssh -p 2234'</span>
<br/>
<span class="Li"> -e 'ssh -o &quot;ProxyCommand nohup ssh firewall nc -w1 %h
  %p&quot;'</span>
<br/>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>(Note that ssh users can alternately customize site-specific connect
      options in their .ssh/config file.)</dd>
  <dt></dt>
  <dd>You can also choose the remote shell program using the RSYNC_RSH
      environment variable, which accepts the same range of values as
    <b>-e</b>.</dd>
  <dt></dt>
  <dd>See also the <b>--blocking-io</b> option which is affected by this
    option.</dd>
  <dt id="rsync"><a class="permalink" href="#rsync"><b>--rsync-path=PROGRAM</b></a></dt>
  <dd>Use this to specify what program is to be run on the remote machine to
      start-up rsync. Often used when rsync is not in the default remote-shell's
      path (e.g. --rsync-path=/usr/local/bin/rsync). Note that PROGRAM is run
      with the help of a shell, so it can be any program, script, or command
      sequence you'd care to run, so long as it does not corrupt the standard-in
      &amp; standard-out that rsync is using to communicate.</dd>
  <dt></dt>
  <dd>One tricky example is to set a different default directory on the remote
      machine for use with the <b>--relative</b> option. For instance:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -avR --rsync-path=&quot;cd /a/b
  &amp;&amp; rsync&quot; hst:c/d /e/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="C,"><a class="permalink" href="#C,"><b>-C, --cvs-exclude</b></a></dt>
  <dd>This is a useful shorthand for excluding a broad range of files that you
      often don't want to transfer between systems. It uses the same algorithm
      that CVS uses to determine if a file should be ignored.</dd>
  <dt></dt>
  <dd>The exclude list is initialized to:</dd>
</dl>
<div class="Bd-indent">
<div class="Bd-indent"><span class="Li">RCS SCCS CVS CVS.adm RCSLOG cvslog.*
  tags TAGS .make.state</span> <span class="Li">.nse_depinfo *~ #* .#* ,* _$* *$
  *.old *.bak *.BAK *.orig *.rej</span> <span class="Li">.del-* *.a *.olb *.o
  *.obj *.so *.exe *.Z *.elc *.ln core .svn/</span></div>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>then files listed in a $HOME/.cvsignore are added to the list and any
      files listed in the CVSIGNORE environment variable (all cvsignore names
      are delimited by whitespace).</dd>
  <dt></dt>
  <dd>Finally, any file is ignored if it is in the same directory as a
      .cvsignore file and matches one of the patterns listed therein. Unlike
      rsync's filter/exclude files, these patterns are split on whitespace. See
      the <b>cvs</b>(1) manual for more information.</dd>
  <dt></dt>
  <dd>If you're combining <b>-C</b> with your own <b>--filter</b> rules, you
      should note that these CVS excludes are appended at the end of your own
      rules, regardless of where the <b>-C</b> was placed on the command-line.
      This makes them a lower priority than any rules you specified explicitly.
      If you want to control where these CVS excludes get inserted into your
      filter rules, you should omit the <b>-C</b> as a command-line option and
      use a combination of <b>--filter=:C</b> and <b>--filter=-C</b> (either on
      your command-line or by putting the &quot;:C&quot; and &quot;-C&quot;
      rules into a filter file with your other rules). The first option turns on
      the per-directory scanning for the .cvsignore file. The second option does
      a one-time import of the CVS excludes mentioned above.</dd>
  <dt id="f,"><a class="permalink" href="#f,"><b>-f, --filter=RULE</b></a></dt>
  <dd>This option allows you to add rules to selectively exclude certain files
      from the list of files to be transferred. This is most useful in
      combination with a recursive transfer.</dd>
  <dt></dt>
  <dd>You may use as many <b>--filter</b> options on the command line as you
      like to build up the list of files to exclude.</dd>
  <dt></dt>
  <dd>See the FILTER RULES section for detailed information on this option.</dd>
  <dt id="F"><a class="permalink" href="#F"><b>-F</b></a></dt>
  <dd>The <b>-F</b> option is a shorthand for adding two <b>--filter</b> rules
      to your command. The first time it is used is a shorthand for this
    rule:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> --filter='dir-merge
  /.rsync-filter'</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>This tells rsync to look for per-directory .rsync-filter files that have
      been sprinkled through the hierarchy and use their rules to filter the
      files in the transfer. If <b>-F</b> is repeated, it is a shorthand for
      this rule:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> --filter='exclude
  .rsync-filter'</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>This filters out the .rsync-filter files themselves from the
    transfer.</dd>
  <dt></dt>
  <dd>See the FILTER RULES section for detailed information on how these options
      work.</dd>
  <dt id="exclude=PATTERN"><a class="permalink" href="#exclude=PATTERN"><b>--exclude=PATTERN</b></a></dt>
  <dd>This option is a simplified form of the <b>--filter</b> option that
      defaults to an exclude rule and does not allow the full rule-parsing
      syntax of normal filter rules.</dd>
  <dt></dt>
  <dd>See the FILTER RULES section for detailed information on this option.</dd>
  <dt id="exclude"><a class="permalink" href="#exclude"><b>--exclude-from=FILE</b></a></dt>
  <dd>This option is related to the <b>--exclude</b> option, but it specifies a
      FILE that contains exclude patterns (one per line). Blank lines in the
      file and lines starting with ';' or '#' are ignored. If <i>FILE</i> is
      <b>-</b>, the list will be read from standard input.</dd>
  <dt id="include=PATTERN"><a class="permalink" href="#include=PATTERN"><b>--include=PATTERN</b></a></dt>
  <dd>This option is a simplified form of the <b>--filter</b> option that
      defaults to an include rule and does not allow the full rule-parsing
      syntax of normal filter rules.</dd>
  <dt></dt>
  <dd>See the FILTER RULES section for detailed information on this option.</dd>
  <dt id="include"><a class="permalink" href="#include"><b>--include-from=FILE</b></a></dt>
  <dd>This option is related to the <b>--include</b> option, but it specifies a
      FILE that contains include patterns (one per line). Blank lines in the
      file and lines starting with ';' or '#' are ignored. If <i>FILE</i> is
      <b>-</b>, the list will be read from standard input.</dd>
  <dt id="files"><a class="permalink" href="#files"><b>--files-from=FILE</b></a></dt>
  <dd>Using this option allows you to specify the exact list of files to
      transfer (as read from the specified FILE or <b>-</b> for standard input).
      It also tweaks the default behavior of rsync to make transferring just the
      specified files and directories easier:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o~18"><a class="permalink" href="#o~18">o</a></dt>
  <dd>The <b>--relative</b> (<b>-R</b>) option is implied, which preserves the
      path information that is specified for each item in the file (use
      <b>--no-relative</b> or <b>--no-R</b> if you want to turn that off).</dd>
  <dt id="o~19"><a class="permalink" href="#o~19">o</a></dt>
  <dd>The <b>--dirs</b> (<b>-d</b>) option is implied, which will create
      directories specified in the list on the destination rather than noisily
      skipping them (use <b>--no-dirs</b> or <b>--no-d</b> if you want to turn
      that off).</dd>
  <dt id="o~20"><a class="permalink" href="#o~20">o</a></dt>
  <dd>The <b>--archive</b> (<b>-a</b>) option's behavior does not imply
      <b>--recursive</b> (<b>-r</b>), so specify it explicitly, if you want
    it.</dd>
  <dt id="o~21"><a class="permalink" href="#o~21">o</a></dt>
  <dd>These side-effects change the default state of rsync, so the position of
      the <b>--files-from</b> option on the command-line has no bearing on how
      other options are parsed (e.g. <b>-a</b> works the same before or after
      <b>--files-from</b>, as does <b>--no-R</b> and all other options).</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>The file names that are read from the FILE are all relative to the source
      dir -- any leading slashes are removed and no &quot;..&quot; references
      are allowed to go higher than the source dir. For example, take this
      command:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -a --files-from=/tmp/foo /usr
  remote:/backup</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>If /tmp/foo contains the string &quot;bin&quot; (or even
      &quot;/bin&quot;), the /usr/bin directory will be created as /backup/bin
      on the remote host. If it contains &quot;bin/&quot; (note the trailing
      slash), the immediate contents of the directory would also be sent
      (without needing to be explicitly mentioned in the file -- this began in
      version 2.6.4). In both cases, if the <b>-r</b> option was enabled, that
      dir's entire hierarchy would also be transferred (keep in mind that
      <b>-r</b> needs to be specified explicitly with <b>--files-from</b>, since
      it is not implied by <b>-a</b>). Also note that the effect of the (enabled
      by default) <b>--relative</b> option is to duplicate only the path info
      that is read from the file -- it does not force the duplication of the
      source-spec path (/usr in this case).</dd>
  <dt></dt>
  <dd>In addition, the <b>--files-from</b> file can be read from the remote host
      instead of the local host if you specify a &quot;host:&quot; in front of
      the file (the host must match one end of the transfer). As a short-cut,
      you can specify just a prefix of &quot;:&quot; to mean &quot;use the
      remote end of the transfer&quot;. For example:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -a --files-from=:/path/file-list
  src:/ /tmp/copy</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>This would copy all the files specified in the /path/file-list file that
      was located on the remote &quot;src&quot; host.</dd>
  <dt><b>-0, --from0</b></dt>
  <dd>This tells rsync that the rules/filenames it reads from a file are
      terminated by a null ('\0') character, not a NL, CR, or CR+LF. This
      affects <b>--exclude-from</b>, <b>--include-from</b>, <b>--files-from</b>,
      and any merged files specified in a <b>--filter</b> rule. It does not
      affect <b>--cvs-exclude</b> (since all names read from a .cvsignore file
      are split on whitespace).</dd>
  <dt id="T,"><a class="permalink" href="#T,"><b>-T, --temp-dir=DIR</b></a></dt>
  <dd>This option instructs rsync to use DIR as a scratch directory when
      creating temporary copies of the files transferred on the receiving side.
      The default behavior is to create each temporary file in the same
      directory as the associated destination file.</dd>
  <dt></dt>
  <dd>This option is most often used when the receiving disk partition does not
      have enough free space to hold a copy of the largest file in the transfer.
      In this case (i.e. when the scratch directory in on a different disk
      partition), rsync will not be able to rename each received temporary file
      over the top of the associated destination file, but instead must copy it
      into place. Rsync does this by copying the file over the top of the
      destination file, which means that the destination file will contain
      truncated data during this copy. If this were not done this way (even if
      the destination file were first removed, the data locally copied to a
      temporary file in the destination directory, and then renamed into place)
      it would be possible for the old file to continue taking up disk space (if
      someone had it open), and thus there might not be enough room to fit the
      new version on the disk at the same time.</dd>
  <dt></dt>
  <dd>If you are using this option for reasons other than a shortage of disk
      space, you may wish to combine it with the <b>--delay-updates</b> option,
      which will ensure that all copied files get put into subdirectories in the
      destination hierarchy, awaiting the end of the transfer. If you don't have
      enough room to duplicate all the arriving files on the destination
      partition, another way to tell rsync that you aren't overly concerned
      about disk space is to use the <b>--partial-dir</b> option with a relative
      path; because this tells rsync that it is OK to stash off a copy of a
      single file in a subdir in the destination hierarchy, rsync will use the
      partial-dir as a staging area to bring over the copied file, and then
      rename it into place from there. (Specifying a <b>--partial-dir</b> with
      an absolute path does not have this side-effect.)</dd>
  <dt id="y,"><a class="permalink" href="#y,"><b>-y, --fuzzy</b></a></dt>
  <dd>This option tells rsync that it should look for a basis file for any
      destination file that is missing. The current algorithm looks in the same
      directory as the destination file for either a file that has an identical
      size and modified-time, or a similarly-named file. If found, rsync uses
      the fuzzy basis file to try to speed up the transfer.</dd>
  <dt></dt>
  <dd>Note that the use of the <b>--delete</b> option might get rid of any
      potential fuzzy-match files, so either use <b>--delete-after</b> or
      specify some filename exclusions if you need to prevent this.</dd>
  <dt id="compare"><a class="permalink" href="#compare"><b>--compare-dest=DIR</b></a></dt>
  <dd>This option instructs rsync to use <i>DIR</i> on the destination machine
      as an additional hierarchy to compare destination files against doing
      transfers (if the files are missing in the destination directory). If a
      file is found in <i>DIR</i> that is identical to the sender's file, the
      file will NOT be transferred to the destination directory. This is useful
      for creating a sparse backup of just files that have changed from an
      earlier backup.</dd>
  <dt></dt>
  <dd>Beginning in version 2.6.4, multiple <b>--compare-dest</b> directories may
      be provided, which will cause rsync to search the list in the order
      specified for an exact match. If a match is found that differs only in
      attributes, a local copy is made and the attributes updated. If a match is
      not found, a basis file from one of the <i>DIR</i>s will be selected to
      try to speed up the transfer.</dd>
  <dt></dt>
  <dd>If <i>DIR</i> is a relative path, it is relative to the destination
      directory. See also <b>--copy-dest</b> and <b>--link-dest</b>.</dd>
  <dt id="copy~2"><a class="permalink" href="#copy~2"><b>--copy-dest=DIR</b></a></dt>
  <dd>This option behaves like <b>--compare-dest</b>, but rsync will also copy
      unchanged files found in <i>DIR</i> to the destination directory using a
      local copy. This is useful for doing transfers to a new destination while
      leaving existing files intact, and then doing a flash-cutover when all
      files have been successfully transferred.</dd>
  <dt></dt>
  <dd>Multiple <b>--copy-dest</b> directories may be provided, which will cause
      rsync to search the list in the order specified for an unchanged file. If
      a match is not found, a basis file from one of the <i>DIR</i>s will be
      selected to try to speed up the transfer.</dd>
  <dt></dt>
  <dd>If <i>DIR</i> is a relative path, it is relative to the destination
      directory. See also <b>--compare-dest</b> and <b>--link-dest</b>.</dd>
  <dt id="link"><a class="permalink" href="#link"><b>--link-dest=DIR</b></a></dt>
  <dd>This option behaves like <b>--copy-dest</b>, but unchanged files are hard
      linked from <i>DIR</i> to the destination directory. The files must be
      identical in all preserved attributes (e.g. permissions, possibly
      ownership) in order for the files to be linked together. An example:</dd>
</dl>
<div class="Bd-indent"><span class="Li"> rsync -av --link-dest=$PWD/prior_dir
  host:src_dir/ new_dir/</span></div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Beginning in version 2.6.4, multiple <b>--link-dest</b> directories may be
      provided, which will cause rsync to search the list in the order specified
      for an exact match. If a match is found that differs only in attributes, a
      local copy is made and the attributes updated. If a match is not found, a
      basis file from one of the <i>DIR</i>s will be selected to try to speed up
      the transfer.</dd>
  <dt></dt>
  <dd>Note that if you combine this option with <b>--ignore-times</b>, rsync
      will not link any files together because it only links identical files
      together as a substitute for transferring the file, never as an additional
      check after the file is updated.</dd>
  <dt></dt>
  <dd>If <i>DIR</i> is a relative path, it is relative to the destination
      directory. See also <b>--compare-dest</b> and <b>--copy-dest</b>.</dd>
  <dt></dt>
  <dd>Note that rsync versions prior to 2.6.1 had a bug that could prevent
      <b>--link-dest</b> from working properly for a non-super-user when
      <b>-o</b> was specified (or implied by <b>-a</b>). You can work-around
      this bug by avoiding the <b>-o</b> option when sending to an old
    rsync.</dd>
  <dt id="z,"><a class="permalink" href="#z,"><b>-z, --compress</b></a></dt>
  <dd>With this option, rsync compresses the file data as it is sent to the
      destination machine, which reduces the amount of data being transmitted --
      something that is useful over a slow connection.</dd>
  <dt></dt>
  <dd>Note that this option typically achieves better compression ratios than
      can be achieved by using a compressing remote shell or a compressing
      transport because it takes advantage of the implicit information in the
      matching data blocks that are not explicitly sent over the
    connection.</dd>
  <dt id="compress"><a class="permalink" href="#compress"><b>--compress-level=NUM</b></a></dt>
  <dd>Explicitly set the compression level to use (see <b>--compress</b>)
      instead of letting it default. If NUM is non-zero, the <b>--compress</b>
      option is implied.</dd>
  <dt id="numeric"><a class="permalink" href="#numeric"><b>--numeric-ids</b></a></dt>
  <dd>With this option rsync will transfer numeric group and user IDs rather
      than using user and group names and mapping them at both ends.</dd>
  <dt></dt>
  <dd>By default rsync will use the username and groupname to determine what
      ownership to give files. The special uid 0 and the special group 0 are
      never mapped via user/group names even if the <b>--numeric-ids</b> option
      is not specified.</dd>
  <dt></dt>
  <dd>If a user or group has no name on the source system or it has no match on
      the destination system, then the numeric ID from the source system is used
      instead. See also the comments on the &quot;use chroot&quot; setting in
      the rsyncd.conf manpage for information on how the chroot setting affects
      rsync's ability to look up the names of the users and groups and what you
      can do about it.</dd>
  <dt id="timeout=TIMEOUT"><a class="permalink" href="#timeout=TIMEOUT"><b>--timeout=TIMEOUT</b></a></dt>
  <dd>This option allows you to set a maximum I/O timeout in seconds. If no data
      is transferred for the specified time then rsync will exit. The default is
      0, which means no timeout.</dd>
  <dt id="address"><a class="permalink" href="#address"><b>--address</b></a></dt>
  <dd>By default rsync will bind to the wildcard address when connecting to an
      rsync daemon. The <b>--address</b> option allows you to specify a specific
      IP address (or hostname) to bind to. See also this option in the
      <b>--daemon</b> mode section.</dd>
  <dt id="port=PORT"><a class="permalink" href="#port=PORT"><b>--port=PORT</b></a></dt>
  <dd>This specifies an alternate TCP port number to use rather than the default
      of 873. This is only needed if you are using the double-colon (::) syntax
      to connect with an rsync daemon (since the URL syntax has a way to specify
      the port as a part of the URL). See also this option in the
      <b>--daemon</b> mode section.</dd>
  <dt id="sockopts"><a class="permalink" href="#sockopts"><b>--sockopts</b></a></dt>
  <dd>This option can provide endless fun for people who like to tune their
      systems to the utmost degree. You can set all sorts of socket options
      which may make transfers faster (or slower!). Read the man page for the
      <span class="Li">setsockopt()</span> system call for details on some of
      the options you may be able to set. By default no special socket options
      are set. This only affects direct socket connections to a remote rsync
      daemon. This option also exists in the <b>--daemon</b> mode section.</dd>
  <dt id="blocking"><a class="permalink" href="#blocking"><b>--blocking-io</b></a></dt>
  <dd>This tells rsync to use blocking I/O when launching a remote shell
      transport. If the remote shell is either rsh or remsh, rsync defaults to
      using blocking I/O, otherwise it defaults to using non-blocking I/O. (Note
      that ssh prefers non-blocking I/O.)</dd>
  <dt id="i,"><a class="permalink" href="#i,"><b>-i,
    --itemize-changes</b></a></dt>
  <dd>Requests a simple itemized list of the changes that are being made to each
      file, including attribute changes. This is exactly the same as specifying
      <b>--out-format='%i %n%L'</b>. If you repeat the option, unchanged files
      will also be output, but only if the receiving rsync is at least version
      2.6.7 (you can use <b>-vv</b> with older versions of rsync, but that also
      turns on the output of other verbose messages).</dd>
  <dt></dt>
  <dd>The &quot;%i&quot; escape has a cryptic output that is 9 letters long. The
      general format is like the string <b>YXcstpogz</b>, where <b>Y</b> is
      replaced by the type of update being done, <b>X</b> is replaced by the
      file-type, and the other letters represent attributes that may be output
      if they are being modified.</dd>
  <dt></dt>
  <dd>The update types that replace the <b>Y</b> are as follows:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o~22"><a class="permalink" href="#o~22">o</a></dt>
  <dd>A <b>&lt;</b> means that a file is being transferred to the remote host
      (sent).</dd>
  <dt id="o~23"><a class="permalink" href="#o~23">o</a></dt>
  <dd>A <b>&gt;</b> means that a file is being transferred to the local host
      (received).</dd>
  <dt id="o~24"><a class="permalink" href="#o~24">o</a></dt>
  <dd>A <b>c</b> means that a local change/creation is occurring for the item
      (such as the creation of a directory or the changing of a symlink,
    etc.).</dd>
  <dt id="o~25"><a class="permalink" href="#o~25">o</a></dt>
  <dd>A <b>h</b> means that the item is a hard link to another item (requires
      <b>--hard-links</b>).</dd>
  <dt id="o~26"><a class="permalink" href="#o~26">o</a></dt>
  <dd>A <b>.</b> means that the item is not being updated (though it might have
      attributes that are being modified).</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>The file-types that replace the <b>X</b> are: <b>f</b> for a file, a
      <b>d</b> for a directory, an <b>L</b> for a symlink, a <b>D</b> for a
      device, and a <b>S</b> for a special file (e.g. named sockets and
    fifos).</dd>
  <dt></dt>
  <dd>The other letters in the string above are the actual letters that will be
      output if the associated attribute for the item is being updated or a
      &quot;.&quot; for no change. Three exceptions to this are: (1) a newly
      created item replaces each letter with a &quot;+&quot;, (2) an identical
      item replaces the dots with spaces, and (3) an unknown attribute replaces
      each letter with a &quot;?&quot; (this can happen when talking to an older
      rsync).</dd>
  <dt></dt>
  <dd>The attribute that is associated with each letter is as follows:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o~27"><a class="permalink" href="#o~27">o</a></dt>
  <dd>A <b>c</b> means the checksum of the file is different and will be updated
      by the file transfer (requires <b>--checksum</b>).</dd>
  <dt id="o~28"><a class="permalink" href="#o~28">o</a></dt>
  <dd>A <b>s</b> means the size of the file is different and will be updated by
      the file transfer.</dd>
  <dt id="o~29"><a class="permalink" href="#o~29">o</a></dt>
  <dd>A <b>t</b> means the modification time is different and is being updated
      to the sender's value (requires <b>--times</b>). An alternate value of
      <b>T</b> means that the time will be set to the transfer time, which
      happens anytime a symlink is transferred, or when a file or device is
      transferred without <b>--times</b>.</dd>
  <dt id="o~30"><a class="permalink" href="#o~30">o</a></dt>
  <dd>A <b>p</b> means the permissions are different and are being updated to
      the sender's value (requires <b>--perms</b>).</dd>
  <dt id="o~31"><a class="permalink" href="#o~31">o</a></dt>
  <dd>An <b>o</b> means the owner is different and is being updated to the
      sender's value (requires <b>--owner</b> and super-user privileges).</dd>
  <dt id="o~32"><a class="permalink" href="#o~32">o</a></dt>
  <dd>A <b>g</b> means the group is different and is being updated to the
      sender's value (requires <b>--group</b> and the authority to set the
      group).</dd>
  <dt id="o~33"><a class="permalink" href="#o~33">o</a></dt>
  <dd>The <b>z</b> slot is reserved for future use.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>One other output is possible: when deleting files, the &quot;%i&quot; will
      output the string &quot;*deleting&quot; for each item that is being
      removed (assuming that you are talking to a recent enough rsync that it
      logs deletions instead of outputting them as a verbose message).</dd>
  <dt id="out"><a class="permalink" href="#out"><b>--out-format=FORMAT</b></a></dt>
  <dd>This allows you to specify exactly what the rsync client outputs to the
      user on a per-update basis. The format is a text string containing
      embedded single-character escape sequences prefixed with a percent (%)
      character. For a list of the possible escape characters, see the &quot;log
      format&quot; setting in the rsyncd.conf manpage.</dd>
  <dt></dt>
  <dd>Specifying this option will mention each file, dir, etc. that gets updated
      in a significant way (a transferred file, a recreated symlink/device, or a
      touched directory). In addition, if the itemize-changes escape (%i) is
      included in the string, the logging of names increases to mention any item
      that is changed in any way (as long as the receiving side is at least
      2.6.4). See the <b>--itemize-changes</b> option for a description of the
      output of &quot;%i&quot;.</dd>
  <dt></dt>
  <dd>The <b>--verbose</b> option implies a format of &quot;%n%L&quot;, but you
      can use <b>--out-format</b> without <b>--verbose</b> if you like, or you
      can override the format of its per-file output using this option.</dd>
  <dt></dt>
  <dd>Rsync will output the out-format string prior to a file's transfer unless
      one of the transfer-statistic escapes is requested, in which case the
      logging is done at the end of the file's transfer. When this late logging
      is in effect and <b>--progress</b> is also specified, rsync will also
      output the name of the file being transferred prior to its progress
      information (followed, of course, by the out-format output).</dd>
  <dt id="log"><a class="permalink" href="#log"><b>--log-file=FILE</b></a></dt>
  <dd>This option causes rsync to log what it is doing to a file. This is
      similar to the logging that a daemon does, but can be requested for the
      client side and/or the server side of a non-daemon transfer. If specified
      as a client option, transfer logging will be enabled with a default format
      of &quot;%i %n%L&quot;. See the <b>--log-file-format</b> option if you
      wish to override this.</dd>
  <dt></dt>
  <dd>Here's a example command that requests the remote side to log what is
      happening:</dd>
  <dt></dt>
  <dd>
    <pre>
<br/>
  rsync -av --rsync-path=&quot;rsync --log-file=/tmp/rlog&quot; src/ dest/</pre>
    <p class="Pp"></p>
  </dd>
  <dt></dt>
  <dd>This is very useful if you need to debug why a connection is closing
      unexpectedly.</dd>
  <dt id="log~2"><a class="permalink" href="#log~2"><b>--log-file-format=FORMAT</b></a></dt>
  <dd>This allows you to specify exactly what per-update logging is put into the
      file specified by the <b>--log-file</b> option (which must also be
      specified for this option to have any effect). If you specify an empty
      string, updated files will not be mentioned in the log file. For a list of
      the possible escape characters, see the &quot;log format&quot; setting in
      the rsyncd.conf manpage.</dd>
  <dt id="stats"><a class="permalink" href="#stats"><b>--stats</b></a></dt>
  <dd>This tells rsync to print a verbose set of statistics on the file
      transfer, allowing you to tell how effective the rsync algorithm is for
      your data.</dd>
  <dt></dt>
  <dd>The current statistics are as follows:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o~34"><a class="permalink" href="#o~34">o</a></dt>
  <dd><b>Number of files</b> is the count of all &quot;files&quot; (in the
      generic sense), which includes directories, symlinks, etc.</dd>
  <dt id="o~35"><a class="permalink" href="#o~35">o</a></dt>
  <dd><b>Number of files transferred</b> is the count of normal files that were
      updated via the rsync algorithm, which does not include created dirs,
      symlinks, etc.</dd>
  <dt id="o~36"><a class="permalink" href="#o~36">o</a></dt>
  <dd><b>Total file size</b> is the total sum of all file sizes in the transfer.
      This does not count any size for directories or special files, but does
      include the size of symlinks.</dd>
  <dt id="o~37"><a class="permalink" href="#o~37">o</a></dt>
  <dd><b>Total transferred file size</b> is the total sum of all files sizes for
      just the transferred files.</dd>
  <dt id="o~38"><a class="permalink" href="#o~38">o</a></dt>
  <dd><b>Literal data</b> is how much unmatched file-update data we had to send
      to the receiver for it to recreate the updated files.</dd>
  <dt id="o~39"><a class="permalink" href="#o~39">o</a></dt>
  <dd><b>Matched data</b> is how much data the receiver got locally when
      recreating the updated files.</dd>
  <dt id="o~40"><a class="permalink" href="#o~40">o</a></dt>
  <dd><b>File list size</b> is how big the file-list data was when the sender
      sent it to the receiver. This is smaller than the in-memory size for the
      file list due to some compressing of duplicated data when rsync sends the
      list.</dd>
  <dt id="o~41"><a class="permalink" href="#o~41">o</a></dt>
  <dd><b>File list generation time</b> is the number of seconds that the sender
      spent creating the file list. This requires a modern rsync on the sending
      side for this to be present.</dd>
  <dt id="o~42"><a class="permalink" href="#o~42">o</a></dt>
  <dd><b>File list transfer time</b> is the number of seconds that the sender
      spent sending the file list to the receiver.</dd>
  <dt id="o~43"><a class="permalink" href="#o~43">o</a></dt>
  <dd><b>Total bytes sent</b> is the count of all the bytes that rsync sent from
      the client side to the server side.</dd>
  <dt id="o~44"><a class="permalink" href="#o~44">o</a></dt>
  <dd><b>Total bytes received</b> is the count of all non-message bytes that
      rsync received by the client side from the server side.
      &quot;Non-message&quot; bytes means that we don't count the bytes for a
      verbose message that the server sent to us, which makes the stats more
      consistent.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-8, --8-bit-output</b></dt>
  <dd>This tells rsync to leave all high-bit characters unescaped in the output
      instead of trying to test them to see if they're valid in the current
      locale and escaping the invalid ones. All control characters (but never
      tabs) are always escaped, regardless of this option's setting.</dd>
  <dt></dt>
  <dd>The escape idiom that started in 2.6.7 is to output a literal backslash
      (\) and a hash (#), followed by exactly 3 octal digits. For example, a
      newline would output as &quot;\#012&quot;. A literal backslash that is in
      a filename is not escaped unless it is followed by a hash and 3 digits
      (0-9).</dd>
  <dt id="h,"><a class="permalink" href="#h,"><b>-h,
    --human-readable</b></a></dt>
  <dd>Output numbers in a more human-readable format. This makes big numbers
      output using larger units, with a K, M, or G suffix. If this option was
      specified once, these units are K (1000), M (1000*1000), and G
      (1000*1000*1000); if the option is repeated, the units are powers of 1024
      instead of 1000.</dd>
  <dt id="partial"><a class="permalink" href="#partial"><b>--partial</b></a></dt>
  <dd>By default, rsync will delete any partially transferred file if the
      transfer is interrupted. In some circumstances it is more desirable to
      keep partially transferred files. Using the <b>--partial</b> option tells
      rsync to keep the partial file which should make a subsequent transfer of
      the rest of the file much faster.</dd>
  <dt id="partial~2"><a class="permalink" href="#partial~2"><b>--partial-dir=DIR</b></a></dt>
  <dd>A better way to keep partial files than the <b>--partial</b> option is to
      specify a <i>DIR</i> that will be used to hold the partial data (instead
      of writing it out to the destination file). On the next transfer, rsync
      will use a file found in this dir as data to speed up the resumption of
      the transfer and then delete it after it has served its purpose.</dd>
  <dt></dt>
  <dd>Note that if <b>--whole-file</b> is specified (or implied), any
      partial-dir file that is found for a file that is being updated will
      simply be removed (since rsync is sending files without using the
      incremental rsync algorithm).</dd>
  <dt></dt>
  <dd>Rsync will create the <i>DIR</i> if it is missing (just the last dir --
      not the whole path). This makes it easy to use a relative path (such as
      &quot;<b>--partial-dir=.rsync-partial</b>&quot;) to have rsync create the
      partial-directory in the destination file's directory when needed, and
      then remove it again when the partial file is deleted.</dd>
  <dt></dt>
  <dd>If the partial-dir value is not an absolute path, rsync will add an
      exclude rule at the end of all your existing excludes. This will prevent
      the sending of any partial-dir files that may exist on the sending side,
      and will also prevent the untimely deletion of partial-dir items on the
      receiving side. An example: the above <b>--partial-dir</b> option would
      add the equivalent of &quot;<b>--exclude=.rsync-partial/</b>&quot; at the
      end of any other filter rules.</dd>
  <dt></dt>
  <dd>If you are supplying your own exclude rules, you may need to add your own
      exclude/hide/protect rule for the partial-dir because (1) the auto-added
      rule may be ineffective at the end of your other rules, or (2) you may
      wish to override rsync's exclude choice. For instance, if you want to make
      rsync clean-up any left-over partial-dirs that may be lying around, you
      should specify <b>--delete-after</b> and add a &quot;risk&quot; filter
      rule, e.g. <b>-f 'R .rsync-partial/'</b>. (Avoid using
      <b>--delete-before</b> or <b>--delete-during</b> unless you don't need
      rsync to use any of the left-over partial-dir data during the current
      run.)</dd>
  <dt></dt>
  <dd>IMPORTANT: the <b>--partial-dir</b> should not be writable by other users
      or it is a security risk. E.g. AVOID &quot;/tmp&quot;.</dd>
  <dt></dt>
  <dd>You can also set the partial-dir value the RSYNC_PARTIAL_DIR environment
      variable. Setting this in the environment does not force <b>--partial</b>
      to be enabled, but rather it affects where partial files go when
      <b>--partial</b> is specified. For instance, instead of using
      <b>--partial-dir=.rsync-tmp</b> along with <b>--progress</b>, you could
      set RSYNC_PARTIAL_DIR=.rsync-tmp in your environment and then just use the
      <b>-P</b> option to turn on the use of the .rsync-tmp dir for partial
      transfers. The only times that the <b>--partial</b> option does not look
      for this environment value are (1) when <b>--inplace</b> was specified
      (since <b>--inplace</b> conflicts with <b>--partial-dir</b>), and (2) when
      <b>--delay-updates</b> was specified (see below).</dd>
  <dt></dt>
  <dd>For the purposes of the daemon-config's &quot;refuse options&quot;
      setting, <b>--partial-dir</b> does <i>not</i> imply <b>--partial</b>. This
      is so that a refusal of the <b>--partial</b> option can be used to
      disallow the overwriting of destination files with a partial transfer,
      while still allowing the safer idiom provided by
    <b>--partial-dir</b>.</dd>
  <dt id="delay"><a class="permalink" href="#delay"><b>--delay-updates</b></a></dt>
  <dd>This option puts the temporary file from each updated file into a holding
      directory until the end of the transfer, at which time all the files are
      renamed into place in rapid succession. This attempts to make the updating
      of the files a little more atomic. By default the files are placed into a
      directory named &quot;.~tmp~&quot; in each file's destination directory,
      but if you've specified the <b>--partial-dir</b> option, that directory
      will be used instead. See the comments in the <b>--partial-dir</b> section
      for a discussion of how this &quot;.~tmp~&quot; dir will be excluded from
      the transfer, and what you can do if you wnat rsync to cleanup old
      &quot;.~tmp~&quot; dirs that might be lying around. Conflicts with
      <b>--inplace</b> and <b>--append</b>.</dd>
  <dt></dt>
  <dd>This option uses more memory on the receiving side (one bit per file
      transferred) and also requires enough free disk space on the receiving
      side to hold an additional copy of all the updated files. Note also that
      you should not use an absolute path to <b>--partial-dir</b> unless (1)
      there is no chance of any of the files in the transfer having the same
      name (since all the updated files will be put into a single directory if
      the path is absolute) and (2) there are no mount points in the hierarchy
      (since the delayed updates will fail if they can't be renamed into
    place).</dd>
  <dt></dt>
  <dd>See also the &quot;atomic-rsync&quot; perl script in the
      &quot;support&quot; subdir for an update algorithm that is even more
      atomic (it uses <b>--link-dest</b> and a parallel hierarchy of
    files).</dd>
  <dt id="m,"><a class="permalink" href="#m,"><b>-m,
    --prune-empty-dirs</b></a></dt>
  <dd>This option tells the receiving rsync to get rid of empty directories from
      the file-list, including nested directories that have no non-directory
      children. This is useful for avoiding the creation of a bunch of useless
      directories when the sending rsync is recursively scanning a hierarchy of
      files using include/exclude/filter rules.</dd>
  <dt></dt>
  <dd>Because the file-list is actually being pruned, this option also affects
      what directories get deleted when a delete is active. However, keep in
      mind that excluded files and directories can prevent existing items from
      being deleted (because an exclude hides source files and protects
      destination files).</dd>
  <dt></dt>
  <dd>You can prevent the pruning of certain empty directories from the
      file-list by using a global &quot;protect&quot; filter. For instance, this
      option would ensure that the directory &quot;emptydir&quot; was kept in
      the file-list:</dd>
</dl>
<div class="Bd-indent">--filter 'protect emptydir/'</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Here's an example that copies all .pdf files in a hierarchy, only creating
      the necessary destination directories to hold the .pdf files, and ensures
      that any superfluous files and directories in the destination are removed
      (note the hide filter of non-directories being used instead of an
      exclude):</dd>
</dl>
<div class="Bd-indent">rsync -avm --del --include='*.pdf' -f 'hide,! */' src/
  dest</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>If you didn't want to remove superfluous destination files, the more
      time-honored options of &quot;--include='*/' --exclude='*'&quot; would
      work fine in place of the hide-filter (if that is more natural to
    you).</dd>
  <dt id="progress"><a class="permalink" href="#progress"><b>--progress</b></a></dt>
  <dd>This option tells rsync to print information showing the progress of the
      transfer. This gives a bored user something to watch. Implies
      <b>--verbose</b> if it wasn't already specified.</dd>
  <dt></dt>
  <dd>While rsync is transferring a regular file, it updates a progress line
      that looks like this:</dd>
  <dt></dt>
  <dd>
    <pre>
<br/>
      782448  63%  110.64kB/s    0:00:04</pre>
    <p class="Pp"></p>
  </dd>
  <dt></dt>
  <dd>In this example, the receiver has reconstructed 782448 bytes or 63% of the
      sender's file, which is being reconstructed at a rate of 110.64 kilobytes
      per second, and the transfer will finish in 4 seconds if the current rate
      is maintained until the end.</dd>
  <dt></dt>
  <dd>These statistics can be misleading if the incremental transfer algorithm
      is in use. For example, if the sender's file consists of the basis file
      followed by additional data, the reported rate will probably drop
      dramatically when the receiver gets to the literal data, and the transfer
      will probably take much longer to finish than the receiver estimated as it
      was finishing the matched part of the file.</dd>
  <dt></dt>
  <dd>When the file transfer finishes, rsync replaces the progress line with a
      summary line that looks like this:</dd>
  <dt></dt>
  <dd>
    <pre>
<br/>
     1238099 100%  146.38kB/s    0:00:08  (xfer#5, to-check=169/396)</pre>
    <p class="Pp"></p>
  </dd>
  <dt></dt>
  <dd>In this example, the file was 1238099 bytes long in total, the average
      rate of transfer for the whole file was 146.38 kilobytes per second over
      the 8 seconds that it took to complete, it was the 5th transfer of a
      regular file during the current rsync session, and there are 169 more
      files for the receiver to check (to see if they are up-to-date or not)
      remaining out of the 396 total files in the file-list.</dd>
  <dt id="P"><a class="permalink" href="#P"><b>-P</b></a></dt>
  <dd>The <b>-P</b> option is equivalent to <b>--partial</b> <b>--progress</b>.
      Its purpose is to make it much easier to specify these two options for a
      long transfer that may be interrupted.</dd>
  <dt id="password"><a class="permalink" href="#password"><b>--password-file</b></a></dt>
  <dd>This option allows you to provide a password in a file for accessing a
      remote rsync daemon. Note that this option is only useful when accessing
      an rsync daemon using the built in transport, not when using a remote
      shell as the transport. The file must not be world readable. It should
      contain just the password as a single line.</dd>
  <dt id="list"><a class="permalink" href="#list"><b>--list-only</b></a></dt>
  <dd>This option will cause the source files to be listed instead of
      transferred. This option is inferred if there is a single source arg and
      no destination specified, so its main uses are: (1) to turn a copy command
      that includes a destination arg into a file-listing command, (2) to be
      able to specify more than one local source arg (note: be sure to include
      the destination), or (3) to avoid the automatically added &quot;<b>-r
      --exclude='/*/*'</b>&quot; options that rsync usually uses as a
      compatibility kluge when generating a non-recursive listing. Caution: keep
      in mind that a source arg with a wild-card is expanded by the shell into
      multiple args, so it is never safe to try to list such an arg without
      using this option. For example:</dd>
  <dt></dt>
  <dd>
    <pre>
<br/>
    rsync -av --list-only foo* dest/</pre>
    <p class="Pp"></p>
  </dd>
  <dt id="bwlimit=KBPS"><a class="permalink" href="#bwlimit=KBPS"><b>--bwlimit=KBPS</b></a></dt>
  <dd>This option allows you to specify a maximum transfer rate in kilobytes per
      second. This option is most effective when using rsync with large files
      (several megabytes and up). Due to the nature of rsync transfers, blocks
      of data are sent, then if rsync determines the transfer was too fast, it
      will wait before sending the next data block. The result is an average
      transfer rate equaling the specified limit. A value of zero specifies no
      limit.</dd>
  <dt id="write"><a class="permalink" href="#write"><b>--write-batch=FILE</b></a></dt>
  <dd>Record a file that can later be applied to another identical destination
      with <b>--read-batch</b>. See the &quot;BATCH MODE&quot; section for
      details, and also the <b>--only-write-batch</b> option.</dd>
  <dt id="only"><a class="permalink" href="#only"><b>--only-write-batch=FILE</b></a></dt>
  <dd>Works like <b>--write-batch</b>, except that no updates are made on the
      destination system when creating the batch. This lets you transport the
      changes to the destination system via some other means and then apply the
      changes via <b>--read-batch</b>.</dd>
  <dt></dt>
  <dd>Note that you can feel free to write the batch directly to some portable
      media: if this media fills to capacity before the end of the transfer, you
      can just apply that partial transfer to the destination and repeat the
      whole process to get the rest of the changes (as long as you don't mind a
      partially updated destination system while the multi-update cycle is
      happening).</dd>
  <dt></dt>
  <dd>Also note that you only save bandwidth when pushing changes to a remote
      system because this allows the batched data to be diverted from the sender
      into the batch file without having to flow over the wire to the receiver
      (when pulling, the sender is remote, and thus can't write the batch).</dd>
  <dt id="read"><a class="permalink" href="#read"><b>--read-batch=FILE</b></a></dt>
  <dd>Apply all of the changes stored in FILE, a file previously generated by
      <b>--write-batch</b>. If <i>FILE</i> is <b>-</b>, the batch data will be
      read from standard input. See the &quot;BATCH MODE&quot; section for
      details.</dd>
  <dt id="protocol=NUM"><a class="permalink" href="#protocol=NUM"><b>--protocol=NUM</b></a></dt>
  <dd>Force an older protocol version to be used. This is useful for creating a
      batch file that is compatible with an older version of rsync. For
      instance, if rsync 2.6.4 is being used with the <b>--write-batch</b>
      option, but rsync 2.6.3 is what will be used to run the
      <b>--read-batch</b> option, you should use &quot;--protocol=28&quot; when
      creating the batch file to force the older protocol version to be used in
      the batch file (assuming you can't upgrade the rsync on the reading
      system).</dd>
  <dt><b>-4, --ipv4</b> or <b>-6, --ipv6</b></dt>
  <dd>Tells rsync to prefer IPv4/IPv6 when creating sockets. This only affects
      sockets that rsync has direct control over, such as the outgoing socket
      when directly contacting an rsync daemon. See also these options in the
      <b>--daemon</b> mode section.</dd>
  <dt id="checksum"><a class="permalink" href="#checksum"><b>--checksum-seed=NUM</b></a></dt>
  <dd>Set the MD4 checksum seed to the integer NUM. This 4 byte checksum seed is
      included in each block and file MD4 checksum calculation. By default the
      checksum seed is generated by the server and defaults to the current
      <span class="Li">time()</span> . This option is used to set a specific
      checksum seed, which is useful for applications that want repeatable block
      and file checksums, or in the case where the user wants a more random
      checksum seed. Note that setting NUM to 0 causes rsync to use the default
      of <span class="Li">time()</span> for checksum seed.</dd>
  <dt id="E,"><a class="permalink" href="#E,"><b>-E,
    --extended-attributes</b></a></dt>
  <dd>Apple specific option to copy extended attributes, resource forks, and
      ACLs. Requires at least Mac OS X 10.4 or suitably patched rsync.</dd>
  <dt id="cache"><a class="permalink" href="#cache"><b>--cache</b></a></dt>
  <dd>Apple specific option to enable filesystem caching of rsync file i/o
      Otherwise fcntl(F_NOCACHE) is used to limit memory growth.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DAEMON_OPTIONS"><a class="permalink" href="#DAEMON_OPTIONS">DAEMON
  OPTIONS</a></h1>
<p class="Pp">The options allowed when starting an rsync daemon are as
  follows:</p>
<dl class="Bl-tag">
  <dt id="daemon"><a class="permalink" href="#daemon"><b>--daemon</b></a></dt>
  <dd>This tells rsync that it is to run as a daemon. The daemon you start
      running may be accessed using an rsync client using the
      <b>host::module</b> or <b>rsync://host/module/</b> syntax.</dd>
  <dt></dt>
  <dd>If standard input is a socket then rsync will assume that it is being run
      via inetd, otherwise it will detach from the current terminal and become a
      background daemon. The daemon will read the config file (rsyncd.conf) on
      each connect made by a client and respond to requests accordingly. See the
      <b>rsyncd.conf</b>(5) man page for more details.</dd>
  <dt id="address~2"><a class="permalink" href="#address~2"><b>--address</b></a></dt>
  <dd>By default rsync will bind to the wildcard address when run as a daemon
      with the <b>--daemon</b> option. The <b>--address</b> option allows you to
      specify a specific IP address (or hostname) to bind to. This makes virtual
      hosting possible in conjunction with the <b>--config</b> option. See also
      the &quot;address&quot; global option in the rsyncd.conf manpage.</dd>
  <dt id="bwlimit=KBPS~2"><a class="permalink" href="#bwlimit=KBPS~2"><b>--bwlimit=KBPS</b></a></dt>
  <dd>This option allows you to specify a maximum transfer rate in kilobytes per
      second for the data the daemon sends. The client can still specify a
      smaller <b>--bwlimit</b> value, but their requested value will be rounded
      down if they try to exceed it. See the client version of this option
      (above) for some extra details.</dd>
  <dt id="config=FILE"><a class="permalink" href="#config=FILE"><b>--config=FILE</b></a></dt>
  <dd>This specifies an alternate config file than the default. This is only
      relevant when <b>--daemon</b> is specified. The default is
      /etc/rsyncd.conf unless the daemon is running over a remote shell program
      and the remote user is not the super-user; in that case the default is
      rsyncd.conf in the current directory (typically $HOME).</dd>
  <dt id="no~4"><a class="permalink" href="#no~4"><b>--no-detach</b></a></dt>
  <dd>When running as a daemon, this option instructs rsync to not detach itself
      and become a background process. This option is required when running as a
      service on Cygwin, and may also be useful when rsync is supervised by a
      program such as <b>daemontools</b> or AIX's <b>System Resource
      Controller</b>. <b>--no-detach</b> is also recommended when rsync is run
      under a debugger. This option has no effect if rsync is run from inetd or
      sshd.</dd>
  <dt id="port=PORT~2"><a class="permalink" href="#port=PORT~2"><b>--port=PORT</b></a></dt>
  <dd>This specifies an alternate TCP port number for the daemon to listen on
      rather than the default of 873. See also the &quot;port&quot; global
      option in the rsyncd.conf manpage.</dd>
  <dt id="log~3"><a class="permalink" href="#log~3"><b>--log-file=FILE</b></a></dt>
  <dd>This option tells the rsync daemon to use the given log-file name instead
      of using the &quot;log file&quot; setting in the config file.</dd>
  <dt id="log~4"><a class="permalink" href="#log~4"><b>--log-file-format=FORMAT</b></a></dt>
  <dd>This option tells the rsync daemon to use the given FORMAT string instead
      of using the &quot;log format&quot; setting in the config file. It also
      enables &quot;transfer logging&quot; unless the string is empty, in which
      case transfer logging is turned off.</dd>
  <dt id="sockopts~2"><a class="permalink" href="#sockopts~2"><b>--sockopts</b></a></dt>
  <dd>This overrides the <b>socket options</b> setting in the rsyncd.conf file
      and has the same syntax.</dd>
  <dt id="v,~2"><a class="permalink" href="#v,~2"><b>-v, --verbose</b></a></dt>
  <dd>This option increases the amount of information the daemon logs during its
      startup phase. After the client connects, the daemon's verbosity level
      will be controlled by the options that the client used and the &quot;max
      verbosity&quot; setting in the module's config section.</dd>
  <dt><b>-4, --ipv4</b> or <b>-6, --ipv6</b></dt>
  <dd>Tells rsync to prefer IPv4/IPv6 when creating the incoming sockets that
      the rsync daemon will use to listen for connections. One of these options
      may be required in older versions of Linux to work around an IPv6 bug in
      the kernel (if you see an &quot;address already in use&quot; error when
      nothing else is using the port, try specifying <b>--ipv6</b> or
      <b>--ipv4</b> when starting the daemon).</dd>
  <dt id="h,~2"><a class="permalink" href="#h,~2"><b>-h, --help</b></a></dt>
  <dd>When specified after <b>--daemon</b>, print a short help page describing
      the options available for starting an rsync daemon.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILTER_RULES"><a class="permalink" href="#FILTER_RULES">FILTER
  RULES</a></h1>
<p class="Pp">The filter rules allow for flexible selection of which files to
    transfer (include) and which files to skip (exclude). The rules either
    directly specify include/exclude patterns or they specify a way to acquire
    more include/exclude patterns (e.g. to read them from a file).</p>
<p class="Pp">As the list of files/directories to transfer is built, rsync
    checks each name to be transferred against the list of include/exclude
    patterns in turn, and the first matching pattern is acted on: if it is an
    exclude pattern, then that file is skipped; if it is an include pattern then
    that filename is not skipped; if no matching pattern is found, then the
    filename is not skipped.</p>
<p class="Pp">Rsync builds an ordered list of filter rules as specified on the
    command-line. Filter rules have the following syntax:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">RULE [PATTERN_OR_FILENAME]</span>
<br/>
<span class="Li">RULE,MODIFIERS [PATTERN_OR_FILENAME]</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">You have your choice of using either short or long RULE names, as
    described below. If you use a short-named rule, the ',' separating the RULE
    from the MODIFIERS is optional. The PATTERN or FILENAME that follows (when
    present) must come after either a single space or an underscore (_). Here
    are the available rule prefixes:</p>
<p class="Pp"></p>
<div class="Bd-indent"><b>exclude, -</b> specifies an exclude pattern.
<br/>
<b>include, +</b> specifies an include pattern.
<br/>
<b>merge, .</b> specifies a merge-file to read for more rules.
<br/>
<b>dir-merge, :</b> specifies a per-directory merge-file.
<br/>
<b>hide, H</b> specifies a pattern for hiding files from the transfer.
<br/>
<b>show, S</b> files that match the pattern are not hidden.
<br/>
<b>protect, P</b> specifies a pattern for protecting files from deletion.
<br/>
<b>risk, R</b> files that match the pattern are not protected.
<br/>
<b>clear, !</b> clears the current include/exclude list (takes no arg)
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">When rules are being read from a file, empty lines are ignored, as
    are comment lines that start with a &quot;#&quot;.</p>
<p class="Pp">Note that the <b>--include</b>/<b>--exclude</b> command-line
    options do not allow the full range of rule parsing as described above --
    they only allow the specification of include/exclude patterns plus a
    &quot;!&quot; token to clear the list (and the normal comment parsing when
    rules are read from a file). If a pattern does not begin with &quot;- &quot;
    (dash, space) or &quot;+ &quot; (plus, space), then the rule will be
    interpreted as if &quot;+ &quot; (for an include option) or &quot;- &quot;
    (for an exclude option) were prefixed to the string. A <b>--filter</b>
    option, on the other hand, must always contain either a short or long rule
    name at the start of the rule.</p>
<p class="Pp">Note also that the <b>--filter</b>, <b>--include</b>, and
    <b>--exclude</b> options take one rule/pattern each. To add multiple ones,
    you can repeat the options on the command-line, use the merge-file syntax of
    the <b>--filter</b> option, or the
    <b>--include-from</b>/<b>--exclude-from</b> options.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INCLUDE/EXCLUDE_PATTERN_RULES"><a class="permalink" href="#INCLUDE/EXCLUDE_PATTERN_RULES">INCLUDE/EXCLUDE
  PATTERN RULES</a></h1>
<p class="Pp">You can include and exclude files by specifying patterns using the
    &quot;+&quot;, &quot;-&quot;, etc. filter rules (as introduced in the FILTER
    RULES section above). The include/exclude rules each specify a pattern that
    is matched against the names of the files that are going to be transferred.
    These patterns can take several forms:</p>
<dl class="Bl-tag">
  <dt id="o~45"><a class="permalink" href="#o~45">o</a></dt>
  <dd>if the pattern starts with a / then it is anchored to a particular spot in
      the hierarchy of files, otherwise it is matched against the end of the
      pathname. This is similar to a leading ^ in regular expressions. Thus
      &quot;/foo&quot; would match a file named &quot;foo&quot; at either the
      &quot;root of the transfer&quot; (for a global rule) or in the
      merge-file's directory (for a per-directory rule). An unqualified
      &quot;foo&quot; would match any file or directory named &quot;foo&quot;
      anywhere in the tree because the algorithm is applied recursively from the
      top down; it behaves as if each path component gets a turn at being the
      end of the file name. Even the unanchored &quot;sub/foo&quot; would match
      at any point in the hierarchy where a &quot;foo&quot; was found within a
      directory named &quot;sub&quot;. See the section on ANCHORING
      INCLUDE/EXCLUDE PATTERNS for a full discussion of how to specify a pattern
      that matches at the root of the transfer.</dd>
  <dt id="o~46"><a class="permalink" href="#o~46">o</a></dt>
  <dd>if the pattern ends with a / then it will only match a directory, not a
      file, link, or device.</dd>
  <dt id="o~47"><a class="permalink" href="#o~47">o</a></dt>
  <dd>rsync chooses between doing a simple string match and wildcard matching by
      checking if the pattern contains one of these three wildcard characters:
      '*', '?', and '[' .</dd>
  <dt id="o~48"><a class="permalink" href="#o~48">o</a></dt>
  <dd>a '*' matches any non-empty path component (it stops at slashes).</dd>
  <dt id="o~49"><a class="permalink" href="#o~49">o</a></dt>
  <dd>use '**' to match anything, including slashes.</dd>
  <dt id="o~50"><a class="permalink" href="#o~50">o</a></dt>
  <dd>a '?' matches any character except a slash (/).</dd>
  <dt id="o~51"><a class="permalink" href="#o~51">o</a></dt>
  <dd>a '[' introduces a character class, such as [a-z] or [[:alpha:]].</dd>
  <dt id="o~52"><a class="permalink" href="#o~52">o</a></dt>
  <dd>in a wildcard pattern, a backslash can be used to escape a wildcard
      character, but it is matched literally when no wildcards are present.</dd>
  <dt id="o~53"><a class="permalink" href="#o~53">o</a></dt>
  <dd>if the pattern contains a / (not counting a trailing /) or a
      &quot;**&quot;, then it is matched against the full pathname, including
      any leading directories. If the pattern doesn't contain a / or a
      &quot;**&quot;, then it is matched only against the final component of the
      filename. (Remember that the algorithm is applied recursively so
      &quot;full filename&quot; can actually be any portion of a path from the
      starting directory on down.)</dd>
  <dt id="o~54"><a class="permalink" href="#o~54">o</a></dt>
  <dd>a trailing &quot;dir_name/***&quot; will match both the directory (as if
      &quot;dir_name/&quot; had been specified) and all the files in the
      directory (as if &quot;dir_name/**&quot; had been specified). (This
      behavior is new for version 2.6.7.)
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">Note that, when using the <b>--recursive</b> (<b>-r</b>) option
    (which is implied by <b>-a</b>), every subcomponent of every path is visited
    from the top down, so include/exclude patterns get applied recursively to
    each subcomponent's full name (e.g. to include &quot;/foo/bar/baz&quot; the
    subcomponents &quot;/foo&quot; and &quot;/foo/bar&quot; must not be
    excluded). The exclude patterns actually short-circuit the directory
    traversal stage when rsync finds the files to send. If a pattern excludes a
    particular parent directory, it can render a deeper include pattern
    ineffectual because rsync did not descend through that excluded section of
    the hierarchy. This is particularly important when using a trailing '*'
    rule. For instance, this won't work:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">+
  /some/path/this-file-will-not-be-found</span>
<br/>
<span class="Li">+ /file-is-included</span>
<br/>
<span class="Li">- *</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">This fails because the parent directory &quot;some&quot; is
    excluded by the '*' rule, so rsync never visits any of the files in the
    &quot;some&quot; or &quot;some/path&quot; directories. One solution is to
    ask for all directories in the hierarchy to be included by using a single
    rule: &quot;+ */&quot; (put it somewhere before the &quot;- *&quot; rule),
    and perhaps use the <b>--prune-empty-dirs</b> option. Another solution is to
    add specific include rules for all the parent dirs that need to be visited.
    For instance, this set of rules works fine:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">+ /some/</span>
<br/>
<span class="Li">+ /some/path/</span>
<br/>
<span class="Li">+ /some/path/this-file-is-found</span>
<br/>
<span class="Li">+ /file-also-included</span>
<br/>
<span class="Li">- *</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">Here are some examples of exclude/include matching:</p>
<dl class="Bl-tag">
  <dt id="o~55"><a class="permalink" href="#o~55">o</a></dt>
  <dd>&quot;- *.o&quot; would exclude all filenames matching *.o</dd>
  <dt id="o~56"><a class="permalink" href="#o~56">o</a></dt>
  <dd>&quot;- /foo&quot; would exclude a file (or directory) named foo in the
      transfer-root directory</dd>
  <dt id="o~57"><a class="permalink" href="#o~57">o</a></dt>
  <dd>&quot;- foo/&quot; would exclude any directory named foo</dd>
  <dt id="o~58"><a class="permalink" href="#o~58">o</a></dt>
  <dd>&quot;- /foo/*/bar&quot; would exclude any file named bar which is at two
      levels below a directory named foo in the transfer-root directory</dd>
  <dt id="o~59"><a class="permalink" href="#o~59">o</a></dt>
  <dd>&quot;- /foo/**/bar&quot; would exclude any file named bar two or more
      levels below a directory named foo in the transfer-root directory</dd>
  <dt id="o~60"><a class="permalink" href="#o~60">o</a></dt>
  <dd>The combination of &quot;+ */&quot;, &quot;+ *.c&quot;, and &quot;-
      *&quot; would include all directories and C source files but nothing else
      (see also the <b>--prune-empty-dirs</b> option)</dd>
  <dt id="o~61"><a class="permalink" href="#o~61">o</a></dt>
  <dd>The combination of &quot;+ foo/&quot;, &quot;+ foo/bar.c&quot;, and
      &quot;- *&quot; would include only the foo directory and foo/bar.c (the
      foo directory must be explicitly included or it would be excluded by the
      &quot;*&quot;)
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="MERGE-FILE_FILTER_RULES"><a class="permalink" href="#MERGE-FILE_FILTER_RULES">MERGE-FILE
  FILTER RULES</a></h1>
<p class="Pp">You can merge whole files into your filter rules by specifying
    either a merge (.) or a dir-merge (:) filter rule (as introduced in the
    FILTER RULES section above).</p>
<p class="Pp">There are two kinds of merged files -- single-instance ('.') and
    per-directory (':'). A single-instance merge file is read one time, and its
    rules are incorporated into the filter list in the place of the
    &quot;.&quot; rule. For per-directory merge files, rsync will scan every
    directory that it traverses for the named file, merging its contents when
    the file exists into the current list of inherited rules. These
    per-directory rule files must be created on the sending side because it is
    the sending side that is being scanned for the available files to transfer.
    These rule files may also need to be transferred to the receiving side if
    you want them to affect what files don't get deleted (see PER-DIRECTORY
    RULES AND DELETE below).</p>
<p class="Pp">Some examples:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">merge /etc/rsync/default.rules</span>
<br/>
<span class="Li">. /etc/rsync/default.rules</span>
<br/>
<span class="Li">dir-merge .per-dir-filter</span>
<br/>
<span class="Li">dir-merge,n- .non-inherited-per-dir-excludes</span>
<br/>
<span class="Li">:n- .non-inherited-per-dir-excludes</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">The following modifiers are accepted after a merge or dir-merge
    rule:</p>
<dl class="Bl-tag">
  <dt id="o~62"><a class="permalink" href="#o~62">o</a></dt>
  <dd>A <b>-</b> specifies that the file should consist of only exclude
      patterns, with no other rule-parsing except for in-file comments.</dd>
  <dt id="o~63"><a class="permalink" href="#o~63">o</a></dt>
  <dd>A <b>+</b> specifies that the file should consist of only include
      patterns, with no other rule-parsing except for in-file comments.</dd>
  <dt id="o~64"><a class="permalink" href="#o~64">o</a></dt>
  <dd>A <b>C</b> is a way to specify that the file should be read in a
      CVS-compatible manner. This turns on 'n', 'w', and '-', but also allows
      the list-clearing token (!) to be specified. If no filename is provided,
      &quot;.cvsignore&quot; is assumed.</dd>
  <dt id="o~65"><a class="permalink" href="#o~65">o</a></dt>
  <dd>A <b>e</b> will exclude the merge-file name from the transfer; e.g.
      &quot;dir-merge,e .rules&quot; is like &quot;dir-merge .rules&quot; and
      &quot;- .rules&quot;.</dd>
  <dt id="o~66"><a class="permalink" href="#o~66">o</a></dt>
  <dd>An <b>n</b> specifies that the rules are not inherited by
    subdirectories.</dd>
  <dt id="o~67"><a class="permalink" href="#o~67">o</a></dt>
  <dd>A <b>w</b> specifies that the rules are word-split on whitespace instead
      of the normal line-splitting. This also turns off comments. Note: the
      space that separates the prefix from the rule is treated specially, so
      &quot;- foo + bar&quot; is parsed as two rules (assuming that
      prefix-parsing wasn't also disabled).</dd>
  <dt id="o~68"><a class="permalink" href="#o~68">o</a></dt>
  <dd>You may also specify any of the modifiers for the &quot;+&quot; or
      &quot;-&quot; rules (below) in order to have the rules that are read in
      from the file default to having that modifier set. For instance,
      &quot;merge,-/ .excl&quot; would treat the contents of .excl as
      absolute-path excludes, while &quot;dir-merge,s .filt&quot; and
      &quot;:sC&quot; would each make all their per-directory rules apply only
      on the sending side.
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">The following modifiers are accepted after a &quot;+&quot; or
    &quot;-&quot;:</p>
<dl class="Bl-tag">
  <dt id="o~69"><a class="permalink" href="#o~69">o</a></dt>
  <dd>A &quot;/&quot; specifies that the include/exclude rule should be matched
      against the absolute pathname of the current item. For example, &quot;-/
      /etc/passwd&quot; would exclude the passwd file any time the transfer was
      sending files from the &quot;/etc&quot; directory, and &quot;-/
      subdir/foo&quot; would always exclude &quot;foo&quot; when it is in a dir
      named &quot;subdir&quot;, even if &quot;foo&quot; is at the root of the
      current transfer.</dd>
  <dt id="o~70"><a class="permalink" href="#o~70">o</a></dt>
  <dd>A &quot;!&quot; specifies that the include/exclude should take effect if
      the pattern fails to match. For instance, &quot;-! */&quot; would exclude
      all non-directories.</dd>
  <dt id="o~71"><a class="permalink" href="#o~71">o</a></dt>
  <dd>A <b>C</b> is used to indicate that all the global CVS-exclude rules
      should be inserted as excludes in place of the &quot;-C&quot;. No arg
      should follow.</dd>
  <dt id="o~72"><a class="permalink" href="#o~72">o</a></dt>
  <dd>An <b>s</b> is used to indicate that the rule applies to the sending side.
      When a rule affects the sending side, it prevents files from being
      transferred. The default is for a rule to affect both sides unless
      <b>--delete-excluded</b> was specified, in which case default rules become
      sender-side only. See also the hide (H) and show (S) rules, which are an
      alternate way to specify sending-side includes/excludes.</dd>
  <dt id="o~73"><a class="permalink" href="#o~73">o</a></dt>
  <dd>An <b>r</b> is used to indicate that the rule applies to the receiving
      side. When a rule affects the receiving side, it prevents files from being
      deleted. See the <b>s</b> modifier for more info. See also the protect (P)
      and risk (R) rules, which are an alternate way to specify receiver-side
      includes/excludes.
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">Per-directory rules are inherited in all subdirectories of the
    directory where the merge-file was found unless the 'n' modifier was used.
    Each subdirectory's rules are prefixed to the inherited per-directory rules
    from its parents, which gives the newest rules a higher priority than the
    inherited rules. The entire set of dir-merge rules are grouped together in
    the spot where the merge-file was specified, so it is possible to override
    dir-merge rules via a rule that got specified earlier in the list of global
    rules. When the list-clearing rule (&quot;!&quot;) is read from a
    per-directory file, it only clears the inherited rules for the current merge
    file.</p>
<p class="Pp">Another way to prevent a single rule from a dir-merge file from
    being inherited is to anchor it with a leading slash. Anchored rules in a
    per-directory merge-file are relative to the merge-file's directory, so a
    pattern &quot;/foo&quot; would only match the file &quot;foo&quot; in the
    directory where the dir-merge filter file was found.</p>
<p class="Pp">Here's an example filter file which you'd specify via
    <b>--filter=&quot;. file&quot;:</b></p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">merge /home/user/.global-filter</span>
<br/>
<span class="Li">- *.gz</span>
<br/>
<span class="Li">dir-merge .rules</span>
<br/>
<span class="Li">+ *.[ch]</span>
<br/>
<span class="Li">- *.o</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">This will merge the contents of the /home/user/.global-filter file
    at the start of the list and also turns the &quot;.rules&quot; filename into
    a per-directory filter file. All rules read in prior to the start of the
    directory scan follow the global anchoring rules (i.e. a leading slash
    matches at the root of the transfer).</p>
<p class="Pp">If a per-directory merge-file is specified with a path that is a
    parent directory of the first transfer directory, rsync will scan all the
    parent dirs from that starting point to the transfer directory for the
    indicated per-directory file. For instance, here is a common filter (see
    <b>-F</b>):</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">--filter=': /.rsync-filter'</span></div>
<p class="Pp"></p>
<p class="Pp">That rule tells rsync to scan for the file .rsync-filter in all
    directories from the root down through the parent directory of the transfer
    prior to the start of the normal directory scan of the file in the
    directories that are sent as a part of the transfer. (Note: for an rsync
    daemon, the root is always the same as the module's &quot;path&quot;.)</p>
<p class="Pp">Some examples of this pre-scanning for per-directory files:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -avF /src/path/ /dest/dir</span>
<br/>
<span class="Li">rsync -av --filter=': ../../.rsync-filter' /src/path/
  /dest/dir</span>
<br/>
<span class="Li">rsync -av --filter=': .rsync-filter' /src/path/
  /dest/dir</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">The first two commands above will look for
    &quot;.rsync-filter&quot; in &quot;/&quot; and &quot;/src&quot; before the
    normal scan begins looking for the file in &quot;/src/path&quot; and its
    subdirectories. The last command avoids the parent-dir scan and only looks
    for the &quot;.rsync-filter&quot; files in each directory that is a part of
    the transfer.</p>
<p class="Pp">If you want to include the contents of a &quot;.cvsignore&quot; in
    your patterns, you should use the rule &quot;:C&quot;, which creates a
    dir-merge of the .cvsignore file, but parsed in a CVS-compatible manner. You
    can use this to affect where the <b>--cvs-exclude</b> (<b>-C</b>) option's
    inclusion of the per-directory .cvsignore file gets placed into your rules
    by putting the &quot;:C&quot; wherever you like in your filter rules.
    Without this, rsync would add the dir-merge rule for the .cvsignore file at
    the end of all your other rules (giving it a lower priority than your
    command-line rules). For example:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">cat &lt;&lt;EOT | rsync -avC --filter='.
  -' a/ b</span>
<br/>
<span class="Li">+ foo.o</span>
<br/>
<span class="Li">:C</span>
<br/>
<span class="Li">- *.old</span>
<br/>
<span class="Li">EOT</span>
<br/>
<span class="Li">rsync -avC --include=foo.o -f :C --exclude='*.old' a/ b</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">Both of the above rsync commands are identical. Each one will
    merge all the per-directory .cvsignore rules in the middle of the list
    rather than at the end. This allows their dir-specific rules to supersede
    the rules that follow the :C instead of being subservient to all your rules.
    To affect the other CVS exclude rules (i.e. the default list of exclusions,
    the contents of $HOME/.cvsignore, and the value of $CVSIGNORE) you should
    omit the <b>-C</b> command-line option and instead insert a &quot;-C&quot;
    rule into your filter rules; e.g. &quot;--filter=-C&quot;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIST-CLEARING_FILTER_RULE"><a class="permalink" href="#LIST-CLEARING_FILTER_RULE">LIST-CLEARING
  FILTER RULE</a></h1>
<p class="Pp">You can clear the current include/exclude list by using the
    &quot;!&quot; filter rule (as introduced in the FILTER RULES section above).
    The &quot;current&quot; list is either the global list of rules (if the rule
    is encountered while parsing the filter options) or a set of per-directory
    rules (which are inherited in their own sub-list, so a subdirectory can use
    this to clear out the parent's rules).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ANCHORING_INCLUDE/EXCLUDE_PATTERNS"><a class="permalink" href="#ANCHORING_INCLUDE/EXCLUDE_PATTERNS">ANCHORING
  INCLUDE/EXCLUDE PATTERNS</a></h1>
<p class="Pp">As mentioned earlier, global include/exclude patterns are anchored
    at the &quot;root of the transfer&quot; (as opposed to per-directory
    patterns, which are anchored at the merge-file's directory). If you think of
    the transfer as a subtree of names that are being sent from sender to
    receiver, the transfer-root is where the tree starts to be duplicated in the
    destination directory. This root governs where patterns that start with a /
    match.</p>
<p class="Pp">Because the matching is relative to the transfer-root, changing
    the trailing slash on a source path or changing your use of the
    <b>--relative</b> option affects the path you need to use in your matching
    (in addition to changing how much of the file tree is duplicated on the
    destination host). The following examples demonstrate this.</p>
<p class="Pp">Let's say that we want to match two source files, one with an
    absolute path of &quot;/home/me/foo/bar&quot;, and one with a path of
    &quot;/home/you/bar/baz&quot;. Here is how the various command choices
    differ for a 2-source transfer:</p>
<p class="Pp"></p>
<div class="Bd-indent">Example cmd: rsync -a /home/me /home/you /dest
<br/>
+/- pattern: /me/foo/bar
<br/>
+/- pattern: /you/bar/baz
<br/>
Target file: /dest/me/foo/bar
<br/>
Target file: /dest/you/bar/baz
<br/>
</div>
<p class="Pp"></p>
<p class="Pp"></p>
<div class="Bd-indent">Example cmd: rsync -a /home/me/ /home/you/ /dest
<br/>
+/- pattern: /foo/bar (note missing &quot;me&quot;)
<br/>
+/- pattern: /bar/baz (note missing &quot;you&quot;)
<br/>
Target file: /dest/foo/bar
<br/>
Target file: /dest/bar/baz
<br/>
</div>
<p class="Pp"></p>
<p class="Pp"></p>
<div class="Bd-indent">Example cmd: rsync -a --relative /home/me/ /home/you
  /dest
<br/>
+/- pattern: /home/me/foo/bar (note full path)
<br/>
+/- pattern: /home/you/bar/baz (ditto)
<br/>
Target file: /dest/home/me/foo/bar
<br/>
Target file: /dest/home/you/bar/baz
<br/>
</div>
<p class="Pp"></p>
<p class="Pp"></p>
<div class="Bd-indent">Example cmd: cd /home; rsync -a --relative me/foo you/
  /dest
<br/>
+/- pattern: /me/foo/bar (starts at specified path)
<br/>
+/- pattern: /you/bar/baz (ditto)
<br/>
Target file: /dest/me/foo/bar
<br/>
Target file: /dest/you/bar/baz
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">The easiest way to see what name you should filter is to just look
    at the output when using <b>--verbose</b> and put a / in front of the name
    (use the <b>--dry-run</b> option if you're not yet ready to copy any
  files).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PER-DIRECTORY_RULES_AND_DELETE"><a class="permalink" href="#PER-DIRECTORY_RULES_AND_DELETE">PER-DIRECTORY
  RULES AND DELETE</a></h1>
<p class="Pp">Without a delete option, per-directory rules are only relevant on
    the sending side, so you can feel free to exclude the merge files themselves
    without affecting the transfer. To make this easy, the 'e' modifier adds
    this exclude for you, as seen in these two equivalent commands:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -av --filter=': .excl'
  --exclude=.excl host:src/dir /dest</span>
<br/>
<span class="Li">rsync -av --filter=':e .excl' host:src/dir /dest</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">However, if you want to do a delete on the receiving side AND you
    want some files to be excluded from being deleted, you'll need to be sure
    that the receiving side knows what files to exclude. The easiest way is to
    include the per-directory merge files in the transfer and use
    <b>--delete-after</b>, because this ensures that the receiving side gets all
    the same exclude rules as the sending side before it tries to delete
    anything:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">rsync -avF --delete-after host:src/dir
  /dest</span></div>
<p class="Pp"></p>
<p class="Pp">However, if the merge files are not a part of the transfer, you'll
    need to either specify some global exclude rules (i.e. specified on the
    command line), or you'll need to maintain your own per-directory merge files
    on the receiving side. An example of the first is this (assume that the
    remote .rules files exclude themselves):</p>
<p class="Pp"></p>
<pre>rsync -av --filter=': .rules' --filter='. /my/extra.rules'
<br/>
   --delete host:src/dir /dest</pre>
<p class="Pp"></p>
<p class="Pp">In the above example the extra.rules file can affect both sides of
    the transfer, but (on the sending side) the rules are subservient to the
    rules merged from the .rules files because they were specified after the
    per-directory merge rule.</p>
<p class="Pp">In one final example, the remote side is excluding the
    .rsync-filter files from the transfer, but we want to use our own
    .rsync-filter files to control what gets deleted on the receiving side. To
    do this we must specifically exclude the per-directory merge files (so that
    they don't get deleted) and then put rules into the local files to control
    what else should not get deleted. Like one of these commands:</p>
<p class="Pp"></p>
<pre>
<br/>
    rsync -av --filter=':e /.rsync-filter' --delete \ 
<br/>
        host:src/dir /dest
<br/>
    rsync -avFF --delete host:src/dir /dest</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="BATCH_MODE"><a class="permalink" href="#BATCH_MODE">BATCH
  MODE</a></h1>
<p class="Pp">Batch mode can be used to apply the same set of updates to many
    identical systems. Suppose one has a tree which is replicated on a number of
    hosts. Now suppose some changes have been made to this source tree and those
    changes need to be propagated to the other hosts. In order to do this using
    batch mode, rsync is run with the write-batch option to apply the changes
    made to the source tree to one of the destination trees. The write-batch
    option causes the rsync client to store in a &quot;batch file&quot; all the
    information needed to repeat this operation against other, identical
    destination trees.</p>
<p class="Pp">To apply the recorded changes to another destination tree, run
    rsync with the read-batch option, specifying the name of the same batch
    file, and the destination tree. Rsync updates the destination tree using the
    information stored in the batch file.</p>
<p class="Pp">For convenience, one additional file is creating when the
    write-batch option is used. This file's name is created by appending
    &quot;.sh&quot; to the batch filename. The .sh file contains a command-line
    suitable for updating a destination tree using that batch file. It can be
    executed using a Bourne (or Bourne-like) shell, optionally passing in an
    alternate destination tree pathname which is then used instead of the
    original path. This is useful when the destination tree path differs from
    the original destination tree path.</p>
<p class="Pp">Generating the batch file once saves having to perform the file
    status, checksum, and data block generation more than once when updating
    multiple destination trees. Multicast transport protocols can be used to
    transfer the batch update files in parallel to many hosts at once, instead
    of sending the same data to every host individually.</p>
<p class="Pp">Examples:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">$ rsync --write-batch=foo -a
  host:/source/dir/ /adest/dir/</span>
<br/>
<span class="Li">$ scp foo* remote:</span>
<br/>
<span class="Li">$ ssh remote ./foo.sh /bdest/dir/</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">$ rsync --write-batch=foo -a
  /source/dir/ /adest/dir/</span>
<br/>
<span class="Li">$ ssh remote rsync --read-batch=- -a /bdest/dir/ &lt;foo</span>
<br/>
</div>
<p class="Pp"></p>
<p class="Pp">In these examples, rsync is used to update /adest/dir/ from
    /source/dir/ and the information to repeat this operation is stored in
    &quot;foo&quot; and &quot;foo.sh&quot;. The host &quot;remote&quot; is then
    updated with the batched data going into the directory /bdest/dir. The
    differences between the two examples reveals some of the flexibility you
    have in how you deal with batches:</p>
<dl class="Bl-tag">
  <dt id="o~74"><a class="permalink" href="#o~74">o</a></dt>
  <dd>The first example shows that the initial copy doesn't have to be local --
      you can push or pull data to/from a remote host using either the
      remote-shell syntax or rsync daemon syntax, as desired.</dd>
  <dt id="o~75"><a class="permalink" href="#o~75">o</a></dt>
  <dd>The first example uses the created &quot;foo.sh&quot; file to get the
      right rsync options when running the read-batch command on the remote
      host.</dd>
  <dt id="o~76"><a class="permalink" href="#o~76">o</a></dt>
  <dd>The second example reads the batch data via standard input so that the
      batch file doesn't need to be copied to the remote machine first. This
      example avoids the foo.sh script because it needed to use a modified
      <b>--read-batch</b> option, but you could edit the script file if you
      wished to make use of it (just be sure that no other option is trying to
      use standard input, such as the &quot;<b>--exclude-from=-</b>&quot;
      option).
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">Caveats:</p>
<p class="Pp">The read-batch option expects the destination tree that it is
    updating to be identical to the destination tree that was used to create the
    batch update fileset. When a difference between the destination trees is
    encountered the update might be discarded with a warning (if the file
    appears to be up-to-date already) or the file-update may be attempted and
    then, if the file fails to verify, the update discarded with an error. This
    means that it should be safe to re-run a read-batch operation if the command
    got interrupted. If you wish to force the batched-update to always be
    attempted regardless of the file's size and date, use the <b>-I</b> option
    (when reading the batch). If an error occurs, the destination tree will
    probably be in a partially updated state. In that case, rsync can be used in
    its regular (non-batch) mode of operation to fix up the destination
  tree.</p>
<p class="Pp">The rsync version used on all destinations must be at least as new
    as the one used to generate the batch file. Rsync will die with an error if
    the protocol version in the batch file is too new for the batch-reading
    rsync to handle. See also the <b>--protocol</b> option for a way to have the
    creating rsync generate a batch file that an older rsync can understand.
    (Note that batch files changed format in version 2.6.3, so mixing versions
    older than that with newer versions will not work.)</p>
<p class="Pp">When reading a batch file, rsync will force the value of certain
    options to match the data in the batch file if you didn't set them to the
    same as the batch-writing command. Other options can (and should) be
    changed. For instance <b>--write-batch</b> changes to <b>--read-batch</b>,
    <b>--files-from</b> is dropped, and the
    <b>--filter</b>/<b>--include</b>/<b>--exclude</b> options are not needed
    unless one of the <b>--delete</b> options is specified.</p>
<p class="Pp">The code that creates the BATCH.sh file transforms any
    filter/include/exclude options into a single list that is appended as a
    &quot;here&quot; document to the shell script file. An advanced user can use
    this to modify the exclude list if a change in what gets deleted by
    <b>--delete</b> is desired. A normal user can ignore this detail and just
    use the shell script as an easy way to run the appropriate
    <b>--read-batch</b> command for the batched data.</p>
<p class="Pp">The original batch mode in rsync was based on &quot;rsync+&quot;,
    but the latest version uses a new implementation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYMBOLIC_LINKS"><a class="permalink" href="#SYMBOLIC_LINKS">SYMBOLIC
  LINKS</a></h1>
<p class="Pp">Three basic behaviors are possible when rsync encounters a
    symbolic link in the source directory.</p>
<p class="Pp">By default, symbolic links are not transferred at all. A message
    &quot;skipping non-regular&quot; file is emitted for any symlinks that
    exist.</p>
<p class="Pp">If <b>--links</b> is specified, then symlinks are recreated with
    the same target on the destination. Note that <b>--archive</b> implies
    <b>--links</b>.</p>
<p class="Pp">If <b>--copy-links</b> is specified, then symlinks are
    &quot;collapsed&quot; by copying their referent, rather than the
  symlink.</p>
<p class="Pp">rsync also distinguishes &quot;safe&quot; and &quot;unsafe&quot;
    symbolic links. An example where this might be used is a web site mirror
    that wishes ensure the rsync module they copy does not include symbolic
    links to <b>/etc/passwd</b> in the public section of the site. Using
    <b>--copy-unsafe-links</b> will cause any links to be copied as the file
    they point to on the destination. Using <b>--safe-links</b> will cause
    unsafe links to be omitted altogether. (Note that you must specify
    <b>--links</b> for <b>--safe-links</b> to have any effect.)</p>
<p class="Pp">Symbolic links are considered unsafe if they are absolute symlinks
    (start with <b>/</b>), empty, or if they contain enough
    <b>&quot;..&quot;</b> components to ascend from the directory being
  copied.</p>
<p class="Pp">Here's a summary of how the symlink options are interpreted. The
    list is in order of precedence, so if your combination of options isn't
    mentioned, use the first line that is a complete subset of your options:</p>
<dl class="Bl-tag">
  <dt id="copy~3"><a class="permalink" href="#copy~3"><b>--copy-links</b></a></dt>
  <dd>Turn all symlinks into normal files (leaving no symlinks for any other
      options to affect).</dd>
  <dt id="links"><a class="permalink" href="#links"><b>--links
    --copy-unsafe-links</b></a></dt>
  <dd>Turn all unsafe symlinks into files and duplicate all safe symlinks.</dd>
  <dt id="copy~4"><a class="permalink" href="#copy~4"><b>--copy-unsafe-links</b></a></dt>
  <dd>Turn all unsafe symlinks into files, noisily skip all safe symlinks.</dd>
  <dt id="links~2"><a class="permalink" href="#links~2"><b>--links
    --safe-links</b></a></dt>
  <dd>Duplicate safe symlinks and skip unsafe ones.</dd>
  <dt id="links~3"><a class="permalink" href="#links~3"><b>--links</b></a></dt>
  <dd>Duplicate all symlinks.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">rsync occasionally produces error messages that may seem a little
    cryptic. The one that seems to cause the most confusion is &quot;protocol
    version mismatch -- is your shell clean?&quot;.</p>
<p class="Pp">This message is usually caused by your startup scripts or remote
    shell facility producing unwanted garbage on the stream that rsync is using
    for its transport. The way to diagnose this problem is to run your remote
    shell like this:</p>
<p class="Pp"></p>
<div class="Bd-indent"><span class="Li">ssh remotehost /bin/true &gt;
  out.dat</span></div>
<p class="Pp"></p>
<p class="Pp">then look at out.dat. If everything is working correctly then
    out.dat should be a zero length file. If you are getting the above error
    from rsync then you will probably find that out.dat contains some text or
    data. Look at the contents and try to work out what is producing it. The
    most common cause is incorrectly configured shell startup scripts (such as
    .cshrc or .profile) that contain output statements for non-interactive
    logins.</p>
<p class="Pp">If you are having trouble debugging filter patterns, then try
    specifying the <b>-vv</b> option. At this level of verbosity rsync will show
    why each individual file is included or excluded.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_VALUES"><a class="permalink" href="#EXIT_VALUES">EXIT
  VALUES</a></h1>
<dl class="Bl-tag">
  <dt><b>0</b></dt>
  <dd>Success</dd>
  <dt><b>1</b></dt>
  <dd>Syntax or usage error</dd>
  <dt><b>2</b></dt>
  <dd>Protocol incompatibility</dd>
  <dt><b>3</b></dt>
  <dd>Errors selecting input/output files, dirs</dd>
  <dt><b>4</b></dt>
  <dd>Requested action not supported: an attempt was made to manipulate 64-bit
      files on a platform that cannot support them; or an option was specified
      that is supported by the client and not by the server.</dd>
  <dt><b>5</b></dt>
  <dd>Error starting client-server protocol</dd>
  <dt><b>6</b></dt>
  <dd>Daemon unable to append to log-file</dd>
  <dt><b>10</b></dt>
  <dd>Error in socket I/O</dd>
  <dt><b>11</b></dt>
  <dd>Error in file I/O</dd>
  <dt><b>12</b></dt>
  <dd>Error in rsync protocol data stream</dd>
  <dt><b>13</b></dt>
  <dd>Errors with program diagnostics</dd>
  <dt><b>14</b></dt>
  <dd>Error in IPC code</dd>
  <dt><b>20</b></dt>
  <dd>Received SIGUSR1 or SIGINT</dd>
  <dt><b>21</b></dt>
  <dd>Some error returned by <span class="Li">waitpid()</span></dd>
  <dt><b>22</b></dt>
  <dd>Error allocating core memory buffers</dd>
  <dt><b>23</b></dt>
  <dd>Partial transfer due to error</dd>
  <dt><b>24</b></dt>
  <dd>Partial transfer due to vanished source files</dd>
  <dt><b>25</b></dt>
  <dd>The --max-delete limit stopped deletions</dd>
  <dt><b>30</b></dt>
  <dd>Timeout in data send/receive
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt id="CHOSEN_RSYNC"><a class="permalink" href="#CHOSEN_RSYNC"><b>CHOSEN_RSYNC</b></a></dt>
  <dd>The CHOSEN_RSYNC environment variable allows you to explicitly select an
      rsync implementation to use when /usr/bin/rsync is invoked. It may be set
      to either &quot;rsync_samba&quot; to use this version of rsync, or
      &quot;rsync_openrsync&quot; to use openrsync instead. Note that for remote
      transfers, setting this environment variable locally has no effect on the
      rsync implementation used on the remote end. The <b>--rsync-path</b>
      option may be used in conjunction with the <b>env</b>(1) utility to
      request a specific implementation on the remote end, if the remote end
      supports also supports the CHOSEN_RSYNC environment variable.</dd>
  <dt id="CVSIGNORE"><a class="permalink" href="#CVSIGNORE"><b>CVSIGNORE</b></a></dt>
  <dd>The CVSIGNORE environment variable supplements any ignore patterns in
      .cvsignore files. See the <b>--cvs-exclude</b> option for more
    details.</dd>
  <dt id="RSYNC_RSH"><a class="permalink" href="#RSYNC_RSH"><b>RSYNC_RSH</b></a></dt>
  <dd>The RSYNC_RSH environment variable allows you to override the default
      shell used as the transport for rsync. Command line options are permitted
      after the command name, just as in the <b>-e</b> option.</dd>
  <dt id="RSYNC_PROXY"><a class="permalink" href="#RSYNC_PROXY"><b>RSYNC_PROXY</b></a></dt>
  <dd>The RSYNC_PROXY environment variable allows you to redirect your rsync
      client to use a web proxy when connecting to a rsync daemon. You should
      set RSYNC_PROXY to a hostname:port pair.</dd>
  <dt id="RSYNC_PASSWORD"><a class="permalink" href="#RSYNC_PASSWORD"><b>RSYNC_PASSWORD</b></a></dt>
  <dd>Setting RSYNC_PASSWORD to the required password allows you to run
      authenticated rsync connections to an rsync daemon without user
      intervention. Note that this does not supply a password to a shell
      transport such as ssh.</dd>
  <dt id="USER"><a class="permalink" href="#USER"><b>USER</b> or
    <b>LOGNAME</b></a></dt>
  <dd>The USER or LOGNAME environment variables are used to determine the
      default username sent to an rsync daemon. If neither is set, the username
      defaults to &quot;nobody&quot;.</dd>
  <dt id="HOME"><a class="permalink" href="#HOME"><b>HOME</b></a></dt>
  <dd>The HOME environment variable is used to find the user's default
      .cvsignore file.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<p class="Pp">/etc/rsyncd.conf or rsyncd.conf</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>openrsync</b>(1) <b>rsyncd.conf</b>(5) <b>fcntl</b>(2)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">times are transferred as *nix time_t values</p>
<p class="Pp">When transferring to FAT filesystems rsync may re-sync unmodified
    files. See the comments on the <b>--modify-window</b> option.</p>
<p class="Pp">file permissions, devices, etc. are transferred as native
    numerical values</p>
<p class="Pp">see also the comments on the <b>--delete</b> option</p>
<p class="Pp">Please report bugs! See the website at http://rsync.samba.org/</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">This man page is current for version 2.6.9 of rsync.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INTERNAL_OPTIONS"><a class="permalink" href="#INTERNAL_OPTIONS">INTERNAL
  OPTIONS</a></h1>
<p class="Pp">The options <b>--server</b> and <b>--sender</b> are used
    internally by rsync, and should never be typed by a user under normal
    circumstances. Some awareness of these options may be needed in certain
    scenarios, such as when setting up a login that can only run an rsync
    command. For instance, the support directory of the rsync distribution has
    an example script named rrsync (for restricted rsync) that can be used with
    a restricted ssh login.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CREDITS"><a class="permalink" href="#CREDITS">CREDITS</a></h1>
<p class="Pp">rsync is distributed under the GNU public license. See the file
    COPYING for details.</p>
<p class="Pp">A WEB site is available at http://rsync.samba.org/. The site
    includes an FAQ-O-Matic which may cover questions unanswered by this manual
    page.</p>
<p class="Pp">The primary ftp site for rsync is
  ftp://rsync.samba.org/pub/rsync.</p>
<p class="Pp">We would be delighted to hear from you if you like this
  program.</p>
<p class="Pp">This program uses the excellent zlib compression library written
    by Jean-loup Gailly and Mark Adler.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THANKS"><a class="permalink" href="#THANKS">THANKS</a></h1>
<p class="Pp">Thanks to Richard Brent, Brendan Mackay, Bill Waite, Stephen
    Rothwell and David Bell for helpful suggestions, patches and testing of
    rsync. I've probably missed some people, my apologies if I have.</p>
<p class="Pp">Especial thanks also to: David Dykstra, Jos Backus, Sebastian
    Krahmer, Martin Pool, Wayne Davison, J.W. Schultz.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">rsync was originally written by Andrew Tridgell and Paul
    Mackerras. Many people have later contributed to it.</p>
<p class="Pp">Mailing lists for support and development are available at
    http://lists.samba.org</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">6 Nov 2006</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
