<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Mail::SPF::Mech(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::SPF::Mech(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::SPF::Mech(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Mail::SPF::Mech - SPF record mechanism base class</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">An object of class <b>Mail::SPF::Mech</b> represents a mechanism
    within an SPF record. Mail::SPF::Mech cannot be instantiated directly.
    Create an instance of a concrete sub-class instead.</p>
<section class="Ss">
<h2 class="Ss" id="Constructors"><a class="permalink" href="#Constructors">Constructors</a></h2>
<p class="Pp">The following constructors are provided:</p>
<dl class="Bl-tag">
  <dt id="new(_options)"><a class="permalink" href="#new(_options)"><b>new(%options)</b>:
    returns <i>Mail::SPF::Mech</i></a></dt>
  <dd><i>Abstract</i>. Creates a new SPF record mechanism object.
    <p class="Pp"><span class="Li">%options</span> is a list of key/value pairs
        representing any of the following options:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="text"><a class="permalink" href="#text"><b>text</b></a></dt>
  <dd>A <i>string</i> denoting the unparsed text of the mechanism.</dd>
  <dt id="qualifier"><a class="permalink" href="#qualifier"><b>qualifier</b></a></dt>
  <dd>A single-character <i>string</i> denoting the qualifier of the mechanism.
      Any of the following may be specified: <b>'+'</b>
      (<span class="Li">&quot;Pass&quot;</span>), <b>'-'</b>
      (<span class="Li">&quot;Fail&quot;</span>), <b>'~'</b>
      (<span class="Li">&quot;SoftFail&quot;</span>), <b>'?'</b>
      (<span class="Li">&quot;Neutral&quot;</span>). See RFC 4408, 4.6.2 and
      2.5, for their meanings. Defaults to <b>'+'</b>.</dd>
  <dt id="name"><a class="permalink" href="#name"><b>name</b></a></dt>
  <dd>A <i>string</i> denoting the name of the mechanism. <i>Required</i> if a
      generic <i>Mail::SPF::Mech</i> object (as opposed to a specific sub-class)
      is being constructed.</dd>
  <dt id="ip_network"><a class="permalink" href="#ip_network"><b>ip_network</b></a></dt>
  <dd>A <i>NetAddr::IP</i> object denoting an optional IP address network
      parameter of the mechanism. Can be either an IPv4 or an IPv6 address, with
      an optional network prefix length. IPv4-mapped IPv6 addresses (e.g.
      '::ffff:192.168.0.1') must <i>not</i> be specified directly, but as plain
      IPv4 addresses.</dd>
  <dt id="domain_spec"><a class="permalink" href="#domain_spec"><b>domain_spec</b></a></dt>
  <dd>Either a plain <i>string</i> or a <i>Mail::SPF::MacroString</i> object
      denoting an optional <span class="Li">&quot;domain-spec&quot;</span>
      parameter of the mechanism.</dd>
  <dt id="ipv4_prefix_length"><a class="permalink" href="#ipv4_prefix_length"><b>ipv4_prefix_length</b></a></dt>
  <dd></dd>
  <dt id="ipv6_prefix_length"><a class="permalink" href="#ipv6_prefix_length"><b>ipv6_prefix_length</b></a></dt>
  <dd>A <i>string</i> denoting an optional IPv4 or IPv6 network prefix length
      for the <span class="Li">&quot;domain_spec&quot;</span> of the mechanism.
      Note that these options do not apply to the
      <span class="Li">&quot;ip_network&quot;</span> option, which already
      includes an optional network prefix length.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">Other options may be specified by sub-classes of
  Mail::SPF::Mech.</p>
</div>
<dl class="Bl-tag">
  <dt id="new_from_string($text,"><a class="permalink" href="#new_from_string($text,"><b>new_from_string($text,
    </b><span class="Li"><b>%options</b></span><b>)</b>: returns
    <i>Mail::SPF::Mech</i>; throws <i>Mail::SPF::ENothingToParse</i>,
    <i>Mail::SPF::EInvalidMech</i></a></dt>
  <dd><i>Abstract</i>. Creates a new SPF record mechanism object by parsing the
      string and any options given.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Class_methods"><a class="permalink" href="#Class_methods">Class
  methods</a></h2>
<p class="Pp">The following class methods are provided:</p>
<dl class="Bl-tag">
  <dt id="default_qualifier"><a class="permalink" href="#default_qualifier"><b>default_qualifier</b>:
    returns <i>string</i></a></dt>
  <dd>Returns the default qualifier, i.e. <b>'+'</b>.</dd>
  <dt id="default_ipv4_prefix_length"><a class="permalink" href="#default_ipv4_prefix_length"><b>default_ipv4_prefix_length</b>:
    returns <i>integer</i></a></dt>
  <dd>Returns the default IPv4 network prefix length, i.e. <b>32</b>.</dd>
  <dt id="default_ipv6_prefix_length"><a class="permalink" href="#default_ipv6_prefix_length"><b>default_ipv6_prefix_length</b>:
    returns <i>integer</i></a></dt>
  <dd>Returns the default IPv6 network prefix length, i.e. <b>128</b>.</dd>
  <dt id="qualifier_pattern"><a class="permalink" href="#qualifier_pattern"><b>qualifier_pattern</b>:
    returns <i>Regexp</i></a></dt>
  <dd>Returns a regular expression that matches any legal mechanism qualifier,
      i.e. <b>'+'</b>, <b>'-'</b>, <b>'~'</b>, or <b>'?'</b>.</dd>
  <dt id="name~2"><a class="permalink" href="#name~2"><b>name</b>: returns
    <i>string</i></a></dt>
  <dd><i>Abstract</i>. Returns the name of the mechanism.
    <p class="Pp">This method is abstract and must be implemented by sub-classes
        of Mail::SPF::Mech.</p>
  </dd>
  <dt id="name_pattern"><a class="permalink" href="#name_pattern"><b>name_pattern</b>:
    returns <i>Regexp</i></a></dt>
  <dd>Returns a regular expression that matches any legal mechanism name.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Instance_methods"><a class="permalink" href="#Instance_methods">Instance
  methods</a></h2>
<p class="Pp">The following instance methods are provided:</p>
<dl class="Bl-tag">
  <dt id="text~2"><a class="permalink" href="#text~2"><b>text</b>: returns
    <i>string</i>; throws <i>Mail::SPF::ENoUnparsedText</i></a></dt>
  <dd>Returns the unparsed text of the mechanism. Throws a
      <i>Mail::SPF::ENoUnparsedText</i> exception if the mechanism was created
      synthetically instead of being parsed, and no text was provided.</dd>
  <dt id="qualifier~2"><a class="permalink" href="#qualifier~2"><b>qualifier</b>:
    returns <i>string</i></a></dt>
  <dd>Returns the qualifier of the mechanism. See the description of the
      <span class="Li">&quot;new&quot;</span> constructor's
      <span class="Li">&quot;qualifier&quot;</span> option.</dd>
  <dt id="params"><a class="permalink" href="#params"><b>params</b>: returns
    <i>string</i></a></dt>
  <dd><i>Abstract</i>. Returns the mechanism's parameters formatted as a string.
    <p class="Pp">A sub-class of Mail::SPF::Mech does not have to implement this
        method if it supports no parameters.</p>
  </dd>
  <dt id="stringify"><a class="permalink" href="#stringify"><b>stringify</b>:
    returns <i>string</i></a></dt>
  <dd>Formats the mechanism's qualifier, name, and parameters as a string and
      returns it. (A qualifier that matches the default of <b>'+'</b> is
      omitted.) You can simply use a Mail::SPF::Mech object as a string for the
      same effect, see &quot;OVERLOADING&quot;.</dd>
  <dt id="domain($server,"><a class="permalink" href="#domain($server,"><b>domain($server,
    </b><span class="Li"><b>$request</b></span><b>)</b>: returns
    <i>string</i></a></dt>
  <dd>Returns the target domain of the mechanism. Depending on whether the
      mechanism does have an explicit
      <span class="Li">&quot;domain_spec&quot;</span> parameter, this is either
      the macro-expanded <span class="Li">&quot;domain_spec&quot;</span>
      parameter, or the request's authority domain (see
      &quot;authority_domain&quot; in Mail::SPF::Request) otherwise. Both a
      <i>Mail::SPF::Server</i> and a <i>Mail::SPF::Request</i> object are
      required for resolving the target domain.</dd>
  <dt id="match($server,"><a class="permalink" href="#match($server,"><b>match($server,
    </b><span class="Li"><b>$request</b></span><b>)</b>: returns <i>boolean</i>;
    throws <i>Mail::SPF::Result::Error</i></a></dt>
  <dd><i>Abstract</i>. Checks whether the mechanism matches the parameters of
      the given request (see Mail::SPF::Request) and returns <b>true</b> if it
      does, or <b>false</b> otherwise. In any case, takes both a
      <i>Mail::SPF::Server</i> and a <i>Mail::SPF::Request</i> object.
    <p class="Pp">This method is abstract and must be implemented by sub-classes
        of Mail::SPF::Mech.</p>
  </dd>
  <dt id="match_in_domain($server,"><a class="permalink" href="#match_in_domain($server,"><b>match_in_domain($server,
    </b><span class="Li"><b>$request</b></span><b>)</b>: returns <i>boolean</i>;
    throws <i>Mail::SPF::Result::Error</i></a></dt>
  <dd></dd>
  <dt id="match_in_domain($server,~2"><a class="permalink" href="#match_in_domain($server,~2"><b>match_in_domain($server,
    </b><span class="Li"><b>$request</b></span><b>,
    </b><span class="Li"><b>$domain</b></span><b>)</b>: returns <i>boolean</i>;
    throws <i>Mail::SPF::Result::Error</i></a></dt>
  <dd>Checks whether the mechanism's target domain name (that is, any of its DNS
      <span class="Li">&quot;A&quot;</span> or
      <span class="Li">&quot;AAAA&quot;</span> records) matches the given
      request's IP address (see &quot;ip_address&quot; in Mail::SPF::Request),
      and returns <b>true</b> if it does, or <b>false</b> otherwise. If an
      explicit domain is specified, it is used instead of the mechanism's target
      domain. The mechanism's IP network prefix lengths are respected when
      matching DNS address records against the request's IP address. See RFC
      4408, 5, for the exact algorithm used.
    <p class="Pp">This method exists mainly for the convenience of sub-classes
        of Mail::SPF::Mech.</p>
  </dd>
  <dt id="explain($server,"><a class="permalink" href="#explain($server,"><b>explain($server,
    </b><span class="Li"><b>$request</b></span><b>,
    </b><span class="Li"><b>$result</b></span><b>)</b></a></dt>
  <dd>Locally generates an explanation for why the mechanism caused the given
      result, and stores it in the given request object's state.
    <p class="Pp">There is no need to override this method in sub-classes. See
        the &quot;explanation_template&quot; method.</p>
  </dd>
  <dt id="explanation_template($server,"><a class="permalink" href="#explanation_template($server,"><b>explanation_template($server,
    </b><span class="Li"><b>$request</b></span><b>,
    </b><span class="Li"><b>$result</b></span><b>)</b>: returns
    <i>string</i></a></dt>
  <dd>Returns a macro string template for a locally generated explanation for
      why the mechanism caused the given result object.
    <p class="Pp">Sub-classes should either define an
        <span class="Li">&quot;explanation_templates_by_result_code&quot;</span>
        hash constant with their own templates, or override this method.</p>
  </dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OVERLOADING"><a class="permalink" href="#OVERLOADING">OVERLOADING</a></h1>
<p class="Pp">If a Mail::SPF::Mech object is used as a <i>string</i>, the
    <span class="Li">&quot;stringify&quot;</span> method is used to convert the
    object into a string.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Mail::SPF::Mech::All, Mail::SPF::Mech::IP4, Mail::SPF::Mech::IP6,
    Mail::SPF::Mech::A, Mail::SPF::Mech::MX, Mail::SPF::Mech::PTR,
    Mail::SPF::Mech::Exists, Mail::SPF::Mech::Include</p>
<p class="Pp">Mail::SPF, Mail::SPF::Record, Mail::SPF::Term</p>
<p class="Pp">&lt;http://tools.ietf.org/html/rfc4408&gt;</p>
<p class="Pp">For availability, support, and license information, see the README
    file included with Mail::SPF.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Julian Mehnle &lt;julian@mehnle.net&gt;, Shevek
    &lt;cpan@anarres.org&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2023-05-20</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
