<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   $OpenBSD: ssh-agent.1,v 1.82 2025/02/09 18:24:08 schwarze Exp $
  
   Author: Tatu Ylonen <ylo@cs.hut.fi>
   Copyright (c) 1995 Tatu Ylonen <ylo@cs.hut.fi>, Espoo, Finland
                      All rights reserved
  
   As far as I am concerned, the code I have written for this software
   can be used freely for any purpose.  Any derived versions of this
   software must be clearly marked as such, and if the derived work is
   incompatible with the protocol description in the RFC file, it must be
   called by a name other than "ssh" or "Secure Shell".
  
   Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
   Copyright (c) 1999 Aaron Campbell.  All rights reserved.
   Copyright (c) 1999 Theo de Raadt.  All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
   IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
   OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
   IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
   INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
   DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
   THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
   THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>SSH-AGENT(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SSH-AGENT(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">SSH-AGENT(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">ssh-agent</code> &#x2014;
    <span class="Nd">OpenSSH authentication agent</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">ssh-agent</code></td>
    <td>[<code class="Fl">-c</code> | <code class="Fl">-s</code>]
      [<code class="Fl">-Dd</code>] [<code class="Fl">-a</code>
      <var class="Ar">bind_address</var>] [<code class="Fl">-E</code>
      <var class="Ar">fingerprint_hash</var>] [<code class="Fl">-O</code>
      <var class="Ar">option</var>] [<code class="Fl">-P</code>
      <var class="Ar">allowed_providers</var>] [<code class="Fl">-t</code>
      <var class="Ar">life</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">ssh-agent</code></td>
    <td>[<code class="Fl">-a</code> <var class="Ar">bind_address</var>]
      [<code class="Fl">-E</code> <var class="Ar">fingerprint_hash</var>]
      [<code class="Fl">-O</code> <var class="Ar">option</var>]
      [<code class="Fl">-P</code> <var class="Ar">allowed_providers</var>]
      [<code class="Fl">-t</code> <var class="Ar">life</var>]
      <var class="Ar">command</var> [<var class="Ar">arg ...</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">ssh-agent</code></td>
    <td>[<code class="Fl">-c</code> | <code class="Fl">-s</code>]
      <code class="Fl">-k</code></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">ssh-agent</code> is a program to hold private
    keys used for public key authentication. Through use of environment
    variables the agent can be located and automatically used for authentication
    when logging in to other machines using <a class="Xr">ssh(1)</a>.</p>
<p class="Pp">The options are as follows:</p>
<dl class="Bl-tag">
  <dt id="a"><a class="permalink" href="#a"><code class="Fl">-a</code></a>
    <var class="Ar">bind_address</var></dt>
  <dd>Bind the agent to the <span class="Ux">UNIX</span>-domain socket
      <var class="Ar">bind_address</var>. The default is
      <span class="Pa">$TMPDIR/ssh-XXXXXXXXXX/agent.&lt;ppid&gt;</span>.</dd>
  <dt id="c"><a class="permalink" href="#c"><code class="Fl">-c</code></a></dt>
  <dd>Generate C-shell commands on standard output. This is the default if
      <code class="Ev">SHELL</code> looks like it's a csh style of shell.</dd>
  <dt id="D"><a class="permalink" href="#D"><code class="Fl">-D</code></a></dt>
  <dd>Foreground mode. When this option is specified,
      <code class="Nm">ssh-agent</code> will not fork.</dd>
  <dt id="d"><a class="permalink" href="#d"><code class="Fl">-d</code></a></dt>
  <dd>Debug mode. When this option is specified,
      <code class="Nm">ssh-agent</code> will not fork and will write debug
      information to standard error.</dd>
  <dt id="E"><a class="permalink" href="#E"><code class="Fl">-E</code></a>
    <var class="Ar">fingerprint_hash</var></dt>
  <dd>Specifies the hash algorithm used when displaying key fingerprints. Valid
      options are: &#x201C;md5&#x201D; and &#x201C;sha256&#x201D;. The default
      is &#x201C;sha256&#x201D;.</dd>
  <dt id="k"><a class="permalink" href="#k"><code class="Fl">-k</code></a></dt>
  <dd>Kill the current agent (given by the <code class="Ev">SSH_AGENT_PID</code>
      environment variable).</dd>
  <dt id="O"><a class="permalink" href="#O"><code class="Fl">-O</code></a>
    <var class="Ar">option</var></dt>
  <dd>Specify an option when starting <code class="Nm">ssh-agent</code>. The
      supported options are: <code class="Cm">allow-remote-pkcs11</code>,
      <code class="Cm">no-restrict-websafe</code> and
      <code class="Cm">websafe-allow</code>.
    <p class="Pp">The <code class="Cm">allow-remote-pkcs11</code> option allows
        clients of a forwarded <code class="Nm">ssh-agent</code> to load PKCS#11
        or FIDO provider libraries. By default only local clients may perform
        this operation. Note that signalling that an
        <code class="Nm">ssh-agent</code> client is remote is performed by
        <a class="Xr">ssh(1)</a>, and use of other tools to forward access to
        the agent socket may circumvent this restriction.</p>
    <p class="Pp">The <code class="Cm">no-restrict-websafe</code> option
        instructs <code class="Nm">ssh-agent</code> to permit signatures using
        FIDO keys that might be web authentication requests. By default,
        <code class="Nm">ssh-agent</code> refuses signature requests for FIDO
        keys where the key application string does not start with
        &#x201C;ssh:&#x201D; and when the data to be signed does not appear to
        be a <a class="Xr">ssh(1)</a> user authentication request or a
        <a class="Xr">ssh-keygen(1)</a> signature. The default behaviour
        prevents forwarded access to a FIDO key from also implicitly forwarding
        the ability to authenticate to websites.</p>
    <p class="Pp">Alternately the <code class="Cm">websafe-allow</code> option
        allows specifying a pattern-list of key application strings to replace
        the default application allow-list, for example:
        &#x201C;websafe-allow=ssh:*,example.org,*.example.com&#x201D;</p>
    <p class="Pp">See PATTERNS in <a class="Xr">ssh_config(5)</a> for a
        description of pattern-list syntax.</p>
  </dd>
  <dt id="P"><a class="permalink" href="#P"><code class="Fl">-P</code></a>
    <var class="Ar">allowed_providers</var></dt>
  <dd>Specify a pattern-list of acceptable paths for PKCS#11 provider and FIDO
      authenticator middleware shared libraries that may be used with the
      <code class="Fl">-S</code> or <code class="Fl">-s</code> options to
      <a class="Xr">ssh-add(1)</a>. Libraries that do not match the pattern list
      will be refused. The default list is
      &#x201C;usr/lib*/*,/usr/local/lib*/*&#x201D;.
    <p class="Pp">See PATTERNS in <a class="Xr">ssh_config(5)</a> for a
        description of pattern-list syntax.</p>
  </dd>
  <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a></dt>
  <dd>Generate Bourne shell commands on standard output. This is the default if
      <code class="Ev">SHELL</code> does not look like it's a csh style of
      shell.</dd>
  <dt id="t"><a class="permalink" href="#t"><code class="Fl">-t</code></a>
    <var class="Ar">life</var></dt>
  <dd>Set a default value for the maximum lifetime of identities added to the
      agent. The lifetime may be specified in seconds or in a time format
      specified in <a class="Xr">sshd_config(5)</a>. A lifetime specified for an
      identity with <a class="Xr">ssh-add(1)</a> overrides this value. Without
      this option the default maximum lifetime is forever.</dd>
  <dt><var class="Ar">command</var> [<var class="Ar">arg ...</var>]</dt>
  <dd>If a command (and optional arguments) is given, this is executed as a
      subprocess of the agent. The agent exits automatically when the command
      given on the command line terminates.</dd>
</dl>
<p class="Pp">There are three main ways to get an agent set up. The first is at
    the start of an X session, where all other windows or programs are started
    as children of the <code class="Nm">ssh-agent</code> program. The agent
    starts a command under which its environment variables are exported, for
    example <code class="Cm">ssh-agent xterm &amp;</code>. When the command
    terminates, so does the agent.</p>
<p class="Pp">The second method is used for a login session. When
    <code class="Nm">ssh-agent</code> is started, it prints the shell commands
    required to set its environment variables, which in turn can be evaluated in
    the calling shell, for example <code class="Cm">eval `ssh-agent
  -s`</code>.</p>
<p class="Pp">In both of these cases, <a class="Xr">ssh(1)</a> looks at these
    environment variables and uses them to establish a connection to the
  agent.</p>
<p class="Pp">The third way to run <code class="Nm">ssh-agent</code> is via
    socket activation from a supervising process, such as systemd. In this mode,
    the supervising process creates the listening socket and is responsible for
    starting <code class="Nm">ssh-agent</code> as needed, and also for
    communicating the location of the socket listener to other programs in the
    user's session. Socket activation is used when
    <code class="Nm">ssh-agent</code> is started with either of the
    <code class="Fl">-d</code> or <code class="Fl">-D</code> flags, no socket
    listening address specified by the <code class="Fl">-a</code> flag, and both
    the <code class="Ev">LISTEN_FDS</code> and
    <code class="Ev">LISTEN_PID</code> environment variables correctly supplied
    by the supervising process.</p>
<p class="Pp">The agent initially does not have any private keys. Keys are added
    using <a class="Xr">ssh-add(1)</a> or by <a class="Xr">ssh(1)</a> when
    <code class="Cm">AddKeysToAgent</code> is set in
    <a class="Xr">ssh_config(5)</a>. Multiple identities may be stored in
    <code class="Nm">ssh-agent</code> concurrently and <a class="Xr">ssh(1)</a>
    will automatically use them if present. <a class="Xr">ssh-add(1)</a> is also
    used to remove keys from <code class="Nm">ssh-agent</code> and to query the
    keys that are held in one.</p>
<p class="Pp">Connections to <code class="Nm">ssh-agent</code> may be forwarded
    from further remote hosts using the <code class="Fl">-A</code> option to
    <a class="Xr">ssh(1)</a> (but see the caveats documented therein), avoiding
    the need for authentication data to be stored on other machines.
    Authentication passphrases and private keys never go over the network: the
    connection to the agent is forwarded over SSH remote connections and the
    result is returned to the requester, allowing the user access to their
    identities anywhere in the network in a secure fashion.</p>
<p class="Pp"><code class="Nm">ssh-agent</code> will delete all keys it has
    loaded upon receiving <code class="Dv">SIGUSR1</code>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt id="SSH_AGENT_PID"><a class="permalink" href="#SSH_AGENT_PID"><code class="Ev">SSH_AGENT_PID</code></a></dt>
  <dd>When <code class="Nm">ssh-agent</code> starts, it stores the name of the
      agent's process ID (PID) in this variable.</dd>
  <dt id="SSH_AUTH_SOCK"><a class="permalink" href="#SSH_AUTH_SOCK"><code class="Ev">SSH_AUTH_SOCK</code></a></dt>
  <dd>When <code class="Nm">ssh-agent</code> starts, it creates a
      <span class="Ux">UNIX</span>-domain socket and stores its pathname in this
      variable. It is accessible only to the current user, but is easily abused
      by root or another instance of the same user.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa">$TMPDIR/ssh-XXXXXXXXXX/agent.&lt;ppid&gt;</span></dt>
  <dd><span class="Ux">UNIX</span>-domain sockets used to contain the connection
      to the authentication agent. These sockets should only be readable by the
      owner. The sockets should get automatically removed when the agent
    exits.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">ssh(1)</a>, <a class="Xr">ssh-add(1)</a>,
    <a class="Xr">ssh-keygen(1)</a>, <a class="Xr">ssh_config(5)</a>,
    <a class="Xr">sshd(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">OpenSSH is a derivative of the original and free ssh 1.2.12
    release by <span class="An">Tatu Ylonen</span>. <span class="An">Aaron
    Campbell</span>, <span class="An">Bob Beck</span>, <span class="An">Markus
    Friedl</span>, <span class="An">Niels Provos</span>, <span class="An">Theo
    de Raadt</span> and <span class="An">Dug Song</span> removed many bugs,
    re-added newer features and created OpenSSH. <span class="An">Markus
    Friedl</span> contributed the support for SSH protocol versions 1.5 and
  2.0.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 22, 2020</td>
    <td class="foot-os">Mac OS X 12</td>
  </tr>
</table>
</body>
</html>
