<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>install::TempContent::Objects::mod_perl-2.0.12::docs::api::Apache2::Log(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">install::TempContent::Objects::mod_perl-2.0.12::docs::api::Apache2::Log(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">install::TempContent::Objects::mod_perl-2.0.12::docs::api::Apache2::Log(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Apache2::Log - Perl API for Apache Logging Methods</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Synopsis"><a class="permalink" href="#Synopsis">Synopsis</a></h1>
<pre>  # in startup.pl
  #--------------
  use Apache2::Log;
  
  use Apache2::Const -compile =&gt; qw(OK :log);
  use APR::Const    -compile =&gt; qw(:error SUCCESS);
  
  my $s = Apache2::ServerUtil-&gt;server;
  
  $s-&gt;log_error(&quot;server: log_error&quot;);
  $s-&gt;log_serror(__FILE__, __LINE__, Apache2::Const::LOG_ERR,
                 APR::Const::SUCCESS, &quot;log_serror logging at err level&quot;);
  $s-&gt;log_serror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_DEBUG,
                 APR::Const::ENOTIME, &quot;debug print&quot;);
  Apache2::ServerRec-&gt;log_error(&quot;routine warning&quot;);
  
  Apache2::ServerRec::warn(&quot;routine warning&quot;);
  # in a handler
  #-------------
  package Foo;
  
  use strict;
  use warnings FATAL =&gt; 'all';
  
  use Apache2::Log;
  
  use Apache2::Const -compile =&gt; qw(OK :log);
  use APR::Const    -compile =&gt; qw(:error SUCCESS);
  
  sub handler {
      my $r = shift;
      $r-&gt;log_error(&quot;request: log_error&quot;);
  
      my $rlog = $r-&gt;log;
      for my $level qw(emerg alert crit error warn notice info debug) {
          no strict 'refs';
          $rlog-&gt;$level($package, &quot;request: $level log level&quot;);
      }
  
      # can use server methods as well
      my $s = $r-&gt;server;
      $s-&gt;log_error(&quot;server: log_error&quot;);
  
      $r-&gt;log_rerror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_DEBUG,
                     APR::Const::ENOTIME, &quot;in debug&quot;);
  
      $s-&gt;log_serror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_INFO,
                     APR::Const::SUCCESS, &quot;server info&quot;);
  
      $s-&gt;log_serror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_ERR,
                     APR::Const::ENOTIME, &quot;fatal error&quot;);
  
      $r-&gt;log_reason(&quot;fatal error&quot;);
      $r-&gt;warn('routine request warning');
      $s-&gt;warn('routine server warning');
  
      return Apache2::Const::OK;
  }
  1;
  # in a registry script
  # httpd.conf: PerlOptions +GlobalRequest
  use Apache2::ServerRec qw(warn); # override warn locally
  print &quot;Content-type: text/plain\n\n&quot;;
  warn &quot;my warning&quot;;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="Description"><a class="permalink" href="#Description">Description</a></h1>
<p class="Pp"><span class="Li">&quot;Apache2::Log&quot;</span> provides the Perl
    API for Apache logging methods.</p>
<p class="Pp">Depending on the the current
    <span class="Li">&quot;LogLevel&quot;</span> setting, only logging with the
    same log level or higher will be loaded. For example if the current
    <span class="Li">&quot;LogLevel&quot;</span> is set to <i>warning</i>, only
    messages with log level of the level <i>warning</i> or higher (<i>err</i>,
    <i>crit</i>, <i>elert</i> and <i>emerg</i>) will be logged. Therefore
  this:</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_rerror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_WARNING,
                 APR::Const::ENOTIME, &quot;warning!&quot;);
</pre>
<p class="Pp">will log the message, but this one won't:</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_rerror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_INFO,
                 APR::Const::ENOTIME, &quot;just an info&quot;);
</pre>
<p class="Pp">It will be logged only if the server log level is set to
    <i>info</i> or <i>debug</i>. <span class="Li">&quot;LogLevel&quot;</span> is
    set in the configuration file, but can be changed using the
    <span class="Li">&quot;$s-&gt;loglevel()&quot;</span> method.</p>
<p class="Pp">The filename and the line number of the caller are logged only if
    <span class="Li">&quot;Apache2::Const::LOG_DEBUG&quot;</span> is used
    (because that's how Apache 2.0 logging mechanism works).</p>
<p class="Pp">Note: On Win32 Apache attempts to lock all writes to a file
    whenever it's opened for append (which is the case with logging functions),
    as Unix has this behavior built-in, while Win32 does not. Therefore
    <span class="Li">&quot;Apache2::Log&quot;</span> functions could be slower
    than Perl's <b>print()</b>/<b>warn()</b>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Constants"><a class="permalink" href="#Constants">Constants</a></h1>
<p class="Pp">Log level constants can be compiled all at once:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(:log);
</pre>
<p class="Pp">or individually:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(LOG_DEBUG LOG_INFO);
</pre>
<section class="Ss">
<h2 class="Ss" id="LogLevel_Constants"><a class="permalink" href="#LogLevel_Constants">LogLevel
  Constants</a></h2>
<p class="Pp">The following constants (sorted from the most severe level to the
    least severe) are used in logging methods to specify the log level at which
    the message should be logged:</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_EMERG&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_ALERT&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_CRIT&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_ERR&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_WARNING&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_NOTICE&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_INFO&quot;</i></span><i></i></p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_DEBUG&quot;</i></span><i></i></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Other_Constants"><a class="permalink" href="#Other_Constants">Other
  Constants</a></h2>
<p class="Pp">Make sure to compile the APR status constants before using them.
    For example to compile
    <span class="Li">&quot;APR::Const::SUCCESS&quot;</span> and all the APR
    error status constants do:</p>
<p class="Pp"></p>
<pre>  use APR::Const    -compile =&gt; qw(:error SUCCESS);
</pre>
<p class="Pp">Here is the rest of the logging related constants:</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_LEVELMASK&quot;</i></span><i></i></p>
<p class="Pp">used to mask off the level value, to make sure that the log
    level's value is within the proper bits range. e.g.:</p>
<p class="Pp"></p>
<pre>  $loglevel &amp;= LOG_LEVELMASK;
</pre>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_TOCLIENT&quot;</i></span><i></i></p>
<p class="Pp">used to give content handlers the option of including the error
    text in the <span class="Li">&quot;ErrorDocument&quot;</span> sent back to
    the client. When
    <span class="Li">&quot;Apache2::Const::LOG_TOCLIENT&quot;</span> is passed
    to <span class="Li">&quot;log_rerror()&quot;</span> the error message will
    be saved in the <span class="Li">$r</span>'s notes table, keyed to the
    string <i>&quot;error-notes&quot;</i>, if and only if the severity level of
    the message is
    <span class="Li">&quot;Apache2::Const::LOG_WARNING&quot;</span> or greater
    and there are no other <i>&quot;error-notes&quot;</i> entry already set in
    the request record's notes table. Once the <i>&quot;error-notes&quot;</i>
    entry is set, it is up to the error handler to determine whether this text
    should be sent back to the client. For example:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(:log);
  use APR::Const    -compile =&gt; qw(ENOTIME);
  $r-&gt;log_rerror(Apache2::Log::LOG_MARK,
                 Apache2::Const::LOG_ERR|Apache2::Const::LOG_TOCLIENT,
                 APR::Const::ENOTIME,
                 &quot;request log_rerror&quot;);
</pre>
<p class="Pp">now the log message can be retrieved via:</p>
<p class="Pp"></p>
<pre>  $r-&gt;notes-&gt;get(&quot;error-notes&quot;);
</pre>
<p class="Pp">Remember that client-generated text streams sent back to the
    client <b>MUST</b> be escaped to prevent CSS attacks.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;Apache2::Const::LOG_STARTUP&quot;</i></span><i></i></p>
<p class="Pp">is useful for startup message where no timestamps, logging level
    is wanted. For example:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(:log);
  use APR::Const    -compile =&gt; qw(SUCCESS);
  $s-&gt;log_serror(Apache2::Log::LOG_MARK,
                 Apache2::Const::LOG_INFO,
                 APR::Const::SUCCESS,
                 &quot;This log message comes with a header&quot;);
</pre>
<p class="Pp">will print:</p>
<p class="Pp"></p>
<pre>  [Wed May 14 16:47:09 2003] [info] This log message comes with a header
</pre>
<p class="Pp">whereas, when
    <span class="Li">&quot;Apache2::Const::LOG_STARTUP&quot;</span> is binary
    ORed as in:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(:log);
  use APR::Const    -compile =&gt; qw(SUCCESS);
  $s-&gt;log_serror(Apache2::Log::LOG_MARK,
                 Apache2::Const::LOG_INFO|Apache2::Const::LOG_STARTUP,
                 APR::Const::SUCCESS,
                 &quot;This log message comes with no header&quot;);
</pre>
<p class="Pp">then the logging will be:</p>
<p class="Pp"></p>
<pre>  This log message comes with no header
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Server_Logging_Methods"><a class="permalink" href="#Server_Logging_Methods">Server
  Logging Methods</a></h1>
<section class="Ss">
<h2 class="Ss" id="_$s"><a class="permalink" href="#_$s">&quot;$s-&gt;log&quot;</a></h2>
<p class="Pp">get a log handle which can be used to log messages of different
    levels.</p>
<p class="Pp"></p>
<pre>  my $slog = $s-&gt;log;
</pre>
<dl class="Bl-tag">
  <dt id="obj:"><a class="permalink" href="#obj:">obj: $s (
    &quot;Apache2::ServerRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:"><a class="permalink" href="#ret:">ret: $slog (
    &quot;Apache2::Log::Server&quot; object )</a></dt>
  <dd><span class="Li">&quot;Apache2::Log::Server&quot;</span> object to be used
      with LogLevel methods.</dd>
  <dt id="since:"><a class="permalink" href="#since:">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_$s~2"><a class="permalink" href="#_$s~2">&quot;$s-&gt;log_error&quot;</a></h2>
<p class="Pp">just logs the supplied message to <i>error_log</i></p>
<p class="Pp"></p>
<pre>  $s-&gt;log_error(@message);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~2"><a class="permalink" href="#obj:~2">obj: $s (
    &quot;Apache2::ServerRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:"><a class="permalink" href="#arg1:">arg1: @message ( strings
    ARRAY )</a></dt>
  <dd>what to log</dd>
  <dt id="ret:~2"><a class="permalink" href="#ret:~2">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~2"><a class="permalink" href="#since:~2">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  $s-&gt;log_error(&quot;running low on memory&quot;);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_$s~3"><a class="permalink" href="#_$s~3">&quot;$s-&gt;log_serror&quot;</a></h2>
<p class="Pp">This function provides a fine control of when the message is
    logged, gives an access to built-in status codes.</p>
<p class="Pp"></p>
<pre>  $s-&gt;log_serror($file, $line, $level, $status, @message);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~3"><a class="permalink" href="#obj:~3">obj: $s (
    &quot;Apache2::ServerRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~2"><a class="permalink" href="#arg1:~2">arg1: $file ( string
    )</a></dt>
  <dd>The file in which this function is called</dd>
  <dt id="arg2:"><a class="permalink" href="#arg2:">arg2: $line ( number
    )</a></dt>
  <dd>The line number on which this function is called</dd>
  <dt id="arg3:"><a class="permalink" href="#arg3:">arg3: $level (
    &quot;Apache2::LOG_* constant&quot; )</a></dt>
  <dd>The level of this error message</dd>
  <dt id="arg4:"><a class="permalink" href="#arg4:">arg4: $status (
    &quot;APR::Const status constant&quot; )</a></dt>
  <dd>The status code from the last command (similar to $! in perl), usually
      <span class="Li">&quot;APR::Const constant&quot;</span> or coming from an
      exception object.</dd>
  <dt id="arg5:"><a class="permalink" href="#arg5:">arg5: @message ( strings
    ARRAY )</a></dt>
  <dd>The log message(s)</dd>
  <dt id="ret:~3"><a class="permalink" href="#ret:~3">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~3"><a class="permalink" href="#since:~3">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(:log);
  use APR::Const    -compile =&gt; qw(ENOTIME SUCCESS);
  $s-&gt;log_serror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_ERR,
                 APR::Const::SUCCESS, &quot;log_serror logging at err level&quot;);
  
  $s-&gt;log_serror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_DEBUG,
                 APR::Const::ENOTIME, &quot;debug print&quot;);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_$s~4"><a class="permalink" href="#_$s~4">&quot;$s-&gt;warn&quot;</a></h2>
<pre>  $s-&gt;warn(@warnings);
</pre>
<p class="Pp">is the same as:</p>
<p class="Pp"></p>
<pre>  $s-&gt;log_serror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_WARNING,
                 APR::Const::SUCCESS, @warnings)
</pre>
<dl class="Bl-tag">
  <dt id="obj:~4"><a class="permalink" href="#obj:~4">obj: $s (
    &quot;Apache2::ServerRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~3"><a class="permalink" href="#arg1:~3">arg1: @warnings (
    strings ARRAY )</a></dt>
  <dd>array of warning strings</dd>
  <dt id="ret:~4"><a class="permalink" href="#ret:~4">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~4"><a class="permalink" href="#since:~4">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  $s-&gt;warn('routine server warning');
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Request_Logging_Methods"><a class="permalink" href="#Request_Logging_Methods">Request
  Logging Methods</a></h1>
<section class="Ss">
<h2 class="Ss" id="_$r"><a class="permalink" href="#_$r">&quot;$r-&gt;log&quot;</a></h2>
<p class="Pp">get a log handle which can be used to log messages of different
    levels.</p>
<p class="Pp"></p>
<pre>  $rlog = $r-&gt;log;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~5"><a class="permalink" href="#obj:~5">obj: $r (
    &quot;Apache2::RequestRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~5"><a class="permalink" href="#ret:~5">ret: $rlog (
    &quot;Apache2::Log::Request&quot; object )</a></dt>
  <dd><span class="Li">&quot;Apache2::Log::Request&quot;</span> object to be
      used with LogLevel methods.</dd>
  <dt id="since:~5"><a class="permalink" href="#since:~5">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_$r~2"><a class="permalink" href="#_$r~2">&quot;$r-&gt;log_error&quot;</a></h2>
<p class="Pp">just logs the supplied message (similar to
    <span class="Li">&quot;$s-&gt;log_error&quot;</span> ).</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_error(@message);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~6"><a class="permalink" href="#obj:~6">obj: $r (
    &quot;Apache2::RequestRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~4"><a class="permalink" href="#arg1:~4">arg1: @message ( strings
    ARRAY )</a></dt>
  <dd>what to log</dd>
  <dt id="ret:~6"><a class="permalink" href="#ret:~6">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~6"><a class="permalink" href="#since:~6">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_error(&quot;the request is about to end&quot;);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_$r~3"><a class="permalink" href="#_$r~3">&quot;$r-&gt;log_reason&quot;</a></h2>
<p class="Pp">This function provides a convenient way to log errors in a
    preformatted way:</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_reason($message);
  $r-&gt;log_reason($message, $filename);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~7"><a class="permalink" href="#obj:~7">obj: $r (
    &quot;Apache2::RequestRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~5"><a class="permalink" href="#arg1:~5">arg1: $message ( string
    )</a></dt>
  <dd>the message to log</dd>
  <dt id="opt"><a class="permalink" href="#opt">opt arg2: $filename ( string
    )</a></dt>
  <dd>where to report the error as coming from (e.g.
      <span class="Li">&quot;__FILE__&quot;</span>)</dd>
  <dt id="ret:~7"><a class="permalink" href="#ret:~7">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~7"><a class="permalink" href="#since:~7">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_reason(&quot;There is no enough data&quot;);
</pre>
<p class="Pp">will generate a log entry similar to the following:</p>
<p class="Pp"></p>
<pre>  [Fri Sep 24 11:58:36 2004] [error] access to /someuri
  failed for 127.0.0.1, reason: There is no enough data.
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_$r~4"><a class="permalink" href="#_$r~4">&quot;$r-&gt;log_rerror&quot;</a></h2>
<p class="Pp">This function provides a fine control of when the message is
    logged, gives an access to built-in status codes.</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_rerror($file, $line, $level, $status, @message);
</pre>
<p class="Pp">arguments are identical to
    <span class="Li">&quot;$s-&gt;log_serror&quot;</span>.</p>
<dl class="Bl-tag">
  <dt id="since:~8"><a class="permalink" href="#since:~8">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  use Apache2::Const -compile =&gt; qw(:log);
  use APR::Const    -compile =&gt; qw(ENOTIME SUCCESS);
  $r-&gt;log_rerror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_ERR,
                 APR::Const::SUCCESS, &quot;log_rerror logging at err level&quot;);
  
  $r-&gt;log_rerror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_DEBUG,
                 APR::Const::ENOTIME, &quot;debug print&quot;);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_$r~5"><a class="permalink" href="#_$r~5">&quot;$r-&gt;warn&quot;</a></h2>
<pre>  $r-&gt;warn(@warnings);
</pre>
<p class="Pp">is the same as:</p>
<p class="Pp"></p>
<pre>  $r-&gt;log_rerror(Apache2::Log::LOG_MARK, Apache2::Const::LOG_WARNING,
                 APR::Const::SUCCESS, @warnings)
</pre>
<dl class="Bl-tag">
  <dt id="obj:~8"><a class="permalink" href="#obj:~8">obj: $r (
    &quot;Apache2::RequestRec object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~6"><a class="permalink" href="#arg1:~6">arg1: @warnings (
    strings ARRAY )</a></dt>
  <dd>array of warning strings</dd>
  <dt id="ret:~8"><a class="permalink" href="#ret:~8">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~9"><a class="permalink" href="#since:~9">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  $r-&gt;warn('routine server warning');
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Other_Logging_Methods"><a class="permalink" href="#Other_Logging_Methods">Other
  Logging Methods</a></h1>
<section class="Ss">
<h2 class="Ss" id="LogLevel_Methods"><a class="permalink" href="#LogLevel_Methods">LogLevel
  Methods</a></h2>
<p class="Pp">after getting the log handle with
    <span class="Li">&quot;$s-&gt;log&quot;</span> or
    <span class="Li">&quot;$r-&gt;log&quot;</span>, use one of the following
    methods (corresponding to the <span class="Li">&quot;LogLevel&quot;</span>
    levels):</p>
<p class="Pp"></p>
<pre>  emerg(), alert(), crit(), error(), warn(), notice(), info(), debug()
</pre>
<p class="Pp">to control when messages should be logged:</p>
<p class="Pp"></p>
<pre>  $s-&gt;log-&gt;emerg(@message);
  $r-&gt;log-&gt;emerg(@message);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~9"><a class="permalink" href="#obj:~9">obj: $slog ( server or
    request log handle )</a></dt>
  <dd></dd>
  <dt id="arg1:~7"><a class="permalink" href="#arg1:~7">arg1: @message ( strings
    ARRAY )</a></dt>
  <dd></dd>
  <dt id="ret:~9"><a class="permalink" href="#ret:~9">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~10"><a class="permalink" href="#since:~10">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example if the <span class="Li">&quot;LogLevel&quot;</span> is
    <span class="Li">&quot;error&quot;</span> and the following code is
    executed:</p>
<p class="Pp"></p>
<pre>  my $slog = $s-&gt;log;
  $slog-&gt;debug(&quot;just &quot;, &quot;some debug info&quot;);
  $slog-&gt;warn(@warnings);
  $slog-&gt;crit(&quot;dying&quot;);
</pre>
<p class="Pp">only the last command's logging will be performed. This is because
    <i>warn</i>, <i>debug</i> and other logging command which are listed right
    to <i>error</i> will be disabled.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_alert_"><a class="permalink" href="#_alert_">&quot;alert&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_crit_"><a class="permalink" href="#_crit_">&quot;crit&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_debug_"><a class="permalink" href="#_debug_">&quot;debug&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_emerg_"><a class="permalink" href="#_emerg_">&quot;emerg&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_error_"><a class="permalink" href="#_error_">&quot;error&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_info_"><a class="permalink" href="#_info_">&quot;info&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_notice_"><a class="permalink" href="#_notice_">&quot;notice&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
<p class="Pp">Though Apache treats <span class="Li">&quot;notice()&quot;</span>
    calls as special. The message is always logged regardless the value of
    <span class="Li">&quot;ErrorLog&quot;</span>, unless the error log is set to
    use syslog. (For details see httpd-2.0/server/log.c.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_warn_"><a class="permalink" href="#_warn_">&quot;warn&quot;</a></h2>
<p class="Pp">See LogLevel Methods.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="General_Functions"><a class="permalink" href="#General_Functions">General
  Functions</a></h1>
<section class="Ss">
<h2 class="Ss" id="_LOG_MARK_"><a class="permalink" href="#_LOG_MARK_">&quot;LOG_MARK&quot;</a></h2>
<p class="Pp">Though looking like a constant, this is a function, which returns
    a list of two items: <span class="Li">&quot;(__FILE__,
    __LINE__)&quot;</span>, i.e. the file and the line where the function was
    called from.</p>
<p class="Pp"></p>
<pre>  my ($file, $line) = Apache2::Log::LOG_MARK();
</pre>
<dl class="Bl-tag">
  <dt id="ret1:"><a class="permalink" href="#ret1:">ret1: $file ( string
    )</a></dt>
  <dd></dd>
  <dt id="ret2:"><a class="permalink" href="#ret2:">ret2: $line ( number
    )</a></dt>
  <dd></dd>
  <dt id="since:~11"><a class="permalink" href="#since:~11">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">It's mostly useful to be passed as the first argument to those
    logging methods, expecting the filename and the line number as the first
    arguments (e.g., <span class="Li">&quot;$s-&gt;log_serror&quot;</span> and
    <span class="Li">&quot;$r-&gt;log_rerror&quot;</span> ).</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Virtual_Hosts"><a class="permalink" href="#Virtual_Hosts">Virtual
  Hosts</a></h1>
<p class="Pp">Code running from within a virtual host needs to be able to log
    into its <span class="Li">&quot;ErrorLog&quot;</span> file, if different
    from the main log. Calling any of the logging methods on the
    <span class="Li">$r</span> and <span class="Li">$s</span> objects will do
    the logging correctly.</p>
<p class="Pp">If the core <span class="Li">&quot;warn()&quot;</span> is called,
    it'll be always logged to the main log file. Here is how to make it log into
    the vhost <i>error_log</i> file. Let's say that we start with the following
    code:</p>
<p class="Pp"></p>
<pre>  warn &quot;the code is smoking&quot;;
</pre>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>First, we need to use mod_perl's logging function, instead of
      <span class="Li">&quot;CORE::warn&quot;</span>
    <p class="Pp">Either replace <span class="Li">&quot;warn&quot;</span> with
        <span class="Li">&quot;Apache2::ServerRec::warn&quot;</span>:</p>
    <p class="Pp"></p>
    <pre>  use Apache2::Log ();
  Apache2::ServerRec::warn(&quot;the code is smoking&quot;);
    </pre>
    <p class="Pp">or import it into your code:</p>
    <p class="Pp"></p>
    <pre>  use Apache2::ServerRec qw(warn); # override warn locally
  warn &quot;the code is smoking&quot;;
    </pre>
    <p class="Pp">or override
      <span class="Li">&quot;CORE::warn&quot;</span>:</p>
    <p class="Pp"></p>
    <pre>  use Apache2::Log ();
  *CORE::GLOBAL::warn = \&amp;Apache2::ServerRec::warn;
  warn &quot;the code is smoking&quot;;
    </pre>
    <p class="Pp">Avoid using the latter suggestion, since it'll affect all the
        code running on the server, which may break things. Of course you can
        localize that as well:</p>
    <p class="Pp"></p>
    <pre>  use Apache2::Log ();
  local *CORE::GLOBAL::warn = \&amp;Apache2::ServerRec::warn;
  warn &quot;the code is smoking&quot;;
    </pre>
    <p class="Pp">Chances are that you need to make the internal Perl warnings
        go into the vhost's <i>error_log</i> file as well. Here is how to do
        that:</p>
    <p class="Pp"></p>
    <pre>  use Apache2::Log ();
  local $SIG{__WARN__} = \&amp;Apache2::ServerRec::warn;
  eval q[my $x = &quot;aaa&quot; + 1;]; # this issues a warning
    </pre>
    <p class="Pp">Notice that it'll override any previous setting you may have
        had, disabling modules like
        <span class="Li">&quot;CGI::Carp&quot;</span> which also use
        <span class="Li">$SIG{__WARN__}</span></p>
  </dd>
  <dt>2.</dt>
  <dd>Next we need to figure out how to get hold of the vhost's server object.
    <p class="Pp">Inside HTTP request handlers this is possible via
        <span class="Li">&quot;Apache2-&gt;request&quot;</span>. Which requires
        either <span class="Li">&quot;PerlOptions</span>
        <span class="Li">+GlobalRequest&quot;</span> setting or can be also done
        at runtime if <span class="Li">$r</span> is available:</p>
    <p class="Pp"></p>
    <pre>  use Apache2::RequestUtil ();
  sub handler {
      my $r = shift;
      Apache2::RequestUtil-&gt;request($r);
      ...
    </pre>
    <p class="Pp">Outside HTTP handlers at the moment it is not possible, to get
        hold of the vhost's <i>error_log</i> file. This shouldn't be a problem
        for the code that runs only under mod_perl, since the always available
        <span class="Li">$s</span> object can invoke a plethora of methods
        supplied by <span class="Li">&quot;Apache2::Log&quot;</span>. This is
        only a problem for modules, which are supposed to run outside mod_perl
        as well.</p>
    <p class="Pp">META: To solve this we think to introduce 'PerlOptions
        +GlobalServer', a big brother for 'PerlOptions +GlobalRequest', which
        will be set in modperl_hook_pre_connection.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="Unsupported_API"><a class="permalink" href="#Unsupported_API">Unsupported
  API</a></h1>
<p class="Pp"><span class="Li">&quot;Apache2::Log&quot;</span> also provides
    auto-generated Perl interface for a few other methods which aren't tested at
    the moment and therefore their API is a subject to change. These methods
    will be finalized later as a need arises. If you want to rely on any of the
    following methods please contact the the mod_perl development mailing list
    so we can help each other take the steps necessary to shift the method to an
    officially supported API.</p>
<section class="Ss">
<h2 class="Ss" id="_log_pid_"><a class="permalink" href="#_log_pid_">&quot;log_pid&quot;</a></h2>
<p class="Pp">META: what is this method good for? it just calls getpid and logs
    it. In any case it has nothing to do with the logging API. And it uses
    static variables, it probably shouldn't be in the Apache public API.</p>
<p class="Pp">Log the current pid</p>
<p class="Pp"></p>
<pre>  Apache2::Log::log_pid($pool, $fname);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~10"><a class="permalink" href="#obj:~10">obj: $p (
    &quot;APR::Pool object&quot; )</a></dt>
  <dd>The pool to use for logging</dd>
  <dt id="arg1:~8"><a class="permalink" href="#arg1:~8">arg1: $fname ( file path
    )</a></dt>
  <dd>The name of the file to log to</dd>
  <dt id="ret:~10"><a class="permalink" href="#ret:~10">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~12"><a class="permalink" href="#since:~12">since: subject to
    change</a></dt>
  <dd></dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="See_Also"><a class="permalink" href="#See_Also">See
  Also</a></h1>
<p class="Pp">mod_perl 2.0 documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Copyright"><a class="permalink" href="#Copyright">Copyright</a></h1>
<p class="Pp">mod_perl 2.0 and its core modules are copyrighted under The Apache
    Software License, Version 2.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Authors"><a class="permalink" href="#Authors">Authors</a></h1>
<p class="Pp">The mod_perl development team and numerous contributors.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-06-18</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
