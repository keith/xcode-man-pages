<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2017 Apple Inc. All rights reserved.
  
   The contents of this file constitute Original Code as defined in and
   are subject to the Apple Public Source License Version 1.1 (the
   "License").  You may not use this file except in compliance with the
   License.  Please obtain a copy of the License at
   http://www.apple.com/publicsource and read it before using this file.
  
   This Original Code and all software distributed under the License are
   distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, EITHER
   EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
   INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT.  Please see the
   License for the specific language governing rights and limitations
   under the License.
  
       @(#)APFSUserAgent.8
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>APFSUSERAGENT(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">APFSUSERAGENT(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">APFSUSERAGENT(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">APFSUserAgent</code> &#x2014;
    <span class="Nd">APFS new container observer</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">APFSUserAgent</code> watches for IOKit
    notifications about new APFS containers appearing, and about volume hash
    mismatch.</p>
<p class="Pp">If <code class="Nm">APFSUserAgent</code> finds a new container
    with an encrypted volume, it will pop up a DiskUnlock dialog to ask the user
    for volume unlock password.</p>
<p class="Pp">The <code class="Nm">APFSUserAgent</code> can display the
    following notifications:
  <br/>
  <b>Incompatible Features</b> - Mounting the device (volume or container) was
    rejected because it uses features that are not supported by the current
    version of macOS. Updating to a newer version of macOS may allow the device
    to mount.
  <br/>
  <b>Volume Hash Mismatch</b> - The cryptographic integrity of the volume is not
    valid. Reinstalling macOS on this volume will fix its integrity.</p>
<p class="Pp">The <code class="Nm">APFSUserAgent</code> uses the
    <var class="Ar">defaults</var> bundle <b>com.apple.APFSUserAgent</b> in
    order to control whether or not to pop notifications or automatically ask
    the user to unlock an encrypted volume.
  <br/>
  The settings are controlled globally - for all devices, or locally - for a
    specific volume or container, identified by its UUID. In the
    <var class="Ar">defaults</var> dictionary, the key is the action that the
    user would like to mute, and the value is the date to mute up to.
    <code class="Nm">APFSUserAgent</code> Will use the system timezone.</p>
<p class="Pp">The values in the <var class="Ar">defaults</var> dictionary could
    be updated using the <var class="Ar">defaults</var> cli as well.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYS"><a class="permalink" href="#KEYS">KEYS</a></h1>
<p class="Pp">The bundle keys are as follows:</p>
<dl class="Bl-hang Bd-indent">
  <dt><b>IncompatibleFeatures</b></dt>
  <dd>Mute notifications about either a volume or a container that has features
      which are not supported with the current running OS.</dd>
  <dt><b>HashMismatch</b></dt>
  <dd>Mute notification about volume hash mismatch.</dd>
  <dt><b>DontUnlockVolume</b></dt>
  <dd>Disable the DiskUnlock dialog to ask the user for volume unlock
    password.</dd>
  <dt><b>MuteAllNotifications</b></dt>
  <dd>Mute all APFS notifications. Does not include the dialog to unlock a
      volume.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<p class="Pp">The following setting mutes the <var class="Ar">HashMismatch</var>
    notification only for the volume with UUID
    <b>F55502F4-1A9E-4B48-8A11-106E1226AE2F</b> up to 2021-08-18 15:10:31, and
    mutes the <var class="Ar">IncompatibleFeatures</var> notification for any
    device, up to 2021-08-18 15:09:43</p>
<p class="Pp">~ % defaults read com.apple.APFSUserAgent
  <br/>
  {
  <br/>
   &quot;F55502F4-1A9E-4B48-8A11-106E1226AE2F&quot; = {
  <br/>
   HashMismatch = &quot;2021-08-18 15:10:31&quot;;
  <br/>
   };
  <br/>
   IncompatibleFeatures = &quot;2021-08-18 15:09:43&quot;;
  <br/>
  }
  <br/>
  ~ %</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp"><code class="Nm">APFSUserAgent</code> always exits with 0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">defaults(1), apfsd(8), diskutil(8)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 22, 2021</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
