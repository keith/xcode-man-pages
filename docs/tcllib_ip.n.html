<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Generated from file '/System/Volumes/Data/SWE/macOS/BuildRoots/0ed32b12e4/Library/Caches/com.apple.xbs/Sources/tcl/tcl-134/tcl_ext/tcllib/tcllib/modules/dns/tcllib_ip.man' by tcllib/doctools with format 'nroff'
   Copyright (c) 2004, Pat Thoyts
   Copyright (c) 2005 Aamer Akhter <aakhter@cisco.com>
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
  	# Start an argument description
  .b
  	# define tabbing values for .AP
  
  	# BS - start boxed text
  	# ^y = starting y location
  	# ^b = 1
  	# BE - end boxed text (draw box now)
  	Draw four-sided box normally, but don't draw top of
  	box if the box started on an earlier page.
  	# VS - start vertical sidebar
  	# ^Y = starting y location
  	# ^v = 1 (for troff;  for nroff this doesn't matter)
  	# VE - end of vertical sidebar
  	# Special macro to handle page bottom:  finish off current
  	# box/sidebar if in box/sidebar mode, then invoked standard
  	# page bottom macro.
  	Draw three-sided box if this is the box's first page,
  	draw two sides but no top otherwise.
  	# DS - begin display
  	# DE - end display
  	# SO - start of list of standard options
  	# SE - end of list of standard options
  	# OP - start of full description for a single option
  	# CS - begin code excerpt
  	# CE - end code excerpt
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>tcllib_ip(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">tcllib_ip(n)</td>
    <td class="head-vol">Domain Name Service</td>
    <td class="head-rtitle">tcllib_ip(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>

</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
tcllib_ip - IPv4 and IPv6 address manipulation
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
package require <b>Tcl 8.2</b>
<p class="Pp">package require <b>ip ?1.2?</b></p>
<p class="Pp"><b>::ip::version</b> <i>address</i></p>
<p class="Pp"><b>::ip::is</b> <i>class</i> <i>address</i></p>
<p class="Pp"><b>::ip::equal</b> <i>address</i> <i>address</i></p>
<p class="Pp"><b>::ip::normalize</b> <i>address</i></p>
<p class="Pp"><b>::ip::contract</b> <i>address</i></p>
<p class="Pp"><b>::ip::prefix</b> <i>address</i></p>
<p class="Pp"><b>::ip::type</b> <i>address</i></p>
<p class="Pp"><b>::ip::mask</b> <i>address</i></p>
<p class="Pp"><b>::ip::prefixToNative</b> <i>prefix</i></p>
<p class="Pp"><b>::ip::nativeToPrefix</b> <i>nativeList</i>|<i>native</i>
    ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::intToString</b> <i>number</i> ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::toInteger</b> <i>ipaddr</i></p>
<p class="Pp"><b>::ip::toHex</b> <i>ipaddr</i></p>
<p class="Pp"><b>::ip::maskToInt</b> <i>ipmask</i></p>
<p class="Pp"><b>::ip::broadcastAddress</b> <i>prefix</i> ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::maskToLength</b>
    <i>dottedMask</i>|<i>integerMask</i>|<i>hexMask</i> ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::lengthToMask</b> <i>maskLength</i> ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::nextNet</b> <i>ipaddr</i> <i>ipmask</i> ?<i>count</i>?
    ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::isOverlap</b> <i>prefix</i> <i>prefix</i>...</p>
<p class="Pp"><b>::ip::isOverlapNative</b> ?<b>-all</b>? ?<b>-inline</b>?
    ?<b>-ipv4</b>? <i>hexipaddr</i> <i>hexipmask</i> <i>hexiplist</i></p>
<p class="Pp"><b>::ip::ipToLayer2Multicast</b> <i>ipaddr</i></p>
<p class="Pp"><b>::ip::ipHostFromPrefix</b> <i>prefix</i> ?<b>-exclude</b>
    <i>prefixExcludeList</i>?</p>
<p class="Pp"><b>::ip::reduceToAggregates</b> <i>prefixlist</i></p>
<p class="Pp"><b>::ip::longestPrefixMatch</b> <i>ipaddr</i> <i>prefixlist</i>
    ?<b>-ipv4</b>?</p>
<p class="Pp"><b>::ip::collapse</b> <i>prefixlist</i></p>
<p class="Pp"><b>::ip::subtract</b> <i>prefixlist</i></p>
<p class="Pp"></p>
<pre>

</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This package provides a set of commands to help in parsing, displaying and
  comparing internet addresses. The package can handle both IPv4 (1) and IPv6
  (2) address types.
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt><b>::ip::version</b> <i>address</i></dt>
  <dd>Returns the protocol version of the address (4 or 6) or 0 if the address
      is neither IPv4 or IPv6.</dd>
  <dt><b>::ip::is</b> <i>class</i> <i>address</i></dt>
  <dd>Returns true if the address is a member of the given protocol class. The
      class parameter may be either <i>ipv4</i> or <i>ipv6</i> This is
      effectively a boolean equivalent of the <b>version</b> command. The
      <i>class</i> argument may be shortened to <i>4</i> or <i>6</i>.</dd>
  <dt><b>::ip::equal</b> <i>address</i> <i>address</i></dt>
  <dd>Compare two address specifications for equivalence. The arguments are
      normalized and the address prefix determined (if a mask is supplied). The
      normalized addresses are then compared bit-by-bit and the procedure
      returns true if they match.</dd>
  <dt><b>::ip::normalize</b> <i>address</i></dt>
  <dd>Convert an IPv4 or IPv6 address into a fully expanded version. There are
      various shorthand ways to write internet addresses, missing out redundant
      parts or digts.. This procedure is the opposite of <b>contract</b>.</dd>
  <dt><b>::ip::contract</b> <i>address</i></dt>
  <dd>Convert a <b>normalize</b>d internet address into a more compact form
      suitable for displaying to users.</dd>
  <dt><b>::ip::prefix</b> <i>address</i></dt>
  <dd>Returns the address prefix generated by masking the address part with the
      mask if provided. If there is no mask then it is equivalent to calling
      <b>normalize</b></dd>
  <dt><b>::ip::type</b> <i>address</i></dt>
  <dd></dd>
  <dt><b>::ip::mask</b> <i>address</i></dt>
  <dd>If the address supplied includes a mask then this is returned otherwise
      returns an empty string.</dd>
  <dt><b>::ip::prefixToNative</b> <i>prefix</i></dt>
  <dd>This command converts the string <i>prefix</i> from dotted form
      (&lt;ipaddr&gt;/&lt;mask&gt; format) to native (hex) form. Returns a list
      containing two elements, ipaddress and mask, in this order, in hexadecimal
      notation.
    <p class="Pp"></p>
    <pre>
   % ip::prefixToNative 1.1.1.0/24
   0x01010100 0xffffff00
    </pre>
  </dd>
  <dt><b>::ip::nativeToPrefix</b> <i>nativeList</i>|<i>native</i>
    ?<b>-ipv4</b>?</dt>
  <dd>This command converts from native (hex) form to dotted form. It is the
      complement of <b>::ip::prefixToNative</b>.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>list <i>nativeList</i> (in)</dt>
  <dd>List of several ip addresses in native form. The native form is a list as
      returned by <b>::ip::prefixToNative</b>.</dd>
  <dt>list <i>native</i> (in)</dt>
  <dd>A list as returned by <b>::ip::prefixToNative</b>.</dd>
</dl>
</div>
<p class="Pp">The command returns a list of addresses in dotted form if it was
    called with a list of addresses. Otherwise a single address in dotted form
    is returned.</p>
<p class="Pp"></p>
<pre>
   % ip::nativeToPrefix {0x01010100 0xffffff00} -ipv4
   1.1.1.0/24
</pre>
<dl class="Bl-tag">
  <dt><b>::ip::intToString</b> <i>number</i> ?<b>-ipv4</b>?</dt>
  <dd>This command converts from an ip address specified as integer number to
      dotted form.
    <p class="Pp"></p>
    <pre>
       ip::intToString 4294967295
       255.255.255.255
    </pre>
  </dd>
  <dt><b>::ip::toInteger</b> <i>ipaddr</i></dt>
  <dd>This command converts a dotted form ip into an integer number.
    <p class="Pp"></p>
    <pre>
   % ::ip::toInteger 1.1.1.0
   16843008
    </pre>
  </dd>
  <dt><b>::ip::toHex</b> <i>ipaddr</i></dt>
  <dd>This command converts dotted form ip into a hexadecimal number.
    <p class="Pp"></p>
    <pre>
   % ::ip::toHex 1.1.1.0
   0x01010100
    </pre>
  </dd>
  <dt><b>::ip::maskToInt</b> <i>ipmask</i></dt>
  <dd>This command convert an ipmask in either dotted (255.255.255.0) form or
      mask length form (24) into an integer number.
    <p class="Pp"></p>
    <pre>
   ::ip::maskToInt 24
   4294967040
    </pre>
  </dd>
  <dt><b>::ip::broadcastAddress</b> <i>prefix</i> ?<b>-ipv4</b>?</dt>
  <dd>This commands returns a broadcast address in dotted form for the given
      route <i>prefix</i>, either in the form &quot;addr/mask&quot;, or in
      native form. The result is in dotted form.
    <p class="Pp"></p>
    <pre>
   ::ip::broadcastAddress 1.1.1.0/24
   1.1.1.255
   ::ip::broadcastAddress {0x01010100 0xffffff00}
   0x010101ff
    </pre>
    <p class="Pp"></p>
    <p class="Pp"></p>
    <p class="Pp"></p>
  </dd>
  <dt><b>::ip::maskToLength</b>
    <i>dottedMask</i>|<i>integerMask</i>|<i>hexMask</i> ?<b>-ipv4</b>?</dt>
  <dd>
    <p class="Pp"></p>
    <p class="Pp">This command converts the dotted or integer form of an ipmask
        to the mask length form.</p>
    <p class="Pp"></p>
    <p class="Pp"></p>
    <p class="Pp"></p>
    <p class="Pp"></p>
    <p class="Pp"></p>
    <p class="Pp"></p>
    <pre>
   ::ip::maskToLength 0xffffff00 -ipv4
   24
   % ::ip::maskToLength 255.255.255.0
   24
    </pre>
  </dd>
  <dt><b>::ip::lengthToMask</b> <i>maskLength</i> ?<b>-ipv4</b>?</dt>
  <dd>This command converts an ipmask in mask length form to its dotted form.
    <p class="Pp"></p>
    <pre>
   ::ip::lengthToMask 24
   255.255.255.0
    </pre>
  </dd>
  <dt><b>::ip::nextNet</b> <i>ipaddr</i> <i>ipmask</i> ?<i>count</i>?
    ?<b>-ipv4</b>?</dt>
  <dd>This command returns an ipaddress in the same position in the <i>count</i>
      next network. The default value for <i>count</i> is <b>1</b>.
    <p class="Pp">The address can be specified as either integer number or in
        dotted form. The mask can be specified as either integer number, dotted
        form, or mask length form.</p>
    <p class="Pp">The result is in hex form.</p>
  </dd>
  <dt><b>::ip::isOverlap</b> <i>prefix</i> <i>prefix</i>...</dt>
  <dd>This command checks if the given ip prefixes overlap. All arguments are in
      dotted &quot;addr/mask&quot; form. All arguments after the first prefix
      are compared against the first prefix. The result is a boolean value. It
      is true if an overlap was found for any of the prefixes.
    <p class="Pp"></p>
    <pre>
  % ::ip::isOverlap 1.1.1.0/24 2.1.0.1/32
  0
  ::ip::isOverlap 1.1.1.0/24 2.1.0.1/32 1.1.1.1/32
  1
    </pre>
  </dd>
  <dt><b>::ip::isOverlapNative</b> ?<b>-all</b>? ?<b>-inline</b>? ?<b>-ipv4</b>?
    <i>hexipaddr</i> <i>hexipmask</i> <i>hexiplist</i></dt>
  <dd>This command is similar to <b>::ip::isOverlap</b>, however the arguments
      are in the native form, and the form of the result is under greater
      control of the caller. If the option <b>-all</b> is specified it checks
      all addresses for overlap, not only until the first one is found. If the
      option <b>-inline</b> is specified the command returns the overlapping
      prefix instead of index values.
    <p class="Pp">The result of the command is, depending on the specified
        options,</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>no options</dt>
  <dd>The index of the first overlap found, or 0 if there is none.</dd>
  <dt>-all</dt>
  <dd>A list containing the indices of all overlaps found, or an empty list if
      there are none.</dd>
  <dt>-inline</dt>
  <dd>The first overlapping prefix, or an empoty string if there is none.</dd>
  <dt>-all -inline</dt>
  <dd>A list containing the prefixes of all overlaps found, or an empty list if
      there are none.</dd>
</dl>
</div>
<p class="Pp"></p>
<pre>
  % ::ip::isOverlapNative 0x01010100 0xffffff00 {{0x02010001 0xffffffff}}
  0
  % ::ip::isOverlapNative 0x01010100 0xffffff00 {{0x02010001 0xffffffff} {0x01010101 0xffffffff}}
  2
</pre>
<dl class="Bl-tag">
  <dt><b>::ip::ipToLayer2Multicast</b> <i>ipaddr</i></dt>
  <dd>This command an converts ipv4 address in dotted form into a layer 2
      multicast address, also in dotted form.
    <p class="Pp"></p>
    <pre>
  % ::ip::ipToLayer2Multicast 224.0.0.2
  01.00.5e.00.00.02
    </pre>
  </dd>
  <dt><b>::ip::ipHostFromPrefix</b> <i>prefix</i> ?<b>-exclude</b>
    <i>prefixExcludeList</i>?</dt>
  <dd>This command returns a host address from a prefix in the form
      &quot;ipaddr/masklen&quot;, also making sure that the result is not an
      address found in the <i>prefixExcludeList</i>. The result is an ip address
      in dotted form.
    <p class="Pp"></p>
    <pre>
  %::ip::ipHostFromPrefix  1.1.1.5/24
  1.1.1.1
  %::ip::ipHostFromPrefix  1.1.1.1/32
  1.1.1.1
    </pre>
  </dd>
  <dt><b>::ip::reduceToAggregates</b> <i>prefixlist</i></dt>
  <dd>This command finds nets that overlap and filters out the more specific
      nets. The prefixes are in either addr/mask form or in native format. The
      result is a list containing the non-overlapping ip prefixes from the
      input.
    <p class="Pp"></p>
    <pre>
  % ::ip::reduceToAggregates {1.1.1.0/24 1.1.0.0/8  2.1.1.0/24 1.1.1.1/32 }
  1.0.0.0/8 2.1.1.0/24
    </pre>
  </dd>
  <dt><b>::ip::longestPrefixMatch</b> <i>ipaddr</i> <i>prefixlist</i>
    ?<b>-ipv4</b>?</dt>
  <dd>This command finds longest prefix match from set of prefixes, given a
      specific host address. The prefixes in the list are in either native or
      dotted form, whereas the host address is in either ipprefix format, dotted
      form, or integer form. The result is the prefix which is the most specific
      match to the host address.
    <p class="Pp"></p>
    <pre>
  % ::ip::longestPrefixMatch 1.1.1.1 {1.1.1.0/24 1.0.0.0/8  2.1.1.0/24 1.1.1.0/28 }
  1.1.1.0/28
    </pre>
  </dd>
  <dt><b>::ip::collapse</b> <i>prefixlist</i></dt>
  <dd>This commands takes a list of prefixes and returns a list prefixes with
      the largest possible subnet masks covering the input, in this manner
      collapsing adjacent prefixes into larger ranges.
    <p class="Pp">This is different from <b>::ip::reduceToAggregates</b> in that
        the latter only removes specific nets from a list when they are covered
        by other elements of the input whereas this command actively merges nets
        into larger ranges when they are adjacent to each other.</p>
    <p class="Pp"></p>
    <pre>
% ::ip::collapse {1.2.2.0/24 1.2.3.0/24}
1.2.2.0/23
    </pre>
  </dd>
  <dt><b>::ip::subtract</b> <i>prefixlist</i></dt>
  <dd>This command takes a list of prefixes, some of which are prefixed by a
      dash. These latter <i>negative</i> prefixes are used to punch holes into
      the ranges described by the other, <i>positive</i>, prefixes. I.e. the
      negative prefixes are subtracted frrom the positive ones, resulting in a
      larger list of describes describing the covered ranges only as
    positives.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<pre>
% ip::version ::1
6
% ip::version 127.0.0.1
4
</pre>
<pre>
% ip::normalize 127/8
127.0.0.0/8
% ip::contract 192.168.0.0
192.168
%
% ip::normalize fec0::1
fec0:0000:0000:0000:0000:0000:0000:0001
% ip::contract fec0:0000:0000:0000:0000:0000:0000:0001
fec0::1
</pre>
<pre>
% ip::equal 192.168.0.4/16 192.168.0.0/16
1
% ip::equal fec0::1/10 fec0::fe01/10
1
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="REFERENCES"><a class="permalink" href="#REFERENCES">REFERENCES</a></h1>
<dl class="Bl-tag">
  <dt>[1]</dt>
  <dd>Postel, J. &quot;Internet Protocol.&quot; RFC 791, September 1981,
      (<i>http://www.ietf.org/rfc/rfc791.txt</i>)</dd>
  <dt>[2]</dt>
  <dd>Hinden, R. and Deering, S., &quot;Internet Protocol Version 6 (IPv6)
      Addressing Architecture&quot;, RFC 3513, April 2003
      (<i>http://www.ietf.org/rfc/rfc3513.txt</i>)</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
Pat Thoyts
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
This document, and the package it describes, will undoubtedly contain bugs and
  other problems. Please report such in the category <i>dns</i> of the <i>Tcllib
  SF Trackers</i> [http://sourceforge.net/tracker/?group_id=12883]. Please also
  report any ideas for enhancements you may have for either package and/or
  documentation.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
inet(3), ip(7), ipv6(7)
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
internet address, ip, ipv4, ipv6, rfc 3513
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
Networking
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>
Copyright (c) 2004, Pat Thoyts
Copyright (c) 2005 Aamer Akhter &lt;aakhter@cisco.com&gt;
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.3</td>
    <td class="foot-os">dns</td>
  </tr>
</table>
</body>
</html>
