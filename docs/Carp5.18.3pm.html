<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Carp(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Carp(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">Carp(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Carp - alternative warn and die for modules</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use Carp;
    # warn user (from perspective of caller)
    carp &quot;string trimmed to 80 chars&quot;;
    # die of errors (from perspective of caller)
    croak &quot;We're outta here!&quot;;
    # die of errors with stack backtrace
    confess &quot;not implemented&quot;;
    # cluck, longmess and shortmess not exported by default
    use Carp qw(cluck longmess shortmess);
    cluck &quot;This is how we got here!&quot;;
    $long_message   = longmess( &quot;message from cluck() or confess()&quot; );
    $short_message  = shortmess( &quot;message from carp() or croak()&quot; );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The Carp routines are useful in your own modules because they act
    like <span class="Li">&quot;die()&quot;</span> or
    <span class="Li">&quot;warn()&quot;</span>, but with a message which is more
    likely to be useful to a user of your module. In the case of
    <span class="Li">&quot;cluck()&quot;</span> and
    <span class="Li">&quot;confess()&quot;</span>, that context is a summary of
    every call in the call-stack; <span class="Li">&quot;longmess()&quot;</span>
    returns the contents of the error message.</p>
<p class="Pp">For a shorter message you can use
    <span class="Li">&quot;carp()&quot;</span> or
    <span class="Li">&quot;croak()&quot;</span> which report the error as being
    from where your module was called.
    <span class="Li">&quot;shortmess()&quot;</span> returns the contents of this
    error message. There is no guarantee that that is where the error was, but
    it is a good educated guess.</p>
<p class="Pp">You can also alter the way the output and logic of
    <span class="Li">&quot;Carp&quot;</span> works, by changing some global
    variables in the <span class="Li">&quot;Carp&quot;</span> namespace. See the
    section on <span class="Li">&quot;GLOBAL VARIABLES&quot;</span> below.</p>
<p class="Pp">Here is a more complete description of how
    <span class="Li">&quot;carp&quot;</span> and
    <span class="Li">&quot;croak&quot;</span> work. What they do is search the
    call-stack for a function call stack where they have not been told that
    there shouldn't be an error. If every call is marked safe, they give up and
    give a full stack backtrace instead. In other words they presume that the
    first likely looking potential suspect is guilty. Their rules for telling
    whether a call shouldn't generate errors work as follows:</p>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>Any call from a package to itself is safe.</dd>
  <dt>2.</dt>
  <dd>Packages claim that there won't be errors on calls to or from packages
      explicitly marked as safe by inclusion in
      <span class="Li">@CARP_NOT</span>, or (if that array is empty)
      <span class="Li">@ISA</span>. The ability to override what
      <span class="Li">@ISA</span> says is new in 5.8.</dd>
  <dt>3.</dt>
  <dd>The trust in item 2 is transitive. If A trusts B, and B trusts C, then A
      trusts C. So if you do not override <span class="Li">@ISA</span> with
      <span class="Li">@CARP_NOT</span>, then this trust relationship is
      identical to, &quot;inherits from&quot;.</dd>
  <dt>4.</dt>
  <dd>Any call from an internal Perl module is safe. (Nothing keeps user modules
      from marking themselves as internal to Perl, but this practice is
      discouraged.)</dd>
  <dt>5.</dt>
  <dd>Any call to Perl's warning system (eg Carp itself) is safe. (This rule is
      what keeps it from reporting the error at the point where you call
      <span class="Li">&quot;carp&quot;</span> or
      <span class="Li">&quot;croak&quot;</span>.)</dd>
  <dt>6.</dt>
  <dd><span class="Li">$Carp::CarpLevel</span> can be set to skip a fixed number
      of additional call levels. Using this is not recommended because it is
      very difficult to get it to behave correctly.</dd>
</dl>
<section class="Ss">
<h2 class="Ss" id="Forcing_a_Stack_Trace"><a class="permalink" href="#Forcing_a_Stack_Trace">Forcing
  a Stack Trace</a></h2>
<p class="Pp">As a debugging aid, you can force Carp to treat a croak as a
    confess and a carp as a cluck across <i>all</i> modules. In other words,
    force a detailed stack trace to be given. This can be very helpful when
    trying to understand why, or from where, a warning or error is being
    generated.</p>
<p class="Pp">This feature is enabled by 'importing' the non-existent symbol
    'verbose'. You would typically enable it by saying</p>
<p class="Pp"></p>
<pre>    perl -MCarp=verbose script.pl
</pre>
<p class="Pp">or by including the string
    <span class="Li">&quot;-MCarp=verbose&quot;</span> in the PERL5OPT
    environment variable.</p>
<p class="Pp">Alternately, you can set the global variable
    <span class="Li">$Carp::Verbose</span> to true. See the
    <span class="Li">&quot;GLOBAL VARIABLES&quot;</span> section below.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="GLOBAL_VARIABLES"><a class="permalink" href="#GLOBAL_VARIABLES">GLOBAL
  VARIABLES</a></h1>
<section class="Ss">
<h2 class="Ss" id="$Carp::MaxEvalLen"><a class="permalink" href="#$Carp::MaxEvalLen">$Carp::MaxEvalLen</a></h2>
<p class="Pp">This variable determines how many characters of a string-eval are
    to be shown in the output. Use a value of <span class="Li">0</span> to show
    all text.</p>
<p class="Pp">Defaults to <span class="Li">0</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Carp::MaxArgLen"><a class="permalink" href="#$Carp::MaxArgLen">$Carp::MaxArgLen</a></h2>
<p class="Pp">This variable determines how many characters of each argument to a
    function to print. Use a value of <span class="Li">0</span> to show the full
    length of the argument.</p>
<p class="Pp">Defaults to <span class="Li">64</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Carp::MaxArgNums"><a class="permalink" href="#$Carp::MaxArgNums">$Carp::MaxArgNums</a></h2>
<p class="Pp">This variable determines how many arguments to each function to
    show. Use a value of <span class="Li">0</span> to show all arguments to a
    function call.</p>
<p class="Pp">Defaults to <span class="Li">8</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Carp::Verbose"><a class="permalink" href="#$Carp::Verbose">$Carp::Verbose</a></h2>
<p class="Pp">This variable makes <span class="Li">&quot;carp()&quot;</span> and
    <span class="Li">&quot;croak()&quot;</span> generate stack backtraces just
    like <span class="Li">&quot;cluck()&quot;</span> and
    <span class="Li">&quot;confess()&quot;</span>. This is how
    <span class="Li">&quot;use Carp 'verbose'&quot;</span> is implemented
    internally.</p>
<p class="Pp">Defaults to <span class="Li">0</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="@CARP_NOT"><a class="permalink" href="#@CARP_NOT">@CARP_NOT</a></h2>
<p class="Pp">This variable, <i>in your package</i>, says which packages are
    <i>not</i> to be considered as the location of an error. The
    <span class="Li">&quot;carp()&quot;</span> and
    <span class="Li">&quot;cluck()&quot;</span> functions will skip over callers
    when reporting where an error occurred.</p>
<p class="Pp">NB: This variable must be in the package's symbol table, thus:</p>
<p class="Pp"></p>
<pre>    # These work
    our @CARP_NOT; # file scope
    use vars qw(@CARP_NOT); # package scope
    @My::Package::CARP_NOT = ... ; # explicit package variable
    # These don't work
    sub xyz { ... @CARP_NOT = ... } # w/o declarations above
    my @CARP_NOT; # even at top-level
</pre>
<p class="Pp">Example of use:</p>
<p class="Pp"></p>
<pre>    package My::Carping::Package;
    use Carp;
    our @CARP_NOT;
    sub bar     { .... or _error('Wrong input') }
    sub _error  {
        # temporary control of where'ness, __PACKAGE__ is implicit
        local @CARP_NOT = qw(My::Friendly::Caller);
        carp(@_)
    }
</pre>
<p class="Pp">This would make <span class="Li">&quot;Carp&quot;</span> report
    the error as coming from a caller not in
    <span class="Li">&quot;My::Carping::Package&quot;</span>, nor from
    <span class="Li">&quot;My::Friendly::Caller&quot;</span>.</p>
<p class="Pp">Also read the &quot;DESCRIPTION&quot; section above, about how
    <span class="Li">&quot;Carp&quot;</span> decides where the error is reported
    from.</p>
<p class="Pp">Use <span class="Li">@CARP_NOT</span>, instead of
    <span class="Li">$Carp::CarpLevel</span>.</p>
<p class="Pp">Overrides <span class="Li">&quot;Carp&quot;</span>'s use of
    <span class="Li">@ISA</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_Carp::Internal"><a class="permalink" href="#_Carp::Internal">%Carp::Internal</a></h2>
<p class="Pp">This says what packages are internal to Perl.
    <span class="Li">&quot;Carp&quot;</span> will never report an error as being
    from a line in a package that is internal to Perl. For example:</p>
<p class="Pp"></p>
<pre>    $Carp::Internal{ (__PACKAGE__) }++;
    # time passes...
    sub foo { ... or confess(&quot;whatever&quot;) };
</pre>
<p class="Pp">would give a full stack backtrace starting from the first caller
    outside of __PACKAGE__. (Unless that package was also internal to Perl.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_Carp::CarpInternal"><a class="permalink" href="#_Carp::CarpInternal">%Carp::CarpInternal</a></h2>
<p class="Pp">This says which packages are internal to Perl's warning system.
    For generating a full stack backtrace this is the same as being internal to
    Perl, the stack backtrace will not start inside packages that are listed in
    <span class="Li">%Carp::CarpInternal</span>. But it is slightly different
    for the summary message generated by
    <span class="Li">&quot;carp&quot;</span> or
    <span class="Li">&quot;croak&quot;</span>. There errors will not be reported
    on any lines that are calling packages in
    <span class="Li">%Carp::CarpInternal</span>.</p>
<p class="Pp">For example <span class="Li">&quot;Carp&quot;</span> itself is
    listed in <span class="Li">%Carp::CarpInternal</span>. Therefore the full
    stack backtrace from <span class="Li">&quot;confess&quot;</span> will not
    start inside of <span class="Li">&quot;Carp&quot;</span>, and the short
    message from calling <span class="Li">&quot;croak&quot;</span> is not placed
    on the line where <span class="Li">&quot;croak&quot;</span> was called.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Carp::CarpLevel"><a class="permalink" href="#$Carp::CarpLevel">$Carp::CarpLevel</a></h2>
<p class="Pp">This variable determines how many additional call frames are to be
    skipped that would not otherwise be when reporting where an error occurred
    on a call to one of <span class="Li">&quot;Carp&quot;</span>'s functions. It
    is fairly easy to count these call frames on calls that generate a full
    stack backtrace. However it is much harder to do this accounting for calls
    that generate a short message. Usually people skip too many call frames. If
    they are lucky they skip enough that
    <span class="Li">&quot;Carp&quot;</span> goes all of the way through the
    call stack, realizes that something is wrong, and then generates a full
    stack backtrace. If they are unlucky then the error is reported from
    somewhere misleading very high in the call stack.</p>
<p class="Pp">Therefore it is best to avoid
    <span class="Li">$Carp::CarpLevel</span>. Instead use
    <span class="Li">@CARP_NOT</span>, <span class="Li">%Carp::Internal</span>
    and <span class="Li">%Carp::CarpInternal</span>.</p>
<p class="Pp">Defaults to <span class="Li">0</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">The Carp routines don't handle exception objects currently. If
    called with a first argument that is a reference, they simply call
    <i>die()</i> or <i>warn()</i>, as appropriate.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Carp::Always, Carp::Clan</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">The Carp module first appeared in Larry Wall's perl 5.000
    distribution. Since then it has been modified by several of the perl 5
    porters. Andrew Main (Zefram) &lt;zefram@fysh.org&gt; divested Carp into an
    independent distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright (C) 1994-2012 Larry Wall</p>
<p class="Pp">Copyright (C) 2011, 2012 Andrew Main (Zefram)
    &lt;zefram@fysh.org&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
<p class="Pp">This module is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-09-30</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
