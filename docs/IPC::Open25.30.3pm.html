<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>IPC::Open2(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IPC::Open2(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">IPC::Open2(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
IPC::Open2 - open a process for both reading and writing using open2()
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
    use IPC::Open2;

    $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'some cmd and args');
      # or without using the shell
    $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'some', 'cmd', 'and', 'args');

    # or with handle autovivification
    my($chld_out, $chld_in);
    $pid = open2($chld_out, $chld_in, 'some cmd and args');
      # or without using the shell
    $pid = open2($chld_out, $chld_in, 'some', 'cmd', 'and', 'args');

    waitpid( $pid, 0 );
    my $child_exit_status = $? &gt;&gt; 8;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>open2()</b> function runs the given <span class="Li">$cmd</span> and
  connects <span class="Li">$chld_out</span> for reading and
  <span class="Li">$chld_in</span> for writing. It's what you think should work
  when you try
<p class="Pp"><span class="Li"></span></p>
<pre>
    $pid = open(HANDLE, &quot;|cmd args|&quot;);
</pre>
<p class="Pp">The write filehandle will have autoflush turned on.</p>
<p class="Pp">If <span class="Li">$chld_out</span> is a string (that is, a
    bareword filehandle rather than a glob or a reference) and it begins with
    <span class="Li">&quot;&gt;&amp;&quot;</span>, then the child will send
    output directly to that file handle. If <span class="Li">$chld_in</span> is
    a string that begins with <span class="Li">&quot;&lt;&amp;&quot;</span>,
    then <span class="Li">$chld_in</span> will be closed in the parent, and the
    child will read from it directly. In both cases, there will be a
    <b>dup</b>(2) instead of a <b>pipe</b>(2) made.</p>
<p class="Pp">If either reader or writer is the null string, this will be
    replaced by an autogenerated filehandle. If so, you must pass a valid lvalue
    in the parameter slot so it can be overwritten in the caller, or an
    exception will be raised.</p>
<p class="Pp"><b>open2()</b> returns the process ID of the child process. It
    doesn't return on failure: it just raises an exception matching
    <span class="Li">&quot;/^open2:/&quot;</span>. However,
    <span class="Li">&quot;exec&quot;</span> failures in the child are not
    detected. You'll have to trap SIGPIPE yourself.</p>
<p class="Pp"><b>open2()</b> does not wait for and reap the child process after
    it exits. Except for short programs where it's acceptable to let the
    operating system take care of this, you need to do this yourself. This is
    normally as simple as calling <span class="Li">&quot;waitpid $pid,
    0&quot;</span> when you're done with the process. Failing to do this can
    result in an accumulation of defunct or &quot;zombie&quot; processes. See
    &quot;waitpid&quot; in perlfunc for more information.</p>
<p class="Pp">This whole affair is quite dangerous, as you may block forever. It
    assumes it's going to talk to something like <b>bc</b>, both writing to it
    and reading from it. This is presumably safe because you &quot;know&quot;
    that commands like <b>bc</b> will read a line at a time and output a line at
    a time. Programs like <b>sort</b> that read their entire input stream first,
    however, are quite apt to cause deadlock.</p>
<p class="Pp">The big problem with this approach is that if you don't have
    control over source code being run in the child process, you can't control
    what it does with pipe buffering. Thus you can't just open a pipe to
    <span class="Li">&quot;cat -v&quot;</span> and continually read and write a
    line from it.</p>
<p class="Pp">The IO::Pty and Expect modules from CPAN can help with this, as
    they provide a real tty (well, a pseudo-tty, actually), which gets you back
    to line buffering in the invoked command again.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="WARNING"><a class="permalink" href="#WARNING">WARNING</a></h1>
The order of arguments differs from that of <b>open3()</b>.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
See IPC::Open3 for an alternative that handles STDERR as well. This function is
  really just a wrapper around <b>open3()</b>.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-24</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
