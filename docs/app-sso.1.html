<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>app-sso(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">app-sso(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">app-sso(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">app-sso</code> &#x2014; <span class="Nd">A tool
    used to control and get information about the Kerberos SSO
  extension.</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">app-sso</code></td>
    <td>[kerberos|platform] [command]
    <p class="Pp">Kerberos Commands (default mode):</p>
    <dl class="Bl-inset Bd-indent Bl-compact">
      <dt id="a,"><a class="permalink" href="#a,"><code class="Fl">-a,</code></a>
        <code class="Fl">--authenticate</code> <var class="Ar">REALM</var>
        [<var class="Ar">options</var> <code class="Li">...</code>]</dt>
      <dd>
        <dl class="Bl-inset Bd-indent Bl-compact">
          <dt id="u,"><a class="permalink" href="#u,"><code class="Fl">-u,</code></a>
            <code class="Fl">--username</code>
            <var class="Ar">USERNAME</var></dt>
          <dd></dd>
          <dt id="f,"><a class="permalink" href="#f,"><code class="Fl">-f,</code></a>
            <code class="Fl">--force</code></dt>
          <dd></dd>
          <dt id="q,"><a class="permalink" href="#q,"><code class="Fl">-q,</code></a>
            <code class="Fl">--quiet</code></dt>
          <dd></dd>
        </dl>
      </dd>
      <dt id="d,"><a class="permalink" href="#d,"><code class="Fl">-d,</code></a>
        <code class="Fl">--logout</code> <var class="Ar">REALM</var></dt>
      <dd></dd>
      <dt id="c,"><a class="permalink" href="#c,"><code class="Fl">-c,</code></a>
        <code class="Fl">--changepassword</code>
        <var class="Ar">REALM</var></dt>
      <dd></dd>
      <dt id="l,"><a class="permalink" href="#l,"><code class="Fl">-l,</code></a>
        <code class="Fl">--listrealms</code></dt>
      <dd></dd>
      <dt id="i,"><a class="permalink" href="#i,"><code class="Fl">-i,</code></a>
        <code class="Fl">--realminfo</code> <var class="Ar">REALM</var></dt>
      <dd>
        <dl class="Bl-inset Bd-indent Bl-compact">
          <dt id="v,"><a class="permalink" href="#v,"><code class="Fl">-v,</code></a>
            <code class="Fl">--verbose</code></dt>
          <dd></dd>
        </dl>
      </dd>
      <dt id="i,~2"><a class="permalink" href="#i,~2"><code class="Fl">-i,</code></a>
        <code class="Fl">--sitecode</code> <var class="Ar">REALM</var></dt>
      <dd>
        <dl class="Bl-inset Bd-indent Bl-compact">
          <dt id="v,~2"><a class="permalink" href="#v,~2"><code class="Fl">-v,</code></a>
            <code class="Fl">--verbose</code></dt>
          <dd></dd>
        </dl>
      </dd>
      <dt id="r,"><a class="permalink" href="#r,"><code class="Fl">-r,</code></a>
        <code class="Fl">--reset</code> <var class="Ar">REALM</var></dt>
      <dd></dd>
      <dt id="k,"><a class="permalink" href="#k,"><code class="Fl">-k,</code></a>
        <code class="Fl">--keychainoption</code>
        <var class="Ar">REALM</var></dt>
      <dd></dd>
      <dt id="j,"><a class="permalink" href="#j,"><code class="Fl">-j,</code></a>
        <code class="Fl">--json</code> <var class="Ar">REALM</var></dt>
      <dd></dd>
      <dt id="h,"><a class="permalink" href="#h,"><code class="Fl">-h,</code></a>
        <code class="Fl">--help</code> <var class="Ar">REALM</var></dt>
      <dd></dd>
    </dl>
    <p class="Pp">Platform SSO Commands:</p>
    <dl class="Bl-inset Bd-indent Bl-compact">
      <dt id="m,"><a class="permalink" href="#m,"><code class="Fl">-m,</code></a>
        <code class="Fl">--messages</code></dt>
      <dd></dd>
      <dt id="s,"><a class="permalink" href="#s,"><code class="Fl">-s,</code></a>
        <code class="Fl">--state</code></dt>
      <dd></dd>
    </dl>
    </td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">app-sso</code> is used to control and get
    information about both the Kerberos Single Sign-on (SSO) extension and
    Platform SSO via the command line.</p>
<p class="Pp">In Kerberos mode (default), the tool controls the Kerberos SSO
    extension which simplifies using Kerberos authentication with an Active
    Directory based Kerberos realm. It also allows the user to use Active
    Directory specific functions such as password changes and password
    expiration notifications.</p>
<p class="Pp">In Platform SSO mode, the tool provides diagnostic information
    about the current Platform SSO state and configuration, and can display
    sample messages using the current configuration.</p>
<p class="Pp">Note that <code class="Nm">app-sso</code> cannot be used to
    completely configure either the Kerberos SSO extension or Platform SSO.
    Configuration requires a user approved MDM enrollment, as well as an MDM
    solution that can build and deliver an appropriately configured Extensible
    SSO configuration profile payload. See your MDM vendor's documentation for
    additional information.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt id="a,~2"><a class="permalink" href="#a,~2"><code class="Fl">-a,</code></a>
    <code class="Fl">--authenticate</code> <var class="Ar">REALM</var></dt>
  <dd>Display the login dialog for the specified realm, or if the user has
      already configured the Kerberos SSO extension, acquire a new credential.
      Returns success upon acquiring a new credential or if the user already has
      a valid credential.
    <dl class="Bl-tag">
      <dt id="u,~2"><a class="permalink" href="#u,~2"><code class="Fl">-u,</code></a>
        <code class="Fl">--username</code></dt>
      <dd>The username for authentication. The user will not be able to change
          this username on the login screen.</dd>
      <dt id="f,~2"><a class="permalink" href="#f,~2"><code class="Fl">-f,</code></a>
        <code class="Fl">--force</code></dt>
      <dd>Display the login screen even if the user is already
        authenticated.</dd>
      <dt id="q,~2"><a class="permalink" href="#q,~2"><code class="Fl">-q,</code></a>
        <code class="Fl">--quiet</code></dt>
      <dd>Suppress the information that is normally printed after
          authentication.</dd>
    </dl>
  </dd>
  <dt id="d,~2"><a class="permalink" href="#d,~2"><code class="Fl">-d,</code></a>
    <code class="Fl">--logout</code> <var class="Ar">REALM</var></dt>
  <dd>Logs out any user logged into the specified realm.</dd>
  <dt id="c,~2"><a class="permalink" href="#c,~2"><code class="Fl">-c,</code></a>
    <code class="Fl">--changepassword</code> <var class="Ar">REALM</var></dt>
  <dd>Displays the &quot;Change Password&quot; dialog for the specified
    realm.</dd>
  <dt id="l,~2"><a class="permalink" href="#l,~2"><code class="Fl">-l,</code></a>
    <code class="Fl">--listrealms</code></dt>
  <dd>Prints the list of configured realms.</dd>
  <dt id="i,~3"><a class="permalink" href="#i,~3"><code class="Fl">-i,</code></a>
    <code class="Fl">--realminfo</code> <var class="Ar">REALM</var></dt>
  <dd>Print information about the currently configured realm. This includes
      information such as the current site code, network home directory and date
      the user's password expires.
    <dl class="Bl-tag">
      <dt id="v,~3"><a class="permalink" href="#v,~3"><code class="Fl">-v,</code></a>
        <code class="Fl">--verbose</code></dt>
      <dd>Print the complete site code cache in the results.</dd>
    </dl>
  </dd>
  <dt id="s,~2"><a class="permalink" href="#s,~2"><code class="Fl">-s,</code></a>
    <code class="Fl">--sitecode</code> <var class="Ar">REALM</var></dt>
  <dd>Perform a site lookup for the specified realm.
    <dl class="Bl-tag">
      <dt id="v,~4"><a class="permalink" href="#v,~4"><code class="Fl">-v,</code></a>
        <code class="Fl">--verbose</code></dt>
      <dd>Print the complete site code cache in the results.</dd>
    </dl>
  </dd>
  <dt id="r,~2"><a class="permalink" href="#r,~2"><code class="Fl">-r,</code></a>
    <code class="Fl">--reset</code> [<var class="Ar">REALM</var>]</dt>
  <dd>Reset the cache for the specified realm. If a realm isn't specified, reset
      caches for all realms.</dd>
  <dt id="k,~2"><a class="permalink" href="#k,~2"><code class="Fl">-k,</code></a>
    <code class="Fl">--keychainoption</code> <var class="Ar">REALM</var></dt>
  <dd>Resets the &quot;login automatically&quot; option for the specified
    realm.</dd>
  <dt id="p,"><a class="permalink" href="#p,"><code class="Fl">-p,</code></a>
    <code class="Fl">--proceedusersetup</code> <var class="Ar">REALM</var></dt>
  <dd>Allow user setup to proceed if you are using &quot;delayUserSetup&quot; in
      your configuration profile.</dd>
  <dt id="t,"><a class="permalink" href="#t,"><code class="Fl">-t,</code></a>
    <code class="Fl">--sharedsettings</code> <var class="Ar">REALM</var></dt>
  <dd>Prints the kerberos settings that are shared with other processes for the
      specified realm. For diagnostic purposes only, not intended for
    scripting.</dd>
  <dt id="j,~2"><a class="permalink" href="#j,~2"><code class="Fl">-j,</code></a>
    <code class="Fl">--json</code></dt>
  <dd>Format the output of this command as JSON instead of property list
    format.</dd>
  <dt id="h,~2"><a class="permalink" href="#h,~2"><code class="Fl">-h,</code></a>
    <code class="Fl">--help</code></dt>
  <dd>Print a synopsis of the above document.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PLATFORM_SSO_COMMANDS"><a class="permalink" href="#PLATFORM_SSO_COMMANDS">PLATFORM
  SSO COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt id="m,~2"><a class="permalink" href="#m,~2"><code class="Fl">-m,</code></a>
    <code class="Fl">--messages</code></dt>
  <dd>Display sample messages using the current Platform SSO configuration. This
      command is useful for testing and diagnostic purposes to verify that
      Platform SSO is properly configured and can generate authentication
      messages.</dd>
  <dt id="s,~3"><a class="permalink" href="#s,~3"><code class="Fl">-s,</code></a>
    <code class="Fl">--state</code></dt>
  <dd>Display the current Platform SSO state and configuration. This includes
      information about device configuration, login configuration, user
      configuration, and SSO token status including received and expiration
      dates. For diagnostic purposes only, not intended for scripting.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt>Print infomation about the PRETENDCO.COM realm:</dt>
  <dd>app-sso -i PRETENDCO.COM</dd>
  <dt>Authenticate to the PRETENDCO.COM realm as jappleseed:</dt>
  <dd>app-sso -a PRETENDCO.COM -u jappleseed</dd>
  <dt>Display Platform SSO state and configuration:</dt>
  <dd>app-sso platform -s</dd>
  <dt>Display Platform SSO test messages:</dt>
  <dd>app-sso platform -m</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="Kerberos_Extension_UI_Options"><a class="permalink" href="#Kerberos_Extension_UI_Options">Kerberos
  Extension UI Options</a></h1>
<dl class="Bl-tag">
  <dt>startInSmartCardMode</dt>
  <dd>The default behavior of the KerberosExtension is to start in the UI mode
      last used by the user. To force it to start in SmartCard mode, run this
      defaults command:
    <p class="Pp"></p>
    <div class="Bd Bd-indent"><code class="Li">defaults write
      com.apple.AppSSOKerberos.KerberosExtension startInSmartCardMode -bool
      true</code></div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt>allowSmartCard</dt>
  <dd>
    <br/>
     The default behavior of the KerberosExtension is to show both password and
      SmartCard authentication in the UI. To hide SmartCards, run this defaults
      command:
    <p class="Pp"></p>
    <div class="Bd Bd-indent"><code class="Li">defaults write
      com.apple.AppSSOKerberos.KerberosExtension allowSmartCard -bool
      false</code></div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt>allowPassword</dt>
  <dd>
    <br/>
     The default behavior of the KerberosExtension is to show both password and
      SmartCard authentication in the UI. To hide passwords, run this defaults
      command:
    <p class="Pp"></p>
    <div class="Bd Bd-indent"><code class="Li">defaults write
      com.apple.AppSSOKerberos.KerberosExtension allowPassword -bool
      false</code></div>
  </dd>
</dl>
<dl class="Bl-tag">
  <dt>identityIssuerAutoSelectFilter</dt>
  <dd>
    <br/>
     The default behavior of the KerberosExtension is to auto select an
      available identity if one is available. If more than one is available,
      then the identityIssuerAutoSelectFilter can be used to filter the issuer
      names. If one is left, then it will be auto selected. The value should
      include any wild cards. To enable it, run this defaults command with the
      correct filter value:
    <div class="Bd Pp Bd-indent Li">
    <pre>defaults write com.apple.AppSSOKerberos.KerberosExtension identityIssuerAutoSelectFilter 'Apple CA*'</pre>
    </div>
  </dd>
</dl>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 28, 2020</td>
    <td class="foot-os">macOS</td>
  </tr>
</table>
</body>
</html>
