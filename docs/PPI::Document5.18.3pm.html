<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>PPI::Document(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PPI::Document(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">PPI::Document(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
PPI::Document - Object representation of a Perl document
</section>
<section class="Sh">
<h1 class="Sh" id="INHERITANCE"><a class="permalink" href="#INHERITANCE">INHERITANCE</a></h1>
<span class="Li"></span>
<pre>
  PPI::Document
  isa PPI::Node
      isa PPI::Element
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  use PPI;
  
  # Load a document from a file
  my $Document = PPI::Document-&gt;new('My/Module.pm');
  
  # Strip out comments
  $Document-&gt;prune('PPI::Token::Comment');
  
  # Find all the named subroutines
  my $sub_nodes = $Document-&gt;find( 
        sub { $_[1]-&gt;isa('PPI::Statement::Sub') and $_[1]-&gt;name }
  );
  my @sub_names = map { $_-&gt;name } @$sub_nodes;
  
  # Save the file
  $Document-&gt;save('My/Module.pm.stripped');
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <span class="Li">&quot;PPI::Document&quot;</span> class represents a single
  Perl &quot;document&quot;. A <span class="Li">&quot;PPI::Document&quot;</span>
  object acts as a root PPI::Node, with some additional methods for loading and
  saving, and working with the line/column locations of Elements within a file.
<p class="Pp">The exemption to its PPI::Node-like behavior this is that a
    <span class="Li">&quot;PPI::Document&quot;</span> object can NEVER have a
    parent node, and is always the root node in a tree.</p>
<section class="Ss">
<h2 class="Ss" id="Storable_Support"><a class="permalink" href="#Storable_Support">Storable
  Support</a></h2>
<span class="Li">&quot;PPI::Document&quot;</span> implements the necessary
  <span class="Li">&quot;STORABLE_freeze&quot;</span> and
  <span class="Li">&quot;STORABLE_thaw&quot;</span> hooks to provide native
  support for Storable, if you have it installed.
<p class="Pp">However if you want to clone clone a Document, you are highly
    recommended to use the internal
    <span class="Li">&quot;$Document-&gt;clone&quot;</span> method rather than
    Storable's <span class="Li">&quot;dclone&quot;</span> function (although
    <span class="Li">&quot;dclone&quot;</span> should still work).</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
Most of the things you are likely to want to do with a Document are probably
  going to involve the methods from PPI::Node class, of which this is a
  subclass.
<p class="Pp">The methods listed here are the remaining few methods that are
    truly Document-specific.</p>
<section class="Ss">
<h2 class="Ss" id="new"><a class="permalink" href="#new">new</a></h2>
<span class="Li"></span>
<pre>
  # Simple construction
  $doc = PPI::Document-&gt;new( $filename );
  $doc = PPI::Document-&gt;new( \$source  );
  
  # With the readonly attribute set
  $doc = PPI::Document-&gt;new( $filename,
          readonly =&gt; 1,
  );
</pre>
<p class="Pp">The <span class="Li">&quot;new&quot;</span> constructor takes as
    argument a variety of different sources of Perl code, and creates a single
    cohesive Perl <span class="Li">&quot;PPI::Document&quot;</span> for it.</p>
<p class="Pp">If passed a file name as a normal string, it will attempt to load
    the document from the file.</p>
<p class="Pp">If passed a reference to a
    <span class="Li">&quot;SCALAR&quot;</span>, this is taken to be source code
    and parsed directly to create the document.</p>
<p class="Pp">If passed zero arguments, a &quot;blank&quot; document will be
    created that contains no content at all.</p>
<p class="Pp">In all cases, the document is considered to be
    &quot;anonymous&quot; and not tied back to where it was created from.
    Specifically, if you create a PPI::Document from a filename, the document
    will <b>not</b> remember where it was created from.</p>
<p class="Pp">The constructor also takes attribute flags.</p>
<p class="Pp">At this time, the only available attribute is the
    <span class="Li">&quot;readonly&quot;</span> flag.</p>
<p class="Pp">Setting <span class="Li">&quot;readonly&quot;</span> to true will
    allow various systems to provide additional optimisations and caching. Note
    that because <span class="Li">&quot;readonly&quot;</span> is an optimisation
    flag, it is off by default and you will need to explicitly enable it.</p>
<p class="Pp">Returns a <span class="Li">&quot;PPI::Document&quot;</span>
    object, or <span class="Li">&quot;undef&quot;</span> if parsing fails.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="set_cache_$cache"><a class="permalink" href="#set_cache_$cache">set_cache
  $cache</a></h2>
As of PPI 1.100, <span class="Li">&quot;PPI::Document&quot;</span> supports
  parser caching.
<p class="Pp">The default cache class PPI::Cache provides a Storable-based
    caching or the parsed document based on the MD5 hash of the document as a
    string.</p>
<p class="Pp">The static <span class="Li">&quot;set_cache&quot;</span> method is
    used to set the cache object for
    <span class="Li">&quot;PPI::Document&quot;</span> to use when loading
    documents. It takes as argument a PPI::Cache object (or something that
    <span class="Li">&quot;isa&quot;</span> the same).</p>
<p class="Pp">If passed <span class="Li">&quot;undef&quot;</span>, this method
    will stop using the current cache, if any.</p>
<p class="Pp">For more information on caching, see PPI::Cache.</p>
<p class="Pp">Returns true on success, or
    <span class="Li">&quot;undef&quot;</span> if not passed a valid param.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="get_cache"><a class="permalink" href="#get_cache">get_cache</a></h2>
If a document cache is currently set, the
  <span class="Li">&quot;get_cache&quot;</span> method will return it.
<p class="Pp">Returns a PPI::Cache object, or
    <span class="Li">&quot;undef&quot;</span> if there is no cache currently set
    for <span class="Li">&quot;PPI::Document&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="readonly"><a class="permalink" href="#readonly">readonly</a></h2>
The <span class="Li">&quot;readonly&quot;</span> attribute indicates if the
  document is intended to be read-only, and will never be modified. This is an
  advisory flag, that writers of PPI-related systems may or may not use to
  enable optimisations and caches for your document.
<p class="Pp">Returns true if the document is read-only or false if not.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="tab_width___$width__"><a class="permalink" href="#tab_width___$width__">tab_width
  [ $width ]</a></h2>
In order to handle support for <span class="Li">&quot;location&quot;</span>
  correctly, <span class="Li">&quot;Documents&quot;</span> need to understand
  the concept of tabs and tab width. The
  <span class="Li">&quot;tab_width&quot;</span> method is used to get and set
  the size of the tab width.
<p class="Pp">At the present time, PPI only supports &quot;naive&quot; (width 1)
    tabs, but we do plan on supporting arbitrary, default and auto-sensing tab
    widths later.</p>
<p class="Pp">Returns the tab width as an integer, or
    <span class="Li">&quot;die&quot;</span>s if you attempt to set the tab
    width.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="save"><a class="permalink" href="#save">save</a></h2>
<span class="Li"></span>
<pre>
  $document-&gt;save( $file )
</pre>
<p class="Pp">The <span class="Li">&quot;save&quot;</span> method serializes the
    <span class="Li">&quot;PPI::Document&quot;</span> object and saves the
    resulting Perl document to a file. Returns
    <span class="Li">&quot;undef&quot;</span> on failure to open or write to the
    file.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="serialize"><a class="permalink" href="#serialize">serialize</a></h2>
Unlike the <span class="Li">&quot;content&quot;</span> method, which shows only
  the immediate content within an element, Document objects also have to be able
  to be written out to a file again.
<p class="Pp">When doing this we need to take into account some additional
    factors.</p>
<p class="Pp">Primarily, we need to handle here-docs correctly, so that are
    written to the file in the expected place.</p>
<p class="Pp">The <span class="Li">&quot;serialize&quot;</span> method generates
    the actual file content for a given Document object. The resulting string
    can be written straight to a file.</p>
<p class="Pp">Returns the serialized document as a string.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="hex_id"><a class="permalink" href="#hex_id">hex_id</a></h2>
The <span class="Li">&quot;hex_id&quot;</span> method generates an unique
  identifier for the Perl document.
<p class="Pp">This identifier is basically just the serialized document, with
    Unix-specific newlines, passed through MD5 to produce a hexadecimal
  string.</p>
<p class="Pp">This identifier is used by a variety of systems (such as
    PPI::Cache and Perl::Metrics) as a unique key against which to store or
    cache information about a document (or indeed, to cache the document
    itself).</p>
<p class="Pp">Returns a 32 character hexadecimal string.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="index_locations"><a class="permalink" href="#index_locations">index_locations</a></h2>
Within a document, all PPI::Element objects can be considered to have a
  &quot;location&quot;, a line/column position within the document when
  considered as a file. This position is primarily useful for debugging type
  activities.
<p class="Pp">The method for finding the position of a single Element is a bit
    laborious, and very slow if you need to do it a lot. So the
    <span class="Li">&quot;index_locations&quot;</span> method will index and
    save the locations of every Element within the Document in advance, making
    future calls to &lt;PPI::Element::location&gt; virtually free.</p>
<p class="Pp">Please note that this index should always be cleared using
    <span class="Li">&quot;flush_locations&quot;</span> once you are finished
    with the locations. If content is added to or removed from the file, these
    indexed locations will be <b>wrong</b>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="flush_locations"><a class="permalink" href="#flush_locations">flush_locations</a></h2>
When no longer needed, the <span class="Li">&quot;flush_locations&quot;</span>
  method clears all location data from the tokens.
</section>
<section class="Ss">
<h2 class="Ss" id="normalized"><a class="permalink" href="#normalized">normalized</a></h2>
The <span class="Li">&quot;normalized&quot;</span> method is used to generate a
  &quot;Layer 1&quot; PPI::Document::Normalized object for the current Document.
<p class="Pp">A &quot;normalized&quot; Perl Document is an arbitrary structure
    that removes any irrelevant parts of the document and refactors out
    variations in style, to attempt to approach something that is closer to the
    &quot;true meaning&quot; of the Document.</p>
<p class="Pp">See PPI::Normal for more information on document normalization and
    the tasks for which it is useful.</p>
<p class="Pp">Returns a PPI::Document::Normalized object, or
    <span class="Li">&quot;undef&quot;</span> on error.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="complete"><a class="permalink" href="#complete">complete</a></h1>
The <span class="Li">&quot;complete&quot;</span> method is used to determine if
  a document is cleanly structured, all braces are closed, the final statement
  is fully terminated and all heredocs are fully entered.
<p class="Pp">Returns true if the document is complete or false if not.</p>
<section class="Ss">
<h2 class="Ss" id="errstr"><a class="permalink" href="#errstr">errstr</a></h2>
For error that occur when loading and saving documents, you can use
  <span class="Li">&quot;errstr&quot;</span>, as either a static or object
  method, to access the error message.
<p class="Pp">If a Document loads or saves without error,
    <span class="Li">&quot;errstr&quot;</span> will return false.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="TO_DO"><a class="permalink" href="#TO_DO">TO DO</a></h1>
- May need to overload some methods to forcefully prevent Document objects
  becoming children of another Node.
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
See the support section in the main module.
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Adam Kennedy &lt;adamk@cpan.org&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
PPI, &lt;http://ali.as/&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright 2001 - 2011 Adam Kennedy.
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
<p class="Pp">The full text of the license can be found in the LICENSE file
    included with this module.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2011-02-25</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
