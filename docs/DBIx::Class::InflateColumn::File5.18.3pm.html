<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>DBIx::Class::InflateColumn::File(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DBIx::Class::InflateColumn::File(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">DBIx::Class::InflateColumn::File(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
DBIx::Class::InflateColumn::File - DEPRECATED (superseded by
  DBIx::Class::InflateColumn::FS)
<section class="Ss">
<h2 class="Ss" id="Deprecation_Notice"><a class="permalink" href="#Deprecation_Notice">Deprecation
  Notice</a></h2>
<span class="Li"></span>
<pre>
 This component has a number of architectural deficiencies that can quickly
 drive your filesystem and database out of sync and is not recommended for
 further use. It will be retained for backwards compatibility, but no new
 functionality patches will be accepted. Please consider using the much more
 mature and actively supported DBIx::Class::InflateColumn::FS. You can set
 the environment variable DBIC_IC_FILE_NOWARN to a true value to disable
 this warning.
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
In your DBIx::Class table class:
<p class="Pp"><span class="Li"></span></p>
<pre>
    use base 'DBIx::Class::Core';

    __PACKAGE__-&gt;load_components(qw/InflateColumn::File/);

    # define your columns
    __PACKAGE__-&gt;add_columns(
        &quot;id&quot;,
        {
            data_type         =&gt; &quot;integer&quot;,
            is_auto_increment =&gt; 1,
            is_nullable       =&gt; 0,
            size              =&gt; 4,
        },
        &quot;filename&quot;,
        {
            data_type           =&gt; &quot;varchar&quot;,
            is_file_column      =&gt; 1,
            file_column_path    =&gt;'/tmp/uploaded_files',
            # or for a Catalyst application
            # file_column_path  =&gt; MyApp-&gt;path_to('root','static','files'),
            default_value       =&gt; undef,
            is_nullable         =&gt; 1,
            size                =&gt; 255,
        },
    );
</pre>
<p class="Pp">In your Catalyst::Controller class:</p>
<p class="Pp">FileColumn requires a hash that contains IO::File as handle and
    the file's name as name.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    my $entry = $c-&gt;model('MyAppDB::Articles')-&gt;create({
        subject =&gt; 'blah',
        filename =&gt; {
            handle =&gt; $c-&gt;req-&gt;upload('myupload')-&gt;fh,
            filename =&gt; $c-&gt;req-&gt;upload('myupload')-&gt;basename
        },
        body =&gt; '....'
    });
    $c-&gt;stash-&gt;{entry}=$entry;
</pre>
<p class="Pp">And Place the following in your TT template</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    Article Subject: [% entry.subject %]
    Uploaded File:
    &lt;a href=&quot;/static/files/[% entry.id %]/[% entry.filename.filename %]&quot;&gt;File&lt;/a&gt;
    Body: [% entry.body %]
</pre>
<p class="Pp">The file will be stored on the filesystem for later retrieval.
    Calling delete on your resultset will delete the file from the filesystem.
    Retrevial of the record automatically inflates the column back to the set
    hash with the IO::File handle and filename.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
InflateColumn::File
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_file_column_callback_($file,$ret,$target)"><a class="permalink" href="#_file_column_callback_($file,$ret,$target)">_file_column_callback
  ($file,$ret,$target)</a></h2>
Method made to be overridden for callback purposes.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Victor Igumnov
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
This library is free software, you can redistribute it and/or modify it under
  the same terms as Perl itself.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-09-24</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
