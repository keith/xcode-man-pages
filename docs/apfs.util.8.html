<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2015-2020 Apple Inc. All rights reserved.
  
   @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  
   This file contains Original Code and/or Modifications of Original Code
   as defined in and that are subject to the Apple Public Source License
   Version 2.0 (the 'License'). You may not use this file except in
   compliance with the License. The rights granted to you under the License
   may not be used to create, or enable the creation or redistribution of,
   unlawful or unlicensed copies of an Apple operating system, or to
   circumvent, violate, or enable the circumvention or violation of, any
   terms of an Apple operating system software license agreement.
  
   Please obtain a copy of the License at
   http://www.opensource.apple.com/apsl/ and read it before using this file.
  
   The Original Code and all software distributed under the License are
   distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
   EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
   INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
   Please see the License for the specific language governing rights and
   limitations under the License.
  
   @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  
       @(#)apfs.util.8
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>APFS.UTIL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">APFS.UTIL(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">APFS.UTIL(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">apfs.util</code> &#x2014; <span class="Nd">APFS
    file system utility</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-A</code> <var class="Ar">get path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-A</code> <var class="Ar">set=yes/no path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-C</code> <var class="Ar">-type type path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-D</code> <var class="Ar">get device</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-D</code> <var class="Ar">set=yes/no device</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-E</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-G</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-h</code></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-k</code> <var class="Ar">device</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-m</code> <var class="Ar">&lt;verb&gt; path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-M</code> <var class="Ar">dir</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-O</code> <var class="Ar">path fs_name</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-p</code> <var class="Ar">device removable
      writable</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-P</code> <var class="Ar">verb1 verb2 path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-r</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-R</code> <var class="Ar">SNAPSHOT device</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-s</code> <var class="Ar">device</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-S</code> <var class="Ar">dir</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-t</code></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-y</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-Y</code> <var class="Ar">dir</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-z</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs.util</code></td>
    <td><code class="Fl">-Z</code> <var class="Ar">path</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">apfs.util</code> command supports getting and
    setting various file system options.</p>
<p class="Pp"><var class="Ar">path</var> argument is a path to any file within
    the mounted file system. If it is used to specify a volume, any file within
    the same volume will get the same result. <var class="Ar">device</var>
    argument is the /dev/diskXsY identifier corresponding to the volume.
    <var class="Ar">dir</var> could be any directory in the mounted file
  system.</p>
<p class="Pp">Options:</p>
<dl class="Bl-tag">
  <dt id="A"><a class="permalink" href="#A"><code class="Fl">-A</code></a>
    <var class="Ar">get path</var></dt>
  <dd>get atime update setting for volume specified by
      <var class="Ar">path</var>.</dd>
  <dt id="A~2"><a class="permalink" href="#A~2"><code class="Fl">-A</code></a>
    <var class="Ar">set=yes/no path</var></dt>
  <dd>enable or disable update setting for volume specified by
      <var class="Ar">path</var>.</dd>
  <dt id="C"><a class="permalink" href="#C"><code class="Fl">-C</code></a>
    <code class="Fl">-type</code> <var class="Ar">type path</var></dt>
  <dd>clear the purgeability of files of the specified type on the volume
      referred to by <var class="Ar">path</var>.
    <br/>
    <var class="Ar">type</var> could be one of: photo, music, mail, document,
      data, podcast, video, movie, message, book.</dd>
  <dt id="D"><a class="permalink" href="#D"><code class="Fl">-D</code></a>
    <var class="Ar">get device</var></dt>
  <dd>Get defragmentation setting for volume or container specied by
      <var class="Ar">device</var>.</dd>
  <dt id="D~2"><a class="permalink" href="#D~2"><code class="Fl">-D</code></a>
    <var class="Ar">set=yes/no device</var></dt>
  <dd>enable / disable defragmentation for volume or container specified by
      <var class="Ar">device</var>.</dd>
  <dt id="E"><a class="permalink" href="#E"><code class="Fl">-E</code></a>
    <var class="Ar">path</var></dt>
  <dd>drop the extents for <var class="Ar">path</var> from the first
    snapshot</dd>
  <dt id="G"><a class="permalink" href="#G"><code class="Fl">-G</code></a>
    <var class="Ar">path</var></dt>
  <dd>get stats on the purgeable files on the volume specified by
      <var class="Ar">path</var>.</dd>
  <dt id="k"><a class="permalink" href="#k"><code class="Fl">-k</code></a></dt>
  <dd>Return the UUID of the apfs volume on <var class="Ar">device</var>.</dd>
  <dt id="m"><a class="permalink" href="#m"><code class="Fl">-m</code></a>
    <var class="Ar">verb path</var></dt>
  <dd>mark the file at <var class="Ar">path</var> as purgeable with the various
      options specified.
    <br/>
    <var class="Ar">verb</var> could be one or more of: -low -med -high -photo
      -music -mail -document -data -podcast -video -movie -message -book -fault
      -clear</dd>
  <dt id="M"><a class="permalink" href="#M"><code class="Fl">-M</code></a>
    <var class="Ar">dir</var></dt>
  <dd>flag the named directory as &quot;maintain-dir-stats&quot;.</dd>
  <dt id="O"><a class="permalink" href="#O"><code class="Fl">-O</code></a>
    <var class="Ar">path fs_name</var></dt>
  <dd>override the fstypename for apfs to be <var class="Ar">fs_name</var> or
      &quot;hfs&quot; if the optional <var class="Ar">fs_name</var> was not
      given.</dd>
  <dt id="p"><a class="permalink" href="#p"><code class="Fl">-p</code></a>
    <var class="Ar">device</var></dt>
  <dd>Return the apfs volume name of <var class="Ar">device</var>.</dd>
  <dt id="P"><a class="permalink" href="#P"><code class="Fl">-P</code></a>
    <var class="Ar">criteria path</var></dt>
  <dd>purge files meeting the <var class="Ar">criteria</var> specified on the
      volume referred to by <var class="Ar">path</var>.
    <br/>
    <var class="Ar">criteria</var> could be -low -med -high
    <br/>
    and/or with specified parameters: -minsize VAL -maxage VAL -maxage
      AGE_IN_SECONDS -total TOTAL_PURGE_AMOUNT
    <br/>
    and/or specified by: -type <var class="Ar">type</var>, that could be one of
      -photo -music -mail -document -data -podcast -video -movie -message -book
    <br/>
    (and optionally, -typetotal TYPE_PURGE_AMOUNT)</dd>
  <dt id="r"><a class="permalink" href="#r"><code class="Fl">-r</code></a>
    <var class="Ar">dir</var></dt>
  <dd>set the sync-root flag on the specified <var class="Ar">dir</var>
      directory.</dd>
  <dt id="R"><a class="permalink" href="#R"><code class="Fl">-R</code></a>
    <var class="Ar">SNAPSHOT device</var></dt>
  <dd>set the volume specified by <var class="Ar">device</var> to revert to the
      snapshot named by SNAPSHOT on next mount.</dd>
  <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a>
    <var class="Ar">device</var></dt>
  <dd>Set container UUID and its volume(s) UUID(s) to new random values.
      <var class="Ar">device</var> must be an identifier of a container.</dd>
  <dt id="S"><a class="permalink" href="#S"><code class="Fl">-S</code></a>
    <var class="Ar">dir</var></dt>
  <dd>get the directory stats from <var class="Ar">dir</var>.
      <var class="Ar">path</var>.</dd>
  <dt id="t"><a class="permalink" href="#t"><code class="Fl">-t</code></a></dt>
  <dd>stitches and creates synthetic objects on root volume group</dd>
  <dt id="y"><a class="permalink" href="#y"><code class="Fl">-y</code></a>
    <var class="Ar">path</var></dt>
  <dd>get the sync-root flag from the first parent that has one for the item
      identified by <var class="Ar">path</var>.</dd>
  <dt id="Y"><a class="permalink" href="#Y"><code class="Fl">-Y</code></a>
    <var class="Ar">dir</var></dt>
  <dd>get the sync-root flag from the specified directory in
      <var class="Ar">dir</var>.</dd>
  <dt id="z"><a class="permalink" href="#z"><code class="Fl">-z</code></a>
    <var class="Ar">path</var></dt>
  <dd>make the file at <var class="Ar">path</var> exempt from copy-on-write
      semantics for snapshots</dd>
  <dt id="Z"><a class="permalink" href="#Z"><code class="Fl">-Z</code></a>
    <var class="Ar">path</var></dt>
  <dd>get the purgeable file flags for the specific file at
      <var class="Ar">path</var>.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">diskarbitrationd(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Nm">apfs.util</code> utility first appeared in OS
    X 10.12.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 17, 2020</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
