<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  Copyright (c) 2007-2010 Apple Inc.  All Rights Reserved.
  
  To check for errors: /usr/bin/groff -I/usr/share/man -S -Wall -mtty-char -mandoc -Tascii tmdiagnose.8 > /dev/null
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>TMDIAGNOSE(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TMDIAGNOSE(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">TMDIAGNOSE(8)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">tmdiagnose</code> &#x2014;
<div class="Nd">gather information to aid in diagnosing Time Machine
  issues</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">tmdiagnose</code></td>
    <td><code class="Fl">-h</code></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">tmdiagnose</code></td>
    <td>[<code class="Fl">-d</code> <var class="Ar">seconds</var>]
      [<code class="Fl">-f</code> <var class="Ar">path</var>]
      [<code class="Fl">-m</code>] [<code class="Fl">-r</code>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <code class="Nm">tmdiagnose</code> tool gathers system and backup
  information in order to assist Apple when investigating issues related to Time
  Machine. A great deal of information is harvested, spanning system state,
  system and backup configuration, and snapshot details.
<section class="Ss">
<h2 class="Ss">What <code class="Nm">tmdiagnose</code>
  <b class="Sy">Collects:</b></h2>
<ul class="Bl-bullet Bd-indent Bl-compact">
  <li>A spindump of the system</li>
  <li>Several seconds of fs_usage ouput</li>
  <li>Several seconds of top output</li>
  <li>Individual samples of backupd and Finder</li>
  <li>Power Management state and logs</li>
  <li>IOKit registry information</li>
  <li>A netstat inspection</li>
  <li>A list of all open files on the system</li>
  <li>All system logs</li>
  <li>All kernel logs</li>
  <li>All install logs</li>
  <li>All fsck_hfs logs</li>
  <li>All WiFi logs</li>
  <li>Disk Utility logs for all local users</li>
  <li>The system migration log</li>
  <li>All spin and crash reports for the following processes:
    <ul class="Bl-item Bd-indent Bl-compact">
      <li>backupd</li>
      <li>mds</li>
      <li>diskimages-helper</li>
      <li>DesktopServicesHelper</li>
      <li>newfs_hfs</li>
      <li>NetAuthSysAgent</li>
    </ul>
    <p class="Pp"></p>
  </li>
  <li>Recent spin and crash reports for the following processes, for all local
      users:
    <ul class="Bl-item Bd-indent Bl-compact">
      <li>Finder</li>
      <li>Locum</li>
      <li>System Preferences</li>
      <li>SystemUIServer</li>
      <li>iPhoto</li>
      <li>Mail</li>
      <li>MailTimeMachineHelper</li>
      <li>Address Book</li>
    </ul>
    <p class="Pp"></p>
  </li>
  <li>Basic information about reachable AirPort and Time Capsule devices</li>
  <li>The FindSystemFiles cache</li>
  <li>Information about disks and mounted network shares</li>
  <li>Information about attached disk images</li>
  <li>A System Profiler report</li>
  <li>A list of software that has been installed via the
      <b class="Sy">darwinup</b> tool</li>
  <li>Time Machine preferences, caches, and configuration information</li>
  <li>Comprehensive information about Time Machine backups and snapshots</li>
</ul>
<p class="Pp">The high-level backup structure for the current machine directory
    is recreated inside the diagnostic bundle, including the capture of various
    Time Machine log files contained within snapshots. Items in this
    &quot;skeleton&quot; structure have on them the extended attributes of the
    originals. Recreations of local snapshots are also captured in the same
    manner.</p>
<p class="Pp">The <code class="Nm">tmdiagnose</code> tool will run the Spotlight
    diagnostic tool <b class="Sy">mddiagnose</b> automatically, if it is
    available.</p>
</section>
<section class="Ss">
<h2 class="Ss">What <code class="Nm">tmdiagnose</code> <b class="Sy">Doesn't
  Collect:</b></h2>
<ul class="Bl-bullet Bd-indent Bl-compact">
  <li>No user files are harvested from within backups</li>
  <li>No authentication credentials are harvested from the system</li>
  <li>No authentication credentials are harvested for reachable AirPort and Time
      Capsule devices</li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-hang Bl-compact">
  <dt><a class="permalink" href="#h"><code class="Fl" id="h">-h</code></a></dt>
  <dd>Print full usage.</dd>
  <dt><a class="permalink" href="#d"><code class="Fl" id="d">-d</code></a>
    <var class="Ar">sec</var></dt>
  <dd>Delay the start of the diagnostic by <var class="Ar">sec</var> seconds.
      The system alert sound will play two times when the diagnostic
    begins.</dd>
  <dt><a class="permalink" href="#f"><code class="Fl" id="f">-f</code></a>
    <var class="Ar">path</var></dt>
  <dd>Write the diagnostic to the specified path.</dd>
  <dt><a class="permalink" href="#m"><code class="Fl" id="m">-m</code></a></dt>
  <dd>Gather memory diagnostics for backupd and Finder.</dd>
  <dt><a class="permalink" href="#r"><code class="Fl" id="r">-r</code></a></dt>
  <dd>Do not reveal the diagnostic in Finder when finished.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<code class="Nm">tmdiagnose</code> exits with status 0 if there were no internal
  errors encountered during the diagnostic, or &gt;0 when an error unrelated to
  external state occurs or unusable input is provided by the user.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">6 September 2011</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
