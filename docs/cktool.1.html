<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   man page for cktool
   Copyright (c) 2021 Apple Inc.  All rights reserved.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>cktool(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">cktool(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">cktool(1)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">cktool - CloudKit Command Line Tool</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">cktool <b>verb</b> [<i>token</i>] [<b>--option</b> <i>value</i>]
    ...</p>
<p class="Pp"><b>save-token</b> [<i>token</i>] [<b>--type</b> <i>management</i>
    | <i>user</i>] [<b>--method</b> <i>file</i> | <i>keychain</i>]
    [<b>--force</b>]</p>
<p class="Pp"><b>remove-token</b> <b>--type</b> <i>management</i> | <i>user</i>
    [<b>--method</b> <i>file</i> | <i>keychain</i>] [<b>--force</b>]</p>
<p class="Pp"><b>export-schema</b> [<b>-t | --token</b> <i>token</i>]
    <b>--team-id</b> <i>team-id</i> <b>--container-id</b> <i>container-id</i>
    <b>--environment</b> <i>development</i> | <i>production</i>
    <b>--output-file</b> <i>output-file</i></p>
<p class="Pp"><b>import-schema</b> [<b>-t | --token</b> <i>token</i>]
    <b>--team-id</b> <i>team-id</i> <b>--container-id</b> <i>container-id</i>
    <b>--environment</b> <i>development</i> | <i>production</i> <b>--file</b>
    <i>file</i></p>
<p class="Pp"><b>validate-schema</b> [<b>-t | --token</b> <i>token</i>]
    <b>--team-id</b> <i>team-id</i> <b>--container-id</b> <i>container-id</i>
    <b>--environment</b> <i>development</i> | <i>production</i> <b>--file</b>
    <i>file</i></p>
<p class="Pp"><b>reset-schema</b> [<b>-t | --token</b> <i>token</i>]
    <b>--team-id</b> <i>team-id</i> <b>--container-id</b>
  <i>container-id</i></p>
<p class="Pp"><b>create-record</b> [<b>-t | --token</b> <i>token</i>]
    <b>--team-id</b> <i>team-id</i> <b>--container-id</b> <i>container-id</i>
    <b>--environment</b> <i>development</i> | <i>production</i>
    <b>--database-type</b> <i>public</i> | <i>shared</i> | <i>private</i>
    [<b>--zone-name</b> <i>zone-name</i>] <b>--record-type</b>
    <i>record-type</i> [<b>--fields-file</b> <i>fields-file</i>]
    [<b>--fields-json</b> <i>fields-json</i>] [<b>--fields-stdin</b>]
    [<b>--asset-files</b> <i>asset-key-to-file-path</i> ...]</p>
<p class="Pp"><b>query-records</b> [<b>-t | --token</b> <i>token</i>]
    <b>--team-id</b> <i>team-id</i> <b>--container-id</b> <i>container-id</i>
    <b>--environment</b> <i>development</i> | <i>production</i>
    <b>--database-type</b> <i>public</i> | <i>shared</i> | <i>private</i>
    [<b>--zone-name</b> <i>zone-name</i>] [<b>--record-type</b>
    <i>record-type</i>] [<b>--filters</b> <i>filters</i> ...] [<b>--sort-by</b>
    <i>sort-by</i> ...] [<b>--requested-fields</b> <i>requested-fields</i> ...]
    [<b>--limit</b> <i>limit</i>] [<b>--continuation-token</b>
    <i>continuation-token</i>]</p>
<p class="Pp"><b>delete-record</b> [<b>-t | --token</b> <i>token</i>]
    <b>--container-id</b> <i>container-id</i> <b>--environment</b>
    <i>development</i> | <i>production</i> <b>--database-type</b> <i>public</i>
    | <i>shared</i> | <i>private</i> [<b>--zone-name</b> <i>zone-name</i>]
    [<b>--record-name</b> <i>record-name</i>] [<b>-y | --yes</b>]</p>
<p class="Pp"><b>delete-records</b> [<b>-t | --token</b> <i>token</i>]
    <b>--container-id</b> <i>container-id</i> <b>--environment</b>
    <i>development</i> | <i>production</i> <b>--database-type</b> <i>public</i>
    | <i>shared</i> | <i>private</i> [<b>--zone-name</b> <i>zone-name</i>]
    [<b>--record-type</b> <i>record-type</i>] [<b>--filters</b> <i>filters</i>
    ...] [<b>--dry-run</b> <i>true</i> | <i>false</i>] [<b>-y | --yes</b>]</p>
<p class="Pp"><b>get-teams</b> [<b>-t | --token</b> <i>token</i>]</p>
<p class="Pp">[<b>-h | --help</b>]</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>cktool</b> is a CLI to assist with creating, validating,
    displaying and managing CloudKit database schemas and records stored in
    CloudKit containers. Most commands below require Internet connectivity.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">There are several ways in which <b>cktool</b> can help during
    project development:</p>
<p class="Pp"></p>
<section class="Ss">
<h2 class="Ss" id="Setup"><a class="permalink" href="#Setup">Setup</a></h2>
<p class="Pp">The tool must be authorized with a token each time it communicates
    with the CloudKit Console. One can easily create or remove tokens from local
    storage via the commands below. Tokens are saved to the login keychain by
    default, unless otherwise specified with the <b>--method</b> <i>file</i> |
    <i>keychain</i> option.</p>
<p class="Pp">To create tokens:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="save_token"><a class="permalink" href="#save_token"><b>save-token</b></a></dt>
  <dd>Saves a token to the specified store. If no other options are present, an
      interactive prompt follows to guide through the process.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="token"><a class="permalink" href="#token"><i>token</i></a></dt>
  <dd>Authorization token to save. If none is provided, a secure interactive
      prompt is used for input.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--type</b> <i>management</i> | <i>user</i>]</dt>
  <dd>Type of token to save, optional. One of <i>management</i> or <i>user</i>.
      A management token is long-lived and is intended for container
      configuration only, like schema import and export. It cannot interact with
      data in the container. A user token is short-lived (several hours) and is
      used to perform database operations on behalf of the associated iCloud
      account. If this option is not provided, an interactive prompt follows.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--method</b> <i>file</i> | <i>keychain</i>]</dt>
  <dd>The method to use when saving the token, optional. One of <i>file</i> or
      <i>keychain</i>, defaults to <i>keychain</i>. If <i>file</i> is specified,
      it is saved in <i>~/.config/cktool</i>. For <i>keychain</i>, an entry is
      created in the login keychain under <i>com.apple.icloud.cktool
      (cktoolmanagement_auth)</i> for the management token, and
      <i>com.apple.icloud.cktool (cktooluser_auth)</i> for the user token.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--force</b>]</dt>
  <dd>Forces overwrite of any existing token without prompting user
      confirmation.</dd>
</dl>
</div>
<p class="Pp"></p>
<p class="Pp">To remove tokens:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="remove_token"><a class="permalink" href="#remove_token"><b>remove-token</b></a></dt>
  <dd>Removes a previously saved authentication token if one exists.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="type"><a class="permalink" href="#type"><b>--type</b>
    <i>management</i> | <i>user</i></a></dt>
  <dd>Type of token to remove, mandatory. One of <i>management</i> or
      <i>user</i>.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--method</b> <i>file</i> | <i>keychain</i>]</dt>
  <dd>The method to use when removing the token, optional. One of <i>file</i> or
      <i>keychain</i>, defaults to <i>keychain</i>. If <i>file</i> is specified,
      <b>cktool</b> tries to remove the token stored in <i>~/.config/cktool</i>.
      For <i>keychain</i>, it will try to remove the entry created in the login
      keychain under the respective <i>com.apple.icloud.cktool</i> entry. It is
      an error to remove a nonexisting token.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--force</b>]</dt>
  <dd>Forces removal of the existing token without prompting for user
      confirmation.</dd>
</dl>
</div>
<p class="Pp"></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Schema"><a class="permalink" href="#Schema">Schema</a></h2>
<p class="Pp">Commands under this category operate on the CloudKit Database
    schema inside a container that exists in a given environment. One can
    export, import, validate or reset the schema in that container.</p>
<p class="Pp">To copy the schema from the CloudKit Database to the local
    machine:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="export_schema"><a class="permalink" href="#export_schema"><b>export-schema</b></a></dt>
  <dd>Returns the current schema for a given container and environment.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_MANAGEMENT_TOKEN environment variable, the local store
      config file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="team_id"><a class="permalink" href="#team_id"><b>--team-id</b>
    <i>team-id</i></a></dt>
  <dd>The Apple Developer Program team identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id"><a class="permalink" href="#container_id"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="environment"><a class="permalink" href="#environment"><b>--environment</b>
    <i>development</i> | <i>production</i></a></dt>
  <dd>The container's environment, one of <i>development</i> or
      <i>production</i>. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--output-file</b> <i>output-file</i>]</dt>
  <dd>An optional output path to write the schema file to. Prints to stdout if
      unspecified.</dd>
</dl>
</div>
<p class="Pp"></p>
<p class="Pp">To import a schema into a CloudKit container:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="import_schema"><a class="permalink" href="#import_schema"><b>import-schema</b></a></dt>
  <dd>Import the local schema file into the given CloudKit container and
      environment
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_MANAGEMENT_TOKEN environment variable, the local store
      config file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="team_id~2"><a class="permalink" href="#team_id~2"><b>--team-id</b>
    <i>team-id</i></a></dt>
  <dd>The Apple Developer Program team identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~2"><a class="permalink" href="#container_id~2"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="environment~2"><a class="permalink" href="#environment~2"><b>--environment</b>
    <i>development</i> | <i>production</i></a></dt>
  <dd>The container's environment, one of <i>development</i> or
      <i>production</i>. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="file"><a class="permalink" href="#file"><b>--file</b>
    <i>file</i></a></dt>
  <dd>Path to the schema file to import. This option is mandatory.</dd>
</dl>
</div>
<p class="Pp"></p>
<p class="Pp">To check with the CloudKit Console that a local schema is correct
    (before importing it):</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="validate_schema"><a class="permalink" href="#validate_schema"><b>validate-schema</b></a></dt>
  <dd>Sends the contents of a local file containing a CloudKit database schema
      definition to the CloudKit Console for validation.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_MANAGEMENT_TOKEN environment variable, the local store
      config file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="team_id~3"><a class="permalink" href="#team_id~3"><b>--team-id</b>
    <i>team-id</i></a></dt>
  <dd>The Apple Developer Program team identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~3"><a class="permalink" href="#container_id~3"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="environment~3"><a class="permalink" href="#environment~3"><b>--environment</b>
    <i>development</i> | <i>production</i></a></dt>
  <dd>The container's environment, one of <i>development</i> or
      <i>production</i>. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="file~2"><a class="permalink" href="#file~2"><b>--file</b>
    <i>file</i></a></dt>
  <dd>The path to a local file containing the schema definition to be validated.
      This option is mandatory.</dd>
</dl>
</div>
<p class="Pp"></p>
<p class="Pp">To reset a development container's schema to the same schema used
    in the production container:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="reset_schema"><a class="permalink" href="#reset_schema"><b>reset-schema</b></a></dt>
  <dd>Resets the development environment schema of the container to match the
      production environment schema of the container and deletes all data in the
      development environment of the container.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_MANAGEMENT_TOKEN environment variable, the local store
      config file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="team_id~4"><a class="permalink" href="#team_id~4"><b>--team-id</b>
    <i>team-id</i></a></dt>
  <dd>The Apple Developer Program team identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~4"><a class="permalink" href="#container_id~4"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.</dd>
</dl>
</div>
<p class="Pp"></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Records_Manipulation"><a class="permalink" href="#Records_Manipulation">Records
  Manipulation</a></h2>
<p class="Pp">With these commands, one can create new records or query existing
    records.</p>
<p class="Pp">To create a new record:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="create_record"><a class="permalink" href="#create_record"><b>create-record</b></a></dt>
  <dd>Creates a new record in a given database, returning the new record.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_USER_TOKEN environment variable, the local store config
      file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="team_id~5"><a class="permalink" href="#team_id~5"><b>--team-id</b>
    <i>team-id</i></a></dt>
  <dd>The Apple Developer Program team identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~5"><a class="permalink" href="#container_id~5"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="environment~4"><a class="permalink" href="#environment~4"><b>--environment</b>
    <i>development</i> | <i>production</i></a></dt>
  <dd>The container's environment, one of <i>development</i> or
      <i>production</i>. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="database_type"><a class="permalink" href="#database_type"><b>--database-type</b>
    <i>public</i> | <i>shared</i> | <i>private</i></a></dt>
  <dd>The database type (public, shared or private). This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--zone-name</b> <i>zone-name</i>]</dt>
  <dd>The record zone to create the record in. Optional, defaults to
      <i>_defaultZone</i>.
    <p class="Pp"></p>
  </dd>
  <dt id="record_type"><a class="permalink" href="#record_type"><b>--record-type</b>
    <i>record-type</i></a></dt>
  <dd>Record type being created. Must be defined in schema. This option is
      mandatory.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--fields-file</b> <i>fields-file</i>]</dt>
  <dd>Path to a file containing JSON-formatted fields in {&quot;KEY=&quot;:
      {&quot;type&quot;: FIELD_TYPE, &quot;value&quot;: VALUE}} format.
      Optional. Note that when FIELD_TYPE is assetType or assetListType, VALUE
      should refer to a key defined by <b>--asset-files</b>.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--fields-json</b> <i>fields-json</i>]</dt>
  <dd>Inline JSON description of fields as an alternative to using a file.
      Optional.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--fields-stdin</b>]</dt>
  <dd>Takes the description from standard input. Optional.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--asset-files</b>]</dt>
  <dd>A map of asset keys to local file paths referenced by the provided
      JSON-formatted fields in KEY=/path/to/file format. Optional.</dd>
</dl>
</div>
<p class="Pp"></p>
<p class="Pp">To query existing records from the CloudKit Database:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="query_records"><a class="permalink" href="#query_records"><b>query-records</b></a></dt>
  <dd>Queries the database for records with an optional set of filters.
    <p class="Pp">If no filters are provided, all records will be returned, up
        to the limit specified.</p>
    <p class="Pp">If records matching the query exceed the limit, a
        <i>continuationToken</i> is returned at the top level of the JSON
        output, which can be used in subsequent query operations to get the next
        set of records.</p>
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_USER_TOKEN environment variable, the local store config
      file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="team_id~6"><a class="permalink" href="#team_id~6"><b>--team-id</b>
    <i>team-id</i></a></dt>
  <dd>The Apple Developer Program team identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~6"><a class="permalink" href="#container_id~6"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="database_type~2"><a class="permalink" href="#database_type~2"><b>--database-type</b>
    <i>public</i> | <i>shared</i> | <i>private</i></a></dt>
  <dd>The database type (public, shared or private). This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--zone-name</b> <i>zone-name</i>]</dt>
  <dd>The record zone in which the records exist. Optional, defaults to
      <i>_defaultZone</i>.
    <p class="Pp"></p>
  </dd>
  <dt id="record_type~2"><a class="permalink" href="#record_type~2"><b>--record-type</b>
    <i>record-type</i></a></dt>
  <dd>The record type to be queried.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--filters</b> <i>filters</i> ...]</dt>
  <dd>One or more optional filters described by strings to query with.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--sort-by</b> <i>sort-by</i> ...]</dt>
  <dd>One or more optional sort descriptors.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--requested-fields</b> <i>requested-fields</i> ...]</dt>
  <dd>One or more optional fields to request. If not specified, all fields are
      returned.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--limit</b> <i>limit</i>]</dt>
  <dd>Optionally specify a maximum number of records returned in a single query,
      defaults to 200 records.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--continuation-token</b> <i>continuation-token</i>]</dt>
  <dd>Continuation token used to request the next batch of result sets. It must
      be specified for querying and displaying subsequent results (e.g. greater
      than <b>--limit</b>).</dd>
</dl>
</div>
<p class="Pp">To delete a single record:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="delete_record"><a class="permalink" href="#delete_record"><b>delete-record</b></a></dt>
  <dd>Deletes a record from a given database by its unique record name.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_USER_TOKEN environment variable, the local store config
      file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~7"><a class="permalink" href="#container_id~7"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="environment~5"><a class="permalink" href="#environment~5"><b>--environment</b>
    <i>development</i> | <i>production</i></a></dt>
  <dd>The container's environment, one of <i>development</i> or
      <i>production</i>. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="database_type~3"><a class="permalink" href="#database_type~3"><b>--database-type</b>
    <i>public</i> | <i>shared</i> | <i>private</i></a></dt>
  <dd>The database type (public, shared or private). This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--zone-name</b> <i>zone-name</i>]</dt>
  <dd>The record zone in which the record exists. Optional, defaults to
      <i>_defaultZone</i>.
    <p class="Pp"></p>
  </dd>
  <dt id="record_name"><a class="permalink" href="#record_name"><b>--record-name</b>
    <i>record-name</i></a></dt>
  <dd>The unique name of the record to delete. Usually a UUID.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>-y | --yes</b>]</dt>
  <dd>Confirms permanent deletion of any matching record, skipping interactive
      confirmation. Optional.</dd>
</dl>
</div>
<p class="Pp">To delete multiple records:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="delete_records"><a class="permalink" href="#delete_records"><b>delete-records</b></a></dt>
  <dd>Deletes records matching one or more filters from a given database.
      Performed as a dry-run operation by default, returning how many records
      match given filter set.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_USER_TOKEN environment variable, the local store config
      file <i>~/.config/cktool</i> or the login keychain, in that order.
    <p class="Pp"></p>
  </dd>
  <dt id="container_id~8"><a class="permalink" href="#container_id~8"><b>--container-id</b>
    <i>container-id</i></a></dt>
  <dd>The unique iCloud container identifier. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="environment~6"><a class="permalink" href="#environment~6"><b>--environment</b>
    <i>development</i> | <i>production</i></a></dt>
  <dd>The container's environment, one of <i>development</i> or
      <i>production</i>. This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt id="database_type~4"><a class="permalink" href="#database_type~4"><b>--database-type</b>
    <i>public</i> | <i>shared</i> | <i>private</i></a></dt>
  <dd>The database type (public, shared or private). This option is mandatory.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--zone-name</b> <i>zone-name</i>]</dt>
  <dd>The record zone in which the record exists. Optional, defaults to
      <i>_defaultZone</i>.
    <p class="Pp"></p>
  </dd>
  <dt id="record_type~3"><a class="permalink" href="#record_type~3"><b>--record-type</b>
    <i>record-type</i></a></dt>
  <dd>The record type to be queried.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--filters</b> <i>filters</i> ...]</dt>
  <dd>One or more filters described by strings to match records with.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>--dry-run</b> <i>true</i> | <i>false</i>]</dt>
  <dd>Whether the operation should be a dry-run, only returning a count of how
      many records would be matched and deleted. Optional, defaults to
      <i>true</i>.
    <p class="Pp"></p>
  </dd>
  <dt>[<b>-y | --yes</b>]</dt>
  <dd>Confirms permanent deletion of any matching records, skipping interactive
      confirmation. Optional.</dd>
</dl>
</div>
<p class="Pp"></p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OTHER_OPTIONS"><a class="permalink" href="#OTHER_OPTIONS">OTHER
  OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt>[<b>-h | --help</b>]</dt>
  <dd>Displays a list of options and typical usage. Does not constitute an error
      if invoked by itself, and exits with 0.
    <p class="Pp"></p>
  </dd>
  <dt id="get_teams"><a class="permalink" href="#get_teams"><b>get-teams</b></a></dt>
  <dd>Returns a list of teams and their team identifier of which the developer
      account is a member of.
    <p class="Pp"></p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[<b>-t | --token</b> <i>token</i>]</dt>
  <dd>The authorization token string, optional. If not present, it will be read
      from the CLOUDKIT_MANAGEMENT_TOKEN environment variable, the local store
      config file <i>~/.config/cktool</i> or the login keychain, in that
    order.</dd>
</dl>
</div>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt>$ cktool save-token abc123 --type management</dt>
  <dd>Saves the management token &quot;abc123&quot; to the login keychain, under
      <i>com.apple.icloud.cktool (cktoolmanagement_auth)</i>.
    <p class="Pp"></p>
  </dd>
  <dt>$ cktool save-token abc123 --type user</dt>
  <dd>Saves the user token &quot;abc123&quot; to the login keychain, under
      <i>com.apple.icloud.cktool (cktooluser_auth)</i>.
    <p class="Pp"></p>
  </dd>
  <dt>$ cktool import-schema --team-id WWDRTEAMID --container-id
    iCloud.com.mycompany.mycontainer --environment development --file
    /path/to/my/database/schema</dt>
  <dd>Imports a schema from a local file into the given CloudKit container and
      environment. Reads the authorization token from the environment variable
      <b>CLOUDKIT_MANAGEMENT_TOKEN</b>, <i>~/.config/cktool</i> or the login
      keychain (<i>com.apple.icloud.cktool (cktoolmanagement_auth)</i>), in that
      order.
    <p class="Pp"></p>
  </dd>
  <dt>$ cktool create-record --team-id WWDRTEAMID --container-id
    iCloud.com.mycompany.mycontainer --environment development --database-type
    private --fields-file /path/to/records/data</dt>
  <dd>Creates a record in the authorized user's private database in the
      container using definitions from a file on the local filesystem. Reads the
      authorization token from the environment variable
      <b>CLOUDKIT_USER_TOKEN</b>, <i>~/.config/cktool</i> or the login keychain
      (<i>com.apple.icloud.cktool (cktooluser_auth)</i>), in that order.
    <p class="Pp"></p>
  </dd>
  <dt>$ cktool create-record --team-id WWDRTEAMID --container-id
    iCloud.com.mycompany.mycontainer --environment development --database-type
    public --record-type Book --fields-json \</dt>
  <dd>
    <br/>
     '{
    <br/>
     &quot;title&quot;: { &quot;type&quot;: &quot;stringType&quot;,
      &quot;value&quot;: &quot;The Mysterious Island&quot; },
    <br/>
     &quot;pageCount&quot;: { &quot;type&quot;: &quot;int64Type&quot;,
      &quot;value&quot;: 1464 },
    <br/>
     &quot;description&quot;: { &quot;type&quot;: &quot;stringType&quot;,
      &quot;value&quot;: &quot;An awesome book&quot; },
    <br/>
     &quot;publishedOn&quot;: { &quot;type&quot;: &quot;timestampType&quot;,
      &quot;value&quot;: &quot;1875-09-12T21:12:42Z&quot; },
    <br/>
     &quot;authorImage&quot;: { &quot;type&quot;: &quot;assetType&quot;,
      &quot;value&quot;: &quot;AUTHOR_IMG&quot; },
    <br/>
     &quot;covers&quot;: { &quot;type&quot;: &quot;assetListType&quot;,
      &quot;value&quot;: [&quot;COVER_IMG_1&quot;, &quot;COVER_IMG_2&quot;] }
    <br/>
     }' \
    <br/>
     --asset-files AUTHOR_IMG=~/Pictures/jverne.jpg COVER_IMG_1=/tmp/LM1.jpg
      COVER_IMG_2=/tmp/LM2.jpg
    <p class="Pp">Creates a record in the public database of the container's
        development environment <i>iCloud.com.mycompany.mycontainer</i> for a
        previously-defined <b>Book</b> schema record type from an inline
        definition in JSON format. Note that the asset fields use keys with file
        paths later defined by the <b>--asset-files</b> option. Reads the
        authorization token from the environment variable
        <b>CLOUDKIT_USER_TOKEN</b>, <i>~/.config/cktool</i> or the login
        keychain (<i>com.apple.icloud.cktool (cktooluser_auth)</i>), in that
        order.</p>
    <p class="Pp"></p>
  </dd>
  <dt>$ cktool delete-record --container-id iCloud.com.mycompany.mycontainer
    --environment development --database-type private --record-name
    UNIQUE-RECORD-ID</dt>
  <dd>Deletes a record matching the unique record name provided from the
      authorized user's private database in the container. Reads the
      authorization token from the environment variable
      <b>CLOUDKIT_USER_TOKEN</b>, <i>~/.config/cktool</i> or the login keychain
      (<i>com.apple.icloud.cktool (cktooluser_auth)</i>), in that order.
    <p class="Pp"></p>
  </dd>
  <dt>$ cktool delete-records --container-id iCloud.com.mycompany.mycontainer
    --environment development --database-type public --record-type Book
    --filters &quot;pageCount &gt;= 1400&quot; --dry-run false</dt>
  <dd>Deletes any <b>Book</b> records with a <i>pageCount</i> equal to or
      greater than 1400 from the public database in the container. Reads the
      authorization token from the environment variable
      <b>CLOUDKIT_USER_TOKEN</b>, <i>~/.config/cktool</i> or the login keychain
      (<i>com.apple.icloud.cktool (cktooluser_auth)</i>), in that order.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<p class="Pp">The following environment variables affect the execution of
    <b>cktool</b>:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt id="CLOUDKIT_MANAGEMENT_TOKEN"><a class="permalink" href="#CLOUDKIT_MANAGEMENT_TOKEN"><b>CLOUDKIT_MANAGEMENT_TOKEN</b></a></dt>
  <dd>Contains the management authorization token in a SHELL environment
      variable. Takes precedence over the token being stored in a local file or
      the login keychain, but not if specified on the command line via
      <b>--token</b>.
    <p class="Pp"></p>
  </dd>
  <dt id="CLOUDKIT_USER_TOKEN"><a class="permalink" href="#CLOUDKIT_USER_TOKEN"><b>CLOUDKIT_USER_TOKEN</b></a></dt>
  <dd>Contains the user authorization token in a SHELL environment variable.
      Takes precedence over the token being stored in a local file or the login
      keychain but not if specified on the command line via <b>--token</b>.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt>~/.config/cktool</dt>
  <dd>File-backed storage for locally stored tokens.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp">An exit code of 0 (EX_OK) is returned on all invocation that were
    completed successfully.</p>
<p class="Pp">An exit code of 1 is returned for errors in operation.</p>
<p class="Pp">An exit code of 64 (EX_USAGE) is returned for all incorrect
    invocations. Invoking with --help is not an error.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">security(1)</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright (C) 2021, Apple, Inc.</p>
<p class="Pp"></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">7 June 2021</td>
    <td class="foot-os">Apple CloudKit Command Line Tool</td>
  </tr>
</table>
</body>
</html>
