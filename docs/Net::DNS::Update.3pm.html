<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Net::DNS::Update(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::DNS::Update(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Net::DNS::Update(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Net::DNS::Update - Create a DNS update packet
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
    use Net::DNS;

    $update = new Net::DNS::Update( 'example.com', 'IN' );

    $update-&gt;push( prereq =&gt; nxrrset('foo.example.com. A') );
    $update-&gt;push( update =&gt; rr_add('foo.example.com. 86400 A 192.168.1.2') );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Net::DNS::Update is a subclass of Net::DNS::Packet, to be used for making DNS
  dynamic updates.
<p class="Pp">Programmers should refer to RFC2136 for dynamic update
  semantics.</p>
<p class="Pp">WARNING: This code is still under development.	 Please use with
    caution on production nameservers.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="new"><a class="permalink" href="#new">new</a></h2>
<span class="Li"></span>
<pre>
    $update = new Net::DNS::Update;
    $update = new Net::DNS::Update( 'example.com' );
    $update = new Net::DNS::Update( 'example.com', 'HS' );
</pre>
<p class="Pp">Returns a Net::DNS::Update object suitable for performing a DNS
    dynamic update.	 Specifically, it creates a packet with the header opcode
    set to UPDATE and the zone record type to SOA (per RFC 2136, Section
  2.3).</p>
<p class="Pp">Programs must use the <b>push()</b> method to add RRs to the
    prerequisite, update, and additional sections before performing the
  update.</p>
<p class="Pp">Arguments are the zone name and the class. If the zone is omitted,
    the default domain will be taken from the resolver configuration. If the
    class is omitted, it defaults to IN.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
The first example below shows a complete program; subsequent examples show only
  the creation of the update packet .
<section class="Ss">
<h2 class="Ss" id="Add_a_new_host"><a class="permalink" href="#Add_a_new_host">Add
  a new host</a></h2>
<span class="Li"></span>
<pre>
    #!/usr/bin/perl

    use Net::DNS;

    # Create the update packet.
    my $update = new Net::DNS::Update('example.com');

    # Prerequisite is that no A records exist for the name.
    $update-&gt;push( pre =&gt; nxrrset('foo.example.com. A') );

    # Add two A records for the name.
    $update-&gt;push( update =&gt; rr_add('foo.example.com. 86400 A 192.168.1.2') );
    $update-&gt;push( update =&gt; rr_add('foo.example.com. 86400 A 172.16.3.4') );

    # Send the update to the zone's primary master.
    my $resolver = new Net::DNS::Resolver;
    $resolver-&gt;nameservers('primary-master.example.com');

    my $reply = $resolver-&gt;send($update);

    # Did it work?
    if ($reply) {
            if ( $reply-&gt;header-&gt;rcode eq 'NOERROR' ) {
                    print &quot;Update succeeded\n&quot;;
            } else {
                    print 'Update failed: ', $reply-&gt;header-&gt;rcode, &quot;\n&quot;;
            }
    } else {
            print 'Update failed: ', $resolver-&gt;errorstring, &quot;\n&quot;;
    }
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Add_an__s-1MX_s0_record_for_a_name_that_already_exists"><a class="permalink" href="#Add_an__s-1MX_s0_record_for_a_name_that_already_exists">Add
  an MX record for a name that already exists</a></h2>
<span class="Li"></span>
<pre>
    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( prereq =&gt; yxdomain('example.com') );
    $update-&gt;push( update =&gt; rr_add('example.com MX 10 mailhost.example.com') );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Add_a__s-1TXT_s0_record_for_a_name_that_doesn't_exist"><a class="permalink" href="#Add_a__s-1TXT_s0_record_for_a_name_that_doesn't_exist">Add
  a TXT record for a name that doesn't exist</a></h2>
<span class="Li"></span>
<pre>
    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( prereq =&gt; nxdomain('info.example.com') );
    $update-&gt;push( update =&gt; rr_add('info.example.com TXT &quot;yabba dabba doo&quot;') );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Delete_all_A_records_for_a_name"><a class="permalink" href="#Delete_all_A_records_for_a_name">Delete
  all A records for a name</a></h2>
<span class="Li"></span>
<pre>
    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( prereq =&gt; yxrrset('foo.example.com A') );
    $update-&gt;push( update =&gt; rr_del('foo.example.com A') );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Delete_all_RRs_for_a_name"><a class="permalink" href="#Delete_all_RRs_for_a_name">Delete
  all RRs for a name</a></h2>
<span class="Li"></span>
<pre>
    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( prereq =&gt; yxdomain('byebye.example.com') );
    $update-&gt;push( update =&gt; rr_del('byebye.example.com') );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Perform_a__s-1DNS_s0_update_signed_using_a__s-1BIND_s0_key_file"><a class="permalink" href="#Perform_a__s-1DNS_s0_update_signed_using_a__s-1BIND_s0_key_file">Perform
  a DNS update signed using a BIND key file</a></h2>
<span class="Li"></span>
<pre>
    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( update =&gt; rr_add('foo.example.com A 10.1.2.3') );
    $update-&gt;push( update =&gt; rr_add('bar.example.com A 10.4.5.6') );
    $update-&gt;sign_tsig( &quot;$dir/Khmac-sha512.example.com.+165+01018.private&quot; );
</pre>
<p class="Pp">The corresponding public key file may also be used:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    $update-&gt;sign_tsig( &quot;$dir/Khmac-sha512.example.com.+165+01018.key&quot; );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Another_way_to_perform_a_signed_update"><a class="permalink" href="#Another_way_to_perform_a_signed_update">Another
  way to perform a signed update</a></h2>
<span class="Li"></span>
<pre>
    my $key_name = 'tsig-key';
    my $key      = 'awwLOtRfpGE+rRKF2+DEiw==';

    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( update =&gt; rr_add('foo.example.com A 10.1.2.3') );
    $update-&gt;push( update =&gt; rr_add('bar.example.com A 10.4.5.6') );
    $update-&gt;sign_tsig( $key_name, $key );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Perform_a_signed_update_with_a_customized__s-1TSIG_s0_record"><a class="permalink" href="#Perform_a_signed_update_with_a_customized__s-1TSIG_s0_record">Perform
  a signed update with a customized TSIG record</a></h2>
<span class="Li"></span>
<pre>
    my $key_name = 'tsig-key';
    my $key      = 'awwLOtRfpGE+rRKF2+DEiw==';

    my $tsig = new Net::DNS::RR(&quot;$key_name TSIG $key&quot;);
    $tsig-&gt;fudge(60);

    my $update = new Net::DNS::Update('example.com');
    $update-&gt;push( update     =&gt; rr_add('foo.example.com A 10.1.2.3') );
    $update-&gt;push( update     =&gt; rr_add('bar.example.com A 10.4.5.6') );
    $update-&gt;push( additional =&gt; $tsig );
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
This code is still under development. Please use with caution on production
  nameservers.
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 1997-2002 Michael Fuhr.
<p class="Pp">Portions Copyright (c) 2002-2004 Chris Reinhardt.</p>
<p class="Pp">All rights reserved. This program is free software; you may
    redistribute it and/or modify it under the same terms as Perl itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
perl, Net::DNS, Net::DNS::Packet, Net::DNS::Header, Net::DNS::RR,
  Net::DNS::Resolver, RFC 2136, RFC 2845
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-01-16</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
