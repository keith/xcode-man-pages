<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
       Title: git-reset
      Author: [FIXME: author] [see http://www.docbook.org/tdg5/en/html/author]
   Generator: DocBook XSL Stylesheets v1.79.2 <http://docbook.sf.net/>
        Date: 2025-07-22
      Manual: Git Manual
      Source: Git 2.50.1.428.g0e8243a355
    Language: English
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>GIT-RESET(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GIT-RESET(1)</td>
    <td class="head-vol">Git Manual</td>
    <td class="head-rtitle">GIT-RESET(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">git-reset - Reset current HEAD to the specified state</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><b>git</b> <b>reset</b> [<b>-q</b>] [<i>&lt;tree-ish&gt;</i>] [<b>--</b>] <i>&lt;pathspec&gt;</i>...
<b>git</b> <b>reset</b> [<b>-q</b>] [<b>--pathspec-from-file=</b><i>&lt;file&gt;</i> [<b>--pathspec-file-nul</b>]] [<i>&lt;tree-ish&gt;</i>]
<b>git</b> <b>reset</b> (<b>--patch</b> | <b>-p</b>) [<i>&lt;tree-ish&gt;</i>] [<b>--</b>] [<i>&lt;pathspec&gt;</i>...]
<b>git</b> <b>reset</b> [<b>--soft</b> | <b>--mixed</b> [<b>-N</b>] | <b>--hard</b> | <b>--merge</b> | <b>--keep</b>] [<b>-q</b>] [<i>&lt;commit&gt;</i>]</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">In the first three forms, copy entries from
    <i>&lt;tree-ish&gt;</i> to the index. In the last form, set the current
    branch head (<b>HEAD</b>) to <i>&lt;commit&gt;</i>, optionally modifying
    index and working tree to match. The
    <i>&lt;tree-ish&gt;</i>/<i>&lt;commit&gt;</i> defaults to <b>HEAD</b> in all
    forms.</p>
<p class="Pp"><b>git</b> <b>reset</b> [<b>-q</b>] [<i>&lt;tree-ish&gt;</i>]
    [<b>--</b>] <i>&lt;pathspec&gt;</i>..., <b>git</b> <b>reset</b> [<b>-q</b>]
    [<b>--pathspec-from-file=</b><i>&lt;file&gt;</i>
    [<b>--pathspec-file-nul</b>]] [<i>&lt;tree-ish&gt;</i>]</p>
<div class="Bd-indent">These forms reset the index entries for all paths that
  match the <i>&lt;pathspec&gt;</i> to their state at <i>&lt;tree-ish&gt;</i>.
  (It does not affect the working tree or the current branch.)
<p class="Pp">This means that <b>git</b> <b>reset</b> <i>&lt;pathspec&gt;</i> is
    the opposite of <b>git</b> <b>add</b> <i>&lt;pathspec&gt;</i>. This command
    is equivalent to <b>git</b> <b>restore</b>
    [<b>--source=</b><i>&lt;tree-ish&gt;</i>] <b>--staged</b>
    <i>&lt;pathspec&gt;</i>....</p>
<p class="Pp">After running <b>git</b> <b>reset</b> <i>&lt;pathspec&gt;</i> to
    update the index entry, you can use <b>git-restore</b>(1) to check the
    contents out of the index to the working tree. Alternatively, using
    <b>git-restore</b>(1) and specifying a commit with <b>--source</b>, you can
    copy the contents of a path out of a commit to the index and to the working
    tree in one go.</p>
</div>
<p class="Pp"><b>git</b> <b>reset</b> (<b>--patch</b> | <b>-p</b>)
    [<i>&lt;tree-ish&gt;</i>] [<b>--</b>] [<i>&lt;pathspec&gt;</i>...]</p>
<div class="Bd-indent">Interactively select hunks in the difference between the
  index and <i>&lt;tree-ish&gt;</i> (defaults to <b>HEAD</b>). The chosen hunks
  are applied in reverse to the index.
<p class="Pp">This means that <b>git</b> <b>reset</b> <b>-p</b> is the opposite
    of <b>git</b> <b>add</b> <b>-p</b>, i.e. you can use it to selectively reset
    hunks. See the &quot;Interactive Mode&quot; section of <b>git-add</b>(1) to
    learn how to operate the <b>--patch</b> mode.</p>
</div>
<p class="Pp"><b>git</b> <b>reset</b> [<i>&lt;mode&gt;</i>]
    [<i>&lt;commit&gt;</i>]</p>
<div class="Bd-indent">This form resets the current branch head to
  <i>&lt;commit&gt;</i> and possibly updates the index (resetting it to the tree
  of <i>&lt;commit&gt;</i>) and the working tree depending on
  <i>&lt;mode&gt;</i>. Before the operation, <b>ORIG_HEAD</b> is set to the tip
  of the current branch. If <i>&lt;mode&gt;</i> is omitted, defaults to
  <b>--mixed</b>. The <i>&lt;mode&gt;</i> must be one of the following:
<p class="Pp"><b>--soft</b></p>
<div class="Bd-indent">Does not touch the index file or the working tree at all
  (but resets the head to <i>&lt;commit&gt;</i>, just like all modes do). This
  leaves all your changed files &quot;Changes to be committed&quot;, as
  <b>git</b> <b>status</b> would put it.</div>
<p class="Pp"><b>--mixed</b></p>
<div class="Bd-indent">Resets the index but not the working tree (i.e., the
  changed files are preserved but not marked for commit) and reports what has
  not been updated. This is the default action.
<p class="Pp">If <b>-N</b> is specified, removed paths are marked as
    intent-to-add (see <b>git-add</b>(1)).</p>
</div>
<p class="Pp"><b>--hard</b></p>
<div class="Bd-indent">Resets the index and working tree. Any changes to tracked
  files in the working tree since <i>&lt;commit&gt;</i> are discarded. Any
  untracked files or directories in the way of writing any tracked files are
  simply deleted.</div>
<p class="Pp"><b>--merge</b></p>
<div class="Bd-indent">Resets the index and updates the files in the working
  tree that are different between <i>&lt;commit&gt;</i> and <b>HEAD</b>, but
  keeps those which are different between the index and working tree (i.e. which
  have changes which have not been added). If a file that is different between
  <i>&lt;commit&gt;</i> and the index has unstaged changes, reset is aborted.
<p class="Pp">In other words, <b>--merge</b> does something like a <b>git</b>
    <b>read-tree</b> <b>-u</b> <b>-m</b> <i>&lt;commit&gt;</i>, but carries
    forward unmerged index entries.</p>
</div>
<p class="Pp"><b>--keep</b></p>
<div class="Bd-indent">Resets index entries and updates files in the working
  tree that are different between <i>&lt;commit&gt;</i> and <b>HEAD</b>. If a
  file that is different between <i>&lt;commit&gt;</i> and <b>HEAD</b> has local
  changes, reset is aborted.</div>
<p class="Pp"><b>--</b>[<b>no-</b>]<b>recurse-submodules</b></p>
<div class="Bd-indent">When the working tree is updated, using
  <b>--recurse-submodules</b> will also recursively reset the working tree of
  all active submodules according to the commit recorded in the superproject,
  also setting the submodules' <b>HEAD</b> to be detached at that commit.</div>
</div>
<p class="Pp">See &quot;Reset, restore and revert&quot; in <b>git</b>(1) for the
    differences between the three commands.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp"><b>-q</b>, <b>--quiet</b></p>
<div class="Bd-indent">Be quiet, only report errors.</div>
<p class="Pp"><b>--refresh</b>, <b>--no-refresh</b></p>
<div class="Bd-indent">Refresh the index after a mixed reset. Enabled by
  default.</div>
<p class="Pp"><b>--pathspec-from-file=</b><i>&lt;file&gt;</i></p>
<div class="Bd-indent">Pathspec is passed in <i>&lt;file&gt;</i> instead of
  commandline args. If <i>&lt;file&gt;</i> is exactly <b>-</b> then standard
  input is used. Pathspec elements are separated by <i>LF</i> or
  <i>CR</i>/<i>LF</i>. Pathspec elements can be quoted as explained for the
  configuration variable <b>core.quotePath</b> (see <b>git-config</b>(1)). See
  also <b>--pathspec-file-nul</b> and global <b>--literal-pathspecs</b>.</div>
<p class="Pp"><b>--pathspec-file-nul</b></p>
<div class="Bd-indent">Only meaningful with <b>--pathspec-from-file</b>.
  Pathspec elements are separated with <i>NUL</i> character and all other
  characters are taken literally (including newlines and quotes).</div>
<p class="Pp"><b>--</b></p>
<div class="Bd-indent">Do not interpret any more arguments as options.</div>
<p class="Pp"><i>&lt;pathspec&gt;</i>...</p>
<div class="Bd-indent">Limits the paths affected by the operation.
<p class="Pp">For more details, see the <i>pathspec</i> entry in
    <b>gitglossary</b>(7).</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Undo add</p>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ edit                                     <b>(1)</b>
$ git add frotz.c filfre.c
$ mailx                                    <b>(2)</b>
$ git reset                                <b>(3)</b>
$ git pull git://info.example.com/ nitfol  <b>(4)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>You are happily working on something, and find the changes in these
      files are in good order. You do not want to see them when you run
      <b>git</b> <b>diff</b>, because you plan to work on other files and
      changes with these files are distracting.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>Somebody asks you to pull, and the changes sound worthy of merging.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>However, you already dirtied the index (i.e. your index does not match
      the <b>HEAD</b> commit). But you know the pull you are going to make does
      not affect <b>frotz.c</b> or <b>filfre.c</b>, so you revert the index
      changes for these two files. Your changes in working tree remain
      there.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>4.</b></td>
    <td>Then you can pull and merge, leaving <b>frotz.c</b> and <b>filfre.c</b>
      changes still in the working tree.</td>
  </tr>
</table>
</div>
<p class="Pp">Undo a commit and redo</p>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git commit ...
$ git reset --soft HEAD^      <b>(1)</b>
$ edit                        <b>(2)</b>
$ git commit -a -c ORIG_HEAD  <b>(3)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>This is most often done when you remembered what you just committed is
      incomplete, or you misspelled your commit message, or both. Leaves working
      tree as it was before &quot;reset&quot;.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>Make corrections to working tree files.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>&quot;reset&quot; copies the old head to .<b>git/ORIG_HEAD</b>; redo the
      commit by starting with its log message. If you do not need to edit the
      message further, you can give <b>-C</b> option instead. See also the
      <b>--amend</b> option to <b>git-commit</b>(1).</td>
  </tr>
</table>
</div>
<p class="Pp">Undo a commit, making it a topic branch</p>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git branch topic/wip          <b>(1)</b>
$ git reset --hard HEAD~3       <b>(2)</b>
$ git switch topic/wip          <b>(3)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>You have made some commits, but realize they were premature to be in the
      <b>master</b> branch. You want to continue polishing them in a topic
      branch, so create <b>topic/wip</b> branch off of the current
      <b>HEAD</b>.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>Rewind the master branch to get rid of those three commits.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>Switch to <b>topic/wip</b> branch and keep working.</td>
  </tr>
</table>
</div>
<p class="Pp">Undo commits permanently</p>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git commit ...
$ git reset --hard HEAD~3   <b>(1)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>The last three commits (<b>HEAD</b>, <b>HEAD^</b>, and <b>HEAD~2</b>)
      were bad and you do not want to ever see them again. Do <b>not</b> do this
      if you have already given these commits to somebody else. (See the
      &quot;RECOVERING FROM UPSTREAM REBASE&quot; section in
      <b>git-rebase</b>(1) for the implications of doing so.)</td>
  </tr>
</table>
</div>
<p class="Pp">Undo a merge or pull</p>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git pull                         <b>(1)</b>
Auto-merging nitfol
CONFLICT (content): Merge conflict in nitfol
Automatic merge failed; fix conflicts and then commit the result.
$ git reset --hard                 <b>(2)</b>
$ git pull . topic/branch          <b>(3)</b>
Updating from 41223... to 13134...
Fast-forward
$ git reset --hard ORIG_HEAD       <b>(4)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>Try to update from the upstream resulted in a lot of conflicts; you were
      not ready to spend a lot of time merging right now, so you decide to do
      that later.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>&quot;pull&quot; has not made merge commit, so <b>git</b> <b>reset</b>
      <b>--hard</b> which is a synonym for <b>git</b> <b>reset</b> <b>--hard</b>
      <b>HEAD</b> clears the mess from the index file and the working tree.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>Merge a topic branch into the current branch, which resulted in a
      fast-forward.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>4.</b></td>
    <td>But you decided that the topic branch is not ready for public
      consumption yet. &quot;pull&quot; or &quot;merge&quot; always leaves the
      original tip of the current branch in <b>ORIG_HEAD</b>, so resetting hard
      to it brings your index file and the working tree back to that state, and
      resets the tip of the branch to that commit.</td>
  </tr>
</table>
</div>
<p class="Pp">Undo a merge or pull inside a dirty working tree</p>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git pull                         <b>(1)</b>
Auto-merging nitfol
Merge made by recursive.
<br/>
 nitfol                |   20 +++++----
<br/>
 ...
$ git reset --merge ORIG_HEAD      <b>(2)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>Even if you may have local modifications in your working tree, you can
      safely say <b>git</b> <b>pull</b> when you know that the change in the
      other branch does not overlap with them.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>After inspecting the result of the merge, you may find that the change
      in the other branch is unsatisfactory. Running <b>git</b> <b>reset</b>
      <b>--hard</b> <b>ORIG_HEAD</b> will let you go back to where you were, but
      it will discard your local changes, which you do not want. <b>git</b>
      <b>reset</b> <b>--merge</b> keeps your local changes.</td>
  </tr>
</table>
</div>
<p class="Pp">Interrupted workflow</p>
<div class="Bd-indent">Suppose you are interrupted by an urgent fix request
  while you are in the middle of a large change. The files in your working tree
  are not in any shape to be committed yet, but you need to get to the other
  branch for a quick bugfix.
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git switch feature  ;# you were working in &quot;feature&quot; branch and
$ work work work      ;# got interrupted
$ git commit -a -m &quot;snapshot WIP&quot;                 <b>(1)</b>
$ git switch master
$ fix fix fix
$ git commit ;# commit with real log
$ git switch feature
$ git reset --soft HEAD^ ;# go back to WIP state  <b>(2)</b>
$ git reset                                       <b>(3)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>This commit will get blown away so a throw-away log message is OK.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>This removes the <i>WIP</i> commit from the commit history, and sets
      your working tree to the state just before you made that snapshot.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>At this point the index file still has all the WIP changes you committed
      as <i>snapshot WIP</i>. This updates the index to show your WIP files as
      uncommitted. See also <b>git-stash</b>(1).</td>
  </tr>
</table>
</div>
<p class="Pp">Reset a single file in the index</p>
<div class="Bd-indent">Suppose you have added a file to your index, but later
  decide you do not want to add it to your commit. You can remove the file from
  the index while keeping your changes with git reset.
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git reset -- frotz.c                      <b>(1)</b>
$ git commit -m &quot;Commit files in index&quot;     <b>(2)</b>
$ git add frotz.c                           <b>(3)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>This removes the file from the index while keeping it in the working
      directory.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>This commits all other changes in the index.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>Adds the file to the index again.</td>
  </tr>
</table>
</div>
<p class="Pp">Keep changes in working tree while discarding some previous
    commits</p>
<div class="Bd-indent">Suppose you are working on something and you commit it,
  and then you continue working a bit more, but now you think that what you have
  in your working tree should be in another branch that has nothing to do with
  what you committed previously. You can start a new branch and reset it while
  keeping the changes in your working tree.
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git tag start
$ git switch -c branch1
$ edit
$ git commit ...                            <b>(1)</b>
$ edit
$ git switch -c branch2                     <b>(2)</b>
$ git reset --keep start                    <b>(3)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>This commits your first edits in <b>branch1</b>.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>In the ideal world, you could have realized that the earlier commit did
      not belong to the new topic when you created and switched to
      <b>branch2</b> (i.e. <b>git</b> <b>switch</b> <b>-c</b> <b>branch2</b>
      <b>start</b>), but nobody is perfect.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>But you can use <b>reset</b> <b>--keep</b> to remove the unwanted commit
      after you switched to <b>branch2</b>.</td>
  </tr>
</table>
</div>
<p class="Pp">Split a commit apart into a sequence of commits</p>
<div class="Bd-indent">Suppose that you have created lots of logically separate
  changes and committed them together. Then, later you decide that it might be
  better to have each logical chunk associated with its own commit. You can use
  git reset to rewind history without changing the contents of your local files,
  and then successively use <b>git</b> <b>add</b> <b>-p</b> to interactively
  select which hunks to include into each commit, using <b>git</b> <b>commit</b>
  <b>-c</b> to pre-populate the commit message.
<p class="Pp"></p>
<div class="Bd-indent">
<pre>$ git reset -N HEAD^                        <b>(1)</b>
$ git add -p                                <b>(2)</b>
$ git diff --cached                         <b>(3)</b>
$ git commit -c HEAD@{1}                    <b>(4)</b>
...                                         <b>(5)</b>
$ git add ...                               <b>(6)</b>
$ git diff --cached                         <b>(7)</b>
$ git commit ...                            <b>(8)</b></pre>
</div>
<table class="tbl">
  <tr>
    <td style="text-align: right;"><b>1.</b></td>
    <td>First, reset the history back one commit so that we remove the original
      commit, but leave the working tree with all the changes. The <b>-N</b>
      ensures that any new files added with <b>HEAD</b> are still marked so that
      <b>git</b> <b>add</b> <b>-p</b> will find them.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>2.</b></td>
    <td>Next, we interactively select diff hunks to add using the <b>git</b>
      <b>add</b> <b>-p</b> facility. This will ask you about each diff hunk in
      sequence and you can use simple commands such as &quot;yes, include
      this&quot;, &quot;No don&#x2019;t include this&quot; or even the very
      powerful &quot;edit&quot; facility.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>3.</b></td>
    <td>Once satisfied with the hunks you want to include, you should verify
      what has been prepared for the first commit by using <b>git</b>
      <b>diff</b> <b>--cached</b>. This shows all the changes that have been
      moved into the index and are about to be committed.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>4.</b></td>
    <td>Next, commit the changes stored in the index. The <b>-c</b> option
      specifies to pre-populate the commit message from the original message
      that you started with in the first commit. This is helpful to avoid
      retyping it. The <b>HEAD@</b>{1} is a special notation for the commit that
      <b>HEAD</b> used to be at prior to the original reset commit (1 change
      ago). See <b>git-reflog</b>(1) for more details. You may also use any
      other valid commit reference.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>5.</b></td>
    <td>You can repeat steps 2-4 multiple times to break the original code into
      any number of commits.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>6.</b></td>
    <td>Now you&#x2019;ve split out many of the changes into their own commits,
      and might no longer use the patch mode of <b>git</b> <b>add</b>, in order
      to select all remaining uncommitted changes.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>7.</b></td>
    <td>Once again, check to verify that you&#x2019;ve included what you want
      to. You may also wish to verify that git diff doesn&#x2019;t show any
      remaining changes to be committed later.</td>
  </tr>
  <tr>
    <td style="text-align: right;"><b>8.</b></td>
    <td>And finally create the final commit.</td>
  </tr>
</table>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DISCUSSION"><a class="permalink" href="#DISCUSSION">DISCUSSION</a></h1>
<p class="Pp">The tables below show what happens when running:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>git reset --option target</pre>
</div>
<p class="Pp">to reset the <b>HEAD</b> to another commit (<b>target</b>) with
    the different reset options depending on the state of the files.</p>
<p class="Pp">In these tables, <b>A</b>, <b>B</b>, <b>C</b> and <b>D</b> are
    some different states of a file. For example, the first line of the first
    table means that if a file is in state <b>A</b> in the working tree, in
    state <b>B</b> in the index, in state <b>C</b> in <b>HEAD</b> and in state
    <b>D</b> in the target, then <b>git</b> <b>reset</b> <b>--soft</b>
    <b>target</b> will leave the file in the working tree in state <b>A</b> and
    in the index in state <b>B</b>. It resets (i.e. moves) the <b>HEAD</b> (i.e.
    the tip of the current branch, if you are on one) to <b>target</b> (which
    has the file in state <b>D</b>).</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 A       B     C    D     --soft   A       B     D
<br/>
                          --mixed  A       D     D
<br/>
                          --hard   D       D     D
<br/>
                          --merge (disallowed)
<br/>
                          --keep  (disallowed)</pre>
</div>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 A       B     C    C     --soft   A       B     C
<br/>
                          --mixed  A       C     C
<br/>
                          --hard   C       C     C
<br/>
                          --merge (disallowed)
<br/>
                          --keep   A       C     C</pre>
</div>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 B       B     C    D     --soft   B       B     D
<br/>
                          --mixed  B       D     D
<br/>
                          --hard   D       D     D
<br/>
                          --merge  D       D     D
<br/>
                          --keep  (disallowed)</pre>
</div>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 B       B     C    C     --soft   B       B     C
<br/>
                          --mixed  B       C     C
<br/>
                          --hard   C       C     C
<br/>
                          --merge  C       C     C
<br/>
                          --keep   B       C     C</pre>
</div>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 B       C     C    D     --soft   B       C     D
<br/>
                          --mixed  B       D     D
<br/>
                          --hard   D       D     D
<br/>
                          --merge (disallowed)
<br/>
                          --keep  (disallowed)</pre>
</div>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 B       C     C    C     --soft   B       C     C
<br/>
                          --mixed  B       C     C
<br/>
                          --hard   C       C     C
<br/>
                          --merge  B       C     C
<br/>
                          --keep   B       C     C</pre>
</div>
<p class="Pp"><b>git</b> <b>reset</b> <b>--merge</b> is meant to be used when
    resetting out of a conflicted merge. Any mergy operation guarantees that the
    working tree file that is involved in the merge does not have a local change
    with respect to the index before it starts, and that it writes the result
    out to the working tree. So if we see some difference between the index and
    the target and also between the index and the working tree, then it means
    that we are not resetting out from a state that a mergy operation left after
    failing with a conflict. That is why we disallow <b>--merge</b> option in
    this case.</p>
<p class="Pp"><b>git</b> <b>reset</b> <b>--keep</b> is meant to be used when
    removing some of the last commits in the current branch while keeping
    changes in the working tree. If there could be conflicts between the changes
    in the commit we want to remove and the changes in the working tree we want
    to keep, the reset is disallowed. That&#x2019;s why it is disallowed if
    there are both changes between the working tree and <b>HEAD</b>, and between
    <b>HEAD</b> and the target. To be safe, it is also disallowed when there are
    unmerged entries.</p>
<p class="Pp">The following tables show what happens when there are unmerged
    entries:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 X       U     A    B     --soft  (disallowed)
<br/>
                          --mixed  X       B     B
<br/>
                          --hard   B       B     B
<br/>
                          --merge  B       B     B
<br/>
                          --keep  (disallowed)</pre>
</div>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>working index HEAD target         working index HEAD
----------------------------------------------------
<br/>
 X       U     A    A     --soft  (disallowed)
<br/>
                          --mixed  X       A     A
<br/>
                          --hard   A       A     A
<br/>
                          --merge  A       A     A
<br/>
                          --keep  (disallowed)</pre>
</div>
<p class="Pp"><b>X</b> means any state and <b>U</b> means an unmerged index.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="GIT"><a class="permalink" href="#GIT">GIT</a></h1>
<p class="Pp">Part of the <b>git</b>(1) suite</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/06/2021</td>
    <td class="foot-os">Git 2.32.0</td>
  </tr>
</table>
</body>
</html>
