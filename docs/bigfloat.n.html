<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Generated from file '/System/Volumes/Data/SWE/macOS/BuildRoots/c40be6c978/Library/Caches/com.apple.xbs/Sources/tcl/tcl-134/tcl_ext/tcllib/tcllib/modules/math/bigfloat.man' by tcllib/doctools with format 'nroff'
   Copyright (c) 2004-2008, by Stephane Arnold <stephanearnold at yahoo dot fr>
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>math::bigfloat(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">math::bigfloat(n)</td>
    <td class="head-vol">Tcl Math Library</td>
    <td class="head-rtitle">math::bigfloat(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">math::bigfloat - Arbitrary precision floating-point numbers</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">package require <b>Tcl 8.5</b></p>
<p class="Pp">package require <b>math::bigfloat ?2.0.1?</b></p>
<p class="Pp"><b>fromstr</b> <i>number</i> ?<i>trailingZeros</i>?</p>
<p class="Pp"><b>tostr</b> ?<b>-nosci</b>? <i>number</i></p>
<p class="Pp"><b>fromdouble</b> <i>double</i> ?<i>decimals</i>?</p>
<p class="Pp"><b>todouble</b> <i>number</i></p>
<p class="Pp"><b>isInt</b> <i>number</i></p>
<p class="Pp"><b>isFloat</b> <i>number</i></p>
<p class="Pp"><b>int2float</b> <i>integer</i> ?<i>decimals</i>?</p>
<p class="Pp"><b>add</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>sub</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>mul</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>div</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>mod</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>abs</b> <i>x</i></p>
<p class="Pp"><b>opp</b> <i>x</i></p>
<p class="Pp"><b>pow</b> <i>x</i> <i>n</i></p>
<p class="Pp"><b>iszero</b> <i>x</i></p>
<p class="Pp"><b>equal</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>compare</b> <i>x</i> <i>y</i></p>
<p class="Pp"><b>sqrt</b> <i>x</i></p>
<p class="Pp"><b>log</b> <i>x</i></p>
<p class="Pp"><b>exp</b> <i>x</i></p>
<p class="Pp"><b>cos</b> <i>x</i></p>
<p class="Pp"><b>sin</b> <i>x</i></p>
<p class="Pp"><b>tan</b> <i>x</i></p>
<p class="Pp"><b>cotan</b> <i>x</i></p>
<p class="Pp"><b>acos</b> <i>x</i></p>
<p class="Pp"><b>asin</b> <i>x</i></p>
<p class="Pp"><b>atan</b> <i>x</i></p>
<p class="Pp"><b>cosh</b> <i>x</i></p>
<p class="Pp"><b>sinh</b> <i>x</i></p>
<p class="Pp"><b>tanh</b> <i>x</i></p>
<p class="Pp"><b>pi</b> <i>n</i></p>
<p class="Pp"><b>rad2deg</b> <i>radians</i></p>
<p class="Pp"><b>deg2rad</b> <i>degrees</i></p>
<p class="Pp"><b>round</b> <i>x</i></p>
<p class="Pp"><b>ceil</b> <i>x</i></p>
<p class="Pp"><b>floor</b> <i>x</i></p>
<p class="Pp"></p>
<pre>
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The bigfloat package provides arbitrary precision floating-point
    math capabilities to the Tcl language. It is designed to work with Tcl 8.5,
    but for Tcl 8.4 is provided an earlier version of this package. See <b>WHAT
    ABOUT TCL 8.4 ?</b> for more explanations. By convention, we will talk about
    the numbers treated in this library as :</p>
<ul class="Bl-bullet">
  <li>BigFloat for floating-point numbers of arbitrary length.</li>
  <li>integers for arbitrary length signed integers, just as basic integers
      since Tcl 8.5.</li>
</ul>
<p class="Pp">Each BigFloat is an interval, namely [<i>m-d, m+d</i>], where
    <i>m</i> is the mantissa and <i>d</i> the uncertainty, representing the
    limitation of that number's precision. This is why we call such mathematics
    <i>interval computations</i>. Just take an example in physics : when you
    measure a temperature, not all digits you read are <i>significant</i>.
    Sometimes you just cannot trust all digits - not to mention if doubles (f.p.
    numbers) can handle all these digits. BigFloat can handle this problem -
    trusting the digits you get - plus the ability to store numbers with an
    arbitrary precision. BigFloats are internally represented at Tcl lists: this
    package provides a set of procedures operating against the internal
    representation in order to :</p>
<ul class="Bl-bullet">
  <li>perform math operations on BigFloats and (optionnaly) with integers.</li>
  <li>convert BigFloats from their internal representations to strings, and vice
      versa.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="INTRODUCTION"><a class="permalink" href="#INTRODUCTION">INTRODUCTION</a></h1>
<dl class="Bl-tag">
  <dt id="fromstr"><a class="permalink" href="#fromstr"><b>fromstr</b>
    <i>number</i> ?<i>trailingZeros</i>?</a></dt>
  <dd>Converts <i>number</i> into a BigFloat. Its precision is at least the
      number of digits provided by <i>number</i>. If the <i>number</i> contains
      only digits and eventually a minus sign, it is considered as an integer.
      Subsequently, no conversion is done at all.
    <p class="Pp"><i>trailingZeros</i> - the number of zeros to append at the
        end of the floating-point number to get more precision. It cannot be
        applied to an integer.</p>
    <pre>
# x and y are BigFloats : the first string contained a dot, and the second an e sign
set x [fromstr -1.000000]
set y [fromstr 2000e30]
# let's see how we get integers
set t 20000000000000
# the old way (package 1.2) is still supported for backwards compatibility :
set m [fromstr 10000000000]
# but we do not need fromstr for integers anymore
set n -39
# t, m and n are integers
    </pre>
    <p class="Pp">The <i>number</i>'s last digit is considered by the procedure
        to be true at +/-1, For example, 1.00 is the interval [0.99, 1.01], and
        0.43 the interval [0.42, 0.44]. The Pi constant may be approximated by
        the number &quot;3.1415&quot;. This string could be considered as the
        interval [3.1414 , 3.1416] by <b>fromstr</b>. So, when you mean 1.0 as a
        double, you may have to write 1.000000 to get enough precision. To learn
        more about this subject, see <b>PRECISION</b>.</p>
    <p class="Pp">For example :</p>
    <pre>
set x [fromstr 1.0000000000]
# the next line does the same, but smarter
set y [fromstr 1. 10]
    </pre>
  </dd>
  <dt id="tostr"><a class="permalink" href="#tostr"><b>tostr</b> ?<b>-nosci</b>?
    <i>number</i></a></dt>
  <dd>Returns a string form of a BigFloat, in which all digits are exacts.
      <i>All exact digits</i> means a rounding may occur, for example to zero,
      if the uncertainty interval does not clearly show the true digits.
      <i>number</i> may be an integer, causing the command to return exactly the
      input argument. With the <b>-nosci</b> option, the number returned is
      never shown in scientific notation, i.e. not like '3.4523e+5' but like
      '345230.'.
    <pre>
puts [tostr [fromstr 0.99999]] ;# 1.0000
puts [tostr [fromstr 1.00001]] ;# 1.0000
puts [tostr [fromstr 0.002]] ;# 0.e-2
    </pre>
    See <b>PRECISION</b> for that matter. See also <b>iszero</b> for how to
      detect zeros, which is useful when performing a division.</dd>
  <dt id="fromdouble"><a class="permalink" href="#fromdouble"><b>fromdouble</b>
    <i>double</i> ?<i>decimals</i>?</a></dt>
  <dd>Converts a double (a simple floating-point value) to a BigFloat, with
      exactly <i>decimals</i> digits. Without the <i>decimals</i> argument, it
      behaves like <b>fromstr</b>. Here, the only important feature you might
      care of is the ability to create BigFloats with a fixed number of
      <i>decimals</i>.
    <pre>
tostr [fromstr 1.111 4]
# returns : 1.111000 (3 zeros)
tostr [fromdouble 1.111 4]
# returns : 1.111
    </pre>
  </dd>
  <dt id="todouble"><a class="permalink" href="#todouble"><b>todouble</b>
    <i>number</i></a></dt>
  <dd>Returns a double, that may be used in <i>expr</i>, from a BigFloat.</dd>
  <dt id="isInt"><a class="permalink" href="#isInt"><b>isInt</b>
    <i>number</i></a></dt>
  <dd>Returns 1 if <i>number</i> is an integer, 0 otherwise.</dd>
  <dt id="isFloat"><a class="permalink" href="#isFloat"><b>isFloat</b>
    <i>number</i></a></dt>
  <dd>Returns 1 if <i>number</i> is a BigFloat, 0 otherwise.</dd>
  <dt id="int2float"><a class="permalink" href="#int2float"><b>int2float</b>
    <i>integer</i> ?<i>decimals</i>?</a></dt>
  <dd>Converts an integer to a BigFloat with <i>decimals</i> trailing zeros. The
      default, and minimal, number of <i>decimals</i> is 1. When converting back
      to string, one decimal is lost:
    <pre>
set n 10
set x [int2float $n]; # like fromstr 10.0
puts [tostr $x]; # prints &quot;10.&quot;
set x [int2float $n 3]; # like fromstr 10.000
puts [tostr $x]; # prints &quot;10.00&quot;
    </pre>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ARITHMETICS"><a class="permalink" href="#ARITHMETICS">ARITHMETICS</a></h1>
<dl class="Bl-tag">
  <dt id="add"><a class="permalink" href="#add"><b>add</b> <i>x</i>
    <i>y</i></a></dt>
  <dd></dd>
  <dt id="sub"><a class="permalink" href="#sub"><b>sub</b> <i>x</i>
    <i>y</i></a></dt>
  <dd></dd>
  <dt id="mul"><a class="permalink" href="#mul"><b>mul</b> <i>x</i>
    <i>y</i></a></dt>
  <dd>Return the sum, difference and product of <i>x</i> by <i>y</i>. <i>x</i> -
      may be either a BigFloat or an integer <i>y</i> - may be either a BigFloat
      or an integer When both are integers, these commands behave like
      <b>expr</b>.</dd>
  <dt id="div"><a class="permalink" href="#div"><b>div</b> <i>x</i>
    <i>y</i></a></dt>
  <dd></dd>
  <dt id="mod"><a class="permalink" href="#mod"><b>mod</b> <i>x</i>
    <i>y</i></a></dt>
  <dd>Return the quotient and the rest of <i>x</i> divided by <i>y</i>. Each
      argument (<i>x</i> and <i>y</i>) can be either a BigFloat or an integer,
      but you cannot divide an integer by a BigFloat Divide by zero throws an
      error.</dd>
  <dt id="abs"><a class="permalink" href="#abs"><b>abs</b> <i>x</i></a></dt>
  <dd>Returns the absolute value of <i>x</i></dd>
  <dt id="opp"><a class="permalink" href="#opp"><b>opp</b> <i>x</i></a></dt>
  <dd>Returns the opposite of <i>x</i></dd>
  <dt id="pow"><a class="permalink" href="#pow"><b>pow</b> <i>x</i>
    <i>n</i></a></dt>
  <dd>Returns <i>x</i> taken to the <i>n</i>th power. It only works if <i>n</i>
      is an integer. <i>x</i> might be a BigFloat or an integer.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPARISONS"><a class="permalink" href="#COMPARISONS">COMPARISONS</a></h1>
<dl class="Bl-tag">
  <dt id="iszero"><a class="permalink" href="#iszero"><b>iszero</b>
    <i>x</i></a></dt>
  <dd>Returns 1 if <i>x</i> is :</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>a BigFloat close enough to zero to raise &quot;divide by zero&quot;.</li>
  <li>the integer 0.</li>
</ul>
</div>
<p class="Pp">See here how numbers that are close to zero are converted to
    strings:</p>
<pre>
tostr [fromstr 0.001] ; # -&gt; 0.e-2
tostr [fromstr 0.000000] ; # -&gt; 0.e-5
tostr [fromstr -0.000001] ; # -&gt; 0.e-5
tostr [fromstr 0.0] ; # -&gt; 0.
tostr [fromstr 0.002] ; # -&gt; 0.e-2
set a [fromstr 0.002] ; # uncertainty interval : 0.001, 0.003
tostr  $a ; # 0.e-2
iszero $a ; # false
set a [fromstr 0.001] ; # uncertainty interval : 0.000, 0.002
tostr  $a ; # 0.e-2
iszero $a ; # true
</pre>
<dl class="Bl-tag">
  <dt id="equal"><a class="permalink" href="#equal"><b>equal</b> <i>x</i>
    <i>y</i></a></dt>
  <dd>Returns 1 if <i>x</i> and <i>y</i> are equal, 0 elsewhere.</dd>
  <dt id="compare"><a class="permalink" href="#compare"><b>compare</b> <i>x</i>
    <i>y</i></a></dt>
  <dd>Returns 0 if both BigFloat arguments are equal, 1 if <i>x</i> is greater
      than <i>y</i>, and -1 if <i>x</i> is lower than <i>y</i>. You would not be
      able to compare an integer to a BigFloat : the operands should be both
      BigFloats, or both integers.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ANALYSIS"><a class="permalink" href="#ANALYSIS">ANALYSIS</a></h1>
<dl class="Bl-tag">
  <dt id="sqrt"><a class="permalink" href="#sqrt"><b>sqrt</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="log"><a class="permalink" href="#log"><b>log</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="exp"><a class="permalink" href="#exp"><b>exp</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="cos"><a class="permalink" href="#cos"><b>cos</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="sin"><a class="permalink" href="#sin"><b>sin</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="tan"><a class="permalink" href="#tan"><b>tan</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="cotan"><a class="permalink" href="#cotan"><b>cotan</b>
    <i>x</i></a></dt>
  <dd></dd>
  <dt id="acos"><a class="permalink" href="#acos"><b>acos</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="asin"><a class="permalink" href="#asin"><b>asin</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="atan"><a class="permalink" href="#atan"><b>atan</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="cosh"><a class="permalink" href="#cosh"><b>cosh</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="sinh"><a class="permalink" href="#sinh"><b>sinh</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="tanh"><a class="permalink" href="#tanh"><b>tanh</b> <i>x</i></a></dt>
  <dd>The above functions return, respectively, the following : square root,
      logarithm, exponential, cosine, sine, tangent, cotangent, arc cosine, arc
      sine, arc tangent, hyperbolic cosine, hyperbolic sine, hyperbolic tangent,
      of a BigFloat named <i>x</i>.</dd>
  <dt id="pi"><a class="permalink" href="#pi"><b>pi</b> <i>n</i></a></dt>
  <dd>Returns a BigFloat representing the Pi constant with <i>n</i> digits after
      the dot. <i>n</i> is a positive integer.</dd>
  <dt id="rad2deg"><a class="permalink" href="#rad2deg"><b>rad2deg</b>
    <i>radians</i></a></dt>
  <dd></dd>
  <dt id="deg2rad"><a class="permalink" href="#deg2rad"><b>deg2rad</b>
    <i>degrees</i></a></dt>
  <dd><i>radians</i> - angle expressed in radians (BigFloat)
    <p class="Pp"><i>degrees</i> - angle expressed in degrees (BigFloat)</p>
    <p class="Pp">Convert an angle from radians to degrees, and <i>vice
        versa</i>.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ROUNDING"><a class="permalink" href="#ROUNDING">ROUNDING</a></h1>
<dl class="Bl-tag">
  <dt id="round"><a class="permalink" href="#round"><b>round</b>
    <i>x</i></a></dt>
  <dd></dd>
  <dt id="ceil"><a class="permalink" href="#ceil"><b>ceil</b> <i>x</i></a></dt>
  <dd></dd>
  <dt id="floor"><a class="permalink" href="#floor"><b>floor</b>
    <i>x</i></a></dt>
  <dd>The above functions return the <i>x</i> BigFloat, rounded like with the
      same mathematical function in <i>expr</i>, and returns it as an
    integer.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PRECISION"><a class="permalink" href="#PRECISION">PRECISION</a></h1>
<p class="Pp">How do conversions work with precision ?</p>
<ul class="Bl-bullet">
  <li>When a BigFloat is converted from string, the internal representation
      holds its uncertainty as 1 at the level of the last digit.</li>
  <li>During computations, the uncertainty of each result is internally computed
      the closest to the reality, thus saving the memory used.</li>
  <li>When converting back to string, the digits that are printed are not
      subject to uncertainty. However, some rounding is done, as not doing so
      causes severe problems.</li>
</ul>
<p class="Pp">Uncertainties are kept in the internal representation of the
    number ; it is recommended to use <b>tostr</b> only for outputting data (on
    the screen or in a file), and NEVER call <b>fromstr</b> with the result of
    <b>tostr</b>. It is better to always keep operands in their internal
    representation. Due to the internals of this library, the uncertainty
    interval may be slightly wider than expected, but this should not cause
    false digits.</p>
<p class="Pp">Now you may ask this question : What precision am I going to get
    after calling add, sub, mul or div? First you set a number from the string
    representation and, by the way, its uncertainty is set:</p>
<pre>
set a [fromstr 1.230]
# $a belongs to [1.229, 1.231]
set a [fromstr 1.000]
# $a belongs to [0.999, 1.001]
# $a has a relative uncertainty of 0.1% : 0.001(the uncertainty)/1.000(the medium value)
</pre>
The uncertainty of the sum, or the difference, of two numbers, is the sum of
  their respective uncertainties.
<pre>
set a [fromstr 1.230]
set b [fromstr 2.340]
set sum [add $a $b]]
# the result is : [3.568, 3.572] (the last digit is known with an uncertainty of 2)
tostr $sum ; # 3.57
</pre>
But when, for example, we add or substract an integer to a BigFloat, the
  relative uncertainty of the result is unchanged. So it is desirable not to
  convert integers to BigFloats:
<pre>
set a [fromstr 0.999999999]
# now something dangerous
set b [fromstr 2.000]
# the result has only 3 digits
tostr [add $a $b]
# how to keep precision at its maximum
puts [tostr [add $a 2]]
</pre>
<p class="Pp">For multiplication and division, the relative uncertainties of the
    product or the quotient, is the sum of the relative uncertainties of the
    operands. Take care of division by zero : check each divider with
    <b>iszero</b>.</p>
<pre>
set num [fromstr 4.00]
set denom [fromstr 0.01]
puts [iszero $denom];# true
set quotient [div $num $denom];# error : divide by zero
# opposites of our operands
puts [compare $num [opp $num]]; # 1
puts [compare $denom [opp $denom]]; # 0 !!!
# No suprise ! 0 and its opposite are the same...
</pre>
Effects of the precision of a number considered equal to zero to the cos
  function:
<pre>
puts [tostr [cos [fromstr 0. 10]]]; # -&gt; 1.000000000
puts [tostr [cos [fromstr 0. 5]]]; # -&gt; 1.0000
puts [tostr [cos [fromstr 0e-10]]]; # -&gt; 1.000000000
puts [tostr [cos [fromstr 1e-10]]]; # -&gt; 1.000000000
</pre>
BigFloats with different internal representations may be converted to the same
  string.
<p class="Pp">For most analysis functions (cosine, square root, logarithm,
    etc.), determining the precision of the result is difficult. It seems
    however that in many cases, the loss of precision in the result is of one or
    two digits. There are some exceptions : for example,</p>
<pre>
tostr [exp [fromstr 100.0 10]]
# returns : 2.688117142e+43 which has only 10 digits of precision, although the entry
# has 14 digits of precision.
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="WHAT_ABOUT_TCL_8.4_?"><a class="permalink" href="#WHAT_ABOUT_TCL_8.4_?">WHAT
  ABOUT TCL 8.4 ?</a></h1>
<p class="Pp">If your setup do not provide Tcl 8.5 but supports 8.4, the package
    can still be loaded, switching back to <i>math::bigfloat</i> 1.2. Indeed, an
    important function introduced in Tcl 8.5 is required - the ability to handle
    bignums, that we can do with <b>expr</b>. Before 8.5, this ability was
    provided by several packages, including the pure-Tcl <i>math::bignum</i>
    package provided by <i>tcllib</i>. In this case, all you need to know, is
    that arguments to the commands explained here, are expected to be in their
    internal representation. So even with integers, you will need to call
    <b>fromstr</b> and <b>tostr</b> in order to convert them between string and
    internal representations.</p>
<pre>
#
# with Tcl 8.5
# ============
set a [pi 20]
# round returns an integer and 'everything is a string' applies to integers
# whatever big they are
puts [round [mul $a 10000000000]]
#
# the same with Tcl 8.4
# =====================
set a [pi 20]
# bignums (arbitrary length integers) need a conversion hook
set b [fromstr 10000000000]
# round returns a bignum:
# before printing it, we need to convert it with 'tostr'
puts [tostr [round [mul $a $b]]]
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="NAMESPACES_AND_OTHER_PACKAGES"><a class="permalink" href="#NAMESPACES_AND_OTHER_PACKAGES">NAMESPACES
  AND OTHER PACKAGES</a></h1>
<p class="Pp">We have not yet discussed about namespaces because we assumed that
    you had imported public commands into the global namespace, like this:</p>
<pre>
namespace import ::math::bigfloat::*
</pre>
<p class="Pp">If you matter much about avoiding names conflicts, I considere it
    should be resolved by the following :</p>
<pre>
package require math::bigfloat
# beware: namespace ensembles are not available in Tcl 8.4
namespace eval ::math::bigfloat {namespace ensemble create -command ::bigfloat}
# from now, the bigfloat command takes as subcommands all original math::bigfloat::* commands
set a [bigfloat sub [bigfloat fromstr 2.000] [bigfloat fromstr 0.530]]
puts [bigfloat tostr $a]
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Guess what happens when you are doing some astronomy. Here is an
    example :</p>
<pre>
# convert acurrate angles with a millisecond-rated accuracy
proc degree-angle {degrees minutes seconds milliseconds} {
<br/>
    set result 0
<br/>
    set div 1
<br/>
    foreach factor {1 1000 60 60} var [list $milliseconds $seconds $minutes $degrees] {
<br/>
        # we convert each entry var into milliseconds
<br/>
        set div [expr {$div*$factor}]
<br/>
        incr result [expr {$var*$div}]
<br/>
    }
<br/>
    return [div [int2float $result] $div]
}
# load the package
package require math::bigfloat
namespace import ::math::bigfloat::*
# work with angles : a standard formula for navigation (taking bearings)
set angle1 [deg2rad [degree-angle 20 30 40   0]]
set angle2 [deg2rad [degree-angle 21  0 50 500]]
set opposite3 [deg2rad [degree-angle 51  0 50 500]]
set sinProduct [mul [sin $angle1] [sin $angle2]]
set cosProduct [mul [cos $angle1] [cos $angle2]]
set angle3 [asin [add [mul $sinProduct [cos $opposite3]] $cosProduct]]
puts &quot;angle3 : [tostr [rad2deg $angle3]]&quot;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
<p class="Pp">This document, and the package it describes, will undoubtedly
    contain bugs and other problems. Please report such in the category <i>math
    :: bignum :: float</i> of the <i>Tcllib SF Trackers</i>
    [http://sourceforge.net/tracker/?group_id=12883]. Please also report any
    ideas for enhancements you may have for either package and/or
  documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">computations, floating-point, interval, math, multiprecision,
  tcl</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
<p class="Pp">Mathematics</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>Copyright (c) 2004-2008, by Stephane Arnold &lt;stephanearnold at yahoo dot fr&gt;
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2.0.1</td>
    <td class="foot-os">math</td>
  </tr>
</table>
</body>
</html>
