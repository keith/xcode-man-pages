<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2018 Apple Inc. All rights reserved.
  
   The contents of this file constitute Original Code as defined in and
   are subject to the Apple Public Source License Version 1.1 (the
   "License").  You may not use this file except in compliance with the
   License.  Please obtain a copy of the License at
   http://www.apple.com/publicsource and read it before using this file.
  
   This Original Code and all software distributed under the License are
   distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, EITHER
   EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
   INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT.  Please see the
   License for the specific language governing rights and limitations
   under the License.
  
       @(#)apfs_condenser.8
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>APFS_CONDENSER(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">APFS_CONDENSER(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">APFS_CONDENSER(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">apfs_condenser</code> &#x2014;
    <span class="Nd">insert the contents of an existing B-tree into a new B-tree
    to improve B-tree space utilization</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">apfs_condenser</code></td>
    <td>[<code class="Fl">-s</code> <var class="Ar">snap_name</var>]
      [<code class="Fl">-w</code> <var class="Ar">watchdog_timeout</var>]
      [<code class="Fl">-v</code>] <code class="Fl">-p</code>
      <var class="Ar">device_path</var> <code class="Fl">-i</code>
      <var class="Ar">filesystem_slice</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">apfs_condenser</code> command sequentially
    inserts the contents of an existing B-tree into a new B-tree to improve
    B-tree space utilization. The <code class="Nm">apfs_condenser</code>
    requires the container to be unmounted and an encrypted volume to be
    unlocked. The <var class="Ar">filesystem_slice</var> parameter is 1-based
    and the <var class="Ar">device_path</var> parameter is the path of the
    device representing the container.</p>
<p class="Pp">The options are as follows:</p>
<dl class="Bl-tag">
  <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a>
    <var class="Ar">snap_name</var></dt>
  <dd>If compaction succeeds, the snapshot will be deleted. Usually used in the
      OTA environment.</dd>
  <dt id="v"><a class="permalink" href="#v"><code class="Fl">-v</code></a></dt>
  <dd>Increase verbosity of the output.</dd>
  <dt id="w"><a class="permalink" href="#w"><code class="Fl">-w</code></a>
    <var class="Ar">timeout</var></dt>
  <dd>Force the compaction to abort after the supplied timeout in seconds.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp">The <code class="Nm">apfs_condenser</code> utility exits&#x00A0;0
    on success, and&#x00A0;&gt;0 if an error occurs.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">The following condenses the first APFS volume with
    <span class="Pa">/dev/disk1</span> as the synthesized container path :</p>
<div class="Bd
  Bd-indent"><code class="Li"><code class="Nm">apfs_condenser</code>
  <code class="Fl">-p</code> <span class="Pa">/dev/disk1</span>
  <code class="Fl">-i</code> <span class="Pa">1</span></code></div>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Nm">apfs_condenser</code> utility first appeared
    in OS X 10.14.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 28, 2018</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
