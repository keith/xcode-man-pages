<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Man page generated from reStructuredText.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>LLVM-PROFDATA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">LLVM-PROFDATA(1)</td>
    <td class="head-vol">LLVM</td>
    <td class="head-rtitle">LLVM-PROFDATA(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">llvm-profdata - Profile data tool</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>llvm-profdata</b> <i>command</i> [<i>args...</i>]</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <b>llvm-profdata</b> tool is a small utility for working with
    profile data files.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li><i>merge</i></li>
  <li><i>show</i></li>
  <li><i>overlap</i></li>
</ul>
</div>
<br/>
</section>
<section class="Sh">
<h1 class="Sh" id="MERGE"><a class="permalink" href="#MERGE">MERGE</a></h1>
<section class="Ss">
<h2 class="Ss" id="SYNOPSIS~2"><a class="permalink" href="#SYNOPSIS~2">SYNOPSIS</a></h2>
<p class="Pp"><b>llvm-profdata merge</b> [<i>options</i>]
  [<i>filename...</i>]</p>
</section>
<section class="Ss">
<h2 class="Ss" id="DESCRIPTION~2"><a class="permalink" href="#DESCRIPTION~2">DESCRIPTION</a></h2>
<p class="Pp"><b>llvm-profdata merge</b> takes several profile data files
    generated by PGO instrumentation and merges them together into a single
    indexed profile data file.</p>
<p class="Pp">By default profile data is merged without modification. This means
    that the relative importance of each input file is proportional to the
    number of samples or counts it contains. In general, the input from a longer
    training run will be interpreted as relatively more important than a shorter
    run. Depending on the nature of the training runs it may be useful to adjust
    the weight given to each input file by using the <b>-weighted-input</b>
    option.</p>
<p class="Pp">Profiles passed in via <b>-weighted-input</b>,
    <b>-input-files</b>, or via positional arguments are processed once for each
    time they are seen.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h2>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="help"><a class="permalink" href="#help"><b>-help</b></a></dt>
  <dd>Print a summary of command line options.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="output=output,"><a class="permalink" href="#output=output,"><b>-output=output,
    -o=output</b></a></dt>
  <dd>Specify the output file name. <i>Output</i> cannot be <b>-</b> as the
      resulting indexed profile data can't be written to standard output.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="weighted"><a class="permalink" href="#weighted"><b>-weighted-input=weight,filename</b></a></dt>
  <dd>Specify an input file name along with a weight. The profile counts of the
      supplied <b>filename</b> will be scaled (multiplied) by the supplied
      <b>weight</b>, where <b>weight</b> is a decimal integer &gt;= 1. Input
      files specified without using this option are assigned a default weight of
      1. Examples are shown below.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="input"><a class="permalink" href="#input"><b>-input-files=path,
    -f=path</b></a></dt>
  <dd>Specify a file which contains a list of files to merge. The entries in
      this file are newline-separated. Lines starting with '#' are skipped.
      Entries may be of the form &lt;filename&gt; or
      &lt;weight&gt;,&lt;filename&gt;.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="remapping"><a class="permalink" href="#remapping"><b>-remapping-file=path,
    -r=path</b></a></dt>
  <dd>Specify a file which contains a remapping from symbol names in the input
      profile to the symbol names that should be used in the output profile. The
      file should consist of lines of the form <b>&lt;input-symbol&gt;
      &lt;output-symbol&gt;</b>. Blank lines and lines starting with <b>#</b>
      are skipped.
    <p class="Pp">The <i>llvm-cxxmap</i> tool can be used to generate the symbol
        remapping file.</p>
  </dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="instr"><a class="permalink" href="#instr"><b>-instr
    (default)</b></a></dt>
  <dd>Specify that the input profile is an instrumentation-based profile.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="sample"><a class="permalink" href="#sample"><b>-sample</b></a></dt>
  <dd>Specify that the input profile is a sample-based profile.
    <p class="Pp">The format of the generated file can be generated in one of
        three ways:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="binary"><a class="permalink" href="#binary"><b>-binary
    (default)</b></a></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile using a binary encoding. For
    instrumentation-based profile the output format is the indexed binary
    format.</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="extbinary"><a class="permalink" href="#extbinary"><b>-extbinary</b></a></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile using an extensible binary encoding. This option
    can only be used with sample-based profile. The extensible binary encoding
    can be more compact with compression enabled and can be loaded faster than
    the default binary encoding.</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="text"><a class="permalink" href="#text"><b>-text</b></a></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile in text mode. This option can also be used with
    both sample-based and instrumentation-based profile. When this option is
    used the profile will be dumped in the text format that is parsable by the
    profile reader.</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="gcc"><a class="permalink" href="#gcc"><b>-gcc</b></a></dt>
  <dd></dd>
</dl>
</div>
<br/>
<p class="Pp">Emit the profile using GCC's gcov format (Not yet supported).</p>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="sparse_=true_false_"><a class="permalink" href="#sparse_=true_false_"><b>-sparse[=true|false]</b></a></dt>
  <dd>Do not emit function records with 0 execution count. Can only be used in
      conjunction with -instr. Defaults to false, since it can inhibit compiler
      optimization during PGO.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="num"><a class="permalink" href="#num"><b>-num-threads=N,
    -j=N</b></a></dt>
  <dd>Use N threads to perform profile merging. When N=0, llvm-profdata
      auto-detects an appropriate number of threads to use. This is the
    default.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="failure"><a class="permalink" href="#failure"><b>-failure-mode=[any|all]</b></a></dt>
  <dd>Set the failure mode. There are two options: 'any' causes the merge
      command to fail if any profiles are invalid, and 'all' causes the merge
      command to fail only if all profiles are invalid. If 'all' is set,
      information from any invalid profiles is excluded from the final merged
      product. The default failure mode is 'any'.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="prof"><a class="permalink" href="#prof"><b>-prof-sym-list=path</b></a></dt>
  <dd>Specify a file which contains a list of symbols to generate profile symbol
      list in the profile. This option can only be used with sample-based
      profile in extbinary format. The entries in this file are
      newline-separated.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="compress"><a class="permalink" href="#compress"><b>-compress-all-sections=[true|false]</b></a></dt>
  <dd>Compress all sections when writing the profile. This option can only be
      used with sample-based profile in extbinary format.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="use"><a class="permalink" href="#use"><b>-use-md5=[true|false]</b></a></dt>
  <dd>Use MD5 to represent string in name table when writing the profile. This
      option can only be used with sample-based profile in extbinary
    format.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="gen"><a class="permalink" href="#gen"><b>-gen-partial-profile=[true|false]</b></a></dt>
  <dd>Mark the profile to be a partial profile which only provides partial
      profile coverage for the optimized target. This option can only be used
      with sample-based profile in extbinary format.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="supplement"><a class="permalink" href="#supplement"><b>-supplement-instr-with-sample=path_to_sample_profile</b></a></dt>
  <dd>Supplement an instrumentation profile with sample profile. The sample
      profile is the input of the flag. Output will be in instrumentation format
      (only works with -instr).</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="zero"><a class="permalink" href="#zero"><b>-zero-counter-threshold=threshold_float_number</b></a></dt>
  <dd>For the function which is cold in instr profile but hot in sample profile,
      if the ratio of the number of zero counters divided by the the total
      number of counters is above the threshold, the profile of the function
      will be regarded as being harmful for performance and will be
    dropped.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="instr~2"><a class="permalink" href="#instr~2"><b>-instr-prof-cold-threshold=threshold_int_number</b></a></dt>
  <dd>User specified cold threshold for instr profile which will override the
      cold threshold got from profile summary.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="suppl"><a class="permalink" href="#suppl"><b>-suppl-min-size-threshold=threshold_int_number</b></a></dt>
  <dd>If the size of a function is smaller than the threshold, assume it can be
      inlined by PGO early inliner and it will not be adjusted based on sample
      profile.</dd>
</dl>
</div>
<br/>
</section>
<section class="Ss">
<h2 class="Ss" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h2>
</section>
<section class="Ss">
<h2 class="Ss" id="Basic_Usage"><a class="permalink" href="#Basic_Usage">Basic
  Usage</a></h2>
<p class="Pp">Merge three profiles:</p>
<div class="Bd-indent">
<div class="Bd-indent">
<p class="Pp"></p>
<pre>llvm-profdata merge foo.profdata bar.profdata baz.profdata -output merged.profdata
</pre>
</div>
<br/>
</div>
<br/>
</section>
<section class="Ss">
<h2 class="Ss" id="Weighted_Input"><a class="permalink" href="#Weighted_Input">Weighted
  Input</a></h2>
<p class="Pp">The input file <i>foo.profdata</i> is especially important,
    multiply its counts by 10:</p>
<div class="Bd-indent">
<div class="Bd-indent">
<p class="Pp"></p>
<pre>llvm-profdata merge -weighted-input=10,foo.profdata bar.profdata baz.profdata -output merged.profdata
</pre>
</div>
<br/>
</div>
<br/>
<p class="Pp">Exactly equivalent to the previous invocation (explicit form;
    useful for programmatic invocation):</p>
<div class="Bd-indent">
<div class="Bd-indent">
<p class="Pp"></p>
<pre>llvm-profdata merge -weighted-input=10,foo.profdata -weighted-input=1,bar.profdata -weighted-input=1,baz.profdata -output merged.profdata
</pre>
</div>
<br/>
</div>
<br/>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SHOW"><a class="permalink" href="#SHOW">SHOW</a></h1>
<section class="Ss">
<h2 class="Ss" id="SYNOPSIS~3"><a class="permalink" href="#SYNOPSIS~3">SYNOPSIS</a></h2>
<p class="Pp"><b>llvm-profdata show</b> [<i>options</i>] [<i>filename</i>]</p>
</section>
<section class="Ss">
<h2 class="Ss" id="DESCRIPTION~3"><a class="permalink" href="#DESCRIPTION~3">DESCRIPTION</a></h2>
<p class="Pp"><b>llvm-profdata show</b> takes a profile data file and displays
    the information about the profile counters for this file and for any of the
    specified function(s).</p>
<p class="Pp">If <i>filename</i> is omitted or is <b>-</b>, then
    <b>llvm-profdata show</b> reads its input from standard input.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS~2"><a class="permalink" href="#OPTIONS~2">OPTIONS</a></h2>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="all"><a class="permalink" href="#all"><b>-all-functions</b></a></dt>
  <dd>Print details for every function.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="counts"><a class="permalink" href="#counts"><b>-counts</b></a></dt>
  <dd>Print the counter values for the displayed functions.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="function=string"><a class="permalink" href="#function=string"><b>-function=string</b></a></dt>
  <dd>Print details for a function if the function's name contains the given
      string.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="help~2"><a class="permalink" href="#help~2"><b>-help</b></a></dt>
  <dd>Print a summary of command line options.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="output=output,~2"><a class="permalink" href="#output=output,~2"><b>-output=output,
    -o=output</b></a></dt>
  <dd>Specify the output file name. If <i>output</i> is <b>-</b> or it isn't
      specified, then the output is sent to standard output.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="instr~3"><a class="permalink" href="#instr~3"><b>-instr
    (default)</b></a></dt>
  <dd>Specify that the input profile is an instrumentation-based profile.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="text~2"><a class="permalink" href="#text~2"><b>-text</b></a></dt>
  <dd>Instruct the profile dumper to show profile counts in the text format of
      the instrumentation-based profile data representation. By default, the
      profile information is dumped in a more human readable form (also in text)
      with annotations.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="topn=n"><a class="permalink" href="#topn=n"><b>-topn=n</b></a></dt>
  <dd>Instruct the profile dumper to show the top <b>n</b> functions with the
      hottest basic blocks in the summary section. By default, the topn
      functions are not dumped.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="sample~2"><a class="permalink" href="#sample~2"><b>-sample</b></a></dt>
  <dd>Specify that the input profile is a sample-based profile.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="memop"><a class="permalink" href="#memop"><b>-memop-sizes</b></a></dt>
  <dd>Show the profiled sizes of the memory intrinsic calls for shown
    functions.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="value"><a class="permalink" href="#value"><b>-value-cutoff=n</b></a></dt>
  <dd>Show only those functions whose max count values are greater or equal to
      <b>n</b>. By default, the value-cutoff is set to 0.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="list"><a class="permalink" href="#list"><b>-list-below-cutoff</b></a></dt>
  <dd>Only output names of functions whose max count value are below the cutoff
      value.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="showcs"><a class="permalink" href="#showcs"><b>-showcs</b></a></dt>
  <dd>Only show context sensitive profile counts. The default is to filter all
      context sensitive profile counts.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="show"><a class="permalink" href="#show"><b>-show-prof-sym-list=[true|false]</b></a></dt>
  <dd>Show profile symbol list if it exists in the profile. This option is only
      meaningful for sample-based profile in extbinary format.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="show~2"><a class="permalink" href="#show~2"><b>-show-sec-info-only=[true|false]</b></a></dt>
  <dd>Show basic information about each section in the profile. This option is
      only meaningful for sample-based profile in extbinary format.</dd>
</dl>
</div>
<br/>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OVERLAP"><a class="permalink" href="#OVERLAP">OVERLAP</a></h1>
<section class="Ss">
<h2 class="Ss" id="SYNOPSIS~4"><a class="permalink" href="#SYNOPSIS~4">SYNOPSIS</a></h2>
<p class="Pp"><b>llvm-profdata overlap</b> [<i>options</i>] [<i>base profile
    file</i>] [<i>test profile file</i>]</p>
</section>
<section class="Ss">
<h2 class="Ss" id="DESCRIPTION~4"><a class="permalink" href="#DESCRIPTION~4">DESCRIPTION</a></h2>
<p class="Pp"><b>llvm-profdata overlap</b> takes two profile data files and
    displays the <i>overlap</i> of counter distribution between the whole files
    and between any of the specified functions.</p>
<p class="Pp">In this command, <i>overlap</i> is defined as follows: Suppose
    <i>base profile file</i> has the following counts: {c1_1, c1_2, ..., c1_n,
    c1_u_1, c2_u_2, ..., c2_u_s}, and <i>test profile file</i> has {c2_1, c2_2,
    ..., c2_n, c2_v_1, c2_v_2, ..., c2_v_t}. Here c{1|2}_i (i = 1 .. n) are
    matched counters and c1_u_i (i = 1 .. s) and c2_v_i (i = 1 .. v) are
    unmatched counters (or counters only existing in) <i>base profile file</i>
    and <i>test profile file</i>, respectively. Let sum_1 = c1_1 + c1_2 + ... +
    c1_n + c1_u_1 + c2_u_2 + ... + c2_u_s, and sum_2 = c2_1 + c2_2 + ... + c2_n
    + c2_v_1 + c2_v_2 + ... + c2_v_t. <i>overlap</i> = min(c1_1/sum_1,
    c2_1/sum_2) + min(c1_2/sum_1, c2_2/sum_2) + ... + min(c1_n/sum_1,
    c2_n/sum_2).</p>
<p class="Pp">The result overlap distribution is a percentage number, ranging
    from 0.0% to 100.0%, where 0.0% means there is no overlap and 100.0% means a
    perfect overlap.</p>
<p class="Pp">Here is an example, if <i>base profile file</i> has counts of
    {400, 600}, and <i>test profile file</i> has matched counts of {60000,
    40000}. The <i>overlap</i> is 80%.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS~3"><a class="permalink" href="#OPTIONS~3">OPTIONS</a></h2>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="function=string~2"><a class="permalink" href="#function=string~2"><b>-function=string</b></a></dt>
  <dd>Print details for a function if the function's name contains the given
      string.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="help~3"><a class="permalink" href="#help~3"><b>-help</b></a></dt>
  <dd>Print a summary of command line options.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="o=output"><a class="permalink" href="#o=output"><b>-o=output or -o
    output</b></a></dt>
  <dd>Specify the output file name. If <i>output</i> is <b>-</b> or it isn't
      specified, then the output is sent to standard output.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="value~2"><a class="permalink" href="#value~2"><b>-value-cutoff=n</b></a></dt>
  <dd>Show only those functions whose max count values are greater or equal to
      <b>n</b>. By default, the value-cutoff is set to max of unsigned long
      long.</dd>
</dl>
</div>
<br/>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="cs"><a class="permalink" href="#cs"><b>-cs</b></a></dt>
  <dd>Only show overlap for the context sensitive profile counts. The default is
      to show non-context sensitive profile counts.</dd>
</dl>
</div>
<br/>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp"><b>llvm-profdata</b> returns 1 if the command is omitted or is
    invalid, if it cannot read input files, or if there is a mismatch between
    their data.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Maintained by the LLVM Team (https://llvm.org/).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">2003-2022, LLVM Project</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-01-05</td>
    <td class="foot-os">Apple Clang 1316.0.19.2</td>
  </tr>
</table>
</body>
</html>
