<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>PERLLOCALE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERLLOCALE(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERLLOCALE(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">perllocale - Perl locale handling (internationalization and
    localization)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">In the beginning there was ASCII, the &quot;American Standard Code
    for Information Interchange&quot;, which works quite well for Americans with
    their English alphabet and dollar-denominated currency. But it doesn't work
    so well even for other English speakers, who may use different currencies,
    such as the pound sterling (as the symbol for that currency is not in
    ASCII); and it's hopelessly inadequate for many of the thousands of the
    world's other languages.</p>
<p class="Pp">To address these deficiencies, the concept of locales was invented
    (formally the ISO C, XPG4, POSIX 1.c &quot;locale system&quot;). And
    applications were and are being written that use the locale mechanism. The
    process of making such an application take account of its users' preferences
    in these kinds of matters is called <b>internationalization</b> (often
    abbreviated as <b>i18n</b>); telling such an application about a particular
    set of preferences is known as <b>localization</b> (<b>l10n</b>).</p>
<p class="Pp">Perl has been extended to support certain types of locales
    available in the locale system. This is controlled per application by using
    one pragma, one function call, and several environment variables.</p>
<p class="Pp">Perl supports single-byte locales that are supersets of ASCII,
    such as the ISO 8859 ones, and one multi-byte-type locale, UTF-8 ones,
    described in the next paragraph. Perl doesn't support any other multi-byte
    locales, such as the ones for East Asian languages.</p>
<p class="Pp">Unfortunately, there are quite a few deficiencies with the design
    (and often, the implementations) of locales. Unicode was invented (see
    perlunitut for an introduction to that) in part to address these design
    deficiencies, and nowadays, there is a series of &quot;UTF-8 locales&quot;,
    based on Unicode. These are locales whose character set is Unicode, encoded
    in UTF-8. Starting in v5.20, Perl fully supports UTF-8 locales, except for
    sorting and string comparisons like <span class="Li">&quot;lt&quot;</span>
    and <span class="Li">&quot;ge&quot;</span>. Starting in v5.26, Perl can
    handle these reasonably as well, depending on the platform's implementation.
    However, for earlier releases or for better control, use Unicode::Collate.
    There are actually two slightly different types of UTF-8 locales: one for
    Turkic languages and one for everything else.</p>
<p class="Pp">Starting in Perl v5.30, Perl detects Turkic locales by their
    behaviour, and seamlessly handles both types; previously only the non-Turkic
    one was supported. The name of the locale is ignored, if your system has a
    <span class="Li">&quot;tr_TR.UTF-8&quot;</span> locale and it doesn't behave
    like a Turkic locale, perl will treat it like a non-Turkic locale.</p>
<p class="Pp">Perl continues to support the old non UTF-8 locales as well. There
    are currently no UTF-8 locales for EBCDIC platforms.</p>
<p class="Pp">(Unicode is also creating
    <span class="Li">&quot;CLDR&quot;</span>, the &quot;Common Locale Data
    Repository&quot;, &lt;http://cldr.unicode.org/&gt; which includes more types
    of information than are available in the POSIX locale system. At the time of
    this writing, there was no CPAN module that provides access to this
    XML-encoded data. However, it is possible to compute the POSIX locale data
    from them, and earlier CLDR versions had these already extracted for you as
    UTF-8 locales &lt;http://unicode.org/Public/cldr/2.0.1/&gt;.)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="WHAT_IS_A_LOCALE"><a class="permalink" href="#WHAT_IS_A_LOCALE">WHAT
  IS A LOCALE</a></h1>
<p class="Pp">A locale is a set of data that describes various aspects of how
    various communities in the world categorize their world. These categories
    are broken down into the following types (some of which include a brief note
    here):</p>
<dl class="Bl-tag">
  <dt id="Category"><a class="permalink" href="#Category">Category
    &quot;LC_NUMERIC&quot;: Numeric formatting</a></dt>
  <dd>This indicates how numbers should be formatted for human readability, for
      example the character used as the decimal point.</dd>
  <dt id="Category~2"><a class="permalink" href="#Category~2">Category
    &quot;LC_MONETARY&quot;: Formatting of monetary amounts</a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
  <dt id="Category~3"><a class="permalink" href="#Category~3">Category
    &quot;LC_TIME&quot;: Date/Time formatting</a></dt>
  <dd>
    <p class="Pp"></p>
  </dd>
  <dt id="Category~4"><a class="permalink" href="#Category~4">Category
    &quot;LC_MESSAGES&quot;: Error and other messages</a></dt>
  <dd>This is used by Perl itself only for accessing operating system error
      messages via $! and $^E.</dd>
  <dt id="Category~5"><a class="permalink" href="#Category~5">Category
    &quot;LC_COLLATE&quot;: Collation</a></dt>
  <dd>This indicates the ordering of letters for comparison and sorting. In
      Latin alphabets, for example, &quot;b&quot;, generally follows
      &quot;a&quot;.</dd>
  <dt id="Category~6"><a class="permalink" href="#Category~6">Category
    &quot;LC_CTYPE&quot;: Character Types</a></dt>
  <dd>This indicates, for example if a character is an uppercase letter.</dd>
  <dt id="Other"><a class="permalink" href="#Other">Other categories</a></dt>
  <dd>Some platforms have other categories, dealing with such things as
      measurement units and paper sizes. None of these are used directly by
      Perl, but outside operations that Perl interacts with may use these. See
      &quot;Not within the scope of &quot;use locale&quot;&quot; below.</dd>
</dl>
<p class="Pp">More details on the categories used by Perl are given below in
    &quot;LOCALE CATEGORIES&quot;.</p>
<p class="Pp">Together, these categories go a long way towards being able to
    customize a single program to run in many different locations. But there are
    deficiencies, so keep reading.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PREPARING_TO_USE_LOCALES"><a class="permalink" href="#PREPARING_TO_USE_LOCALES">PREPARING
  TO USE LOCALES</a></h1>
<p class="Pp">Perl itself (outside the POSIX module) will not use locales unless
    specifically requested to (but again note that Perl may interact with code
    that does use them). Even if there is such a request, <b>all</b> of the
    following must be true for it to work properly:</p>
<ul class="Bl-bullet">
  <li><b>Your operating system must support the locale system</b>. If it does,
      you should find that the <span class="Li">&quot;setlocale()&quot;</span>
      function is a documented part of its C library.</li>
  <li><b>Definitions for locales that you use must be installed</b>. You, or
      your system administrator, must make sure that this is the case. The
      available locales, the location in which they are kept, and the manner in
      which they are installed all vary from system to system. Some systems
      provide only a few, hard-wired locales and do not allow more to be added.
      Others allow you to add &quot;canned&quot; locales provided by the system
      supplier. Still others allow you or the system administrator to define and
      add arbitrary locales. (You may have to ask your supplier to provide
      canned locales that are not delivered with your operating system.) Read
      your system documentation for further illumination.</li>
  <li><b>Perl must believe that the locale system is supported</b>. If it does,
      <span class="Li">&quot;perl -V:d_setlocale&quot;</span> will say that the
      value for <span class="Li">&quot;d_setlocale&quot;</span> is
      <span class="Li">&quot;define&quot;</span>.</li>
</ul>
<p class="Pp">If you want a Perl application to process and present your data
    according to a particular locale, the application code should include the
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> pragma (see &quot;The
    &quot;use locale&quot; pragma&quot;) where appropriate, and <b>at least
    one</b> of the following must be true:</p>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd><b>The locale-determining environment variables (see
      &quot;ENVIRONMENT&quot;)</b> <b>must be correctly set up</b> at the time
      the application is started, either by yourself or by whomever set up your
      system account; or</dd>
  <dt>2.</dt>
  <dd><b>The application must set its own locale</b> using the method described
      in &quot;The setlocale function&quot;.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_LOCALES"><a class="permalink" href="#USING_LOCALES">USING
  LOCALES</a></h1>
<section class="Ss">
<h2 class="Ss" id="The__use_locale__pragma"><a class="permalink" href="#The__use_locale__pragma">The
  &quot;use locale&quot; pragma</a></h2>
<p class="Pp">Starting in Perl 5.28, this pragma may be used in multi-threaded
    applications on systems that have thread-safe locale ability. Some caveats
    apply, see &quot;Multi-threaded&quot; below. On systems without this
    capability, or in earlier Perls, do NOT use this pragma in scripts that have
    multiple threads active. The locale in these cases is not local to a single
    thread. Another thread may change the locale at any time, which could cause
    at a minimum that a given thread is operating in a locale it isn't expecting
    to be in. On some platforms, segfaults can also occur. The locale change
    need not be explicit; some operations cause perl to change the locale
    itself. You are vulnerable simply by having done a
    <span class="Li">&quot;use&#x00A0;locale&quot;</span>.</p>
<p class="Pp">By default, Perl itself (outside the POSIX module) ignores the
    current locale. The <span class="Li">&quot;use&#x00A0;locale&quot;</span>
    pragma tells Perl to use the current locale for some operations. Starting in
    v5.16, there are optional parameters to this pragma, described below, which
    restrict which operations are affected by it.</p>
<p class="Pp">The current locale is set at execution time by <b>setlocale()</b>
    described below. If that function hasn't yet been called in the course of
    the program's execution, the current locale is that which was determined by
    the &quot;ENVIRONMENT&quot; in effect at the start of the program. If there
    is no valid environment, the current locale is whatever the system default
    has been set to. On POSIX systems, it is likely, but not necessarily, the
    &quot;C&quot; locale. On Windows, the default is set via the computer's
    <span class="Li">&quot;Control&#x00A0;Panel-&gt;Regional&#x00A0;and&#x00A0;Language&#x00A0;Options&quot;</span>
    (or its current equivalent).</p>
<p class="Pp">The operations that are affected by locale are:</p>
<dl class="Bl-tag">
  <dt id="Not"><a class="permalink" href="#Not"><b>Not within the scope of
    </b><span class="Li"><b>&quot;use locale&quot;</b></span><b></b></a></dt>
  <dd>Only certain operations (all originating outside Perl) should be affected,
      as follows:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>The current locale is used when going outside of Perl with operations like
      <b>system()</b> or qx//, if those operations are locale-sensitive.</li>
  <li>Also Perl gives access to various C library functions through the POSIX
      module. Some of those functions are always affected by the current locale.
      For example, <span class="Li">&quot;POSIX::strftime()&quot;</span> uses
      <span class="Li">&quot;LC_TIME&quot;</span>;
      <span class="Li">&quot;POSIX::strtod()&quot;</span> uses
      <span class="Li">&quot;LC_NUMERIC&quot;</span>;
      <span class="Li">&quot;POSIX::strcoll()&quot;</span> and
      <span class="Li">&quot;POSIX::strxfrm()&quot;</span> use
      <span class="Li">&quot;LC_COLLATE&quot;</span>. All such functions will
      behave according to the current underlying locale, even if that locale
      isn't exposed to Perl space.
    <p class="Pp">This applies as well to I18N::Langinfo.</p>
  </li>
  <li>XS modules for all categories but
      <span class="Li">&quot;LC_NUMERIC&quot;</span> get the underlying locale,
      and hence any C library functions they call will use that underlying
      locale. For more discussion, see &quot;CAVEATS&quot; in perlxs.</li>
</ul>
</div>
<div class="Bd-indent">
<p class="Pp">Note that all C programs (including the perl interpreter, which is
    written in C) always have an underlying locale. That locale is the
    &quot;C&quot; locale unless changed by a call to <b>setlocale()</b>. When
    Perl starts up, it changes the underlying locale to the one which is
    indicated by the &quot;ENVIRONMENT&quot;. When using the POSIX module or
    writing XS code, it is important to keep in mind that the underlying locale
    may be something other than &quot;C&quot;, even if the program hasn't
    explicitly changed it.</p>
<p class="Pp"></p>
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="Lingering"><a class="permalink" href="#Lingering"><b>Lingering effects
    of
    </b><span class="Li"><b>&quot;use&#x00A0;locale&quot;</b></span><b></b></a></dt>
  <dd>Certain Perl operations that are set-up within the scope of a
      <span class="Li">&quot;use locale&quot;</span> retain that effect even
      outside the scope. These include:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>The output format of a <b>write()</b> is determined by an earlier format
      declaration (&quot;format&quot; in perlfunc), so whether or not the output
      is affected by locale is determined by if the
      <span class="Li">&quot;format()&quot;</span> is within the scope of a
      <span class="Li">&quot;use locale&quot;</span>, not whether the
      <span class="Li">&quot;write()&quot;</span> is.</li>
  <li>Regular expression patterns can be compiled using qr// with actual
      matching deferred to later. Again, it is whether or not the compilation
      was done within the scope of <span class="Li">&quot;use
      locale&quot;</span> that determines the match behavior, not if the matches
      are done within such a scope or not.</li>
</ul>
</div>
<div class="Bd-indent">
<p class="Pp"></p>
<p class="Pp"></p>
</div>
<dl class="Bl-tag">
  <dt id="Under"><a class="permalink" href="#Under"><b>Under
    </b><span class="Li"><b>&quot;&quot;use
    locale&quot;;&quot;</b></span><b></b></a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>All the above operations</li>
  <li><b>Format declarations</b> (&quot;format&quot; in perlfunc) and hence any
      subsequent <span class="Li">&quot;write()&quot;</span>s use
      <span class="Li">&quot;LC_NUMERIC&quot;</span>.</li>
  <li><b>stringification and output</b> use
      <span class="Li">&quot;LC_NUMERIC&quot;</span>. These include the results
      of <span class="Li">&quot;print()&quot;</span>,
      <span class="Li">&quot;printf()&quot;</span>,
      <span class="Li">&quot;say()&quot;</span>, and
      <span class="Li">&quot;sprintf()&quot;</span>.</li>
  <li><b>The comparison operators</b> (<span class="Li">&quot;lt&quot;</span>,
      <span class="Li">&quot;le&quot;</span>,
      <span class="Li">&quot;cmp&quot;</span>,
      <span class="Li">&quot;ge&quot;</span>, and
      <span class="Li">&quot;gt&quot;</span>) use
      <span class="Li">&quot;LC_COLLATE&quot;</span>.
      <span class="Li">&quot;sort()&quot;</span> is also affected if used
      without an explicit comparison function, because it uses
      <span class="Li">&quot;cmp&quot;</span> by default.
    <p class="Pp"><b>Note:</b> <span class="Li">&quot;eq&quot;</span> and
        <span class="Li">&quot;ne&quot;</span> are unaffected by locale: they
        always perform a char-by-char comparison of their scalar operands.
        What's more, if <span class="Li">&quot;cmp&quot;</span> finds that its
        operands are equal according to the collation sequence specified by the
        current locale, it goes on to perform a char-by-char comparison, and
        only returns <i>0</i> (equal) if the operands are char-for-char
        identical. If you really want to know whether two strings--which
        <span class="Li">&quot;eq&quot;</span> and
        <span class="Li">&quot;cmp&quot;</span> may consider different--are
        equal as far as collation in the locale is concerned, see the discussion
        in &quot;Category <span class="Li">&quot;LC_COLLATE&quot;</span>:
        Collation&quot;.</p>
  </li>
  <li><b>Regular expressions and case-modification functions</b>
      (<span class="Li">&quot;uc()&quot;</span>,
      <span class="Li">&quot;lc()&quot;</span>,
      <span class="Li">&quot;ucfirst()&quot;</span>, and
      <span class="Li">&quot;lcfirst()&quot;</span>) use
      <span class="Li">&quot;LC_CTYPE&quot;</span></li>
  <li><b>The variables $!</b> (and its synonyms <span class="Li">$ERRNO</span>
      and <span class="Li">$OS_ERROR</span>) <b>and $^E</b> (and its synonym
      <span class="Li">$EXTENDED_OS_ERROR</span>) when used as strings use
      <span class="Li">&quot;LC_MESSAGES&quot;</span>.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<p class="Pp">The default behavior is restored with the
    <span class="Li">&quot;no&#x00A0;locale&quot;</span> pragma, or upon
    reaching the end of the block enclosing <span class="Li">&quot;use
    locale&quot;</span>. Note that <span class="Li">&quot;use
    locale&quot;</span> calls may be nested, and that what is in effect within
    an inner scope will revert to the outer scope's rules at the end of the
    inner scope.</p>
<p class="Pp">The string result of any operation that uses locale information is
    tainted, as it is possible for a locale to be untrustworthy. See
    &quot;SECURITY&quot;.</p>
<p class="Pp">Starting in Perl v5.16 in a very limited way, and more generally
    in v5.22, you can restrict which category or categories are enabled by this
    particular instance of the pragma by adding parameters to it. For
  example,</p>
<p class="Pp"></p>
<pre> use locale qw(:ctype :numeric);
</pre>
<p class="Pp">enables locale awareness within its scope of only those operations
    (listed above) that are affected by
    <span class="Li">&quot;LC_CTYPE&quot;</span> and
    <span class="Li">&quot;LC_NUMERIC&quot;</span>.</p>
<p class="Pp">The possible categories are:
    <span class="Li">&quot;:collate&quot;</span>,
    <span class="Li">&quot;:ctype&quot;</span>,
    <span class="Li">&quot;:messages&quot;</span>,
    <span class="Li">&quot;:monetary&quot;</span>,
    <span class="Li">&quot;:numeric&quot;</span>,
    <span class="Li">&quot;:time&quot;</span>, and the pseudo category
    <span class="Li">&quot;:characters&quot;</span> (described below).</p>
<p class="Pp">Thus you can say</p>
<p class="Pp"></p>
<pre> use locale ':messages';
</pre>
<p class="Pp">and only $! and $^E will be locale aware. Everything else is
    unaffected.</p>
<p class="Pp">Since Perl doesn't currently do anything with the
    <span class="Li">&quot;LC_MONETARY&quot;</span> category, specifying
    <span class="Li">&quot;:monetary&quot;</span> does effectively nothing. Some
    systems have other categories, such as
    <span class="Li">&quot;LC_PAPER&quot;</span>, but Perl also doesn't do
    anything with them, and there is no way to specify them in this pragma's
    arguments.</p>
<p class="Pp">You can also easily say to use all categories but one, by either,
    for example,</p>
<p class="Pp"></p>
<pre> use locale ':!ctype';
 use locale ':not_ctype';
</pre>
<p class="Pp">both of which mean to enable locale awareness of all categories
    but <span class="Li">&quot;LC_CTYPE&quot;</span>. Only one category argument
    may be specified in a <span class="Li">&quot;use&#x00A0;locale&quot;</span>
    if it is of the negated form.</p>
<p class="Pp">Prior to v5.22 only one form of the pragma with arguments is
    available:</p>
<p class="Pp"></p>
<pre> use locale ':not_characters';
</pre>
<p class="Pp">(and you have to say <span class="Li">&quot;not_&quot;</span>; you
    can't use the bang <span class="Li">&quot;!&quot;</span> form). This pseudo
    category is a shorthand for specifying both
    <span class="Li">&quot;:collate&quot;</span> and
    <span class="Li">&quot;:ctype&quot;</span>. Hence, in the negated form, it
    is nearly the same thing as saying</p>
<p class="Pp"></p>
<pre> use locale qw(:messages :monetary :numeric :time);
</pre>
<p class="Pp">We use the term &quot;nearly&quot;, because
    <span class="Li">&quot;:not_characters&quot;</span> also turns on
    <span class="Li">&quot;use&#x00A0;feature&#x00A0;'unicode_strings'&quot;</span>
    within its scope. This form is less useful in v5.20 and later, and is
    described fully in &quot;Unicode and UTF-8&quot;, but briefly, it tells Perl
    to not use the character portions of the locale definition, that is the
    <span class="Li">&quot;LC_CTYPE&quot;</span> and
    <span class="Li">&quot;LC_COLLATE&quot;</span> categories. Instead it will
    use the native character set (extended by Unicode). When using this
    parameter, you are responsible for getting the external character set
    translated into the native/Unicode one (which it already will be if it is
    one of the increasingly popular UTF-8 locales). There are convenient ways of
    doing this, as described in &quot;Unicode and UTF-8&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The_setlocale_function"><a class="permalink" href="#The_setlocale_function">The
  setlocale function</a></h2>
<p class="Pp">WARNING! Prior to Perl 5.28 or on a system that does not support
    thread-safe locale operations, do NOT use this function in a thread. The
    locale will change in all other threads at the same time, and should your
    thread get paused by the operating system, and another started, that thread
    will not have the locale it is expecting. On some platforms, there can be a
    race leading to segfaults if two threads call this function nearly
    simultaneously. This warning does not apply on unthreaded builds, or on
    perls where <span class="Li">&quot;${^SAFE_LOCALES}&quot;</span> exists and
    is non-zero; namely Perl 5.28 and later unthreaded or compiled to be
    locale-thread-safe.</p>
<p class="Pp">You can switch locales as often as you wish at run time with the
    <span class="Li">&quot;POSIX::setlocale()&quot;</span> function:</p>
<p class="Pp"></p>
<pre>        # Import locale-handling tool set from POSIX module.
        # This example uses: setlocale -- the function call
        #                    LC_CTYPE -- explained below
        # (Showing the testing for success/failure of operations is
        # omitted in these examples to avoid distracting from the main
        # point)
        use POSIX qw(locale_h);
        use locale;
        my $old_locale;
        # query and save the old locale
        $old_locale = setlocale(LC_CTYPE);
        setlocale(LC_CTYPE, &quot;fr_CA.ISO8859-1&quot;);
        # LC_CTYPE now in locale &quot;French, Canada, codeset ISO 8859-1&quot;
        setlocale(LC_CTYPE, &quot;&quot;);
        # LC_CTYPE now reset to the default defined by the
        # LC_ALL/LC_CTYPE/LANG environment variables, or to the system
        # default.  See below for documentation.
        # restore the old locale
        setlocale(LC_CTYPE, $old_locale);
</pre>
<p class="Pp">The first argument of
    <span class="Li">&quot;setlocale()&quot;</span> gives the <b>category</b>,
    the second the <b>locale</b>. The category tells in what aspect of data
    processing you want to apply locale-specific rules. Category names are
    discussed in &quot;LOCALE CATEGORIES&quot; and &quot;ENVIRONMENT&quot;. The
    locale is the name of a collection of customization information
    corresponding to a particular combination of language, country or territory,
    and codeset. Read on for hints on the naming of locales: not all systems
    name locales as in the example.</p>
<p class="Pp">If no second argument is provided and the category is something
    other than <span class="Li">&quot;LC_ALL&quot;</span>, the function returns
    a string naming the current locale for the category. You can use this value
    as the second argument in a subsequent call to
    <span class="Li">&quot;setlocale()&quot;</span>, <b>but</b> on some
    platforms the string is opaque, not something that most people would be able
    to decipher as to what locale it means.</p>
<p class="Pp">If no second argument is provided and the category is
    <span class="Li">&quot;LC_ALL&quot;</span>, the result is
    implementation-dependent. It may be a string of concatenated locale names
    (separator also implementation-dependent) or a single locale name. Please
    consult your <b>setlocale</b>(3) man page for details.</p>
<p class="Pp">If a second argument is given and it corresponds to a valid
    locale, the locale for the category is set to that value, and the function
    returns the now-current locale value. You can then use this in yet another
    call to <span class="Li">&quot;setlocale()&quot;</span>. (In some
    implementations, the return value may sometimes differ from the value you
    gave as the second argument--think of it as an alias for the value you
    gave.)</p>
<p class="Pp">As the example shows, if the second argument is an empty string,
    the category's locale is returned to the default specified by the
    corresponding environment variables. Generally, this results in a return to
    the default that was in force when Perl started up: changes to the
    environment made by the application after startup may or may not be noticed,
    depending on your system's C library.</p>
<p class="Pp">Note that when a form of <span class="Li">&quot;use
    locale&quot;</span> that doesn't include all categories is specified, Perl
    ignores the excluded categories.</p>
<p class="Pp">If <span class="Li">&quot;setlocale()&quot;</span> fails for some
    reason (for example, an attempt to set to a locale unknown to the system),
    the locale for the category is not changed, and the function returns
    <span class="Li">&quot;undef&quot;</span>.</p>
<p class="Pp">Starting in Perl 5.28, on multi-threaded perls compiled on systems
    that implement POSIX 2008 thread-safe locale operations, this function
    doesn't actually call the system
    <span class="Li">&quot;setlocale&quot;</span>. Instead those thread-safe
    operations are used to emulate the
    <span class="Li">&quot;setlocale&quot;</span> function, but in a thread-safe
    manner.</p>
<p class="Pp">You can force the thread-safe locale operations to always be used
    (if available) by recompiling perl with</p>
<p class="Pp"></p>
<pre> -Accflags='-DUSE_THREAD_SAFE_LOCALE'
</pre>
<p class="Pp">added to your call to <i>Configure</i>.</p>
<p class="Pp">For further information about the categories, consult
    <b>setlocale</b>(3).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Multi-threaded_operation"><a class="permalink" href="#Multi-threaded_operation">Multi-threaded
  operation</a></h2>
<p class="Pp">Beginning in Perl 5.28, multi-threaded locale operation is
    supported on systems that implement either the POSIX 2008 or
    Windows-specific thread-safe locale operations. Many modern systems, such as
    various Unix variants and Darwin do have this.</p>
<p class="Pp">You can tell if using locales is safe on your system by looking at
    the read-only boolean variable
    <span class="Li">&quot;${^SAFE_LOCALES}&quot;</span>. The value is 1 if the
    perl is not threaded, or if it is using thread-safe locale operations.</p>
<p class="Pp">Thread-safe operations are supported in Windows starting in Visual
    Studio 2005, and in systems compatible with POSIX 2008. Some platforms claim
    to support POSIX 2008, but have buggy implementations, so that the hints
    files for compiling to run on them turn off attempting to use thread-safety.
    <span class="Li">&quot;${^SAFE_LOCALES}&quot;</span> will be 0 on them.</p>
<p class="Pp">Be aware that writing a multi-threaded application will not be
    portable to a platform which lacks the native thread-safe locale support. On
    systems that do have it, you automatically get this behavior for threaded
    perls, without having to do anything. If for some reason, you don't want to
    use this capability (perhaps the POSIX 2008 support is buggy on your
    system), you can manually compile Perl to use the old non-thread-safe
    implementation by passing the argument
    <span class="Li">&quot;-Accflags='-DNO_THREAD_SAFE_LOCALE'&quot;</span> to
    <i>Configure</i>. Except on Windows, this will continue to use certain of
    the POSIX 2008 functions in some situations. If these are buggy, you can
    pass the following to <i>Configure</i> instead or additionally:
    <span class="Li">&quot;-Accflags='-DNO_POSIX_2008_LOCALE'&quot;</span>. This
    will also keep the code from using thread-safe locales.
    <span class="Li">&quot;${^SAFE_LOCALES}&quot;</span> will be 0 on systems
    that turn off the thread-safe operations.</p>
<p class="Pp">Normally on unthreaded builds, the traditional
    <span class="Li">&quot;setlocale()&quot;</span> is used and not the
    thread-safe locale functions. You can force the use of these on systems that
    have them by adding the
    <span class="Li">&quot;-Accflags='-DUSE_THREAD_SAFE_LOCALE'&quot;</span> to
    <i>Configure</i>.</p>
<p class="Pp">The initial program is started up using the locale specified from
    the environment, as currently, described in &quot;ENVIRONMENT&quot;. All
    newly created threads start with <span class="Li">&quot;LC_ALL&quot;</span>
    set to <span class="Li">&quot;C&quot;</span>. Each thread may use
    <span class="Li">&quot;POSIX::setlocale()&quot;</span> to query or switch
    its locale at any time, without affecting any other thread. All
    locale-dependent operations automatically use their thread's locale.</p>
<p class="Pp">This should be completely transparent to any applications written
    entirely in Perl (minus a few rarely encountered caveats given in the
    &quot;Multi-threaded&quot; section). Information for XS module writers is
    given in &quot;Locale-aware XS code&quot; in perlxs.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Finding_locales"><a class="permalink" href="#Finding_locales">Finding
  locales</a></h2>
<p class="Pp">For locales available in your system, consult also
    <b>setlocale</b>(3) to see whether it leads to the list of available locales
    (search for the <i>SEE ALSO</i> section). If that fails, try the following
    command lines:</p>
<p class="Pp"></p>
<pre>        locale -a
        nlsinfo
        ls /usr/lib/nls/loc
        ls /usr/lib/locale
        ls /usr/lib/nls
        ls /usr/share/locale
</pre>
<p class="Pp">and see whether they list something resembling these</p>
<p class="Pp"></p>
<pre>        en_US.ISO8859-1     de_DE.ISO8859-1     ru_RU.ISO8859-5
        en_US.iso88591      de_DE.iso88591      ru_RU.iso88595
        en_US               de_DE               ru_RU
        en                  de                  ru
        english             german              russian
        english.iso88591    german.iso88591     russian.iso88595
        english.roman8                          russian.koi8r
</pre>
<p class="Pp">Sadly, even though the calling interface for
    <span class="Li">&quot;setlocale()&quot;</span> has been standardized, names
    of locales and the directories where the configuration resides have not
    been. The basic form of the name is
    <i>language_territory</i><b>.</b><i>codeset</i>, but the latter parts after
    <i>language</i> are not always present. The <i>language</i> and
    <i>country</i> are usually from the standards <b>ISO 3166</b> and <b>ISO
    639</b>, the two-letter abbreviations for the countries and the languages of
    the world, respectively. The <i>codeset</i> part often mentions some
    <b>ISO</b> <b>8859</b> character set, the Latin codesets. For example,
    <span class="Li">&quot;ISO 8859-1&quot;</span> is the so-called
    &quot;Western European codeset&quot; that can be used to encode most Western
    European languages adequately. Again, there are several ways to write even
    the name of that one standard. Lamentably.</p>
<p class="Pp">Two special locales are worth particular mention: &quot;C&quot;
    and &quot;POSIX&quot;. Currently these are effectively the same locale: the
    difference is mainly that the first one is defined by the C standard, the
    second by the POSIX standard. They define the <b>default locale</b> in which
    every program starts in the absence of locale information in its
    environment. (The <i>default</i> default locale, if you will.) Its language
    is (American) English and its character codeset ASCII or, rarely, a superset
    thereof (such as the &quot;DEC Multinational Character Set (DEC-MCS)&quot;).
    <b>Warning</b>. The C locale delivered by some vendors may not actually
    exactly match what the C standard calls for. So beware.</p>
<p class="Pp"><b>NOTE</b>: Not all systems have the &quot;POSIX&quot; locale
    (not all systems are POSIX-conformant), so use &quot;C&quot; when you need
    explicitly to specify this default locale.</p>
</section>
<section class="Ss">
<h2 class="Ss">LOCALE PROBLEMS</h2>
<p class="Pp">You may encounter the following warning message at Perl
  startup:</p>
<p class="Pp"></p>
<pre>        perl: warning: Setting locale failed.
        perl: warning: Please check that your locale settings:
                LC_ALL = &quot;En_US&quot;,
                LANG = (unset)
            are supported and installed on your system.
        perl: warning: Falling back to the standard locale (&quot;C&quot;).
</pre>
<p class="Pp">This means that your locale settings had
    <span class="Li">&quot;LC_ALL&quot;</span> set to &quot;En_US&quot; and LANG
    exists but has no value. Perl tried to believe you but could not. Instead,
    Perl gave up and fell back to the &quot;C&quot; locale, the default locale
    that is supposed to work no matter what. (On Windows, it first tries falling
    back to the system default locale.) This usually means your locale settings
    were wrong, they mention locales your system has never heard of, or the
    locale installation in your system has problems (for example, some system
    files are broken or missing). There are quick and temporary fixes to these
    problems, as well as more thorough and lasting fixes.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Testing_for_broken_locales"><a class="permalink" href="#Testing_for_broken_locales">Testing
  for broken locales</a></h2>
<p class="Pp">If you are building Perl from source, the Perl test suite file
    <i>lib/locale.t</i> can be used to test the locales on your system. Setting
    the environment variable
    <span class="Li">&quot;PERL_DEBUG_FULL_TEST&quot;</span> to 1 will cause it
    to output detailed results. For example, on Linux, you could say</p>
<p class="Pp"></p>
<pre> PERL_DEBUG_FULL_TEST=1 ./perl -T -Ilib lib/locale.t &gt; locale.log 2&gt;&amp;1
</pre>
<p class="Pp">Besides many other tests, it will test every locale it finds on
    your system to see if they conform to the POSIX standard. If any have
    errors, it will include a summary near the end of the output of which
    locales passed all its tests, and which failed, and why.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Temporarily_fixing_locale_problems"><a class="permalink" href="#Temporarily_fixing_locale_problems">Temporarily
  fixing locale problems</a></h2>
<p class="Pp">The two quickest fixes are either to render Perl silent about any
    locale inconsistencies or to run Perl under the default locale
    &quot;C&quot;.</p>
<p class="Pp">Perl's moaning about locale problems can be silenced by setting
    the environment variable <span class="Li">&quot;PERL_BADLANG&quot;</span> to
    &quot;0&quot; or &quot;&quot;. This method really just sweeps the problem
    under the carpet: you tell Perl to shut up even when Perl sees that
    something is wrong. Do not be surprised if later something locale-dependent
    misbehaves.</p>
<p class="Pp">Perl can be run under the &quot;C&quot; locale by setting the
    environment variable <span class="Li">&quot;LC_ALL&quot;</span> to
    &quot;C&quot;. This method is perhaps a bit more civilized than the
    <span class="Li">&quot;PERL_BADLANG&quot;</span> approach, but setting
    <span class="Li">&quot;LC_ALL&quot;</span> (or other locale variables) may
    affect other programs as well, not just Perl. In particular, external
    programs run from within Perl will see these changes. If you make the new
    settings permanent (read on), all programs you run see the changes. See
    &quot;ENVIRONMENT&quot; for the full list of relevant environment variables
    and &quot;USING LOCALES&quot; for their effects in Perl. Effects in other
    programs are easily deducible. For example, the variable
    <span class="Li">&quot;LC_COLLATE&quot;</span> may well affect your
    <b>sort</b> program (or whatever the program that arranges
    &quot;records&quot; alphabetically in your system is called).</p>
<p class="Pp">You can test out changing these variables temporarily, and if the
    new settings seem to help, put those settings into your shell startup files.
    Consult your local documentation for the exact details. For Bourne-like
    shells (<b>sh</b>, <b>ksh</b>, <b>bash</b>, <b>zsh</b>):</p>
<p class="Pp"></p>
<pre>        LC_ALL=en_US.ISO8859-1
        export LC_ALL
</pre>
<p class="Pp">This assumes that we saw the locale &quot;en_US.ISO8859-1&quot;
    using the commands discussed above. We decided to try that instead of the
    above faulty locale &quot;En_US&quot;--and in Cshish shells (<b>csh</b>,
    <b>tcsh</b>)</p>
<p class="Pp"></p>
<pre>        setenv LC_ALL en_US.ISO8859-1
</pre>
<p class="Pp">or if you have the &quot;env&quot; application you can do (in any
    shell)</p>
<p class="Pp"></p>
<pre>        env LC_ALL=en_US.ISO8859-1 perl ...
</pre>
<p class="Pp">If you do not know what shell you have, consult your local
    helpdesk or the equivalent.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Permanently_fixing_locale_problems"><a class="permalink" href="#Permanently_fixing_locale_problems">Permanently
  fixing locale problems</a></h2>
<p class="Pp">The slower but superior fixes are when you may be able to yourself
    fix the misconfiguration of your own environment variables. The
    mis(sing)configuration of the whole system's locales usually requires the
    help of your friendly system administrator.</p>
<p class="Pp">First, see earlier in this document about &quot;Finding
    locales&quot;. That tells how to find which locales are really
    supported--and more importantly, installed--on your system. In our example
    error message, environment variables affecting the locale are listed in the
    order of decreasing importance (and unset variables do not matter).
    Therefore, having LC_ALL set to &quot;En_US&quot; must have been the bad
    choice, as shown by the error message. First try fixing locale settings
    listed first.</p>
<p class="Pp">Second, if using the listed commands you see something
    <b>exactly</b> (prefix matches do not count and case usually counts) like
    &quot;En_US&quot; without the quotes, then you should be okay because you
    are using a locale name that should be installed and available in your
    system. In this case, see &quot;Permanently fixing your system's locale
    configuration&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Permanently_fixing_your_system's_locale_configuration"><a class="permalink" href="#Permanently_fixing_your_system's_locale_configuration">Permanently
  fixing your system's locale configuration</a></h2>
<p class="Pp">This is when you see something like:</p>
<p class="Pp"></p>
<pre>        perl: warning: Please check that your locale settings:
                LC_ALL = &quot;En_US&quot;,
                LANG = (unset)
            are supported and installed on your system.
</pre>
<p class="Pp">but then cannot see that &quot;En_US&quot; listed by the
    above-mentioned commands. You may see things like
    &quot;en_US.ISO8859-1&quot;, but that isn't the same. In this case, try
    running under a locale that you can list and which somehow matches what you
    tried. The rules for matching locale names are a bit vague because
    standardization is weak in this area. See again the &quot;Finding
    locales&quot; about general rules.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Fixing_system_locale_configuration"><a class="permalink" href="#Fixing_system_locale_configuration">Fixing
  system locale configuration</a></h2>
<p class="Pp">Contact a system administrator (preferably your own) and report
    the exact error message you get, and ask them to read this same
    documentation you are now reading. They should be able to check whether
    there is something wrong with the locale configuration of the system. The
    &quot;Finding locales&quot; section is unfortunately a bit vague about the
    exact commands and places because these things are not that
  standardized.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The_localeconv_function"><a class="permalink" href="#The_localeconv_function">The
  localeconv function</a></h2>
<p class="Pp">The <span class="Li">&quot;POSIX::localeconv()&quot;</span>
    function allows you to get particulars of the locale-dependent numeric
    formatting information specified by the current underlying
    <span class="Li">&quot;LC_NUMERIC&quot;</span> and
    <span class="Li">&quot;LC_MONETARY&quot;</span> locales (regardless of
    whether called from within the scope of
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> or not). (If you just
    want the name of the current locale for a particular category, use
    <span class="Li">&quot;POSIX::setlocale()&quot;</span> with a single
    parameter--see &quot;The setlocale function&quot;.)</p>
<p class="Pp"></p>
<pre>        use POSIX qw(locale_h);
        # Get a reference to a hash of locale-dependent info
        $locale_values = localeconv();
        # Output sorted list of the values
        for (sort keys %$locale_values) {
            printf &quot;%-20s = %s\n&quot;, $_, $locale_values-&gt;{$_}
        }
</pre>
<p class="Pp"><span class="Li">&quot;localeconv()&quot;</span> takes no
    arguments, and returns <b>a reference to</b> a hash. The keys of this hash
    are variable names for formatting, such as
    <span class="Li">&quot;decimal_point&quot;</span> and
    <span class="Li">&quot;thousands_sep&quot;</span>. The values are the
    corresponding, er, values. See &quot;localeconv&quot; in POSIX for a longer
    example listing the categories an implementation might be expected to
    provide; some provide more and others fewer. You don't need an explicit
    <span class="Li">&quot;use locale&quot;</span>, because
    <span class="Li">&quot;localeconv()&quot;</span> always observes the current
    locale.</p>
<p class="Pp">Here's a simple-minded example program that rewrites its
    command-line parameters as integers correctly formatted in the current
    locale:</p>
<p class="Pp"></p>
<pre>    use POSIX qw(locale_h);
    # Get some of locale's numeric formatting parameters
    my ($thousands_sep, $grouping) =
            @{localeconv()}{'thousands_sep', 'grouping'};
    # Apply defaults if values are missing
    $thousands_sep = ',' unless $thousands_sep;
    # grouping and mon_grouping are packed lists
    # of small integers (characters) telling the
    # grouping (thousand_seps and mon_thousand_seps
    # being the group dividers) of numbers and
    # monetary quantities.  The integers' meanings:
    # 255 means no more grouping, 0 means repeat
    # the previous grouping, 1-254 means use that
    # as the current grouping.  Grouping goes from
    # right to left (low to high digits).  In the
    # below we cheat slightly by never using anything
    # else than the first grouping (whatever that is).
    if ($grouping) {
        @grouping = unpack(&quot;C*&quot;, $grouping);
    } else {
        @grouping = (3);
    }
    # Format command line params for current locale
    for (@ARGV) {
        $_ = int;    # Chop non-integer part
        1 while
        s/(\d)(\d{$grouping[0]}($|$thousands_sep))/$1$thousands_sep$2/;
        print &quot;$_&quot;;
    }
    print &quot;\n&quot;;
</pre>
<p class="Pp">Note that if the platform doesn't have
    <span class="Li">&quot;LC_NUMERIC&quot;</span> and/or
    <span class="Li">&quot;LC_MONETARY&quot;</span> available or enabled, the
    corresponding elements of the hash will be missing.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="I18N::Langinfo"><a class="permalink" href="#I18N::Langinfo">I18N::Langinfo</a></h2>
<p class="Pp">Another interface for querying locale-dependent information is the
    <span class="Li">&quot;I18N::Langinfo::langinfo()&quot;</span> function.</p>
<p class="Pp">The following example will import the
    <span class="Li">&quot;langinfo()&quot;</span> function itself and three
    constants to be used as arguments to
    <span class="Li">&quot;langinfo()&quot;</span>: a constant for the
    abbreviated first day of the week (the numbering starts from Sunday = 1) and
    two more constants for the affirmative and negative answers for a yes/no
    question in the current locale.</p>
<p class="Pp"></p>
<pre>    use I18N::Langinfo qw(langinfo ABDAY_1 YESSTR NOSTR);
    my ($abday_1, $yesstr, $nostr)
                = map { langinfo } qw(ABDAY_1 YESSTR NOSTR);
    print &quot;$abday_1? [$yesstr/$nostr] &quot;;
</pre>
<p class="Pp">In other words, in the &quot;C&quot; (or English) locale the above
    will probably print something like:</p>
<p class="Pp"></p>
<pre>    Sun? [yes/no]
</pre>
<p class="Pp">See I18N::Langinfo for more information.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="LOCALE_CATEGORIES"><a class="permalink" href="#LOCALE_CATEGORIES">LOCALE
  CATEGORIES</a></h1>
<p class="Pp">The following subsections describe basic locale categories. Beyond
    these, some combination categories allow manipulation of more than one basic
    category at a time. See &quot;ENVIRONMENT&quot; for a discussion of
  these.</p>
<section class="Ss">
<h2 class="Ss" id="Category__LC_COLLATE_:_Collation:_Text_Comparisons_and_Sorting"><a class="permalink" href="#Category__LC_COLLATE_:_Collation:_Text_Comparisons_and_Sorting">Category
  &quot;LC_COLLATE&quot;: Collation: Text Comparisons and Sorting</a></h2>
<p class="Pp">In the scope of a
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> form that includes
    collation, Perl looks to the <span class="Li">&quot;LC_COLLATE&quot;</span>
    environment variable to determine the application's notions on collation
    (ordering) of characters. For example, &quot;b&quot; follows &quot;a&quot;
    in Latin alphabets, but where do &quot;a&quot; and &quot;aa&quot; belong?
    And while &quot;color&quot; follows &quot;chocolate&quot; in English, what
    about in traditional Spanish?</p>
<p class="Pp">The following collations all make sense and you may meet any of
    them if you <span class="Li">&quot;use locale&quot;</span>.</p>
<p class="Pp"></p>
<pre>        A B C D E a b c d e
        A a B b C c D d E e
        a A b B c C d D e E
        a b c d e A B C D E
</pre>
<p class="Pp">Here is a code snippet to tell what &quot;word&quot; characters
    are in the current locale, in that locale's order:</p>
<p class="Pp"></p>
<pre>        use locale;
        print +(sort grep /\w/, map { chr } 0..255), &quot;\n&quot;;
</pre>
<p class="Pp">Compare this with the characters that you see and their order if
    you state explicitly that the locale should be ignored:</p>
<p class="Pp"></p>
<pre>        no locale;
        print +(sort grep /\w/, map { chr } 0..255), &quot;\n&quot;;
</pre>
<p class="Pp">This machine-native collation (which is what you get unless
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> has appeared earlier
    in the same block) must be used for sorting raw binary data, whereas the
    locale-dependent collation of the first example is useful for natural
  text.</p>
<p class="Pp">As noted in &quot;USING LOCALES&quot;,
    <span class="Li">&quot;cmp&quot;</span> compares according to the current
    collation locale when <span class="Li">&quot;use locale&quot;</span> is in
    effect, but falls back to a char-by-char comparison for strings that the
    locale says are equal. You can use
    <span class="Li">&quot;POSIX::strcoll()&quot;</span> if you don't want this
    fall-back:</p>
<p class="Pp"></p>
<pre>        use POSIX qw(strcoll);
        $equal_in_locale =
            !strcoll(&quot;space and case ignored&quot;, &quot;SpaceAndCaseIgnored&quot;);
</pre>
<p class="Pp"><span class="Li">$equal_in_locale</span> will be true if the
    collation locale specifies a dictionary-like ordering that ignores space
    characters completely and which folds case.</p>
<p class="Pp">Perl uses the platform's C library collation functions
    <span class="Li">&quot;strcoll()&quot;</span> and
    <span class="Li">&quot;strxfrm()&quot;</span>. That means you get whatever
    they give. On some platforms, these functions work well on UTF-8 locales,
    giving a reasonable default collation for the code points that are important
    in that locale. (And if they aren't working well, the problem may only be
    that the locale definition is deficient, so can be fixed by using a better
    definition file. Unicode's definitions (see &quot;Freely available locale
    definitions&quot;) provide reasonable UTF-8 locale collation definitions.)
    Starting in Perl v5.26, Perl's use of these functions has been made more
    seamless. This may be sufficient for your needs. For more control, and to
    make sure strings containing any code point (not just the ones important in
    the locale) collate properly, the Unicode::Collate module is suggested.</p>
<p class="Pp">In non-UTF-8 locales (hence single byte), code points above 0xFF
    are technically invalid. But if present, again starting in v5.26, they will
    collate to the same position as the highest valid code point does. This
    generally gives good results, but the collation order may be skewed if the
    valid code point gets special treatment when it forms particular sequences
    with other characters as defined by the locale. When two strings collate
    identically, the code point order is used as a tie breaker.</p>
<p class="Pp">If Perl detects that there are problems with the locale collation
    order, it reverts to using non-locale collation rules for that locale.</p>
<p class="Pp">If you have a single string that you want to check for
    &quot;equality in locale&quot; against several others, you might think you
    could gain a little efficiency by using
    <span class="Li">&quot;POSIX::strxfrm()&quot;</span> in conjunction with
    <span class="Li">&quot;eq&quot;</span>:</p>
<p class="Pp"></p>
<pre>        use POSIX qw(strxfrm);
        $xfrm_string = strxfrm(&quot;Mixed-case string&quot;);
        print &quot;locale collation ignores spaces\n&quot;
            if $xfrm_string eq strxfrm(&quot;Mixed-casestring&quot;);
        print &quot;locale collation ignores hyphens\n&quot;
            if $xfrm_string eq strxfrm(&quot;Mixedcase string&quot;);
        print &quot;locale collation ignores case\n&quot;
            if $xfrm_string eq strxfrm(&quot;mixed-case string&quot;);
</pre>
<p class="Pp"><span class="Li">&quot;strxfrm()&quot;</span> takes a string and
    maps it into a transformed string for use in char-by-char comparisons
    against other transformed strings during collation. &quot;Under the
    hood&quot;, locale-affected Perl comparison operators call
    <span class="Li">&quot;strxfrm()&quot;</span> for both operands, then do a
    char-by-char comparison of the transformed strings. By calling
    <span class="Li">&quot;strxfrm()&quot;</span> explicitly and using a non
    locale-affected comparison, the example attempts to save a couple of
    transformations. But in fact, it doesn't save anything: Perl magic (see
    &quot;Magic Variables&quot; in perlguts) creates the transformed version of
    a string the first time it's needed in a comparison, then keeps this version
    around in case it's needed again. An example rewritten the easy way with
    <span class="Li">&quot;cmp&quot;</span> runs just about as fast. It also
    copes with null characters embedded in strings; if you call
    <span class="Li">&quot;strxfrm()&quot;</span> directly, it treats the first
    null it finds as a terminator. Don't expect the transformed strings it
    produces to be portable across systems--or even from one revision of your
    operating system to the next. In short, don't call
    <span class="Li">&quot;strxfrm()&quot;</span> directly: let Perl do it for
    you.</p>
<p class="Pp">Note: <span class="Li">&quot;use locale&quot;</span> isn't shown
    in some of these examples because it isn't needed:
    <span class="Li">&quot;strcoll()&quot;</span> and
    <span class="Li">&quot;strxfrm()&quot;</span> are POSIX functions which use
    the standard system-supplied <span class="Li">&quot;libc&quot;</span>
    functions that always obey the current
    <span class="Li">&quot;LC_COLLATE&quot;</span> locale.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Category__LC_CTYPE_:_Character_Types"><a class="permalink" href="#Category__LC_CTYPE_:_Character_Types">Category
  &quot;LC_CTYPE&quot;: Character Types</a></h2>
<p class="Pp">In the scope of a
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> form that includes
    <span class="Li">&quot;LC_CTYPE&quot;</span>, Perl obeys the
    <span class="Li">&quot;LC_CTYPE&quot;</span> locale setting. This controls
    the application's notion of which characters are alphabetic, numeric,
    punctuation, <i>etc</i>. This affects Perl's
    <span class="Li">&quot;\w&quot;</span> regular expression metanotation,
    which stands for alphanumeric characters--that is, alphabetic, numeric, and
    the platform's native underscore. (Consult perlre for more information about
    regular expressions.) Thanks to
    <span class="Li">&quot;LC_CTYPE&quot;</span>, depending on your locale
    setting, characters like &quot;ae&quot;, &quot;d`&quot;, &quot;ss&quot;, and
    &quot;o&quot; may be understood as <span class="Li">&quot;\w&quot;</span>
    characters. It also affects things like
    <span class="Li">&quot;\s&quot;</span>,
    <span class="Li">&quot;\D&quot;</span>, and the POSIX character classes,
    like <span class="Li">&quot;[[:graph:]]&quot;</span>. (See perlrecharclass
    for more information on all these.)</p>
<p class="Pp">The <span class="Li">&quot;LC_CTYPE&quot;</span> locale also
    provides the map used in transliterating characters between lower and
    uppercase. This affects the case-mapping
    functions--<span class="Li">&quot;fc()&quot;</span>,
    <span class="Li">&quot;lc()&quot;</span>,
    <span class="Li">&quot;lcfirst()&quot;</span>,
    <span class="Li">&quot;uc()&quot;</span>, and
    <span class="Li">&quot;ucfirst()&quot;</span>; case-mapping interpolation
    with <span class="Li">&quot;\F&quot;</span>,
    <span class="Li">&quot;\l&quot;</span>,
    <span class="Li">&quot;\L&quot;</span>,
    <span class="Li">&quot;\u&quot;</span>, or
    <span class="Li">&quot;\U&quot;</span> in double-quoted strings and
    <span class="Li">&quot;s///&quot;</span> substitutions; and case-insensitive
    regular expression pattern matching using the
    <span class="Li">&quot;i&quot;</span> modifier.</p>
<p class="Pp">Starting in v5.20, Perl supports UTF-8 locales for
    <span class="Li">&quot;LC_CTYPE&quot;</span>, but otherwise Perl only
    supports single-byte locales, such as the ISO 8859 series. This means that
    wide character locales, for example for Asian languages, are not
    well-supported. Use of these locales may cause core dumps. If the platform
    has the capability for Perl to detect such a locale, starting in Perl v5.22,
    Perl will warn, default enabled, using the
    <span class="Li">&quot;locale&quot;</span> warning category, whenever such a
    locale is switched into. The UTF-8 locale support is actually a superset of
    POSIX locales, because it is really full Unicode behavior as if no
    <span class="Li">&quot;LC_CTYPE&quot;</span> locale were in effect at all
    (except for tainting; see &quot;SECURITY&quot;). POSIX locales, even UTF-8
    ones, are lacking certain concepts in Unicode, such as the idea that
    changing the case of a character could expand to be more than one character.
    Perl in a UTF-8 locale, will give you that expansion. Prior to v5.20, Perl
    treated a UTF-8 locale on some platforms like an ISO 8859-1 one, with some
    restrictions, and on other platforms more like the &quot;C&quot; locale. For
    releases v5.16 and v5.18,
    <span class="Li">&quot;use&#x00A0;locale&#x00A0;'not_characters&quot;</span>
    could be used as a workaround for this (see &quot;Unicode and
  UTF-8&quot;).</p>
<p class="Pp">Note that there are quite a few things that are unaffected by the
    current locale. Any literal character is the native character for the given
    platform. Hence 'A' means the character at code point 65 on ASCII platforms,
    and 193 on EBCDIC. That may or may not be an 'A' in the current locale, if
    that locale even has an 'A'. Similarly, all the escape sequences for
    particular characters, <span class="Li">&quot;\n&quot;</span> for example,
    always mean the platform's native one. This means, for example, that
    <span class="Li">&quot;\N&quot;</span> in regular expressions (every
    character but new-line) works on the platform character set.</p>
<p class="Pp">Starting in v5.22, Perl will by default warn when switching into a
    locale that redefines any ASCII printable character (plus
    <span class="Li">&quot;\t&quot;</span> and
    <span class="Li">&quot;\n&quot;</span>) into a different class than
    expected. This is likely to happen on modern locales only on EBCDIC
    platforms, where, for example, a CCSID 0037 locale on a CCSID 1047 machine
    moves <span class="Li">&quot;[&quot;</span>, but it can happen on ASCII
    platforms with the ISO 646 and other 7-bit locales that are essentially
    obsolete. Things may still work, depending on what features of Perl are used
    by the program. For example, in the example from above where
    <span class="Li">&quot;|&quot;</span> becomes a
    <span class="Li">&quot;\w&quot;</span>, and there are no regular expressions
    where this matters, the program may still work properly. The warning lists
    all the characters that it can determine could be adversely affected.</p>
<p class="Pp"><b>Note:</b> A broken or malicious
    <span class="Li">&quot;LC_CTYPE&quot;</span> locale definition may result in
    clearly ineligible characters being considered to be alphanumeric by your
    application. For strict matching of (mundane) ASCII letters and digits--for
    example, in command strings--locale-aware applications should use
    <span class="Li">&quot;\w&quot;</span> with the
    <span class="Li">&quot;/a&quot;</span> regular expression modifier. See
    &quot;SECURITY&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Category__LC_NUMERIC_:_Numeric_Formatting"><a class="permalink" href="#Category__LC_NUMERIC_:_Numeric_Formatting">Category
  &quot;LC_NUMERIC&quot;: Numeric Formatting</a></h2>
<p class="Pp">After a proper
    <span class="Li">&quot;POSIX::setlocale()&quot;</span> call, and within the
    scope of a <span class="Li">&quot;use locale&quot;</span> form that includes
    numerics, Perl obeys the <span class="Li">&quot;LC_NUMERIC&quot;</span>
    locale information, which controls an application's idea of how numbers
    should be formatted for human readability. In most implementations the only
    effect is to change the character used for the decimal point--perhaps from
    &quot;.&quot; to &quot;,&quot;. The functions aren't aware of such niceties
    as thousands separation and so on. (See &quot;The localeconv function&quot;
    if you care about these things.)</p>
<p class="Pp"></p>
<pre> use POSIX qw(strtod setlocale LC_NUMERIC);
 use locale;
 setlocale LC_NUMERIC, &quot;&quot;;
 $n = 5/2;   # Assign numeric 2.5 to $n
 $a = &quot; $n&quot;; # Locale-dependent conversion to string
 print &quot;half five is $n\n&quot;;       # Locale-dependent output
 printf &quot;half five is %g\n&quot;, $n;  # Locale-dependent output
 print &quot;DECIMAL POINT IS COMMA\n&quot;
          if $n == (strtod(&quot;2,5&quot;))[0]; # Locale-dependent conversion
</pre>
<p class="Pp">See also I18N::Langinfo and
    <span class="Li">&quot;RADIXCHAR&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Category__LC_MONETARY_:_Formatting_of_monetary_amounts"><a class="permalink" href="#Category__LC_MONETARY_:_Formatting_of_monetary_amounts">Category
  &quot;LC_MONETARY&quot;: Formatting of monetary amounts</a></h2>
<p class="Pp">The C standard defines the
    <span class="Li">&quot;LC_MONETARY&quot;</span> category, but not a function
    that is affected by its contents. (Those with experience of standards
    committees will recognize that the working group decided to punt on the
    issue.) Consequently, Perl essentially takes no notice of it. If you really
    want to use <span class="Li">&quot;LC_MONETARY&quot;</span>, you can query
    its contents--see &quot;The localeconv function&quot;--and use the
    information that it returns in your application's own formatting of currency
    amounts. However, you may well find that the information, voluminous and
    complex though it may be, still does not quite meet your requirements:
    currency formatting is a hard nut to crack.</p>
<p class="Pp">See also I18N::Langinfo and
    <span class="Li">&quot;CRNCYSTR&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Category__LC_TIME_:_Respresentation_of_time"><a class="permalink" href="#Category__LC_TIME_:_Respresentation_of_time">Category
  &quot;LC_TIME&quot;: Respresentation of time</a></h2>
<p class="Pp">Output produced by
    <span class="Li">&quot;POSIX::strftime()&quot;</span>, which builds a
    formatted human-readable date/time string, is affected by the current
    <span class="Li">&quot;LC_TIME&quot;</span> locale. Thus, in a French
    locale, the output produced by the <span class="Li">%B</span> format element
    (full month name) for the first month of the year would be
    &quot;janvier&quot;. Here's how to get a list of long month names in the
    current locale:</p>
<p class="Pp"></p>
<pre>        use POSIX qw(strftime);
        for (0..11) {
            $long_month_name[$_] =
                strftime(&quot;%B&quot;, 0, 0, 0, 1, $_, 96);
        }
</pre>
<p class="Pp">Note: <span class="Li">&quot;use locale&quot;</span> isn't needed
    in this example: <span class="Li">&quot;strftime()&quot;</span> is a POSIX
    function which uses the standard system-supplied
    <span class="Li">&quot;libc&quot;</span> function that always obeys the
    current <span class="Li">&quot;LC_TIME&quot;</span> locale.</p>
<p class="Pp">See also I18N::Langinfo and
    <span class="Li">&quot;ABDAY_1&quot;</span>..<span class="Li">&quot;ABDAY_7&quot;</span>,
    <span class="Li">&quot;DAY_1&quot;</span>..<span class="Li">&quot;DAY_7&quot;</span>,
    <span class="Li">&quot;ABMON_1&quot;</span>..<span class="Li">&quot;ABMON_12&quot;</span>,
    and
    <span class="Li">&quot;ABMON_1&quot;</span>..<span class="Li">&quot;ABMON_12&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Other_categories"><a class="permalink" href="#Other_categories">Other
  categories</a></h2>
<p class="Pp">The remaining locale categories are not currently used by Perl
    itself. But again note that things Perl interacts with may use these,
    including extensions outside the standard Perl distribution, and by the
    operating system and its utilities. Note especially that the string value of
    <span class="Li">$!</span> and the error messages given by external
    utilities may be changed by <span class="Li">&quot;LC_MESSAGES&quot;</span>.
    If you want to have portable error codes, use
    <span class="Li">&quot;%!&quot;</span>. See Errno.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SECURITY"><a class="permalink" href="#SECURITY">SECURITY</a></h1>
<p class="Pp">Although the main discussion of Perl security issues can be found
    in perlsec, a discussion of Perl's locale handling would be incomplete if it
    did not draw your attention to locale-dependent security issues.
    Locales--particularly on systems that allow unprivileged users to build
    their own locales--are untrustworthy. A malicious (or just plain broken)
    locale can make a locale-aware application give unexpected results. Here are
    a few possibilities:</p>
<ul class="Bl-bullet">
  <li>Regular expression checks for safe file names or mail addresses using
      <span class="Li">&quot;\w&quot;</span> may be spoofed by an
      <span class="Li">&quot;LC_CTYPE&quot;</span> locale that claims that
      characters such as <span class="Li">&quot;&gt;&quot;</span> and
      <span class="Li">&quot;|&quot;</span> are alphanumeric.</li>
  <li>String interpolation with case-mapping, as in, say,
      <span class="Li">&quot;$dest =</span>
      <span class="Li">&quot;C:\U$name.$ext&quot;&quot;</span>, may produce
      dangerous results if a bogus <span class="Li">&quot;LC_CTYPE&quot;</span>
      case-mapping table is in effect.</li>
  <li>A sneaky <span class="Li">&quot;LC_COLLATE&quot;</span> locale could
      result in the names of students with &quot;D&quot; grades appearing ahead
      of those with &quot;A&quot;s.</li>
  <li>An application that takes the trouble to use information in
      <span class="Li">&quot;LC_MONETARY&quot;</span> may format debits as if
      they were credits and vice versa if that locale has been subverted. Or it
      might make payments in US dollars instead of Hong Kong dollars.</li>
  <li>The date and day names in dates formatted by
      <span class="Li">&quot;strftime()&quot;</span> could be manipulated to
      advantage by a malicious user able to subvert the
      <span class="Li">&quot;LC_DATE&quot;</span> locale. (&quot;Look--it says I
      wasn't in the building on Sunday.&quot;)</li>
</ul>
<p class="Pp">Such dangers are not peculiar to the locale system: any aspect of
    an application's environment which may be modified maliciously presents
    similar challenges. Similarly, they are not specific to Perl: any
    programming language that allows you to write programs that take account of
    their environment exposes you to these issues.</p>
<p class="Pp">Perl cannot protect you from all possibilities shown in the
    examples--there is no substitute for your own vigilance--but, when
    <span class="Li">&quot;use locale&quot;</span> is in effect, Perl uses the
    tainting mechanism (see perlsec) to mark string results that become
    locale-dependent, and which may be untrustworthy in consequence. Here is a
    summary of the tainting behavior of operators and functions that may be
    affected by the locale:</p>
<ul class="Bl-bullet">
  <li><b>Comparison operators</b> (<span class="Li">&quot;lt&quot;</span>,
      <span class="Li">&quot;le&quot;</span>,
      <span class="Li">&quot;ge&quot;</span>,
      <span class="Li">&quot;gt&quot;</span> and
      <span class="Li">&quot;cmp&quot;</span>):
    <p class="Pp">Scalar true/false (or less/equal/greater) result is never
        tainted.</p>
  </li>
  <li><b>Case-mapping interpolation</b> (with
      <span class="Li">&quot;\l&quot;</span>,
      <span class="Li">&quot;\L&quot;</span>,
      <span class="Li">&quot;\u&quot;</span>,
      <span class="Li">&quot;\U&quot;</span>, or
      <span class="Li">&quot;\F&quot;</span>)
    <p class="Pp">The result string containing interpolated material is tainted
        if a <span class="Li">&quot;use locale&quot;</span> form that includes
        <span class="Li">&quot;LC_CTYPE&quot;</span> is in effect.</p>
  </li>
  <li><b>Matching operator</b> (<span class="Li">&quot;m//&quot;</span>):
    <p class="Pp">Scalar true/false result never tainted.</p>
    <p class="Pp">All subpatterns, either delivered as a list-context result or
        as <span class="Li">$1</span> <i>etc</i>., are tainted if a
        <span class="Li">&quot;use locale&quot;</span> form that includes
        <span class="Li">&quot;LC_CTYPE&quot;</span> is in effect, and the
        subpattern regular expression contains a locale-dependent construct.
        These constructs include <span class="Li">&quot;\w&quot;</span> (to
        match an alphanumeric character), <span class="Li">&quot;\W&quot;</span>
        (non-alphanumeric character), <span class="Li">&quot;\b&quot;</span> and
        <span class="Li">&quot;\B&quot;</span> (word-boundary and non-boundardy,
        which depend on what <span class="Li">&quot;\w&quot;</span> and
        <span class="Li">&quot;\W&quot;</span> match),
        <span class="Li">&quot;\s&quot;</span> (whitespace character),
        <span class="Li">&quot;\S&quot;</span> (non whitespace character),
        <span class="Li">&quot;\d&quot;</span> and
        <span class="Li">&quot;\D&quot;</span> (digits and non-digits), and the
        POSIX character classes, such as
        <span class="Li">&quot;[:alpha:]&quot;</span> (see &quot;POSIX Character
        Classes&quot; in perlrecharclass).</p>
    <p class="Pp">Tainting is also likely if the pattern is to be matched
        case-insensitively (via <span class="Li">&quot;/i&quot;</span>). The
        exception is if all the code points to be matched this way are above 255
        and do not have folds under Unicode rules to below 256. Tainting is not
        done for these because Perl only uses Unicode rules for such code
        points, and those rules are the same no matter what the current
      locale.</p>
    <p class="Pp">The matched-pattern variables, <span class="Li">$&amp;</span>,
        <span class="Li">&quot;$`&quot;</span> (pre-match),
        <span class="Li">&quot;$'&quot;</span> (post-match), and
        <span class="Li">$+</span> (last match) also are tainted.</p>
  </li>
  <li><b>Substitution operator</b> (<span class="Li">&quot;s///&quot;</span>):
    <p class="Pp">Has the same behavior as the match operator. Also, the left
        operand of <span class="Li">&quot;=~&quot;</span> becomes tainted when a
        <span class="Li">&quot;use locale&quot;</span> form that includes
        <span class="Li">&quot;LC_CTYPE&quot;</span> is in effect, if modified
        as a result of a substitution based on a regular expression match
        involving any of the things mentioned in the previous item, or of
        case-mapping, such as <span class="Li">&quot;\l&quot;</span>,
        <span class="Li">&quot;\L&quot;</span>,<span class="Li">&quot;\u&quot;</span>,
        <span class="Li">&quot;\U&quot;</span>, or
        <span class="Li">&quot;\F&quot;</span>.</p>
  </li>
  <li><b>Output formatting functions</b>
      (<span class="Li">&quot;printf()&quot;</span> and
      <span class="Li">&quot;write()&quot;</span>):
    <p class="Pp">Results are never tainted because otherwise even output from
        print, for example <span class="Li">&quot;print(1/7)&quot;</span>,
        should be tainted if <span class="Li">&quot;use locale&quot;</span> is
        in effect.</p>
  </li>
  <li><b>Case-mapping functions</b> (<span class="Li">&quot;lc()&quot;</span>,
      <span class="Li">&quot;lcfirst()&quot;</span>,
      <span class="Li">&quot;uc()&quot;</span>,
      <span class="Li">&quot;ucfirst()&quot;</span>):
    <p class="Pp">Results are tainted if a <span class="Li">&quot;use
        locale&quot;</span> form that includes
        <span class="Li">&quot;LC_CTYPE&quot;</span> is in effect.</p>
  </li>
  <li><b>POSIX locale-dependent functions</b>
      (<span class="Li">&quot;localeconv()&quot;</span>,
      <span class="Li">&quot;strcoll()&quot;</span>,
      <span class="Li">&quot;strftime()&quot;</span>,
      <span class="Li">&quot;strxfrm()&quot;</span>):
    <p class="Pp">Results are never tainted.</p>
  </li>
</ul>
<p class="Pp">Three examples illustrate locale-dependent tainting. The first
    program, which ignores its locale, won't run: a value taken directly from
    the command line may not be used to name an output file when taint checks
    are enabled.</p>
<p class="Pp"></p>
<pre>        #/usr/local/bin/perl -T
        # Run with taint checking
        # Command line sanity check omitted...
        $tainted_output_file = shift;
        open(F, &quot;&gt;$tainted_output_file&quot;)
            or warn &quot;Open of $tainted_output_file failed: $!\n&quot;;
</pre>
<p class="Pp">The program can be made to run by &quot;laundering&quot; the
    tainted value through a regular expression: the second example--which still
    ignores locale information--runs, creating the file named on its command
    line if it can.</p>
<p class="Pp"></p>
<pre>        #/usr/local/bin/perl -T
        $tainted_output_file = shift;
        $tainted_output_file =~ m%[\w/]+%;
        $untainted_output_file = $&amp;;
        open(F, &quot;&gt;$untainted_output_file&quot;)
            or warn &quot;Open of $untainted_output_file failed: $!\n&quot;;
</pre>
<p class="Pp">Compare this with a similar but locale-aware program:</p>
<p class="Pp"></p>
<pre>        #/usr/local/bin/perl -T
        $tainted_output_file = shift;
        use locale;
        $tainted_output_file =~ m%[\w/]+%;
        $localized_output_file = $&amp;;
        open(F, &quot;&gt;$localized_output_file&quot;)
            or warn &quot;Open of $localized_output_file failed: $!\n&quot;;
</pre>
<p class="Pp">This third program fails to run because
    <span class="Li">$&amp;</span> is tainted: it is the result of a match
    involving <span class="Li">&quot;\w&quot;</span> while
    <span class="Li">&quot;use locale&quot;</span> is in effect.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt id="PERL_SKIP_LOCALE_INIT"><a class="permalink" href="#PERL_SKIP_LOCALE_INIT">PERL_SKIP_LOCALE_INIT</a></dt>
  <dd>This environment variable, available starting in Perl v5.20, if set (to
      any value), tells Perl to not use the rest of the environment variables to
      initialize with. Instead, Perl uses whatever the current locale settings
      are. This is particularly useful in embedded environments, see &quot;Using
      embedded Perl with POSIX locales&quot; in perlembed.</dd>
  <dt id="PERL_BADLANG"><a class="permalink" href="#PERL_BADLANG">PERL_BADLANG</a></dt>
  <dd>A string that can suppress Perl's warning about failed locale settings at
      startup. Failure can occur if the locale support in the operating system
      is lacking (broken) in some way--or if you mistyped the name of a locale
      when you set up your environment. If this environment variable is absent,
      or has a value other than &quot;0&quot; or &quot;&quot;, Perl will
      complain about locale setting failures.
    <p class="Pp"><b>NOTE</b>: <span class="Li">&quot;PERL_BADLANG&quot;</span>
        only gives you a way to hide the warning message. The message tells
        about some problem in your system's locale support, and you should
        investigate what the problem is.</p>
  </dd>
</dl>
<p class="Pp">The following environment variables are not specific to Perl: They
    are part of the standardized (ISO C, XPG4, POSIX 1.c)
    <span class="Li">&quot;setlocale()&quot;</span> method for controlling an
    application's opinion on data. Windows is non-POSIX, but Perl arranges for
    the following to work as described anyway. If the locale given by an
    environment variable is not valid, Perl tries the next lower one in
    priority. If none are valid, on Windows, the system default locale is then
    tried. If all else fails, the <span class="Li">&quot;C&quot;</span> locale
    is used. If even that doesn't work, something is badly broken, but Perl
    tries to forge ahead with whatever the locale settings might be.</p>
<dl class="Bl-tag">
  <dt>&quot;LC_ALL&quot;</dt>
  <dd><span class="Li">&quot;LC_ALL&quot;</span> is the &quot;override-all&quot;
      locale environment variable. If set, it overrides all the rest of the
      locale environment variables.</dd>
  <dt>&quot;LANGUAGE&quot;</dt>
  <dd><b>NOTE</b>: <span class="Li">&quot;LANGUAGE&quot;</span> is a GNU
      extension, it affects you only if you are using the GNU libc. This is the
      case if you are using e.g. Linux. If you are using &quot;commercial&quot;
      Unixes you are most probably <i>not</i> using GNU libc and you can ignore
      <span class="Li">&quot;LANGUAGE&quot;</span>.
    <p class="Pp">However, in the case you are using
        <span class="Li">&quot;LANGUAGE&quot;</span>: it affects the language of
        informational, warning, and error messages output by commands (in other
        words, it's like <span class="Li">&quot;LC_MESSAGES&quot;</span>) but it
        has higher priority than <span class="Li">&quot;LC_ALL&quot;</span>.
        Moreover, it's not a single value but instead a &quot;path&quot;
        (&quot;:&quot;-separated list) of <i>languages</i> (not locales). See
        the GNU <span class="Li">&quot;gettext&quot;</span> library
        documentation for more information.</p>
  </dd>
  <dt>&quot;LC_CTYPE&quot;</dt>
  <dd>In the absence of <span class="Li">&quot;LC_ALL&quot;</span>,
      <span class="Li">&quot;LC_CTYPE&quot;</span> chooses the character type
      locale. In the absence of both <span class="Li">&quot;LC_ALL&quot;</span>
      and <span class="Li">&quot;LC_CTYPE&quot;</span>,
      <span class="Li">&quot;LANG&quot;</span> chooses the character type
      locale.</dd>
  <dt>&quot;LC_COLLATE&quot;</dt>
  <dd>In the absence of <span class="Li">&quot;LC_ALL&quot;</span>,
      <span class="Li">&quot;LC_COLLATE&quot;</span> chooses the collation
      (sorting) locale. In the absence of both
      <span class="Li">&quot;LC_ALL&quot;</span> and
      <span class="Li">&quot;LC_COLLATE&quot;</span>,
      <span class="Li">&quot;LANG&quot;</span> chooses the collation
    locale.</dd>
  <dt>&quot;LC_MONETARY&quot;</dt>
  <dd>In the absence of <span class="Li">&quot;LC_ALL&quot;</span>,
      <span class="Li">&quot;LC_MONETARY&quot;</span> chooses the monetary
      formatting locale. In the absence of both
      <span class="Li">&quot;LC_ALL&quot;</span> and
      <span class="Li">&quot;LC_MONETARY&quot;</span>,
      <span class="Li">&quot;LANG&quot;</span> chooses the monetary formatting
      locale.</dd>
  <dt>&quot;LC_NUMERIC&quot;</dt>
  <dd>In the absence of <span class="Li">&quot;LC_ALL&quot;</span>,
      <span class="Li">&quot;LC_NUMERIC&quot;</span> chooses the numeric format
      locale. In the absence of both <span class="Li">&quot;LC_ALL&quot;</span>
      and <span class="Li">&quot;LC_NUMERIC&quot;</span>,
      <span class="Li">&quot;LANG&quot;</span> chooses the numeric format.</dd>
  <dt>&quot;LC_TIME&quot;</dt>
  <dd>In the absence of <span class="Li">&quot;LC_ALL&quot;</span>,
      <span class="Li">&quot;LC_TIME&quot;</span> chooses the date and time
      formatting locale. In the absence of both
      <span class="Li">&quot;LC_ALL&quot;</span> and
      <span class="Li">&quot;LC_TIME&quot;</span>,
      <span class="Li">&quot;LANG&quot;</span> chooses the date and time
      formatting locale.</dd>
  <dt>&quot;LANG&quot;</dt>
  <dd><span class="Li">&quot;LANG&quot;</span> is the &quot;catch-all&quot;
      locale environment variable. If it is set, it is used as the last resort
      after the overall <span class="Li">&quot;LC_ALL&quot;</span> and the
      category-specific
      <span class="Li">&quot;LC_</span><span class="Li"><i>foo</i></span><span class="Li">&quot;</span>.</dd>
</dl>
<section class="Ss">
<h2 class="Ss" id="Examples"><a class="permalink" href="#Examples">Examples</a></h2>
<p class="Pp">The <span class="Li">&quot;LC_NUMERIC&quot;</span> controls the
    numeric output:</p>
<p class="Pp"></p>
<pre>   use locale;
   use POSIX qw(locale_h); # Imports setlocale() and the LC_ constants.
   setlocale(LC_NUMERIC, &quot;fr_FR&quot;) or die &quot;Pardon&quot;;
   printf &quot;%g\n&quot;, 1.23; # If the &quot;fr_FR&quot; succeeded, probably shows 1,23.
</pre>
<p class="Pp">and also how strings are parsed by
    <span class="Li">&quot;POSIX::strtod()&quot;</span> as numbers:</p>
<p class="Pp"></p>
<pre>   use locale;
   use POSIX qw(locale_h strtod);
   setlocale(LC_NUMERIC, &quot;de_DE&quot;) or die &quot;Entschuldigung&quot;;
   my $x = strtod(&quot;2,34&quot;) + 5;
   print $x, &quot;\n&quot;; # Probably shows 7,34.
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<section class="Ss">
<h2 class="Ss" id="String__eval__and__LC_NUMERIC_"><a class="permalink" href="#String__eval__and__LC_NUMERIC_">String
  &quot;eval&quot; and &quot;LC_NUMERIC&quot;</a></h2>
<p class="Pp">A string eval parses its expression as standard Perl. It is
    therefore expecting the decimal point to be a dot. If
    <span class="Li">&quot;LC_NUMERIC&quot;</span> is set to have this be a
    comma instead, the parsing will be confused, perhaps silently.</p>
<p class="Pp"></p>
<pre> use locale;
 use POSIX qw(locale_h);
 setlocale(LC_NUMERIC, &quot;fr_FR&quot;) or die &quot;Pardon&quot;;
 my $a = 1.2;
 print eval &quot;$a + 1.5&quot;;
 print &quot;\n&quot;;
</pre>
<p class="Pp">prints <span class="Li">&quot;13,5&quot;</span>. This is because
    in that locale, the comma is the decimal point character. The
    <span class="Li">&quot;eval&quot;</span> thus expands to:</p>
<p class="Pp"></p>
<pre> eval &quot;1,2 + 1.5&quot;
</pre>
<p class="Pp">and the result is not what you likely expected. No warnings are
    generated. If you do string <span class="Li">&quot;eval&quot;</span>'s
    within the scope of <span class="Li">&quot;use&#x00A0;locale&quot;</span>,
    you should instead change the <span class="Li">&quot;eval&quot;</span> line
    to do something like:</p>
<p class="Pp"></p>
<pre> print eval &quot;no locale; $a + 1.5&quot;;
</pre>
<p class="Pp">This prints <span class="Li">2.7</span>.</p>
<p class="Pp">You could also exclude
    <span class="Li">&quot;LC_NUMERIC&quot;</span>, if you don't need it, by</p>
<p class="Pp"></p>
<pre> use locale ':!numeric';
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Backward_compatibility"><a class="permalink" href="#Backward_compatibility">Backward
  compatibility</a></h2>
<p class="Pp">Versions of Perl prior to 5.004 <b>mostly</b> ignored locale
    information, generally behaving as if something similar to the
    <span class="Li">&quot;C&quot;</span> locale were always in force, even if
    the program environment suggested otherwise (see &quot;The setlocale
    function&quot;). By default, Perl still behaves this way for backward
    compatibility. If you want a Perl application to pay attention to locale
    information, you <b>must</b> use the
    <span class="Li">&quot;use&#x00A0;locale&quot;</span> pragma (see &quot;The
    &quot;use locale&quot; pragma&quot;) or, in the unlikely event that you want
    to do so for just pattern matching, the
    <span class="Li">&quot;/l&quot;</span> regular expression modifier (see
    &quot;Character set modifiers&quot; in perlre) to instruct it to do so.</p>
<p class="Pp">Versions of Perl from 5.002 to 5.003 did use the
    <span class="Li">&quot;LC_CTYPE&quot;</span> information if available; that
    is, <span class="Li">&quot;\w&quot;</span> did understand what were the
    letters according to the locale environment variables. The problem was that
    the user had no control over the feature: if the C library supported
    locales, Perl used them.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="I18N:Collate_obsolete"><a class="permalink" href="#I18N:Collate_obsolete">I18N:Collate
  obsolete</a></h2>
<p class="Pp">In versions of Perl prior to 5.004, per-locale collation was
    possible using the <span class="Li">&quot;I18N::Collate&quot;</span> library
    module. This module is now mildly obsolete and should be avoided in new
    applications. The <span class="Li">&quot;LC_COLLATE&quot;</span>
    functionality is now integrated into the Perl core language: One can use
    locale-specific scalar data completely normally with
    <span class="Li">&quot;use locale&quot;</span>, so there is no longer any
    need to juggle with the scalar references of
    <span class="Li">&quot;I18N::Collate&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Sort_speed_and_memory_use_impacts"><a class="permalink" href="#Sort_speed_and_memory_use_impacts">Sort
  speed and memory use impacts</a></h2>
<p class="Pp">Comparing and sorting by locale is usually slower than the default
    sorting; slow-downs of two to four times have been observed. It will also
    consume more memory: once a Perl scalar variable has participated in any
    string comparison or sorting operation obeying the locale collation rules,
    it will take 3-15 times more memory than before. (The exact multiplier
    depends on the string's contents, the operating system and the locale.)
    These downsides are dictated more by the operating system's implementation
    of the locale system than by Perl.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Freely_available_locale_definitions"><a class="permalink" href="#Freely_available_locale_definitions">Freely
  available locale definitions</a></h2>
<p class="Pp">The Unicode CLDR project extracts the POSIX portion of many of its
    locales, available at</p>
<p class="Pp"></p>
<pre>  https://unicode.org/Public/cldr/2.0.1/
</pre>
<p class="Pp">(Newer versions of CLDR require you to compute the POSIX data
    yourself. See &lt;http://unicode.org/Public/cldr/latest/&gt;.)</p>
<p class="Pp">There is a large collection of locale definitions at:</p>
<p class="Pp"></p>
<pre>  http://std.dkuug.dk/i18n/WG15-collection/locales/
</pre>
<p class="Pp">You should be aware that it is unsupported, and is not claimed to
    be fit for any purpose. If your system allows installation of arbitrary
    locales, you may find the definitions useful as they are, or as a basis for
    the development of your own locales.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="I18n_and_l10n"><a class="permalink" href="#I18n_and_l10n">I18n
  and l10n</a></h2>
<p class="Pp">&quot;Internationalization&quot; is often abbreviated as
    <b>i18n</b> because its first and last letters are separated by eighteen
    others. (You may guess why the internalin ... internaliti ... i18n tends to
    get abbreviated.) In the same way, &quot;localization&quot; is often
    abbreviated to <b>l10n</b>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="An_imperfect_standard"><a class="permalink" href="#An_imperfect_standard">An
  imperfect standard</a></h2>
<p class="Pp">Internationalization, as defined in the C and POSIX standards, can
    be criticized as incomplete and ungainly. They also have a tendency, like
    standards groups, to divide the world into nations, when we all know that
    the world can equally well be divided into bankers, bikers, gamers, and so
    on.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Unicode_and_UTF"><a class="permalink" href="#Unicode_and_UTF">Unicode
  and UTF-8</a></h1>
<p class="Pp">The support of Unicode is new starting from Perl version v5.6, and
    more fully implemented in versions v5.8 and later. See perluniintro.</p>
<p class="Pp">Starting in Perl v5.20, UTF-8 locales are supported in Perl,
    except <span class="Li">&quot;LC_COLLATE&quot;</span> is only partially
    supported; collation support is improved in Perl v5.26 to a level that may
    be sufficient for your needs (see &quot;Category
    <span class="Li">&quot;LC_COLLATE&quot;</span>: Collation: Text Comparisons
    and Sorting&quot;).</p>
<p class="Pp">If you have Perl v5.16 or v5.18 and can't upgrade, you can use</p>
<p class="Pp"></p>
<pre>    use locale ':not_characters';
</pre>
<p class="Pp">When this form of the pragma is used, only the non-character
    portions of locales are used by Perl, for example
    <span class="Li">&quot;LC_NUMERIC&quot;</span>. Perl assumes that you have
    translated all the characters it is to operate on into Unicode (actually the
    platform's native character set (ASCII or EBCDIC) plus Unicode). For data in
    files, this can conveniently be done by also specifying</p>
<p class="Pp"></p>
<pre>    use open ':locale';
</pre>
<p class="Pp">This pragma arranges for all inputs from files to be translated
    into Unicode from the current locale as specified in the environment (see
    &quot;ENVIRONMENT&quot;), and all outputs to files to be translated back
    into the locale. (See open). On a per-filehandle basis, you can instead use
    the PerlIO::locale module, or the Encode::Locale module, both available from
    CPAN. The latter module also has methods to ease the handling of
    <span class="Li">&quot;ARGV&quot;</span> and environment variables, and can
    be used on individual strings. If you know that all your locales will be
    UTF-8, as many are these days, you can use the <b>-C</b> command line
    switch.</p>
<p class="Pp">This form of the pragma allows essentially seamless handling of
    locales with Unicode. The collation order will be by Unicode code point
    order. Unicode::Collate can be used to get Unicode rules collation.</p>
<p class="Pp">All the modules and switches just described can be used in v5.20
    with just plain <span class="Li">&quot;use locale&quot;</span>, and, should
    the input locales not be UTF-8, you'll get the less than ideal behavior,
    described below, that you get with pre-v5.16 Perls, or when you use the
    locale pragma without the
    <span class="Li">&quot;:not_characters&quot;</span> parameter in v5.16 and
    v5.18. If you are using exclusively UTF-8 locales in v5.20 and higher, the
    rest of this section does not apply to you.</p>
<p class="Pp">There are two cases, multi-byte and single-byte locales. First
    multi-byte:</p>
<p class="Pp">The only multi-byte (or wide character) locale that Perl is ever
    likely to support is UTF-8. This is due to the difficulty of implementation,
    the fact that high quality UTF-8 locales are now published for every area of
    the world (&lt;https://unicode.org/Public/cldr/2.0.1/&gt; for ones that are
    already set-up, but from an earlier version;
    &lt;https://unicode.org/Public/cldr/latest/&gt; for the most up-to-date, but
    you have to extract the POSIX information yourself), and that failing all
    that you can use the Encode module to translate to/from your locale. So,
    you'll have to do one of those things if you're using one of these locales,
    such as Big5 or Shift JIS. For UTF-8 locales, in Perls (pre v5.20) that
    don't have full UTF-8 locale support, they may work reasonably well
    (depending on your C library implementation) simply because both they and
    Perl store characters that take up multiple bytes the same way. However,
    some, if not most, C library implementations may not process the characters
    in the upper half of the Latin-1 range (128 - 255) properly under
    <span class="Li">&quot;LC_CTYPE&quot;</span>. To see if a character is a
    particular type under a locale, Perl uses the functions like
    <span class="Li">&quot;isalnum()&quot;</span>. Your C library may not work
    for UTF-8 locales with those functions, instead only working under the newer
    wide library functions like <span class="Li">&quot;iswalnum()&quot;</span>,
    which Perl does not use. These multi-byte locales are treated like
    single-byte locales, and will have the restrictions described below.
    Starting in Perl v5.22 a warning message is raised when Perl detects a
    multi-byte locale that it doesn't fully support.</p>
<p class="Pp">For single-byte locales, Perl generally takes the tack to use
    locale rules on code points that can fit in a single byte, and Unicode rules
    for those that can't (though this isn't uniformly applied, see the note at
    the end of this section). This prevents many problems in locales that aren't
    UTF-8. Suppose the locale is ISO8859-7, Greek. The character at 0xD7 there
    is a capital Chi. But in the ISO8859-1 locale, Latin1, it is a
    multiplication sign. The POSIX regular expression character class
    <span class="Li">&quot;[[:alpha:]]&quot;</span> will magically match 0xD7 in
    the Greek locale but not in the Latin one.</p>
<p class="Pp">However, there are places where this breaks down. Certain Perl
    constructs are for Unicode only, such as
    <span class="Li">&quot;\p{Alpha}&quot;</span>. They assume that 0xD7 always
    has its Unicode meaning (or the equivalent on EBCDIC platforms). Since
    Latin1 is a subset of Unicode and 0xD7 is the multiplication sign in both
    Latin1 and Unicode, <span class="Li">&quot;\p{Alpha}&quot;</span> will never
    match it, regardless of locale. A similar issue occurs with
    <span class="Li">&quot;\N{...}&quot;</span>. Prior to v5.20, it is therefore
    a bad idea to use <span class="Li">&quot;\p{}&quot;</span> or
    <span class="Li">&quot;\N{}&quot;</span> under plain
    <span class="Li">&quot;use locale&quot;</span>--<i>unless</i> you can
    guarantee that the locale will be ISO8859-1. Use POSIX character classes
    instead.</p>
<p class="Pp">Another problem with this approach is that operations that cross
    the single byte/multiple byte boundary are not well-defined, and so are
    disallowed. (This boundary is between the codepoints at 255/256.) For
    example, lower casing LATIN CAPITAL LETTER Y WITH DIAERESIS (U+0178) should
    return LATIN SMALL LETTER Y WITH DIAERESIS (U+00FF). But in the Greek
    locale, for example, there is no character at 0xFF, and Perl has no way of
    knowing what the character at 0xFF is really supposed to represent. Thus it
    disallows the operation. In this mode, the lowercase of U+0178 is
  itself.</p>
<p class="Pp">The same problems ensue if you enable automatic UTF-8-ification of
    your standard file handles, default
    <span class="Li">&quot;open()&quot;</span> layer, and
    <span class="Li">@ARGV</span> on non-ISO8859-1, non-UTF-8 locales (by using
    either the <b>-C</b> command line switch or the
    <span class="Li">&quot;PERL_UNICODE&quot;</span> environment variable; see
    perlrun). Things are read in as UTF-8, which would normally imply a Unicode
    interpretation, but the presence of a locale causes them to be interpreted
    in that locale instead. For example, a 0xD7 code point in the Unicode input,
    which should mean the multiplication sign, won't be interpreted by Perl that
    way under the Greek locale. This is not a problem <i>provided</i> you make
    certain that all locales will always and only be either an ISO8859-1, or, if
    you don't have a deficient C library, a UTF-8 locale.</p>
<p class="Pp">Still another problem is that this approach can lead to two code
    points meaning the same character. Thus in a Greek locale, both U+03A7 and
    U+00D7 are GREEK CAPITAL LETTER CHI.</p>
<p class="Pp">Because of all these problems, starting in v5.22, Perl will raise
    a warning if a multi-byte (hence Unicode) code point is used when a
    single-byte locale is in effect. (Although it doesn't check for this if
    doing so would unreasonably slow execution down.)</p>
<p class="Pp">Vendor locales are notoriously buggy, and it is difficult for Perl
    to test its locale-handling code because this interacts with code that Perl
    has no control over; therefore the locale-handling code in Perl may be buggy
    as well. (However, the Unicode-supplied locales should be better, and there
    is a feed back mechanism to correct any problems. See &quot;Freely available
    locale definitions&quot;.)</p>
<p class="Pp">If you have Perl v5.16, the problems mentioned above go away if
    you use the <span class="Li">&quot;:not_characters&quot;</span> parameter to
    the locale pragma (except for vendor bugs in the non-character portions). If
    you don't have v5.16, and you <i>do</i> have locales that work, using them
    may be worthwhile for certain specific purposes, as long as you keep in mind
    the gotchas already mentioned. For example, if the collation for your
    locales works, it runs faster under locales than under Unicode::Collate; and
    you gain access to such things as the local currency symbol and the names of
    the months and days of the week. (But to hammer home the point, in v5.16,
    you get this access without the downsides of locales by using the
    <span class="Li">&quot;:not_characters&quot;</span> form of the pragma.)</p>
<p class="Pp">Note: The policy of using locale rules for code points that can
    fit in a byte, and Unicode rules for those that can't is not uniformly
    applied. Pre-v5.12, it was somewhat haphazard; in v5.12 it was applied
    fairly consistently to regular expression matching except for bracketed
    character classes; in v5.14 it was extended to all regex matches; and in
    v5.16 to the casing operations such as
    <span class="Li">&quot;\L&quot;</span> and
    <span class="Li">&quot;uc()&quot;</span>. For collation, in all releases so
    far, the system's <span class="Li">&quot;strxfrm()&quot;</span> function is
    called, and whatever it does is what you get. Starting in v5.26, various
    bugs are fixed with the way perl uses this function.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<section class="Ss">
<h2 class="Ss" id="Collation_of_strings_containing_embedded__NUL__characters"><a class="permalink" href="#Collation_of_strings_containing_embedded__NUL__characters">Collation
  of strings containing embedded &quot;NUL&quot; characters</a></h2>
<p class="Pp"><span class="Li">&quot;NUL&quot;</span> characters will sort the
    same as the lowest collating control character does, or to
    <span class="Li">&quot;\001&quot;</span> in the unlikely event that there
    are no control characters at all in the locale. In cases where the strings
    don't contain this non-<span class="Li">&quot;NUL&quot;</span> control, the
    results will be correct, and in many locales, this control, whatever it
    might be, will rarely be encountered. But there are cases where a
    <span class="Li">&quot;NUL&quot;</span> should sort before this control, but
    doesn't. If two strings do collate identically, the one containing the
    <span class="Li">&quot;NUL&quot;</span> will sort to earlier. Prior to 5.26,
    there were more bugs.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Multi-threaded"><a class="permalink" href="#Multi-threaded">Multi-threaded</a></h2>
<p class="Pp">XS code or C-language libraries called from it that use the system
    <span class="Li">setlocale(3)</span> function (except on Windows) likely
    will not work from a multi-threaded application without changes. See
    &quot;Locale-aware XS code&quot; in perlxs.</p>
<p class="Pp">An XS module that is locale-dependent could have been written
    under the assumption that it will never be called in a multi-threaded
    environment, and so uses other non-locale constructs that aren't
    multi-thread-safe. See &quot;Thread-aware system interfaces&quot; in
  perlxs.</p>
<p class="Pp">POSIX does not define a way to get the name of the current
    per-thread locale. Some systems, such as Darwin and NetBSD do implement a
    function, <b>querylocale</b>(3) to do this. On non-Windows systems without
    it, such as Linux, there are some additional caveats:</p>
<ul class="Bl-bullet">
  <li>An embedded perl needs to be started up while the global locale is in
      effect. See &quot;Using embedded Perl with POSIX locales&quot; in
      perlembed.</li>
  <li>It becomes more important for perl to know about all the possible locale
      categories on the platform, even if they aren't apparently used in your
      program. Perl knows all of the Linux ones. If your platform has others,
      you can submit an issue at &lt;https://github.com/Perl/perl5/issues&gt;
      for inclusion of it in the next release. In the meantime, it is possible
      to edit the Perl source to teach it about the category, and then
      recompile. Search for instances of, say,
      <span class="Li">&quot;LC_PAPER&quot;</span> in the source, and use that
      as a template to add the omitted one.</li>
  <li>It is possible, though hard to do, to call
      <span class="Li">&quot;POSIX::setlocale&quot;</span> with a locale that it
      doesn't recognize as syntactically legal, but actually is legal on that
      system. This should happen only with embedded perls, or if you hand-craft
      a locale name yourself.</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Broken_systems"><a class="permalink" href="#Broken_systems">Broken
  systems</a></h2>
<p class="Pp">In certain systems, the operating system's locale support is
    broken and cannot be fixed or used by Perl. Such deficiencies can and will
    result in mysterious hangs and/or Perl core dumps when
    <span class="Li">&quot;use locale&quot;</span> is in effect. When confronted
    with such a system, please report in excruciating detail to
    &lt;&lt;https://github.com/Perl/perl5/issues&gt;&gt;, and also contact your
    vendor: bug fixes may exist for these problems in your operating system.
    Sometimes such bug fixes are called an operating system upgrade. If you have
    the source for Perl, include in the bug report the output of the test
    described above in &quot;Testing for broken locales&quot;.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">I18N::Langinfo, perluniintro, perlunicode, open,
    &quot;localeconv&quot; in POSIX, &quot;setlocale&quot; in POSIX,
    &quot;strcoll&quot; in POSIX, &quot;strftime&quot; in POSIX,
    &quot;strtod&quot; in POSIX, &quot;strxfrm&quot; in POSIX.</p>
<p class="Pp">For special considerations when Perl is embedded in a C program,
    see &quot;Using embedded Perl with POSIX locales&quot; in perlembed.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">Jarkko Hietaniemi's original <i>perli18n.pod</i> heavily hacked by
    Dominic Dunlop, assisted by the perl5-porters. Prose worked over a bit by
    Tom Christiansen, and now maintained by Perl 5 porters.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-02-11</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
