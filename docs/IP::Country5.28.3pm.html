<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>IP::Country(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IP::Country(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">IP::Country(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
IP::Country - fast lookup of country codes from IP addresses
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  use IP::Country::Fast;
  my $reg = IP::Country::Fast-&gt;new();
  print $reg-&gt;inet_atocc('212.67.197.128')   .&quot;\n&quot;;
  print $reg-&gt;inet_atocc('www.slashdot.org') .&quot;\n&quot;;
  print $reg-&gt;db_time() .&quot;\n&quot;; # revision date
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Finding the home country of a client using only the IP address can be difficult.
  Looking up the domain name associated with that address can provide some help,
  but many IP address are not reverse mapped to any useful domain, and the most
  common domain (.com) offers no help when looking for country.
<p class="Pp">This module comes bundled with a database of countries where
    various IP addresses have been assigned. Although the country of assignment
    will probably be the country associated with a large ISP rather than the
    client herself, this is probably good enough for most log analysis
    applications, and under test has proved to be as accurate as reverse-DNS and
    WHOIS lookup.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTOR"><a class="permalink" href="#CONSTRUCTOR">CONSTRUCTOR</a></h1>
The constructor takes no arguments.
<p class="Pp"><span class="Li"></span></p>
<pre>
  use IP::Country::Fast;
  my $reg = IP::Country::Fast-&gt;new();
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="OBJECT_METHODS"><a class="permalink" href="#OBJECT_METHODS">OBJECT
  METHODS</a></h1>
All object methods are designed to be used in an object-oriented fashion.
<p class="Pp"><span class="Li"></span></p>
<pre>
  $result = $object-&gt;foo_method($bar,$baz);
</pre>
<p class="Pp">Using the module in a procedural fashion (without the arrow
    syntax) won't work.</p>
<dl class="Bl-tag">
  <dt>$cc = $reg-&gt;inet_atocc(HOSTNAME)</dt>
  <dd>Takes a string giving the name of a host, and translates that to an
      two-letter country code. Takes arguments of both the 'rtfm.mit.edu' type
      and '18.181.0.24'. If the host name cannot be resolved, returns undef. If
      the resolved IP address is not contained within the database, returns
      undef. For multi-homed hosts (hosts with more than one address), the first
      address found is returned. For private Internet addresses (see RFC1918),
      returns two asterisks '**'.</dd>
  <dt>$cc = $reg-&gt;inet_ntocc(IP_ADDRESS)</dt>
  <dd>Takes a string (an opaque string as returned by
      <b>Socket::inet_aton()</b>) and translates it into a two-letter country
      code. If the IP address is not contained within the database, returns
      undef.</dd>
  <dt>$cc = $reg-&gt;<b>db_time()</b></dt>
  <dd>Returns the creation date of the database, measured as number of seconds
      since the Unix epoch (00:00:00 GMT, January 1, 1970). Suitable for feeding
      to &quot;gmtime&quot; and &quot;localtime&quot;. When used with
      IP::Country::Medium or Slow objects, returns zero.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PERFORMANCE"><a class="permalink" href="#PERFORMANCE">PERFORMANCE</a></h1>
With a random selection of 65,000 IP addresses, the module can look up over
  15,000 IP addresses per second on a 730MHz PIII (Coppermine) and over 25,000
  IP addresses per second on a 1.3GHz Athlon. Out of this random selection of IP
  addresses, 43% had an associated country code. Please let me know if you've
  run this against a set of 'real' IP addresses from your log files, and have
  details of the proportion of IPs that had associated country codes.
</section>
<section class="Sh">
<h1 class="Sh" id="IP::Country::Slow_warning"><a class="permalink" href="#IP::Country::Slow_warning">IP::Country::Slow
  warning</a></h1>
During tests of this module, it was found that there was no measurable advantage
  in using this module in preference to IP::Country::Medium or
  IP::Country::Fast. You should use IP::Country::Medium is the majority of your
  lookups are of the form 'rtfm.mit.edu' (domain names), and IP::Country::Fast
  if the majority of your lookups are of the form '18.181.0.24' (IP addresses).
<p class="Pp">IP::Country::Medium caches domain-name lookups, whereas
    IP::Country::Fast does not.</p>
<p class="Pp">It is *very* rare for a domain-name lookup to differ from the
    database used by IP::Country::Fast. Thus, there is no good reason to prefer
    a slow domain-name lookup to a fast database lookup. Nor is there any
    significant difference in coverage between the domain-name system and
    database. If you can find a real reason to use IP::Country::Slow, let me
    know.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COUNTRY_CODES"><a class="permalink" href="#COUNTRY_CODES">COUNTRY
  CODES</a></h1>
You'll probably want some kind of country code -&gt; country name conversion
  utility: you should use Geography::Countries from CPAN.
<p class="Pp">However, you should note the circumstances where the country code
    returned by IP::Country will deviate from those used by
    Geography::Countries:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  AP - non-specific Asia-Pacific location
  CS - Czechoslovakia (former)
  EU - non-specific European Union location
  FX - France, Metropolitan
  PS - Palestinian Territory, Occupied
  ** - intranet address
  undef - not in database
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS/LIMITATIONS"><a class="permalink" href="#BUGS/LIMITATIONS">BUGS/LIMITATIONS</a></h1>
Only works with IPv4 addresses and ASCII hostnames.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
IP::Country::Fast - recommended for lookups of hostnames which are mostly in the
  dotted-quad form ('213.45.67.89').
<p class="Pp">IP::Country::Medium - recommended for lookups of hostnames which
    are mostly in the domain-name form ('www.yahoo.com'). Caches domain-name
    lookups.</p>
<p class="Pp">IP::Country::Slow - NOT RECOMMENDED. Only included for
    completeness. Prefers domain-name lookups to database lookups, which is an
    expensive strategy of no benefit.</p>
<p class="Pp">Geo::IP - wrapper around the geoip C libraries. Less portable. Not
    measurably faster than these native Perl modules. Paid subscription required
    for database updates.</p>
<p class="Pp">&lt;http://www.apnic.net&gt; - Asia pacific</p>
<p class="Pp">&lt;http://www.ripe.net&gt; - Europe</p>
<p class="Pp">&lt;http://www.arin.net&gt; - North America</p>
<p class="Pp">&lt;http://www.lacnic.net&gt; - Latin America</p>
<p class="Pp">&lt;http://www.afrinic.net&gt; - Africa and Indian Ocean</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (C) 2002-2005 Nigel Wetters Gourlay. All Rights Reserved.
<p class="Pp">NO WARRANTY. This module is free software; you can redistribute it
    and/or modify it under the same terms as Perl itself.</p>
<p class="Pp">Some parts of this software distribution are derived from the
    APNIC, LACNIC, ARIN, AFRINIC and RIPE databases (copyright details below). I
    am not a lawyer, so please direct questions about the RIR's licenses to
    them, not me.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="APNIC_conditions_of_use"><a class="permalink" href="#APNIC_conditions_of_use">APNIC
  conditions of use</a></h1>
The files are freely available for download and use on the condition that APNIC
  will not be held responsible for any loss or damage arising from the
  application of the information contained in these reports.
<p class="Pp">APNIC endeavours to the best of its ability to ensure the accuracy
    of these reports; however, APNIC makes no guarantee in this regard.</p>
<p class="Pp">In particular, it should be noted that these reports seek to
    indicate the country where resources were first allocated or assigned. It is
    not intended that these reports be considered as an authoritative statement
    of the location in which any specific resource may currently be in use.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ARIN_database_copyright"><a class="permalink" href="#ARIN_database_copyright">ARIN
  database copyright</a></h1>
Copyright (c) American Registry for Internet Numbers. All rights reserved.
<p class="Pp">The ARIN WHOIS data is for Internet operational or technical
    research purposes pertaining to Internet operations only. It may not be used
    for advertising, direct marketing, marketing research, or similar purposes.
    Use of the ARIN WHOIS data for these activities is explicitly forbidden.
    ARIN requests to be notified of any such activities or suspicions
  thereof.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RIPE_database_copyright"><a class="permalink" href="#RIPE_database_copyright">RIPE
  database copyright</a></h1>
The information in the RIPE Database is available to the public for agreed
  Internet operation purposes, but is under copyright. The copyright statement
  is:
<p class="Pp">&quot;Except for agreed Internet operational purposes, no part of
    this publication may be reproduced, stored in a retrieval system, or
    transmitted, in any form or by any means, electronic, mechanical, recording,
    or otherwise, without prior permission of the RIPE NCC on behalf of the
    copyright holders. Any use of this material to target advertising or similar
    activities is explicitly forbidden and may be prosecuted. The RIPE NCC
    requests to be notified of any such activities or suspicions
  thereof.&quot;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LACNIC_database_copyright"><a class="permalink" href="#LACNIC_database_copyright">LACNIC
  database copyright</a></h1>
Copyright (c) Latin American and Caribbean IP address Regional Registry. All
  rights reserved.
</section>
<section class="Sh">
<h1 class="Sh" id="AFRINIC_copyright"><a class="permalink" href="#AFRINIC_copyright">AFRINIC
  copyright</a></h1>
Seems to be the RIPE copyright. I'm sure they'll correct this in due course.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-05-15</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
