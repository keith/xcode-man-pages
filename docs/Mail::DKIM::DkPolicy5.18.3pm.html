<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Mail::DKIM::DkPolicy(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::DKIM::DkPolicy(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::DKIM::DkPolicy(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Mail::DKIM::DkPolicy - represents a DomainKeys Sender Signing
    Policy record</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">DomainKeys sender signing policies are described in
    RFC4870(historical). It is a record published in the message sender's (i.e.
    the person who transmitted the message) DNS that describes how they sign
    messages.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTORS"><a class="permalink" href="#CONSTRUCTORS">CONSTRUCTORS</a></h1>
<section class="Ss">
<h2 class="Ss"><i>fetch()</i> - fetch a sender signing policy from DNS</h2>
<pre>  my $policy = Mail::DKIM::DkPolicy-&gt;fetch(
                   Protocol =&gt; &quot;dns&quot;,
                   Sender =&gt; 'joe@example.org',
               );
</pre>
<p class="Pp">The following named arguments are accepted:</p>
<dl class="Bl-tag">
  <dt id="Protocol"><a class="permalink" href="#Protocol">Protocol</a></dt>
  <dd>always specify &quot;dns&quot;</dd>
  <dt id="Author"><a class="permalink" href="#Author">Author</a></dt>
  <dd>the &quot;author&quot; of the message for which policy is being checked.
      This is the first email address in the &quot;From&quot; header. According
      to RFC 2822, section 3.6.2, the &quot;From&quot; header lists who is
      responsible for writing the message.</dd>
  <dt id="Sender"><a class="permalink" href="#Sender">Sender</a></dt>
  <dd>the &quot;sender&quot; of the message for which policy is being checked.
      This is the first email address in the &quot;Sender&quot; header, or if
      there is not a &quot;Sender&quot; header, the &quot;From&quot; header.
      According to RFC 2822, section 3.6.2, the &quot;Sender&quot; header lists
      who is responsible for transmitting the message.</dd>
</dl>
<p class="Pp">Depending on what type of policy is being checked, both the Sender
    and Author fields may need to be specified.</p>
<p class="Pp">If a DNS error or timeout occurs, an exception is thrown.</p>
<p class="Pp">Otherwise, a policy object of some sort will be returned. If no
    policy is actually published, then the &quot;default policy&quot; will be
    returned. To check when this happens, use</p>
<p class="Pp"></p>
<pre>  my $is_default = $policy-&gt;is_implied_default_policy;
</pre>
</section>
<section class="Ss">
<h2 class="Ss"><i>new()</i> - construct a default policy object</h2>
<pre>  my $policy = Mail::DKIM::DkPolicy-&gt;new;
</pre>
</section>
<section class="Ss">
<h2 class="Ss"><i>parse()</i> - gets a policy object by parsing a string</h2>
<pre>  my $policy = Mail::DKIM::DkPolicy-&gt;parse(
                   String =&gt; &quot;o=~; t=y&quot;
               );
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss"><i>apply()</i> - apply the policy to the results of a DKIM
  verifier</h2>
<pre>  my $result = $policy-&gt;apply($dkim_verifier);
</pre>
<p class="Pp">The caller must provide an instance of Mail::DKIM::Verifier, one
    which has already been fed the message being verified.</p>
<p class="Pp">Possible results are:</p>
<dl class="Bl-tag">
  <dt id="accept"><a class="permalink" href="#accept">accept</a></dt>
  <dd>The message is approved by the sender signing policy.</dd>
  <dt id="reject"><a class="permalink" href="#reject">reject</a></dt>
  <dd>The message is rejected by the sender signing policy.</dd>
  <dt id="neutral"><a class="permalink" href="#neutral">neutral</a></dt>
  <dd>The message is neither approved nor rejected by the sender signing policy.
      It can be considered suspicious.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss"><i>flags()</i> - get or set the flags (t=) tag</h2>
<p class="Pp">A vertical-bar separated list of flags.</p>
</section>
<section class="Ss">
<h2 class="Ss"><i>is_implied_default_policy()</i> - is this policy implied?</h2>
<pre>  my $is_implied = $policy-&gt;is_implied_default_policy;
</pre>
<p class="Pp">If you fetch the policy for a particular domain, but that domain
    does not have a policy published, then the &quot;default policy&quot; is in
    effect. Use this method to detect when that happens.</p>
</section>
<section class="Ss">
<h2 class="Ss"><i>location()</i> - where the policy was fetched from</h2>
<p class="Pp">DomainKeys policies only have per-domain policies, so this will be
    the domain where the policy was published.</p>
<p class="Pp">If nothing is published for the domain, and the default policy was
    returned instead, the location will be
    <span class="Li">&quot;undef&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss"><i>note()</i> - get or set the human readable notes (n=) tag</h2>
<p class="Pp">Human readable notes regarding the record. Undef if no notes
    specified.</p>
</section>
<section class="Ss">
<h2 class="Ss"><i>policy()</i> - get or set the outbound signing policy (o=)
  tag</h2>
<pre>  my $sp = $policy-&gt;policy;
</pre>
<p class="Pp">Outbound signing policy for the entity. Possible values are:</p>
<dl class="Bl-tag">
  <dt>&quot;~&quot;</dt>
  <dd>The default. The domain may sign some (but not all) email.</dd>
  <dt>&quot;-&quot;</dt>
  <dd>The domain signs all email.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss"><i>signall()</i> - true if policy is &quot;-&quot;</h2>
</section>
<section class="Ss">
<h2 class="Ss"><i>testing()</i> - checks the testing flag</h2>
<pre>  my $testing = $policy-&gt;testing;
</pre>
<p class="Pp">If nonzero, the testing flag is set on the signing policy, and the
    verify should not consider a message suspicious based on this policy.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Jason Long, &lt;jlong@messiah.edu&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">Copyright (C) 2006-2009 by Messiah College</p>
<p class="Pp">This library is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself, either Perl version 5.8.6 or,
    at your option, any later version of Perl 5 you may have available.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2012-11-28</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
