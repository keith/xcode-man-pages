<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Net::LDAP(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::LDAP(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Net::LDAP(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Net::LDAP - Lightweight Directory Access Protocol
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
 use Net::LDAP;

 $ldap = Net::LDAP-&gt;new( 'ldap.example.com' )  or  die &quot;$@&quot;;

 $mesg = $ldap-&gt;bind;                         # anonymous bind

 $mesg-&gt;code  and  die $mesg-&gt;error;          # check for errors

 $srch = $ldap-&gt;search( base   =&gt; &quot;c=US&quot;,     # perform a search
                        filter =&gt; &quot;(&amp;(sn=Barr)(o=Texas Instruments))&quot;
                      );

 $srch-&gt;code  and  die $srch-&gt;error;          # check for errors

 foreach $entry ($srch-&gt;entries) { $entry-&gt;dump; }

 $mesg = $ldap-&gt;unbind;                       # take down session


 $ldap = Net::LDAP-&gt;new( 'ldaps://ldap.example.com' )  or  die &quot;$@&quot;;

 # simple bind with DN and password
 $mesg = $ldap-&gt;bind( 'cn=root, o=University of Michigan, c=us',
                      password =&gt; 'secret'
                    );

 $mesg-&gt;code  and  die $mesg-&gt;error;          # check for errors

 $result = $ldap-&gt;add( 'cn=Barbara Jensen, o=University of Michigan, c=US',
                       attrs =&gt; [
                         cn          =&gt; ['Barbara Jensen', 'Barbs Jensen'],
                         sn          =&gt; 'Jensen',
                         mail        =&gt; 'b.jensen@umich.edu',
                         objectclass =&gt; ['top', 'person',
                                         'organizationalPerson',
                                         'inetOrgPerson' ],
                       ]
                     );

 $result-&gt;code  and  warn &quot;failed to add entry: &quot;, $result-&gt;error;

 $mesg = $ldap-&gt;unbind;                       # take down session
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>Net::LDAP</b> is a collection of modules that implements a LDAP services API
  for Perl programs. The module may be used to search directories or perform
  maintenance functions such as adding, deleting or modifying entries.
<p class="Pp">This document assumes that the reader has some knowledge of the
    LDAP protocol.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTOR"><a class="permalink" href="#CONSTRUCTOR">CONSTRUCTOR</a></h1>
<dl class="Bl-tag">
  <dt>new ( HOST, OPTIONS )</dt>
  <dd>Creates a new <b>Net::LDAP</b> object and opens a connection to the named
      host.
    <p class="Pp"><span class="Li">&quot;HOST&quot;</span> may be a host name or
        an IP address. TCP port may be specified after the host name followed by
        a colon (such as localhost:10389). The default TCP port for LDAP is
      389.</p>
    <p class="Pp">You can also specify a URI, such as 'ldaps://127.0.0.1:666' or
        'ldapi://%2fvar%2flib%2fldap_sock'. Note that '%2f's in the LDAPI socket
        path will be translated into '/'. This is to support LDAP query options
        like base, search etc. although the query part of the URI will be
        ignored in this context. If port was not specified in the URI, the
        default is either 389 or 636 for 'LDAP' and 'LDAPS' schemes
        respectively.</p>
    <p class="Pp"><span class="Li">&quot;HOST&quot;</span> may also be a
        reference to an array of hosts, host-port pairs or URIs to try. Each
        will be tried in order until a connection is made. Only when all have
        failed will the result of <span class="Li">&quot;undef&quot;</span> be
        returned.</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>port =&gt; N</dt>
  <dd>Port to connect to on the remote server. May be overridden by
      <span class="Li">&quot;HOST&quot;</span>.</dd>
  <dt>scheme =&gt; 'ldap' | 'ldaps' | 'ldapi'</dt>
  <dd>Connection scheme to use when not using an URI as
      <span class="Li">&quot;HOST&quot;</span>. (Default: ldap)</dd>
  <dt>keepalive =&gt; 1</dt>
  <dd>If given, set the socket's SO_KEEPALIVE option depending on the Boolean
      value of the option. (Default: use system default)
    <p class="Pp">Failures in changing the socket's SO_KEEPALIVE option are
        ignored.</p>
  </dd>
  <dt>timeout =&gt; N</dt>
  <dd>Timeout passed to IO::Socket when connecting the remote server. (Default:
      120)</dd>
  <dt>multihomed =&gt; N</dt>
  <dd>Will be passed to IO::Socket as the
      <span class="Li">&quot;MultiHomed&quot;</span> parameter when connecting
      to the remote server</dd>
  <dt>localaddr =&gt; HOST</dt>
  <dd>Will be passed to IO::Socket as the
      <span class="Li">&quot;LocalAddr&quot;</span> parameter, which sets the
      client's IP address (as opposed to the server's IP address.)</dd>
  <dt>debug =&gt; N</dt>
  <dd>Set the debug level. See the debug method for details.</dd>
  <dt>async =&gt; 1</dt>
  <dd>Perform all operations asynchronously.</dd>
  <dt>onerror =&gt; 'die' | 'warn' | 'undef' | sub { ... }</dt>
  <dd>In synchronous mode, change what happens when an error is detected.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>'die'</dt>
  <dd>Net::LDAP will croak whenever an error is detected.</dd>
  <dt>'warn'</dt>
  <dd>Net::LDAP will warn whenever an error is detected.</dd>
  <dt>'undef'</dt>
  <dd>Net::LDAP will warn whenever an error is detected and
      <span class="Li">&quot;-w&quot;</span> is in effect. The method that was
      called will return <span class="Li">&quot;undef&quot;</span>.
    <p class="Pp">Note this value is the string <span class="Li">'undef'</span>,
        not the <span class="Li">&quot;undef&quot;</span> value.</p>
  </dd>
  <dt>sub { ... }</dt>
  <dd>The given sub will be called in a scalar context with a single argument,
      the result message. The value returned will be the return value for the
      method that was called.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>version =&gt; N</dt>
  <dd>Set the protocol version being used (default is LDAPv3). This is useful if
      you want to talk to an old server and therefore have to use LDAPv2.</dd>
  <dt>raw =&gt; REGEX</dt>
  <dd>Use REGEX to denote the names of attributes that are to be considered
      binary in search results.
    <p class="Pp">When this option is given, Net::LDAP converts all values of
        attributes not matching this REGEX into Perl UTF-8 strings so that the
        regular Perl operators (pattern matching, ...) can operate as one
        expects even on strings with international characters.</p>
    <p class="Pp">If this option is not given, attribute values are treated as
        byte strings.</p>
    <p class="Pp">Example: raw =&gt; qr/(?i:^jpegPhoto|;binary)/</p>
  </dd>
  <dt>inet4 =&gt; N</dt>
  <dd></dd>
  <dt>inet6 =&gt; N</dt>
  <dd>Try to connect to the server using the specified IP protocol only, i.e.
      either IPv4 or IPv6. If the protocol selected is not supported, connecting
      will fail.
    <p class="Pp">The default is to use any of the two protocols.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  $ldap = Net::LDAP-&gt;new( 'remote.host', async =&gt; 1 );
</pre>
<p class="Pp">LDAPS connections have some extra valid options, see the start_tls
    method for details. Note the default port for LDAPS is 636, and the default
    value for 'sslversion' is the value used as default by IO::Socket::SSL.</p>
<p class="Pp">For LDAPI connections, HOST is actually the location of a UNIX
    domain socket to connect to. The default location is '/var/run/ldapi'.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
Each of the following methods take as arguments some number of fixed parameters
  followed by options, these options are passed in a named fashion, for example
<p class="Pp"><span class="Li"></span></p>
<pre>
  $mesg = $ldap-&gt;bind( &quot;cn=me,o=example&quot;, password =&gt; &quot;mypasswd&quot;);
</pre>
<p class="Pp">The return value from these methods is an object derived from the
    Net::LDAP::Message class. The methods of this class allow you to examine the
    status of the request.</p>
<dl class="Bl-tag">
  <dt>abandon ( ID, OPTIONS )</dt>
  <dd>Abandon a previously issued request.
      <span class="Li">&quot;ID&quot;</span> may be a number or an object which
      is a sub-class of Net::LDAP::Message, returned from a previous method
      call.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  $res = $ldap-&gt;search( @search_args );

  $mesg = $ldap-&gt;abandon( $res ); # This could be written as $res-&gt;abandon
</pre>
</div>
<dl class="Bl-tag">
  <dt>add ( DN, OPTIONS )</dt>
  <dd>Add a new entry to the directory. <span class="Li">&quot;DN&quot;</span>
      can be either a Net::LDAP::Entry object or a string.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>attrs =&gt; [ ATTR =&gt; VALUE, ... ]</dt>
  <dd><span class="Li">&quot;VALUE&quot;</span> should be a string if only a
      single value is wanted, or a reference to an array of strings if multiple
      values are wanted.
    <p class="Pp">This argument is not used if
        <span class="Li">&quot;DN&quot;</span> is a Net::LDAP::Entry object.</p>
  </dd>
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  # $entry is an object of class Net::LDAP::Entry
  $mesg = $ldap-&gt;add( $entry );

  $mesg = $ldap-&gt;add( $dn,
                      attrs =&gt; [
                        name  =&gt; 'Graham Barr',
                        attr  =&gt; 'value1',
                        attr  =&gt; 'value2',
                        multi =&gt; [qw(value1 value2)]
                      ]
                    );
</pre>
</div>
<dl class="Bl-tag">
  <dt>bind ( DN, OPTIONS )</dt>
  <dd>Bind (log in) to the server. <span class="Li">&quot;DN&quot;</span> is the
      DN to bind with. An anonymous bind may be done by calling bind without any
      arguments.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below</dd>
  <dt>noauth | anonymous =&gt; 1</dt>
  <dd>Bind without any password. The value passed with this option is
    ignored.</dd>
  <dt>password =&gt; PASSWORD</dt>
  <dd>Bind with the given password.</dd>
  <dt>sasl =&gt; SASLOBJ</dt>
  <dd>Bind using a SASL mechanism. The argument given should be a sub-class of
      Authen::SASL or an Authen::SASL client connection by calling
      <span class="Li">&quot;client_new&quot;</span> on an Authen::SASL object.
    <p class="Pp">If passed an Authen::SASL object then
        <span class="Li">&quot;client_new&quot;</span> will be called to create
        a client connection object. The hostname passed by
        <span class="Li">&quot;Net::LDAP&quot;</span> to
        <span class="Li">&quot;client_new&quot;</span> can be set using the
        <span class="Li">&quot;sasl_host&quot;</span> option below. If this is
        not correct for your environment, consider calling
        <span class="Li">&quot;client_new&quot;</span> yourself and passing the
        client connection object as
      <span class="Li">&quot;SASLOBJ&quot;</span>.</p>
  </dd>
  <dt>sasl_host =&gt; SASLHOST</dt>
  <dd>When binding using SASL, allow the hostname used in the SASL communication
      to differ from the hostname connected to.
    <p class="Pp">If <span class="Li">&quot;SASLHOST&quot;</span> evaluates to
        TRUE, then it is used as the SASL hostname.</p>
    <p class="Pp">If it evaluates to FALSE, then the value is determined by
        calling <span class="Li">&quot;peerhost&quot;</span> on the socket. In
        older versions of Net::LDAP this was the standard behaviour, but it
        turned out to cause more trouble than it fixed.</p>
    <p class="Pp">When the option is not given, the SASL host name used defaults
        to the host name / IP address taken from the
        <span class="Li">&quot;HOST&quot;</span> parameter when connecting.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  $mesg = $ldap-&gt;bind; # Anonymous bind

  $mesg = $ldap-&gt;bind( $dn, password =&gt; $password );

  # $sasl is an object of class Authen::SASL
  $mesg = $ldap-&gt;bind( $dn, sasl =&gt; $sasl, version =&gt; 3 );
</pre>
</div>
<dl class="Bl-tag">
  <dt>compare ( DN, OPTIONS )</dt>
  <dd>Compare values in an attribute in the entry given by
      <span class="Li">&quot;DN&quot;</span> on the server.
      <span class="Li">&quot;DN&quot;</span> may be a string or a
      Net::LDAP::Entry object.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>attr =&gt; ATTR</dt>
  <dd>The name of the attribute to compare.</dd>
  <dt>value =&gt; VALUE</dt>
  <dd>The value to compare with.</dd>
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below.</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  $mesg = $ldap-&gt;compare( $dn,
                          attr  =&gt; 'cn',
                          value =&gt; 'Graham Barr'
                        );
</pre>
</div>
<dl class="Bl-tag">
  <dt>delete ( DN, OPTIONS )</dt>
  <dd>Delete the entry given by <span class="Li">&quot;DN&quot;</span> from the
      server. <span class="Li">&quot;DN&quot;</span> may be a string or a
      Net::LDAP::Entry object.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below.</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 $mesg = $ldap-&gt;delete( $dn );
</pre>
</div>
<dl class="Bl-tag">
  <dt>moddn ( DN, OPTIONS )</dt>
  <dd>Rename the entry given by <span class="Li">&quot;DN&quot;</span> on the
      server. <span class="Li">&quot;DN&quot;</span> may be a string or a
      Net::LDAP::Entry object.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>newrdn =&gt; RDN</dt>
  <dd>This value should be a new RDN to assign to
      <span class="Li">&quot;DN&quot;</span>.</dd>
  <dt>deleteoldrdn =&gt; 1</dt>
  <dd>This option should be passed if the existing RDN is to be deleted.</dd>
  <dt>newsuperior =&gt; NEWDN</dt>
  <dd>If given this value should be the DN of the new superior for
      <span class="Li">&quot;DN&quot;</span>.</dd>
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below.</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 $mesg = $ldap-&gt;moddn( $dn, newrdn =&gt; 'cn=Graham Barr' );
</pre>
</div>
<dl class="Bl-tag">
  <dt>modify ( DN, OPTIONS )</dt>
  <dd>Modify the contents of the entry given by
      <span class="Li">&quot;DN&quot;</span> on the server.
      <span class="Li">&quot;DN&quot;</span> may be a string or a
      Net::LDAP::Entry object.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>add =&gt; { ATTR =&gt; VALUE, ... }</dt>
  <dd>Add more attributes or values to the entry.
      <span class="Li">&quot;VALUE&quot;</span> should be a string if only a
      single value is wanted in the attribute, or a reference to an array of
      strings if multiple values are wanted.
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;modify( $dn,
    add =&gt; {
      description =&gt; 'List of members',    # Add description attribute
      member      =&gt; [
        'cn=member1,ou=people,dc=example,dc=com',    # Add to attribute
        'cn=member2,ou=people,dc=example,dc=com',
      ]
    }
  );
    </pre>
  </dd>
  <dt>delete =&gt; [ ATTR, ... ]</dt>
  <dd>Delete complete attributes from the entry.
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;modify( $dn,
    delete =&gt; ['member','description'] # Delete attributes
  );
    </pre>
  </dd>
  <dt>delete =&gt; { ATTR =&gt; VALUE, ... }</dt>
  <dd>Delete individual values from an attribute.
      <span class="Li">&quot;VALUE&quot;</span> should be a string if only a
      single value is being deleted from the attribute, or a reference to an
      array of strings if multiple values are being deleted.
    <p class="Pp">If <span class="Li">&quot;VALUE&quot;</span> is a reference to
        an empty array or all existing values of the attribute are being
        deleted, then the attribute will be deleted from the entry.</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;modify( $dn,
    delete =&gt; {
      description =&gt; 'List of members',
      member      =&gt; [
        'cn=member1,ou=people,dc=example,dc=com',    # Remove members
        'cn=member2,ou=people,dc=example,dc=com',
      ],
      seeAlso =&gt; [],   # Remove attribute
    }
  );
    </pre>
  </dd>
  <dt>replace =&gt; { ATTR =&gt; VALUE, ... }</dt>
  <dd>Replace any existing values in each given attribute with
      <span class="Li">&quot;VALUE&quot;</span>.
      <span class="Li">&quot;VALUE&quot;</span> should be a string if only a
      single value is wanted in the attribute, or a reference to an array of
      strings if multiple values are wanted. A reference to an empty array will
      remove the entire attribute. If the attribute does not already exist in
      the entry, it will be created.
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;modify( $dn,
    replace =&gt; {
      description =&gt; 'New List of members', # Change the description
      member      =&gt; [ # Replace whole list with these
        'cn=member1,ou=people,dc=example,dc=com',
        'cn=member2,ou=people,dc=example,dc=com',
      ],
      seeAlso =&gt; [],   # Remove attribute
    }
  );
    </pre>
  </dd>
  <dt>increment =&gt; { ATTR =&gt; VALUE, ... }</dt>
  <dd>Atomically increment the existing value in each given attribute by the
      provided <span class="Li">&quot;VALUE&quot;</span>. The attributes need to
      have integer syntax, or be otherwise &quot;incrementable&quot;. Note this
      will only work if the server advertises support for
      LDAP_FEATURE_MODIFY_INCREMENT. Use &quot;supported_feature&quot; in
      Net::LDAP::RootDSE to check this.
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;modify( $dn,
    increment =&gt; {
      uidNumber =&gt; 1 # increment uidNumber by 1
    }
  );
    </pre>
  </dd>
  <dt>changes =&gt; [ OP =&gt; [ ATTR =&gt; VALUE ], ... ]</dt>
  <dd>This is an alternative to <b>add</b>, <b>delete</b>, <b>replace</b> and
      <b>increment</b> where the whole operation can be given in a single
      argument. <span class="Li">&quot;OP&quot;</span> should be <b>add</b>,
      <b>delete</b>, <b>replace</b> or <b>increment</b>.
      <span class="Li">&quot;VALUE&quot;</span> should be either a string or a
      reference to an array of strings, as before.
    <p class="Pp">Use this form if you want to control the order in which the
        operations will be performed.</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;modify( $dn,
    changes =&gt; [
      add =&gt; [
        description =&gt; 'A description',
        member      =&gt; $newMember,
      ],
      delete =&gt; [
        seeAlso =&gt; [],
      ],
      add =&gt; [
        anotherAttribute =&gt; $value,
      ],
    ]
  );
    </pre>
  </dd>
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below.</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 $mesg = $ldap-&gt;modify( $dn, add =&gt; { sn =&gt; 'Barr' } );

 $mesg = $ldap-&gt;modify( $dn, delete =&gt; [qw(faxNumber)] );

 $mesg = $ldap-&gt;modify( $dn, delete =&gt; { 'telephoneNumber' =&gt; '911' } );

 $mesg = $ldap-&gt;modify( $dn, replace =&gt; { 'mail' =&gt; 'gbarr@pobox.com' } );

 $mesg = $ldap-&gt;modify( $dn,
                        changes =&gt; [
                            # add sn=Barr
                          add     =&gt; [ sn =&gt; 'Barr' ],
                            # delete all fax numbers
                          delete  =&gt; [ faxNumber =&gt; []],
                            # delete phone number 911
                          delete  =&gt; [ telephoneNumber =&gt; ['911']],
                            # change email address
                          replace =&gt; [ mail =&gt; 'gbarr@pobox.com']
                        ]
                      );
</pre>
</div>
<dl class="Bl-tag">
  <dt>search ( OPTIONS )</dt>
  <dd>Search the directory using a given filter. This can be used to read
      attributes from a single entry, from entries immediately below a
      particular entry, or a whole subtree of entries.
    <p class="Pp">The result is an object of class Net::LDAP::Search.</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>base =&gt; DN</dt>
  <dd>The DN that is the base object entry relative to which the search is to be
      performed.</dd>
  <dt>scope =&gt; 'base' | 'one' | 'sub' | 'subtree' | 'children'</dt>
  <dd>By default the search is performed on the whole tree below the specified
      base object. This maybe changed by specifying a
      <span class="Li">&quot;scope&quot;</span> parameter with one of the
      following values:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>base</dt>
  <dd>Search only the base object.</dd>
  <dt>one</dt>
  <dd>Search the entries immediately below the base object.</dd>
  <dt>sub</dt>
  <dd></dd>
  <dt>subtree</dt>
  <dd>Search the whole tree below (and including) the base object. This is the
      default.</dd>
  <dt>children</dt>
  <dd>Search the whole subtree below the base object, excluding the base object
      itself.
    <p class="Pp">Note: <i>children</i> scope requires LDAPv3 subordinate
        feature extension.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>deref =&gt; 'never' | 'search' | 'find' | 'always'</dt>
  <dd>By default aliases are dereferenced to locate the base object for the
      search, but not when searching subordinates of the base object. This may
      be changed by specifying a <span class="Li">&quot;deref&quot;</span>
      parameter with one of the following values:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>never</dt>
  <dd>Do not dereference aliases in searching or in locating the base object of
      the search.</dd>
  <dt>search</dt>
  <dd>Dereference aliases in subordinates of the base object in searching, but
      not in locating the base object of the search.</dd>
  <dt>find</dt>
  <dd>Dereference aliases in locating the base object of the search, but not
      when searching subordinates of the base object. This is the default.</dd>
  <dt>always</dt>
  <dd>Dereference aliases both in searching and in locating the base object of
      the search.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>sizelimit =&gt; N</dt>
  <dd>A sizelimit that restricts the maximum number of entries to be returned as
      a result of the search. A value of 0, and the default, means that no
      restriction is requested. Servers may enforce a maximum number of entries
      to return.</dd>
  <dt>timelimit =&gt; N</dt>
  <dd>A timelimit that restricts the maximum time (in seconds) allowed for a
      search. A value of 0 (the default), means that no timelimit will be
      requested.</dd>
  <dt>typesonly =&gt; 1</dt>
  <dd>Only attribute types (no values) should be returned. Normally attribute
      types and values are returned.</dd>
  <dt>filter =&gt; FILTER</dt>
  <dd>A filter that defines the conditions an entry in the directory must meet
      in order for it to be returned by the search. This may be a string or a
      Net::LDAP::Filter object. Values inside filters may need to be escaped to
      avoid security problems; see Net::LDAP::Filter for a definition of the
      filter format, including the escaping rules.</dd>
  <dt>attrs =&gt; [ ATTR, ... ]</dt>
  <dd>A list of attributes to be returned for each entry that matches the search
      filter.
    <p class="Pp">If not specified, then the server will return the attributes
        that are specified as accessible by default given your bind
      credentials.</p>
    <p class="Pp">Certain additional attributes such as
        &quot;createTimestamp&quot; and other operational attributes may also be
        available for the asking:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;search( ... ,
                         attrs =&gt; ['createTimestamp']
                       );
    </pre>
    <p class="Pp">To retrieve the default attributes and additional ones, use
        '*'.</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;search( ... ,
                         attrs =&gt; ['*', 'createTimestamp']
                       );
    </pre>
    <p class="Pp">To retrieve no attributes (the server only returns the DNs of
        matching entries), use '1.1':</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  $mesg = $ldap-&gt;search( ... ,
                         attrs =&gt; ['1.1']
                       );
    </pre>
  </dd>
  <dt>control =&gt; CONTROL</dt>
  <dd></dd>
  <dt>control =&gt; [ CONTROL, ... ]</dt>
  <dd>See &quot;CONTROLS&quot; below.</dd>
  <dt>callback =&gt; CALLBACK</dt>
  <dd>See &quot;CALLBACKS&quot; below.</dd>
  <dt>raw =&gt; REGEX</dt>
  <dd>Use REGEX to denote the names of attributes that are to be considered
      binary in search results.
    <p class="Pp">When this option is given, Net::LDAP converts all values of
        attributes not matching this REGEX into Perl UTF-8 strings so that the
        regular Perl operators (pattern matching, ...) can operate as one
        expects even on strings with international characters.</p>
    <p class="Pp">If this option is not given, attribute values are treated as
        byte strings.</p>
    <p class="Pp">The value provided here overwrites the value inherited from
        the constructor.</p>
    <p class="Pp">Example: raw =&gt; qr/(?i:^jpegPhoto|;binary)/</p>
  </dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 $mesg = $ldap-&gt;search(
                        base   =&gt; $base_dn,
                        scope  =&gt; 'sub',
                        filter =&gt; '(|(objectclass=rfc822mailgroup)(sn=jones))'
                      );

 Net::LDAP::LDIF-&gt;new( \*STDOUT,&quot;w&quot; )-&gt;write( $mesg-&gt;entries );
</pre>
</div>
<dl class="Bl-tag">
  <dt>start_tls ( OPTIONS )</dt>
  <dd>Calling this method will convert the existing connection to using
      Transport Layer Security (TLS), which provides an encrypted connection.
      This is <i>only</i> possible if the connection uses LDAPv3, and requires
      that the server advertises support for LDAP_EXTENSION_START_TLS. Use
      &quot;supported_extension&quot; in Net::LDAP::RootDSE to check this.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>verify =&gt; 'none' | 'optional' | 'require'</dt>
  <dd>How to verify the server's certificate:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>none</dt>
  <dd>The server may provide a certificate but it will not be checked - this may
      mean you are be connected to the wrong server</dd>
  <dt>optional</dt>
  <dd>Verify only when the server offers a certificate</dd>
  <dt>require</dt>
  <dd>The server must provide a certificate, and it must be valid.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">If you set verify to optional or require, you must also set either
    cafile or capath. The most secure option is <b>require</b>.</p>
</div>
<dl class="Bl-tag">
  <dt>sslversion =&gt; 'sslv2' | 'sslv3' | 'sslv23' | 'tlsv1' | 'tlsv1_1' |
    'tlsv1_2'</dt>
  <dd>This defines the version of the SSL/TLS protocol to use. Default is to use
      the value that IO::Socket::SSL uses as default.
    <p class="Pp">See &quot;SSL_version&quot; in IO::Socket::SSL for more
        details.</p>
  </dd>
  <dt>sslserver =&gt; SSLHOST</dt>
  <dd>Allow changing the server name to use in certificate hostname verification
      in case the target hostname does not match the LDAP server's certificate.
      If not given it defaults to the name of the HOST connected to.
    <p class="Pp">See &quot;SSL_verifycn_name&quot; in IO::Socket::SSL for more
        details.</p>
  </dd>
  <dt>ciphers =&gt; CIPHERS</dt>
  <dd>Specify which subset of cipher suites are permissible for this connection,
      using the standard OpenSSL string format. The default behavior is to keep
      the decision on the underlying cryptographic library.</dd>
  <dt>clientcert =&gt; '/path/to/cert.pem'</dt>
  <dd></dd>
  <dt>clientkey =&gt; '/path/to/key.pem'</dt>
  <dd></dd>
  <dt>keydecrypt =&gt; sub { ... }</dt>
  <dd>If you want to use the client to offer a certificate to the server for SSL
      authentication (which is not the same as for the LDAP Bind operation) then
      set clientcert to the user's certificate file, and clientkey to the user's
      private key file. These files must be in PEM format.
    <p class="Pp">If the private key is encrypted (highly recommended) then
        keydecrypt should be a subroutine that returns the decrypting key. For
        example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 $ldap = Net::LDAP-&gt;new( 'myhost.example.com', version =&gt; 3 );
 $mesg = $ldap-&gt;start_tls(
                           verify =&gt; 'require',
                           clientcert =&gt; 'mycert.pem',
                           clientkey =&gt; 'mykey.pem',
                           keydecrypt =&gt; sub { 'secret'; },
                           capath =&gt; '/usr/local/cacerts/'
                         );
    </pre>
  </dd>
  <dt>capath =&gt; '/path/to/servercerts/'</dt>
  <dd></dd>
  <dt>cafile =&gt; '/path/to/servercert.pem'</dt>
  <dd>When verifying the server's certificate, either set capath to the pathname
      of the directory containing CA certificates, or set cafile to the filename
      containing the certificate of the CA who signed the server's certificate.
      These certificates must all be in PEM format.
    <p class="Pp">The directory in 'capath' must contain certificates named
        using the hash value of the certificates' subject names. To generate
        these names, use OpenSSL like this in Unix:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    ln -s cacert.pem `openssl x509 -hash -noout &lt; cacert.pem`.0
    </pre>
    <p class="Pp">(assuming that the certificate of the CA is in
      cacert.pem.)</p>
  </dd>
  <dt>checkcrl =&gt; 1</dt>
  <dd>If capath has been configured, then it will also be searched for
      certificate revocation lists (CRLs) when verifying the server's
      certificate. The CRLs' names must follow the form <b>hash</b>.r<b>num</b>
      where <b>hash</b> is the hash over the issuer's DN and <b>num</b> is a
      number starting with 0.
    <p class="Pp">See &quot;SSL_check_crl&quot; in IO::Socket::SSL for further
        information.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>unbind ( )</dt>
  <dd>The unbind method does not take any parameters and will unbind you from
      the server. Some servers may allow you to re-bind or perform other
      operations after unbinding. If you wish to switch to another set of
      credentials while continuing to use the same connection, re-binding with
      another DN and password, without unbind-ing, will generally work.
    <p class="Pp"><b>Example</b></p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 $mesg = $ldap-&gt;unbind;
    </pre>
  </dd>
  <dt>done ( )</dt>
  <dd>Convenience alias for <span class="Li">&quot;unbind()&quot;</span>, named
      after the clean-up method of Net::LDAP::LDIF.</dd>
</dl>
<p class="Pp">The following methods are for convenience, and do not return
    <span class="Li">&quot;Net::LDAP::Message&quot;</span> objects.</p>
<dl class="Bl-tag">
  <dt>async ( VALUE )</dt>
  <dd>If <span class="Li">&quot;VALUE&quot;</span> is given the async mode will
      be set. The previous value will be returned. The value is <i>true</i> if
      LDAP operations are being performed asynchronously.</dd>
  <dt>certificate ( )</dt>
  <dd>Returns an X509_Certificate object containing the server's certificate.
      See the IO::Socket::SSL documentation for information about this class.
    <p class="Pp">For example, to get the subject name (in a peculiar
        OpenSSL-specific format, different from RFC 1779 and RFC 4514) from the
        server's certificate, do this:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    print &quot;Subject DN: &quot; . $ldaps-&gt;certificate-&gt;subject_name . &quot;\n&quot;;
    </pre>
  </dd>
  <dt>cipher ( )</dt>
  <dd>Returns the cipher mode being used by the connection, in the string format
      used by OpenSSL.</dd>
  <dt>debug ( VALUE )</dt>
  <dd>If <span class="Li">&quot;VALUE&quot;</span> is given the debug bit-value
      will be set. The previous value will be returned. Debug output will be
      sent to <span class="Li">&quot;STDERR&quot;</span>. The bits of this value
      are:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 1   Show outgoing packets (using asn_hexdump).
 2   Show incoming packets (using asn_hexdump).
 4   Show outgoing packets (using asn_dump).
 8   Show incoming packets (using asn_dump).
    </pre>
    <p class="Pp">The default value is 0.</p>
  </dd>
  <dt>disconnect ( )</dt>
  <dd>Disconnect from the server</dd>
  <dt>root_dse ( OPTIONS )</dt>
  <dd>The root_dse method retrieves cached information from the server's
      rootDSE.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>attrs =&gt; [ ATTR, ... ]</dt>
  <dd>A reference to a list of attributes to be returned. If not specified, then
      the following attributes will be requested
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  subschemaSubentry
  namingContexts
  altServer
  supportedExtension
  supportedFeatures
  supportedControl
  supportedSASLMechanisms
  supportedLDAPVersion
    </pre>
  </dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">The result is an object of class Net::LDAP::RootDSE.</p>
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 my $root = $ldap-&gt;root_dse;
 # get naming Context
 $root-&gt;get_value( 'namingContexts', asref =&gt; 1 );
 # get supported LDAP versions
 $root-&gt;supported_version;
</pre>
<p class="Pp">As the root DSE may change in certain circumstances - for instance
    when you change the connection using start_tls - you should always use the
    root_dse method to return the most up-to-date copy of the root DSE.</p>
</div>
<dl class="Bl-tag">
  <dt>schema ( OPTIONS )</dt>
  <dd>Read schema information from the server.
    <p class="Pp">The result is an object of class Net::LDAP::Schema. Read this
        documentation for further information about methods that can be
        performed with this object.</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>dn =&gt; DN</dt>
  <dd>If a DN is supplied, it will become the base object entry from which the
      search for schema information will be conducted. If no DN is supplied the
      base object entry will be determined from the rootDSE entry.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp"><b>Example</b></p>
<p class="Pp"><span class="Li"></span></p>
<pre>
 my $schema = $ldap-&gt;schema;
 # get objectClasses
 @ocs = $schema-&gt;all_objectclasses;
 # Get the attributes
 @atts = $schema-&gt;all_attributes;
</pre>
</div>
<dl class="Bl-tag">
  <dt>sasl ( )</dt>
  <dd>Returns the <span class="Li">&quot;Authen::SASL&quot;</span> object
      associated with the LDAP object, or
      <span class="Li">&quot;undef&quot;</span> if there isn't.</dd>
  <dt>socket ( OPTIONS )</dt>
  <dd>Returns the underlying socket object being used.
    <p class="Pp">The exact object type returned depends on whether SASL layers
        are established. Without SASL layers the result is always an
        <span class="Li">&quot;IO::Socket&quot;</span> object; with SASL layers
        the outcome depends on the options given:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>sasl_layer =&gt; FLAG</dt>
  <dd>This option is only relevant if SASL layers are established.
    <p class="Pp">If it it missing or if is set to a TRUE value, then the SASL
        layer handle is returned. Depending on the SASL library used, the object
        returned is not necessarily an
        <span class="Li">&quot;IO::Socket&quot;</span> object.</p>
    <p class="Pp">If it exists, but is set to a value evaluating to FALSE, then
        the base <span class="Li">&quot;IO::Socket&quot;</span> object
        underneath the SASL layer is returned.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>host ( )</dt>
  <dd>Returns the host to which the connection was established. For LDAPI
      connections the socket path is returned.</dd>
  <dt>port ( )</dt>
  <dd>Returns the port connected to or <span class="Li">&quot;undef&quot;</span>
      in case of LDAPI connections.</dd>
  <dt>uri ( )</dt>
  <dd>Returns the URI connected to.
    <p class="Pp">As the value returned is that element of the constructor's
        HOST argument with which the connection was established this may or may
        not be a legal URI.</p>
  </dd>
  <dt>scheme ( )</dt>
  <dd>Returns the scheme of the connection. One of <i>ldap</i>, <i>ldaps</i> or
      <i>ldapi</i>.</dd>
  <dt>sync ( MESG )</dt>
  <dd>Wait for a given <span class="Li">&quot;MESG&quot;</span> request to be
      completed by the server. If no <span class="Li">&quot;MESG&quot;</span> is
      given, then wait for all outstanding requests to be completed.
    <p class="Pp">Returns an error code defined in Net::LDAP::Constant.</p>
  </dd>
  <dt>process ( MESG )</dt>
  <dd>Process any messages that the server has sent, but do not block. If
      <span class="Li">&quot;MESG&quot;</span> is specified then return as soon
      as <span class="Li">&quot;MESG&quot;</span> has been processed.
    <p class="Pp">Returns an error code defined in Net::LDAP::Constant.</p>
  </dd>
  <dt>version ( )</dt>
  <dd>Returns the version of the LDAP protocol that is being used.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CONTROLS"><a class="permalink" href="#CONTROLS">CONTROLS</a></h1>
Many of the methods described above accept a control option. This allows the
  user to pass controls to the server as described in LDAPv3.
<p class="Pp">A control is a reference to a HASH and should contain the three
    elements below. If any of the controls are blessed then the method
    <span class="Li">&quot;to_asn&quot;</span> will be called which should
    return a reference to a HASH containing the three elements described
  below.</p>
<p class="Pp">For most purposes Net::LDAP::Control objects are the easiest way
    to generate controls.</p>
<dl class="Bl-tag">
  <dt>type =&gt; OID</dt>
  <dd>This element must be present and is the name of the type of control being
      requested.</dd>
  <dt>critical =&gt; FLAG</dt>
  <dd>critical is optional and should be a Boolean value, if it is not specified
      then it is assumed to be <i>false</i>.</dd>
  <dt>value =&gt; VALUE</dt>
  <dd>If the control being requested requires a value then this element should
      hold the value for the server.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CALLBACKS"><a class="permalink" href="#CALLBACKS">CALLBACKS</a></h1>
Most of the above commands accept a callback option. This option should be a
  reference to a subroutine. This subroutine will be called for each packet
  received from the server as a response to the request sent.
<p class="Pp">When the subroutine is called the first argument will be the
    Net::LDAP::Message object which was returned from the method.</p>
<p class="Pp">If the request is a search then multiple packets can be received
    from the server. Each entry is received as a separate packet. For each of
    these the subroutine will be called with a Net::LDAP::Entry object as the
    second argument.</p>
<p class="Pp">During a search the server may also send a list of references.
    When such a list is received then the subroutine will be called with a
    Net::LDAP::Reference object as the second argument.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LDAP_ERROR_CODES"><a class="permalink" href="#LDAP_ERROR_CODES">LDAP
  ERROR CODES</a></h1>
<b>Net::LDAP</b> also exports constants for the error codes that can be received
  from the server, see Net::LDAP::Constant.
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
Net::LDAP::Constant, Net::LDAP::Control, Net::LDAP::Entry, Net::LDAP::Filter,
  Net::LDAP::Message, Net::LDAP::Reference, Net::LDAP::Search, Net::LDAP::RFC
<p class="Pp">The homepage for the perl-ldap modules can be found at
    http://ldap.perl.org/.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ACKNOWLEDGEMENTS"><a class="permalink" href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a></h1>
This document is based on a document originally written by Russell Fulton
  &lt;r.fulton@auckland.ac.nz&gt;.
<p class="Pp">Chris Ridd &lt;chris.ridd@isode.com&gt; for the many hours spent
    testing and contribution of the ldap* command line utilities.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="MAILING_LIST"><a class="permalink" href="#MAILING_LIST">MAILING
  LIST</a></h1>
A discussion mailing list is hosted by the Perl Foundation at
  &lt;perl-ldap@perl.org&gt; No subscription is necessary!
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
We hope you do not find any, but if you do please report them to the mailing
  list.
<p class="Pp">If you have a patch, please send it as an attachment to the
    mailing list.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Graham Barr &lt;gbarr@pobox.com&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 1997-2004 Graham Barr. All rights reserved. This program is free
  software; you can redistribute it and/or modify it under the same terms as
  Perl itself.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-09-06</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
