<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>strictures(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">strictures(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">strictures(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
strictures - turn on strict and make all warnings fatal
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  use strictures 1;
</pre>
<p class="Pp">is equivalent to</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use strict;
  use warnings FATAL =&gt; 'all';
</pre>
<p class="Pp">except when called from a file which matches:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  (caller)[1] =~ /^(?:t|xt|lib|blib)/
</pre>
<p class="Pp">and when either <span class="Li">&quot;.git&quot;</span>,
    <span class="Li">&quot;.svn&quot;</span>, or
    <span class="Li">&quot;.hg&quot;</span> is present in the current directory
    (with the intention of only forcing extra tests on the author side) -- or
    when <span class="Li">&quot;.git&quot;</span>,
    <span class="Li">&quot;.svn&quot;</span>, or
    <span class="Li">&quot;.hg&quot;</span> is present two directories up along
    with <span class="Li">&quot;dist.ini&quot;</span> (which would indicate we
    are in a <span class="Li">&quot;dzil test&quot;</span> operation, via
    Dist::Zilla) -- or when the
    <span class="Li">&quot;PERL_STRICTURES_EXTRA&quot;</span> environment
    variable is set, in which case</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use strictures 1;
</pre>
<p class="Pp">is equivalent to</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use strict;
  use warnings FATAL =&gt; 'all';
  no indirect 'fatal';
  no multidimensional;
  no bareword::filehandles;
</pre>
<p class="Pp">Note that
    <span class="Li">&quot;PERL_STRICTURES_EXTRA&quot;</span> may at some point
    add even more tests, with only a minor version increase, but any changes to
    the effect of <span class="Li">&quot;use strictures&quot;</span> in normal
    mode will involve a major version bump.</p>
<p class="Pp">If any of the extra testing modules are not present, strictures
    will complain loudly, once, via <span class="Li">&quot;warn()&quot;</span>,
    and then shut up. But you really should consider installing them, they're
    all great anti-footgun tools.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
I've been writing the equivalent of this module at the top of my code for about
  a year now. I figured it was time to make it shorter.
<p class="Pp">Things like the importer in <span class="Li">&quot;use
    Moose&quot;</span> don't help me because they turn warnings on but don't
    make them fatal -- which from my point of view is useless because I want an
    exception to tell me my code isn't warnings-clean.</p>
<p class="Pp">Any time I see a warning from my code, that indicates a
  mistake.</p>
<p class="Pp">Any time my code encounters a mistake, I want a crash -- not spew
    to STDERR and then unknown (and probably undesired) subsequent
  behaviour.</p>
<p class="Pp">I also want to ensure that obvious coding mistakes, like indirect
    object syntax (and not so obvious mistakes that cause things to accidentally
    compile as such) get caught, but not at the cost of an XS dependency and not
    at the cost of blowing things up on another machine.</p>
<p class="Pp">Therefore, strictures turns on additional checking, but only when
    it thinks it's running in a test file in a VCS checkout -- although if this
    causes undesired behaviour this can be overridden by setting the
    <span class="Li">&quot;PERL_STRICTURES_EXTRA&quot;</span> environment
    variable.</p>
<p class="Pp">If additional useful author side checks come to mind, I'll add
    them to the <span class="Li">&quot;PERL_STRICTURES_EXTRA&quot;</span> code
    path only -- this will result in a minor version increase (e.g. 1.000000 to
    1.001000 (1.1.0) or similar). Any fixes only to the mechanism of this code
    will result in a sub-version increase (e.g. 1.000000 to 1.000001
  (1.0.1)).</p>
<p class="Pp">If the behaviour of <span class="Li">&quot;use
    strictures&quot;</span> in normal mode changes in any way, that will
    constitute a major version increase -- and the code already checks when its
    version is tested to ensure that</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use strictures 1;
</pre>
<p class="Pp">will continue to only introduce the current set of strictures even
    if 2.0 is installed.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="import"><a class="permalink" href="#import">import</a></h2>
This method does the setup work described above in &quot;DESCRIPTION&quot;
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1VERSION_s0"><a class="permalink" href="#_s-1VERSION_s0">VERSION</a></h2>
This method traps the
  <span class="Li">&quot;strictures-&gt;VERSION(1)&quot;</span> call produced by
  a use line with a version number on it and does the version check.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXTRA_TESTING_RATIONALE"><a class="permalink" href="#EXTRA_TESTING_RATIONALE">EXTRA
  TESTING RATIONALE</a></h1>
Every so often, somebody complains that they're deploying via
  <span class="Li">&quot;git pull&quot;</span> and that they don't want
  strictures to enable itself in this case -- and that setting
  <span class="Li">&quot;PERL_STRICTURES_EXTRA&quot;</span> to 0 isn't
  acceptable (additional ways to disable extra testing would be welcome but the
  discussion never seems to get that far).
<p class="Pp">In order to allow us to skip a couple of stages and get straight
    to a productive conversation, here's my current rationale for turning the
    extra testing on via a heuristic:</p>
<p class="Pp">The extra testing is all stuff that only ever blows up at compile
    time; this is intentional. So the oft-raised concern that it's different
    code being tested is only sort of the case -- none of the modules involved
    affect the final optree to my knowledge, so the author gets some additional
    compile time crashes which he/she then fixes, and the rest of the testing is
    completely valid for all environments.</p>
<p class="Pp">The point of the extra testing -- especially
    <span class="Li">&quot;no indirect&quot;</span> -- is to catch mistakes that
    newbie users won't even realise are mistakes without help. For example,</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  foo { ... };
</pre>
<p class="Pp">where foo is an &amp; prototyped sub that you forgot to import --
    this is pernicious to track down since all <i>seems</i> fine until it gets
    called and you get a crash. Worse still, you can fail to have imported it
    due to a circular require, at which point you have a load order dependent
    bug which I've seen before now <i>only</i> show up in production due to tiny
    differences between the production and the development environment. I wrote
    &lt;http://shadow.cat/blog/matt-s-trout/indirect-but-still-fatal/&gt; to
    explain this particular problem before strictures itself existed.</p>
<p class="Pp">As such, in my experience so far strictures' extra testing has
    <i>avoided</i> production versus development differences, not caused
  them.</p>
<p class="Pp">Additionally, strictures' policy is very much &quot;try and
    provide as much protection as possible for newbies -- who won't think about
    whether there's an option to turn on or not&quot; -- so having only the
    environment variable is not sufficient to achieve that (I get to explain
    that you need to add <span class="Li">&quot;use strict&quot;</span> at least
    once a week on freenode #perl -- newbies sometimes completely skip steps
    because they don't understand that that step is important).</p>
<p class="Pp">I make no claims that the heuristic is perfect -- it's already
    been evolved significantly over time, especially for 1.004 where we changed
    things to ensure it only fires on files in your checkout (rather than
    strictures-using modules you happened to have installed, which was just
    silly). However, I hope the above clarifies why a heuristic approach is not
    only necessary but desirable from a point of view of providing new users
    with as much safety as possible, and will allow any future discussion on the
    subject to focus on &quot;how do we minimise annoyance to people deploying
    from checkouts intentionally&quot;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<ul class="Bl-bullet">
  <li>indirect</li>
  <li>multidimensional</li>
  <li>bareword::filehandles</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMUNITY_AND_SUPPORT"><a class="permalink" href="#COMMUNITY_AND_SUPPORT">COMMUNITY
  AND SUPPORT</a></h1>
<section class="Ss">
<h2 class="Ss" id="_s-1IRC_s0_channel"><a class="permalink" href="#_s-1IRC_s0_channel">IRC
  channel</a></h2>
irc.perl.org #toolchain
<p class="Pp">(or bug 'mst' in query on there or freenode)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Git_repository"><a class="permalink" href="#Git_repository">Git
  repository</a></h2>
Gitweb is on http://git.shadowcat.co.uk/ and the clone URL is:
<p class="Pp"><span class="Li"></span></p>
<pre>
  git clone git://git.shadowcat.co.uk/p5sagit/strictures.git
</pre>
<p class="Pp">The web interface to the repository is at:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  http://git.shadowcat.co.uk/gitweb/gitweb.cgi?p=p5sagit/strictures.git
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
mst - Matt S. Trout (cpan:MSTROUT) &lt;mst@shadowcat.co.uk&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="CONTRIBUTORS"><a class="permalink" href="#CONTRIBUTORS">CONTRIBUTORS</a></h1>
Karen Etheridge (cpan:ETHER) &lt;ether@cpan.org&gt;
<p class="Pp">Mithaldu - Christian Walde (cpan:MITHALDU)
    &lt;walde.christian@gmail.com&gt;</p>
<p class="Pp">haarg - Graham Knop (cpan:HAARG) &lt;haarg@haarg.org&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c) 2010 the strictures &quot;AUTHOR&quot; and
  &quot;CONTRIBUTORS&quot; as listed above.
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
This library is free software and may be distributed under the same terms as
  perl itself.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2013-12-10</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
