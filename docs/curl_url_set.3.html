<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   generated by cd2nroff 0.1 from curl_url_set.md
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>curl_url_set(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">curl_url_set(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">curl_url_set(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">curl_url_set - set a URL part</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;curl/curl.h&gt;
CURLUcode curl_url_set(CURLU *url,
<br/>
                       CURLUPart part,
<br/>
                       const char *content,
<br/>
                       unsigned int flags);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <i>url</i> handle to work on, passed in as the first argument,
    must be a handle previously created by <i>curl_url(3)</i> or
    <i>curl_url_dup(3)</i>.</p>
<p class="Pp">This function sets or updates individual URL components, or parts,
    held by the URL object the handle identifies.</p>
<p class="Pp">The <i>part</i> argument should identify the particular URL part
    (see list below) to set or change, with <i>content</i> pointing to a
    null-terminated string with the new contents for that URL part. The contents
    should be in the form and encoding they would use in a URL: URL encoded.</p>
<p class="Pp">When setting part in the URL object that was previously already
    set, it replaces the data that was previously stored for that part with the
    new <i>content</i>.</p>
<p class="Pp">The caller does not have to keep <i>content</i> around after a
    successful call as this function copies the content.</p>
<p class="Pp">Setting a part to a NULL pointer removes that part's contents from
    the <i>CURLU</i> handle.</p>
<p class="Pp">By default, this API only accepts URLs using schemes for protocols
    that are supported built-in. To make libcurl parse URLs generically even for
    schemes it does not know about, the <b>CURLU_NON_SUPPORT_SCHEME</b> flags
    bit must be set. Otherwise, this function returns
    <i>CURLUE_UNSUPPORTED_SCHEME</i> for URL schemes it does not recognize.</p>
<p class="Pp">This function has an 8 MB maximum length limit for all provided
    input strings. In the real world, excessively long fields in URLs cause
    problems even if this API accepts them.</p>
<p class="Pp">When setting or updating contents of individual URL parts, this
    API might accept data that would not be otherwise possible to set in the
    string when it gets populated as a result of a full URL parse. Beware. If
    done so, extracting a full URL later on from such components might render an
    invalid URL.</p>
<p class="Pp">The <i>flags</i> argument is a bitmask with independent
  features.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PARTS"><a class="permalink" href="#PARTS">PARTS</a></h1>
<dl class="Bl-tag">
  <dt id="CURLUPART_URL"><a class="permalink" href="#CURLUPART_URL">CURLUPART_URL</a></dt>
  <dd>Allows the full URL of the handle to be replaced. If the handle already is
      populated with a URL, the new URL can be relative to the previous.
    <p class="Pp">When successfully setting a new URL, relative or absolute, the
        handle contents is replaced with the components of the newly set
      URL.</p>
    <p class="Pp">Pass a pointer to a null-terminated string to the <i>url</i>
        parameter. The string must point to a correctly formatted &quot;RFC
        3986+&quot; URL or be a NULL pointer.</p>
    <p class="Pp">Unless <i>CURLU_NO_AUTHORITY</i> is set, a blank hostname is
        not allowed in the URL.</p>
  </dd>
  <dt id="CURLUPART_SCHEME"><a class="permalink" href="#CURLUPART_SCHEME">CURLUPART_SCHEME</a></dt>
  <dd>Scheme cannot be URL decoded on set. libcurl only accepts setting schemes
      up to 40 bytes long.</dd>
  <dt id="CURLUPART_USER"><a class="permalink" href="#CURLUPART_USER">CURLUPART_USER</a></dt>
  <dd></dd>
  <dt id="CURLUPART_PASSWORD"><a class="permalink" href="#CURLUPART_PASSWORD">CURLUPART_PASSWORD</a></dt>
  <dd></dd>
  <dt id="CURLUPART_OPTIONS"><a class="permalink" href="#CURLUPART_OPTIONS">CURLUPART_OPTIONS</a></dt>
  <dd>The options field is an optional field that might follow the password in
      the userinfo part. It is only recognized/used when parsing URLs for the
      following schemes: pop3, smtp and imap. This function however allows users
      to independently set this field.</dd>
  <dt id="CURLUPART_HOST"><a class="permalink" href="#CURLUPART_HOST">CURLUPART_HOST</a></dt>
  <dd>The hostname. If it is International Domain Name (IDN) the string must
      then be encoded as your locale says or UTF-8 (when WinIDN is used). If it
      is a bracketed IPv6 numeric address it may contain a zone id (or you can
      use <i>CURLUPART_ZONEID</i>).
    <p class="Pp">Unless <i>CURLU_NO_AUTHORITY</i> is set, a blank hostname is
        not allowed to set.</p>
  </dd>
  <dt id="CURLUPART_ZONEID"><a class="permalink" href="#CURLUPART_ZONEID">CURLUPART_ZONEID</a></dt>
  <dd>If the hostname is a numeric IPv6 address, this field can also be
    set.</dd>
  <dt id="CURLUPART_PORT"><a class="permalink" href="#CURLUPART_PORT">CURLUPART_PORT</a></dt>
  <dd>The port number cannot be URL encoded on set. The given port number is
      provided as a string and the decimal number in it must be between 0 and
      65535. Anything else returns an error.</dd>
  <dt id="CURLUPART_PATH"><a class="permalink" href="#CURLUPART_PATH">CURLUPART_PATH</a></dt>
  <dd>If a path is set in the URL without a leading slash, a slash is prepended
      automatically.</dd>
  <dt id="CURLUPART_QUERY"><a class="permalink" href="#CURLUPART_QUERY">CURLUPART_QUERY</a></dt>
  <dd>The query part gets spaces converted to pluses when asked to URL encode on
      set with the <i>CURLU_URLENCODE</i> bit.
    <p class="Pp">If used together with the <i>CURLU_APPENDQUERY</i> bit, the
        provided part is appended on the end of the existing query.</p>
    <p class="Pp">The question mark in the URL is not part of the actual query
        contents.</p>
  </dd>
  <dt id="CURLUPART_FRAGMENT"><a class="permalink" href="#CURLUPART_FRAGMENT">CURLUPART_FRAGMENT</a></dt>
  <dd>The hash sign in the URL is not part of the actual fragment contents.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FLAGS"><a class="permalink" href="#FLAGS">FLAGS</a></h1>
<p class="Pp">The flags argument is zero, one or more bits set in a bitmask.</p>
<dl class="Bl-tag">
  <dt id="CURLU_APPENDQUERY"><a class="permalink" href="#CURLU_APPENDQUERY">CURLU_APPENDQUERY</a></dt>
  <dd>Can be used when setting the <i>CURLUPART_QUERY</i> component. The
      provided new part is then appended at the end of the existing query - and
      if the previous part did not end with an ampersand (&amp;), an ampersand
      gets inserted before the new appended part.
    <p class="Pp">When <i>CURLU_APPENDQUERY</i> is used together with
        <i>CURLU_URLENCODE</i>, the first '=' symbol is not URL encoded.</p>
  </dd>
  <dt id="CURLU_NON_SUPPORT_SCHEME"><a class="permalink" href="#CURLU_NON_SUPPORT_SCHEME">CURLU_NON_SUPPORT_SCHEME</a></dt>
  <dd>If set, allows <i>curl_url_set(3)</i> to set a non-supported scheme.</dd>
  <dt id="CURLU_URLENCODE"><a class="permalink" href="#CURLU_URLENCODE">CURLU_URLENCODE</a></dt>
  <dd>When set, <i>curl_url_set(3)</i> URL encodes the part on entry, except for
      scheme, port and URL.
    <p class="Pp">When setting the path component with URL encoding enabled, the
        slash character is be skipped.</p>
    <p class="Pp">The query part gets space-to-plus conversion before the URL
        conversion.</p>
    <p class="Pp">This URL encoding is charset unaware and converts the input in
        a byte-by-byte manner.</p>
  </dd>
  <dt id="CURLU_DEFAULT_SCHEME"><a class="permalink" href="#CURLU_DEFAULT_SCHEME">CURLU_DEFAULT_SCHEME</a></dt>
  <dd>If set, allows the URL to be set without a scheme and then sets that to
      the default scheme: HTTPS. Overrides the <i>CURLU_GUESS_SCHEME</i> option
      if both are set.</dd>
  <dt id="CURLU_GUESS_SCHEME"><a class="permalink" href="#CURLU_GUESS_SCHEME">CURLU_GUESS_SCHEME</a></dt>
  <dd>If set, allows the URL to be set without a scheme and it instead
      &quot;guesses&quot; which scheme that was intended based on the hostname.
      If the outermost subdomain name matches DICT, FTP, IMAP, LDAP, POP3 or
      SMTP then that scheme is used, otherwise it picks HTTP. Conflicts with the
      <i>CURLU_DEFAULT_SCHEME</i> option which takes precedence if both are
    set.</dd>
  <dt id="CURLU_NO_AUTHORITY"><a class="permalink" href="#CURLU_NO_AUTHORITY">CURLU_NO_AUTHORITY</a></dt>
  <dd>If set, skips authority checks. The RFC allows individual schemes to omit
      the host part (normally the only mandatory part of the authority), but
      libcurl cannot know whether this is permitted for custom schemes.
      Specifying the flag permits empty authority sections, similar to how file
      scheme is handled.</dd>
  <dt id="CURLU_PATH_AS_IS"><a class="permalink" href="#CURLU_PATH_AS_IS">CURLU_PATH_AS_IS</a></dt>
  <dd>When set for <b>CURLUPART_URL</b>, this skips the normalization of the
      path. That is the procedure where libcurl otherwise removes sequences of
      dot-slash and dot-dot etc. The same option used for transfers is called
      <i>CURLOPT_PATH_AS_IS(3)</i>.</dd>
  <dt id="CURLU_ALLOW_SPACE"><a class="permalink" href="#CURLU_ALLOW_SPACE">CURLU_ALLOW_SPACE</a></dt>
  <dd>If set, the URL parser allows space (ASCII 32) where possible. The URL
      syntax does normally not allow spaces anywhere, but they should be encoded
      as %20 or '+'. When spaces are allowed, they are still not allowed in the
      scheme. When space is used and allowed in a URL, it is stored as-is unless
      <i>CURLU_URLENCODE</i> is also set, which then makes libcurl URL encode
      the space before stored. This affects how the URL is constructed when
      <i>curl_url_get(3)</i> is subsequently used to extract the full URL or
      individual parts. (Added in 7.78.0)</dd>
  <dt id="CURLU_DISALLOW_USER"><a class="permalink" href="#CURLU_DISALLOW_USER">CURLU_DISALLOW_USER</a></dt>
  <dd>If set, the URL parser does not accept embedded credentials for the
      <b>CURLUPART_URL</b>, and instead returns <b>CURLUE_USER_NOT_ALLOWED</b>
      for such URLs.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>int main(void)
{
<br/>
  CURLUcode rc;
<br/>
  CURLU *url = curl_url();
<br/>
  rc = curl_url_set(url, CURLUPART_URL, &quot;https://example.com&quot;, 0);
<br/>
  if(!rc) {
<br/>
    /* change it to an FTP URL */
<br/>
    rc = curl_url_set(url, CURLUPART_SCHEME, &quot;ftp&quot;, 0);
<br/>
  }
<br/>
  curl_url_cleanup(url);
}</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AVAILABILITY"><a class="permalink" href="#AVAILABILITY">AVAILABILITY</a></h1>
<p class="Pp">Added in 7.62.0. CURLUPART_ZONEID was added in 7.65.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">Returns a <i>CURLUcode</i> error value, which is CURLUE_OK (0) if
    everything went fine. See the <i>libcurl-errors(3)</i> man page for the full
    list with descriptions.</p>
<p class="Pp">The input string passed to <i>curl_url_set(3)</i> must be shorter
    than eight million bytes. Otherwise this function returns
    <b>CURLUE_MALFORMED_INPUT</b>.</p>
<p class="Pp">If this function returns an error, no URL part is set.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>CURLOPT_CURLU</b>(3), <b>curl_url</b>(3),
    <b>curl_url_cleanup</b>(3), <b>curl_url_dup</b>(3), <b>curl_url_get</b>(3),
    <b>curl_url_strerror</b>(3)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 12 2024</td>
    <td class="foot-os">libcurl</td>
  </tr>
</table>
</body>
</html>
