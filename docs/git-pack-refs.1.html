<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
       Title: git-pack-refs
      Author: [FIXME: author] [see http://docbook.sf.net/el/author]
   Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
        Date: 11/04/2019
      Manual: Git Manual
      Source: Git 2.24.0
    Language: English
   -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>GIT-PACK-REFS(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GIT-PACK-REFS(1)</td>
    <td class="head-vol">Git Manual</td>
    <td class="head-rtitle">GIT-PACK-REFS(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
git-pack-refs - Pack heads and tags for efficient repository access
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<i>git pack-refs</i> [--all] [--no-prune]
</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Traditionally, tips of branches and tags (collectively known as <i>refs</i>)
  were stored one file per ref in a (sub)directory under <b>$GIT_DIR/refs</b>
  directory. While many branch tips tend to be updated often, most tags and some
  branch tips are never updated. When a repository has hundreds or thousands of
  tags, this one-file-per-ref format both wastes storage and hurts performance.
<p class="Pp">This command is used to solve the storage and performance problem
    by storing the refs in a single file, <b>$GIT_DIR/packed-refs</b>. When a
    ref is missing from the traditional <b>$GIT_DIR/refs</b> directory
    hierarchy, it is looked up in this file and used if found.</p>
<p class="Pp">Subsequent updates to branches always create new files under
    <b>$GIT_DIR/refs</b> directory hierarchy.</p>
<p class="Pp">A recommended practice to deal with a repository with too many
    refs is to pack its refs with <b>--all</b> once, and occasionally run <b>git
    pack-refs</b>. Tags are by definition stationary and are not expected to
    change. Branch heads will be packed with the initial <b>pack-refs --all</b>,
    but only the currently active branch heads will become unpacked, and the
    next <b>pack-refs</b> (without <b>--all</b>) will leave them unpacked.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
--all
<div class="Bd-indent">The command by default packs all tags and refs that are
  already packed, and leaves other refs alone. This is because branches are
  expected to be actively developed and packing their tips does not help
  performance. This option causes branch tips to be packed as well. Useful for a
  repository with many branches of historical interests.</div>
<p class="Pp">--no-prune</p>
<div class="Bd-indent">The command usually removes loose refs under
  <b>$GIT_DIR/refs</b> hierarchy after packing them. This option tells it not
  to.</div>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
Older documentation written before the packed-refs mechanism was introduced may
  still say things like &quot;.git/refs/heads/&lt;branch&gt; file exists&quot;
  when it means &quot;branch &lt;branch&gt; exists&quot;.
</section>
<section class="Sh">
<h1 class="Sh" id="GIT"><a class="permalink" href="#GIT">GIT</a></h1>
Part of the <b>git</b>(1) suite
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">11/04/2019</td>
    <td class="foot-os">Git 2.24.0</td>
  </tr>
</table>
</body>
</html>
