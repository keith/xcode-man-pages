<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
       Title: git-pack-refs
      Author: [FIXME: author] [see http://www.docbook.org/tdg5/en/html/author]
   Generator: DocBook XSL Stylesheets v1.79.2 <http://docbook.sf.net/>
        Date: 2025-07-22
      Manual: Git Manual
      Source: Git 2.50.1.428.g0e8243a355
    Language: English
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>GIT-PACK-REFS(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GIT-PACK-REFS(1)</td>
    <td class="head-vol">Git Manual</td>
    <td class="head-rtitle">GIT-PACK-REFS(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">git-pack-refs - Pack heads and tags for efficient repository
    access</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><i>git pack-refs</i> [--all] [--no-prune] [--auto] [--include &lt;pattern&gt;] [--exclude &lt;pattern&gt;]</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Traditionally, tips of branches and tags (collectively known as
    <i>refs</i>) were stored one file per ref in a (sub)directory under
    <b>$GIT_DIR/refs</b> directory. While many branch tips tend to be updated
    often, most tags and some branch tips are never updated. When a repository
    has hundreds or thousands of tags, this one-file-per-ref format both wastes
    storage and hurts performance.</p>
<p class="Pp">This command is used to solve the storage and performance problem
    by storing the refs in a single file, <b>$GIT_DIR/packed-refs</b>. When a
    ref is missing from the traditional <b>$GIT_DIR/refs</b> directory
    hierarchy, it is looked up in this file and used if found.</p>
<p class="Pp">Subsequent updates to branches always create new files under
    <b>$GIT_DIR/refs</b> directory hierarchy.</p>
<p class="Pp">A recommended practice to deal with a repository with too many
    refs is to pack its refs with <b>--all</b> once, and occasionally run
    <b>git</b> <b>pack-refs</b>. Tags are by definition stationary and are not
    expected to change. Branch heads will be packed with the initial
    <b>pack-refs</b> <b>--all</b>, but only the currently active branch heads
    will become unpacked, and the next <b>pack-refs</b> (without <b>--all</b>)
    will leave them unpacked.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">--all</p>
<div class="Bd-indent">The command by default packs all tags and refs that are
  already packed, and leaves other refs alone. This is because branches are
  expected to be actively developed and packing their tips does not help
  performance. This option causes all refs to be packed as well, with the
  exception of hidden refs, broken refs, and symbolic refs. Useful for a
  repository with many branches of historical interests.</div>
<p class="Pp">--no-prune</p>
<div class="Bd-indent">The command usually removes loose refs under
  <b>$GIT_DIR/refs</b> hierarchy after packing them. This option tells it not
  to.</div>
<p class="Pp">--auto</p>
<div class="Bd-indent">Pack refs as needed depending on the current state of the
  ref database. The behavior depends on the ref format used by the repository
  and may change in the future.
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;&quot;files&quot;: Loose references are packed
  into the <b>packed-refs</b> file based on the ratio of loose references to the
  size of the <b>packed-refs</b> file. The bigger the <b>packed-refs</b> file,
  the more loose references need to exist before we repack.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;&quot;reftable&quot;: Tables are compacted such
  that they form a geometric sequence. For two tables N and N+1, where N+1 is
  newer, this maintains the property that N is at least twice as big as N+1.
  Only tables that violate this property are compacted.</div>
</div>
<p class="Pp">--include &lt;pattern&gt;</p>
<div class="Bd-indent">Pack refs based on a <b>glob</b>(<b>7</b>) pattern.
  Repetitions of this option accumulate inclusion patterns. If a ref is both
  included in <b>--include</b> and <b>--exclude</b>, <b>--exclude</b> takes
  precedence. Using <b>--include</b> will preclude all tags from being included
  by default. Symbolic refs and broken refs will never be packed. When used with
  <b>--all</b>, it will be a noop. Use <b>--no-include</b> to clear and reset
  the list of patterns.</div>
<p class="Pp">--exclude &lt;pattern&gt;</p>
<div class="Bd-indent">Do not pack refs matching the given <b>glob</b>(<b>7</b>)
  pattern. Repetitions of this option accumulate exclusion patterns. Use
  <b>--no-exclude</b> to clear and reset the list of patterns. If a ref is
  already packed, including it with <b>--exclude</b> will not unpack it.
<p class="Pp">When used with <b>--all</b>, pack only loose refs which do not
    match any of the provided <b>--exclude</b> patterns.</p>
<p class="Pp">When used with <b>--include</b>, refs provided to
    <b>--include</b>, minus refs that are provided to <b>--exclude</b> will be
    packed.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Older documentation written before the packed-refs mechanism was
    introduced may still say things like &quot;.git/refs/heads/&lt;branch&gt;
    file exists&quot; when it means &quot;branch &lt;branch&gt;
  exists&quot;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="GIT"><a class="permalink" href="#GIT">GIT</a></h1>
<p class="Pp">Part of the <b>git</b>(1) suite</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/06/2021</td>
    <td class="foot-os">Git 2.32.0</td>
  </tr>
</table>
</body>
</html>
