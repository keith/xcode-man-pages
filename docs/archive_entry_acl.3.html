<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2010 Joerg Sonnenberger
   Copyright (c) 2016 Martin Matuska
   All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>ARCHIVE_ENTRY_ACL(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ARCHIVE_ENTRY_ACL(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">ARCHIVE_ENTRY_ACL(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">archive_entry_acl_add_entry</code>,
    <code class="Nm">archive_entry_acl_add_entry_w</code>,
    <code class="Nm">archive_entry_acl_clear</code>,
    <code class="Nm">archive_entry_acl_count</code>,
    <code class="Nm">archive_entry_acl_from_text</code>,
    <code class="Nm">archive_entry_acl_from_text_w</code>,
    <code class="Nm">archive_entry_acl_next</code>,
    <code class="Nm">archive_entry_acl_reset</code>,
    <code class="Nm">archive_entry_acl_to_text</code>,
    <code class="Nm">archive_entry_acl_to_text_w</code>,
    <code class="Nm">archive_entry_acl_types</code> &#x2014;
    <span class="Nd">functions for manipulating Access Control Lists in archive
    entry descriptions</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<p class="Pp">Streaming Archive Library (libarchive, -larchive)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
    &lt;<a class="In">archive_entry.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_acl_add_entry</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">int type</var>, <var class="Fa">int
    permset</var>, <var class="Fa">int tag</var>, <var class="Fa">int
    qualifier</var>, <var class="Fa">const char *name</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_acl_add_entry_w</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">int type</var>, <var class="Fa">int
    permset</var>, <var class="Fa">int tag</var>, <var class="Fa">int
    qualifier</var>, <var class="Fa">const wchar_t *name</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_acl_clear</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_acl_count</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">int
    type</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_acl_from_text</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">const char *text</var>,
    <var class="Fa">int type</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_acl_from_text_w</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">const wchar_t *text</var>,
    <var class="Fa">int type</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_acl_next</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">int type</var>, <var class="Fa">int
    *ret_type</var>, <var class="Fa">int *ret_permset</var>, <var class="Fa">int
    *ret_tag</var>, <var class="Fa">int *ret_qual</var>, <var class="Fa">const
    char **ret_name</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_acl_reset</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">int
    type</var>);</p>
<p class="Pp"><var class="Ft">char *</var>
  <br/>
  <code class="Fn">archive_entry_acl_to_text</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">ssize_t *len_p</var>,
    <var class="Fa">int flags</var>);</p>
<p class="Pp"><var class="Ft">wchar_t *</var>
  <br/>
  <code class="Fn">archive_entry_acl_to_text_w</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">ssize_t *len_p</var>,
    <var class="Fa">int flags</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_acl_types</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The &#x201C;Access Control Lists (ACLs)&#x201D; extend the
    standard Unix permission model. The ACL interface of
    <code class="Nm">libarchive</code> supports both POSIX.1e and NFSv4 style
    ACLs. Use of ACLs is restricted by various levels of ACL support in
    operating systems, file systems and archive formats.</p>
<section class="Ss">
<h2 class="Ss" id="POSIX.1e_Access_Control_Lists"><a class="permalink" href="#POSIX.1e_Access_Control_Lists">POSIX.1e
  Access Control Lists</a></h2>
<p class="Pp">A POSIX.1e ACL consists of a number of independent entries. Each
    entry specifies the permission set as a bitmask of basic permissions. Valid
    permissions in the <var class="Fa">permset</var> are:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_READ"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_READ"><code class="Dv">ARCHIVE_ENTRY_ACL_READ</code></a>
    (<b class="Sy">r</b>)</dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_WRITE"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_WRITE"><code class="Dv">ARCHIVE_ENTRY_ACL_WRITE</code></a>
    (<b class="Sy">w</b>)</dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_EXECUTE"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_EXECUTE"><code class="Dv">ARCHIVE_ENTRY_ACL_EXECUTE</code></a>
    (<b class="Sy">x</b>)</dt>
  <dd style="width: auto;">&#x00A0;</dd>
</dl>
</div>
The permissions correspond to the normal Unix permissions.
<p class="Pp">The <var class="Fa">tag</var> specifies the principal to which the
    permission applies. Valid values are:</p>
<dl class="Bl-hang Bd-indent Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_USER"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_USER"><code class="Dv">ARCHIVE_ENTRY_ACL_USER</code></a></dt>
  <dd>The user specified by the name field.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_USER_OBJ"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_USER_OBJ"><code class="Dv">ARCHIVE_ENTRY_ACL_USER_OBJ</code></a></dt>
  <dd>The owner of the file.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_GROUP"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_GROUP"><code class="Dv">ARCHIVE_ENTRY_ACL_GROUP</code></a></dt>
  <dd>The group specified by the name field.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_GROUP_OBJ"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_GROUP_OBJ"><code class="Dv">ARCHIVE_ENTRY_ACL_GROUP_OBJ</code></a></dt>
  <dd>The group which owns the file.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_MASK"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_MASK"><code class="Dv">ARCHIVE_ENTRY_ACL_MASK</code></a></dt>
  <dd>The maximum permissions to be obtained via group permissions.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_OTHER"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_OTHER"><code class="Dv">ARCHIVE_ENTRY_ACL_OTHER</code></a></dt>
  <dd>Any principal who is not the file owner or a member of the owning
    group.</dd>
</dl>
<p class="Pp">The principals <code class="Dv">ARCHIVE_ENTRY_ACL_USER_OBJ</code>,
    <code class="Dv">ARCHIVE_ENTRY_ACL_GROUP_OBJ</code> and
    <code class="Dv">ARCHIVE_ENTRY_ACL_OTHER</code> are equivalent to user,
    group and other in the classic Unix permission model and specify
    non-extended ACL entries.</p>
<p class="Pp">All files have an access ACL
    (<code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code>). This specifies the
    permissions required for access to the file itself. Directories have an
    additional ACL (<code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</code>),
    which controls the initial access ACL for newly-created directory
  entries.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="NFSv4_Access_Control_Lists"><a class="permalink" href="#NFSv4_Access_Control_Lists">NFSv4
  Access Control Lists</a></h2>
<p class="Pp">A NFSv4 ACL consists of multiple individual entries called Access
    Control Entries (ACEs).</p>
<p class="Pp">There are four possible types of a NFSv4 ACE:</p>
<dl class="Bl-hang Bd-indent Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ALLOW"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ALLOW"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ALLOW</code></a></dt>
  <dd>Allow principal to perform actions requiring given permissions.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_DENY"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_DENY"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DENY</code></a></dt>
  <dd>Prevent principal from performing actions requiring given
    permissions.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_AUDIT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_AUDIT"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_AUDIT</code></a></dt>
  <dd>Log access attempts by principal which require given permissions.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ALARM"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ALARM"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ALARM</code></a></dt>
  <dd>Trigger a system alarm on access attempts by principal which require given
      permissions.</dd>
</dl>
<p class="Pp">The <var class="Fa">tag</var> specifies the principal to which the
    permission applies. Valid values are:</p>
<dl class="Bl-hang Bd-indent Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_USER~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_USER~2"><code class="Dv">ARCHIVE_ENTRY_ACL_USER</code></a></dt>
  <dd>The user specified by the name field.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_USER_OBJ~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_USER_OBJ~2"><code class="Dv">ARCHIVE_ENTRY_ACL_USER_OBJ</code></a></dt>
  <dd>The owner of the file.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_GROUP~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_GROUP~2"><code class="Dv">ARCHIVE_ENTRY_ACL_GROUP</code></a></dt>
  <dd>The group specified by the name field.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_GROUP_OBJ~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_GROUP_OBJ~2"><code class="Dv">ARCHIVE_ENTRY_ACL_GROUP_OBJ</code></a></dt>
  <dd>The group which owns the file.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_EVERYONE"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_EVERYONE"><code class="Dv">ARCHIVE_ENTRY_ACL_EVERYONE</code></a></dt>
  <dd>Any principal who is not the file owner or a member of the owning
    group.</dd>
</dl>
<p class="Pp">Entries with the <code class="Dv">ARCHIVE_ENTRY_ACL_USER</code> or
    <code class="Dv">ARCHIVE_ENTRY_ACL_GROUP</code> tag store the user and group
    name in the <var class="Fa">name</var> string and optionally the user or
    group ID in the <var class="Fa">qualifier</var> integer.</p>
<p class="Pp">NFSv4 ACE permissions and flags are stored in the same
    <var class="Fa">permset</var> bitfield. Some permissions share the same
    constant and permission character but have different effect on directories
    than on files. The following ACE permissions are supported:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_READ_DATA"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_READ_DATA"><code class="Dv">ARCHIVE_ENTRY_ACL_READ_DATA</code></a>
    (<b class="Sy">r</b>)</dt>
  <dd>Read data (file).</dd>
  <dt id="ARCHIVE_ENTRY_ACL_LIST_DIRECTORY"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_LIST_DIRECTORY"><code class="Dv">ARCHIVE_ENTRY_ACL_LIST_DIRECTORY</code></a>
    (<b class="Sy">r</b>)</dt>
  <dd>List entries (directory).</dd>
  <dt>ARCHIVE_ENTRY_ACL_WRITE_DATA (<b class="Sy">w</b>)</dt>
  <dd>Write data (file).</dd>
  <dt>ARCHIVE_ENTRY_ACL_ADD_FILE (<b class="Sy">w</b>)</dt>
  <dd>Create files (directory).</dd>
  <dt id="ARCHIVE_ENTRY_ACL_EXECUTE~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_EXECUTE~2"><code class="Dv">ARCHIVE_ENTRY_ACL_EXECUTE</code></a>
    (<b class="Sy">x</b>)</dt>
  <dd>Execute file or change into a directory.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_APPEND_DATA"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_APPEND_DATA"><code class="Dv">ARCHIVE_ENTRY_ACL_APPEND_DATA</code></a>
    (<b class="Sy">p</b>)</dt>
  <dd>Append data (file).</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ADD_SUBDIRECTORY"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ADD_SUBDIRECTORY"><code class="Dv">ARCHIVE_ENTRY_ACL_ADD_SUBDIRECTORY</code></a>
    (<b class="Sy">p</b>)</dt>
  <dd>Create subdirectories (directory).</dd>
  <dt id="ARCHIVE_ENTRY_ACL_DELETE_CHILD"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_DELETE_CHILD"><code class="Dv">ARCHIVE_ENTRY_ACL_DELETE_CHILD</code></a>
    (<a class="permalink" href="#D"><b class="Sy" id="D">D</b></a>)</dt>
  <dd>Remove files and subdirectories inside a directory.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_DELETE"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_DELETE"><code class="Dv">ARCHIVE_ENTRY_ACL_DELETE</code></a>
    (<b class="Sy">d</b>)</dt>
  <dd>Remove file or directory.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_READ_ATTRIBUTES"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_READ_ATTRIBUTES"><code class="Dv">ARCHIVE_ENTRY_ACL_READ_ATTRIBUTES</code></a>
    (<a class="permalink" href="#a"><b class="Sy" id="a">a</b></a>)</dt>
  <dd>Read file or directory attributes.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_WRITE_ATTRIBUTES"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_WRITE_ATTRIBUTES"><code class="Dv">ARCHIVE_ENTRY_ACL_WRITE_ATTRIBUTES</code></a>
    (<a class="permalink" href="#A"><b class="Sy" id="A">A</b></a>)</dt>
  <dd>Write file or directory attributes.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_READ_NAMED_ATTRS"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_READ_NAMED_ATTRS"><code class="Dv">ARCHIVE_ENTRY_ACL_READ_NAMED_ATTRS</code></a>
    (<a class="permalink" href="#R"><b class="Sy" id="R">R</b></a>)</dt>
  <dd>Read named file or directory attributes.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_WRITE_NAMED_ATTRS"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_WRITE_NAMED_ATTRS"><code class="Dv">ARCHIVE_ENTRY_ACL_WRITE_NAMED_ATTRS</code></a>
    (<a class="permalink" href="#W"><b class="Sy" id="W">W</b></a>)</dt>
  <dd>Write named file or directory attributes.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_READ_ACL"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_READ_ACL"><code class="Dv">ARCHIVE_ENTRY_ACL_READ_ACL</code></a>
    (<a class="permalink" href="#c"><b class="Sy" id="c">c</b></a>)</dt>
  <dd>Read file or directory ACL.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_WRITE_ACL"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_WRITE_ACL"><code class="Dv">ARCHIVE_ENTRY_ACL_WRITE_ACL</code></a>
    (<a class="permalink" href="#C"><b class="Sy" id="C">C</b></a>)</dt>
  <dd>Write file or directory ACL.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_WRITE_OWNER"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_WRITE_OWNER"><code class="Dv">ARCHIVE_ENTRY_ACL_WRITE_OWNER</code></a>
    (<a class="permalink" href="#o"><b class="Sy" id="o">o</b></a>)</dt>
  <dd>Change owner of a file or directory.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_SYNCHRONIZE"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_SYNCHRONIZE"><code class="Dv">ARCHIVE_ENTRY_ACL_SYNCHRONIZE</code></a>
    (<a class="permalink" href="#s"><b class="Sy" id="s">s</b></a>)</dt>
  <dd>Use synchronous I/O.</dd>
</dl>
</div>
<p class="Pp">The following NFSv4 ACL inheritance flags are supported:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_FILE_INHERIT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_FILE_INHERIT"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_FILE_INHERIT</code></a>
    (<a class="permalink" href="#f"><b class="Sy" id="f">f</b></a>)</dt>
  <dd>Inherit parent directory ACE to files.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_DIRECTORY_INHERIT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_DIRECTORY_INHERIT"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_DIRECTORY_INHERIT</code></a>
    (<b class="Sy">d</b>)</dt>
  <dd>Inherit parent directory ACE to subdirectories.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_INHERIT_ONLY"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_INHERIT_ONLY"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_INHERIT_ONLY</code></a>
    (<a class="permalink" href="#i"><b class="Sy" id="i">i</b></a>)</dt>
  <dd>Only inherit, do not apply the permission on the directory itself.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_NO_PROPAGATE_INHERIT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_NO_PROPAGATE_INHERIT"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_NO_PROPAGATE_INHERIT</code></a>
    (<a class="permalink" href="#n"><b class="Sy" id="n">n</b></a>)</dt>
  <dd>Do not propagate inherit flags. Only first-level entries inherit
    ACLs.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_SUCCESSFUL_ACCESS"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_SUCCESSFUL_ACCESS"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_SUCCESSFUL_ACCESS</code></a>
    (<a class="permalink" href="#S"><b class="Sy" id="S">S</b></a>)</dt>
  <dd>Trigger alarm or audit on successful access.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_FAILED_ACCESS"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_FAILED_ACCESS"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_FAILED_ACCESS</code></a>
    (<a class="permalink" href="#F"><b class="Sy" id="F">F</b></a>)</dt>
  <dd>Trigger alarm or audit on failed access.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_ENTRY_INHERITED"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_ENTRY_INHERITED"><code class="Dv">ARCHIVE_ENTRY_ACL_ENTRY_INHERITED</code></a>
    (<a class="permalink" href="#I"><b class="Sy" id="I">I</b></a>)</dt>
  <dd>Mark that ACE was inherited.</dd>
</dl>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Functions"><a class="permalink" href="#Functions">Functions</a></h2>
<p class="Pp"><a class="permalink" href="#archive_entry_acl_add_entry"><code class="Fn" id="archive_entry_acl_add_entry">archive_entry_acl_add_entry</code></a>()
    and
    <a class="permalink" href="#archive_entry_acl_add_entry_w"><code class="Fn" id="archive_entry_acl_add_entry_w">archive_entry_acl_add_entry_w</code></a>()
    add a single ACL entry. For the access ACL and non-extended principals, the
    classic Unix permissions are updated. An archive entry cannot contain both
    POSIX.1e and NFSv4 ACL entries.</p>
<p class="Pp" id="archive_entry_acl_clear"><a class="permalink" href="#archive_entry_acl_clear"><code class="Fn">archive_entry_acl_clear</code></a>()
    removes all ACL entries and resets the enumeration pointer.</p>
<p class="Pp" id="archive_entry_acl_count"><a class="permalink" href="#archive_entry_acl_count"><code class="Fn">archive_entry_acl_count</code></a>()
    counts the ACL entries that have the given type mask.
    <var class="Fa">type</var> can be the bitwise-or of</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ACCESS"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ACCESS"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_DEFAULT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_DEFAULT"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
</dl>
</div>
for POSIX.1e ACLs and
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ALLOW~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ALLOW~2"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ALLOW</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_DENY~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_DENY~2"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DENY</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_AUDIT~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_AUDIT~2"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_AUDIT</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ALARM~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ALARM~2"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ALARM</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
</dl>
</div>
for NFSv4 ACLs. For POSIX.1e ACLs if
  <code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code> is included and at least
  one extended ACL entry is found, the three non-extended ACLs are added.
<p class="Pp" id="archive_entry_acl_from_text"><a class="permalink" href="#archive_entry_acl_from_text"><code class="Fn">archive_entry_acl_from_text</code></a>()
    and
    <a class="permalink" href="#archive_entry_acl_from_text_w"><code class="Fn" id="archive_entry_acl_from_text_w">archive_entry_acl_from_text_w</code></a>()
    add new (or merge with existing) ACL entries from (wide) text. The argument
    <var class="Fa">type</var> may take one of the following values:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ACCESS~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ACCESS~2"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_DEFAULT~2"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_DEFAULT~2"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_NFS4"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_NFS4"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_NFS4</code></a></dt>
  <dd style="width: auto;">&#x00A0;</dd>
</dl>
</div>
Supports all formats that can be created with
  <code class="Fn">archive_entry_acl_to_text</code>() or respectively
  <code class="Fn">archive_entry_acl_to_text_w</code>(). Existing ACL entries
  are preserved. To get a clean new ACL from text
  <code class="Fn">archive_entry_acl_clear</code>() must be called first.
  Entries prefixed with &#x201C;default:&#x201D; are treated as
  <code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</code> unless
  <var class="Fa">type</var> is
  <code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_NFS4</code>. Invalid entries,
  non-parseable ACL entries and entries beginning with the &#x2018;#&#x2019;
  character (comments) are skipped.
<p class="Pp" id="archive_entry_acl_next"><a class="permalink" href="#archive_entry_acl_next"><code class="Fn">archive_entry_acl_next</code></a>()
    return the next entry of the ACL list. This functions may only be called
    after <code class="Fn">archive_entry_acl_reset</code>() has indicated the
    presence of extended ACL entries.</p>
<p class="Pp" id="archive_entry_acl_reset"><a class="permalink" href="#archive_entry_acl_reset"><code class="Fn">archive_entry_acl_reset</code></a>()
    prepare reading the list of ACL entries with
    <code class="Fn">archive_entry_acl_next</code>(). The function returns 0 if
    no non-extended ACLs are found. In this case, the access permissions should
    be obtained by <a class="Xr">archive_entry_mode(3)</a> or set using
    <a class="Xr">chmod(2)</a>. Otherwise, the function returns the same value
    as <code class="Fn">archive_entry_acl_count</code>().</p>
<p class="Pp" id="archive_entry_acl_to_text"><a class="permalink" href="#archive_entry_acl_to_text"><code class="Fn">archive_entry_acl_to_text</code></a>()
    and
    <a class="permalink" href="#archive_entry_acl_to_text_w"><code class="Fn" id="archive_entry_acl_to_text_w">archive_entry_acl_to_text_w</code></a>()
    convert the ACL entries for the given type into a (wide) string of ACL
    entries separated by newline. If the pointer <var class="Fa">len_p</var> is
    not NULL, then the function shall return the length of the string (not
    including the NULL terminator) in the location pointed to by
    <var class="Fa">len_p</var>. The <var class="Fa">flag</var> argument is a
    bitwise-or.</p>
<p class="Pp">The following flags are effective only on POSIX.1e ACL:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_ACCESS~3"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_ACCESS~3"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code></a></dt>
  <dd>Output access ACLs.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_TYPE_DEFAULT~3"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_TYPE_DEFAULT~3"><code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</code></a></dt>
  <dd>Output POSIX.1e default ACLs.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_STYLE_MARK_DEFAULT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_STYLE_MARK_DEFAULT"><code class="Dv">ARCHIVE_ENTRY_ACL_STYLE_MARK_DEFAULT</code></a></dt>
  <dd>Prefix each default ACL entry with the word &#x201C;default:&#x201D;.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_STYLE_SOLARIS"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_STYLE_SOLARIS"><code class="Dv">ARCHIVE_ENTRY_ACL_STYLE_SOLARIS</code></a></dt>
  <dd>The mask and other ACLs don not contain a double colon.</dd>
</dl>
</div>
<p class="Pp">The following flags are effective only on NFSv4 ACL:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_STYLE_COMPACT"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_STYLE_COMPACT"><code class="Dv">ARCHIVE_ENTRY_ACL_STYLE_COMPACT</code></a></dt>
  <dd>Do not output minus characters for unset permissions and flags in NFSv4
      ACL permission and flag fields.</dd>
</dl>
</div>
<p class="Pp">The following flags are effective on both POSIX.1e and NFSv4
  ACL:</p>
<div class="Bd-indent">
<dl class="Bl-tag Bl-compact">
  <dt id="ARCHIVE_ENTRY_ACL_STYLE_EXTRA_ID"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_STYLE_EXTRA_ID"><code class="Dv">ARCHIVE_ENTRY_ACL_STYLE_EXTRA_ID</code></a></dt>
  <dd>Add an additional colon-separated field containing the user or group
    id.</dd>
  <dt id="ARCHIVE_ENTRY_ACL_STYLE_SEPARATOR_COMMA"><a class="permalink" href="#ARCHIVE_ENTRY_ACL_STYLE_SEPARATOR_COMMA"><code class="Dv">ARCHIVE_ENTRY_ACL_STYLE_SEPARATOR_COMMA</code></a></dt>
  <dd>Separate ACL entries with comma instead of newline.</dd>
</dl>
</div>
<p class="Pp">If the archive entry contains NFSv4 ACLs, all types of NFSv4 ACLs
    are returned. It the entry contains POSIX.1e ACLs and none of the flags
    <code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code> or
    <code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</code> are specified, both
    access and default entries are returned and default entries are prefixed
    with &#x201C;default:&#x201D;.</p>
<p class="Pp" id="archive_entry_acl_types"><a class="permalink" href="#archive_entry_acl_types"><code class="Fn">archive_entry_acl_types</code></a>()
    get ACL entry types contained in an archive entry's ACL. As POSIX.1e and
    NFSv4 ACL entries cannot be mixed, this function is a very efficient way to
    detect if an ACL already contains POSIX.1e or NFSv4 ACL entries.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<p class="Pp"><code class="Fn">archive_entry_acl_count</code>() and
    <code class="Fn">archive_entry_acl_reset</code>() returns the number of ACL
    entries that match the given type mask. For POSIX.1e ACLS if the type mask
    includes <code class="Dv">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</code> and at least
    one extended ACL entry exists, the three classic Unix permissions are
    counted.</p>
<p class="Pp"><code class="Fn">archive_entry_acl_from_text</code>() and
    <code class="Fn">archive_entry_acl_from_text_w</code>() return
    <code class="Dv">ARCHIVE_OK</code> if all entries were successfully parsed
    and <code class="Dv">ARCHIVE_WARN</code> if one or more entries were invalid
    or non-parseable.</p>
<p class="Pp"><code class="Fn">archive_entry_acl_next</code>() returns
    <code class="Dv">ARCHIVE_OK</code> on success,
    <code class="Dv">ARCHIVE_EOF</code> if no more ACL entries exist and
    <code class="Dv">ARCHIVE_WARN</code> if
    <code class="Fn">archive_entry_acl_reset</code>() has not been called
  first.</p>
<p class="Pp"><code class="Fn">archive_entry_acl_to_text</code>() returns a
    string representing the ACL entries matching the given type and flags on
    success or NULL on error.</p>
<p class="Pp"><code class="Fn">archive_entry_acl_to_text_w</code>() returns a
    wide string representing the ACL entries matching the given type and flags
    on success or NULL on error.</p>
<p class="Pp"><code class="Fn">archive_entry_acl_types</code>() returns a
    bitmask of ACL entry types or 0 if archive entry has no ACL entries.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">archive_entry(3)</a>,
    <a class="Xr">libarchive(3)</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 15, 2017</td>
    <td class="foot-os">Mac OS X 12</td>
  </tr>
</table>
</body>
</html>
