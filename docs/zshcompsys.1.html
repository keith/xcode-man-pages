<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>ZSHCOMPSYS(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ZSHCOMPSYS(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">ZSHCOMPSYS(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
zshcompsys - zsh completion system
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This describes the shell code for the `new' completion system, referred to as
  <b>compsys</b>. It is written in shell functions based on the features
  described in <i>zshcompwid</i>(1).
<p class="Pp">The features are contextual, sensitive to the point at which
    completion is started. Many completions are already provided. For this
    reason, a user can perform a great many tasks without knowing any details
    beyond how to initialize the system, which is described below in
    INITIALIZATION.</p>
<p class="Pp">The context that decides what completion is to be performed may
  be</p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>an argument or option position: these describe the position on the command
      line at which completion is requested. For example `first argument to
      rmdir, the word being completed names a directory';
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>a special context, denoting an element in the shell's syntax. For example
      `a word in command position' or `an array subscript'.
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">A full context specification contains other elements, as we shall
    describe.</p>
<p class="Pp">Besides commands names and contexts, the system employs two more
    concepts, <i>styles</i> and <i>tags</i>. These provide ways for the user to
    configure the system's behaviour.</p>
<p class="Pp">Tags play a dual role. They serve as a classification system for
    the matches, typically indicating a class of object that the user may need
    to distinguish. For example, when completing arguments of the <b>ls</b>
    command the user may prefer to try <b>files</b> before <b>directories</b>,
    so both of these are tags. They also appear as the rightmost element in a
    context specification.</p>
<p class="Pp">Styles modify various operations of the completion system, such as
    output formatting, but also what kinds of completers are used (and in what
    order), or which tags are examined. Styles may accept arguments and are
    manipulated using the <b>zstyle</b> command described in see
    <i>zshmodules</i>(1).</p>
<p class="Pp">In summary, tags describe <i>what</i> the completion objects are,
    and style <b>how</b> they are to be completed. At various points of
    execution, the completion system checks what styles and/or tags are defined
    for the current context, and uses that to modify its behavior. The full
    description of context handling, which determines how tags and other
    elements of the context influence the behaviour of styles, is described
    below in COMPLETION SYSTEM CONFIGURATION.</p>
<p class="Pp">When a completion is requested, a dispatcher function is called;
    see the description of <b>_main_complete</b> in the list of control
    functions below. This dispatcher decides which function should be called to
    produce the completions, and calls it. The result is passed to one or more
    <i>completers</i>, functions that implement individual completion
    strategies: simple completion, error correction, completion with error
    correction, menu selection, etc.</p>
<p class="Pp">More generally, the shell functions contained in the completion
    system are of two types:</p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>those beginning `<b>comp</b>' are to be called directly; there are only a
      few of these;
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>those beginning `<b>_</b>' are called by the completion code. The shell
      functions of this set, which implement completion behaviour and may be
      bound to keystrokes, are referred to as `widgets'. These proliferate as
      new completions are required.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="INITIALIZATION"><a class="permalink" href="#INITIALIZATION">INITIALIZATION</a></h1>
If the system was installed completely, it should be enough to call the shell
  function <b>compinit</b> from your initialization file; see the next section.
  However, the function <b>compinstall</b> can be run by a user to configure
  various aspects of the completion system.
<p class="Pp">Usually, <b>compinstall</b> will insert code into <b>.zshrc</b>,
    although if that is not writable it will save it in another file and tell
    you that file's location. Note that it is up to you to make sure that the
    lines added to <b>.zshrc</b> are actually run; you may, for example, need to
    move them to an earlier place in the file if <b>.zshrc</b> usually returns
    early. So long as you keep them all together (including the comment lines at
    the start and finish), you can rerun <b>compinstall</b> and it will
    correctly locate and modify these lines. Note, however, that any code you
    add to this section by hand is likely to be lost if you rerun
    <b>compinstall</b>, although lines using the command `<b>zstyle</b>' should
    be gracefully handled.</p>
<p class="Pp">The new code will take effect next time you start the shell, or
    run <b>.zshrc</b> by hand; there is also an option to make them take effect
    immediately. However, if <b>compinstall</b> has removed definitions, you
    will need to restart the shell to see the changes.</p>
<p class="Pp">To run <b>compinstall</b> you will need to make sure it is in a
    directory mentioned in your <b>fpath</b> parameter, which should already be
    the case if zsh was properly configured as long as your startup files do not
    remove the appropriate directories from <b>fpath</b>. Then it must be
    autoloaded (`<b>autoload -U compinstall</b>' is recommended). You can abort
    the installation any time you are being prompted for information, and your
    <b>.zshrc</b> will not be altered at all; changes only take place right at
    the end, where you are specifically asked for confirmation.</p>
<section class="Ss">
<h2 class="Ss" id="Use_of_compinit"><a class="permalink" href="#Use_of_compinit">Use
  of compinit</a></h2>
This section describes the use of <b>compinit</b> to initialize completion for
  the current session when called directly; if you have run <b>compinstall</b>
  it will be called automatically from your <b>.zshrc</b>.
<p class="Pp">To initialize the system, the function <b>compinit</b> should be
    in a directory mentioned in the <b>fpath</b> parameter, and should be
    autoloaded (`<b>autoload -U compinit</b>' is recommended), and then run
    simply as `<b>compinit</b>'. This will define a few utility functions,
    arrange for all the necessary shell functions to be autoloaded, and will
    then re-define all widgets that do completion to use the new system. If you
    use the <b>menu-select</b> widget, which is part of the <b>zsh/complist</b>
    module, you should make sure that that module is loaded before the call to
    <b>compinit</b> so that that widget is also re-defined. If completion styles
    (see below) are set up to perform expansion as well as completion by
    default, and the TAB key is bound to <b>expand-or-complete</b>,
    <b>compinit</b> will rebind it to <b>complete-word</b>; this is necessary to
    use the correct form of expansion.</p>
<p class="Pp">Should you need to use the original completion commands, you can
    still bind keys to the old widgets by putting a `<b>.</b>' in front of the
    widget name, e.g. `<b>.expand-or-complete</b>'.</p>
<p class="Pp">To speed up the running of <b>compinit</b>, it can be made to
    produce a dumped configuration that will be read in on future invocations;
    this is the default, but can be turned off by calling <b>compinit</b> with
    the option <b>-D</b>. The dumped file is <b>.zcompdump</b> in the same
    directory as the startup files (i.e. <b>$ZDOTDIR</b> or <b>$HOME</b>);
    alternatively, an explicit file name can be given by `<b>compinit -d</b>
    <i>dumpfile</i>'. The next invocation of <b>compinit</b> will read the
    dumped file instead of performing a full initialization.</p>
<p class="Pp">If the number of completion files changes, <b>compinit</b> will
    recognise this and produce a new dump file. However, if the name of a
    function or the arguments in the first line of a <b>#compdef</b> function
    (as described below) change, it is easiest to delete the dump file by hand
    so that <b>compinit</b> will re-create it the next time it is run. The check
    performed to see if there are new functions can be omitted by giving the
    option <b>-C</b>. In this case the dump file will only be created if there
    isn't one already.</p>
<p class="Pp">The dumping is actually done by another function, <b>compdump</b>,
    but you will only need to run this yourself if you change the configuration
    (e.g. using <b>compdef</b>) and then want to dump the new one. The name of
    the old dumped file will be remembered for this purpose.</p>
<p class="Pp">If the parameter <b>_compdir</b> is set, <b>compinit</b> uses it
    as a directory where completion functions can be found; this is only
    necessary if they are not already in the function search path.</p>
<p class="Pp">For security reasons <b>compinit</b> also checks if the completion
    system would use files not owned by root or by the current user, or files in
    directories that are world- or group-writable or that are not owned by root
    or by the current user. If such files or directories are found,
    <b>compinit</b> will ask if the completion system should really be used. To
    avoid these tests and make all files found be used without asking, use the
    option <b>-u</b>, and to make <b>compinit</b> silently ignore all insecure
    files and directories use the option <b>-i</b>. This security check is
    skipped entirely when the <b>-C</b> option is given.</p>
<p class="Pp">The security check can be retried at any time by running the
    function <b>compaudit</b>. This is the same check used by <b>compinit</b>,
    but when it is executed directly any changes to <b>fpath</b> are made local
    to the function so they do not persist. The directories to be checked may be
    passed as arguments; if none are given, <b>compaudit</b> uses <b>fpath</b>
    and <b>_compdir</b> to find completion system directories, adding missing
    ones to <b>fpath</b> as necessary. To force a check of exactly the
    directories currently named in <b>fpath</b>, set <b>_compdir</b> to an empty
    string before calling <b>compaudit</b> or <b>compinit</b>.</p>
<p class="Pp">The function <b>bashcompinit</b> provides compatibility with
    bash's programmable completion system. When run it will define the
    functions, <b>compgen</b> and <b>complete</b> which correspond to the bash
    builtins with the same names. It will then be possible to use completion
    specifications and functions written for bash.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Autoloaded_files"><a class="permalink" href="#Autoloaded_files">Autoloaded
  files</a></h2>
The convention for autoloaded functions used in completion is that they start
  with an underscore; as already mentioned, the <b>fpath/FPATH</b> parameter
  must contain the directory in which they are stored. If <b>zsh</b> was
  properly installed on your system, then <b>fpath/FPATH</b> automatically
  contains the required directories for the standard functions.
<p class="Pp">For incomplete installations, if <b>compinit</b> does not find
    enough files beginning with an underscore (fewer than twenty) in the search
    path, it will try to find more by adding the directory <b>_compdir</b> to
    the search path. If that directory has a subdirectory named <b>Base</b>, all
    subdirectories will be added to the path. Furthermore, if the subdirectory
    <b>Base</b> has a subdirectory named <b>Core</b>, <b>compinit</b> will add
    all subdirectories of the subdirectories to the path: this allows the
    functions to be in the same format as in the <b>zsh</b> source
  distribution.</p>
<p class="Pp">When <b>compinit</b> is run, it searches all such files accessible
    via <b>fpath/FPATH</b> and reads the first line of each of them. This line
    should contain one of the tags described below. Files whose first line does
    not start with one of these tags are not considered to be part of the
    completion system and will not be treated specially.</p>
<p class="Pp">The tags are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>#compdef</b> <i>name</i> ... [ <b>-</b>{<b>p</b>|<b>P</b>}
    <i>pattern</i> ... [ <b>-N</b> <i>name</i> ... ] ]</dt>
  <dd>The file will be made autoloadable and the function defined in it will be
      called when completing <i>name</i>s, each of which is either the name of a
      command whose arguments are to be completed or one of a number of special
      contexts in the form <b>-</b><i>context</i><b>-</b> described below.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Each <i>name</i> may also be of the form
    `<i>cmd</i><b>=</b><i>service</i>'. When completing the command <i>cmd</i>,
    the function typically behaves as if the command (or special context)
    <i>service</i> was being completed instead. This provides a way of altering
    the behaviour of functions that can perform many different completions. It
    is implemented by setting the parameter <b>$service</b> when calling the
    function; the function may choose to interpret this how it wishes, and
    simpler functions will probably ignore it.</p>
<p class="Pp">If the <b>#compdef</b> line contains one of the options <b>-p</b>
    or <b>-P</b>, the words following are taken to be patterns. The function
    will be called when completion is attempted for a command or context that
    matches one of the patterns. The options <b>-p</b> and <b>-P</b> are used to
    specify patterns to be tried before or after other completions respectively.
    Hence <b>-P</b> may be used to specify default actions.</p>
<p class="Pp">The option <b>-N</b> is used after a list following <b>-p</b> or
    <b>-P</b>; it specifies that remaining words no longer define patterns. It
    is possible to toggle between the three options as many times as
  necessary.</p>
</div>
<dl class="Bl-tag">
  <dt><b>#compdef -k</b> <i>style key-sequence</i> ...</dt>
  <dd>This option creates a widget behaving like the builtin widget <i>style</i>
      and binds it to the given <i>key-sequence</i>s, if any. The <i>style</i>
      must be one of the builtin widgets that perform completion, namely
      <b>complete-word</b>, <b>delete-char-or-list</b>,
      <b>expand-or-complete</b>, <b>expand-or-complete-prefix</b>,
      <b>list-choices</b>, <b>menu-complete</b>, <b>menu-expand-or-complete</b>,
      or <b>reverse-menu-complete</b>. If the <b>zsh/complist</b> module is
      loaded (see <i>zshmodules</i>(1)) the widget <b>menu-select</b> is also
      available.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When one of the <i>key-sequence</i>s is typed, the function in the
    file will be invoked to generate the matches. Note that a key will not be
    re-bound if it already was (that is, was bound to something other than
    <b>undefined-key</b>). The widget created has the same name as the file and
    can be bound to any other keys using <b>bindkey</b> as usual.</p>
</div>
<dl class="Bl-tag">
  <dt><b>#compdef -K</b> <i>widget-name</i> <i>style</i> <i>key-sequence</i> [
    <i>name</i> <i>style</i> <i>seq</i> ... ]</dt>
  <dd>This is similar to <b>-k</b> except that only one <i>key-sequence</i>
      argument may be given for each <i>widget-name</i> <i>style</i> pair.
      However, the entire set of three arguments may be repeated with a
      different set of arguments. Note in particular that the <i>widget-name</i>
      must be distinct in each set. If it does not begin with `<b>_</b>' this
      will be added. The <i>widget-name</i> should not clash with the name of
      any existing widget: names based on the name of the function are most
      useful. For example,</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>#compdef -K _foo_complete complete-word &quot;^X^C&quot; \ </b>
<b>  _foo_list list-choices &quot;^X^D&quot;</b>
</pre>
</div>
<p class="Pp">(all on one line) defines a widget <b>_foo_complete</b> for
    completion, bound to `<b>^X^C</b>', and a widget <b>_foo_list</b> for
    listing, bound to `<b>^X^D</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>#autoload</b> [ <i>options</i> ]</dt>
  <dd>Functions with the <b>#autoload</b> tag are marked for autoloading but are
      not otherwise treated specially. Typically they are to be called from
      within one of the completion functions. Any <i>options</i> supplied will
      be passed to the <b>autoload</b> builtin; a typical use is <b>+X</b> to
      force the function to be loaded immediately. Note that the <b>-U</b> and
      <b>-z</b> flags are always added implicitly.</dd>
</dl>
<p class="Pp">The <b>#</b> is part of the tag name and no white space is allowed
    after it. The <b>#compdef</b> tags use the <b>compdef</b> function described
    below; the main difference is that the name of the function is supplied
    implicitly.</p>
<p class="Pp">The special contexts for which completion functions can be defined
    are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-array-value-</b></dt>
  <dd>The right hand side of an array-assignment
      (`<i>name</i><b>=(</b><i>...</i><b>)</b>')</dd>
  <dt><b>-brace-parameter-</b></dt>
  <dd>The name of a parameter expansion within braces
      (`<b>${</b><i>...</i><b>}</b>')</dd>
  <dt><b>-assign-parameter-</b></dt>
  <dd>The name of a parameter in an assignment, i.e. on the left hand side of an
      `<b>=</b>'</dd>
  <dt><b>-command-</b></dt>
  <dd>A word in command position</dd>
  <dt><b>-condition-</b></dt>
  <dd>A word inside a condition (`<b>[[</b><i>...</i><b>]]</b>')</dd>
  <dt><b>-default-</b></dt>
  <dd>Any word for which no other completion is defined</dd>
  <dt><b>-equal-</b></dt>
  <dd>A word beginning with an equals sign</dd>
  <dt><b>-first-</b></dt>
  <dd>This is tried before any other completion function. The function called
      may set the <b>_compskip</b> parameter to one of various values:
      <b>all</b>: no further completion is attempted; a string containing the
      substring <b>patterns</b>: no pattern completion functions will be called;
      a string containing <b>default</b>: the function for the
      `<b>-default-</b>' context will not be called, but functions defined for
      commands will be.</dd>
  <dt><b>-math-</b></dt>
  <dd>Inside mathematical contexts, such as `<b>((</b><i>...</i><b>))</b>'</dd>
  <dt><b>-parameter-</b></dt>
  <dd>The name of a parameter expansion (`<b>$</b><i>...</i>')</dd>
  <dt><b>-redirect-</b></dt>
  <dd>The word after a redirection operator.</dd>
  <dt><b>-subscript-</b></dt>
  <dd>The contents of a parameter subscript.</dd>
  <dt><b>-tilde-</b></dt>
  <dd>After an initial tilde (`<b>~</b>'), but before the first slash in the
      word.</dd>
  <dt><b>-value-</b></dt>
  <dd>On the right hand side of an assignment.</dd>
</dl>
<p class="Pp">Default implementations are supplied for each of these contexts.
    In most cases the context <b>-</b><i>context</i><b>-</b> is implemented by a
    corresponding function <b>_</b><i>context</i>, for example the context
    `<b>-tilde-</b>' and the function `<b>_tilde</b>').</p>
<p class="Pp">The contexts <b>-redirect-</b> and <b>-value-</b> allow extra
    context-specific information. (Internally, this is handled by the functions
    for each context calling the function <b>_dispatch</b>.) The extra
    information is added separated by commas.</p>
<p class="Pp">For the <b>-redirect-</b> context, the extra information is in the
    form `<b>-redirect-,</b><i>op</i><b>,</b><i>command</i>', where <i>op</i> is
    the redirection operator and <i>command</i> is the name of the command on
    the line. If there is no command on the line yet, the <i>command</i> field
    will be empty.</p>
<p class="Pp">For the <b>-value-</b> context, the form is
    `<b>-value-,</b><i>name</i><b>,</b><i>command</i>', where <i>name</i> is the
    name of the parameter on the left hand side of the assignment. In the case
    of elements of an associative array, for example `<b>assoc=(key
    &lt;TAB&gt;</b>', <i>name</i> is expanded to
    `<i>name</i><b>-</b><i>key</i>'. In certain special contexts, such as
    completing after `<b>make CFLAGS=</b>', the <i>command</i> part gives the
    name of the command, here <b>make</b>; otherwise it is empty.</p>
<p class="Pp">It is not necessary to define fully specific completions as the
    functions provided will try to generate completions by progressively
    replacing the elements with `<b>-default-</b>'. For example, when completing
    after `<b>foo=&lt;TAB&gt;</b>', <b>_value</b> will try the names
    `<b>-value-,foo,</b>' (note the empty <i>command</i> part),
    `<b>-value-,foo,-default-</b>' and`<b>-value-,-default-,-default-</b>', in
    that order, until it finds a function to handle the context.</p>
<p class="Pp">As an example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>compdef '_files -g &quot;*.log&quot;' '-redirect-,2&gt;,-default-'</b>
</pre>
</div>
<p class="Pp">completes files matching `<b>*.log</b>' after `<b>2&gt;
    &lt;TAB&gt;</b>' for any command with no more specific handler defined.</p>
<p class="Pp">Also:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>compdef _foo -value-,-default-,-default-</b>
</pre>
</div>
<p class="Pp">specifies that <b>_foo</b> provides completions for the values of
    parameters for which no special function has been defined. This is usually
    handled by the function <b>_value</b> itself.</p>
<p class="Pp">The same lookup rules are used when looking up styles (as
    described below); for example</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:-redirect-,2&gt;,*:*' file-patterns '*.log'</b>
</pre>
</div>
<p class="Pp">is another way to make completion after `<b>2&gt; &lt;TAB&gt;</b>'
    complete files matching `<b>*.log</b>'.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Functions"><a class="permalink" href="#Functions">Functions</a></h2>
The following function is defined by <b>compinit</b> and may be called directly.
<p class="Pp"></p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>compdef</b> [ <b>-ane</b> ] <i>function name</i> ... [
    <b>-</b>{<b>p</b>|<b>P</b>} <i>pattern</i> ... [ <b>-N</b> <i>name</i>
    ...]]</dt>
  <dd></dd>
  <dt><b>compdef -d</b> <i>name</i> ...</dt>
  <dd></dd>
  <dt><b>compdef -k</b> [ <b>-an</b> ] <i>function style key-sequence</i> [
    <i>key-sequence</i> ... ]</dt>
  <dd></dd>
  <dt><b>compdef -K</b> [ <b>-an</b> ] <i>function name style key-seq</i> [
    <i>name style seq</i> ... ]</dt>
  <dd>The first form defines the <i>function</i> to call for completion in the
      given contexts as described for the <b>#compdef</b> tag above.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Alternatively, all the arguments may have the form
    `<i>cmd</i><b>=</b><i>service</i>'. Here <i>service</i> should already have
    been defined by `<i>cmd1</i><b>=</b><i>service</i>' lines in <b>#compdef</b>
    files, as described above. The argument for <i>cmd</i> will be completed in
    the same way as <i>service</i>.</p>
<p class="Pp">The <i>function</i> argument may alternatively be a string
    containing almost any shell code. If the string contains an equal sign, the
    above will take precedence. The option <b>-e</b> may be used to specify the
    first argument is to be evaluated as shell code even if it contains an equal
    sign. The string will be executed using the <b>eval</b> builtin command to
    generate completions. This provides a way of avoiding having to define a new
    completion function. For example, to complete files ending in `<b>.h</b>' as
    arguments to the command <b>foo</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>compdef '_files -g &quot;*.h&quot;' foo</b>
</pre>
</div>
<p class="Pp">The option <b>-n</b> prevents any completions already defined for
    the command or context from being overwritten.</p>
<p class="Pp">The option <b>-d</b> deletes any completion defined for the
    command or contexts listed.</p>
<p class="Pp">The <i>name</i>s may also contain <b>-p</b>, <b>-P</b> and
    <b>-N</b> options as described for the <b>#compdef</b> tag. The effect on
    the argument list is identical, switching between definitions of patterns
    tried initially, patterns tried finally, and normal commands and
  contexts.</p>
<p class="Pp">The parameter <b>$_compskip</b> may be set by any function defined
    for a pattern context. If it is set to a value containing the substring
    `<b>patterns</b>' none of the pattern-functions will be called; if it is set
    to a value containing the substring `<b>all</b>', no other function will be
    called. Setting <b>$_compskip</b> in this manner is of particular utility
    when using the <b>-p</b> option, as otherwise the dispatcher will move on to
    additional functions (likely the default one) after calling the
    pattern-context one, which can mangle the display of completion
    possibilities if not handled properly.</p>
<p class="Pp">The form with <b>-k</b> defines a widget with the same name as the
    <i>function</i> that will be called for each of the <i>key-sequence</i>s;
    this is like the <b>#compdef -k</b> tag. The function should generate the
    completions needed and will otherwise behave like the builtin widget whose
    name is given as the <i>style</i> argument. The widgets usable for this are:
    <b>complete-word</b>, <b>delete-char-or-list</b>, <b>expand-or-complete</b>,
    <b>expand-or-complete-prefix</b>, <b>list-choices</b>, <b>menu-complete</b>,
    <b>menu-expand-or-complete</b>, and <b>reverse-menu-complete</b>, as well as
    <b>menu-select</b> if the <b>zsh/complist</b> module is loaded. The option
    <b>-n</b> prevents the key being bound if it is already to bound to
    something other than <b>undefined-key</b>.</p>
<p class="Pp">The form with <b>-K</b> is similar and defines multiple widgets
    based on the same <i>function</i>, each of which requires the set of three
    arguments <i>name</i>, <i>style</i> and <i>key-seq</i>uence, where the
    latter two are as for <b>-k</b> and the first must be a unique widget name
    beginning with an underscore.</p>
<p class="Pp">Wherever applicable, the <b>-a</b> option makes the
    <i>function</i> autoloadable, equivalent to <b>autoload -U
    </b><i>function</i>.</p>
</div>
<p class="Pp">The function <b>compdef</b> can be used to associate existing
    completion functions with new commands. For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>compdef _pids foo</b>
</pre>
</div>
<p class="Pp">uses the function <b>_pids</b> to complete process IDs for the
    command <b>foo</b>.</p>
<p class="Pp">Note also the <b>_gnu_generic</b> function described below, which
    can be used to complete options for commands that understand the
    `<b>-</b><b>-help</b>' option.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_SYSTEM_CONFIGURATION"><a class="permalink" href="#COMPLETION_SYSTEM_CONFIGURATION">COMPLETION
  SYSTEM CONFIGURATION</a></h1>
This section gives a short overview of how the completion system works, and then
  more detail on how users can configure how and when matches are generated.
<section class="Ss">
<h2 class="Ss" id="Overview"><a class="permalink" href="#Overview">Overview</a></h2>
When completion is attempted somewhere on the command line the completion system
  begins building the context. The context represents everything that the shell
  knows about the meaning of the command line and the significance of the cursor
  position. This takes account of a number of things including the command word
  (such as `<b>grep</b>' or `<b>zsh</b>') and options to which the current word
  may be an argument (such as the `<b>-o</b>' option to <b>zsh</b> which takes a
  shell option as an argument).
<p class="Pp">The context starts out very generic (&quot;we are beginning a
    completion&quot;) and becomes more specific as more is learned (&quot;the
    current word is in a position that is usually a command name&quot; or
    &quot;the current word might be a variable name&quot; and so on). Therefore
    the context will vary during the same call to the completion system.</p>
<p class="Pp">This context information is condensed into a string consisting of
    multiple fields separated by colons, referred to simply as `the context' in
    the remainder of the documentation. Note that a user of the completion
    system rarely needs to compose a context string, unless for example a new
    function is being written to perform completion for a new command. What a
    user may need to do is compose a <i>style</i> pattern, which is matched
    against a context when needed to look up context-sensitive options that
    configure the completion system.</p>
<p class="Pp">The next few paragraphs explain how a context is composed within
    the completion function suite. Following that is discussion of how
    <i>styles</i> are defined. Styles determine such things as how the matches
    are generated, similarly to shell options but with much more control. They
    are defined with the <b>zstyle</b> builtin command (see
    <i>zshmodules</i>(1)).</p>
<p class="Pp">The context string always consists of a fixed set of fields,
    separated by colons and with a leading colon before the first. Fields which
    are not yet known are left empty, but the surrounding colons appear anyway.
    The fields are always in the order
    <b>:completion:</b><i>function</i><b>:</b><i>completer</i><b>:</b><i>command</i><b>:</b><i>argument</i><b>:</b><i>tag</i>.
    These have the following meaning:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The literal string <b>completion</b>, saying that this style is used by
      the completion system. This distinguishes the context from those used by,
      for example, zle widgets and ZFTP functions.
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>The <i>function</i>, if completion is called from a named widget rather
      than through the normal completion system. Typically this is blank, but it
      is set by special widgets such as <b>predict-on</b> and the various
      functions in the <b>Widget</b> directory of the distribution to the name
      of that function, often in an abbreviated form.
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>The <i>completer</i> currently active, the name of the function without
      the leading underscore and with other underscores converted to hyphens. A
      `completer' is in overall control of how completion is to be performed;
      `<b>complete</b>' is the simplest, but other completers exist to perform
      related tasks such as correction, or to modify the behaviour of a later
      completer. See the section `Control Functions' below for more information.
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>The <i>command</i> or a special <b>-</b><i>context</i><b>-</b>, just at it
      appears following the <b>#compdef</b> tag or the <b>compdef</b> function.
      Completion functions for commands that have sub-commands usually modify
      this field to contain the name of the command followed by a minus sign and
      the sub-command. For example, the completion function for the <b>cvs</b>
      command sets this field to <b>cvs-add</b> when completing arguments to the
      <b>add</b> subcommand.
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>The <i>argument</i>; this indicates which command line or option argument
      we are completing. For command arguments this generally takes the form
      <b>argument-</b><i>n</i>, where <i>n</i> is the number of the argument,
      and for arguments to options the form
      <b>option-</b><i>opt</i><b>-</b><i>n</i> where <i>n</i> is the number of
      the argument to option <i>opt</i>. However, this is only the case if the
      command line is parsed with standard UNIX-style options and arguments, so
      many completions do not set this.
    <p class="Pp"></p>
  </dd>
  <dt>&#x2022;</dt>
  <dd>The <i>tag</i>. As described previously, tags are used to discriminate
      between the types of matches a completion function can generate in a
      certain context. Any completion function may use any tag name it likes,
      but a list of the more common ones is given below.
    <p class="Pp"></p>
  </dd>
</dl>
<p class="Pp">The context is gradually put together as the functions are
    executed, starting with the main entry point, which adds <b>:completion:</b>
    and the <i>function</i> element if necessary. The completer then adds the
    <i>completer</i> element. The contextual completion adds the <i>command</i>
    and <i>argument</i> options. Finally, the <i>tag</i> is added when the types
    of completion are known. For example, the context name</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b></b><b>:completion::complete:dvips:option-o-1:files</b><b></b><b></b>
</pre>
</div>
<p class="Pp">says that normal completion was attempted as the first argument to
    the option <b>-o</b> of the command <b>dvips</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b></b><b>dvips -o ...</b><b></b><b></b>
</pre>
</div>
<p class="Pp">and the completion function will generate filenames.</p>
<p class="Pp">Usually completion will be tried for all possible tags in an order
    given by the completion function. However, this can be altered by using the
    <b>tag-order</b> style. Completion is then restricted to the list of given
    tags in the given order.</p>
<p class="Pp">The <b>_complete_help</b> bindable command shows all the contexts
    and tags available for completion at a particular point. This provides an
    easy way of finding information for <b>tag-order</b> and other styles. It is
    described in the section `Bindable Commands' below.</p>
<p class="Pp">When looking up styles the completion system uses full context
    names, including the tag. Looking up the value of a style therefore consists
    of two things: the context, which is matched to the most specific (best
    fitting) style pattern, and the name of the style itself, which must be
    matched exactly. The following examples demonstrate that style patterns may
    be loosely defined for styles that apply broadly, or as tightly defined as
    desired for styles that apply in narrower circumstances.</p>
<p class="Pp">For example, many completion functions can generate matches in a
    simple and a verbose form and use the <b>verbose</b> style to decide which
    form should be used. To make all such functions use the verbose form,
  put</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' verbose yes</b>
</pre>
</div>
<p class="Pp">in a startup file (probably <b>.zshrc</b>). This gives the
    <b>verbose</b> style the value <b>yes</b> in every context inside the
    completion system, unless that context has a more specific definition. It is
    best to avoid giving the context as `<b>*</b>' in case the style has some
    meaning outside the completion system.</p>
<p class="Pp">Many such general purpose styles can be configured simply by using
    the <b>compinstall</b> function.</p>
<p class="Pp">A more specific example of the use of the <b>verbose</b> style is
    by the completion for the <b>kill</b> builtin. If the style is set, the
    builtin lists full job texts and process command lines; otherwise it shows
    the bare job numbers and PIDs. To turn the style off for this use only:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:kill:*:*' verbose no</b>
</pre>
</div>
<p class="Pp">For even more control, the style can use one of the tags
    `<b>jobs</b>' or `<b>processes</b>'. To turn off verbose display only for
    jobs:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:kill:*:jobs' verbose no</b>
</pre>
</div>
<p class="Pp">The <b>-e</b> option to <b>zstyle</b> even allows completion
    function code to appear as the argument to a style; this requires some
    understanding of the internals of completion functions (see see
    <i>zshcompwid</i>(1))). For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b></b><b>zstyle -e ':completion:*' hosts 'reply=($myhosts)'</b><b></b><b></b>
</pre>
</div>
<p class="Pp">This forces the value of the <b>hosts</b> style to be read from
    the variable <b>myhosts</b> each time a host name is needed; this is useful
    if the value of <b>myhosts</b> can change dynamically. For another useful
    example, see the example in the description of the <b>file-list</b> style
    below. This form can be slow and should be avoided for commonly examined
    styles such as <b>menu</b> and <b>list-rows-first</b>.</p>
<p class="Pp">Note that the order in which styles are <i>defined</i> does not
    matter; the style mechanism uses the most specific possible match for a
    particular style to determine the set of values. More precisely, strings are
    preferred over patterns (for example, `<b>:completion::complete:::foo</b>'
    is more specific than `<b>:completion::complete:::*'</b>), and longer
    patterns are preferred over shorter patterns.</p>
<p class="Pp">A good rule of thumb is that any completion style pattern that
    needs to include more than one wildcard (<b>*</b>) and that does not end in
    a tag name, should include all six colons (<b>:</b>), possibly surrounding
    additional wildcards.</p>
<p class="Pp">Style names like those of tags are arbitrary and depend on the
    completion function. However, the following two sections list some of the
    most common tags and styles.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Standard_Tags"><a class="permalink" href="#Standard_Tags">Standard
  Tags</a></h2>
Some of the following are only used when looking up particular styles and do not
  refer to a type of match.
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>accounts</b></dt>
  <dd>used to look up the <b>users-hosts</b> style</dd>
  <dt><b>all-expansions</b></dt>
  <dd>used by the <b>_expand</b> completer when adding the single string
      containing all possible expansions</dd>
  <dt><b>all-files</b></dt>
  <dd>for the names of all files (as distinct from a particular subset, see the
      <b>globbed-files</b> tag).</dd>
  <dt><b>arguments</b></dt>
  <dd>for arguments to a command</dd>
  <dt><b>arrays</b></dt>
  <dd>for names of array parameters</dd>
  <dt><b>association-keys</b></dt>
  <dd>for keys of associative arrays; used when completing inside a subscript to
      a parameter of this type</dd>
  <dt><b>bookmarks</b></dt>
  <dd>when completing bookmarks (e.g. for URLs and the <b>zftp</b> function
      suite)</dd>
  <dt><b>builtins</b></dt>
  <dd>for names of builtin commands</dd>
  <dt><b>characters</b></dt>
  <dd>for single characters in arguments of commands such as <b>stty</b>. Also
      used when completing character classes after an opening bracket</dd>
  <dt><b>colormapids</b></dt>
  <dd>for X colormap ids</dd>
  <dt><b>colors</b></dt>
  <dd>for color names</dd>
  <dt><b>commands</b></dt>
  <dd>for names of external commands. Also used by complex commands such as
      <b>cvs</b> when completing names subcommands.</dd>
  <dt><b>contexts</b></dt>
  <dd>for contexts in arguments to the <b>zstyle</b> builtin command</dd>
  <dt><b>corrections</b></dt>
  <dd>used by the <b>_approximate</b> and <b>_correct</b> completers for
      possible corrections</dd>
  <dt><b>cursors</b></dt>
  <dd>for cursor names used by X programs</dd>
  <dt><b>default</b></dt>
  <dd>used in some contexts to provide a way of supplying a default when more
      specific tags are also valid. Note that this tag is used when only the
      <i>function</i> field of the context name is set</dd>
  <dt><b>descriptions</b></dt>
  <dd>used when looking up the value of the <b>format</b> style to generate
      descriptions for types of matches</dd>
  <dt><b>devices</b></dt>
  <dd>for names of device special files</dd>
  <dt><b>directories</b></dt>
  <dd>for names of directories -- <b>local-directories</b> is used instead when
      completing arguments of <b>cd</b> and related builtin commands when the
      <b>cdpath</b> array is set</dd>
  <dt><b>directory-stack</b></dt>
  <dd>for entries in the directory stack</dd>
  <dt><b>displays</b></dt>
  <dd>for X display names</dd>
  <dt><b>domains</b></dt>
  <dd>for network domains</dd>
  <dt><b>email-</b><i>plugin</i></dt>
  <dd>for email addresses from the `<b>_email-</b><i>plugin</i>' backend of
      <b>_email_addresses</b></dd>
  <dt><b>expansions</b></dt>
  <dd>used by the <b>_expand</b> completer for individual words (as opposed to
      the complete set of expansions) resulting from the expansion of a word on
      the command line</dd>
  <dt><b>extensions</b></dt>
  <dd>for X server extensions</dd>
  <dt><b>file-descriptors</b></dt>
  <dd>for numbers of open file descriptors</dd>
  <dt><b>files</b></dt>
  <dd>the generic file-matching tag used by functions completing filenames</dd>
  <dt><b>fonts</b></dt>
  <dd>for X font names</dd>
  <dt><b>fstypes</b></dt>
  <dd>for file system types (e.g. for the <b>mount</b> command)</dd>
  <dt><b>functions</b></dt>
  <dd>names of functions -- normally shell functions, although certain commands
      may understand other kinds of function</dd>
  <dt><b>globbed-files</b></dt>
  <dd>for filenames when the name has been generated by pattern matching</dd>
  <dt><b>groups</b></dt>
  <dd>for names of user groups</dd>
  <dt><b>history-words</b></dt>
  <dd>for words from the history</dd>
  <dt><b>hosts</b></dt>
  <dd>for hostnames</dd>
  <dt><b>indexes</b></dt>
  <dd>for array indexes</dd>
  <dt><b>jobs</b></dt>
  <dd>for jobs (as listed by the `<b>jobs</b>' builtin)</dd>
  <dt><b>interfaces</b></dt>
  <dd>for network interfaces</dd>
  <dt><b>keymaps</b></dt>
  <dd>for names of zsh keymaps</dd>
  <dt><b>keysyms</b></dt>
  <dd>for names of X keysyms</dd>
  <dt><b>libraries</b></dt>
  <dd>for names of system libraries</dd>
  <dt><b>limits</b></dt>
  <dd>for system limits</dd>
  <dt><b>local-directories</b></dt>
  <dd>for names of directories that are subdirectories of the current working
      directory when completing arguments of <b>cd</b> and related builtin
      commands (compare <b>path-directories</b>) -- when the <b>cdpath</b> array
      is unset, <b>directories</b> is used instead</dd>
  <dt><b>manuals</b></dt>
  <dd>for names of manual pages</dd>
  <dt><b>mailboxes</b></dt>
  <dd>for e-mail folders</dd>
  <dt><b>maps</b></dt>
  <dd>for map names (e.g. NIS maps)</dd>
  <dt><b>messages</b></dt>
  <dd>used to look up the <b>format</b> style for messages</dd>
  <dt><b>modifiers</b></dt>
  <dd>for names of X modifiers</dd>
  <dt><b>modules</b></dt>
  <dd>for modules (e.g. <b>zsh</b> modules)</dd>
  <dt><b>my-accounts</b></dt>
  <dd>used to look up the <b>users-hosts</b> style</dd>
  <dt><b>named-directories</b></dt>
  <dd>for named directories (you wouldn't have guessed that, would you?)</dd>
  <dt><b>names</b></dt>
  <dd>for all kinds of names</dd>
  <dt><b>newsgroups</b></dt>
  <dd>for USENET groups</dd>
  <dt><b>nicknames</b></dt>
  <dd>for nicknames of NIS maps</dd>
  <dt><b>options</b></dt>
  <dd>for command options</dd>
  <dt><b>original</b></dt>
  <dd>used by the <b>_approximate</b>, <b>_correct</b> and <b>_expand</b>
      completers when offering the original string as a match</dd>
  <dt><b>other-accounts</b></dt>
  <dd>used to look up the <b>users-hosts</b> style</dd>
  <dt><b>other-files</b></dt>
  <dd>for the names of any non-directory files. This is used instead of
      <b>all-files</b> when the <b>list-dirs-first</b> style is in effect.</dd>
  <dt><b>packages</b></dt>
  <dd>for packages (e.g. <b>rpm</b> or installed <b>Debian</b> packages)</dd>
  <dt><b>parameters</b></dt>
  <dd>for names of parameters</dd>
  <dt><b>path-directories</b></dt>
  <dd>for names of directories found by searching the <b>cdpath</b> array when
      completing arguments of <b>cd</b> and related builtin commands (compare
      <b>local-directories</b>)</dd>
  <dt><b>paths</b></dt>
  <dd>used to look up the values of the <b>expand</b>, <b>ambiguous</b> and
      <b>special-dirs</b> styles</dd>
  <dt><b>pods</b></dt>
  <dd>for perl pods (documentation files)</dd>
  <dt><b>ports</b></dt>
  <dd>for communication ports</dd>
  <dt><b>prefixes</b></dt>
  <dd>for prefixes (like those of a URL)</dd>
  <dt><b>printers</b></dt>
  <dd>for print queue names</dd>
  <dt><b>processes</b></dt>
  <dd>for process identifiers</dd>
  <dt><b>processes-names</b></dt>
  <dd>used to look up the <b>command</b> style when generating the names of
      processes for <b>killall</b></dd>
  <dt><b>sequences</b></dt>
  <dd>for sequences (e.g. <b>mh</b> sequences)</dd>
  <dt><b>sessions</b></dt>
  <dd>for sessions in the <b>zftp</b> function suite</dd>
  <dt><b>signals</b></dt>
  <dd>for signal names</dd>
  <dt><b>strings</b></dt>
  <dd>for strings (e.g. the replacement strings for the <b>cd</b> builtin
      command)</dd>
  <dt><b>styles</b></dt>
  <dd>for styles used by the zstyle builtin command</dd>
  <dt><b>suffixes</b></dt>
  <dd>for filename extensions</dd>
  <dt><b>tags</b></dt>
  <dd>for tags (e.g. <b>rpm</b> tags)</dd>
  <dt><b>targets</b></dt>
  <dd>for makefile targets</dd>
  <dt><b>time-zones</b></dt>
  <dd>for time zones (e.g. when setting the <b>TZ</b> parameter)</dd>
  <dt><b>types</b></dt>
  <dd>for types of whatever (e.g. address types for the <b>xhost</b>
    command)</dd>
  <dt><b>urls</b></dt>
  <dd>used to look up the <b>urls</b> and <b>local</b> styles when completing
      URLs</dd>
  <dt><b>users</b></dt>
  <dd>for usernames</dd>
  <dt><b>values</b></dt>
  <dd>for one of a set of values in certain lists</dd>
  <dt><b>variant</b></dt>
  <dd>used by <b>_pick_variant</b> to look up the command to run when
      determining what program is installed for a particular command name.</dd>
  <dt><b>visuals</b></dt>
  <dd>for X visuals</dd>
  <dt><b>warnings</b></dt>
  <dd>used to look up the <b>format</b> style for warnings</dd>
  <dt><b>widgets</b></dt>
  <dd>for zsh widget names</dd>
  <dt><b>windows</b></dt>
  <dd>for IDs of X windows</dd>
  <dt><b>zsh-options</b></dt>
  <dd>for shell options</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Standard_Styles"><a class="permalink" href="#Standard_Styles">Standard
  Styles</a></h2>
Note that the values of several of these styles represent boolean values. Any of
  the strings `<b>true</b>', `<b>on</b>', `<b>yes</b>', and `<b>1</b>' can be
  used for the value `true' and any of the strings `<b>false</b>', `<b>off</b>',
  `<b>no</b>', and `<b>0</b>' for the value `false'. The behavior for any other
  value is undefined except where explicitly mentioned. The default value may be
  either `true' or `false' if the style is not set.
<p class="Pp">Some of these styles are tested first for every possible tag
    corresponding to a type of match, and if no style was found, for the
    <b>default</b> tag. The most notable styles of this type are <b>menu</b>,
    <b>list-colors</b> and styles controlling completion listing such as
    <b>list-packed</b> and <b>last-prompt</b>. When tested for the
    <b>default</b> tag, only the <i>function</i> field of the context will be
    set so that a style using the <b>default</b> tag will normally be defined
    along the lines of:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:default' menu ...</b>
</pre>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>accept-exact</b></dt>
  <dd>This is tested for the <b>default</b> tag in addition to the tags valid
      for the current context. If it is set to `true' and any of the trial
      matches is the same as the string on the command line, this match will
      immediately be accepted (even if it would otherwise be considered
      ambiguous).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When completing pathnames (where the tag used is `<b>paths</b>')
    this style accepts any number of patterns as the value in addition to the
    boolean values. Pathnames matching one of these patterns will be accepted
    immediately even if the command line contains some more partially typed
    pathname components and these match no file under the directory
  accepted.</p>
<p class="Pp">This style is also used by the <b>_expand</b> completer to decide
    if words beginning with a tilde or parameter expansion should be expanded.
    For example, if there are parameters <b>foo</b> and <b>foobar</b>, the
    string `<b>$foo</b>' will only be expanded if <b>accept-exact</b> is set to
    `true'; otherwise the completion system will be allowed to complete
    <b>$foo</b> to <b>$foobar</b>. If the style is set to `<b>continue</b>',
    <b>_expand</b> will add the expansion as a match and the completion system
    will also be allowed to continue.</p>
</div>
<dl class="Bl-tag">
  <dt><b>accept-exact-dirs</b></dt>
  <dd>This is used by filename completion. Unlike <b>accept-exact</b> it is a
      boolean. By default, filename completion examines all components of a path
      to see if there are completions of that component, even if the component
      matches an existing directory. For example, when completion after
      <b>/usr/bin/</b>, the function examines possible completions to
      <b>/usr</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When this style is `true', any prefix of a path that matches an
    existing directory is accepted without any attempt to complete it further.
    Hence, in the given example, the path <b>/usr/bin/</b> is accepted
    immediately and completion tried in that directory.</p>
<p class="Pp">This style is also useful when completing after directories that
    magically appear when referenced, such as ZFS <b>.zfs</b> directories or
    NetApp <b>.snapshot</b> directories. When the style is set the shell does
    not check for the existence of the directory within the parent
  directory.</p>
<p class="Pp">If you wish to inhibit this behaviour entirely, set the
    <b>path-completion</b> style (see below) to `false'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>add-space</b></dt>
  <dd>This style is used by the <b>_expand</b> completer. If it is `true' (the
      default), a space will be inserted after all words resulting from the
      expansion, or a slash in the case of directory names. If the value is
      `<b>file</b>', the completer will only add a space to names of existing
      files. Either a boolean `true' or the value `<b>file</b>' may be combined
      with `<b>subst</b>', in which case the completer will not add a space to
      words generated from the expansion of a substitution of the form
      `<b>$(</b><i>...</i><b>)</b>' or `<b>${</b><i>...</i><b>}</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>_prefix</b> completer uses this style as a simple boolean
    value to decide if a space should be inserted before the suffix.</p>
</div>
<dl class="Bl-tag">
  <dt><b>ambiguous</b></dt>
  <dd>This applies when completing non-final components of filename paths, in
      other words those with a trailing slash. If it is set, the cursor is left
      after the first ambiguous component, even if menu completion is in use.
      The style is always tested with the <b>paths</b> tag.</dd>
  <dt><b>assign-list</b></dt>
  <dd>When completing after an equals sign that is being treated as an
      assignment, the completion system normally completes only one filename. In
      some cases the value may be a list of filenames separated by colons, as
      with <b>PATH</b> and similar parameters. This style can be set to a list
      of patterns matching the names of such parameters.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The default is to complete lists when the word on the line already
    contains a colon.</p>
</div>
<dl class="Bl-tag">
  <dt><b>auto-description</b></dt>
  <dd>If set, this style's value will be used as the description for options
      that are not described by the completion functions, but that have exactly
      one argument. The sequence `<b>%d</b>' in the value will be replaced by
      the description for this argument. Depending on personal preferences, it
      may be useful to set this style to something like `<b>specify: %d</b>'.
      Note that this may not work for some commands.</dd>
  <dt><b>avoid-completer</b></dt>
  <dd>This is used by the <b>_all_matches</b> completer to decide if the string
      consisting of all matches should be added to the list currently being
      generated. Its value is a list of names of completers. If any of these is
      the name of the completer that generated the matches in this completion,
      the string will not be added.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The default value for this style is `<b>_expand _old_list
    _correct</b> <b>_approximate</b>', i.e. it contains the completers for which
    a string with all matches will almost never be wanted.</p>
</div>
<dl class="Bl-tag">
  <dt><b>cache-path</b></dt>
  <dd>This style defines the path where any cache files containing dumped
      completion data are stored. It defaults to `<b>$ZDOTDIR/.zcompcache</b>',
      or `<b>$HOME/.zcompcache</b>' if <b>$ZDOTDIR</b> is not defined. The
      completion cache will not be used unless the <b>use-cache</b> style is
      set.</dd>
  <dt><b>cache-policy</b></dt>
  <dd>This style defines the function that will be used to determine whether a
      cache needs rebuilding. See the section on the <b>_cache_invalid</b>
      function below.</dd>
  <dt><b>call-command</b></dt>
  <dd>This style is used in the function for commands such as <b>make</b> and
      <b>ant</b> where calling the command directly to generate matches suffers
      problems such as being slow or, as in the case of <b>make</b> can
      potentially cause actions in the makefile to be executed. If it is set to
      `true' the command is called to generate matches. The default value of
      this style is `false'.</dd>
  <dt><b>command</b></dt>
  <dd>In many places, completion functions need to call external commands to
      generate the list of completions. This style can be used to override the
      command that is called in some such cases. The elements of the value are
      joined with spaces to form a command line to execute. The value can also
      start with a hyphen, in which case the usual command will be added to the
      end; this is most useful for putting `<b>builtin</b>' or `<b>command</b>'
      in front to make sure the appropriate version of a command is called, for
      example to avoid calling a shell function with the same name as an
      external command.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">As an example, the completion function for process IDs uses this
    style with the <b>processes</b> tag to generate the IDs to complete and the
    list of processes to display (if the <b>verbose</b> style is `true'). The
    list produced by the command should look like the output of the <b>ps</b>
    command. The first line is not displayed, but is searched for the string
    `<b>PID</b>' (or `<b>pid</b>') to find the position of the process IDs in
    the following lines. If the line does not contain `<b>PID</b>', the first
    numbers in each of the other lines are taken as the process IDs to
  complete.</p>
<p class="Pp">Note that the completion function generally has to call the
    specified command for each attempt to generate the completion list. Hence
    care should be taken to specify only commands that take a short time to run,
    and in particular to avoid any that may never terminate.</p>
</div>
<dl class="Bl-tag">
  <dt><b>command-path</b></dt>
  <dd>This is a list of directories to search for commands to complete. The
      default for this style is the value of the special parameter
    <b>path</b>.</dd>
  <dt><b>commands</b></dt>
  <dd>This is used by the function completing sub-commands for the system
      initialisation scripts (residing in <b>/etc/init.d</b> or somewhere not
      too far away from that). Its values give the default commands to complete
      for those commands for which the completion function isn't able to find
      them out automatically. The default for this style are the two strings
      `<b>start</b>' and `<b>stop</b>'.</dd>
  <dt><b>complete</b></dt>
  <dd>This is used by the <b>_expand_alias</b> function when invoked as a
      bindable command. If set to `true' and the word on the command line is not
      the name of an alias, matching alias names will be completed.</dd>
  <dt><b>complete-options</b></dt>
  <dd>This is used by the completer for <b>cd</b>, <b>chdir</b> and
      <b>pushd</b>. For these commands a <b>-</b> is used to introduce a
      directory stack entry and completion of these is far more common than
      completing options. Hence unless the value of this style is `true' options
      will not be completed, even after an initial <b>-</b>. If it is `true',
      options will be completed after an initial <b>-</b> unless there is a
      preceding <b>-</b><b>-</b> on the command line.</dd>
  <dt><b>completer</b></dt>
  <dd>The strings given as the value of this style provide the names of the
      completer functions to use. The available completer functions are
      described in the section `Control Functions' below.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Each string may be either the name of a completer function or a
    string of the form `<i>function</i><b>:</b><i>name</i>'. In the first case
    the <i>completer</i> field of the context will contain the name of the
    completer without the leading underscore and with all other underscores
    replaced by hyphens. In the second case the <i>function</i> is the name of
    the completer to call, but the context will contain the user-defined
    <i>name</i> in the <i>completer</i> field of the context. If the <i>name</i>
    starts with a hyphen, the string for the context will be build from the name
    of the completer function as in the first case with the <i>name</i> appended
    to it. For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer _complete _complete:-foo</b>
</pre>
</div>
<p class="Pp">Here, completion will call the <b>_complete</b> completer twice,
    once using `<b>complete</b>' and once using `<b>complete-foo</b>' in the
    <i>completer</i> field of the context. Normally, using the same completer
    more than once only makes sense when used with the
    `<i>functions</i><b>:</b><i>name</i>' form, because otherwise the context
    name will be the same in all calls to the completer; possible exceptions to
    this rule are the <b>_ignored</b> and <b>_prefix</b> completers.</p>
<p class="Pp">The default value for this style is `<b>_complete _ignored</b>':
    only completion will be done, first using the <b>ignored-patterns</b> style
    and the <b>$fignore</b> array and then without ignoring matches.</p>
</div>
<dl class="Bl-tag">
  <dt><b>condition</b></dt>
  <dd>This style is used by the <b>_list</b> completer function to decide if
      insertion of matches should be delayed unconditionally. The default is
      `true'.</dd>
  <dt><b>delimiters</b></dt>
  <dd>This style is used when adding a delimiter for use with history modifiers
      or glob qualifiers that have delimited arguments. It is an array of
      preferred delimiters to add. Non-special characters are preferred as the
      completion system may otherwise become confused. The default list is
      <b>:</b>, <b>+</b>, <b>/</b>, <b>-</b>, <b>%</b>. The list may be empty to
      force a delimiter to be typed.</dd>
  <dt><b>disabled</b></dt>
  <dd>If this is set to `true', the <b>_expand_alias</b> completer and bindable
      command will try to expand disabled aliases, too. The default is
    `false'.</dd>
  <dt><b>domains</b></dt>
  <dd>A list of names of network domains for completion. If this is not set,
      domain names will be taken from the file <b>/etc/resolv.conf</b>.</dd>
  <dt><b>environ</b></dt>
  <dd>The environ style is used when completing for `<b>sudo</b>'. It is set to
      an array of `<i>VAR</i><b>=</b><i>value</i>' assignments to be exported
      into the local environment before the completion for the target command is
      invoked.</dd>
</dl>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:sudo::' environ \ </b>
<b>  PATH=&quot;/sbin:/usr/sbin:$PATH&quot; HOME=&quot;/root&quot;</b>
</pre>
</div>
<dl class="Bl-tag">
  <dt><b>expand</b></dt>
  <dd>This style is used when completing strings consisting of multiple parts,
      such as path names.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If one of its values is the string `<b>prefix</b>', the partially
    typed word from the line will be expanded as far as possible even if
    trailing parts cannot be completed.</p>
<p class="Pp">If one of its values is the string `<b>suffix</b>', matching names
    for components after the first ambiguous one will also be added. This means
    that the resulting string is the longest unambiguous string possible.
    However, menu completion can be used to cycle through all matches.</p>
</div>
<dl class="Bl-tag">
  <dt><b>fake</b></dt>
  <dd>This style may be set for any completion context. It specifies additional
      strings that will always be completed in that context. The form of each
      string is `<i>value</i><b>:</b><i>description</i>'; the colon and
      description may be omitted, but any literal colons in <i>value</i> must be
      quoted with a backslash. Any <i>description</i> provided is shown
      alongside the value in completion listings.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">It is important to use a sufficiently restrictive context when
    specifying fake strings. Note that the styles <b>fake-files</b> and
    <b>fake-parameters</b> provide additional features when completing files or
    parameters.</p>
</div>
<dl class="Bl-tag">
  <dt><b>fake-always</b></dt>
  <dd>This works identically to the <b>fake</b> style except that the
      <b>ignored-patterns</b> style is not applied to it. This makes it possible
      to override a set of matches completely by setting the ignored patterns to
      `<b>*</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The following shows a way of supplementing any tag with arbitrary
    data, but having it behave for display purposes like a separate tag. In this
    example we use the features of the <b>tag-order</b> style to divide the
    <b>named-directories</b> tag into two when performing completion with the
    standard completer <b>complete</b> for arguments of <b>cd</b>. The tag
    <b>named-directories-normal</b> behaves as normal, but the tag
    <b>named-directories-mine</b> contains a fixed set of directories. This has
    the effect of adding the match group `<b>extra directories</b>' with the
    given completions.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion::complete:cd:*' tag-order \ </b>
<b>  'named-directories:-mine:extra\ directories</b>
<b>  named-directories:-normal:named\ directories *'</b>
<b>zstyle ':completion::complete:cd:*:named-directories-mine' \ </b>
<b>  fake-always mydir1 mydir2</b>
<b>zstyle ':completion::complete:cd:*:named-directories-mine' \ </b>
<b>  ignored-patterns '*'</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>fake-files</b></dt>
  <dd>This style is used when completing files and looked up without a tag. Its
      values are of the form `<i>dir</i><b>:</b><i>names...</i>'. This will add
      the <i>names</i> (strings separated by spaces) as possible matches when
      completing in the directory <i>dir</i>, even if no such files really
      exist. The dir may be a pattern; pattern characters or colons in
      <i>dir</i> should be quoted with a backslash to be treated literally.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This can be useful on systems that support special file systems
    whose top-level pathnames can not be listed or generated with glob patterns
    (but see <b>accept-exact-dirs</b> for a more general way of dealing with
    this problem). It can also be used for directories for which one does not
    have read permission.</p>
<p class="Pp">The pattern form can be used to add a certain `magic' entry to all
    directories on a particular file system.</p>
</div>
<dl class="Bl-tag">
  <dt><b>fake-parameters</b></dt>
  <dd>This is used by the completion function for parameter names. Its values
      are names of parameters that might not yet be set but should be completed
      nonetheless. Each name may also be followed by a colon and a string
      specifying the type of the parameter (like `<b>scalar</b>', `<b>array</b>'
      or `<b>integer</b>'). If the type is given, the name will only be
      completed if parameters of that type are required in the particular
      context. Names for which no type is specified will always be
    completed.</dd>
  <dt><b>file-list</b></dt>
  <dd>This style controls whether files completed using the standard builtin
      mechanism are to be listed with a long list similar to <b>ls -l</b>. Note
      that this feature uses the shell module <b>zsh/stat</b> for file
      information; this loads the builtin <b>stat</b> which will replace any
      external <b>stat</b> executable. To avoid this the following code can be
      included in an initialization file:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zmodload -i zsh/stat</b>
<b>disable stat</b>
</pre>
</div>
<p class="Pp">The style may either be set to a `true' value (or `<b>all</b>'),
    or one of the values `<b>insert</b>' or `<b>list</b>', indicating that files
    are to be listed in long format in all circumstances, or when attempting to
    insert a file name, or when listing file names without attempting to insert
    one.</p>
<p class="Pp">More generally, the value may be an array of any of the above
    values, optionally followed by <b>=</b><i>num</i>. If <i>num</i> is present
    it gives the maximum number of matches for which long listing style will be
    used. For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' file-list list=20 insert=10</b>
</pre>
</div>
<p class="Pp">specifies that long format will be used when listing up to 20
    files or inserting a file with up to 10 matches (assuming a listing is to be
    shown at all, for example on an ambiguous completion), else short format
    will be used.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle -e ':completion:*' file-list \ </b>
<b>       '(( ${+NUMERIC} )) &amp;&amp; reply=(true)'</b>
</pre>
</div>
<p class="Pp">specifies that long format will be used any time a numeric
    argument is supplied, else short format.</p>
</div>
<dl class="Bl-tag">
  <dt><b>file-patterns</b></dt>
  <dd>This is used by the standard function for completing filenames,
      <b>_files</b>. If the style is unset up to three tags are offered,
      `<b>globbed-files</b>',`<b>directories</b>' and `<b>all-files</b>',
      depending on the types of files expected by the caller of <b>_files</b>.
      The first two (`<b>globbed-files</b>' and `<b>directories</b>') are
      normally offered together to make it easier to complete files in
      sub-directories.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>file-patterns</b> style provides alternatives to the
    default tags, which are not used. Its value consists of elements of the form
    `<i>pattern</i><b>:</b><i>tag</i>'; each string may contain any number of
    such specifications separated by spaces.</p>
<p class="Pp">The <i>pattern</i> is a pattern that is to be used to generate
    filenames. Any occurrence of the sequence `<b>%p</b>' is replaced by any
    pattern(s) passed by the function calling <b>_files</b>. Colons in the
    pattern must be preceded by a backslash to make them distinguishable from
    the colon before the <i>tag</i>. If more than one pattern is needed, the
    patterns can be given inside braces, separated by commas.</p>
<p class="Pp">The <i>tag</i>s of all strings in the value will be offered by
    <b>_files</b> and used when looking up other styles. Any <i>tag</i>s in the
    same word will be offered at the same time and before later words. If no
    `<b>:</b><i>tag</i>' is given the `<b>files</b>' tag will be used.</p>
<p class="Pp">The <i>tag</i> may also be followed by an optional second colon
    and a description, which will be used for the `<b>%d</b>' in the value of
    the <b>format</b> style (if that is set) instead of the default description
    supplied by the completion function. If the description given here contains
    itself a `<b>%d</b>', that is replaced with the description supplied by the
    completion function.</p>
<p class="Pp">For example, to make the <b>rm</b> command first complete only
    names of object files and then the names of all files if there is no
    matching object file:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:rm:*:*' file-patterns \ </b>
<b>    '*.o:object-files' '%p:all-files'</b>
</pre>
</div>
<p class="Pp">To alter the default behaviour of file completion -- offer files
    matching a pattern and directories on the first attempt, then all files --
    to offer only matching files on the first attempt, then directories, and
    finally all files:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' file-patterns \ </b>
<b>    '%p:globbed-files' '*(-/):directories' '*:all-files'</b>
</pre>
</div>
<p class="Pp">This works even where there is no special pattern: <b>_files</b>
    matches all files using the pattern `<b>*</b>' at the first step and stops
    when it sees this pattern. Note also it will never try a pattern more than
    once for a single completion attempt.</p>
<p class="Pp">During the execution of completion functions, the
    <b>EXTENDED_GLOB</b> option is in effect, so the characters `<b>#</b>',
    `<b>~</b>' and `<b>^</b>' have special meanings in the patterns.</p>
</div>
<dl class="Bl-tag">
  <dt><b>file-sort</b></dt>
  <dd>The standard filename completion function uses this style without a tag to
      determine in which order the names should be listed; menu completion will
      cycle through them in the same order. The possible values are:
      `<b>size</b>' to sort by the size of the file; `<b>links</b>' to sort by
      the number of links to the file; `<b>modification</b>' (or `<b>time</b>'
      or `<b>date</b>') to sort by the last modification time; `<b>access</b>'
      to sort by the last access time; and `<b>inode</b>' (or `<b>change</b>')
      to sort by the last inode change time. If the style is set to any other
      value, or is unset, files will be sorted alphabetically by name. If the
      value contains the string `<b>reverse</b>', sorting is done in the
      opposite order. If the value contains the string `<b>follow</b>',
      timestamps are associated with the targets of symbolic links; the default
      is to use the timestamps of the links themselves.</dd>
  <dt><b>file-split-chars</b></dt>
  <dd>A set of characters that will cause <i>all</i> file completions for the
      given context to be split at the point where any of the characters occurs.
      A typical use is to set the style to <b>:</b>; then everything up to and
      including the last <b>:</b> in the string so far is ignored when
      completing files. As this is quite heavy-handed, it is usually preferable
      to update completion functions for contexts where this behaviour is
      useful.</dd>
  <dt><b>filter</b></dt>
  <dd>The <b>ldap</b> plugin of email address completion (see
      <b>_email_addresses</b>) uses this style to specify the attributes to
      match against when filtering entries. So for example, if the style is set
      to `<b>sn</b>', matching is done against surnames. Standard LDAP filtering
      is used so normal completion matching is bypassed. If this style is not
      set, the LDAP plugin is skipped. You may also need to set the
      <b>command</b> style to specify how to connect to your LDAP server.</dd>
  <dt><b>force-list</b></dt>
  <dd>This forces a list of completions to be shown at any point where listing
      is done, even in cases where the list would usually be suppressed. For
      example, normally the list is only shown if there are at least two
      different matches. By setting this style to `<b>always</b>', the list will
      always be shown, even if there is only a single match that will
      immediately be accepted. The style may also be set to a number. In this
      case the list will be shown if there are at least that many matches, even
      if they would all insert the same string.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This style is tested for the default tag as well as for each tag
    valid for the current completion. Hence the listing can be forced only for
    certain types of match.</p>
</div>
<dl class="Bl-tag">
  <dt><b>format</b></dt>
  <dd>If this is set for the <b>descriptions</b> tag, its value is used as a
      string to display above matches in completion lists. The sequence
      `<b>%d</b>' in this string will be replaced with a short description of
      what these matches are. This string may also contain the output attribute
      sequences understood by <b>compadd -X</b> (see <i>zshcompwid</i>(1)).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The style is tested with each tag valid for the current completion
    before it is tested for the <b>descriptions</b> tag. Hence different format
    strings can be defined for different types of match.</p>
<p class="Pp">Note also that some completer functions define additional
    `<b>%</b>'-sequences. These are described for the completer functions that
    make use of them.</p>
<p class="Pp">Some completion functions display messages that may be customised
    by setting this style for the <b>messages</b> tag. Here, the `<b>%d</b>' is
    replaced with a message given by the completion function.</p>
<p class="Pp">Finally, the format string is looked up with the <b>warnings</b>
    tag, for use when no matches could be generated at all. In this case the
    `<b>%d</b>' is replaced with the descriptions for the matches that were
    expected separated by spaces. The sequence `<b>%D</b>' is replaced with the
    same descriptions separated by newlines.</p>
<p class="Pp">It is possible to use printf-style field width specifiers with
    `<b>%d</b>' and similar escape sequences. This is handled by the
    <b>zformat</b> builtin command from the <b>zsh/zutil</b> module, see
    <i>zshmodules</i>(1).</p>
</div>
<dl class="Bl-tag">
  <dt><b>glob</b></dt>
  <dd>This is used by the <b>_expand</b> completer. If it is set to `true' (the
      default), globbing will be attempted on the words resulting from a
      previous substitution (see the <b>substitute</b> style) or else the
      original string from the line.</dd>
  <dt><b>global</b></dt>
  <dd>If this is set to `true' (the default), the <b>_expand_alias</b> completer
      and bindable command will try to expand global aliases.</dd>
  <dt><b>group-name</b></dt>
  <dd>The completion system can group different types of matches, which appear
      in separate lists. This style can be used to give the names of groups for
      particular tags. For example, in command position the completion system
      generates names of builtin and external commands, names of aliases, shell
      functions and parameters and reserved words as possible completions. To
      have the external commands and shell functions listed separately:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:-command-:*:commands' \ </b>
<b>       group-name commands</b>
<b>zstyle ':completion:*:*:-command-:*:functions' \ </b>
<b>       group-name functions</b>
</pre>
</div>
<p class="Pp">As a consequence, any match with the same tag will be displayed in
    the same group.</p>
<p class="Pp">If the name given is the empty string the name of the tag for the
    matches will be used as the name of the group. So, to have all different
    types of matches displayed separately, one can just set:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' group-name ''</b>
</pre>
</div>
<p class="Pp">All matches for which no group name is defined will be put in a
    group named <b>-default-</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>group-order</b></dt>
  <dd>This style is additional to the <b>group-name</b> style to specify the
      order for display of the groups defined by that style (compare
      <b>tag-order</b>, which determines which completions appear at all). The
      groups named are shown in the given order; any other groups are shown in
      the order defined by the completion function.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example, to have names of builtin commands, shell functions
    and external commands appear in that order when completing in command
    position:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:-command-:*:*' group-order \ </b>
<b>       builtins functions commands</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>groups</b></dt>
  <dd>A list of names of UNIX groups. If this is not set, group names are taken
      from the YP database or the file `<b>/etc/group</b>'.</dd>
  <dt><b>hidden</b></dt>
  <dd>If this is set to `true', matches for the given context will not be
      listed, although any description for the matches set with the
      <b>format</b> style will be shown. If it is set to `<b>all</b>', not even
      the description will be displayed.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that the matches will still be completed; they are just not
    shown in the list. To avoid having matches considered as possible
    completions at all, the <b>tag-order</b> style can be modified as described
    below.</p>
</div>
<dl class="Bl-tag">
  <dt><b>hosts</b></dt>
  <dd>A list of names of hosts that should be completed. If this is not set,
      hostnames are taken from the file `<b>/etc/hosts</b>'.</dd>
  <dt><b>hosts-ports</b></dt>
  <dd>This style is used by commands that need or accept hostnames and network
      ports. The strings in the value should be of the form
      `<i>host</i><b>:</b><i>port</i>'. Valid ports are determined by the
      presence of hostnames; multiple ports for the same host may appear.</dd>
  <dt><b>ignore-line</b></dt>
  <dd>This is tested for each tag valid for the current completion. If it is set
      to `true', none of the words that are already on the line will be
      considered as possible completions. If it is set to `<b>current</b>', the
      word the cursor is on will not be considered as a possible completion. The
      value `<b>current-shown</b>' is similar but only applies if the list of
      completions is currently shown on the screen. Finally, if the style is set
      to `<b>other</b>', all words on the line except for the current one will
      be excluded from the possible completions.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The values `<b>current</b>' and `<b>current-shown</b>' are a bit
    like the opposite of the <b>accept-exact</b> style: only strings with
    missing characters will be completed.</p>
<p class="Pp">Note that you almost certainly don't want to set this to `true' or
    `<b>other</b>' for a general context such as `<b>:completion:*</b>'. This is
    because it would disallow completion of, for example, options multiple times
    even if the command in question accepts the option more than once.</p>
</div>
<dl class="Bl-tag">
  <dt><b>ignore-parents</b></dt>
  <dd>The style is tested without a tag by the function completing pathnames in
      order to determine whether to ignore the names of directories already
      mentioned in the current word, or the name of the current working
      directory. The value must include one or both of the following
    strings:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>parent</b></dt>
  <dd>The name of any directory whose path is already contained in the word on
      the line is ignored. For example, when completing after <b>foo/../</b>,
      the directory <b>foo</b> will not be considered a valid completion.</dd>
  <dt><b>pwd</b></dt>
  <dd>The name of the current working directory will not be completed; hence,
      for example, completion after <b>../</b> will not use the name of the
      current directory.</dd>
</dl>
<p class="Pp">In addition, the value may include one or both of:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>..</b></dt>
  <dd>Ignore the specified directories only when the word on the line contains
      the substring `<b>../</b>'.</dd>
  <dt><b>directory</b></dt>
  <dd>Ignore the specified directories only when names of directories are
      completed, not when completing names of files.</dd>
</dl>
<p class="Pp">Excluded values act in a similar fashion to values of the
    <b>ignored-patterns</b> style, so they can be restored to consideration by
    the <b>_ignored</b> completer.</p>
</div>
<dl class="Bl-tag">
  <dt><b>extra-verbose</b></dt>
  <dd>If set, the completion listing is more verbose at the cost of a probable
      decrease in completion speed. Completion performance will suffer if this
      style is set to `true'.</dd>
  <dt><b>ignored-patterns</b></dt>
  <dd>A list of patterns; any trial completion matching one of the patterns will
      be excluded from consideration. The <b>_ignored</b> completer can appear
      in the list of completers to restore the ignored matches. This is a more
      configurable version of the shell parameter <b>$fignore</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that the <b>EXTENDED_GLOB</b> option is set during the
    execution of completion functions, so the characters `<b>#</b>', `<b>~</b>'
    and `<b>^</b>' have special meanings in the patterns.</p>
</div>
<dl class="Bl-tag">
  <dt><b>insert</b></dt>
  <dd>This style is used by the <b>_all_matches</b> completer to decide whether
      to insert the list of all matches unconditionally instead of adding the
      list as another match.</dd>
  <dt><b>insert-ids</b></dt>
  <dd>When completing process IDs, for example as arguments to the <b>kill</b>
      and <b>wait</b> builtins the name of a command may be converted to the
      appropriate process ID. A problem arises when the process name typed is
      not unique. By default (or if this style is set explicitly to
      `<b>menu</b>') the name will be converted immediately to a set of possible
      IDs, and menu completion will be started to cycle through them.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the value of the style is `<b>single</b>', the shell will wait
    until the user has typed enough to make the command unique before converting
    the name to an ID; attempts at completion will be unsuccessful until that
    point. If the value is any other string, menu completion will be started
    when the string typed by the user is longer than the common prefix to the
    corresponding IDs.</p>
</div>
<dl class="Bl-tag">
  <dt><b>insert-tab</b></dt>
  <dd>If this is set to `true', the completion system will insert a TAB
      character (assuming that was used to start completion) instead of
      performing completion when there is no non-blank character to the left of
      the cursor. If it is set to `false', completion will be done even
    there.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The value may also contain the substrings `<b>pending</b>' or
    `<b>pending=</b><i>val</i>'. In this case, the typed character will be
    inserted instead of starting completion when there is unprocessed input
    pending. If a <i>val</i> is given, completion will not be done if there are
    at least that many characters of unprocessed input. This is often useful
    when pasting characters into a terminal. Note however, that it relies on the
    <b>$PENDING</b> special parameter from the <b>zsh/zle</b> module being set
    properly which is not guaranteed on all platforms.</p>
<p class="Pp">The default value of this style is `true' except for completion
    within <b>vared</b> builtin command where it is `false'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>insert-unambiguous</b></dt>
  <dd>This is used by the <b>_match</b> and <b>_approximate</b> completers.
      These completers are often used with menu completion since the word typed
      may bear little resemblance to the final completion. However, if this
      style is `true', the completer will start menu completion only if it could
      find no unambiguous initial string at least as long as the original string
      typed by the user.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">In the case of the <b>_approximate</b> completer, the completer
    field in the context will already have been set to one of
    <b>correct-</b><i>num</i> or <b>approximate-</b><i>num</i>, where <i>num</i>
    is the number of errors that were accepted.</p>
<p class="Pp">In the case of the <b>_match</b> completer, the style may also be
    set to the string `<b>pattern</b>'. Then the pattern on the line is left
    unchanged if it does not match unambiguously.</p>
</div>
<dl class="Bl-tag">
  <dt><b>gain-privileges</b></dt>
  <dd>If set to <b>true</b>, this style enables the use of commands like
      <b>sudo</b> or <b>doas</b> to gain extra privileges when retrieving
      information for completion. This is only done when a command such as
      <b>sudo</b> appears on the command-line. To force the use of, e.g.
      <b>sudo</b> or to override any prefix that might be added due to
      <b>gain-privileges</b>, the <b>command</b> style can be used with a value
      that begins with a hyphen.</dd>
  <dt><b>keep-prefix</b></dt>
  <dd>This style is used by the <b>_expand</b> completer. If it is `true', the
      completer will try to keep a prefix containing a tilde or parameter
      expansion. Hence, for example, the string `<b>~/f*</b>' would be expanded
      to `<b>~/foo</b>' instead of `<b>/home/user/foo</b>'. If the style is set
      to `<b>changed</b>' (the default), the prefix will only be left unchanged
      if there were other changes between the expanded words and the original
      word from the command line. Any other value forces the prefix to be
      expanded unconditionally.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The behaviour of <b>_expand</b> when this style is `true' is to
    cause <b>_expand</b> to give up when a single expansion with the restored
    prefix is the same as the original; hence any remaining completers may be
    called.</p>
</div>
<dl class="Bl-tag">
  <dt><b>last-prompt</b></dt>
  <dd>This is a more flexible form of the <b>ALWAYS_LAST_PROMPT</b> option. If
      it is `true', the completion system will try to return the cursor to the
      previous command line after displaying a completion list. It is tested for
      all tags valid for the current completion, then the <b>default</b> tag.
      The cursor will be moved back to the previous line if this style is `true'
      for all types of match. Note that unlike the <b>ALWAYS_LAST_PROMPT</b>
      option this is independent of the numeric argument.</dd>
  <dt><b>known-hosts-files</b></dt>
  <dd>This style should contain a list of files to search for host names and (if
      the <b>use-ip</b> style is set) IP addresses in a format compatible with
      ssh <b>known_hosts</b> files. If it is not set, the files
      <b>/etc/ssh/ssh_known_hosts</b> and <b>~/.ssh/known_hosts</b> are
    used.</dd>
  <dt><b>list</b></dt>
  <dd>This style is used by the <b>_history_complete_word</b> bindable command.
      If it is set to `true' it has no effect. If it is set to `false' matches
      will not be listed. This overrides the setting of the options controlling
      listing behaviour, in particular <b>AUTO_LIST</b>. The context always
      starts with `<b>:completion:history-words</b>'.</dd>
  <dt><b>list-colors</b></dt>
  <dd>If the <b>zsh/complist</b> module is loaded, this style can be used to set
      color specifications. This mechanism replaces the use of the
      <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters described in the
      section `The zsh/complist Module' in <i>zshmodules</i>(1), but the syntax
      is the same.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If this style is set for the <b>default</b> tag, the strings in
    the value are taken as specifications that are to be used everywhere. If it
    is set for other tags, the specifications are used only for matches of the
    type described by the tag. For this to work best, the <b>group-name</b>
    style must be set to an empty string.</p>
<p class="Pp">In addition to setting styles for specific tags, it is also
    possible to use group names specified explicitly by the <b>group-name</b>
    tag together with the `<b>(group)</b>' syntax allowed by the
    <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters and simply using the
    <b>default</b> tag.</p>
<p class="Pp">It is possible to use any color specifications already set up for
    the GNU version of the <b>ls</b> command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:default' list-colors \ </b>
<b>       ${(s.:.)LS_COLORS}</b>
</pre>
</div>
<p class="Pp">The default colors are the same as for the GNU <b>ls</b> command
    and can be obtained by setting the style to an empty string (i.e.
    <b>''</b>).</p>
</div>
<dl class="Bl-tag">
  <dt><b>list-dirs-first</b></dt>
  <dd>This is used by file completion. If set, directories to be completed are
      listed separately from and before completion for other files, regardless
      of tag ordering. In addition, the tag <b>other-files</b> is used in place
      of <b>all-files</b> for the remaining files, to indicate that no
      directories are presented with that tag.</dd>
  <dt><b>list-grouped</b></dt>
  <dd>If this style is `true' (the default), the completion system will try to
      make certain completion listings more compact by grouping matches. For
      example, options for commands that have the same description (shown when
      the <b>verbose</b> style is set to `true') will appear as a single entry.
      However, menu selection can be used to cycle through all the matches.</dd>
  <dt><b>list-packed</b></dt>
  <dd>This is tested for each tag valid in the current context as well as the
      <b>default</b> tag. If it is set to `true', the corresponding matches
      appear in listings as if the <b>LIST_PACKED</b> option were set. If it is
      set to `false', they are listed normally.</dd>
  <dt><b>list-prompt</b></dt>
  <dd>If this style is set for the <b>default</b> tag, completion lists that
      don't fit on the screen can be scrolled (see the description of the
      <b>zsh/complist</b> module in <i>zshmodules</i>(1)). The value, if not the
      empty string, will be displayed after every screenful and the shell will
      prompt for a key press; if the style is set to the empty string, a default
      prompt will be used.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The value may contain the escape sequences: `<b>%l</b>' or
    `<b>%L</b>', which will be replaced by the number of the last line displayed
    and the total number of lines; `<b>%m</b>' or `<b>%M</b>', the number of the
    last match shown and the total number of matches; and `<b>%p</b>' and
    `<b>%P</b>', `<b>Top</b>' when at the beginning of the list, `<b>Bottom</b>'
    when at the end and the position shown as a percentage of the total length
    otherwise. In each case the form with the uppercase letter will be replaced
    by a string of fixed width, padded to the right with spaces, while the
    lowercase form will be replaced by a variable width string. As in other
    prompt strings, the escape sequences `<b>%S</b>', `<b>%s</b>', `<b>%B</b>',
    `<b>%b</b>', `<b>%U</b>', `<b>%u</b>' for entering and leaving the display
    modes standout, bold and underline, and `<b>%F</b>', `<b>%f</b>',
    `<b>%K</b>', `<b>%k</b>' for changing the foreground background colour, are
    also available, as is the form `<b>%{</b>...<b>%}</b>' for enclosing escape
    sequences which display with zero (or, with a numeric argument, some other)
    width.</p>
<p class="Pp">After deleting this prompt the variable <b>LISTPROMPT</b> should
    be unset for the removal to take effect.</p>
</div>
<dl class="Bl-tag">
  <dt><b>list-rows-first</b></dt>
  <dd>This style is tested in the same way as the <b>list-packed</b> style and
      determines whether matches are to be listed in a rows-first fashion as if
      the <b>LIST_ROWS_FIRST</b> option were set.</dd>
  <dt><b>list-suffixes</b></dt>
  <dd>This style is used by the function that completes filenames. If it is
      `true', and completion is attempted on a string containing multiple
      partially typed pathname components, all ambiguous components will be
      shown. Otherwise, completion stops at the first ambiguous component.</dd>
  <dt><b>list-separator</b></dt>
  <dd>The value of this style is used in completion listing to separate the
      string to complete from a description when possible (e.g. when completing
      options). It defaults to `<b>-</b><b>-</b>' (two hyphens).</dd>
  <dt><b>local</b></dt>
  <dd>This is for use with functions that complete URLs for which the
      corresponding files are available directly from the file system. Its value
      should consist of three strings: a hostname, the path to the default web
      pages for the server, and the directory name used by a user placing web
      pages within their home area.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' local toast \ </b>
<b>    /var/http/public/toast public_html</b>
</pre>
</div>
<p class="Pp">Completion after `<b>http://toast/stuff/</b>' will look for files
    in the directory <b>/var/http/public/toast/stuff</b>, while completion after
    `<b>http://toast/~yousir/</b>' will look for files in the directory
    <b>~yousir/public_html</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>mail-directory</b></dt>
  <dd>If set, zsh will assume that mailbox files can be found in the directory
      specified. It defaults to `<b>~/Mail</b>'.</dd>
  <dt><b>match-original</b></dt>
  <dd>This is used by the <b>_match</b> completer. If it is set to <b>only</b>,
      <b>_match</b> will try to generate matches without inserting a `<b>*</b>'
      at the cursor position. If set to any other non-empty value, it will first
      try to generate matches without inserting the `<b>*</b>' and if that
      yields no matches, it will try again with the `<b>*</b>' inserted. If it
      is unset or set to the empty string, matching will only be performed with
      the `<b>*</b>' inserted.</dd>
  <dt><b>matcher</b></dt>
  <dd>This style is tested separately for each tag valid in the current context.
      Its value is placed before any match specifications given by the
      <b>matcher-list</b> style so can override them via the use of an <b>x:</b>
      specification. The value should be in the form described in the section
      `Completion Matching Control' in <i>zshcompwid</i>(1). For examples of
      this, see the description of the <b>tag-order</b> style.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For notes comparing the use of this and the <b>matcher-list</b>
    style, see under the description of the <b>tag-order</b> style.</p>
</div>
<dl class="Bl-tag">
  <dt><b>matcher-list</b></dt>
  <dd>This style can be set to a list of match specifications that are to be
      applied everywhere. Match specifications are described in the section
      `Completion Matching Control' in <i>zshcompwid</i>(1). The completion
      system will try them one after another for each completer selected. For
      example, to try first simple completion and, if that generates no matches,
      case-insensitive completion:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' matcher-list '' 'm:{a-zA-Z}={A-Za-z}'</b>
</pre>
</div>
<p class="Pp">By default each specification replaces the previous one; however,
    if a specification is prefixed with <b>+</b>, it is added to the existing
    list. Hence it is possible to create increasingly general specifications
    without repetition:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' matcher-list \ </b>
<b>       '' '+m:{a-z}={A-Z}' '+m:{A-Z}={a-z}'</b>
</pre>
</div>
<p class="Pp">It is possible to create match specifications valid for particular
    completers by using the third field of the context. This applies only to
    completers that override the global matcher-list, which as of this writing
    includes only <b>_prefix</b> and <b>_ignored</b>. For example, to use the
    completers <b>_complete</b> and <b>_prefix</b> but allow case-insensitive
    completion only with <b>_complete</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer _complete _prefix</b>
<b>zstyle ':completion:*:complete:*:*:*' matcher-list \ </b>
<b>       '' 'm:{a-zA-Z}={A-Za-z}'</b>
</pre>
</div>
<p class="Pp">User-defined names, as explained for the <b>completer</b> style,
    are available. This makes it possible to try the same completer more than
    once with different match specifications each time. For example, to try
    normal completion without a match specification, then normal completion with
    case-insensitive matching, then correction, and finally partial-word
    completion:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer \ </b>
<b>    _complete _correct _complete:foo</b>
<b>zstyle ':completion:*:complete:*:*:*' matcher-list \ </b>
<b>    '' 'm:{a-zA-Z}={A-Za-z}'</b>
<b>zstyle ':completion:*:foo:*:*:*' matcher-list \ </b>
<b>    'm:{a-zA-Z}={A-Za-z} r:|[-_./]=* r:|=*'</b>
</pre>
</div>
<p class="Pp">If the style is unset in any context no match specification is
    applied. Note also that some completers such as <b>_correct</b> and
    <b>_approximate</b> do not use the match specifications at all, though these
    completers will only ever be called once even if the <b>matcher-list</b>
    contains more than one element.</p>
<p class="Pp">Where multiple specifications are useful, note that the
    <i>entire</i> completion is done for each element of <b>matcher-list</b>,
    which can quickly reduce the shell's performance. As a rough rule of thumb,
    one to three strings will give acceptable performance. On the other hand,
    putting multiple space-separated values into the same string does not have
    an appreciable impact on performance.</p>
<p class="Pp">If there is no current matcher or it is empty, and the option
    <b>NO_CASE_GLOB</b> is in effect, the matching for files is performed
    case-insensitively in any case. However, any matcher must explicitly specify
    case-insensitive matching if that is required.</p>
<p class="Pp">For notes comparing the use of this and the <b>matcher</b> style,
    see under the description of the <b>tag-order</b> style.</p>
</div>
<dl class="Bl-tag">
  <dt><b>max-errors</b></dt>
  <dd>This is used by the <b>_approximate</b> and <b>_correct</b> completer
      functions to determine the maximum number of errors to allow. The
      completer will try to generate completions by first allowing one error,
      then two errors, and so on, until either a match or matches were found or
      the maximum number of errors given by this style has been reached.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the value for this style contains the string `<b>numeric</b>',
    the completer function will take any numeric argument as the maximum number
    of errors allowed. For example, with</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:approximate:::' max-errors 2 numeric</b>
</pre>
</div>
<p class="Pp">two errors are allowed if no numeric argument is given, but with a
    numeric argument of six (as in `<b>ESC-6 TAB</b>'), up to six errors are
    accepted. Hence with a value of `<b>0 numeric</b>', no correcting completion
    will be attempted unless a numeric argument is given.</p>
<p class="Pp">If the value contains the string `<b>not-numeric</b>', the
    completer will <i>not</i> try to generate corrected completions when given a
    numeric argument, so in this case the number given should be greater than
    zero. For example, `<b>2 not-numeric</b>' specifies that correcting
    completion with two errors will usually be performed, but if a numeric
    argument is given, correcting completion will not be performed.</p>
<p class="Pp">The default value for this style is `<b>2 numeric</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>max-matches-width</b></dt>
  <dd>This style is used to determine the trade off between the width of the
      display used for matches and the width used for their descriptions when
      the <b>verbose</b> style is in effect. The value gives the number of
      display columns to reserve for the matches. The default is half the width
      of the screen.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This has the most impact when several matches have the same
    description and so will be grouped together. Increasing the style will allow
    more matches to be grouped together; decreasing it will allow more of the
    description to be visible.</p>
</div>
<dl class="Bl-tag">
  <dt><b>menu</b></dt>
  <dd>If this is `true' in the context of any of the tags defined for the
      current completion menu completion will be used. The value for a specific
      tag will take precedence over that for the `<b>default</b>' tag.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If none of the values found in this way is `true' but at least one
    is set to `<b>auto</b>', the shell behaves as if the <b>AUTO_MENU</b> option
    is set.</p>
<p class="Pp">If one of the values is explicitly set to `false', menu completion
    will be explicitly turned off, overriding the <b>MENU_COMPLETE</b> option
    and other settings.</p>
<p class="Pp">In the form `<b>yes=</b><i>num</i>', where `<b>yes</b>' may be any
    of the `true' values (`<b>yes</b>', `<b>true</b>', `<b>on</b>' and
    `<b>1</b>'), menu completion will be turned on if there are at least
    <i>num</i> matches. In the form `<b>yes=long</b>', menu completion will be
    turned on if the list does not fit on the screen. This does not activate
    menu completion if the widget normally only lists completions, but menu
    completion can be activated in that case with the value
    `<b>yes=long-list</b>' (Typically, the value `<b>select=long-list</b>'
    described later is more useful as it provides control over scrolling.)</p>
<p class="Pp">Similarly, with any of the `false' values (as in `<b>no=10</b>'),
    menu completion will <i>not</i> be used if there are <i>num</i> or more
    matches.</p>
<p class="Pp">The value of this widget also controls menu selection, as
    implemented by the <b>zsh/complist</b> module. The following values may
    appear either alongside or instead of the values above.</p>
<p class="Pp">If the value contains the string `<b>select</b>', menu selection
    will be started unconditionally.</p>
<p class="Pp">In the form `<b>select=</b><i>num</i>', menu selection will only
    be started if there are at least <i>num</i> matches. If the values for more
    than one tag provide a number, the smallest number is taken.</p>
<p class="Pp">Menu selection can be turned off explicitly by defining a value
    containing the string`<b>no-select</b>'.</p>
<p class="Pp">It is also possible to start menu selection only if the list of
    matches does not fit on the screen by using the value `<b>select=long</b>'.
    To start menu selection even if the current widget only performs listing,
    use the value `<b>select=long-list</b>'.</p>
<p class="Pp">To turn on menu completion or menu selection when there are a
    certain number of matches <i>or</i> the list of matches does not fit on the
    screen, both of `<b>yes=</b>' and `<b>select=</b>' may be given twice, once
    with a number and once with `<b>long</b>' or `<b>long-list</b>'.</p>
<p class="Pp">Finally, it is possible to activate two special modes of menu
    selection. The word `<b>interactive</b>' in the value causes interactive
    mode to be entered immediately when menu selection is started; see the
    description of the <b>zsh/complist</b> module in <i>zshmodules</i>(1) for a
    description of interactive mode. Including the string `<b>search</b>' does
    the same for incremental search mode. To select backward incremental search,
    include the string `<b>search-backward</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>muttrc</b></dt>
  <dd>If set, gives the location of the mutt configuration file. It defaults to
      `<b>~/.muttrc</b>'.</dd>
  <dt><b>numbers</b></dt>
  <dd>This is used with the <b>jobs</b> tag. If it is `true', the shell will
      complete job numbers instead of the shortest unambiguous prefix of the job
      command text. If the value is a number, job numbers will only be used if
      that many words from the job descriptions are required to resolve
      ambiguities. For example, if the value is `<b>1</b>', strings will only be
      used if all jobs differ in the first word on their command lines.</dd>
  <dt><b>old-list</b></dt>
  <dd>This is used by the <b>_oldlist</b> completer. If it is set to
      `<b>always</b>', then standard widgets which perform listing will retain
      the current list of matches, however they were generated; this can be
      turned off explicitly with the value `<b>never</b>', giving the behaviour
      without the <b>_oldlist</b> completer. If the style is unset, or any other
      value, then the existing list of completions is displayed if it is not
      already; otherwise, the standard completion list is generated; this is the
      default behaviour of <b>_oldlist</b>. However, if there is an old list and
      this style contains the name of the completer function that generated the
      list, then the old list will be used even if it was generated by a widget
      which does not do listing.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example, suppose you type <b>^Xc</b> to use the
    <b>_correct_word</b> widget, which generates a list of corrections for the
    word under the cursor. Usually, typing <b>^D</b> would generate a standard
    list of completions for the word on the command line, and show that. With
    <b>_oldlist</b>, it will instead show the list of corrections already
    generated.</p>
<p class="Pp">As another example consider the <b>_match</b> completer: with the
    <b>insert-unambiguous</b> style set to `true' it inserts only a common
    prefix string, if there is any. However, this may remove parts of the
    original pattern, so that further completion could produce more matches than
    on the first attempt. By using the <b>_oldlist</b> completer and setting
    this style to <b>_match</b>, the list of matches generated on the first
    attempt will be used again.</p>
</div>
<dl class="Bl-tag">
  <dt><b>old-matches</b></dt>
  <dd>This is used by the <b>_all_matches</b> completer to decide if an old list
      of matches should be used if one exists. This is selected by one of the
      `true' values or by the string `<b>only</b>'. If the value is
      `<b>only</b>', <b>_all_matches</b> will only use an old list and won't
      have any effect on the list of matches currently being generated.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If this style is set it is generally unwise to call the
    <b>_all_matches</b> completer unconditionally. One possible use is for
    either this style or the <b>completer</b> style to be defined with the
    <b>-e</b> option to <b>zstyle</b> to make the style conditional.</p>
</div>
<dl class="Bl-tag">
  <dt><b>old-menu</b></dt>
  <dd>This is used by the <b>_oldlist</b> completer. It controls how menu
      completion behaves when a completion has already been inserted and the
      user types a standard completion key such as <b>TAB</b>. The default
      behaviour of <b>_oldlist</b> is that menu completion always continues with
      the existing list of completions. If this style is set to `false',
      however, a new completion is started if the old list was generated by a
      different completion command; this is the behaviour without the
      <b>_oldlist</b> completer.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example, suppose you type <b>^Xc</b> to generate a list of
    corrections, and menu completion is started in one of the usual ways.
    Usually, or with this style set to `false', typing <b>TAB</b> at this point
    would start trying to complete the line as it now appears. With
    <b>_oldlist</b>, it instead continues to cycle through the list of
    corrections.</p>
</div>
<dl class="Bl-tag">
  <dt><b>original</b></dt>
  <dd>This is used by the <b>_approximate</b> and <b>_correct</b> completers to
      decide if the original string should be added as a possible completion.
      Normally, this is done only if there are at least two possible
      corrections, but if this style is set to `true', it is always added. Note
      that the style will be examined with the completer field in the context
      name set to <b>correct-</b><i>num</i> or <b>approximate-</b><i>num</i>,
      where <i>num</i> is the number of errors that were accepted.</dd>
  <dt><b>packageset</b></dt>
  <dd>This style is used when completing arguments of the Debian `<b>dpkg</b>'
      program. It contains an override for the default package set for a given
      context. For example,</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:complete:dpkg:option--status-1:*' \ </b>
<b>               packageset avail</b>
</pre>
</div>
<p class="Pp">causes available packages, rather than only installed packages, to
    be completed for `<b>dpkg -</b><b>-status</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>path</b></dt>
  <dd>The function that completes color names uses this style with the
      <b>colors</b> tag. The value should be the pathname of a file containing
      color names in the format of an X11 <b>rgb.txt</b> file. If the style is
      not set but this file is found in one of various standard locations it
      will be used as the default.</dd>
  <dt><b>path-completion</b></dt>
  <dd>This is used by filename completion. By default, filename completion
      examines all components of a path to see if there are completions of that
      component. For example, <b>/u/b/z</b> can be completed to
      <b>/usr/bin/zsh</b>. Explicitly setting this style to `false' inhibits
      this behaviour for path components up to the <b>/</b> before the cursor;
      this overrides the setting of <b>accept-exact-dirs</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Even with the style set to `false', it is still possible to
    complete multiple paths by setting the option <b>COMPLETE_IN_WORD</b> and
    moving the cursor back to the first component in the path to be completed.
    For example, <b>/u/b/z</b> can be completed to <b>/usr/bin/zsh</b> if the
    cursor is after the <b>/u</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>pine-directory</b></dt>
  <dd>If set, specifies the directory containing PINE mailbox files. There is no
      default, since recursively searching this directory is inconvenient for
      anyone who doesn't use PINE.</dd>
  <dt><b>ports</b></dt>
  <dd>A list of Internet service names (network ports) to complete. If this is
      not set, service names are taken from the file
    `<b>/etc/services</b>'.</dd>
  <dt><b>prefix-hidden</b></dt>
  <dd>This is used for certain completions which share a common prefix, for
      example command options beginning with dashes. If it is `true', the prefix
      will not be shown in the list of matches.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The default value for this style is `false'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>prefix-needed</b></dt>
  <dd>This style is also relevant for matches with a common prefix. If it is set
      to `true' this common prefix must be typed by the user to generate the
      matches.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The style is applicable to the <b>options</b>, <b>signals</b>,
    <b>jobs</b>, <b>functions</b>, and <b>parameters</b> completion tags.</p>
<p class="Pp">For command options, this means that the initial `<b>-</b>',
    `<b>+</b>', or `<b>-</b><b>-</b>' must be typed explicitly before option
    names will be completed.</p>
<p class="Pp">For signals, an initial `<b>-</b>' is required before signal names
    will be completed.</p>
<p class="Pp">For jobs, an initial `<b>%</b>' is required before job names will
    be completed.</p>
<p class="Pp">For function and parameter names, an initial `<b>_</b>' or
    `<b>.</b>' is required before function or parameter names starting with
    those characters will be completed.</p>
<p class="Pp">The default value for this style is `false' for <b>function</b>
    and <b>parameter</b> completions, and `true' otherwise.</p>
</div>
<dl class="Bl-tag">
  <dt><b>preserve-prefix</b></dt>
  <dd>This style is used when completing path names. Its value should be a
      pattern matching an initial prefix of the word to complete that should be
      left unchanged under all circumstances. For example, on some Unices an
      initial `<b>//</b>' (double slash) has a special meaning; setting this
      style to the string `<b>//</b>' will preserve it. As another example,
      setting this style to `<b>?:/</b>' under Cygwin would allow completion
      after `<b>a:/...</b>' and so on.</dd>
  <dt><b>range</b></dt>
  <dd>This is used by the <b>_history</b> completer and the
      <b>_history_complete_word</b> bindable command to decide which words
      should be completed.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If it is a single number, only the last <i>N</i> words from the
    history will be completed.</p>
<p class="Pp">If it is a range of the form `<i>max</i><b>:</b><i>slice</i>', the
    last <i>slice</i> words will be completed; then if that yields no matches,
    the <i>slice</i> words before those will be tried and so on. This process
    stops either when at least one match has been found, or <i>max</i> words
    have been tried.</p>
<p class="Pp">The default is to complete all words from the history at once.</p>
</div>
<dl class="Bl-tag">
  <dt><b>recursive-files</b></dt>
  <dd>If this style is set, its value is an array of patterns to be tested
      against `<b>$PWD/</b>': note the trailing slash, which allows directories
      in the pattern to be delimited unambiguously by including slashes on both
      sides. If an ordinary file completion fails and the word on the command
      line does not yet have a directory part to its name, the style is
      retrieved using the same tag as for the completion just attempted, then
      the elements tested against <b>$PWD/</b> in turn. If one matches, then the
      shell reattempts completion by prepending the word on the command line
      with each directory in the expansion of <b>**/*(/)</b> in turn. Typically
      the elements of the style will be set to restrict the number of
      directories beneath the current one to a manageable number, for example
      `<b>*/.git/*</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' recursive-files '*/zsh/*'</b>
</pre>
</div>
<p class="Pp">If the current directory is <b>/home/pws/zsh/Src</b>, then
    <b>zle_tr</b><i>TAB</i> can be completed to <b>Zle/zle_tricky.c</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>regular</b></dt>
  <dd>This style is used by the <b>_expand_alias</b> completer and bindable
      command. If set to `true' (the default), regular aliases will be expanded
      but only in command position. If it is set to `false', regular aliases
      will never be expanded. If it is set to `<b>always</b>', regular aliases
      will be expanded even if not in command position.</dd>
  <dt><b>rehash</b></dt>
  <dd>If this is set when completing external commands, the internal list (hash)
      of commands will be updated for each search by issuing the <b>rehash</b>
      command. There is a speed penalty for this which is only likely to be
      noticeable when directories in the path have slow file access.</dd>
  <dt><b>remote-access</b></dt>
  <dd>If set to `false', certain commands will be prevented from making Internet
      connections to retrieve remote information. This includes the completion
      for the <b>CVS</b> command.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">It is not always possible to know if connections are in fact to a
    remote site, so some may be prevented unnecessarily.</p>
</div>
<dl class="Bl-tag">
  <dt><b>remove-all-dups</b></dt>
  <dd>The <b>_history_complete_word</b> bindable command and the <b>_history</b>
      completer use this to decide if all duplicate matches should be removed,
      rather than just consecutive duplicates.</dd>
  <dt><b>select-prompt</b></dt>
  <dd>If this is set for the <b>default</b> tag, its value will be displayed
      during menu selection (see the <b>menu</b> style above) when the
      completion list does not fit on the screen as a whole. The same escapes as
      for the <b>list-prompt</b> style are understood, except that the numbers
      refer to the match or line the mark is on. A default prompt is used when
      the value is the empty string.</dd>
  <dt><b>select-scroll</b></dt>
  <dd>This style is tested for the <b>default</b> tag and determines how a
      completion list is scrolled during a menu selection (see the <b>menu</b>
      style above) when the completion list does not fit on the screen as a
      whole. If the value is `<b>0</b>' (zero), the list is scrolled by
      half-screenfuls; if it is a positive integer, the list is scrolled by the
      given number of lines; if it is a negative number, the list is scrolled by
      a screenful minus the absolute value of the given number of lines. The
      default is to scroll by single lines.</dd>
  <dt><b>separate-sections</b></dt>
  <dd>This style is used with the <b>manuals</b> tag when completing names of
      manual pages. If it is `true', entries for different sections are added
      separately using tag names of the form `<b>manual.</b><i>X</i>', where
      <i>X</i> is the section number. When the <b>group-name</b> style is also
      in effect, pages from different sections will appear separately. This
      style is also used similarly with the <b>words</b> style when completing
      words for the dict command. It allows words from different dictionary
      databases to be added separately. The default for this style is
    `false'.</dd>
  <dt><b>show-ambiguity</b></dt>
  <dd>If the <b>zsh/complist</b> module is loaded, this style can be used to
      highlight the first ambiguous character in completion lists. The value is
      either a color indication such as those supported by the
      <b>list-colors</b> style or, with a value of `true', a default of
      underlining is selected. The highlighting is only applied if the
      completion display strings correspond to the actual matches.</dd>
  <dt><b>show-completer</b></dt>
  <dd>Tested whenever a new completer is tried. If it is `true', the completion
      system outputs a progress message in the listing area showing what
      completer is being tried. The message will be overwritten by any output
      when completions are found and is removed after completion is
    finished.</dd>
  <dt><b>single-ignored</b></dt>
  <dd>This is used by the <b>_ignored</b> completer when there is only one
      match. If its value is `<b>show</b>', the single match will be displayed
      but not inserted. If the value is `<b>menu</b>', then the single match and
      the original string are both added as matches and menu completion is
      started, making it easy to select either of them.</dd>
  <dt><b>sort</b></dt>
  <dd>This allows the standard ordering of matches to be overridden.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If its value is `<b>true</b>' or `<b>false</b>', sorting is
    enabled or disabled. Additionally the values associated with the `<b>-o</b>'
    option to <b>compadd</b> can also be listed: <b>match</b>, <b>nosort</b>,
    <b>numeric</b>, <b>reverse</b>. If it is not set for the context, the
    standard behaviour of the calling widget is used.</p>
<p class="Pp">The style is tested first against the full context including the
    tag, and if that fails to produce a value against the context without the
    tag.</p>
<p class="Pp">In many cases where a calling widget explicitly selects a
    particular ordering in lieu of the default, a value of `<b>true</b>' is not
    honoured. An example of where this is not the case is for command history
    where the default of sorting matches chronologically may be overridden by
    setting the style to `true'.</p>
<p class="Pp">In the <b>_expand</b> completer, if it is set to `true', the
    expansions generated will always be sorted. If it is set to `<b>menu</b>',
    then the expansions are only sorted when they are offered as single strings
    but not in the string containing all possible expansions.</p>
</div>
<dl class="Bl-tag">
  <dt><b>special-dirs</b></dt>
  <dd>Normally, the completion code will not produce the directory names
      `<b>.</b>' and `<b>..</b>' as possible completions. If this style is set
      to `true', it will add both `<b>.</b>' and `<b>..</b>' as possible
      completions; if it is set to `<b>..</b>', only `<b>..</b>' will be
    added.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The following example sets <b>special-dirs</b> to `<b>..</b>' when
    the current prefix is empty, is a single `<b>.</b>', or consists only of a
    path beginning with `<b>../</b>'. Otherwise the value is `false'.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle -e ':completion:*' special-dirs \ </b>
<b>   '[[ $PREFIX = (../)#(|.|..) ]] &amp;&amp; reply=(..)'</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>squeeze-slashes</b></dt>
  <dd>If set to `true', sequences of slashes in filename paths (for example in
      `<b>foo//bar</b>') will be treated as a single slash. This is the usual
      behaviour of UNIX paths. However, by default the file completion function
      behaves as if there were a `<b>*</b>' between the slashes.</dd>
  <dt><b>stop</b></dt>
  <dd>If set to `true', the <b>_history_complete_word</b> bindable command will
      stop once when reaching the beginning or end of the history. Invoking
      <b>_history_complete_word</b> will then wrap around to the opposite end of
      the history. If this style is set to `false' (the default),
      <b>_history_complete_word</b> will loop immediately as in a menu
      completion.</dd>
  <dt><b>strip-comments</b></dt>
  <dd>If set to `true', this style causes non-essential comment text to be
      removed from completion matches. Currently it is only used when completing
      e-mail addresses where it removes any display name from the addresses,
      cutting them down to plain <i>user@host</i> form.</dd>
  <dt><b>subst-globs-only</b></dt>
  <dd>This is used by the <b>_expand</b> completer. If it is set to `true', the
      expansion will only be used if it resulted from globbing; hence, if
      expansions resulted from the use of the <b>substitute</b> style described
      below, but these were not further changed by globbing, the expansions will
      be rejected.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The default for this style is `false'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>substitute</b></dt>
  <dd>This boolean style controls whether the <b>_expand</b> completer will
      first try to expand all substitutions in the string (such as
      `<b>$(</b><i>...</i><b>)</b>' and `<b>${</b><i>...</i><b>}</b>').</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The default is `true'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>suffix</b></dt>
  <dd>This is used by the <b>_expand</b> completer if the word starts with a
      tilde or contains a parameter expansion. If it is set to `true', the word
      will only be expanded if it doesn't have a suffix, i.e. if it is something
      like `<b>~foo</b>' or `<b>$foo</b>' rather than `<b>~foo/</b>' or
      `<b>$foo/bar</b>', unless that suffix itself contains characters eligible
      for expansion. The default for this style is `true'.</dd>
  <dt><b>tag-order</b></dt>
  <dd>This provides a mechanism for sorting how the tags available in a
      particular context will be used.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The values for the style are sets of space-separated lists of
    tags. The tags in each value will be tried at the same time; if no match is
    found, the next value is used. (See the <b>file-patterns</b> style for an
    exception to this behavior.)</p>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:complete:-command-:*:*' tag-order \ </b>
<b>    'commands functions'</b>
</pre>
</div>
<p class="Pp">specifies that completion in command position first offers
    external commands and shell functions. Remaining tags will be tried if no
    completions are found.</p>
<p class="Pp">In addition to tag names, each string in the value may take one of
    the following forms:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-</b></dt>
  <dd>If any value consists of only a hyphen, then <i>only</i> the tags
      specified in the other values are generated. Normally all tags not
      explicitly selected are tried last if the specified tags fail to generate
      any matches. This means that a single value consisting only of a single
      hyphen turns off completion.</dd>
  <dt><b>!</b> <i>tags</i>...</dt>
  <dd>A string starting with an exclamation mark specifies names of tags that
      are <i>not</i> to be used. The effect is the same as if all other possible
      tags for the context had been listed.</dd>
  <dt><i>tag</i><b>:</b><i>label</i> ...</dt>
  <dd>Here, <i>tag</i> is one of the standard tags and <i>label</i> is an
      arbitrary name. Matches are generated as normal but the name <i>label</i>
      is used in contexts instead of <i>tag</i>. This is not useful in words
      starting with <b>!</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the <i>label</i> starts with a hyphen, the <i>tag</i> is
    prepended to the <i>label</i> to form the name used for lookup. This can be
    used to make the completion system try a certain tag more than once,
    supplying different style settings for each attempt; see below for an
    example.</p>
</div>
<dl class="Bl-tag">
  <dt><i>tag</i><b>:</b><i>label</i><b>:</b><i>description</i></dt>
  <dd>As before, but <b>description</b> will replace the `<b>%d</b>' in the
      value of the <b>format</b> style instead of the default description
      supplied by the completion function. Spaces in the description must be
      quoted with a backslash. A `<b>%d</b>' appearing in <i>description</i> is
      replaced with the description given by the completion function.</dd>
</dl>
<p class="Pp">In any of the forms above the tag may be a pattern or several
    patterns in the form `<b>{</b><i>pat1</i><b>,</b><i>pat2...</i><b>}</b>'. In
    this case all matching tags will be used except for any given explicitly in
    the same string.</p>
<p class="Pp">One use of these features is to try one tag more than once,
    setting other styles differently on each attempt, but still to use all the
    other tags without having to repeat them all. For example, to make
    completion of function names in command position ignore all the completion
    functions starting with an underscore the first time completion is
  tried:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:-command-:*:*' tag-order \ </b>
<b>    'functions:-non-comp *' functions</b>
<b>zstyle ':completion:*:functions-non-comp' \ </b>
<b>    ignored-patterns '_*'</b>
</pre>
</div>
<p class="Pp">On the first attempt, all tags will be offered but the
    <b>functions</b> tag will be replaced by <b>functions-non-comp</b>. The
    <b>ignored-patterns</b> style is set for this tag to exclude functions
    starting with an underscore. If there are no matches, the second value of
    the <b>tag-order</b> style is used which completes functions using the
    default tag, this time presumably including all function names.</p>
<p class="Pp">The matches for one tag can be split into different groups. For
    example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' tag-order \ </b>
<b>    'options:-long:long\ options</b>
<b>     options:-short:short\ options</b>
<b>     options:-single-letter:single\ letter\ options'</b>
<b>zstyle ':completion:*:options-long' \ </b>
<b>     ignored-patterns '[-+](|-|[^-]*)'</b>
<b>zstyle ':completion:*:options-short' \ </b>
<b>     ignored-patterns '--*' '[-+]?'</b>
<b>zstyle ':completion:*:options-single-letter' \ </b>
<b>     ignored-patterns '???*'</b>
</pre>
</div>
<p class="Pp">With the <b>group-names</b> style set, options beginning with
    `<b>-</b><b>-</b>', options beginning with a single `<b>-</b>' or `<b>+</b>'
    but containing multiple characters, and single-letter options will be
    displayed in separate groups with different descriptions.</p>
<p class="Pp">Another use of patterns is to try multiple match specifications
    one after another. The <b>matcher-list</b> style offers something similar,
    but it is tested very early in the completion system and hence can't be set
    for single commands nor for more specific contexts. Here is how to try
    normal completion without any match specification and, if that generates no
    matches, try again with case-insensitive matching, restricting the effect to
    arguments of the command <b>foo</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*:*:foo:*:*' tag-order '*' '*:-case'</b>
<b>zstyle ':completion:*-case' matcher 'm:{a-z}={A-Z}'</b>
</pre>
</div>
<p class="Pp">First, all the tags offered when completing after <b>foo</b> are
    tried using the normal tag name. If that generates no matches, the second
    value of <b>tag-order</b> is used, which tries all tags again except that
    this time each has <b>-case</b> appended to its name for lookup of styles.
    Hence this time the value for the <b>matcher</b> style from the second call
    to <b>zstyle</b> in the example is used to make completion
  case-insensitive.</p>
<p class="Pp">It is possible to use the <b>-e</b> option of the <b>zstyle</b>
    builtin command to specify conditions for the use of particular tags. For
    example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle -e '*:-command-:*' tag-order '</b>
<b>    if [[ -n $PREFIX$SUFFIX ]]; then</b>
<b>      reply=( )</b>
<b>    else</b>
<b>      reply=( - )</b>
<b>    fi'</b>
</pre>
</div>
<p class="Pp">Completion in command position will be attempted only if the
    string typed so far is not empty. This is tested using the <b>PREFIX</b>
    special parameter; see zshcompwid for a description of parameters which are
    special inside completion widgets. Setting <b>reply</b> to an empty array
    provides the default behaviour of trying all tags at once; setting it to an
    array containing only a hyphen disables the use of all tags and hence of all
    completions.</p>
<p class="Pp">If no <b>tag-order</b> style has been defined for a context, the
    strings `<b>(|*-)argument-* (|*-)option-* values</b>' and `<b>options</b>'
    plus all tags offered by the completion function will be used to provide a
    sensible default behavior that causes arguments (whether normal command
    arguments or arguments of options) to be completed before option names for
    most commands.</p>
</div>
<dl class="Bl-tag">
  <dt><b>urls</b></dt>
  <dd>This is used together with the <b>urls</b> tag by functions completing
      URLs.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the value consists of more than one string, or if the only
    string does not name a file or directory, the strings are used as the URLs
    to complete.</p>
<p class="Pp">If the value contains only one string which is the name of a
    normal file the URLs are taken from that file (where the URLs may be
    separated by white space or newlines).</p>
<p class="Pp">Finally, if the only string in the value names a directory, the
    directory hierarchy rooted at this directory gives the completions. The top
    level directory should be the file access method, such as `<b>http</b>',
    `<b>ftp</b>', `<b>bookmark</b>' and so on. In many cases the next level of
    directories will be a filename. The directory hierarchy can descend as deep
    as necessary.</p>
<p class="Pp">For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' urls ~/.urls</b>
<b>mkdir -p ~/.urls/ftp/ftp.zsh.org/pub</b>
<b></b>
</pre>
</div>
<p class="Pp">allows completion of all the components of the URL
    <b>ftp://ftp.zsh.org/pub</b> after suitable commands such as
    `<b>netscape</b>' or `<b>lynx</b>'. Note, however, that access methods and
    files are completed separately, so if the <b>hosts</b> style is set hosts
    can be completed without reference to the <b>urls</b> style.</p>
<p class="Pp">See the description in the function <b>_urls</b> itself for more
    information (e.g. `<b>more $^fpath/_urls(N)</b>').</p>
</div>
<dl class="Bl-tag">
  <dt><b>use-cache</b></dt>
  <dd>If this is set, the completion caching layer is activated for any
      completions which use it (via the <b>_store_cache</b>,
      <b>_retrieve_cache</b>, and <b>_cache_invalid</b> functions). The
      directory containing the cache files can be changed with the
      <b>cache-path</b> style.</dd>
  <dt><b>use-compctl</b></dt>
  <dd>If this style is set to a string <i>not</i> equal to <b>false</b>,
      <b>0</b>, <b>no</b>, and <b>off</b>, the completion system may use any
      completion specifications defined with the <b>compctl</b> builtin command.
      If the style is unset, this is done only if the <b>zsh/compctl</b> module
      is loaded. The string may also contain the substring `<b>first</b>' to use
      completions defined with `<b>compctl -T</b>', and the substring
      `<b>default</b>' to use the completion defined with `<b>compctl
    -D</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that this is only intended to smooth the transition from
    <b>compctl</b> to the new completion system and may disappear in the
  future.</p>
<p class="Pp">Note also that the definitions from <b>compctl</b> will only be
    used if there is no specific completion function for the command in
    question. For example, if there is a function <b>_foo</b> to complete
    arguments to the command <b>foo</b>, <b>compctl</b> will never be invoked
    for <b>foo</b>. However, the <b>compctl</b> version will be tried if
    <b>foo</b> only uses default completion.</p>
</div>
<dl class="Bl-tag">
  <dt><b>use-ip</b></dt>
  <dd>By default, the function <b>_hosts</b> that completes host names strips IP
      addresses from entries read from host databases such as NIS and ssh files.
      If this style is `true', the corresponding IP addresses can be completed
      as well. This style is not use in any context where the <b>hosts</b> style
      is set; note also it must be set before the cache of host names is
      generated (typically the first completion attempt).</dd>
  <dt><b>users</b></dt>
  <dd>This may be set to a list of usernames to be completed. If it is not set
      all usernames will be completed. Note that if it is set only that list of
      users will be completed; this is because on some systems querying all
      users can take a prohibitive amount of time.</dd>
  <dt><b>users-hosts</b></dt>
  <dd>The values of this style should be of the form
      `<i>user</i><b>@</b><i>host</i>' or `<i>user</i><b>:</b><i>host</i>'. It
      is used for commands that need pairs of user- and hostnames. These
      commands will complete usernames from this style (only), and will restrict
      subsequent hostname completion to hosts paired with that user in one of
      the values of the style.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">It is possible to group values for sets of commands which allow a
    remote login, such as <b>rlogin</b> and <b>ssh</b>, by using the
    <b>my-accounts</b> tag. Similarly, values for sets of commands which usually
    refer to the accounts of other people, such as <b>talk</b> and
    <b>finger</b>, can be grouped by using the <b>other-accounts</b> tag. More
    ambivalent commands may use the <b>accounts</b> tag.</p>
</div>
<dl class="Bl-tag">
  <dt><b>users-hosts-ports</b></dt>
  <dd>Like <b>users-hosts</b> but used for commands like <b>telnet</b> and
      containing strings of the form
      `<i>user</i><b>@</b><i>host</i><b>:</b><i>port</i>'.</dd>
  <dt><b>verbose</b></dt>
  <dd>If set, as it is by default, the completion listing is more verbose. In
      particular many commands show descriptions for options if this style is
      `true'.</dd>
  <dt><b>word</b></dt>
  <dd>This is used by the <b>_list</b> completer, which prevents the insertion
      of completions until a second completion attempt when the line has not
      changed. The normal way of finding out if the line has changed is to
      compare its entire contents between the two occasions. If this style is
      `true', the comparison is instead performed only on the current word.
      Hence if completion is performed on another word with the same contents,
      completion will not be delayed.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="CONTROL_FUNCTIONS"><a class="permalink" href="#CONTROL_FUNCTIONS">CONTROL
  FUNCTIONS</a></h1>
The initialization script <b>compinit</b> redefines all the widgets which
  perform completion to call the supplied widget function <b>_main_complete</b>.
  This function acts as a wrapper calling the so-called `completer' functions
  that generate matches. If <b>_main_complete</b> is called with arguments,
  these are taken as the names of completer functions to be called in the order
  given. If no arguments are given, the set of functions to try is taken from
  the <b>completer</b> style. For example, to use normal completion and
  correction if that doesn't generate any matches:
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer _complete _correct</b>
</pre>
</div>
<p class="Pp">after calling <b>compinit</b>. The default value for this style is
    `<b>_complete _ignored</b>', i.e. normally only ordinary completion is
    tried, first with the effect of the <b>ignored-patterns</b> style and then
    without it. The <b>_main_complete</b> function uses the return status of the
    completer functions to decide if other completers should be called. If the
    return status is zero, no other completers are tried and the
    <b>_main_complete</b> function returns.</p>
<p class="Pp">If the first argument to <b>_main_complete</b> is a single hyphen,
    the arguments will not be taken as names of completers. Instead, the second
    argument gives a name to use in the <i>completer</i> field of the context
    and the other arguments give a command name and arguments to call to
    generate the matches.</p>
<p class="Pp">The following completer functions are contained in the
    distribution, although users may write their own. Note that in contexts the
    leading underscore is stripped, for example basic completion is performed in
    the context `<b>:completion::complete:</b><i>...</i>'.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_all_matches</b></dt>
  <dd>This completer can be used to add a string consisting of all other
      matches. As it influences later completers it must appear as the first
      completer in the list. The list of all matches is affected by the
      <b>avoid-completer</b> and <b>old-matches</b> styles described above.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">It may be useful to use the <b>_generic</b> function described
    below to bind <b>_all_matches</b> to its own keystroke, for example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zle -C all-matches complete-word _generic</b>
<b>bindkey '^Xa' all-matches</b>
<b>zstyle ':completion:all-matches:*' old-matches only</b>
<b>zstyle ':completion:all-matches::::' completer _all_matches</b>
</pre>
</div>
<p class="Pp">Note that this does not generate completions by itself: first use
    any of the standard ways of generating a list of completions, then use
    <b>^Xa</b> to show all matches. It is possible instead to add a standard
    completer to the list and request that the list of all matches should be
    directly inserted:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:all-matches::::' completer \ </b>
<b>       _all_matches _complete</b>
<b>zstyle ':completion:all-matches:*' insert true</b>
</pre>
</div>
<p class="Pp">In this case the <b>old-matches</b> style should not be set.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_approximate</b></dt>
  <dd>This is similar to the basic <b>_complete</b> completer but allows the
      completions to undergo corrections. The maximum number of errors can be
      specified by the <b>max-errors</b> style; see the description of
      approximate matching in <i>zshexpn</i>(1) for how errors are counted.
      Normally this completer will only be tried after the normal
      <b>_complete</b> completer:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer _complete _approximate</b>
</pre>
</div>
<p class="Pp">This will give correcting completion if and only if normal
    completion yields no possible completions. When corrected completions are
    found, the completer will normally start menu completion allowing you to
    cycle through these strings.</p>
<p class="Pp">This completer uses the tags <b>corrections</b> and
    <b>original</b> when generating the possible corrections and the original
    string. The <b>format</b> style for the former may contain the additional
    sequences `<b>%e</b>' and `<b>%o</b>' which will be replaced by the number
    of errors accepted to generate the corrections and the original string,
    respectively.</p>
<p class="Pp">The completer progressively increases the number of errors allowed
    up to the limit by the <b>max-errors</b> style, hence if a completion is
    found with one error, no completions with two errors will be shown, and so
    on. It modifies the completer name in the context to indicate the number of
    errors being tried: on the first try the completer field contains
    `<b>approximate-1</b>', on the second try `<b>approximate-2</b>', and so
  on.</p>
<p class="Pp">When <b>_approximate</b> is called from another function, the
    number of errors to accept may be passed with the <b>-a</b> option. The
    argument is in the same format as the <b>max-errors</b> style, all in one
    string.</p>
<p class="Pp">Note that this completer (and the <b>_correct</b> completer
    mentioned below) can be quite expensive to call, especially when a large
    number of errors are allowed. One way to avoid this is to set up the
    <b>completer</b> style using the <b>-e</b> option to zstyle so that some
    completers are only used when completion is attempted a second time on the
    same string, e.g.:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle -e ':completion:*' completer '</b>
<b>  if [[ $_last_try != &quot;$HISTNO$BUFFER$CURSOR&quot; ]]; then</b>
<b>    _last_try=&quot;$HISTNO$BUFFER$CURSOR&quot;</b>
<b>    reply=(_complete _match _prefix)</b>
<b>  else</b>
<b>    reply=(_ignored _correct _approximate)</b>
<b>  fi'</b>
</pre>
</div>
<p class="Pp">This uses the <b>HISTNO</b> parameter and the <b>BUFFER</b> and
    <b>CURSOR</b> special parameters that are available inside zle and
    completion widgets to find out if the command line hasn't changed since the
    last time completion was tried. Only then are the <b>_ignored</b>,
    <b>_correct</b> and <b>_approximate</b> completers called.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_canonical_paths</b> [ <b>-A</b> <i>var</i> ] [ <b>-N</b> ] [
    <b>-MJV12nfX</b> ] <i>tag</i> <i>descr</i> [ <i>paths</i> ... ]</dt>
  <dd>This completion function completes all paths given to it, and also tries
      to offer completions which point to the same file as one of the paths
      given (relative path when an absolute path is given, and vice versa; when
      <b>..</b>'s are present in the word to be completed; and some paths got
      from symlinks).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"><b>-A</b>, if specified, takes the paths from the array variable
    specified. Paths can also be specified on the command line as shown above.
    <b>-N</b>, if specified, prevents canonicalizing the paths given before
    using them for completion, in case they are already so. The options
    <b>-M</b>, <b>-J</b>, <b>-V</b>, <b>-1</b>, <b>-2</b>, <b>-n</b>, <b>-F</b>,
    <b>-X</b> are passed to <b>compadd</b>.</p>
<p class="Pp">See <b>_description</b> for a description of <i>tag</i> and
    <i>descr</i>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_cmdambivalent</b></dt>
  <dd>Completes the remaining positional arguments as an external command. The
      external command and its arguments are completed as separate arguments (in
      a manner appropriate for completing <b>/usr/bin/env</b>) if there are two
      or more remaining positional arguments on the command line, and as a
      quoted command string (in the manner of <b>system(...)</b>) otherwise. See
      also <b>_cmdstring</b> and <b>_precommand</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This function takes no arguments.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_cmdstring</b></dt>
  <dd>Completes an external command as a single argument, as for
      <b>system(...)</b>.</dd>
  <dt><b>_complete</b></dt>
  <dd>This completer generates all possible completions in a context-sensitive
      manner, i.e. using the settings defined with the <b>compdef</b> function
      explained above and the current settings of all special parameters. This
      gives the normal completion behaviour.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">To complete arguments of commands, <b>_complete</b> uses the
    utility function <b>_normal</b>, which is in turn responsible for finding
    the particular function; it is described below. Various contexts of the form
    <b>-</b><i>context</i><b>-</b> are handled specifically. These are all
    mentioned above as possible arguments to the <b>#compdef</b> tag.</p>
<p class="Pp">Before trying to find a function for a specific context,
    <b>_complete</b> checks if the parameter `<b>compcontext</b>' is set.
    Setting `<b>compcontext</b>' allows the usual completion dispatching to be
    overridden which is useful in places such as a function that uses
    <b>vared</b> for input. If it is set to an array, the elements are taken to
    be the possible matches which will be completed using the tag
    `<b>values</b>' and the description `<b>value</b>'. If it is set to an
    associative array, the keys are used as the possible completions and the
    values (if non-empty) are used as descriptions for the matches. If
    `<b>compcontext</b>' is set to a string containing colons, it should be of
    the form `<i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>'. In this case
    the <i>tag</i> and <i>descr</i> give the tag and description to use and the
    <i>action</i> indicates what should be completed in one of the forms
    accepted by the <b>_arguments</b> utility function described below.</p>
<p class="Pp">Finally, if `<b>compcontext</b>' is set to a string without
    colons, the value is taken as the name of the context to use and the
    function defined for that context will be called. For this purpose, there is
    a special context named <b>-command-line-</b> that completes whole command
    lines (commands and their arguments). This is not used by the completion
    system itself but is nonetheless handled when explicitly called.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_correct</b></dt>
  <dd>Generate corrections, but not completions, for the current word; this is
      similar to <b>_approximate</b> but will not allow any number of extra
      characters at the cursor as that completer does. The effect is similar to
      spell-checking. It is based on <b>_approximate</b>, but the completer
      field in the context name is <b>correct</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example, with:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:::::' completer \ </b>
<b>       _complete _correct _approximate</b>
<b>zstyle ':completion:*:correct:::' max-errors 2 not-numeric</b>
<b>zstyle ':completion:*:approximate:::' max-errors 3 numeric</b>
</pre>
</div>
<p class="Pp">correction will accept up to two errors. If a numeric argument is
    given, correction will not be performed, but correcting completion will be,
    and will accept as many errors as given by the numeric argument. Without a
    numeric argument, first correction and then correcting completion will be
    tried, with the first one accepting two errors and the second one accepting
    three errors.</p>
<p class="Pp">When <b>_correct</b> is called as a function, the number of errors
    to accept may be given following the <b>-a</b> option. The argument is in
    the same form a values to the <b>accept</b> style, all in one string.</p>
<p class="Pp">This completer function is intended to be used without the
    <b>_approximate</b> completer or, as in the example, just before it. Using
    it after the <b>_approximate</b> completer is useless since
    <b>_approximate</b> will at least generate the corrected strings generated
    by the <b>_correct</b> completer -- and probably more.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_expand</b></dt>
  <dd>This completer function does not really perform completion, but instead
      checks if the word on the command line is eligible for expansion and, if
      it is, gives detailed control over how this expansion is done. For this to
      happen, the completion system needs to be invoked with
      <b>complete-word</b>, not <b>expand-or-complete</b> (the default binding
      for <b>TAB</b>), as otherwise the string will be expanded by the shell's
      internal mechanism before the completion system is started. Note also this
      completer should be called before the <b>_complete</b> completer
    function.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The tags used when generating expansions are <b>all-expansions</b>
    for the string containing all possible expansions, <b>expansions</b> when
    adding the possible expansions as single matches and <b>original</b> when
    adding the original string from the line. The order in which these strings
    are generated, if at all, can be controlled by the <b>group-order</b> and
    <b>tag-order</b> styles, as usual.</p>
<p class="Pp">The format string for <b>all-expansions</b> and for
    <b>expansions</b> may contain the sequence `<b>%o</b>' which will be
    replaced by the original string from the line.</p>
<p class="Pp">The kind of expansion to be tried is controlled by the
    <b>substitute</b>, <b>glob</b> and <b>subst-globs-only</b> styles.</p>
<p class="Pp">It is also possible to call <b>_expand</b> as a function, in which
    case the different modes may be selected with options: <b>-s</b> for
    <b>substitute</b>, <b>-g</b> for <b>glob</b> and <b>-o</b> for
    <b>subst-globs-only</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_expand_alias</b></dt>
  <dd>If the word the cursor is on is an alias, it is expanded and no other
      completers are called. The types of aliases which are to be expanded can
      be controlled with the styles <b>regular</b>, <b>global</b> and
      <b>disabled</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This function is also a bindable command, see the section
    `Bindable Commands' below.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_extensions</b></dt>
  <dd>If the cursor follows the string `<b>*.</b>', filename extensions are
      completed. The extensions are taken from files in current directory or a
      directory specified at the beginning of the current word. For exact
      matches, completion continues to allow other completers such as
      <b>_expand</b> to expand the pattern. The standard <b>add-space</b> and
      <b>prefix-hidden</b> styles are observed.</dd>
  <dt><b>_external_pwds</b></dt>
  <dd>Completes current directories of other zsh processes belonging to the
      current user.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This is intended to be used via <b>_generic</b>, bound to a custom
    key combination. Note that pattern matching is enabled so matching is
    performed similar to how it works with the <b>_match</b> completer.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_history</b></dt>
  <dd>Complete words from the shell's command history. This completer can be
      controlled by the <b>remove-all-dups</b>, and <b>sort</b> styles as for
      the <b>_history_complete_word</b> bindable command, see the section
      `Bindable Commands' below and the section `Completion System
      Configuration' above.</dd>
  <dt><b>_ignored</b></dt>
  <dd>The <b>ignored-patterns</b> style can be set to a list of patterns which
      are compared against possible completions; matching ones are removed. With
      this completer those matches can be reinstated, as if no
      <b>ignored-patterns</b> style were set. The completer actually generates
      its own list of matches; which completers are invoked is determined in the
      same way as for the <b>_prefix</b> completer. The <b>single-ignored</b>
      style is also available as described above.</dd>
  <dt><b>_list</b></dt>
  <dd>This completer allows the insertion of matches to be delayed until
      completion is attempted a second time without the word on the line being
      changed. On the first attempt, only the list of matches will be shown. It
      is affected by the styles <b>condition</b> and <b>word</b>, see the
      section `Completion System Configuration' above.</dd>
  <dt><b>_match</b></dt>
  <dd>This completer is intended to be used after the <b>_complete</b>
      completer. It behaves similarly but the string on the command line may be
      a pattern to match against trial completions. This gives the effect of the
      <b>GLOB_COMPLETE</b> option.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Normally completion will be performed by taking the pattern from
    the line, inserting a `<b>*</b>' at the cursor position and comparing the
    resulting pattern with the possible completions generated. This can be
    modified with the <b>match-original</b> style described above.</p>
<p class="Pp">The generated matches will be offered in a menu completion unless
    the <b>insert-unambiguous</b> style is set to `true'; see the description
    above for other options for this style.</p>
<p class="Pp">Note that matcher specifications defined globally or used by the
    completion functions (the styles <b>matcher-list</b> and <b>matcher</b>)
    will not be used.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_menu</b></dt>
  <dd>This completer was written as simple example function to show how menu
      completion can be enabled in shell code. However, it has the notable
      effect of disabling menu selection which can be useful with
      <b>_generic</b> based widgets. It should be used as the first completer in
      the list. Note that this is independent of the setting of the
      <b>MENU_COMPLETE</b> option and does not work with the other menu
      completion widgets such as <b>reverse-menu-complete</b>, or
      <b>accept-and-menu-complete</b>.</dd>
  <dt><b>_oldlist</b></dt>
  <dd>This completer controls how the standard completion widgets behave when
      there is an existing list of completions which may have been generated by
      a special completion (i.e. a separately-bound completion command). It
      allows the ordinary completion keys to continue to use the list of
      completions thus generated, instead of producing a new list of ordinary
      contextual completions. It should appear in the list of completers before
      any of the widgets which generate matches. It uses two styles:
      <b>old-list</b> and <b>old-menu</b>, see the section `Completion System
      Configuration' above.</dd>
  <dt><b>_precommand</b></dt>
  <dd>Complete an external command in word-separated arguments, as for
      <b>exec</b> and <b>/usr/bin/env</b>.</dd>
  <dt><b>_prefix</b></dt>
  <dd>This completer can be used to try completion with the suffix (everything
      after the cursor) ignored. In other words, the suffix will not be
      considered to be part of the word to complete. The effect is similar to
      the <b>expand-or-complete-prefix</b> command.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>completer</b> style is used to decide which other
    completers are to be called to generate matches. If this style is unset, the
    list of completers set for the current context is used -- except, of course,
    the <b>_prefix</b> completer itself. Furthermore, if this completer appears
    more than once in the list of completers only those completers not already
    tried by the last invocation of <b>_prefix</b> will be called.</p>
<p class="Pp">For example, consider this global <b>completer</b> style:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer \ </b>
<b>    _complete _prefix _correct _prefix:foo</b>
</pre>
</div>
<p class="Pp">Here, the <b>_prefix</b> completer tries normal completion but
    ignoring the suffix. If that doesn't generate any matches, and neither does
    the call to the <b>_correct</b> completer after it, <b>_prefix</b> will be
    called a second time and, now only trying correction with the suffix
    ignored. On the second invocation the completer part of the context appears
    as `<b>foo</b>'.</p>
<p class="Pp">To use <b>_prefix</b> as the last resort and try only normal
    completion when it is invoked:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zstyle ':completion:*' completer _complete ... _prefix</b>
<b>zstyle ':completion::prefix:*' completer _complete</b>
</pre>
</div>
<p class="Pp">The <b>add-space</b> style is also respected. If it is set to
    `true' then <b>_prefix</b> will insert a space between the matches generated
    (if any) and the suffix.</p>
<p class="Pp">Note that this completer is only useful if the
    <b>COMPLETE_IN_WORD</b> option is set; otherwise, the cursor will be moved
    to the end of the current word before the completion code is called and
    hence there will be no suffix.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_user_expand</b></dt>
  <dd>This completer behaves similarly to the <b>_expand</b> completer but
      instead performs expansions defined by users. The styles <b>add-space</b>
      and <b>sort</b> styles specific to the <b>_expand</b> completer are usable
      with <b>_user_expand</b> in addition to other styles handled more
      generally by the completion system. The tag <b>all-expansions</b> is also
      available.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The expansion depends on the array style <b>user-expand</b> being
    defined for the current context; remember that the context for completers is
    less specific than that for contextual completion as the full context has
    not yet been determined. Elements of the array may have one of the following
    forms:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>$</b><i>hash</i></dt>
  <dd>
    <p class="Pp"><i>hash</i> is the name of an associative array. Note this is
        not a full parameter expression, merely a <b>$</b>, suitably quoted to
        prevent immediate expansion, followed by the name of an associative
        array. If the trial expansion word matches a key in <i>hash</i>, the
        resulting expansion is the corresponding value.</p>
  </dd>
  <dt><i>_func</i></dt>
  <dd>
    <p class="Pp"><i>_func</i> is the name of a shell function whose name must
        begin with <b>_</b> but is not otherwise special to the completion
        system. The function is called with the trial word as an argument. If
        the word is to be expanded, the function should set the array
        <b>reply</b> to a list of expansions. Optionally, it can set
        <b>REPLY</b> to a word that will be used as a description for the set of
        expansions. The return status of the function is irrelevant.</p>
  </dd>
</dl>
<p class="Pp"></p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="BINDABLE_COMMANDS"><a class="permalink" href="#BINDABLE_COMMANDS">BINDABLE
  COMMANDS</a></h1>
In addition to the context-dependent completions provided, which are expected to
  work in an intuitively obvious way, there are a few widgets implementing
  special behaviour which can be bound separately to keys. The following is a
  list of these and their default bindings.
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_bash_completions</b></dt>
  <dd>This function is used by two widgets, <b>_bash_complete-word</b> and
      <b>_bash_list-choices</b>. It exists to provide compatibility with
      completion bindings in bash. The last character of the binding determines
      what is completed: `<b>!</b>', command names; `<b>$</b>', environment
      variables; `<b>@</b>', host names; `<b>/</b>', file names; `<b>~</b>' user
      names. In bash, the binding preceded by `<b>\e</b>' gives completion, and
      preceded by `<b>^X</b>' lists options. As some of these bindings clash
      with standard zsh bindings, only `<b>\e~</b>' and `<b>^X~</b>' are bound
      by default. To add the rest, the following should be added to
      <b>.zshrc</b> after <b>compinit</b> has been run:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>for key in '!' '$' '@' '/' '~'; do</b>
<b>  bindkey &quot;\e$key&quot; _bash_complete-word</b>
<b>  bindkey &quot;^X$key&quot; _bash_list-choices</b>
<b>done</b>
</pre>
</div>
<p class="Pp">This includes the bindings for `<b>~</b>' in case they were
    already bound to something else; the completion code does not override user
    bindings.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_correct_filename</b> (<b>^XC</b>)</dt>
  <dd>Correct the filename path at the cursor position. Allows up to six errors
      in the name. Can also be called with an argument to correct a filename
      path, independently of zle; the correction is printed on standard
    output.</dd>
  <dt><b>_correct_word</b> (<b>^Xc</b>)</dt>
  <dd>Performs correction of the current argument using the usual contextual
      completions as possible choices. This stores the string
      `<b>correct-word</b>' in the <i>function</i> field of the context name and
      then calls the <b>_correct</b> completer.</dd>
  <dt><b>_expand_alias</b> (<b>^Xa</b>)</dt>
  <dd>This function can be used as a completer and as a bindable command. It
      expands the word the cursor is on if it is an alias. The types of alias
      expanded can be controlled with the styles <b>regular</b>, <b>global</b>
      and <b>disabled</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When used as a bindable command there is one additional feature
    that can be selected by setting the <b>complete</b> style to `true'. In this
    case, if the word is not the name of an alias, <b>_expand_alias</b> tries to
    complete the word to a full alias name without expanding it. It leaves the
    cursor directly after the completed word so that invoking
    <b>_expand_alias</b> once more will expand the now-complete alias name.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_expand_word</b> (<b>^Xe</b>)</dt>
  <dd>Performs expansion on the current word: equivalent to the standard
      <b>expand-word</b> command, but using the <b>_expand</b> completer. Before
      calling it, the <i>function</i> field of the context is set to
      `<b>expand-word</b>'.</dd>
  <dt><b>_generic</b></dt>
  <dd>This function is not defined as a widget and not bound by default.
      However, it can be used to define a widget and will then store the name of
      the widget in the <i>function</i> field of the context and call the
      completion system. This allows custom completion widgets with their own
      set of style settings to be defined easily. For example, to define a
      widget that performs normal completion and starts menu selection:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zle -C foo complete-word _generic</b>
<b>bindkey '...' foo</b>
<b>zstyle ':completion:foo:*' menu yes select=1</b>
</pre>
</div>
<p class="Pp">Note in particular that the <b>completer</b> style may be set for
    the context in order to change the set of functions used to generate
    possible matches. If <b>_generic</b> is called with arguments, those are
    passed through to <b>_main_complete</b> as the list of completers in place
    of those defined by the <b>completer</b> style.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_history_complete_word</b> (<b>\e/</b>)</dt>
  <dd>Complete words from the shell's command history. This uses the
      <b>list</b>, <b>remove-all-dups</b>, <b>sort</b>, and <b>stop</b>
    styles.</dd>
  <dt><b>_most_recent_file</b> (<b>^Xm</b>)</dt>
  <dd>Complete the name of the most recently modified file matching the pattern
      on the command line (which may be blank). If given a numeric argument
      <i>N</i>, complete the <i>N</i>th most recently modified file. Note the
      completion, if any, is always unique.</dd>
  <dt><b>_next_tags</b> (<b>^Xn</b>)</dt>
  <dd>This command alters the set of matches used to that for the next tag, or
      set of tags, either as given by the <b>tag-order</b> style or as set by
      default; these matches would otherwise not be available. Successive
      invocations of the command cycle through all possible sets of tags.</dd>
  <dt><b>_read_comp</b> (<b>^X^R</b>)</dt>
  <dd>Prompt the user for a string, and use that to perform completion on the
      current word. There are two possibilities for the string. First, it can be
      a set of words beginning `<b>_</b>', for example `<b>_files -/</b>', in
      which case the function with any arguments will be called to generate the
      completions. Unambiguous parts of the function name will be completed
      automatically (normal completion is not available at this point) until a
      space is typed.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Second, any other string will be passed as a set of arguments to
    <b>compadd</b> and should hence be an expression specifying what should be
    completed.</p>
<p class="Pp">A very restricted set of editing commands is available when
    reading the string: `<b>DEL</b>' and `<b>^H</b>' delete the last character;
    `<b>^U</b>' deletes the line, and `<b>^C</b>' and `<b>^G</b>' abort the
    function, while `<b>RET</b>' accepts the completion. Note the string is used
    verbatim as a command line, so arguments must be quoted in accordance with
    standard shell rules.</p>
<p class="Pp">Once a string has been read, the next call to <b>_read_comp</b>
    will use the existing string instead of reading a new one. To force a new
    string to be read, call <b>_read_comp</b> with a numeric argument.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_complete_debug</b> (<b>^X?</b>)</dt>
  <dd>This widget performs ordinary completion, but captures in a temporary file
      a trace of the shell commands executed by the completion system. Each
      completion attempt gets its own file. A command to view each of these
      files is pushed onto the editor buffer stack.</dd>
  <dt><b>_complete_help</b> (<b>^Xh</b>)</dt>
  <dd>This widget displays information about the context names, the tags, and
      the completion functions used when completing at the current cursor
      position. If given a numeric argument other than <b>1</b> (as in `<b>ESC-2
      ^Xh</b>'), then the styles used and the contexts for which they are used
      will be shown, too.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that the information about styles may be incomplete; it
    depends on the information available from the completion functions called,
    which in turn is determined by the user's own styles and other settings.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_complete_help_generic</b></dt>
  <dd>Unlike other commands listed here, this must be created as a normal ZLE
      widget rather than a completion widget (i.e. with <b>zle -N</b>). It is
      used for generating help with a widget bound to the <b>_generic</b> widget
      that is described above.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If this widget is created using the name of the function, as it is
    by default, then when executed it will read a key sequence. This is expected
    to be bound to a call to a completion function that uses the <b>_generic</b>
    widget. That widget will be executed, and information provided in the same
    format that the <b>_complete_help</b> widget displays for contextual
    completion.</p>
<p class="Pp">If the widget's name contains <b>debug</b>, for example if it is
    created as `<b>zle -N _complete_debug_generic _complete_help_generic</b>',
    it will read and execute the keystring for a generic widget as before, but
    then generate debugging information as done by <b>_complete_debug</b> for
    contextual completion.</p>
<p class="Pp">If the widget's name contains <b>noread</b>, it will not read a
    keystring but instead arrange that the next use of a generic widget run in
    the same shell will have the effect as described above.</p>
<p class="Pp">The widget works by setting the shell parameter
    <b>ZSH_TRACE_GENERIC_WIDGET</b> which is read by <b>_generic</b>. Unsetting
    the parameter cancels any pending effect of the <b>noread</b> form.</p>
<p class="Pp">For example, after executing the following:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>zle -N _complete_debug_generic _complete_help_generic</b>
<b>bindkey '^x:' _complete_debug_generic</b>
</pre>
</div>
<p class="Pp">typing `<b>C-x :</b>' followed by the key sequence for a generic
    widget will cause trace output for that widget to be saved to a file.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_complete_tag</b> (<b>^Xt</b>)</dt>
  <dd>This widget completes symbol tags created by the <b>etags</b> or
      <b>ctags</b> programmes (note there is no connection with the completion
      system's tags) stored in a file <b>TAGS</b>, in the format used by
      <b>etags</b>, or <b>tags</b>, in the format created by <b>ctags</b>. It
      will look back up the path hierarchy for the first occurrence of either
      file; if both exist, the file <b>TAGS</b> is preferred. You can specify
      the full path to a <b>TAGS</b> or <b>tags</b> file by setting the
      parameter <b>$TAGSFILE</b> or <b>$tagsfile</b> respectively. The
      corresponding completion tags used are <b>etags</b> and <b>vtags</b>,
      after emacs and vi respectively.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="UTILITY_FUNCTIONS"><a class="permalink" href="#UTILITY_FUNCTIONS">UTILITY
  FUNCTIONS</a></h1>
Descriptions follow for utility functions that may be useful when writing
  completion functions. If functions are installed in subdirectories, most of
  these reside in the <b>Base</b> subdirectory. Like the example functions for
  commands in the distribution, the utility functions generating matches all
  follow the convention of returning status zero if they generated completions
  and non-zero if no matching completions could be added.
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_absolute_command_paths</b></dt>
  <dd>This function completes external commands as absolute paths (unlike
      <b>_command_names -e</b> which completes their basenames). It takes no
      arguments.</dd>
  <dt><b>_all_labels</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <i>tag</i> <i>name</i>
    <i>descr</i> [ <i>command</i> <i>arg</i> ... ]</dt>
  <dd>This is a convenient interface to the <b>_next_label</b> function below,
      implementing the loop shown in the <b>_next_label</b> example. The
      <i>command</i> and its arguments are called to generate the matches. The
      options stored in the parameter <i>name</i> will automatically be inserted
      into the <i>arg</i>s passed to the <i>command</i>. Normally, they are put
      directly after the <i>command</i>, but if one of the <i>arg</i>s is a
      single hyphen, they are inserted directly before that. If the hyphen is
      the last argument, it will be removed from the argument list before the
      <i>command</i> is called. This allows <b>_all_labels</b> to be used in
      almost all cases where the matches can be generated by a single call to
      the <b>compadd</b> builtin command or by a call to one of the utility
      functions.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local expl</b>
<b>...</b>
<b>if _requested foo; then</b>
<b>  ...</b>
<b>  _all_labels foo expl '...' compadd ... - $matches</b>
<b>fi</b>
</pre>
</div>
<p class="Pp">Will complete the strings from the <b>matches</b> parameter, using
    <b>compadd</b> with additional options which will take precedence over those
    generated by <b>_all_labels</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_alternative</b> [ <b>-O</b> <i>name</i> ] [ <b>-C</b> <i>name</i> ]
    <i>spec</i> ...</dt>
  <dd>This function is useful in simple cases where multiple tags are available.
      Essentially it implements a loop like the one described for the
      <b>_tags</b> function below.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The tags to use and the action to perform if a tag is requested
    are described using the <i>spec</i>s which are of the form:
    `<i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>'. The <i>tag</i>s are
    offered using <b>_tags</b> and if the tag is requested, the <i>action</i> is
    executed with the given description <i>descr</i>. The <i>action</i>s are
    those accepted by the <b>_arguments</b> function (described below),
    excluding the `<b>-&gt;</b><i>state</i>' and `<b>=</b><i>...</i>' forms.</p>
<p class="Pp">For example, the <i>action</i> may be a simple function call:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_alternative \ </b>
<b>    'users:user:_users' \ </b>
<b>    'hosts:host:_hosts'</b>
</pre>
</div>
<p class="Pp">offers usernames and hostnames as possible matches, generated by
    the <b>_users</b> and <b>_hosts</b> functions respectively.</p>
<p class="Pp">Like <b>_arguments</b>, this function uses <b>_all_labels</b> to
    execute the actions, which will loop over all sets of tags. Special handling
    is only required if there is an additional valid tag, for example inside a
    function called from <b>_alternative</b>.</p>
<p class="Pp">The option `<b>-O</b> <i>name</i>' is used in the same way as by
    the <b>_arguments</b> function. In other words, the elements of the
    <i>name</i> array will be passed to <b>compadd</b> when executing an
  action.</p>
<p class="Pp">Like <b>_tags</b> this function supports the <b>-C</b> option to
    give a different name for the argument context field.</p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_arguments </b>[ <b>-nswWCRS</b> ] [ <b>-A</b> <i>pat</i> ] [ <b>-O</b>
    <i>name</i> ] [ <b>-M</b> <i>matchspec</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[ <b>:</b> ] <i>spec</i> ...</dt>
  <dd></dd>
  <dt><b>_arguments </b>[ <i>opt</i> ... ] <b>-</b><b>-</b> [ <b>-l</b> ] [
    <b>-i</b> <i>pats</i> ] [ <b>-s</b> <i>pair</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[ <i>helpspec</i> ...]</dt>
  <dd>This function can be used to give a complete specification for completion
      for a command whose arguments follow standard UNIX option and argument
      conventions.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"><i>Options Overview</i></p>
<p class="Pp">Options to <b>_arguments</b> itself must be in separate words,
    i.e. <b>-s -w</b>, not <b>-sw</b>. The options are followed by <i>spec</i>s
    that describe options and arguments of the analyzed command. To avoid
    ambiguity, all options to <b>_arguments</b> itself may be separated from the
    <i>spec</i> forms by a single colon.</p>
<p class="Pp">The `<b>-</b><b>-</b>' form is used to intuit <i>spec</i> forms
    from the help output of the command being analyzed, and is described in
    detail below. The <i>opts</i> for the `<b>-</b><b>-</b>' form are otherwise
    the same options as the first form. Note that `<b>-s</b>' following
    `<b>-</b><b>-</b>' has a distinct meaning from `<b>-s</b>' preceding
    `<b>-</b><b>-</b>', and both may appear.</p>
<p class="Pp">The option switches <b>-s</b>, <b>-S</b>, <b>-A</b>, <b>-w</b>,
    and <b>-W</b> affect how <b>_arguments</b> parses the analyzed command
    line's options. These switches are useful for commands with standard
    argument parsing.</p>
<p class="Pp">The options of <b>_arguments</b> have the following meanings:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-n</b></dt>
  <dd>With this option, <b>_arguments</b> sets the parameter <b>NORMARG</b> to
      the position of the first normal argument in the <b>$words</b> array, i.e.
      the position after the end of the options. If that argument has not been
      reached, <b>NORMARG</b> is set to <b>-1</b>. The caller should declare
      `<b>integer NORMARG</b>' if the <b>-n</b> option is passed; otherwise the
      parameter is not used.</dd>
  <dt><b>-s</b></dt>
  <dd>Enable <i>option stacking</i> for single-letter options, whereby multiple
      single-letter options may be combined into a single word. For example, the
      two options `<b>-x</b>' and `<b>-y</b>' may be combined into a single word
      `<b>-xy</b>'. By default, every word corresponds to a single option name
      (`<b>-xy</b>' is a single option named `<b>xy</b>').</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Options beginning with a single hyphen or plus sign are eligible
    for stacking; words beginning with two hyphens are not.</p>
<p class="Pp">Note that <b>-s</b> after <b>-</b><b>-</b> has a different
    meaning, which is documented in the segment entitled `Deriving <i>spec</i>
    forms from the help output'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>-w</b></dt>
  <dd>In combination with <b>-s</b>, allow option stacking even if one or more
      of the options take arguments. For example, if <b>-x</b> takes an
      argument, with no <b>-s</b>, `<b>-xy</b>' is considered as a single
      (unhandled) option; with <b>-s</b>, <b>-xy</b> is an option with the
      argument `<b>y</b>'; with both <b>-s</b> and <b>-w</b>, <b>-xy</b> is the
      option <b>-x</b> and the option <b>-y</b> with arguments to <b>-x</b> (and
      to <b>-y</b>, if it takes arguments) still to come in subsequent
    words.</dd>
  <dt><b>-W</b></dt>
  <dd>This option takes <b>-w</b> a stage further: it is possible to complete
      single-letter options even after an argument that occurs in the same word.
      However, it depends on the action performed whether options will really be
      completed at this point. For more control, use a utility function like
      <b>_guard</b> as part of the action.</dd>
  <dt><b>-C</b></dt>
  <dd>Modify the <b>curcontext</b> parameter for an action of the form
      `<b>-&gt;</b><i>state</i>'. This is discussed in detail below.</dd>
  <dt><b>-R</b></dt>
  <dd>Return status 300 instead of zero when a <b>$state</b> is to be handled,
      in the `<b>-&gt;</b><i>string</i>' syntax.</dd>
  <dt><b>-S</b></dt>
  <dd>Do not complete options after a `<b>-</b><b>-</b>' appearing on the line,
      and ignore the `<b>-</b><b>-</b>'. For example, with <b>-S</b>, in the
      line</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>foobar -x -- -y</b>
</pre>
</div>
<p class="Pp">the `<b>-x</b>' is considered an option, the `<b>-y</b>' is
    considered an argument, and the `<b>-</b><b>-</b>' is considered to be
    neither.</p>
</div>
<dl class="Bl-tag">
  <dt><b>-A</b> <i>pat</i></dt>
  <dd>Do not complete options after the first non-option argument on the line.
      <i>pat</i> is a pattern matching all strings which are not to be taken as
      arguments. For example, to make <b>_arguments</b> stop completing options
      after the first normal argument, but ignoring all strings starting with a
      hyphen even if they are not described by one of the <i>optspec</i>s, the
      form is `<b>-A &quot;-*&quot;</b>'.</dd>
  <dt><b>-O</b> <i>name</i></dt>
  <dd>Pass the elements of the array <i>name</i> as arguments to functions
      called to execute <i>action</i>s. This is discussed in detail below.</dd>
  <dt><b>-M</b> <i>matchspec</i></dt>
  <dd>Use the match specification <i>matchspec</i> for completing option names
      and values. The default <i>matchspec</i> allows partial word completion
      after `<b>_</b>' and `<b>-</b>', such as completing `<b>-f-b</b>' to
      `<b>-foo-bar</b>'. The default <i>matchspec</i> is:</dd>
</dl>
<div class="Bd-indent">
<pre>
<b></b><b>r:|[_-]=* r:|=*</b><b></b><b></b>
</pre>
</div>
<p class="Pp"><i></i><i>spec</i><i>s: overview</i><i></i></p>
<p class="Pp">Each of the following forms is a <i>spec</i> describing individual
    sets of options or arguments on the command line being analyzed.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><i>n</i><b>:</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><i>n</i><b>::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd>This describes the <i>n</i>'th normal argument. The <i>message</i> will be
      printed above the matches generated and the <i>action</i> indicates what
      can be completed in this position (see below). If there are two colons
      before the <i>message</i> the argument is optional. If the <i>message</i>
      contains only white space, nothing will be printed above the matches
      unless the action adds an explanation string itself.</dd>
  <dt><b>:</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><b>::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd>Similar, but describes the <i>next</i> argument, whatever number that
      happens to be. If all arguments are specified in this form in the correct
      order the numbers are unnecessary.</dd>
  <dt><b>*:</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><b>*::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><b>*:::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd>This describes how arguments (usually non-option arguments, those not
      beginning with <b>-</b> or <b>+</b>) are to be completed when neither of
      the first two forms was provided. Any number of arguments can be completed
      in this fashion.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">With two colons before the <i>message</i>, the <b>words</b>
    special array and the <b>CURRENT</b> special parameter are modified to refer
    only to the normal arguments when the <i>action</i> is executed or
    evaluated. With three colons before the <i>message</i> they are modified to
    refer only to the normal arguments covered by this description.</p>
</div>
<dl class="Bl-tag">
  <dt><i>optspec</i></dt>
  <dd></dd>
  <dt><i>optspec</i><b>:</b><i>...</i></dt>
  <dd>This describes an option. The colon indicates handling for one or more
      arguments to the option; if it is not present, the option is assumed to
      take no arguments.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The following forms are available for the initial <i>optspec</i>,
    whether or not the option has arguments.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>*</b><i>optspec</i></dt>
  <dd>Here <i>optspec</i> is one of the remaining forms below. This indicates
      the following <i>optspec</i> may be repeated. Otherwise if the
      corresponding option is already present on the command line to the left of
      the cursor it will not be offered again.</dd>
  <dt><b>-</b><i>optname</i></dt>
  <dd></dd>
  <dt><b>+</b><i>optname</i></dt>
  <dd>In the simplest form the <i>optspec</i> is just the option name beginning
      with a minus or a plus sign, such as `<b>-foo</b>'. The first argument for
      the option (if any) must follow as a <i>separate</i> word directly after
      the option.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Either of `<b>-+</b><i>optname</i>' and `<b>+-</b><i>optname</i>'
    can be used to specify that <b>-</b><i>optname</i> and
    <b>+</b><i>optname</i> are both valid.</p>
<p class="Pp">In all the remaining forms, the leading `<b>-</b>' may be replaced
    by or paired with `<b>+</b>' in this way.</p>
</div>
<dl class="Bl-tag">
  <dt><b>-</b><i>optname</i><b>-</b></dt>
  <dd>The first argument of the option must come directly after the option name
      <i>in the same word</i>. For example, `<b>-foo-:</b><i>...</i>' specifies
      that the completed option and argument will look like
      `<b>-foo</b><i>arg</i>'.</dd>
  <dt><b>-</b><i>optname</i><b>+</b></dt>
  <dd>The first argument may appear immediately after <i>optname</i> in the same
      word, or may appear as a separate word after the option. For example,
      `<b>-foo+:</b><i>...</i>' specifies that the completed option and argument
      will look like either `<b>-foo</b><i>arg</i>' or `<b>-foo</b>
    <i>arg</i>'.</dd>
  <dt><b>-</b><i>optname</i><b>=</b></dt>
  <dd>The argument may appear as the next word, or in same word as the option
      name provided that it is separated from it by an equals sign, for example
      `<b>-foo=</b><i>arg</i>' or `<b>-foo</b> <i>arg</i>'.</dd>
  <dt><b>-</b><i>optname</i><b>=-</b></dt>
  <dd>The argument to the option must appear after an equals sign in the same
      word, and may not be given in the next argument.</dd>
  <dt><i>optspec</i><b>[</b><i>explanation</i><b>]</b></dt>
  <dd>An explanation string may be appended to any of the preceding forms of
      <i>optspec</i> by enclosing it in brackets, as in `<b>-q[query
      operation]</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>verbose</b> style is used to decide whether the explanation
    strings are displayed with the option in a completion listing.</p>
<p class="Pp">If no bracketed explanation string is given but the
    <b>auto-description</b> style is set and only one argument is described for
    this <i>optspec</i>, the value of the style is displayed, with any
    appearance of the sequence `<b>%d</b>' in it replaced by the <i>message</i>
    of the first <i>optarg</i> that follows the <i>optspec</i>; see below.</p>
</div>
<p class="Pp">It is possible for options with a literal `<b>+</b>' or `<b>=</b>'
    to appear, but that character must be quoted, for example `<b>-\+</b>'.</p>
<p class="Pp">Each <i>optarg</i> following an <i>optspec</i> must take one of
    the following forms:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>:</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><b>::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd>An argument to the option; <i>message</i> and <i>action</i> are treated as
      for ordinary arguments. In the first form, the argument is mandatory, and
      in the second form it is optional.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This group may be repeated for options which take multiple
    arguments. In other words,
    <b>:</b><i>message1</i><b>:</b><i>action1</i><b>:</b><i>message2</i><b>:</b><i>action2</i>
    specifies that the option takes two arguments.</p>
</div>
<dl class="Bl-tag">
  <dt><b>:*</b><i>pattern</i><b>:</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><b>:*</b><i>pattern</i><b>::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd></dd>
  <dt><b>:*</b><i>pattern</i><b>:::</b><i>message</i><b>:</b><i>action</i></dt>
  <dd>This describes multiple arguments. Only the last <i>optarg</i> for an
      option taking multiple arguments may be given in this form. If the
      <i>pattern</i> is empty (i.e. <b>:*:</b>), all the remaining words on the
      line are to be completed as described by the <i>action</i>; otherwise, all
      the words up to and including a word matching the <i>pattern</i> are to be
      completed using the <i>action</i>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Multiple colons are treated as for the `<b>*:</b><i>...</i>' forms
    for ordinary arguments: when the <i>message</i> is preceded by two colons,
    the <b>words</b> special array and the <b>CURRENT</b> special parameter are
    modified during the execution or evaluation of the <i>action</i> to refer
    only to the words after the option. When preceded by three colons, they are
    modified to refer only to the words covered by this description.</p>
</div>
</div>
<p class="Pp">Any literal colon in an <i>optname</i>, <i>message</i>, or
    <i>action</i> must be preceded by a backslash, `<b>\:</b>'.</p>
<p class="Pp">Each of the forms above may be preceded by a list in parentheses
    of option names and argument numbers. If the given option is on the command
    line, the options and arguments indicated in parentheses will not be
    offered. For example, `<b>(-two -three 1)-one:</b><i>...</i>' completes the
    option `<b>-one</b>'; if this appears on the command line, the options
    <b>-two</b> and <b>-three</b> and the first ordinary argument will not be
    completed after it. `<b>(-foo):</b><i>...</i>' specifies an ordinary
    argument completion; <b>-foo</b> will not be completed if that argument is
    already present.</p>
<p class="Pp">Other items may appear in the list of excluded options to indicate
    various other items that should not be applied when the current
    specification is matched: a single star (<b>*</b>) for the rest arguments
    (i.e. a specification of the form `<b>*:</b><i>...</i>'); a colon (<b>:</b>)
    for all normal (non-option-) arguments; and a hyphen (<b>-</b>) for all
    options. For example, if `<b>(*)</b>' appears before an option and the
    option appears on the command line, the list of remaining arguments (those
    shown in the above table beginning with `<b>*:</b>') will not be
  completed.</p>
<p class="Pp">To aid in reuse of specifications, it is possible to precede any
    of the forms above with `<b>!</b>'; then the form will no longer be
    completed, although if the option or argument appears on the command line
    they will be skipped as normal. The main use for this is when the arguments
    are given by an array, and <b>_arguments</b> is called repeatedly for more
    specific contexts: on the first call `<b>_arguments $global_options</b>' is
    used, and on subsequent calls `<b>_arguments !$^global_options</b>'.</p>
<p class="Pp"><i></i><i>spec</i><i>s: actions</i><i></i></p>
<p class="Pp">In each of the forms above the <i>action</i> determines how
    completions should be generated. Except for the `<b>-&gt;</b><i>string</i>'
    form below, the <i>action</i> will be executed by calling the
    <b>_all_labels</b> function to process all tag labels. No special handling
    of tags is needed unless a function call introduces a new one.</p>
<p class="Pp">The functions called to execute <i>action</i>s will be called with
    the elements of the array named by the `<b>-O</b> <i>name</i>' option as
    arguments. This can be used, for example, to pass the same set of options
    for the <b>compadd</b> builtin to all <i>action</i>s.</p>
<p class="Pp">The forms for <i>action</i> are as follows.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b> </b>(single unquoted space)</dt>
  <dd>This is useful where an argument is required but it is not possible or
      desirable to generate matches for it. The <i>message</i> will be displayed
      but no completions listed. Note that even in this case the colon at the
      end of the <i>message</i> is needed; it may only be omitted when neither a
      <i>message</i> nor an <i>action</i> is given.</dd>
  <dt><b>(</b><i>item1</i> <i>item2</i> <i>...</i><b>)</b></dt>
  <dd>One of a list of possible matches, for example:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b></b><b>:foo:(foo bar baz</b><b></b><b>)</b><b></b><b></b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>((</b><i>item1</i><b>\:</b><i>desc1</i><b>
    </b><i>...</i><b>))</b><i></i></dt>
  <dd>Similar to the above, but with descriptions for each possible match. Note
      the backslash before the colon. For example,</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b></b><b>:foo:((a\:bar b\:baz</b><b></b><b>))</b><b></b><b></b>
</pre>
</div>
<p class="Pp">The matches will be listed together with their descriptions if the
    <b>description</b> style is set with the <b>values</b> tag in the
  context.</p>
</div>
<dl class="Bl-tag">
  <dt><b>-&gt;</b><i>string</i></dt>
  <dd>In this form, <b>_arguments</b> processes the arguments and options and
      then returns control to the calling function with parameters set to
      indicate the state of processing; the calling function then makes its own
      arrangements for generating completions. For example, functions that
      implement a state machine can use this type of action.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Where <b>_arguments</b> encounters <i>action</i> in the
    `<b>-&gt;</b><i>string</i>' format, it will strip all leading and trailing
    whitespace from <i>string</i> and set the array <b>state</b> to the set of
    all <i>string</i>s for which an action is to be performed. The elements of
    the array <b>state_descr</b> are assigned the corresponding <i>message</i>
    field from each <i>optarg</i> containing such an <i>action</i>.</p>
<p class="Pp">By default and in common with all other well behaved completion
    functions, _arguments returns status zero if it was able to add matches and
    non-zero otherwise. However, if the <b>-R</b> option is given,
    <b>_arguments</b> will instead return a status of 300 to indicate that
    <b>$state</b> is to be handled.</p>
<p class="Pp">In addition to <b>$state</b> and <b>$state_descr</b>,
    <b>_arguments</b> also sets the global parameters `<b>context</b>',
    `<b>line</b>' and `<b>opt_args</b>' as described below, and does not reset
    any changes made to the special parameters such as <b>PREFIX</b> and
    <b>words</b>. This gives the calling function the choice of resetting these
    parameters or propagating changes in them.</p>
<p class="Pp">A function calling <b>_arguments</b> with at least one action
    containing a `<b>-&gt;</b><i>string</i>' must therefore declare appropriate
    local parameters:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local context state state_descr line</b>
<b>typeset -A opt_args</b>
</pre>
</div>
<p class="Pp">to prevent <b>_arguments</b> from altering the global
  environment.</p>
</div>
<dl class="Bl-tag">
  <dt><b>{</b><i>eval-string</i><b>}</b></dt>
  <dd>A string in braces is evaluated as shell code to generate matches. If the
      <i>eval-string</i> itself does not begin with an opening parenthesis or
      brace it is split into separate words before execution.</dd>
  <dt><b>= </b><i>action</i></dt>
  <dd>If the <i>action</i> starts with `<b>= </b>' (an equals sign followed by a
      space), <b>_arguments</b> will insert the contents of the <i>argument</i>
      field of the current context as the new first element in the <b>words</b>
      special array and increment the value of the <b>CURRENT</b> special
      parameter. This has the effect of inserting a dummy word onto the
      completion command line while not changing the point at which completion
      is taking place.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This is most useful with one of the specifiers that restrict the
    words on the command line on which the <i>action</i> is to operate (the two-
    and three-colon forms above). One particular use is when an <i>action</i>
    itself causes <b>_arguments</b> on a restricted range; it is necessary to
    use this trick to insert an appropriate command name into the range for the
    second call to <b>_arguments</b> to be able to parse the line.</p>
</div>
<dl class="Bl-tag">
  <dt><i></i><b> </b><i>word...</i><b></b></dt>
  <dd></dd>
  <dt><i>word...</i></dt>
  <dd>This covers all forms other than those above. If the <i>action</i> starts
      with a space, the remaining list of words will be invoked unchanged.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Otherwise it will be invoked with some extra strings placed after
    the first word; these are to be passed down as options to the <b>compadd</b>
    builtin. They ensure that the state specified by <b>_arguments</b>, in
    particular the descriptions of options and arguments, is correctly passed to
    the completion command. These additional arguments are taken from the array
    parameter `<b>expl</b>'; this will be set up before executing the
    <i>action</i> and hence may be referred to inside it, typically in an
    expansion of the form `<b>$expl[@]</b>' which preserves empty elements of
    the array.</p>
</div>
<p class="Pp">During the performance of the action the array `<b>line</b>' will
    be set to the normal arguments from the command line, i.e. the words from
    the command line after the command name excluding all options and their
    arguments. Options are stored in the associative array `<b>opt_args</b>'
    with option names as keys and their arguments as the values. For options
    that have more than one argument these are given as one string, separated by
    colons. All colons and backslashes in the original arguments are preceded
    with backslashes.</p>
<p class="Pp">The parameter `<b>context</b>' is set when returning to the
    calling function to perform an action of the form
    `<b>-&gt;</b><i>string</i>'. It is set to an array of elements corresponding
    to the elements of <b>$state</b>. Each element is a suitable name for the
    argument field of the context: either a string of the form
    `<b>option</b><i>-opt</i><b>-</b><i>n</i>' for the <i>n</i>'th argument of
    the option <i>-opt</i>, or a string of the form `<b>argument-</b><i>n</i>'
    for the <i>n</i>'th argument. For `rest' arguments, that is those in the
    list at the end not handled by position, <i>n</i> is the string
    `<b>rest</b>'. For example, when completing the argument of the <b>-o</b>
    option, the name is `<b>option-o-1</b>', while for the second normal
    (non-option-) argument it is `<b>argument-2</b>'.</p>
<p class="Pp">Furthermore, during the evaluation of the <i>action</i> the
    context name in the <b>curcontext</b> parameter is altered to append the
    same string that is stored in the <b>context</b> parameter.</p>
<p class="Pp">The option <b>-C</b> tells <b>_arguments</b> to modify the
    <b>curcontext</b> parameter for an action of the form
    `<b>-&gt;</b><i>state</i>'. This is the standard parameter used to keep
    track of the current context. Here it (and not the <b>context</b> array)
    should be made local to the calling function to avoid passing back the
    modified value and should be initialised to the current value at the start
    of the function:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local curcontext=&quot;$curcontext&quot;</b>
</pre>
</div>
<p class="Pp">This is useful where it is not possible for multiple states to be
    valid together.</p>
<p class="Pp"><i>Grouping Options</i></p>
<p class="Pp">Options can be grouped to simplify exclusion lists. A group is
    introduced with `<b>+</b>' followed by a name for the group in the
    subsequent word. Whole groups can then be referenced in an exclusion list or
    a group name can be used to disambiguate between two forms of the same
    option. For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments \ </b>
<b>    '(group2--x)-a' \ </b>
<b>  + group1 \ </b>
<b>    -m \ </b>
<b>    '(group2)-n' \ </b>
<b>  + group2 \ </b>
<b>    -x -y</b>
</pre>
</div>
<p class="Pp">If the name of a group is specified in the form
    `<b>(</b><i>name</i><b>)</b>' then only one value from that group will ever
    be completed; more formally, all specifications are mutually exclusive to
    all other specifications in that group. This is useful for defining options
    that are aliases for each other. For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments \ </b>
<b>    -a -b \ </b>
<b>  + '(operation)' \ </b>
<b>    {-c,--compress}'[compress]' \ </b>
<b>    {-d,--decompress}'[decompress]' \ </b>
<b>    {-l,--list}'[list]'</b>
</pre>
</div>
<p class="Pp">If an option in a group appears on the command line, it is stored
    in the associative array `<b>opt_args</b>' with
    '<i>group</i><b>-</b><i>option</i>' as a key. In the example above, a key
    `<b>operation--c</b>' is used if the option `<b>-c</b>' is present on the
    command line.</p>
<p class="Pp"><i>Specifying Multiple Sets of Arguments</i></p>
<p class="Pp">It is possible to specify multiple sets of options and arguments
    with the sets separated by single hyphens. This differs from groups in that
    sets are considered to be mutually exclusive of each other.</p>
<p class="Pp">Specifications before the first set and from any group are common
    to all sets. For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments \ </b>
<b>    -a \ </b>
<b>  - set1 \ </b>
<b>    -c \ </b>
<b>  - set2 \ </b>
<b>    -d \ </b>
<b>    ':arg:(x2 y2)'</b>
</pre>
</div>
<p class="Pp">This defines two sets. When the command line contains the option
    `<b>-c</b>', the `<b>-d</b>' option and the argument will not be considered
    possible completions. When it contains `<b>-d</b>' or an argument, the
    option `<b>-c</b>' will not be considered. However, after `<b>-a</b>' both
    sets will still be considered valid.</p>
<p class="Pp">As for groups, the name of a set may appear in exclusion lists,
    either alone or preceding a normal option or argument specification.</p>
<p class="Pp">The completion code has to parse the command line separately for
    each set. This can be slow so sets should only be used when necessary. A
    useful alternative is often an option specification with rest-arguments (as
    in `<b>-foo:*:...</b>'); here the option <b>-foo</b> swallows up all
    remaining arguments as described by the <i>optarg</i> definitions.</p>
<p class="Pp"><i>Deriving </i><i>spec</i><i> forms from the help
    output</i><i></i></p>
<p class="Pp">The option `<b>-</b><b>-</b>' allows <b>_arguments</b> to work out
    the names of long options that support the `<b>-</b><b>-help</b>' option
    which is standard in many GNU commands. The command word is called with the
    argument `<b>-</b><b>-help</b>' and the output examined for option names.
    Clearly, it can be dangerous to pass this to commands which may not support
    this option as the behaviour of the command is unspecified.</p>
<p class="Pp">In addition to options, `<b>_arguments -</b><b>-</b>' will try to
    deduce the types of arguments available for options when the form
    `<b>-</b><b>-</b><i>opt</i><b>=</b><i>val</i>' is valid. It is also possible
    to provide hints by examining the help text of the command and adding
    <i>helpspec</i> of the form
    `<i>pattern</i><b>:</b><i>message</i><b>:</b><i>action</i>'; note that other
    <b>_arguments</b> <i>spec</i> forms are not used. The <i>pattern</i> is
    matched against the help text for an option, and if it matches the
    <i>message</i> and <i>action</i> are used as for other argument specifiers.
    The special case of `<b>*:</b>' means both <i>message</i> and <i>action</i>
    are empty, which has the effect of causing options having no description in
    the help output to be ordered in listings ahead of options that have a
    description.</p>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments -- '*\*:toggle:(yes no)' \ </b>
<b>              '*=FILE*:file:_files' \ </b>
<b>              '*=DIR*:directory:_files -/' \ </b>
<b>              '*=PATH*:directory:_files -/'</b>
</pre>
</div>
<p class="Pp">Here, `<b>yes</b>' and `<b>no</b>' will be completed as the
    argument of options whose description ends in a star; file names will be
    completed for options that contain the substring `<b>=FILE</b>' in the
    description; and directories will be completed for options whose description
    contains `<b>=DIR</b>' or `<b>=PATH</b>'. The last three are in fact the
    default and so need not be given explicitly, although it is possible to
    override the use of these patterns. A typical help text which uses this
    feature is:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>  -C, --directory=DIR          change to directory DIR</b>
</pre>
</div>
<p class="Pp">so that the above specifications will cause directories to be
    completed after `<b>-</b><b>-directory</b>', though not after
  `<b>-C</b>'.</p>
<p class="Pp">Note also that <b>_arguments</b> tries to find out automatically
    if the argument for an option is optional. This can be specified explicitly
    by doubling the colon before the <i>message</i>.</p>
<p class="Pp">If the <i>pattern</i> ends in `<b>(-)</b>', this will be removed
    from the pattern and the <i>action</i> will be used only directly after the
    `<b>=</b>', not in the next word. This is the behaviour of a normal
    specification defined with the form `<b>=-</b>'.</p>
<p class="Pp">By default, the command (with the option `<b>--help</b>') is run
    after resetting all the locale categories (except for <b>LC_CTYPE</b>) to
    `<b>C</b>'. If the localized help output is known to work, the option
    `<b>-l</b>' can be specified after the `<b>_arguments -</b><b>-</b>' so that
    the command is run in the current locale.</p>
<p class="Pp">The `<b>_arguments -</b><b>-</b>' can be followed by the option
    `<b>-i</b> <i>patterns</i>' to give patterns for options which are not to be
    completed. The patterns can be given as the name of an array parameter or as
    a literal list in parentheses. For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments -- -i \ </b>
<b>    &quot;(--(en|dis)able-FEATURE*)&quot;</b>
</pre>
</div>
<p class="Pp">will cause completion to ignore the options
    `<b>-</b><b>-enable-FEATURE</b>' and `<b>-</b><b>-disable-FEATURE</b>' (this
    example is useful with GNU <b>configure</b>).</p>
<p class="Pp">The `<b>_arguments -</b><b>-</b>' form can also be followed by the
    option `<b>-s</b> <i>pair</i>' to describe option aliases. The <i>pair</i>
    consists of a list of alternating patterns and corresponding replacements,
    enclosed in parens and quoted so that it forms a single argument word in the
    <b>_arguments</b> call.</p>
<p class="Pp">For example, some <b>configure</b>-script help output describes
    options only as `<b>-</b><b>-enable-foo</b>', but the script also accepts
    the negated form `<b>-</b><b>-disable-foo</b>'. To allow completion of the
    second form:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments -- -s &quot;((#s)--enable- --disable-)&quot;</b>
</pre>
</div>
<p class="Pp"><i>Miscellaneous notes</i></p>
<p class="Pp">Finally, note that <b>_arguments</b> generally expects to be the
    primary function handling any completion for which it is used. It may have
    side effects which change the treatment of any matches added by other
    functions called after it. To combine <b>_arguments</b> with other
    functions, those functions should be called either before <b>_arguments</b>,
    as an <i>action</i> within a <i>spec</i>, or in handlers for
    `<b>-&gt;</b><i>state</i>' actions.</p>
<p class="Pp">Here is a more general example of the use of
  <b>_arguments</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments '-l+:left border:' \ </b>
<b>           '-format:paper size:(letter A4)' \ </b>
<b>           '*-copy:output file:_files::resolution:(300 600)' \ </b>
<b>           ':postscript file:_files -g \*.\(ps\|eps\)' \ </b>
<b>           '*:page number:'</b>
</pre>
</div>
<p class="Pp">This describes three options: `<b>-l</b>', `<b>-format</b>', and
    `<b>-copy</b>'. The first takes one argument described as `<i>left</i>
    <i>border</i>' for which no completion will be offered because of the empty
    action. Its argument may come directly after the `<b>-l</b>' or it may be
    given as the next word on the line.</p>
<p class="Pp">The `<b>-format</b>' option takes one argument in the next word,
    described as `<i>paper size</i>' for which only the strings `<b>letter</b>'
    and `<b>A4</b>' will be completed.</p>
<p class="Pp">The `<b>-copy</b>' option may appear more than once on the command
    line and takes two arguments. The first is mandatory and will be completed
    as a filename. The second is optional (because of the second colon before
    the description `<i>resolution</i>') and will be completed from the strings
    `<b>300</b>' and `<b>600</b>'.</p>
<p class="Pp">The last two descriptions say what should be completed as
    arguments. The first describes the first argument as a `<i>postscript
    file</i>' and makes files ending in `<b>ps</b>' or `<b>eps</b>' be
    completed. The last description gives all other arguments the description
    `<i>page numbers</i>' but does not offer completions.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_cache_invalid</b> <i>cache_identifier</i></dt>
  <dd>This function returns status zero if the completions cache corresponding
      to the given cache identifier needs rebuilding. It determines this by
      looking up the <b>cache-policy</b> style for the current context. This
      should provide a function name which is run with the full path to the
      relevant cache file as the only argument.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_example_caching_policy () {</b>
<b>    # rebuild if cache is more than a week old</b>
<b>    local -a oldp</b>
<b>    oldp=( &quot;$1&quot;(Nm+7) )</b>
<b>    (( $#oldp ))</b>
<b>}</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>_call_function</b> <i>return</i> <i>name</i> [ <i>arg</i> ... ]</dt>
  <dd>If a function <i>name</i> exists, it is called with the arguments
      <i>arg</i>s. The <i>return</i> argument gives the name of a parameter in
      which the return status from the function <i>name</i> should be stored; if
      <i>return</i> is empty or a single hyphen it is ignored.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The return status of <b>_call_function</b> itself is zero if the
    function <i>name</i> exists and was called and non-zero otherwise.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_call_program</b> [ <b>-l</b> ] [ <b>-p</b> ] <i>tag</i> <i>string</i>
    ...</dt>
  <dd>This function provides a mechanism for the user to override the use of an
      external command. It looks up the <b>command</b> style with the supplied
      <i>tag</i>. If the style is set, its value is used as the command to
      execute. The <i>string</i>s from the call to <b>_call_program</b>, or from
      the style if set, are concatenated with spaces between them and the
      resulting string is evaluated. The return status is the return status of
      the command called.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">By default, the command is run in an environment where all the
    locale categories (except for <b>LC_CTYPE</b>) are reset to `<b>C</b>' by
    calling the utility function <b>_comp_locale</b> (see below). If the option
    `<b>-l</b>' is given, the command is run with the current locale.</p>
<p class="Pp">If the option `<b>-p</b>' is supplied it indicates that the
    command output is influenced by the permissions it is run with. If the
    <b>gain-privileges</b> style is set to true, <b>_call_program</b> will make
    use of commands such as <b>sudo</b>, if present on the command-line, to
    match the permissions to whatever the final command is likely to run under.
    When looking up the <b>gain-privileges</b> and <b>command</b> styles, the
    command component of the zstyle context will end with a slash (`<b>/</b>')
    followed by the command that would be used to gain privileges.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_combination</b> [ <b>-s</b> <i>pattern</i> ] <i>tag</i> <i>style</i>
    <i>spec</i> ... <i>field</i> <i>opts</i> ...</dt>
  <dd>This function is used to complete combinations of values, for example
      pairs of hostnames and usernames. The <i>style</i> argument gives the
      style which defines the pairs; it is looked up in a context with the
      <i>tag</i> specified.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The style name consists of field names separated by hyphens, for
    example `<b>users-hosts-ports</b>'. For each field for a value is already
    known, a <i>spec</i> of the form `<i>field</i><b>=</b><i>pattern</i>' is
    given. For example, if the command line so far specifies a user
    `<b>pws</b>', the argument `<b>users=pws</b>' should appear.</p>
<p class="Pp">The next argument with no equals sign is taken as the name of the
    field for which completions should be generated (presumably not one of the
    <i>field</i>s for which the value is known).</p>
<p class="Pp">The matches generated will be taken from the value of the style.
    These should contain the possible values for the combinations in the
    appropriate order (users, hosts, ports in the example above). The values for
    the different fields are separated by colons. This can be altered with the
    option <b>-s</b> to <b>_combination</b> which specifies a pattern. Typically
    this is a character class, as for example `<b>-s &quot;[:@]&quot;</b>' in
    the case of the <b>users-hosts</b> style. Each
    `<i>field</i><b>=</b><i>pattern</i>' specification restricts the completions
    which apply to elements of the style with appropriately matching fields.</p>
<p class="Pp">If no style with the given name is defined for the given tag, or
    if none of the strings in style's value match, but a function name of the
    required field preceded by an underscore is defined, that function will be
    called to generate the matches. For example, if there is no
    `<b>users-hosts-ports</b>' or no matching hostname when a host is required,
    the function `<b>_hosts</b>' will automatically be called.</p>
<p class="Pp">If the same name is used for more than one field, in both the
    `<i>field</i><b>=</b><i>pattern</i>' and the argument that gives the name of
    the field to be completed, the number of the field (starting with one) may
    be given after the fieldname, separated from it by a colon.</p>
<p class="Pp">All arguments after the required field name are passed to
    <b>compadd</b> when generating matches from the style value, or to the
    functions for the fields if they are called.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_command_names</b> [ <b>-e</b> | <b>-</b> ]</dt>
  <dd>This function completes words that are valid at command position: names of
      aliases, builtins, hashed commands, functions, and so on. With the
      <b>-e</b> flag, only hashed commands are completed. The <b>-</b> flag is
      ignored.</dd>
  <dt><b>_comp_locale</b></dt>
  <dd>This function resets all the locale categories other than <b>LC_CTYPE</b>
      to `<b>C</b>' so that the output from external commands can be easily
      analyzed by the completion system. <b>LC_CTYPE</b> retains the current
      value (taking <b>LC_ALL</b> and <b>LANG</b> into account), ensuring that
      non-ASCII characters in file names are still handled properly.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This function should normally be run only in a subshell, because
    the new locale is exported to the environment. Typical usage would be
    `<b>$(_comp_locale; </b><i>command</i> ...<b>)</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_completers</b> [ <b>-p</b> ]</dt>
  <dd>This function completes names of completers.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-p</b></dt>
  <dd>Include the leading underscore (`<b>_</b>') in the matches.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_describe </b>[<b>-12JVx</b>] [ <b>-oO</b> | <b>-t</b> <i>tag</i> ]
    <i>descr</i> <i>name1</i> [ <i>name2</i> ] [ <i>opt</i> ... ]</dt>
  <dd></dd>
  <dt><b> </b>[ <b>-</b><b>-</b> <i>name1</i> [ <i>name2</i> ] [ <i>opt</i> ...
    ] ... ]</dt>
  <dd>This function associates completions with descriptions. Multiple groups
      separated by <b>-</b><b>-</b> can be supplied, potentially with different
      completion options <i>opt</i>s.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <i>descr</i> is taken as a string to display above the matches
    if the <b>format</b> style for the <b>descriptions</b> tag is set. This is
    followed by one or two names of arrays followed by options to pass to
    <b>compadd</b>. The array <i>name1</i> contains the possible completions
    with their descriptions in the form
    `<i>completion</i><b>:</b><i>description</i>'. Any literal colons in
    <i>completion</i> must be quoted with a backslash. If a <i>name2</i> is
    given, it should have the same number of elements as <i>name1</i>; in this
    case the corresponding elements are added as possible completions instead of
    the <i>completion</i> strings from <i>name1</i>. The completion list will
    retain the descriptions from <i>name1</i>. Finally, a set of completion
    options can appear.</p>
<p class="Pp">If the option `<b>-o</b>' appears before the first argument, the
    matches added will be treated as names of command options (N.B. not shell
    options), typically following a `<b>-</b>', `<b>-</b><b>-</b>' or `<b>+</b>'
    on the command line. In this case <b>_describe</b> uses the
    <b>prefix-hidden</b>, <b>prefix-needed</b> and <b>verbose</b> styles to find
    out if the strings should be added as completions and if the descriptions
    should be shown. Without the `<b>-o</b>' option, only the <b>verbose</b>
    style is used to decide how descriptions are shown. If `<b>-O</b>' is used
    instead of `<b>-o</b>', command options are completed as above but
    <b>_describe</b> will not handle the <b>prefix-needed</b> style.</p>
<p class="Pp">With the <b>-t</b> option a <i>tag</i> can be specified. The
    default is `<b>values</b>' or, if the <b>-o</b> option is given,
    `<b>options</b>'.</p>
<p class="Pp">The options <b>-1</b>, <b>-2</b>, <b>-J</b>, <b>-V</b>, <b>-x</b>
    are passed to <b>_next_label</b>.</p>
<p class="Pp">If selected by the <b>list-grouped</b> style, strings with the
    same description will appear together in the list.</p>
<p class="Pp"><b>_describe</b> uses the <b>_all_labels</b> function to generate
    the matches, so it does not need to appear inside a loop over tag
  labels.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_description</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <i>tag</i> <i>name</i>
    <i>descr</i> [ <i>spec</i> ... ]</dt>
  <dd>This function is not to be confused with the previous one; it is used as a
      helper function for creating options to <b>compadd</b>. It is buried
      inside many of the higher level completion functions and so often does not
      need to be called directly.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The styles listed below are tested in the current context using
    the given <i>tag</i>. The resulting options for <b>compadd</b> are put into
    the array named <i>name</i> (this is traditionally `<b>expl</b>', but this
    convention is not enforced). The description for the corresponding set of
    matches is passed to the function in <i>descr</i>.</p>
<p class="Pp">The styles tested are: <b>format</b>, <b>hidden</b>,
    <b>matcher</b>, <b>ignore-line</b>, <b>ignored-patterns</b>,
    <b>group-name</b> and <b>sort</b>. The <b>format</b> style is first tested
    for the given <i>tag</i> and then for the <b>descriptions</b> tag if no
    value was found, while the remainder are only tested for the tag given as
    the first argument. The function also calls <b>_setup</b> which tests some
    more styles.</p>
<p class="Pp">The string returned by the <b>format</b> style (if any) will be
    modified so that the sequence `<b>%d</b>' is replaced by the <i>descr</i>
    given as the third argument without any leading or trailing white space. If,
    after removing the white space, the <i>descr</i> is the empty string, the
    format style will not be used and the options put into the <i>name</i> array
    will not contain an explanation string to be displayed above the
  matches.</p>
<p class="Pp">If <b>_description</b> is called with more than three arguments,
    the additional <i>spec</i>s should be of the form
    `<i>char</i><b>:</b><i>str</i>'. These supply escape sequence replacements
    for the <b>format</b> style: every appearance of `<b>%</b><i>char</i>' will
    be replaced by <i>string</i>.</p>
<p class="Pp">If the <b>-x</b> option is given, the description will be passed
    to <b>compadd</b> using the <b>-x</b> option instead of the default
    <b>-X</b>. This means that the description will be displayed even if there
    are no corresponding matches.</p>
<p class="Pp">The options placed in the array <i>name</i> take account of the
    <b>group-name</b> style, so matches are placed in a separate group where
    necessary. The group normally has its elements sorted (by passing the option
    <b>-J</b> to <b>compadd</b>), but if an option starting with `<b>-V</b>',
    `<b>-J</b>', `<b>-1</b>', or `<b>-2</b>' is passed to <b>_description</b>,
    that option will be included in the array. Hence it is possible for the
    completion group to be unsorted by giving the option `<b>-V</b>',
    `<b>-1V</b>', or `<b>-2V</b>'.</p>
<p class="Pp">In most cases, the function will be used like this:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local expl</b>
<b>_description files expl file</b>
<b>compadd &quot;$expl[@]&quot; - &quot;$files[@]&quot;</b>
</pre>
</div>
<p class="Pp">Note the use of the parameter <b>expl</b>, the hyphen, and the
    list of matches. Almost all calls to <b>compadd</b> within the completion
    system use a similar format; this ensures that user-specified styles are
    correctly passed down to the builtins which implement the internals of
    completion.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_dir_list</b> [ <b>-s</b> <i>sep</i> ] [ <b>-S</b> ]</dt>
  <dd>Complete a list of directory names separated by colons (the same format as
      <b>$PATH</b>).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-s</b> <i>sep</i></dt>
  <dd>Use <i>sep</i> as separator between items. <i>sep</i> defaults to a colon
      (`<b>:</b>').</dd>
  <dt><b>-S</b></dt>
  <dd>Add <i>sep</i> instead of slash (`<b>/</b>') as an autoremoveable
    suffix.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><b>_dispatch</b> <i>context string</i> ...</dt>
  <dd>This sets the current context to <i>context</i> and looks for completion
      functions to handle this context by hunting through the list of command
      names or special contexts (as described above for <b>compdef</b>) given as
      <i>string</i>s. The first completion function to be defined for one of the
      contexts in the list is used to generate matches. Typically, the last
      <i>string</i> is <b>-default-</b> to cause the function for default
      completion to be used as a fallback.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The function sets the parameter <b>$service</b> to the
    <i>string</i> being tried, and sets the <i>context/command</i> field (the
    fourth) of the <b>$curcontext</b> parameter to the <i>context</i> given as
    the first argument.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_email_addresses</b> [ <b>-c</b> ] [ <b>-n</b> <i>plugin</i> ]</dt>
  <dd>Complete email addresses. Addresses are provided by plugins.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-c</b></dt>
  <dd>Complete bare <b>localhost@domain.tld</b> addresses, without a name part
      or a comment. Without this option, RFC822 `<i>Firstname Lastname</i>
      <b>&lt;</b><i>address</i><b>&gt;</b>' strings are completed.</dd>
  <dt><b>-n</b> <i>plugin</i></dt>
  <dd>Complete aliases from <i>plugin</i>.</dd>
</dl>
<p class="Pp">The following plugins are available by default: <b>_email-ldap</b>
    (see the <b>filter</b> style), <b>_email-local</b> (completes
    <i>user</i><b>@</b><i>hostname</i> Unix addresses), <b>_email-mail</b>
    (completes aliases from <b>~/.mailrc</b>), <b>_email-mush</b>,
    <b>_email-mutt</b>, and <b>_email-pine</b>.</p>
<p class="Pp">Addresses from the <b>_email-</b><i>foo</i> plugin are added under
    the tag `<b>email-</b><i>foo</i>'.</p>
<p class="Pp"><i>Writing plugins</i></p>
<p class="Pp">Plugins are written as separate functions with names starting with
    `<b>_email-</b>'. They are invoked with the <b>-c</b> option and
    <b>compadd</b> options. They should either do their own completion or set
    the <b>$reply</b> array to a list of `<i>alias</i><b>:</b><i>address</i>'
    elements and return <b>300</b>. New plugins will be picked up and run
    automatically.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_files</b></dt>
  <dd>The function <b>_files</b> is a wrapper around <b>_path_files</b>. It
      supports all of the same functionality, with some enhancements -- notably,
      it respects the <b>list-dirs-first</b> style, and it allows users to
      override the behaviour of the <b>-g</b> and <b>-/</b> options with the
      <b>file-patterns</b> style. <b>_files</b> should therefore be preferred
      over <b>_path_files</b> in most cases.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This function accepts the full set of options allowed by
    <b>_path_files</b>, described below.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_gnu_generic</b></dt>
  <dd>This function is a simple wrapper around the <b>_arguments</b> function
      described above. It can be used to determine automatically the long
      options understood by commands that produce a list when passed the option
      `<b>-</b><b>-help</b>'. It is intended to be used as a top-level
      completion function in its own right. For example, to enable option
      completion for the commands <b>foo</b> and <b>bar</b>, use</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>compdef _gnu_generic foo bar</b>
</pre>
</div>
<p class="Pp">after the call to <b>compinit</b>.</p>
<p class="Pp">The completion system as supplied is conservative in its use of
    this function, since it is important to be sure the command understands the
    option `<b>-</b><b>-help</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_guard</b> [ <i>options</i> ] <i>pattern descr</i></dt>
  <dd>This function displays <i>descr</i> if <i>pattern</i> matches the string
      to be completed. It is intended to be used in the <i>action</i> for the
      specifications passed to <b>_arguments</b> and similar functions.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The return status is zero if the message was displayed and the
    word to complete is not empty, and non-zero otherwise.</p>
<p class="Pp">The <i>pattern</i> may be preceded by any of the options
    understood by <b>compadd</b> that are passed down from <b>_description</b>,
    namely <b>-M</b>, <b>-J</b>, <b>-V</b>, <b>-1</b>, <b>-2</b>, <b>-n</b>,
    <b>-F</b> and <b>-X</b>. All of these options will be ignored. This fits in
    conveniently with the argument-passing conventions of actions for
    <b>_arguments</b>.</p>
<p class="Pp">As an example, consider a command taking the options <b>-n</b> and
    <b>-none</b>, where <b>-n</b> must be followed by a numeric value in the
    same word. By using:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_arguments '-n-: :_guard &quot;[0-9]#&quot; &quot;numeric value&quot;' '-none'</b>
</pre>
</div>
<p class="Pp"><b>_arguments</b> can be made to both display the message
    `<b>numeric</b> <b>value</b>' and complete options after
    `<b>-n&lt;TAB&gt;</b>'. If the `<b>-n</b>' is already followed by one or
    more digits (the pattern passed to <b>_guard</b>) only the message will be
    displayed; if the `<b>-n</b>' is followed by another character, only options
    are completed.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_message</b> [ <b>-r12</b> ] [ <b>-VJ</b> <i>group</i> ]
    <i>descr</i></dt>
  <dd></dd>
  <dt><b>_message -e</b> [ <i>tag</i> ] <i>descr</i></dt>
  <dd>The <i>descr</i> is used in the same way as the third argument to the
      <b>_description</b> function, except that the resulting string will always
      be shown whether or not matches were generated. This is useful for
      displaying a help message in places where no completions can be
    generated.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>format</b> style is examined with the <b>messages</b> tag
    to find a message; the usual tag, <b>descriptions</b>, is used only if the
    style is not set with the former.</p>
<p class="Pp">If the <b>-r</b> option is given, no style is used; the
    <i>descr</i> is taken literally as the string to display. This is most
    useful when the <i>descr</i> comes from a pre-processed argument list which
    already contains an expanded description. Note that this option does not
    disable the `<b>%</b>'-sequence parsing done by <b>compadd</b>.</p>
<p class="Pp">The <b>-12VJ</b> options and the <i>group</i> are passed to
    <b>compadd</b> and hence determine the group the message string is added
  to.</p>
<p class="Pp">The second <b>-e</b> form gives a description for completions with
    the tag <i>tag</i> to be shown even if there are no matches for that tag.
    This form is called by <b>_arguments</b> in the event that there is no
    action for an option specification. The tag can be omitted and if so the tag
    is taken from the parameter <b>$curtag</b>; this is maintained by the
    completion system and so is usually correct. Note that if there are no
    matches at the time this function is called, <b>compstate[insert]</b> is
    cleared, so additional matches generated later are not inserted on the
    command line.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_multi_parts</b> [ <b>-i</b> ] <i>sep</i> <i>array</i></dt>
  <dd>The argument <i>sep</i> is a separator character. The <i>array</i> may be
      either the name of an array parameter or a literal array in the form
      `<b>(foo bar</b><b>)</b>', a parenthesised list of words separated by
      whitespace. The possible completions are the strings from the array.
      However, each chunk delimited by <i>sep</i> will be completed separately.
      For example, the <b>_tar</b> function uses `<b>_multi_parts</b> <b>/</b>
      <i>patharray</i>' to complete partial file paths from the given array of
      complete file paths.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>-i</b> option causes <b>_multi_parts</b> to insert a unique
    match even if that requires multiple separators to be inserted. This is not
    usually the expected behaviour with filenames, but certain other types of
    completion, for example those with a fixed set of possibilities, may be more
    suited to this form.</p>
<p class="Pp">Like other utility functions, this function accepts the
    `<b>-V</b>', `<b>-J</b>', `<b>-1</b>', `<b>-2</b>', `<b>-n</b>',
    `<b>-f</b>', `<b>-X</b>', `<b>-M</b>', `<b>-P</b>', `<b>-S</b>',
    `<b>-r</b>', `<b>-R</b>', and `<b>-q</b>' options and passes them to the
    <b>compadd</b> builtin.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_next_label</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <i>tag</i> <i>name</i>
    <i>descr</i> [ <i>option</i> ... ]</dt>
  <dd>This function is used to implement the loop over different tag labels for
      a particular tag as described above for the <b>tag-order</b> style. On
      each call it checks to see if there are any more tag labels; if there is
      it returns status zero, otherwise non-zero. As this function requires a
      current tag to be set, it must always follow a call to <b>_tags</b> or
      <b>_requested</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <b>-x12VJ</b> options and the first three arguments are passed
    to the <b>_description</b> function. Where appropriate the <i>tag</i> will
    be replaced by a tag label in this call. Any description given in the
    <b>tag-order</b> style is preferred to the <i>descr</i> passed to
    <b>_next_label</b>.</p>
<p class="Pp">The <i>option</i>s given after the <i>descr</i> are set in the
    parameter given by <i>name</i>, and hence are to be passed to <b>compadd</b>
    or whatever function is called to add the matches.</p>
<p class="Pp">Here is a typical use of this function for the tag <b>foo</b>. The
    call to <b>_requested</b> determines if tag <b>foo</b> is required at all;
    the loop over <b>_next_label</b> handles any labels defined for the tag in
    the <b>tag-order</b> style.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local expl ret=1</b>
<b>...</b>
<b>if _requested foo; then</b>
<b>  ...</b>
<b>  while _next_label foo expl '...'; do</b>
<b>    compadd &quot;$expl[@]&quot; ... &amp;&amp; ret=0</b>
<b>  done</b>
<b>  ...</b>
<b>fi</b>
<b>return ret</b>
</pre>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>_normal</b> [ <b>-P</b> | <b>-p</b> <i>precommand</i> ]</dt>
  <dd>This is the standard function called to handle completion outside any
      special <b>-</b><i>context</i><b>-</b>. It is called both to complete the
      command word and also the arguments for a command. In the second case,
      <b>_normal</b> looks for a special completion for that command, and if
      there is none it uses the completion for the <b>-default-</b>
    context.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">A second use is to reexamine the command line specified by the
    <b>$words</b> array and the <b>$CURRENT</b> parameter after those have been
    modified. For example, the function <b>_precommand</b>, which completes
    after precommand specifiers such as <b>nohup</b>, removes the first word
    from the <b>words</b> array, decrements the <b>CURRENT</b> parameter, then
    calls `<b>_normal -p $service</b>'. The effect is that `<b>nohup</b> <i>cmd
    ...</i>' is treated in the same way as `<i>cmd ...</i>'.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-P</b></dt>
  <dd>Reset the list of precommands. This option should be used if completing a
      command line which allows internal commands (e.g. builtins and functions)
      regardless of prior precommands (e.g. `<b>zsh -c</b>').</dd>
  <dt><b>-p</b> <i>precommand</i></dt>
  <dd>Append <i>precommand</i> to the list of precommands. This option should be
      used in nearly all cases in which <b>-P</b> is not applicable.</dd>
</dl>
<p class="Pp">If the command name matches one of the patterns given by one of
    the options <b>-p</b> or <b>-P</b> to <b>compdef</b>, the corresponding
    completion function is called and then the parameter <b>_compskip</b> is
    checked. If it is set completion is terminated at that point even if no
    matches have been found. This is the same effect as in the <b>-first-</b>
    context.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_options</b></dt>
  <dd>This can be used to complete the names of shell options. It provides a
      matcher specification that ignores a leading `<b>no</b>', ignores
      underscores and allows upper-case letters to match their lower-case
      counterparts (for example, `<b>glob</b>', `<b>noglob</b>',
      `<b>NO_GLOB</b>' are all completed). Any arguments are propagated to the
      <b>compadd</b> builtin.</dd>
  <dt><b>_options_set</b> and <b>_options_unset</b></dt>
  <dd>These functions complete only set or unset options, with the same matching
      specification used in the <b>_options</b> function.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that you need to uncomment a few lines in the
    <b>_main_complete</b> function for these functions to work properly. The
    lines in question are used to store the option settings in effect before the
    completion widget locally sets the options it needs. Hence these functions
    are not generally used by the completion system.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_parameters</b></dt>
  <dd>This is used to complete the names of shell parameters.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The option `<b>-g</b> <i>pattern</i>' limits the completion to
    parameters whose type matches the <i>pattern</i>. The type of a parameter is
    that shown by `<b>print ${(t)</b><i>param</i><b>}</b>', hence judicious use
    of `<b>*</b>' in <i>pattern</i> is probably necessary.</p>
<p class="Pp">All other arguments are passed to the <b>compadd</b> builtin.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_path_files</b></dt>
  <dd>This function is used throughout the completion system to complete
      filenames. It allows completion of partial paths. For example, the string
      `<b>/u/i/s/sig</b>' may be completed to
      `<b>/usr/include/sys/signal.h</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The options accepted by both <b>_path_files</b> and <b>_files</b>
    are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-f</b></dt>
  <dd>Complete all filenames. This is the default.</dd>
  <dt><b>-/</b></dt>
  <dd>Specifies that only directories should be completed.</dd>
  <dt><b>-g</b> <i>pattern</i></dt>
  <dd>Specifies that only files matching the <i>pattern</i> should be
    completed.</dd>
  <dt><b>-W</b> <i>paths</i></dt>
  <dd>Specifies path prefixes that are to be prepended to the string from the
      command line to generate the filenames but that should not be inserted as
      completions nor shown in completion listings. Here, <i>paths</i> may be
      the name of an array parameter, a literal list of paths enclosed in
      parentheses or an absolute pathname.</dd>
  <dt><b>-F</b> <i>ignored-files</i></dt>
  <dd>This behaves as for the corresponding option to the <b>compadd</b>
      builtin. It gives direct control over which filenames should be ignored.
      If the option is not present, the <b>ignored-patterns</b> style is
    used.</dd>
</dl>
<p class="Pp">Both <b>_path_files</b> and <b>_files</b> also accept the
    following options which are passed to <b>compadd</b>: `<b>-J</b>',
    `<b>-V</b>', `<b>-1</b>', `<b>-2</b>', `<b>-n</b>', `<b>-X</b>',
    `<b>-M</b>', `<b>-P</b>', `<b>-S</b>', `<b>-q</b>', `<b>-r</b>', and
    `<b>-R</b>'.</p>
<p class="Pp">Finally, the <b>_path_files</b> function uses the styles
    <b>expand</b>, <b>ambiguous</b>, <b>special-dirs</b>, <b>list-suffixes</b>
    and <b>file-sort</b> described above.</p>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_pick_variant </b>[ <b>-b</b> <i>builtin-label</i> ] [ <b>-c</b>
    <i>command</i> ] [ <b>-r</b> <i>name</i> ]</dt>
  <dd></dd>
  <dt><b> </b><i>label</i><b>=</b><i>pattern</i> ... <i>label</i> [ <i>arg</i>
    ... ]</dt>
  <dd>This function is used to resolve situations where a single command name
      requires more than one type of handling, either because it has more than
      one variant or because there is a name clash between two different
      commands.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The command to run is taken from the first element of the array
    <b>words</b> unless this is overridden by the option <b>-c</b>. This command
    is run and its output is compared with a series of patterns. Arguments to be
    passed to the command can be specified at the end after all the other
    arguments. The patterns to try in order are given by the arguments
    <i>label</i><b>=</b><i>pattern</i>; if the output of `<i>command</i>
    <i>arg</i> ...' contains <i>pattern</i>, then <i>label</i> is selected as
    the label for the command variant. If none of the patterns match, the final
    command label is selected and status 1 is returned.</p>
<p class="Pp">If the `<b>-b</b> <i>builtin-label</i>' is given, the command is
    tested to see if it is provided as a shell builtin, possibly autoloaded; if
    so, the label <i>builtin-label</i> is selected as the label for the
  variant.</p>
<p class="Pp">If the `<b>-r</b> <i>name</i>' is given, the <i>label</i> picked
    is stored in the parameter named <i>name</i>.</p>
<p class="Pp">The results are also cached in the <b>_cmd_variant</b> associative
    array indexed by the name of the command run.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_regex_arguments</b> <i>name</i> <i>spec</i> ...</dt>
  <dd>This function generates a completion function <i>name</i> which matches
      the specifications <i>spec</i>s, a set of regular expressions as described
      below. After running <b>_regex_arguments</b>, the function <i>name</i>
      should be called as a normal completion function. The pattern to be
      matched is given by the contents of the <b>words</b> array up to the
      current cursor position joined together with null characters; no quotation
      is applied.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The arguments are grouped as sets of alternatives separated by
    `<b>|</b>', which are tried one after the other until one matches. Each
    alternative consists of a one or more specifications which are tried left to
    right, with each pattern matched being stripped in turn from the command
    line being tested, until all of the group succeeds or until one fails; in
    the latter case, the next alternative is tried. This structure can be
    repeated to arbitrary depth by using parentheses; matching proceeds from
    inside to outside.</p>
<p class="Pp">A special procedure is applied if no test succeeds but the
    remaining command line string contains no null character (implying the
    remaining word is the one for which completions are to be generated). The
    completion target is restricted to the remaining word and any <i>action</i>s
    for the corresponding patterns are executed. In this case, nothing is
    stripped from the command line string. The order of evaluation of the
    <i>action</i>s can be determined by the <b>tag-order</b> style; the various
    formats supported by <b>_alternative</b> can be used in <i>action</i>. The
    <i>descr</i> is used for setting up the array parameter <b>expl</b>.</p>
<p class="Pp">Specification arguments take one of following forms, in which
    metacharacters such as `<b>(</b>', `<b>)</b>', `<b>#</b>' and `<b>|</b>'
    should be quoted.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>/</b><i>pattern</i><b>/</b> [<b>%</b><i>lookahead</i><b>%</b>]
    [<b>-</b><i>guard</i>]
    [<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</dt>
  <dd>This is a single primitive component. The function tests whether the
      combined pattern
      `<b>(#b)((#B)</b><i>pattern</i><b>)</b><i>lookahead</i><b>*</b>' matches
      the command line string. If so, `<i>guard</i>' is evaluated and its return
      status is examined to determine if the test has succeeded. The
      <i>pattern</i> string `<b>[]</b>' is guaranteed never to match. The
      <i>lookahead</i> is not stripped from the command line before the next
      pattern is examined.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The argument starting with <b>:</b> is used in the same manner as
    an argument to <b>_alternative</b>.</p>
<p class="Pp">A component is used as follows: <i>pattern</i> is tested to see if
    the component already exists on the command line. If it does, any following
    specifications are examined to find something to complete. If a component is
    reached but no such pattern exists yet on the command line, the string
    containing the <i>action</i> is used to generate matches to insert at that
    point.</p>
</div>
<dl class="Bl-tag">
  <dt><b>/</b><i>pattern</i><b>/+</b> [<b>%</b><i>lookahead</i><b>%</b>]
    [<b>-</b><i>guard</i>]
    [<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</dt>
  <dd>This is similar to `<b>/</b><i>pattern</i><b>/</b> ...' but the left part
      of the command line string (i.e. the part already matched by previous
      patterns) is also considered part of the completion target.</dd>
  <dt><b>/</b><i>pattern</i><b>/-</b> [<b>%</b><i>lookahead</i><b>%</b>]
    [<b>-</b><i>guard</i>]
    [<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</dt>
  <dd>This is similar to `<b>/</b><i>pattern</i><b>/</b> ...' but the
      <i>action</i>s of the current and previously matched patterns are ignored
      even if the following `<i>pattern</i>' matches the empty string.</dd>
  <dt><b>(</b> <i>spec</i> <b>)</b></dt>
  <dd>Parentheses may be used to groups <i>spec</i>s; note each parenthesis is a
      single argument to <b>_regex_arguments</b>.</dd>
  <dt><i>spec</i> <b>#</b></dt>
  <dd>This allows any number of repetitions of <i>spec</i>.</dd>
  <dt><i>spec</i> <i>spec</i></dt>
  <dd>The two <i>spec</i>s are to be matched one after the other as described
      above.</dd>
  <dt><i>spec</i> <b>|</b> <i>spec</i></dt>
  <dd>Either of the two <i>spec</i>s can be matched.</dd>
</dl>
<p class="Pp">The function <b>_regex_words</b> can be used as a helper function
    to generate matches for a set of alternative words possibly with their own
    arguments as a command line argument.</p>
<p class="Pp">Examples:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_regex_arguments _tst /$'[^\0]#\0'/ \ </b>
<b>    /$'[^\0]#\0'/ :'compadd aaa'</b>
</pre>
</div>
<p class="Pp">This generates a function <b>_tst</b> that completes <b>aaa</b> as
    its only argument. The <i>tag</i> and <i>description</i> for the action have
    been omitted for brevity (this works but is not recommended in normal use).
    The first component matches the command word, which is arbitrary; the second
    matches any argument. As the argument is also arbitrary, any following
    component would not depend on <b>aaa</b> being present.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_regex_arguments _tst /$'[^\0]#\0'/ \ </b>
<b>    /$'aaa\0'/ :'compadd aaa'</b>
</pre>
</div>
<p class="Pp">This is a more typical use; it is similar, but any following
    patterns would only match if <b>aaa</b> was present as the first
  argument.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_regex_arguments _tst /$'[^\0]#\0'/ \( \ </b>
<b>    /$'aaa\0'/ :'compadd aaa' \ </b>
<b>    /$'bbb\0'/ :'compadd bbb' \) \#</b>
</pre>
</div>
<p class="Pp">In this example, an indefinite number of command arguments may be
    completed. Odd arguments are completed as <b>aaa</b> and even arguments as
    <b>bbb</b>. Completion fails unless the set of <b>aaa</b> and <b>bbb</b>
    arguments before the current one is matched correctly.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_regex_arguments _tst /$'[^\0]#\0'/ \ </b>
<b>    \( /$'aaa\0'/ :'compadd aaa' \| \ </b>
<b>    /$'bbb\0'/ :'compadd bbb' \) \#</b>
</pre>
</div>
<p class="Pp">This is similar, but either <b>aaa</b> or <b>bbb</b> may be
    completed for any argument. In this case <b>_regex_words</b> could be used
    to generate a suitable expression for the arguments.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_regex_words</b> <i>tag</i> <i>description</i> <i>spec</i> ...</dt>
  <dd>This function can be used to generate arguments for the
      <b>_regex_arguments</b> command which may be inserted at any point where a
      set of rules is expected. The <i>tag</i> and <i>description</i> give a
      standard tag and description pertaining to the current context. Each
      <i>spec</i> contains two or three arguments separated by a colon: note
      that there is no leading colon in this case.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Each <i>spec</i> gives one of a set of words that may be completed
    at this point, together with arguments. It is thus roughly equivalent to the
    <b>_arguments</b> function when used in normal (non-regex) completion.</p>
<p class="Pp">The part of the <i>spec</i> before the first colon is the word to
    be completed. This may contain a <b>*</b>; the entire word, before and after
    the <b>*</b> is completed, but only the text before the <b>*</b> is required
    for the context to be matched, so that further arguments may be completed
    after the abbreviated form.</p>
<p class="Pp">The second part of <i>spec</i> is a description for the word being
    completed.</p>
<p class="Pp">The optional third part of the <i>spec</i> describes how words
    following the one being completed are themselves to be completed. It will be
    evaluated in order to avoid problems with quoting. This means that typically
    it contains a reference to an array containing previously generated regex
    arguments.</p>
<p class="Pp">The option <b>-t</b> <i>term</i> specifies a terminator for the
    word instead of the usual space. This is handled as an auto-removable suffix
    in the manner of the option <b>-s</b> <i>sep</i> to <b>_values</b>.</p>
<p class="Pp">The result of the processing by <b>_regex_words</b> is placed in
    the array <b>reply</b>, which should be made local to the calling function.
    If the set of words and arguments may be matched repeatedly, a <b>#</b>
    should be appended to the generated array at that point.</p>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local -a reply</b>
<b>_regex_words mydb-commands 'mydb commands' \ </b>
<b>  'add:add an entry to mydb:$mydb_add_cmds' \ </b>
<b>  'show:show entries in mydb'</b>
<b>_regex_arguments _mydb &quot;$reply[@]&quot;</b>
<b>_mydb &quot;$@&quot;</b>
</pre>
</div>
<p class="Pp">This shows a completion function for a command <b>mydb</b> which
    takes two command arguments, <b>add</b> and <b>show</b>. <b>show</b> takes
    no arguments, while the arguments for <b>add</b> have already been prepared
    in an array <b>mydb_add_cmds</b>, quite possibly by a previous call to
    <b>_regex_words</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_requested</b> [ <b>-x</b> ] [ <b>-12VJ</b> ] <i>tag</i> [ <i>name</i>
    <i>descr</i> [ <i>command</i> [ <i>arg</i> ... ] ]</dt>
  <dd>This function is called to decide whether a tag already registered by a
      call to <b>_tags</b> (see below) has been requested by the user and hence
      completion should be performed for it. It returns status zero if the tag
      is requested and non-zero otherwise. The function is typically used as
      part of a loop over different tags as follows:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_tags foo bar baz</b>
<b>while _tags; do</b>
<b>  if _requested foo; then</b>
<b>    ... # perform completion for foo</b>
<b>  fi</b>
<b>  ... # test the tags bar and baz in the same way</b>
<b>  ... # exit loop if matches were generated</b>
<b>done</b>
</pre>
</div>
<p class="Pp">Note that the test for whether matches were generated is not
    performed until the end of the <b>_tags</b> loop. This is so that the user
    can set the <b>tag-order</b> style to specify a set of tags to be completed
    at the same time.</p>
<p class="Pp">If <i>name</i> and <i>descr</i> are given, <b>_requested</b> calls
    the <b>_description</b> function with these arguments together with the
    options passed to <b>_requested</b>.</p>
<p class="Pp">If <i>command</i> is given, the <b>_all_labels</b> function will
    be called immediately with the same arguments. In simple cases this makes it
    possible to perform the test for the tag and the matching in one go. For
    example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local expl ret=1</b>
<b>_tags foo bar baz</b>
<b>while _tags; do</b>
<b>  _requested foo expl 'description' \ </b>
<b>      compadd foobar foobaz &amp;&amp; ret=0</b>
<b>  ...</b>
<b>  (( ret )) || break</b>
<b>done</b>
</pre>
</div>
<p class="Pp">If the <i>command</i> is not <b>compadd</b>, it must nevertheless
    be prepared to handle the same options.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_retrieve_cache</b> <i>cache_identifier</i></dt>
  <dd>This function retrieves completion information from the file given by
      <i>cache_identifier</i>, stored in a directory specified by the
      <b>cache-path</b> style which defaults to <b>~/.zcompcache</b>. The return
      status is zero if retrieval was successful. It will only attempt retrieval
      if the <b>use-cache</b> style is set, so you can call this function
      without worrying about whether the user wanted to use the caching
    layer.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">See <b>_store_cache</b> below for more details.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_sep_parts</b></dt>
  <dd>This function is passed alternating arrays and separators as arguments.
      The arrays specify completions for parts of strings to be separated by the
      separators. The arrays may be the names of array parameters or a quoted
      list of words in parentheses. For example, with the array `<b>hosts=(ftp
      news)</b>' the call `<b>_sep_parts '(foo bar)' @ hosts</b>' will complete
      the string `<b>f</b>' to `<b>foo</b>' and the string `<b>b@n</b>' to
      `<b>bar@news</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This function accepts the <b>compadd</b> options `<b>-V</b>',
    `<b>-J</b>', `<b>-1</b>', `<b>-2</b>', `<b>-n</b>', `<b>-X</b>',
    `<b>-M</b>', `<b>-P</b>', `<b>-S</b>', `<b>-r</b>', `<b>-R</b>', and
    `<b>-q</b>' and passes them on to the <b>compadd</b> builtin used to add the
    matches.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_sequence</b> [ <b>-s</b> <i>sep</i> ] [ <b>-n</b> <i>max</i> ] [
    <b>-d</b> ] <i>function</i> [ <b>-</b> ] ...</dt>
  <dd>This function is a wrapper to other functions for completing items in a
      separated list. The same function is used to complete each item in the
      list. The separator is specified with the <b>-s</b> option. If <b>-s</b>
      is omitted it will use `<b>,</b>'. Duplicate values are not matched unless
      <b>-d</b> is specified. If there is a fixed or maximum number of items in
      the list, this can be specified with the <b>-n</b> option.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Common <b>compadd</b> options are passed on to the function. It is
    possible to use <b>compadd</b> directly with <b>_sequence</b>, though
    <b>_values</b> may be more appropriate in this situation.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_setup</b> <i>tag</i> [ <i>group</i> ]</dt>
  <dd>This function sets up the special parameters used by the completion system
      appropriately for the <i>tag</i> given as the first argument. It uses the
      styles <b>list-colors</b>, <b>list-packed</b>, <b>list-rows-first</b>,
      <b>last-prompt</b>, <b>accept-exact</b>, <b>menu</b> and
      <b>force-list</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The optional <i>group</i> supplies the name of the group in which
    the matches will be placed. If it is not given, the <i>tag</i> is used as
    the group name.</p>
<p class="Pp">This function is called automatically from <b>_description</b> and
    hence is not normally called explicitly.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_store_cache</b> <i>cache_identifier</i> <i>param</i> ...</dt>
  <dd>This function, together with <b>_retrieve_cache</b> and
      <b>_cache_invalid</b>, implements a caching layer which can be used in any
      completion function. Data obtained by costly operations are stored in
      parameters; this function then dumps the values of those parameters to a
      file. The data can then be retrieved quickly from that file via
      <b>_retrieve_cache</b>, even in different instances of the shell.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <i>cache_identifier</i> specifies the file which the data
    should be dumped to. The file is stored in a directory specified by the
    <b>cache-path</b> style which defaults to <b>~/.zcompcache</b>. The
    remaining <i>param</i>s arguments are the parameters to dump to the
  file.</p>
<p class="Pp">The return status is zero if storage was successful. The function
    will only attempt storage if the <b>use-cache</b> style is set, so you can
    call this function without worrying about whether the user wanted to use the
    caching layer.</p>
<p class="Pp">The completion function may avoid calling <b>_retrieve_cache</b>
    when it already has the completion data available as parameters. However, in
    that case it should call <b>_cache_invalid</b> to check whether the data in
    the parameters and in the cache are still valid.</p>
<p class="Pp">See the _perl_modules completion function for a simple example of
    the usage of the caching layer.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_tags</b> [ [ <b>-C</b> <i>name</i> ] <i>tag</i> ... ]</dt>
  <dd>If called with arguments, these are taken to be the names of tags valid
      for completions in the current context. These tags are stored internally
      and sorted by using the <b>tag-order</b> style.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Next, <b>_tags</b> is called repeatedly without arguments from the
    same completion function. This successively selects the first, second, etc.
    set of tags requested by the user. The return status is zero if at least one
    of the tags is requested and non-zero otherwise. To test if a particular tag
    is to be tried, the <b>_requested</b> function should be called (see
  above).</p>
<p class="Pp">If `<b>-C</b> <i>name</i>' is given, <i>name</i> is temporarily
    stored in the <i>argument</i> field (the fifth) of the context in the
    <b>curcontext</b> parameter during the call to <b>_tags</b>; the field is
    restored on exit. This allows <b>_tags</b> to use a more specific context
    without having to change and reset the <b>curcontext</b> parameter (which
    has the same effect).</p>
</div>
<dl class="Bl-tag">
  <dt><b>_tilde_files</b></dt>
  <dd>Like <b>_files</b>, but resolve leading tildes according to the rules of
      filename expansion, so the suggested completions don't start with a
      `<b>~</b>' even if the filename on the command-line does.</dd>
  <dt><b>_values</b> [ <b>-O</b> <i>name</i> ] [ <b>-s</b> <i>sep</i> ] [
    <b>-S</b> <i>sep</i> ] [ <b>-wC</b> ] <i>desc</i> <i>spec</i> ...</dt>
  <dd>This is used to complete arbitrary keywords (values) and their arguments,
      or lists of such combinations.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the first argument is the option `<b>-O</b> <i>name</i>', it
    will be used in the same way as by the <b>_arguments</b> function. In other
    words, the elements of the <i>name</i> array will be passed to
    <b>compadd</b> when executing an action.</p>
<p class="Pp">If the first argument (or the first argument after `<b>-O</b>
    <i>name</i>') is `<b>-s</b>', the next argument is used as the character
    that separates multiple values. This character is automatically added after
    each value in an auto-removable fashion (see below); all values completed by
    `<b>_values -s</b>' appear in the same word on the command line, unlike
    completion using <b>_arguments</b>. If this option is not present, only a
    single value will be completed per word.</p>
<p class="Pp">Normally, <b>_values</b> will only use the current word to
    determine which values are already present on the command line and hence are
    not to be completed again. If the <b>-w</b> option is given, other arguments
    are examined as well.</p>
<p class="Pp">The first non-option argument, <i>desc</i>, is used as a string to
    print as a description before listing the values.</p>
<p class="Pp">All other arguments describe the possible values and their
    arguments in the same format used for the description of options by the
    <b>_arguments</b> function (see above). The only differences are that no
    minus or plus sign is required at the beginning, values can have only one
    argument, and the forms of action beginning with an equal sign are not
    supported.</p>
<p class="Pp">The character separating a value from its argument can be set
    using the option <b>-S</b> (like <b>-s</b>, followed by the character to use
    as the separator in the next argument). By default the equals sign will be
    used as the separator between values and arguments.</p>
<p class="Pp">Example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>_values -s , 'description' \ </b>
<b>        '*foo[bar]' \ </b>
<b>        '(two)*one[number]:first count:' \ </b>
<b>        'two[another number]::second count:(1 2 3)'</b>
</pre>
</div>
<p class="Pp">This describes three possible values: `<b>foo</b>', `<b>one</b>',
    and `<b>two</b>'. The first is described as `<b>bar</b>', takes no argument
    and may appear more than once. The second is described as `<b>number</b>',
    may appear more than once, and takes one mandatory argument described as
    `<b>first count</b>'; no action is specified, so it will not be completed.
    The `<b>(two)</b>' at the beginning says that if the value `<b>one</b>' is
    on the line, the value `<b>two</b>' will no longer be considered a possible
    completion. Finally, the last value (`<b>two</b>') is described as
    `<b>another number</b>' and takes an optional argument described as
    `<b>second count</b>' for which the completions (to appear after an
    `<b>=</b>') are `<b>1</b>', `<b>2</b>', and `<b>3</b>'. The <b>_values</b>
    function will complete lists of these values separated by commas.</p>
<p class="Pp">Like <b>_arguments</b>, this function temporarily adds another
    context name component to the arguments element (the fifth) of the current
    context while executing the <i>action</i>. Here this name is just the name
    of the value for which the argument is completed.</p>
<p class="Pp">The style <b>verbose</b> is used to decide if the descriptions for
    the values (but not those for the arguments) should be printed.</p>
<p class="Pp">The associative array <b>val_args</b> is used to report values and
    their arguments; this works similarly to the <b>opt_args</b> associative
    array used by <b>_arguments</b>. Hence the function calling <b>_values</b>
    should declare the local parameters <b>state</b>, <b>state_descr</b>,
    <b>line</b>, <b>context</b> and <b>val_args</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local context state state_descr line</b>
<b>typeset -A val_args</b>
</pre>
</div>
<p class="Pp">when using an action of the form `<b>-&gt;</b><i>string</i>'. With
    this function the <b>context</b> parameter will be set to the name of the
    value whose argument is to be completed. Note that for <b>_values</b>, the
    <b>state</b> and <b>state_descr</b> are scalars rather than arrays. Only a
    single matching state is returned.</p>
<p class="Pp">Note also that <b>_values</b> normally adds the character used as
    the separator between values as an auto-removable suffix (similar to a
    `<b>/</b>' after a directory). However, this is not possible for a
    `<b>-&gt;</b><i>string</i>' action as the matches for the argument are
    generated by the calling function. To get the usual behaviour, the calling
    function can add the separator <i>x</i> as a suffix by passing the options
    `<b>-qS</b> <i>x</i>' either directly or indirectly to <b>compadd</b>.</p>
<p class="Pp">The option <b>-C</b> is treated in the same way as it is by
    <b>_arguments</b>. In that case the parameter <b>curcontext</b> should be
    made local instead of <b>context</b> (as described above).</p>
</div>
<dl class="Bl-tag">
  <dt><b>_wanted</b> [ <b>-x</b> ] [ <b>-C</b> <i>name</i> ] [ <b>-12VJ</b> ]
    <i>tag</i> <i>name</i> <i>descr</i> <i>command</i> [ <i>arg</i> ...]</dt>
  <dd>In many contexts, completion can only generate one particular set of
      matches, usually corresponding to a single tag. However, it is still
      necessary to decide whether the user requires matches of this type. This
      function is useful in such a case.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The arguments to <b>_wanted</b> are the same as those to
    <b>_requested</b>, i.e. arguments to be passed to <b>_description</b>.
    However, in this case the <i>command</i> is not optional; all the processing
    of tags, including the loop over both tags and tag labels and the generation
    of matches, is carried out automatically by <b>_wanted</b>.</p>
<p class="Pp">Hence to offer only one tag and immediately add the corresponding
    matches with the given description:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<b>local expl</b>
<b>_wanted tag expl 'description' \ </b>
<b>    compadd matches...</b>
</pre>
</div>
<p class="Pp">Note that, as for <b>_requested</b>, the <i>command</i> must be
    able to accept options to be passed down to <b>compadd</b>.</p>
<p class="Pp">Like <b>_tags</b> this function supports the <b>-C</b> option to
    give a different name for the argument context field. The <b>-x</b> option
    has the same meaning as for <b>_description</b>.</p>
</div>
<dl class="Bl-tag">
  <dt><b>_widgets</b> [ <b>-g</b> <i>pattern</i> ]</dt>
  <dd>This function completes names of zle widgets (see the section `Widgets' in
      <i>zshzle</i>(1)). The <i>pattern</i>, if present, is matched against
      values of the <b>$widgets</b> special parameter, documented in the section
      `The zsh/zleparameter Module' in <i>zshmodules</i>(1).</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_SYSTEM_VARIABLES"><a class="permalink" href="#COMPLETION_SYSTEM_VARIABLES">COMPLETION
  SYSTEM VARIABLES</a></h1>
There are some standard variables, initialised by the <b>_main_complete</b>
  function and then used from other functions.
<p class="Pp">The standard variables are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>_comp_caller_options</b></dt>
  <dd>The completion system uses <b>setopt</b> to set a number of options. This
      allows functions to be written without concern for compatibility with
      every possible combination of user options. However, sometimes completion
      needs to know what the user's option preferences are. These are saved in
      the <b>_comp_caller_options</b> associative array. Option names, spelled
      in lowercase without underscores, are mapped to one or other of the
      strings `<b>on</b>' and `<b>off</b>'.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>_comp_priv_prefix</b></dt>
  <dd>Completion functions such as <b>_sudo</b> can set the
      <b>_comp_priv_prefix</b> array to a command prefix that may then be used
      by <b>_call_program</b> to match the privileges when calling programs to
      generate matches.</dd>
</dl>
<p class="Pp">Two more features are offered by the <b>_main_complete</b>
    function. The arrays <b>compprefuncs</b> and <b>comppostfuncs</b> may
    contain names of functions that are to be called immediately before or after
    completion has been tried. A function will only be called once unless it
    explicitly reinserts itself into the array.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_DIRECTORIES"><a class="permalink" href="#COMPLETION_DIRECTORIES">COMPLETION
  DIRECTORIES</a></h1>
In the source distribution, the files are contained in various subdirectories of
  the <b>Completion</b> directory. They may have been installed in the same
  structure, or into one single function directory. The following is a
  description of the files found in the original directory structure. If you
  wish to alter an installed file, you will need to copy it to some directory
  which appears earlier in your <b>fpath</b> than the standard directory where
  it appears.
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>Base</b></dt>
  <dd>The core functions and special completion widgets automatically bound to
      keys. You will certainly need most of these, though will probably not need
      to alter them. Many of these are documented above.</dd>
  <dt><b>Zsh</b></dt>
  <dd>Functions for completing arguments of shell builtin commands and utility
      functions for this. Some of these are also used by functions from the
      <b>Unix</b> directory.</dd>
  <dt><b>Unix</b></dt>
  <dd>Functions for completing arguments of external commands and suites of
      commands. They may need modifying for your system, although in many cases
      some attempt is made to decide which version of a command is present. For
      example, completion for the <b>mount</b> command tries to determine the
      system it is running on, while completion for many other utilities try to
      decide whether the GNU version of the command is in use, and hence whether
      the <b>-</b><b>-help</b> option is supported.</dd>
  <dt><b>X</b>, <b>AIX</b>, <b>BSD</b>, ...</dt>
  <dd>Completion and utility function for commands available only on some
      systems. These are not arranged hierarchically, so, for example, both the
      <b>Linux</b> and <b>Debian</b> directories, as well as the <b>X</b>
      directory, may be useful on your system.</dd>
</dl>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 14, 2020</td>
    <td class="foot-os">zsh 5.8</td>
  </tr>
</table>
</body>
</html>
