<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1992 The Regents of the University of California.
   Copyright (c) 1994-1996 Sun Microsystems, Inc.
  
   See the file "license.terms" for information on usage and redistribution
   of this file, and for a DISCLAIMER OF ALL WARRANTIES.
  
   RCS: @(#) $Id$
  
   The -*- nroff -*- definitions below are for supplemental macros used
   in Tcl/Tk manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO ?manpage?
  	Start of list of standard options for a Tk widget. The manpage
  	argument defines where to look up the standard options; if
  	omitted, defaults to "options". The options follow on successive
  	lines, in three columns separated by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   .QW arg1 ?arg2?
  	Print arg1 in quotes, then arg2 normally (for trailing punctuation).
  
   .PQ arg1 ?arg2?
  	Print an open parenthesis, arg1 in quotes, then arg2 normally
  	(for trailing punctuation) and then a closing parenthesis.
  
   RCS: @(#) $Id: man.macros,v 1.9 2008/01/29 15:32:33 dkf Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>text(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">text(n)</td>
    <td class="head-vol">Tk Built-In Commands</td>
    <td class="head-rtitle">text(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">text, tk_textCopy, tk_textCut, tk_textPaste - Create and
    manipulate text widgets</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><b>text</b> <i>pathName </i>?<i>options</i>?
<b>tk_textCopy</b> <i>pathName</i>
<b>tk_textCut</b> <i>pathName</i>
<b>tk_textPaste</b> <i>pathName</i></pre>
</section>
<section class="Sh">
<h1 class="Sh" id="STANDARD_OPTIONS"><a class="permalink" href="#STANDARD_OPTIONS">STANDARD
  OPTIONS</a></h1>
<pre>
<b>-background	-highlightthickness	-relief</b>
<b>-borderwidth	-insertbackground	-selectbackground</b>
<b>-cursor	-insertborderwidth	-selectborderwidth</b>
<b>-exportselection	-insertofftime	-selectforeground</b>
<b>-font	-insertontime	-setgrid</b>
<b>-foreground	-insertwidth	-takefocus</b>
<b>-highlightbackground	-padx	-xscrollcommand</b>
<b>-highlightcolor	-pady	-yscrollcommand</b></pre>
<p class="Pp">See the <b>options</b> manual entry for details on the standard
    options.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="WIDGET-SPECIFIC_OPTIONS"><a class="permalink" href="#WIDGET-SPECIFIC_OPTIONS">WIDGET-SPECIFIC
  OPTIONS</a></h1>
<p class="Pp">[<span class="Op"><b>-autoseparators</b>
    <i>autoSeparators</i>]</span> Specifies a boolean that says whether
    separators are automatically inserted in the undo stack. Only meaningful
    when the <b>-undo</b> option is true. [<span class="Op"><b>-blockcursor</b>
    <i>blockCursor</i>]</span> Specifies a boolean that says whether the
    blinking insertion cursor should be drawn as a character-sized rectangular
    block. If false (the default) a thin vertical line is used for the insertion
    cursor. [<span class="Op"><b>-endline</b> <i>endLine</i>]</span> Specifies
    an integer line index representing the last line of the underlying textual
    data store that should be contained in the widget. This allows a text widget
    to reflect only a portion of a larger piece of text. Instead of an integer,
    the empty string can be provided to this configuration option, which will
    configure the widget to end at the very last line in the textual data store.
    [<span class="Op"><b>-height</b> <i>height</i>]</span> Specifies the desired
    height for the window, in units of characters in the font given by the
    <b>-font</b> option. Must be at least one.
    [<span class="Op"><b>-inactiveselectbackground</b>
    <i>inactiveSelectBackground</i>]</span> Specifies the colour to use for the
    selection (the <b>sel</b> tag) when the window does not have the input
    focus. If empty, <b>{}</b>, then no selection is shown when the window does
    not have the focus. [<span class="Op"><b>-maxundo</b> <i>maxUndo</i>]</span>
    Specifies the maximum number of compound undo actions on the undo stack. A
    zero or a negative value imply an unlimited undo stack.
    [<span class="Op"><b>-spacing1</b> <i>spacing1</i>]</span> Requests
    additional space above each text line in the widget, using any of the
    standard forms for screen distances. If a line wraps, this option only
    applies to the first line on the display. This option may be overridden with
    <b>-spacing1</b> options in tags. [<span class="Op"><b>-spacing2</b>
    <i>spacing2</i>]</span> For lines that wrap (so that they cover more than
    one line on the display) this option specifies additional space to provide
    between the display lines that represent a single line of text. The value
    may have any of the standard forms for screen distances. This option may be
    overridden with <b>-spacing2</b> options in tags.
    [<span class="Op"><b>-spacing3</b> <i>spacing3</i>]</span> Requests
    additional space below each text line in the widget, using any of the
    standard forms for screen distances. If a line wraps, this option only
    applies to the last line on the display. This option may be overridden with
    <b>-spacing3</b> options in tags. [<span class="Op"><b>-startline</b>
    <i>startLine</i>]</span> Specifies an integer line index representing the
    first line of the underlying textual data store that should be contained in
    the widget. This allows a text widget to reflect only a portion of a larger
    piece of text. Instead of an integer, the empty string can be provided to
    this configuration option, which will configure the widget to start at the
    very first line in the textual data store. [<span class="Op"><b>-state</b>
    <i>state</i>]</span> Specifies one of two states for the text: <b>normal</b>
    or <b>disabled</b>. If the text is disabled then characters may not be
    inserted or deleted and no insertion cursor will be displayed, even if the
    input focus is in the widget. [<span class="Op"><b>-tabs</b>
    <i>tabs</i>]</span> Specifies a set of tab stops for the window. The
    option's value consists of a list of screen distances giving the positions
    of the tab stops, each of which is a distance relative to the left edge of
    the widget (excluding borders, padding, etc). Each position may optionally
    be followed in the next list element by one of the keywords <b>left</b>,
    <b>right</b>, <b>center</b>, or <b>numeric</b>, which specifies how to
    justify text relative to the tab stop. <b>Left</b> is the default; it causes
    the text following the tab character to be positioned with its left edge at
    the tab position. <b>Right</b> means that the right edge of the text
    following the tab character is positioned at the tab position, and
    <b>center</b> means that the text is centered at the tab position.
    <b>Numeric</b> means that the decimal point in the text is positioned at the
    tab position; if there is no decimal point then the least significant digit
    of the number is positioned just to the left of the tab position; if there
    is no number in the text then the text is right-justified at the tab
    position. For example, &#x201C;<b>-tabs {2c left 4c 6c center}</b>&#x201D;
    creates three tab stops at two-centimeter intervals; the first two use left
    justification and the third uses center justification.</p>
<div class="Bd-indent">
<p class="Pp">If the list of tab stops does not have enough elements to cover
    all of the tabs in a text line, then Tk extrapolates new tab stops using the
    spacing and alignment from the last tab stop in the list. Tab distances must
    be strictly positive, and must always increase from one tab stop to the next
    (if not, an error is thrown). The value of the <b>tabs</b> option may be
    overridden by <b>-tabs</b> options in tags.</p>
<p class="Pp">If no <b>-tabs</b> option is specified, or if it is specified as
    an empty list, then Tk uses default tabs spaced every eight (average size)
    characters. To achieve a different standard spacing, for example every 4
    characters, simply configure the widget with &#x201C;<b>-tabs &quot;[expr {4
    * [font measure $font 0]}] left&quot; -tabstyle
  wordprocessor</b>&#x201D;.</p>
</div>
[<span class="Op"><b>-tabstyle</b> <i>tabStyle</i>]</span> Specifies how to
  interpret the relationship between tab stops on a line and tabs in the text of
  that line. The value must be <b>tabular</b> (the default) or
  <b>wordprocessor</b>. Note that tabs are interpreted as they are encountered
  in the text. If the tab style is <b>tabular</b> then the <i>n</i>'th tab
  character in the line's text will be associated with the <i>n</i>'th tab stop
  defined for that line. If the tab character's x coordinate falls to the right
  of the <i>n</i>'th tab stop, then a gap of a single space will be inserted as
  a fallback. If the tab style is <b>wordprocessor</b> then any tab character
  being laid out will use (and be defined by) the first tab stop to the right of
  the preceding characters already laid out on that line. The value of the
  <b>tabstyle</b> option may be overridden by <b>-tabstyle</b> options in tags.
  [<span class="Op"><b>-undo</b> <i>undo</i>]</span> Specifies a boolean that
  says whether the undo mechanism is active or not.
  [<span class="Op"><b>-width</b> <i>width</i>]</span> Specifies the desired
  width for the window in units of characters in the font given by the
  <b>-font</b> option. If the font does not have a uniform width then the width
  of the character &#x201C;0&#x201D; is used in translating from character units
  to screen units. [<span class="Op"><b>-wrap</b> <i>wrap</i>]</span> Specifies
  how to handle lines in the text that are too long to be displayed in a single
  line of the text's window. The value must be <b>none</b> or <b>char</b> or
  <b>word</b>. A wrap mode of <b>none</b> means that each line of text appears
  as exactly one line on the screen; extra characters that do not fit on the
  screen are not displayed. In the other modes each line of text will be broken
  up into several screen lines if necessary to keep all the characters visible.
  In <b>char</b> mode a screen line break may occur after any character; in
  <b>word</b> mode a line break will only be made at word boundaries.
<pre>
</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <b>text</b> command creates a new window (given by the
    <i>pathName</i> argument) and makes it into a text widget. Additional
    options, described above, may be specified on the command line or in the
    option database to configure aspects of the text such as its default
    background color and relief. The <b>text</b> command returns the path name
    of the new window.</p>
<p class="Pp">A text widget displays one or more lines of text and allows that
    text to be edited. Text widgets support four different kinds of annotations
    on the text, called tags, marks, embedded windows or embedded images. Tags
    allow different portions of the text to be displayed with different fonts
    and colors. In addition, Tcl commands can be associated with tags so that
    scripts are invoked when particular actions such as keystrokes and mouse
    button presses occur in particular ranges of the text. See <b>TAGS</b> below
    for more details.</p>
<p class="Pp">The second form of annotation consists of floating markers in the
    text called &#x201C;marks&#x201D;. Marks are used to keep track of various
    interesting positions in the text as it is edited. See <b>MARKS</b> below
    for more details.</p>
<p class="Pp">The third form of annotation allows arbitrary windows to be
    embedded in a text widget. See <b>EMBEDDED WINDOWS</b> below for more
    details.</p>
<p class="Pp">The fourth form of annotation allows Tk images to be embedded in a
    text widget. See <b>EMBEDDED IMAGES</b> below for more details.</p>
<p class="Pp">The text widget also has a built-in undo/redo mechanism. See
    <b>THE UNDO MECHANISM</b> below for more details.</p>
<p class="Pp">The text widget allows for the creation of peer widgets. These are
    other text widgets which share the same underlying data (text, marks, tags,
    images, etc). See <b>PEER WIDGETS</b> below for more details.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INDICES"><a class="permalink" href="#INDICES">INDICES</a></h1>
<p class="Pp">Many of the widget commands for texts take one or more indices as
    arguments. An index is a string used to indicate a particular place within a
    text, such as a place to insert characters or one endpoint of a range of
    characters to delete. Indices have the syntax</p>
<div class="Bd-indent">
<pre>
<i>base modifier modifier modifier ...</i></pre>
</div>
Where <i>base</i> gives a starting point and the <i>modifier</i>s adjust the
  index from the starting point (e.g. move forward or backward one character).
  Every index must contain a <i>base</i>, but the <i>modifier</i>s are optional.
  Most modifiers (as documented below) allow an optional submodifier. Valid
  submodifiers are <b>any</b> and <b>display</b>. If the submodifier is
  abbreviated, then it must be followed by whitespace, but otherwise there need
  be no space between the submodifier and the following <i>modifier</i>.
  Typically the <b>display</b> submodifier adjusts the meaning of the following
  <i>modifier</i> to make it refer to visual or non-elided units rather than
  logical units, but this is explained for each relevant case below. Lastly,
  where <i>count</i> is used as part of a modifier, it can be positive or
  negative, so &#x201C;<i>base</i> - -3 lines&#x201D; is perfectly valid (and
  equivalent to &#x201C;<i>base</i> +3lines&#x201D;).
<p class="Pp">The <i>base</i> for an index must have one of the following
  forms:</p>
<dl class="Bl-tag">
  <dt id="line"><a class="permalink" href="#line"><i>line</i><b>.</b><i>char</i></a></dt>
  <dd>Indicates <i>char</i>'th character on line <i>line</i>. Lines are numbered
      from 1 for consistency with other UNIX programs that use this numbering
      scheme. Within a line, characters are numbered from 0. If <i>char</i> is
      <b>end</b> then it refers to the newline character that ends the
    line.</dd>
  <dt><b>@</b><i>x</i><b>,</b><i>y</i></dt>
  <dd>Indicates the character that covers the pixel whose x and y coordinates
      within the text's window are <i>x</i> and <i>y</i>.</dd>
  <dt id="end"><a class="permalink" href="#end"><b>end</b></a></dt>
  <dd>Indicates the end of the text (the character just after the last
    newline).</dd>
  <dt id="mark"><a class="permalink" href="#mark"><i>mark</i></a></dt>
  <dd>Indicates the character just after the mark whose name is
    <i>mark</i>.</dd>
  <dt id="tag"><a class="permalink" href="#tag"><i>tag</i><b>.first</b></a></dt>
  <dd>Indicates the first character in the text that has been tagged with
      <i>tag</i>. This form generates an error if no characters are currently
      tagged with <i>tag</i>.</dd>
  <dt id="tag~2"><a class="permalink" href="#tag~2"><i>tag</i><b>.last</b></a></dt>
  <dd>Indicates the character just after the last one in the text that has been
      tagged with <i>tag</i>. This form generates an error if no characters are
      currently tagged with <i>tag</i>.</dd>
  <dt id="pathName"><a class="permalink" href="#pathName"><i>pathName</i></a></dt>
  <dd>Indicates the position of the embedded window whose name is
      <i>pathName</i>. This form generates an error if there is no embedded
      window by the given name.</dd>
  <dt id="imageName"><a class="permalink" href="#imageName"><i>imageName</i></a></dt>
  <dd>Indicates the position of the embedded image whose name is
      <i>imageName</i>. This form generates an error if there is no embedded
      image by the given name.</dd>
</dl>
<p class="Pp">If the <i>base</i> could match more than one of the above forms,
    such as a <i>mark</i> and <i>imageName</i> both having the same value, then
    the form earlier in the above list takes precedence. If modifiers follow the
    base index, each one of them must have one of the forms listed below.
    Keywords such as <b>chars</b> and <b>wordend</b> may be abbreviated as long
    as the abbreviation is unambiguous.</p>
<dl class="Bl-tag">
  <dt><b>+ </b><i>count</i> ?<i>submodifier</i>? <b>chars</b></dt>
  <dd>Adjust the index forward by <i>count</i> characters, moving to later lines
      in the text if necessary. If there are fewer than <i>count</i> characters
      in the text after the current index, then set the index to the last index
      in the text. Spaces on either side of <i>count</i> are optional. If the
      <b>display</b> submodifier is given, elided characters are skipped over
      without being counted. If <b>any</b> is given, then all characters are
      counted. For historical reasons, if neither modifier is given then the
      count actually takes place in units of index positions (see <b>indices</b>
      for details). This behaviour may be changed in a future major release, so
      if you need an index count, you are encouraged to use <b>indices</b>
      instead wherever possible.</dd>
  <dt id="count"><a class="permalink" href="#count"><b>- </b><i>count</i>
    ?<i>submodifier</i>? <b>chars</b></a></dt>
  <dd>Adjust the index backward by <i>count</i> characters, moving to earlier
      lines in the text if necessary. If there are fewer than <i>count</i>
      characters in the text before the current index, then set the index to the
      first index in the text (1.0). Spaces on either side of <i>count</i> are
      optional. If the <b>display</b> submodifier is given, elided characters
      are skipped over without being counted. If <b>any</b> is given, then all
      characters are counted. For historical reasons, if neither modifier is
      given then the count actually takes place in units of index positions (see
      <b>indices</b> for details). This behaviour may be changed in a future
      major release, so if you need an index count, you are encouraged to use
      <b>indices</b> instead wherever possible.</dd>
  <dt><b>+ </b><i>count</i> ?<i>submodifier</i>? <b>indices</b></dt>
  <dd>Adjust the index forward by <i>count</i> index positions, moving to later
      lines in the text if necessary. If there are fewer than <i>count</i> index
      positions in the text after the current index, then set the index to the
      last index position in the text. Spaces on either side of <i>count</i> are
      optional. Note that an index position is either a single character or a
      single embedded image or embedded window. If the <b>display</b>
      submodifier is given, elided indices are skipped over without being
      counted. If <b>any</b> is given, then all indices are counted; this is
      also the default behaviour if no modifier is given.</dd>
  <dt id="count~2"><a class="permalink" href="#count~2"><b>- </b><i>count</i>
    ?<i>submodifier</i>? <b>indices</b></a></dt>
  <dd>Adjust the index backward by <i>count</i> index positions, moving to
      earlier lines in the text if necessary. If there are fewer than
      <i>count</i> index positions in the text before the current index, then
      set the index to the first index position (1.0) in the text. Spaces on
      either side of <i>count</i> are optional. If the <b>display</b>
      submodifier is given, elided indices are skipped over without being
      counted. If <b>any</b> is given, then all indices are counted; this is
      also the default behaviour if no modifier is given.</dd>
  <dt><b>+ </b><i>count</i> ?<i>submodifier</i>? <b>lines</b></dt>
  <dd>Adjust the index forward by <i>count</i> lines, retaining the same
      character position within the line. If there are fewer than <i>count</i>
      lines after the line containing the current index, then set the index to
      refer to the same character position on the last line of the text. Then,
      if the line is not long enough to contain a character at the indicated
      character position, adjust the character position to refer to the last
      character of the line (the newline). Spaces on either side of <i>count</i>
      are optional. If the <b>display</b> submodifier is given, then each visual
      display line is counted separately. Otherwise, if <b>any</b> (or no
      modifier) is given, then each logical line (no matter how many times it is
      visually wrapped) counts just once. If the relevant lines are not wrapped,
      then these two methods of counting are equivalent.</dd>
  <dt id="count~3"><a class="permalink" href="#count~3"><b>- </b><i>count</i>
    ?<i>submodifier</i>? <b>lines</b></a></dt>
  <dd>Adjust the index backward by <i>count</i> logical lines, retaining the
      same character position within the line. If there are fewer than
      <i>count</i> lines before the line containing the current index, then set
      the index to refer to the same character position on the first line of the
      text. Then, if the line is not long enough to contain a character at the
      indicated character position, adjust the character position to refer to
      the last character of the line (the newline). Spaces on either side of
      <i>count</i> are optional. If the <b>display</b> submodifier is given,
      then each visual display line is counted separately. Otherwise, if
      <b>any</b> (or no modifier) is given, then each logical line (no matter
      how many times it is visually wrapped) counts just once. If the relevant
      lines are not wrapped, then these two methods of counting are
    equivalent.</dd>
  <dt>?<i>submodifier</i>? <b>linestart</b></dt>
  <dd>Adjust the index to refer to the first index on the line. If the
      <b>display</b> submodifier is given, this is the first index on the
      display line, otherwise on the logical line.</dd>
  <dt>?<i>submodifier</i>? <b>lineend</b></dt>
  <dd>Adjust the index to refer to the last index on the line (the newline). If
      the <b>display</b> submodifier is given, this is the last index on the
      display line, otherwise on the logical line.</dd>
  <dt>?<i>submodifier</i>? <b>wordstart</b></dt>
  <dd>Adjust the index to refer to the first character of the word containing
      the current index. A word consists of any number of adjacent characters
      that are letters, digits, or underscores, or a single character that is
      not one of these. If the <b>display</b> submodifier is given, this only
      examines non-elided characters, otherwise all characters (elided or not)
      are examined.</dd>
  <dt>?<i>submodifier</i>? <b>wordend</b></dt>
  <dd>Adjust the index to refer to the character just after the last one of the
      word containing the current index. If the current index refers to the last
      character of the text then it is not modified. If the <b>display</b>
      submodifier is given, this only examines non-elided characters, otherwise
      all characters (elided or not) are examined.</dd>
</dl>
<p class="Pp">If more than one modifier is present then they are applied in
    left-to-right order. For example, the index &#x201C;<b>end - 1
    chars</b>&#x201D; refers to the next-to-last character in the text and
    &#x201C;<b>insert wordstart - 1 c</b>&#x201D; refers to the character just
    before the first one in the word containing the insertion cursor. Modifiers
    are applied one by one in this left to right order, and after each step the
    resulting index is constrained to be a valid index in the text widget. So,
    for example, the index &#x201C;<b>1.0 -1c +1c</b>&#x201D; refers to the
    index &#x201C;<b>2.0</b>&#x201D;.</p>
<p class="Pp">Where modifiers result in index changes by display lines, display
    chars or display indices, and the <i>base</i> refers to an index inside an
    elided tag, that base index is considered to be equivalent to the first
    following non-elided index.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="TAGS"><a class="permalink" href="#TAGS">TAGS</a></h1>
<p class="Pp">The first form of annotation in text widgets is a tag. A tag is a
    textual string that is associated with some of the characters in a text.
    Tags may contain arbitrary characters, but it is probably best to avoid
    using the characters &#x201C; &#x201D; (space), <b>+</b>, or <b>-</b>: these
    characters have special meaning in indices, so tags containing them cannot
    be used as indices. There may be any number of tags associated with
    characters in a text. Each tag may refer to a single character, a range of
    characters, or several ranges of characters. An individual character may
    have any number of tags associated with it.</p>
<p class="Pp">A priority order is defined among tags, and this order is used in
    implementing some of the tag-related functions described below. When a tag
    is defined (by associating it with characters or setting its display options
    or binding commands to it), it is given a priority higher than any existing
    tag. The priority order of tags may be redefined using the
    &#x201C;<i>pathName </i><b>tag raise</b>&#x201D; and &#x201C;<i>pathName
    </i><b>tag lower</b>&#x201D; widget commands.</p>
<p class="Pp">Tags serve three purposes in text widgets. First, they control the
    way information is displayed on the screen. By default, characters are
    displayed as determined by the <b>-background</b>, <b>-font</b>, and
    <b>-foreground</b> options for the text widget. However, display options may
    be associated with individual tags using the &#x201C;<i>pathName </i><b>tag
    configure</b>&#x201D; widget command. If a character has been tagged, then
    the display options associated with the tag override the default display
    style. The following options are currently supported for tags:</p>
<dl class="Bl-tag">
  <dt id="background"><a class="permalink" href="#background"><b>-background
    </b><i>color</i></a></dt>
  <dd><i>Color</i> specifies the background color to use for characters
      associated with the tag. It may have any of the forms accepted by
      <b>Tk_GetColor</b>.</dd>
  <dt id="bgstipple"><a class="permalink" href="#bgstipple"><b>-bgstipple
    </b><i>bitmap</i></a></dt>
  <dd><i>Bitmap</i> specifies a bitmap that is used as a stipple pattern for the
      background. It may have any of the forms accepted by <b>Tk_GetBitmap</b>.
      If <i>bitmap</i> has not been specified, or if it is specified as an empty
      string, then a solid fill will be used for the background.</dd>
  <dt id="borderwidth"><a class="permalink" href="#borderwidth"><b>-borderwidth
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies the width of a 3-D border to draw around the
      background. It may have any of the forms accepted by <b>Tk_GetPixels</b>.
      This option is used in conjunction with the <b>-relief</b> option to give
      a 3-D appearance to the background for characters; it is ignored unless
      the <b>-background</b> option has been set for the tag.</dd>
  <dt id="elide"><a class="permalink" href="#elide"><b>-elide
    </b><i>boolean</i></a></dt>
  <dd><i>Elide</i> specifies whether the data should be elided. Elided data
      (characters, images, embedded windows, etc) is not displayed and takes no
      space on screen, but further on behaves just as normal data.</dd>
  <dt id="fgstipple"><a class="permalink" href="#fgstipple"><b>-fgstipple
    </b><i>bitmap</i></a></dt>
  <dd><i>Bitmap</i> specifies a bitmap that is used as a stipple pattern when
      drawing text and other foreground information such as underlines. It may
      have any of the forms accepted by <b>Tk_GetBitmap</b>. If <i>bitmap</i>
      has not been specified, or if it is specified as an empty string, then a
      solid fill will be used.</dd>
  <dt id="font"><a class="permalink" href="#font"><b>-font
    </b><i>fontName</i></a></dt>
  <dd><i>FontName</i> is the name of a font to use for drawing characters. It
      may have any of the forms accepted by <b>Tk_GetFont</b>.</dd>
  <dt id="foreground"><a class="permalink" href="#foreground"><b>-foreground
    </b><i>color</i></a></dt>
  <dd><i>Color</i> specifies the color to use when drawing text and other
      foreground information such as underlines. It may have any of the forms
      accepted by <b>Tk_GetColor</b>.</dd>
  <dt id="justify"><a class="permalink" href="#justify"><b>-justify
    </b><i>justify</i></a></dt>
  <dd>If the first non-elided character of a display line has a tag for which
      this option has been specified, then <i>justify</i> determines how to
      justify the line. It must be one of <b>left</b>, <b>right</b>, or
      <b>center</b>. If a line wraps, then the justification for each line on
      the display is determined by the first non-elided character of that
      display line.</dd>
  <dt id="lmargin1"><a class="permalink" href="#lmargin1"><b>-lmargin1
    </b><i>pixels</i></a></dt>
  <dd>If the first non-elided character of a text line has a tag for which this
      option has been specified, then <i>pixels</i> specifies how much the line
      should be indented from the left edge of the window. <i>Pixels</i> may
      have any of the standard forms for screen distances. If a line of text
      wraps, this option only applies to the first line on the display; the
      <b>-lmargin2</b> option controls the indentation for subsequent
    lines.</dd>
  <dt id="lmargin2"><a class="permalink" href="#lmargin2"><b>-lmargin2
    </b><i>pixels</i></a></dt>
  <dd>If the first non-elided character of a display line has a tag for which
      this option has been specified, and if the display line is not the first
      for its text line (i.e., the text line has wrapped), then <i>pixels</i>
      specifies how much the line should be indented from the left edge of the
      window. <i>Pixels</i> may have any of the standard forms for screen
      distances. This option is only used when wrapping is enabled, and it only
      applies to the second and later display lines for a text line.</dd>
  <dt id="offset"><a class="permalink" href="#offset"><b>-offset
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies an amount by which the text's baseline should be
      offset vertically from the baseline of the overall line, in pixels. For
      example, a positive offset can be used for superscripts and a negative
      offset can be used for subscripts. <i>Pixels</i> may have any of the
      standard forms for screen distances.</dd>
  <dt id="overstrike"><a class="permalink" href="#overstrike"><b>-overstrike
    </b><i>boolean</i></a></dt>
  <dd>Specifies whether or not to draw a horizontal rule through the middle of
      characters. <i>Boolean</i> may have any of the forms accepted by
      <b>Tcl_GetBoolean</b>.</dd>
  <dt id="relief"><a class="permalink" href="#relief"><b>-relief
    </b><i>relief</i></a></dt>
  <dd><i>Relief</i> specifies the 3-D relief to use for drawing backgrounds, in
      any of the forms accepted by <b>Tk_GetRelief</b>. This option is used in
      conjunction with the <b>-borderwidth</b> option to give a 3-D appearance
      to the background for characters; it is ignored unless the
      <b>-background</b> option has been set for the tag.</dd>
  <dt id="rmargin"><a class="permalink" href="#rmargin"><b>-rmargin
    </b><i>pixels</i></a></dt>
  <dd>If the first non-elided character of a display line has a tag for which
      this option has been specified, then <i>pixels</i> specifies how wide a
      margin to leave between the end of the line and the right edge of the
      window. <i>Pixels</i> may have any of the standard forms for screen
      distances. This option is only used when wrapping is enabled. If a text
      line wraps, the right margin for each line on the display is determined by
      the first non-elided character of that display line.</dd>
  <dt id="spacing1"><a class="permalink" href="#spacing1"><b>-spacing1
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies how much additional space should be left above
      each text line, using any of the standard forms for screen distances. If a
      line wraps, this option only applies to the first line on the
    display.</dd>
  <dt id="spacing2"><a class="permalink" href="#spacing2"><b>-spacing2
    </b><i>pixels</i></a></dt>
  <dd>For lines that wrap, this option specifies how much additional space to
      leave between the display lines for a single text line. <i>Pixels</i> may
      have any of the standard forms for screen distances.</dd>
  <dt id="spacing3"><a class="permalink" href="#spacing3"><b>-spacing3
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies how much additional space should be left below
      each text line, using any of the standard forms for screen distances. If a
      line wraps, this option only applies to the last line on the display.</dd>
  <dt id="tabs"><a class="permalink" href="#tabs"><b>-tabs
    </b><i>tabList</i></a></dt>
  <dd><i>TabList</i> specifies a set of tab stops in the same form as for the
      <b>-tabs</b> option for the text widget. This option only applies to a
      display line if it applies to the first non-elided character on that
      display line. If this option is specified as an empty string, it cancels
      the option, leaving it unspecified for the tag (the default). If the
      option is specified as a non-empty string that is an empty list, such as
      <b>-tags&#x00A0;{&#x00A0;}</b>, then it requests default 8-character tabs
      as described for the <b>-tags</b> widget option.</dd>
  <dt id="tabstyle"><a class="permalink" href="#tabstyle"><b>-tabstyle
    </b><i>style</i></a></dt>
  <dd><i>Style</i> specifies either the <i>tabular</i> or <i>wordprocessor</i>
      style of tabbing to use for the text widget. This option only applies to a
      display line if it applies to the first non-elided character on that
      display line. If this option is specified as an empty string, it cancels
      the option, leaving it unspecified for the tag (the default).</dd>
  <dt id="underline"><a class="permalink" href="#underline"><b>-underline
    </b><i>boolean</i></a></dt>
  <dd><i>Boolean</i> specifies whether or not to draw an underline underneath
      characters. It may have any of the forms accepted by
      <b>Tcl_GetBoolean</b>.</dd>
  <dt id="wrap"><a class="permalink" href="#wrap"><b>-wrap
    </b><i>mode</i></a></dt>
  <dd><i>Mode</i> specifies how to handle lines that are wider than the text's
      window. It has the same legal values as the <b>-wrap</b> option for the
      text widget: <b>none</b>, <b>char</b>, or <b>word</b>. If this tag option
      is specified, it overrides the <b>-wrap</b> option for the text
    widget.</dd>
</dl>
<p class="Pp">If a character has several tags associated with it, and if their
    display options conflict, then the options of the highest priority tag are
    used. If a particular display option has not been specified for a particular
    tag, or if it is specified as an empty string, then that option will never
    be used; the next-highest-priority tag's option will used instead. If no tag
    specifies a particular display option, then the default style for the widget
    will be used.</p>
<p class="Pp">The second purpose for tags is event bindings. You can associate
    bindings with a tag in much the same way you can associate bindings with a
    widget class: whenever particular X events occur on characters with the
    given tag, a given Tcl command will be executed. Tag bindings can be used to
    give behaviors to ranges of characters; among other things, this allows
    hypertext-like features to be implemented. For details, see the description
    of the &#x201C;<i>pathName </i><b>tag bind</b>&#x201D; widget command below.
    Tag bindings are shared between all peer widgets (including any bindings for
    the special <b>sel</b> tag).</p>
<p class="Pp">The third use for tags is in managing the selection. See <b>THE
    SELECTION</b> below. With the exception of the special <b>sel</b> tag, all
    tags are shared between peer text widgets, and may be manipulated on an
    equal basis from any such widget. The <b>sel</b> tag exists separately and
    independently in each peer text widget (but any tag bindings to <b>sel</b>
    are shared).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="MARKS"><a class="permalink" href="#MARKS">MARKS</a></h1>
<p class="Pp">The second form of annotation in text widgets is a mark. Marks are
    used for remembering particular places in a text. They are something like
    tags, in that they have names and they refer to places in the file, but a
    mark is not associated with particular characters. Instead, a mark is
    associated with the gap between two characters. Only a single position may
    be associated with a mark at any given time. If the characters around a mark
    are deleted the mark will still remain; it will just have new neighbor
    characters. In contrast, if the characters containing a tag are deleted then
    the tag will no longer have an association with characters in the file.
    Marks may be manipulated with the &#x201C;<i>pathName
    </i><b>mark</b>&#x201D; widget command, and their current locations may be
    determined by using the mark name as an index in widget commands.</p>
<p class="Pp">Each mark also has a &#x201C;gravity&#x201D;, which is either
    <b>left</b> or <b>right</b>. The gravity for a mark specifies what happens
    to the mark when text is inserted at the point of the mark. If a mark has
    left gravity, then the mark is treated as if it were attached to the
    character on its left, so the mark will remain to the left of any text
    inserted at the mark position. If the mark has right gravity, new text
    inserted at the mark position will appear to the left of the mark (so that
    the mark remains rightmost). The gravity for a mark defaults to
    <b>right</b>.</p>
<p class="Pp">The name space for marks is different from that for tags: the same
    name may be used for both a mark and a tag, but they will refer to different
    things.</p>
<p class="Pp">Two marks have special significance. First, the mark <b>insert</b>
    is associated with the insertion cursor, as described under <b>THE INSERTION
    CURSOR</b> below. Second, the mark <b>current</b> is associated with the
    character closest to the mouse and is adjusted automatically to track the
    mouse position and any changes to the text in the widget (one exception:
    <b>current</b> is not updated in response to mouse motions if a mouse button
    is down; the update will be deferred until all mouse buttons have been
    released). Neither of these special marks may be deleted. With the exception
    of these two special marks, all marks are shared between peer text widgets,
    and may be manipulated on an equal basis from any peer.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EMBEDDED_WINDOWS"><a class="permalink" href="#EMBEDDED_WINDOWS">EMBEDDED
  WINDOWS</a></h1>
<p class="Pp">The third form of annotation in text widgets is an embedded
    window. Each embedded window annotation causes a window to be displayed at a
    particular point in the text. There may be any number of embedded windows in
    a text widget, and any widget may be used as an embedded window (subject to
    the usual rules for geometry management, which require the text window to be
    the parent of the embedded window or a descendant of its parent). The
    embedded window's position on the screen will be updated as the text is
    modified or scrolled, and it will be mapped and unmapped as it moves into
    and out of the visible area of the text widget. Each embedded window
    occupies one unit's worth of index space in the text widget, and it may be
    referred to either by the name of its embedded window or by its position in
    the widget's index space. If the range of text containing the embedded
    window is deleted then the window is destroyed. Similarly if the text widget
    as a whole is deleted, then the window is destroyed.</p>
<p class="Pp">When an embedded window is added to a text widget with the
    <i>pathName </i><b>window create</b> widget command, several configuration
    options may be associated with it. These options may be modified later with
    the <i>pathName </i><b>window configure</b> widget command. The following
    options are currently supported:</p>
<dl class="Bl-tag">
  <dt id="align"><a class="permalink" href="#align"><b>-align
    </b><i>where</i></a></dt>
  <dd>If the window is not as tall as the line in which it is displayed, this
      option determines where the window is displayed in the line. <i>Where</i>
      must have one of the values <b>top</b> (align the top of the window with
      the top of the line), <b>center</b> (center the window within the range of
      the line), <b>bottom</b> (align the bottom of the window with the bottom
      of the line's area), or <b>baseline</b> (align the bottom of the window
      with the baseline of the line).</dd>
  <dt id="create"><a class="permalink" href="#create"><b>-create
    </b><i>script</i></a></dt>
  <dd>Specifies a Tcl script that may be evaluated to create the window for the
      annotation. If no <b>-window</b> option has been specified for the
      annotation this script will be evaluated when the annotation is about to
      be displayed on the screen. <i>Script</i> must create a window for the
      annotation and return the name of that window as its result. Two
      substitutions will be performed in <i>script</i> before evaluation.
      <i>%W</i> will be substituted by the name of the parent text widget, and
      <i>%%</i> will be substituted by a single <i>%</i>. If the annotation's
      window should ever be deleted, <i>script</i> will be evaluated again the
      next time the annotation is displayed.</dd>
  <dt id="padx"><a class="permalink" href="#padx"><b>-padx
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies the amount of extra space to leave on each side of
      the embedded window. It may have any of the usual forms defined for a
      screen distance.</dd>
  <dt id="pady"><a class="permalink" href="#pady"><b>-pady
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies the amount of extra space to leave on the top and
      on the bottom of the embedded window. It may have any of the usual forms
      defined for a screen distance.</dd>
  <dt id="stretch"><a class="permalink" href="#stretch"><b>-stretch
    </b><i>boolean</i></a></dt>
  <dd>If the requested height of the embedded window is less than the height of
      the line in which it is displayed, this option can be used to specify
      whether the window should be stretched vertically to fill its line. If the
      <b>-pady</b> option has been specified as well, then the requested padding
      will be retained even if the window is stretched.</dd>
  <dt id="window"><a class="permalink" href="#window"><b>-window
    </b><i>pathName</i></a></dt>
  <dd>Specifies the name of a window to display in the annotation. Note that if
      a <i>pathName</i> has been set, then later configuring a window to the
      empty string will not delete the widget corresponding to the old
      <i>pathName</i>. Rather it will remove the association between the old
      <i>pathName</i> and the text widget. If multiple peer widgets are in use,
      it is usually simpler to use the <b>-create</b> option if embedded windows
      are desired in each peer.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EMBEDDED_IMAGES"><a class="permalink" href="#EMBEDDED_IMAGES">EMBEDDED
  IMAGES</a></h1>
<p class="Pp">The final form of annotation in text widgets is an embedded image.
    Each embedded image annotation causes an image to be displayed at a
    particular point in the text. There may be any number of embedded images in
    a text widget, and a particular image may be embedded in multiple places in
    the same text widget. The embedded image's position on the screen will be
    updated as the text is modified or scrolled. Each embedded image occupies
    one unit's worth of index space in the text widget, and it may be referred
    to either by its position in the widget's index space, or the name it is
    assigned when the image is inserted into the text widget with <i>pathName
    </i><b>image create</b>. If the range of text containing the embedded image
    is deleted then that copy of the image is removed from the screen.</p>
<p class="Pp">When an embedded image is added to a text widget with the
    <i>pathName </i><b>image</b> <b>create</b> widget command, a name unique to
    this instance of the image is returned. This name may then be used to refer
    to this image instance. The name is taken to be the value of the
    <b>-name</b> option (described below). If the <b>-name</b> option is not
    provided, the <b>-image</b> name is used instead. If the <i>imageName</i> is
    already in use in the text widget, then <b>#</b><i>nn</i> is added to the
    end of the <i>imageName</i>, where <i>nn</i> is an arbitrary integer. This
    insures the <i>imageName</i> is unique. Once this name is assigned to this
    instance of the image, it does not change, even though the <b>-image</b> or
    <b>-name</b> values can be changed with <i>pathName </i><b>image
    configure</b>.</p>
<p class="Pp">When an embedded image is added to a text widget with the
    <i>pathName </i><b>image create</b> widget command, several configuration
    options may be associated with it. These options may be modified later with
    the <i>pathName </i><b>image configure</b> widget command. The following
    options are currently supported:</p>
<dl class="Bl-tag">
  <dt id="align~2"><a class="permalink" href="#align~2"><b>-align
    </b><i>where</i></a></dt>
  <dd>If the image is not as tall as the line in which it is displayed, this
      option determines where the image is displayed in the line. <i>Where</i>
      must have one of the values <b>top</b> (align the top of the image with
      the top of the line), <b>center</b> (center the image within the range of
      the line), <b>bottom</b> (align the bottom of the image with the bottom of
      the line's area), or <b>baseline</b> (align the bottom of the image with
      the baseline of the line).</dd>
  <dt id="image"><a class="permalink" href="#image"><b>-image
    </b><i>image</i></a></dt>
  <dd>Specifies the name of the Tk image to display in the annotation. If
      <i>image</i> is not a valid Tk image, then an error is returned.</dd>
  <dt id="name"><a class="permalink" href="#name"><b>-name
    </b><i>ImageName</i></a></dt>
  <dd>Specifies the name by which this image instance may be referenced in the
      text widget. If <i>ImageName</i> is not supplied, then the name of the Tk
      image is used instead. If the <i>imageName</i> is already in use,
      <i>#nn</i> is appended to the end of the name as described above.</dd>
  <dt id="padx~2"><a class="permalink" href="#padx~2"><b>-padx
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies the amount of extra space to leave on each side of
      the embedded image. It may have any of the usual forms defined for a
      screen distance.</dd>
  <dt id="pady~2"><a class="permalink" href="#pady~2"><b>-pady
    </b><i>pixels</i></a></dt>
  <dd><i>Pixels</i> specifies the amount of extra space to leave on the top and
      on the bottom of the embedded image. It may have any of the usual forms
      defined for a screen distance.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_SELECTION"><a class="permalink" href="#THE_SELECTION">THE
  SELECTION</a></h1>
<p class="Pp">Selection support is implemented via tags. If the
    <b>exportSelection</b> option for the text widget is true then the
    <b>sel</b> tag will be associated with the selection:</p>
<dl class="Bl-tag">
  <dt>[1]</dt>
  <dd>Whenever characters are tagged with <b>sel</b> the text widget will claim
      ownership of the selection.</dd>
  <dt>[2]</dt>
  <dd>Attempts to retrieve the selection will be serviced by the text widget,
      returning all the characters with the <b>sel</b> tag.</dd>
  <dt>[3]</dt>
  <dd>If the selection is claimed away by another application or by another
      window within this application, then the <b>sel</b> tag will be removed
      from all characters in the text.</dd>
  <dt>[4]</dt>
  <dd>Whenever the <b>sel</b> tag range changes a virtual event
      <b>&lt;&lt;Selection&gt;&gt;</b> is generated.</dd>
</dl>
<p class="Pp">The <b>sel</b> tag is automatically defined when a text widget is
    created, and it may not be deleted with the &#x201C;<i>pathName </i><b>tag
    delete</b>&#x201D; widget command. Furthermore, the <b>selectBackground</b>,
    <b>selectBorderWidth</b>, and <b>selectForeground</b> options for the text
    widget are tied to the <b>-background</b>, <b>-borderwidth</b>, and
    <b>-foreground</b> options for the <b>sel</b> tag: changes in either will
    automatically be reflected in the other. Also the
    <b>-inactiveselectbackground</b> option for the text widget is used instead
    of <b>-selectbackground</b> when the text widget does not have the focus.
    This allows programmatic control over the visualization of the <b>sel</b>
    tag for foreground and background windows, or to have <b>sel</b> not shown
    at all (when <b>-inactiveselectbackground</b> is empty) for background
    windows. Each peer text widget has its own <b>sel</b> tag which can be
    separately configured and set.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_INSERTION_CURSOR"><a class="permalink" href="#THE_INSERTION_CURSOR">THE
  INSERTION CURSOR</a></h1>
<p class="Pp">The mark named <b>insert</b> has special significance in text
    widgets. It is defined automatically when a text widget is created and it
    may not be unset with the &#x201C;<i>pathName </i><b>mark unset</b>&#x201D;
    widget command. The <b>insert</b> mark represents the position of the
    insertion cursor, and the insertion cursor will automatically be drawn at
    this point whenever the text widget has the input focus.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_MODIFIED_FLAG"><a class="permalink" href="#THE_MODIFIED_FLAG">THE
  MODIFIED FLAG</a></h1>
<p class="Pp">The text widget can keep track of changes to the content of the
    widget by means of the modified flag. Inserting or deleting text will set
    this flag. The flag can be queried, set and cleared programmatically as
    well. Whenever the flag changes state a <b>&lt;&lt;Modified&gt;&gt;</b>
    virtual event is generated. See the <i>pathName </i><b>edit modified</b>
    widget command for more details.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_UNDO_MECHANISM"><a class="permalink" href="#THE_UNDO_MECHANISM">THE
  UNDO MECHANISM</a></h1>
<p class="Pp">The text widget has an unlimited undo and redo mechanism (when the
    <b>-undo</b> widget option is true) which records every insert and delete
    action on a stack.</p>
<p class="Pp">Boundaries (called &#x201C;separators&#x201D;) are inserted
    between edit actions. The purpose of these separators is to group inserts,
    deletes and replaces into one compound edit action. When undoing a change
    everything between two separators will be undone. The undone changes are
    then moved to the redo stack, so that an undone edit can be redone again.
    The redo stack is cleared whenever new edit actions are recorded on the undo
    stack. The undo and redo stacks can be cleared to keep their depth under
    control.</p>
<p class="Pp">Separators are inserted automatically when the
    <b>-autoseparators</b> widget option is true. You can insert separators
    programmatically as well. If a separator is already present at the top of
    the undo stack no other will be inserted. That means that two separators on
    the undo stack are always separated by at least one insert or delete
  action.</p>
<p class="Pp">The undo mechanism is also linked to the modified flag. This means
    that undoing or redoing changes can take a modified text widget back to the
    unmodified state or vice versa. The modified flag will be set automatically
    to the appropriate state. This automatic coupling does not work when the
    modified flag has been set by the user, until the flag has been reset
  again.</p>
<p class="Pp">See below for the <i>pathName </i><b>edit</b> widget command that
    controls the undo mechanism.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PEER_WIDGETS"><a class="permalink" href="#PEER_WIDGETS">PEER
  WIDGETS</a></h1>
<p class="Pp">The text widget has a separate store of all its data concerning
    each line's textual contents, marks, tags, images and windows, and the undo
    stack.</p>
<p class="Pp">While this data store cannot be accessed directly (i.e. without a
    text widget as an intermediary), multiple text widgets can be created, each
    of which present different views on the same underlying data. Such text
    widgets are known as peer text widgets.</p>
<p class="Pp">As text is added, deleted, edited and coloured in any one widget,
    and as images, marks, tags are adjusted, all such changes will be reflected
    in all peers.</p>
<p class="Pp">All data and markup is shared, except for a few small details.
    First, the <b>sel</b> tag may be set and configured (in its display style)
    differently for each peer. Second, each peer has its own <b>insert</b> and
    <b>current</b> mark positions (but all other marks are shared). Third,
    embedded windows, which are arbitrary other widgets, cannot be shared
    between peers. This means the <b>-window</b> option of embedded windows is
    independently set for each peer (it is advisable to use the <b>-create</b>
    script capabilities to allow each peer to create its own embedded windows as
    needed). Fourth, all of the configuration options of each peer (e.g.
    <b>-font</b>, etc) can be set independently, with the exception of
    <b>-undo</b>, <b>-maxUndo</b>, <b>-autoSeparators</b> (i.e. all undo, redo
    and modified state issues are shared).</p>
<p class="Pp">Finally any single peer need not contain all lines from the
    underlying data store. When creating a peer, a contiguous range of lines
    (e.g. only lines 52 through 125) may be specified. This allows a peer to
    contain just a small portion of the overall text. The range of lines will
    expand and contract as text is inserted or deleted. The peer will only ever
    display complete lines of text (one cannot share just part of a line). If
    the peer's contents contracts to nothing (i.e. all complete lines in the
    peer widget have been deleted from another widget), then it is impossible
    for new lines to be inserted. The peer will simply become an empty shell on
    which the background can be configured, but which will never show any
    content (without manual reconfiguration of the start and end lines). Note
    that a peer which does not contain all of the underlying data store still
    has indices numbered from &#x201C;1.0&#x201D; to &#x201C;end&#x201D;. It is
    simply that those indices reflect a subset of the total data, and data
    outside the contained range is not accessible to the peer. This means that
    the command <i>peerName </i><b>index end</b> may return quite different
    values in different peers. Similarly, commands like <i>peerName
    </i><b>tag</b> <b>ranges</b> will not return index ranges outside that which
    is meaningful to the peer. The configuration options <b>-startline</b> and
    <b>-endline</b> may be used to control how much of the underlying data is
    contained in any given text widget.</p>
<p class="Pp">Note that peers are really peers. Deleting the
    &#x201C;original&#x201D; text widget will not cause any other peers to be
    deleted, or otherwise affected.</p>
<p class="Pp">See below for the <i>pathName </i><b>peer</b> widget command that
    controls the creation of peer widgets.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="WIDGET_COMMAND"><a class="permalink" href="#WIDGET_COMMAND">WIDGET
  COMMAND</a></h1>
<p class="Pp">The <b>text</b> command creates a new Tcl command whose name is
    the same as the path name of the text's window. This command may be used to
    invoke various operations on the widget. It has the following general
  form:</p>
<div class="Bd-indent">
<pre>
<i>pathName option </i>?<i>arg arg ...</i>?</pre>
</div>
<i>PathName</i> is the name of the command, which is the same as the text
  widget's path name. <i>Option</i> and the <i>arg</i>s determine the exact
  behavior of the command. The following commands are possible for text widgets:
<dl class="Bl-tag">
  <dt id="pathName~2"><a class="permalink" href="#pathName~2"><i>pathName
    </i><b>bbox </b><i>index</i></a></dt>
  <dd>Returns a list of four elements describing the screen area of the
      character given by <i>index</i>. The first two elements of the list give
      the x and y coordinates of the upper-left corner of the area occupied by
      the character, and the last two elements give the width and height of the
      area. If the character is only partially visible on the screen, then the
      return value reflects just the visible part. If the character is not
      visible on the screen then the return value is an empty list.</dd>
  <dt id="pathName~3"><a class="permalink" href="#pathName~3"><i>pathName
    </i><b>cget</b> <i>option</i></a></dt>
  <dd>Returns the current value of the configuration option given by
      <i>option</i>. <i>Option</i> may have any of the values accepted by the
      <b>text</b> command.</dd>
  <dt id="pathName~4"><a class="permalink" href="#pathName~4"><i>pathName
    </i><b>compare</b> <i>index1 op index2</i></a></dt>
  <dd>Compares the indices given by <i>index1</i> and <i>index2</i> according to
      the relational operator given by <i>op</i>, and returns 1 if the
      relationship is satisfied and 0 if it is not. <i>Op</i> must be one of the
      operators &lt;, &lt;=, ==, &gt;=, &gt;, or !=. If <i>op</i> is == then 1
      is returned if the two indices refer to the same character, if <i>op</i>
      is &lt; then 1 is returned if <i>index1</i> refers to an earlier character
      in the text than <i>index2</i>, and so on.</dd>
  <dt id="pathName~5"><a class="permalink" href="#pathName~5"><i>pathName
    </i><b>configure</b> ?<i>option</i>? <i>?value option value
    ...</i>?</a></dt>
  <dd>Query or modify the configuration options of the widget. If no
      <i>option</i> is specified, returns a list describing all of the available
      options for <i>pathName</i> (see <b>Tk_ConfigureInfo</b> for information
      on the format of this list). If <i>option</i> is specified with no
      <i>value</i>, then the command returns a list describing the one named
      option (this list will be identical to the corresponding sublist of the
      value returned if no <i>option</i> is specified). If one or more
      <i>option-value</i> pairs are specified, then the command modifies the
      given widget option(s) to have the given value(s); in this case the
      command returns an empty string. <i>Option</i> may have any of the values
      accepted by the <b>text</b> command.</dd>
  <dt id="pathName~6"><a class="permalink" href="#pathName~6"><i>pathName
    </i><b>count</b> <i>?options</i>? <i>index1 index2</i></a></dt>
  <dd>Counts the number of relevant things between the two indices. If
      <i>index1</i> is after <i>index2</i>, the result will be a negative number
      (and this holds for each of the possible options). The actual items which
      are counted depend on the options given. The result is a list of integers,
      one for the result of each counting option given. Valid counting options
      are <b>-chars</b>, <b>-displaychars</b>, <b>-displayindices</b>,
      <b>-displaylines</b>, <b>-indices</b>, <b>-lines</b>, <b>-xpixels</b> and
      <b>-ypixels</b>. The default value, if no option is specified, is
      <b>-indices</b>. There is an additional possible option <b>-update</b>
      which is a modifier. If given, then all subsequent options ensure that any
      possible out of date information is recalculated. This currently only has
      any effect for the <i>-ypixels</i> count (which, if <b>-update</b> is not
      given, will use the text widget's current cached value for each line). The
      count options are interpreted as follows:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="chars"><a class="permalink" href="#chars"><b>-chars</b></a></dt>
  <dd>count all characters, whether elided or not. Do not count embedded windows
      or images.</dd>
  <dt id="displaychars"><a class="permalink" href="#displaychars"><b>-displaychars</b></a></dt>
  <dd>count all non-elided characters.</dd>
  <dt id="displayindices"><a class="permalink" href="#displayindices"><b>-displayindices</b></a></dt>
  <dd>count all non-elided characters, windows and images.</dd>
  <dt id="displaylines"><a class="permalink" href="#displaylines"><b>-displaylines</b></a></dt>
  <dd>count all display lines (i.e. counting one for each time a line wraps)
      from the line of the first index up to, but not including the display line
      of the second index. Therefore if they are both on the same display line,
      zero will be returned. By definition displaylines are visible and
      therefore this only counts portions of actual visible lines.</dd>
  <dt id="indices"><a class="permalink" href="#indices"><b>-indices</b></a></dt>
  <dd>count all characters and embedded windows or images (i.e. everything which
      counts in text-widget index space), whether they are elided or not.</dd>
  <dt id="lines"><a class="permalink" href="#lines"><b>-lines</b></a></dt>
  <dd>count all logical lines (irrespective of wrapping) from the line of the
      first index up to, but not including the line of the second index.
      Therefore if they are both on the same line, zero will be returned.
      Logical lines are counted whether they are currently visible (non-elided)
      or not.</dd>
  <dt id="xpixels"><a class="permalink" href="#xpixels"><b>-xpixels</b></a></dt>
  <dd>count the number of horizontal pixels from the first pixel of the first
      index to (but not including) the first pixel of the second index. To count
      the total desired width of the text widget (assuming wrapping is not
      enabled), first find the longest line and then use &#x201C;.text count
      -xpixels &quot;${line}.0&quot; &quot;${line}.0 lineend&quot;&#x201D;.</dd>
  <dt id="ypixels"><a class="permalink" href="#ypixels"><b>-ypixels</b></a></dt>
  <dd>count the number of vertical pixels from the first pixel of the first
      index to (but not including) the first pixel of the second index. If both
      indices are on the same display line, zero will be returned. To count the
      total number of vertical pixels in the text widget, use &#x201C;.text
      count -ypixels 1.0 end&#x201D;, and to ensure this is up to date, use
      &#x201C;.text count -update -ypixels 1.0 end&#x201D;.</dd>
</dl>
<p class="Pp">The command returns a positive or negative integer corresponding
    to the number of items counted between the two indices. One such integer is
    returned for each counting option given, so a list is returned if more than
    one option was supplied. For example &#x201C;.text count -xpixels -ypixels
    1.3 4.5&#x201D; is perfectly valid and will return a list of two
  elements.</p>
</div>
<dl class="Bl-tag">
  <dt id="pathName~7"><a class="permalink" href="#pathName~7"><i>pathName
    </i><b>debug </b>?<i>boolean</i>?</a></dt>
  <dd>If <i>boolean</i> is specified, then it must have one of the true or false
      values accepted by Tcl_GetBoolean. If the value is a true one then
      internal consistency checks will be turned on in the B-tree code
      associated with text widgets. If <i>boolean</i> has a false value then the
      debugging checks will be turned off. In either case the command returns an
      empty string. If <i>boolean</i> is not specified then the command returns
      <b>on</b> or <b>off</b> to indicate whether or not debugging is turned on.
      There is a single debugging switch shared by all text widgets: turning
      debugging on or off in any widget turns it on or off for all widgets. For
      widgets with large amounts of text, the consistency checks may cause a
      noticeable slow-down.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">When debugging is turned on, the drawing routines of the text
    widget set the global variables <b>tk_textRedraw</b> and
    <b>tk_textRelayout</b> to the lists of indices that are redrawn. The values
    of these variables are tested by Tk's test suite.</p>
</div>
<dl class="Bl-tag">
  <dt id="pathName~8"><a class="permalink" href="#pathName~8"><i>pathName
    </i><b>delete </b><i>index1 </i>?<i>index2 ...</i>?</a></dt>
  <dd>Delete a range of characters from the text. If both <i>index1</i> and
      <i>index2</i> are specified, then delete all the characters starting with
      the one given by <i>index1</i> and stopping just before <i>index2</i>
      (i.e. the character at <i>index2</i> is not deleted). If <i>index2</i>
      does not specify a position later in the text than <i>index1</i> then no
      characters are deleted. If <i>index2</i> is not specified then the single
      character at <i>index1</i> is deleted. It is not allowable to delete
      characters in a way that would leave the text without a newline as the
      last character. The command returns an empty string. If more indices are
      given, multiple ranges of text will be deleted. All indices are first
      checked for validity before any deletions are made. They are sorted and
      the text is removed from the last range to the first range so deleted text
      does not cause an undesired index shifting side-effects. If multiple
      ranges with the same start index are given, then the longest range is
      used. If overlapping ranges are given, then they will be merged into spans
      that do not cause deletion of text outside the given ranges due to text
      shifted during deletion.</dd>
  <dt id="pathName~9"><a class="permalink" href="#pathName~9"><i>pathName
    </i><b>dlineinfo </b><i>index</i></a></dt>
  <dd>Returns a list with five elements describing the area occupied by the
      display line containing <i>index</i>. The first two elements of the list
      give the x and y coordinates of the upper-left corner of the area occupied
      by the line, the third and fourth elements give the width and height of
      the area, and the fifth element gives the position of the baseline for the
      line, measured down from the top of the area. All of this information is
      measured in pixels. If the current wrap mode is <b>none</b> and the line
      extends beyond the boundaries of the window, the area returned reflects
      the entire area of the line, including the portions that are out of the
      window. If the line is shorter than the full width of the window then the
      area returned reflects just the portion of the line that is occupied by
      characters and embedded windows. If the display line containing
      <i>index</i> is not visible on the screen then the return value is an
      empty list.</dd>
  <dt id="pathName~10"><a class="permalink" href="#pathName~10"><i>pathName
    </i><b>dump </b>?<i>switches</i>? <i>index1 </i>?<i>index2</i>?</a></dt>
  <dd>Return the contents of the text widget from <i>index1</i> up to, but not
      including <i>index2</i>, including the text and information about marks,
      tags, and embedded windows. If <i>index2</i> is not specified, then it
      defaults to one character past <i>index1</i>. The information is returned
      in the following format:</dd>
</dl>
<p class="Pp"></p>
<div class="Bd-indent"><i>key1 value1 index1 key2 value2 index2</i> ...
<p class="Pp">The possible <i>key</i> values are <b>text</b>, <b>mark</b>,
    <b>tagon</b>, <b>tagoff</b>, <b>image</b>, and <b>window</b>. The
    corresponding <i>value</i> is the text, mark name, tag name, image name, or
    window name. The <i>index</i> information is the index of the start of the
    text, mark, tag transition, image or window. One or more of the following
    switches (or abbreviations thereof) may be specified to control the
  dump:</p>
<dl class="Bl-tag">
  <dt id="all"><a class="permalink" href="#all"><b>-all</b></a></dt>
  <dd>Return information about all elements: text, marks, tags, images and
      windows. This is the default.</dd>
  <dt id="command"><a class="permalink" href="#command"><b>-command
    </b><i>command</i></a></dt>
  <dd>Instead of returning the information as the result of the dump operation,
      invoke the <i>command</i> on each element of the text widget within the
      range. The command has three arguments appended to it before it is
      evaluated: the <i>key</i>, <i>value</i>, and <i>index</i>.</dd>
  <dt id="image~2"><a class="permalink" href="#image~2"><b>-image</b></a></dt>
  <dd>Include information about images in the dump results.</dd>
  <dt id="mark~2"><a class="permalink" href="#mark~2"><b>-mark</b></a></dt>
  <dd>Include information about marks in the dump results.</dd>
  <dt id="tag~3"><a class="permalink" href="#tag~3"><b>-tag</b></a></dt>
  <dd>Include information about tag transitions in the dump results. Tag
      information is returned as <b>tagon</b> and <b>tagoff</b> elements that
      indicate the begin and end of each range of each tag, respectively.</dd>
  <dt id="text"><a class="permalink" href="#text"><b>-text</b></a></dt>
  <dd>Include information about text in the dump results. The value is the text
      up to the next element or the end of range indicated by <i>index2</i>. A
      text element does not span newlines. A multi-line block of text that
      contains no marks or tag transitions will still be dumped as a set of text
      segments that each end with a newline. The newline is part of the
    value.</dd>
  <dt id="window~2"><a class="permalink" href="#window~2"><b>-window</b></a></dt>
  <dd>Include information about embedded windows in the dump results. The value
      of a window is its Tk pathname, unless the window has not been created
      yet. (It must have a create script.) In this case an empty string is
      returned, and you must query the window by its index position to get more
      information.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~11"><a class="permalink" href="#pathName~11"><i>pathName
    </i><b>edit </b><i>option </i>?<i>arg arg ...</i>?</a></dt>
  <dd>This command controls the undo mechanism and the modified flag. The exact
      behavior of the command depends on the <i>option</i> argument that follows
      the <b>edit</b> argument. The following forms of the command are currently
      supported:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~12"><a class="permalink" href="#pathName~12"><i>pathName
    </i><b>edit modified ?</b><i>boolean</i>?</a></dt>
  <dd>If <i>boolean</i> is not specified, returns the modified flag of the
      widget. The insert, delete, edit undo and edit redo commands or the user
      can set or clear the modified flag. If <i>boolean</i> is specified, sets
      the modified flag of the widget to <i>boolean</i>.</dd>
  <dt id="pathName~13"><a class="permalink" href="#pathName~13"><i>pathName
    </i><b>edit redo</b></a></dt>
  <dd>When the <b>-undo</b> option is true, reapplies the last undone edits
      provided no other edits were done since then. Generates an error when the
      redo stack is empty. Does nothing when the <b>-undo</b> option is
    false.</dd>
  <dt id="pathName~14"><a class="permalink" href="#pathName~14"><i>pathName
    </i><b>edit reset</b></a></dt>
  <dd>Clears the undo and redo stacks.</dd>
  <dt id="pathName~15"><a class="permalink" href="#pathName~15"><i>pathName
    </i><b>edit separator</b></a></dt>
  <dd>Inserts a separator (boundary) on the undo stack. Does nothing when the
      <b>-undo</b> option is false.</dd>
  <dt id="pathName~16"><a class="permalink" href="#pathName~16"><i>pathName
    </i><b>edit undo</b></a></dt>
  <dd>Undoes the last edit action when the <b>-undo</b> option is true. An edit
      action is defined as all the insert and delete commands that are recorded
      on the undo stack in between two separators. Generates an error when the
      undo stack is empty. Does nothing when the <b>-undo</b> option is
    false.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~17"><a class="permalink" href="#pathName~17"><i>pathName
    </i><b>get</b> <i>?-displaychars?</i> <i>-- index1</i> ?<i>index2
    ...</i>?</a></dt>
  <dd>Return a range of characters from the text. The return value will be all
      the characters in the text starting with the one whose index is
      <i>index1</i> and ending just before the one whose index is <i>index2</i>
      (the character at <i>index2</i> will not be returned). If <i>index2</i> is
      omitted then the single character at <i>index1</i> is returned. If there
      are no characters in the specified range (e.g. <i>index1</i> is past the
      end of the file or <i>index2</i> is less than or equal to <i>index1</i>)
      then an empty string is returned. If the specified range contains embedded
      windows, no information about them is included in the returned string. If
      multiple index pairs are given, multiple ranges of text will be returned
      in a list. Invalid ranges will not be represented with empty strings in
      the list. The ranges are returned in the order passed to <i>pathName
      </i><b>get</b>. If the <b>-displaychars</b> option is given, then, within
      each range, only those characters which are not elided will be returned.
      This may have the effect that some of the returned ranges are empty
      strings.</dd>
  <dt id="pathName~18"><a class="permalink" href="#pathName~18"><i>pathName
    </i><b>image </b><i>option </i>?<i>arg arg ...</i>?</a></dt>
  <dd>This command is used to manipulate embedded images. The behavior of the
      command depends on the <i>option</i> argument that follows the <b>tag</b>
      argument. The following forms of the command are currently supported:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~19"><a class="permalink" href="#pathName~19"><i>pathName
    </i><b>image cget</b> <i>index option</i></a></dt>
  <dd>Returns the value of a configuration option for an embedded image.
      <i>Index</i> identifies the embedded image, and <i>option</i> specifies a
      particular configuration option, which must be one of the ones listed in
      the section <b>EMBEDDED IMAGES</b>.</dd>
  <dt id="pathName~20"><a class="permalink" href="#pathName~20"><i>pathName
    </i><b>image configure </b><i>index</i> ?<i>option value ...</i>?</a></dt>
  <dd>Query or modify the configuration options for an embedded image. If no
      <i>option</i> is specified, returns a list describing all of the available
      options for the embedded image at <i>index</i> (see
      <b>Tk_ConfigureInfo</b> for information on the format of this list). If
      <i>option</i> is specified with no <i>value</i>, then the command returns
      a list describing the one named option (this list will be identical to the
      corresponding sublist of the value returned if no <i>option</i> is
      specified). If one or more <i>option-value</i> pairs are specified, then
      the command modifies the given option(s) to have the given value(s); in
      this case the command returns an empty string. See <b>EMBEDDED IMAGES</b>
      for information on the options that are supported.</dd>
  <dt id="pathName~21"><a class="permalink" href="#pathName~21"><i>pathName
    </i><b>image create </b><i>index</i> ?<i>option value ...</i>?</a></dt>
  <dd>This command creates a new image annotation, which will appear in the text
      at the position given by <i>index</i>. Any number of <i>option-value</i>
      pairs may be specified to configure the annotation. Returns a unique
      identifier that may be used as an index to refer to this image. See
      <b>EMBEDDED IMAGES</b> for information on the options that are supported,
      and a description of the identifier returned.</dd>
  <dt id="pathName~22"><a class="permalink" href="#pathName~22"><i>pathName
    </i><b>image names</b></a></dt>
  <dd>Returns a list whose elements are the names of all image instances
      currently embedded in <i>window</i>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~23"><a class="permalink" href="#pathName~23"><i>pathName
    </i><b>index </b><i>index</i></a></dt>
  <dd>Returns the position corresponding to <i>index</i> in the form
      <i>line.char</i> where <i>line</i> is the line number and <i>char</i> is
      the character number. <i>Index</i> may have any of the forms described
      under <b>INDICES</b> above.</dd>
  <dt id="pathName~24"><a class="permalink" href="#pathName~24"><i>pathName
    </i><b>insert </b><i>index chars </i>?<i>tagList chars tagList
    ...</i>?</a></dt>
  <dd>Inserts all of the <i>chars</i> arguments just before the character at
      <i>index</i>. If <i>index</i> refers to the end of the text (the character
      after the last newline) then the new text is inserted just before the last
      newline instead. If there is a single <i>chars</i> argument and no
      <i>tagList</i>, then the new text will receive any tags that are present
      on both the character before and the character after the insertion point;
      if a tag is present on only one of these characters then it will not be
      applied to the new text. If <i>tagList</i> is specified then it consists
      of a list of tag names; the new characters will receive all of the tags in
      this list and no others, regardless of the tags present around the
      insertion point. If multiple <i>chars</i>-<i>tagList</i> argument pairs
      are present, they produce the same effect as if a separate <i>pathName
      </i><b>insert</b> widget command had been issued for each pair, in order.
      The last <i>tagList</i> argument may be omitted.</dd>
  <dt id="pathName~25"><a class="permalink" href="#pathName~25"><i>pathName
    </i><b>mark </b><i>option </i>?<i>arg arg ...</i>?</a></dt>
  <dd>This command is used to manipulate marks. The exact behavior of the
      command depends on the <i>option</i> argument that follows the <b>mark</b>
      argument. The following forms of the command are currently supported:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~26"><a class="permalink" href="#pathName~26"><i>pathName
    </i><b>mark gravity </b><i>markName</i> ?<i>direction</i>?</a></dt>
  <dd>If <i>direction</i> is not specified, returns <b>left</b> or <b>right</b>
      to indicate which of its adjacent characters <i>markName</i> is attached
      to. If <i>direction</i> is specified, it must be <b>left</b> or
      <b>right</b>; the gravity of <i>markName</i> is set to the given
    value.</dd>
  <dt id="pathName~27"><a class="permalink" href="#pathName~27"><i>pathName
    </i><b>mark names</b></a></dt>
  <dd>Returns a list whose elements are the names of all the marks that are
      currently set.</dd>
  <dt id="pathName~28"><a class="permalink" href="#pathName~28"><i>pathName
    </i><b>mark next </b><i>index</i></a></dt>
  <dd>Returns the name of the next mark at or after <i>index</i>. If
      <i>index</i> is specified in numerical form, then the search for the next
      mark begins at that index. If <i>index</i> is the name of a mark, then the
      search for the next mark begins immediately after that mark. This can
      still return a mark at the same position if there are multiple marks at
      the same index. These semantics mean that the <b>mark next</b> operation
      can be used to step through all the marks in a text widget in the same
      order as the mark information returned by the <i>pathName </i><b>dump</b>
      operation. If a mark has been set to the special <b>end</b> index, then it
      appears to be <i>after</i> <b>end</b> with respect to the <i>pathName
      </i><b>mark next</b> operation. An empty string is returned if there are
      no marks after <i>index</i>.</dd>
  <dt id="pathName~29"><a class="permalink" href="#pathName~29"><i>pathName
    </i><b>mark previous </b><i>index</i></a></dt>
  <dd>Returns the name of the mark at or before <i>index</i>. If <i>index</i> is
      specified in numerical form, then the search for the previous mark begins
      with the character just before that index. If <i>index</i> is the name of
      a mark, then the search for the next mark begins immediately before that
      mark. This can still return a mark at the same position if there are
      multiple marks at the same index. These semantics mean that the
      <i>pathName </i><b>mark previous</b> operation can be used to step through
      all the marks in a text widget in the reverse order as the mark
      information returned by the <i>pathName </i><b>dump</b> operation. An
      empty string is returned if there are no marks before <i>index</i>.</dd>
  <dt id="pathName~30"><a class="permalink" href="#pathName~30"><i>pathName
    </i><b>mark set </b><i>markName index</i></a></dt>
  <dd>Sets the mark named <i>markName</i> to a position just before the
      character at <i>index</i>. If <i>markName</i> already exists, it is moved
      from its old position; if it does not exist, a new mark is created. This
      command returns an empty string.</dd>
  <dt id="pathName~31"><a class="permalink" href="#pathName~31"><i>pathName
    </i><b>mark unset </b><i>markName </i>?<i>markName markName
    ...</i>?</a></dt>
  <dd>Remove the mark corresponding to each of the <i>markName</i> arguments.
      The removed marks will not be usable in indices and will not be returned
      by future calls to &#x201C;<i>pathName </i><b>mark names</b>&#x201D;. This
      command returns an empty string.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~32"><a class="permalink" href="#pathName~32"><i>pathName
    </i><b>peer</b> <i>option args</i></a></dt>
  <dd>This command is used to create and query widget peers. It has two forms,
      depending on <i>option</i>:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~33"><a class="permalink" href="#pathName~33"><i>pathName
    </i><b>peer create </b><i>newPathName</i> ?<i>options</i>?</a></dt>
  <dd>Creates a peer text widget with the given <i>newPathName</i>, and any
      optional standard configuration options (as for the <i>text</i> command).
      By default the peer will have the same start and end line as the parent
      widget, but these can be overridden with the standard configuration
      options.</dd>
  <dt id="pathName~34"><a class="permalink" href="#pathName~34"><i>pathName
    </i><b>peer names</b></a></dt>
  <dd>Returns a list of peers of this widget (this does not include the widget
      itself). The order within this list is undefined.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~35"><a class="permalink" href="#pathName~35"><i>pathName
    </i><b>replace</b> <i>index1 index2 chars</i> ?<i>tagList chars tagList
    ...</i>?</a></dt>
  <dd>Replaces the range of characters between <i>index1</i> and <i>index2</i>
      with the given characters and tags. See the section on <i>pathName</i>
      <i></i><b>insert</b> for an explanation of the handling of the
      <i>tagList...</i> arguments, and the section on <i>pathName</i>
      <i></i><b>delete</b> for an explanation of the handling of the indices. If
      <i>index2</i> corresponds to an index earlier in the text than
      <i>index1</i>, an error will be generated.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The deletion and insertion are arranged so that no unnecessary
    scrolling of the window or movement of insertion cursor occurs. In addition
    the undo/redo stack are correctly modified, if undo operations are active in
    the text widget. The command returns an empty string.</p>
</div>
<dl class="Bl-tag">
  <dt id="pathName~36"><a class="permalink" href="#pathName~36"><i>pathName
    </i><b>scan</b> <i>option args</i></a></dt>
  <dd>This command is used to implement scanning on texts. It has two forms,
      depending on <i>option</i>:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~37"><a class="permalink" href="#pathName~37"><i>pathName
    </i><b>scan mark </b><i>x y</i></a></dt>
  <dd>Records <i>x</i> and <i>y</i> and the current view in the text window, for
      use in conjunction with later <i>pathName </i><b>scan dragto</b> commands.
      Typically this command is associated with a mouse button press in the
      widget. It returns an empty string.</dd>
  <dt id="pathName~38"><a class="permalink" href="#pathName~38"><i>pathName
    </i><b>scan dragto </b><i>x y</i></a></dt>
  <dd>This command computes the difference between its <i>x</i> and <i>y</i>
      arguments and the <i>x</i> and <i>y</i> arguments to the last <i>pathName
      </i><b>scan mark</b> command for the widget. It then adjusts the view by
      10 times the difference in coordinates. This command is typically
      associated with mouse motion events in the widget, to produce the effect
      of dragging the text at high speed through the window. The return value is
      an empty string.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~39"><a class="permalink" href="#pathName~39"><i>pathName
    </i><b>search </b>?<i>switches</i>? <i>pattern index
    </i>?<i>stopIndex</i>?</a></dt>
  <dd>Searches the text in <i>pathName</i> starting at <i>index</i> for a range
      of characters that matches <i>pattern</i>. If a match is found, the index
      of the first character in the match is returned as result; otherwise an
      empty string is returned. One or more of the following switches (or
      abbreviations thereof) may be specified to control the search:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="forwards"><a class="permalink" href="#forwards"><b>-forwards</b></a></dt>
  <dd>The search will proceed forward through the text, finding the first
      matching range starting at or after the position given by <i>index</i>.
      This is the default.</dd>
  <dt id="backwards"><a class="permalink" href="#backwards"><b>-backwards</b></a></dt>
  <dd>The search will proceed backward through the text, finding the matching
      range closest to <i>index</i> whose first character is before <i>index</i>
      (it is not allowed to be at <i>index</i>). Note that, for a variety of
      reasons, backwards searches can be substantially slower than forwards
      searches (particularly when using <b>-regexp</b>), so it is recommended
      that performance-critical code use forward searches.</dd>
  <dt id="exact"><a class="permalink" href="#exact"><b>-exact</b></a></dt>
  <dd>Use exact matching: the characters in the matching range must be identical
      to those in <i>pattern</i>. This is the default.</dd>
  <dt id="regexp"><a class="permalink" href="#regexp"><b>-regexp</b></a></dt>
  <dd>Treat <i>pattern</i> as a regular expression and match it against the text
      using the rules for regular expressions (see the <b>regexp</b> command for
      details). The default matching automatically passes both the
      <b>-lineanchor</b> and <b>-linestop</b> options to the regexp engine
      (unless <b>-nolinestop</b> is used), so that <i>^$</i> match beginning and
      end of line, and <i>.</i>, <i>[^</i> sequences will never match the
      newline character <i>\n</i>.</dd>
  <dt id="nolinestop"><a class="permalink" href="#nolinestop"><b>-nolinestop</b></a></dt>
  <dd>This allows <i>.</i> and <i>[^</i> sequences to match the newline
      character <i>\n</i>, which they will otherwise not do (see the
      <b>regexp</b> command for details). This option is only meaningful if
      <b>-regexp</b> is also given, and an error will be thrown otherwise. For
      example, to match the entire text, use &#x201C;<i>pathName </i><b>search
      -nolinestop -regexp</b> &quot;.*&quot; 1.0&#x201D;.</dd>
  <dt id="nocase"><a class="permalink" href="#nocase"><b>-nocase</b></a></dt>
  <dd>Ignore case differences between the pattern and the text.</dd>
  <dt id="count~4"><a class="permalink" href="#count~4"><b>-count</b><i>
    varName</i></a></dt>
  <dd>The argument following <b>-count</b> gives the name of a variable; if a
      match is found, the number of index positions between beginning and end of
      the matching range will be stored in the variable. If there are no
      embedded images or windows in the matching range (and there are no elided
      characters if <b>-elide</b> is not given), this is equivalent to the
      number of characters matched. In either case, the range <i>matchIdx</i> to
      <i>matchIdx + $count chars</i> will return the entire matched text.</dd>
  <dt id="all~2"><a class="permalink" href="#all~2"><b>-all</b></a></dt>
  <dd>Find all matches in the given range and return a list of the indices of
      the first character of each match. If a <b>-count</b><i> varName</i>
      switch is given, then <i>varName</i> is also set to a list containing one
      element for each successful match. Note that, even for exact searches, the
      elements of this list may be different, if there are embedded images,
      windows or hidden text. Searches with <b>-all</b> behave very similarly to
      the Tcl command <b>regexp -all</b>, in that overlapping matches are not
      normally returned. For example, applying an <b>-all</b> search of the
      pattern &#x201C;\w+&#x201D; against &#x201C;hello there&#x201D; will just
      match twice, once for each word, and matching &#x201C;Z[a-z]+Z&#x201D;
      against &#x201C;ZooZooZoo&#x201D; will just match once.</dd>
  <dt id="overlap"><a class="permalink" href="#overlap"><b>-overlap</b></a></dt>
  <dd>When performing <b>-all</b> searches, the normal behaviour is that matches
      which overlap an already-found match will not be returned. This switch
      changes that behaviour so that all matches which are not totally enclosed
      within another match are returned. For example, applying an
      <b>-overlap</b> search of the pattern &#x201C;\w+&#x201D; against
      &#x201C;hello there&#x201D; will just match twice (i.e. no different to
      just <b>-all</b>), but matching &#x201C;Z[a-z]+Z&#x201D; against
      &#x201C;ZooZooZoo&#x201D; will now match twice. An error will be thrown if
      this switch is used without <b>-all</b>.</dd>
  <dt id="strictlimits"><a class="permalink" href="#strictlimits"><b>-strictlimits</b></a></dt>
  <dd>When performing any search, the normal behaviour is that the start and
      stop limits are checked with respect to the start of the matching text.
      With the <b>-strictlimits</b> flag, the entire matching range must lie
      inside the start and stop limits specified for the match to be valid.</dd>
  <dt id="elide~2"><a class="permalink" href="#elide~2"><b>-elide</b></a></dt>
  <dd>Find elided (hidden) text as well. By default only displayed text is
      searched.</dd>
  <dt><b>--</b></dt>
  <dd>This switch has no effect except to terminate the list of switches: the
      next argument will be treated as <i>pattern</i> even if it starts with
      <b>-</b>.</dd>
</dl>
<p class="Pp">The matching range may be within a single line of text, or run
    across multiple lines (if parts of the pattern can match a new-line). For
    regular expression matching one can use the various newline-matching
    features such as <b>$</b> to match the end of a line, <b>^</b> to match the
    beginning of a line, and to control whether <b>.</b> is allowed to match a
    new-line. If <i>stopIndex</i> is specified, the search stops at that index:
    for forward searches, no match at or after <i>stopIndex</i> will be
    considered; for backward searches, no match earlier in the text than
    <i>stopIndex</i> will be considered. If <i>stopIndex</i> is omitted, the
    entire text will be searched: when the beginning or end of the text is
    reached, the search continues at the other end until the starting location
    is reached again; if <i>stopIndex</i> is specified, no wrap-around will
    occur. This means that, for example, if the search is <b>-forwards</b> but
    <i>stopIndex</i> is earlier in the text than <i>startIndex</i>, nothing will
    ever be found. See <b>KNOWN BUGS</b> below for a number of minor limitations
    of the <i>pathName </i><b>search</b> command.</p>
</div>
<dl class="Bl-tag">
  <dt id="pathName~40"><a class="permalink" href="#pathName~40"><i>pathName
    </i><b>see </b><i>index</i></a></dt>
  <dd>Adjusts the view in the window so that the character given by <i>index</i>
      is completely visible. If <i>index</i> is already visible then the command
      does nothing. If <i>index</i> is a short distance out of view, the command
      adjusts the view just enough to make <i>index</i> visible at the edge of
      the window. If <i>index</i> is far out of view, then the command centers
      <i>index</i> in the window.</dd>
  <dt id="pathName~41"><a class="permalink" href="#pathName~41"><i>pathName
    </i><b>tag </b><i>option </i>?<i>arg arg ...</i>?</a></dt>
  <dd>This command is used to manipulate tags. The exact behavior of the command
      depends on the <i>option</i> argument that follows the <b>tag</b>
      argument. The following forms of the command are currently supported:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~42"><a class="permalink" href="#pathName~42"><i>pathName
    </i><b>tag add </b><i>tagName index1 </i>?<i>index2 index1 index2
    ...</i>?</a></dt>
  <dd>Associate the tag <i>tagName</i> with all of the characters starting with
      <i>index1</i> and ending just before <i>index2</i> (the character at
      <i>index2</i> is not tagged). A single command may contain any number of
      <i>index1</i>-<i>index2</i> pairs. If the last <i>index2</i> is omitted
      then the single character at <i>index1</i> is tagged. If there are no
      characters in the specified range (e.g. <i>index1</i> is past the end of
      the file or <i>index2</i> is less than or equal to <i>index1</i>) then the
      command has no effect.</dd>
  <dt id="pathName~43"><a class="permalink" href="#pathName~43"><i>pathName
    </i><b>tag bind </b><i>tagName</i> ?<i>sequence</i>?
    ?<i>script</i>?</a></dt>
  <dd>This command associates <i>script</i> with the tag given by
      <i>tagName</i>. Whenever the event sequence given by <i>sequence</i>
      occurs for a character that has been tagged with <i>tagName</i>, the
      script will be invoked. This widget command is similar to the <b>bind</b>
      command except that it operates on characters in a text rather than entire
      widgets. See the <b>bind</b> manual entry for complete details on the
      syntax of <i>sequence</i> and the substitutions performed on <i>script</i>
      before invoking it. If all arguments are specified then a new binding is
      created, replacing any existing binding for the same <i>sequence</i> and
      <i>tagName</i> (if the first character of <i>script</i> is
      &#x201C;+&#x201D; then <i>script</i> augments an existing binding rather
      than replacing it). In this case the return value is an empty string. If
      <i>script</i> is omitted then the command returns the <i>script</i>
      associated with <i>tagName</i> and <i>sequence</i> (an error occurs if
      there is no such binding). If both <i>script</i> and <i>sequence</i> are
      omitted then the command returns a list of all the sequences for which
      bindings have been defined for <i>tagName</i>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The only events for which bindings may be specified are those
    related to the mouse and keyboard (such as <b>Enter</b>, <b>Leave</b>,
    <b>ButtonPress</b>, <b>Motion</b>, and <b>KeyPress</b>) or virtual events.
    Event bindings for a text widget use the <b>current</b> mark described under
    <b>MARKS</b> above. An <b>Enter</b> event triggers for a tag when the tag
    first becomes present on the current character, and a <b>Leave</b> event
    triggers for a tag when it ceases to be present on the current character.
    <b>Enter</b> and <b>Leave</b> events can happen either because the
    <b>current</b> mark moved or because the character at that position changed.
    Note that these events are different than <b>Enter</b> and <b>Leave</b>
    events for windows. Mouse and keyboard events are directed to the current
    character. If a virtual event is used in a binding, that binding can trigger
    only if the virtual event is defined by an underlying mouse-related or
    keyboard-related event.</p>
<p class="Pp">It is possible for the current character to have multiple tags,
    and for each of them to have a binding for a particular event sequence. When
    this occurs, one binding is invoked for each tag, in order from
    lowest-priority to highest priority. If there are multiple matching bindings
    for a single tag, then the most specific binding is chosen (see the manual
    entry for the <b>bind</b> command for details). <b>continue</b> and
    <b>break</b> commands within binding scripts are processed in the same way
    as for bindings created with the <b>bind</b> command.</p>
<p class="Pp">If bindings are created for the widget as a whole using the
    <b>bind</b> command, then those bindings will supplement the tag bindings.
    The tag bindings will be invoked first, followed by bindings for the window
    as a whole.</p>
</div>
<dl class="Bl-tag">
  <dt id="pathName~44"><a class="permalink" href="#pathName~44"><i>pathName
    </i><b>tag cget</b> <i>tagName option</i></a></dt>
  <dd>This command returns the current value of the option named <i>option</i>
      associated with the tag given by <i>tagName</i>. <i>Option</i> may have
      any of the values accepted by the <i>pathName </i><b>tag</b>
      <b>configure</b> widget command.</dd>
  <dt id="pathName~45"><a class="permalink" href="#pathName~45"><i>pathName
    </i><b>tag configure </b><i>tagName</i> ?<i>option</i>? ?<i>value</i>?
    ?<i>option value ...</i>?</a></dt>
  <dd>This command is similar to the <i>pathName </i><b>configure</b> widget
      command except that it modifies options associated with the tag given by
      <i>tagName</i> instead of modifying options for the overall text widget.
      If no <i>option</i> is specified, the command returns a list describing
      all of the available options for <i>tagName</i> (see
      <b>Tk_ConfigureInfo</b> for information on the format of this list). If
      <i>option</i> is specified with no <i>value</i>, then the command returns
      a list describing the one named option (this list will be identical to the
      corresponding sublist of the value returned if no <i>option</i> is
      specified). If one or more <i>option-value</i> pairs are specified, then
      the command modifies the given option(s) to have the given value(s) in
      <i>tagName</i>; in this case the command returns an empty string. See
      <b>TAGS</b> above for details on the options available for tags.</dd>
  <dt id="pathName~46"><a class="permalink" href="#pathName~46"><i>pathName
    </i><b>tag delete </b><i>tagName </i>?<i>tagName ...</i>?</a></dt>
  <dd>Deletes all tag information for each of the <i>tagName</i> arguments. The
      command removes the tags from all characters in the file and also deletes
      any other information associated with the tags, such as bindings and
      display information. The command returns an empty string.</dd>
  <dt id="pathName~47"><a class="permalink" href="#pathName~47"><i>pathName</i><b>
    tag lower </b><i>tagName </i>?<i>belowThis</i>?</a></dt>
  <dd>Changes the priority of tag <i>tagName</i> so that it is just lower in
      priority than the tag whose name is <i>belowThis</i>. If <i>belowThis</i>
      is omitted, then <i>tagName</i>'s priority is changed to make it lowest
      priority of all tags.</dd>
  <dt id="pathName~48"><a class="permalink" href="#pathName~48"><i>pathName
    </i><b>tag names </b>?<i>index</i>?</a></dt>
  <dd>Returns a list whose elements are the names of all the tags that are
      active at the character position given by <i>index</i>. If <i>index</i> is
      omitted, then the return value will describe all of the tags that exist
      for the text (this includes all tags that have been named in a
      &#x201C;<i>pathName </i><b>tag</b>&#x201D; widget command but have not
      been deleted by a &#x201C;<i>pathName </i><b>tag delete</b>&#x201D; widget
      command, even if no characters are currently marked with the tag). The
      list will be sorted in order from lowest priority to highest
    priority.</dd>
  <dt id="pathName~49"><a class="permalink" href="#pathName~49"><i>pathName
    </i><b>tag nextrange </b><i>tagName index1 </i>?<i>index2</i>?</a></dt>
  <dd>This command searches the text for a range of characters tagged with
      <i>tagName</i> where the first character of the range is no earlier than
      the character at <i>index1</i> and no later than the character just before
      <i>index2</i> (a range starting at <i>index2</i> will not be considered).
      If several matching ranges exist, the first one is chosen. The command's
      return value is a list containing two elements, which are the index of the
      first character of the range and the index of the character just after the
      last one in the range. If no matching range is found then the return value
      is an empty string. If <i>index2</i> is not given then it defaults to the
      end of the text.</dd>
  <dt id="pathName~50"><a class="permalink" href="#pathName~50"><i>pathName
    </i><b>tag prevrange </b><i>tagName index1 </i>?<i>index2</i>?</a></dt>
  <dd>This command searches the text for a range of characters tagged with
      <i>tagName</i> where the first character of the range is before the
      character at <i>index1</i> and no earlier than the character at
      <i>index2</i> (a range starting at <i>index2</i> will be considered). If
      several matching ranges exist, the one closest to <i>index1</i> is chosen.
      The command's return value is a list containing two elements, which are
      the index of the first character of the range and the index of the
      character just after the last one in the range. If no matching range is
      found then the return value is an empty string. If <i>index2</i> is not
      given then it defaults to the beginning of the text.</dd>
  <dt id="pathName~51"><a class="permalink" href="#pathName~51"><i>pathName</i><b>
    tag raise </b><i>tagName </i>?<i>aboveThis</i>?</a></dt>
  <dd>Changes the priority of tag <i>tagName</i> so that it is just higher in
      priority than the tag whose name is <i>aboveThis</i>. If <i>aboveThis</i>
      is omitted, then <i>tagName</i>'s priority is changed to make it highest
      priority of all tags.</dd>
  <dt id="pathName~52"><a class="permalink" href="#pathName~52"><i>pathName
    </i><b>tag ranges </b><i>tagName</i></a></dt>
  <dd>Returns a list describing all of the ranges of text that have been tagged
      with <i>tagName</i>. The first two elements of the list describe the first
      tagged range in the text, the next two elements describe the second range,
      and so on. The first element of each pair contains the index of the first
      character of the range, and the second element of the pair contains the
      index of the character just after the last one in the range. If there are
      no characters tagged with <i>tag</i> then an empty string is
    returned.</dd>
  <dt id="pathName~53"><a class="permalink" href="#pathName~53"><i>pathName
    </i><b>tag remove </b><i>tagName index1 </i>?<i>index2 index1 index2
    ...</i>?</a></dt>
  <dd>Remove the tag <i>tagName</i> from all of the characters starting at
      <i>index1</i> and ending just before <i>index2</i> (the character at
      <i>index2</i> is not affected). A single command may contain any number of
      <i>index1</i>-<i>index2</i> pairs. If the last <i>index2</i> is omitted
      then the tag is removed from the single character at <i>index1</i>. If
      there are no characters in the specified range (e.g. <i>index1</i> is past
      the end of the file or <i>index2</i> is less than or equal to
      <i>index1</i>) then the command has no effect. This command returns an
      empty string.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~54"><a class="permalink" href="#pathName~54"><i>pathName
    </i><b>window </b><i>option </i>?<i>arg arg ...</i>?</a></dt>
  <dd>This command is used to manipulate embedded windows. The behavior of the
      command depends on the <i>option</i> argument that follows the <b>tag</b>
      argument. The following forms of the command are currently supported:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~55"><a class="permalink" href="#pathName~55"><i>pathName
    </i><b>window cget</b> <i>index option</i></a></dt>
  <dd>Returns the value of a configuration option for an embedded window.
      <i>Index</i> identifies the embedded window, and <i>option</i> specifies a
      particular configuration option, which must be one of the ones listed in
      the section <b>EMBEDDED WINDOWS</b>.</dd>
  <dt id="pathName~56"><a class="permalink" href="#pathName~56"><i>pathName
    </i><b>window configure </b><i>index</i> ?<i>option value ...</i>?</a></dt>
  <dd>Query or modify the configuration options for an embedded window. If no
      <i>option</i> is specified, returns a list describing all of the available
      options for the embedded window at <i>index</i> (see
      <b>Tk_ConfigureInfo</b> for information on the format of this list). If
      <i>option</i> is specified with no <i>value</i>, then the command returns
      a list describing the one named option (this list will be identical to the
      corresponding sublist of the value returned if no <i>option</i> is
      specified). If one or more <i>option-value</i> pairs are specified, then
      the command modifies the given option(s) to have the given value(s); in
      this case the command returns an empty string. See <b>EMBEDDED WINDOWS</b>
      for information on the options that are supported.</dd>
  <dt id="pathName~57"><a class="permalink" href="#pathName~57"><i>pathName
    </i><b>window create </b><i>index</i> ?<i>option value ...</i>?</a></dt>
  <dd>This command creates a new window annotation, which will appear in the
      text at the position given by <i>index</i>. Any number of
      <i>option-value</i> pairs may be specified to configure the annotation.
      See <b>EMBEDDED WINDOWS</b> for information on the options that are
      supported. Returns an empty string.</dd>
  <dt id="pathName~58"><a class="permalink" href="#pathName~58"><i>pathName
    </i><b>window names</b></a></dt>
  <dd>Returns a list whose elements are the names of all windows currently
      embedded in <i>window</i>.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~59"><a class="permalink" href="#pathName~59"><i>pathName
    </i><b>xview </b><i>option args</i></a></dt>
  <dd>This command is used to query and change the horizontal position of the
      text in the widget's window. It can take any of the following forms:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~60"><a class="permalink" href="#pathName~60"><i>pathName
    </i><b>xview</b></a></dt>
  <dd>Returns a list containing two elements. Each element is a real fraction
      between 0 and 1; together they describe the portion of the document's
      horizontal span that is visible in the window. For example, if the first
      element is .2 and the second element is .6, 20% of the text is off-screen
      to the left, the middle 40% is visible in the window, and 40% of the text
      is off-screen to the right. The fractions refer only to the lines that are
      actually visible in the window: if the lines in the window are all very
      short, so that they are entirely visible, the returned fractions will be 0
      and 1, even if there are other lines in the text that are much wider than
      the window. These are the same values passed to scrollbars via the
      <b>-xscrollcommand</b> option.</dd>
  <dt id="pathName~61"><a class="permalink" href="#pathName~61"><i>pathName
    </i><b>xview moveto</b><i> fraction</i></a></dt>
  <dd>Adjusts the view in the window so that <i>fraction</i> of the horizontal
      span of the text is off-screen to the left. <i>Fraction</i> is a fraction
      between 0 and 1.</dd>
  <dt id="pathName~62"><a class="permalink" href="#pathName~62"><i>pathName
    </i><b>xview scroll </b><i>number what</i></a></dt>
  <dd>This command shifts the view in the window left or right according to
      <i>number</i> and <i>what</i>. <i>What</i> must be <b>units</b>,
      <b>pages</b> or <b>pixels</b>. If <i>what</i> is <b>units</b> or
      <b>pages</b> then <i>number</i> must be an integer, otherwise number may
      be specified in any of the forms acceptable to <b>Tk_GetPixels</b>, such
      as &#x201C;2.0c&#x201D; or &#x201C;1i&#x201D; (the result is rounded to
      the nearest integer value. If no units are given, pixels are assumed). If
      <i>what</i> is <b>units</b>, the view adjusts left or right by
      <i>number</i> average-width characters on the display; if it is
      <b>pages</b> then the view adjusts by <i>number</i> screenfuls; if it is
      <b>pixels</b> then the view adjusts by <i>number</i> pixels. If
      <i>number</i> is negative then characters farther to the left become
      visible; if it is positive then characters farther to the right become
      visible.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="pathName~63"><a class="permalink" href="#pathName~63"><i>pathName
    </i><b>yview </b><i>?args</i>?</a></dt>
  <dd>This command is used to query and change the vertical position of the text
      in the widget's window. It can take any of the following forms:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="pathName~64"><a class="permalink" href="#pathName~64"><i>pathName
    </i><b>yview</b></a></dt>
  <dd>Returns a list containing two elements, both of which are real fractions
      between 0 and 1. The first element gives the position of the first visible
      pixel of the first character (or image, etc) in the top line in the
      window, relative to the text as a whole (0.5 means it is halfway through
      the text, for example). The second element gives the position of the first
      pixel just after the last visible one in the bottom line of the window,
      relative to the text as a whole. These are the same values passed to
      scrollbars via the <b>-yscrollcommand</b> option.</dd>
  <dt id="pathName~65"><a class="permalink" href="#pathName~65"><i>pathName
    </i><b>yview moveto</b><i> fraction</i></a></dt>
  <dd>Adjusts the view in the window so that the pixel given by <i>fraction</i>
      appears at the top of the top line of the window. <i>Fraction</i> is a
      fraction between 0 and 1; 0 indicates the first pixel of the first
      character in the text, 0.33 indicates the pixel that is one-third the way
      through the text; and so on. Values close to 1 will indicate values close
      to the last pixel in the text (1 actually refers to one pixel beyond the
      last pixel), but in such cases the widget will never scroll beyond the
      last pixel, and so a value of 1 will effectively be rounded back to
      whatever fraction ensures the last pixel is at the bottom of the window,
      and some other pixel is at the top.</dd>
  <dt id="pathName~66"><a class="permalink" href="#pathName~66"><i>pathName
    </i><b>yview scroll </b><i>number what</i></a></dt>
  <dd>This command adjust the view in the window up or down according to
      <i>number</i> and <i>what</i>. <i>What</i> must be <b>units</b>,
      <b>pages</b> or <b>pixels</b>. If <i>what</i> is <b>units</b> or
      <b>pages</b> then <i>number</i> must be an integer, otherwise number may
      be specified in any of the forms acceptable to <b>Tk_GetPixels</b>, such
      as &#x201C;2.0c&#x201D; or &#x201C;1i&#x201D; (the result is rounded to
      the nearest integer value. If no units are given, pixels are assumed). If
      <i>what</i> is <b>units</b>, the view adjusts up or down by <i>number</i>
      lines on the display; if it is <b>pages</b> then the view adjusts by
      <i>number</i> screenfuls; if it is <b>pixels</b> then the view adjusts by
      <i>number</i> pixels. If <i>number</i> is negative then earlier positions
      in the text become visible; if it is positive then later positions in the
      text become visible.</dd>
  <dt id="pathName~67"><a class="permalink" href="#pathName~67"><i>pathName
    </i><b>yview </b>?<b>-pickplace</b>? <i>index</i></a></dt>
  <dd>Changes the view in the widget's window to make <i>index</i> visible. If
      the <b>-pickplace</b> option is not specified then <i>index</i> will
      appear at the top of the window. If <b>-pickplace</b> is specified then
      the widget chooses where <i>index</i> appears in the window:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>[1]</dt>
  <dd>If <i>index</i> is already visible somewhere in the window then the
      command does nothing.</dd>
  <dt>[2]</dt>
  <dd>If <i>index</i> is only a few lines off-screen above the window then it
      will be positioned at the top of the window.</dd>
  <dt>[3]</dt>
  <dd>If <i>index</i> is only a few lines off-screen below the window then it
      will be positioned at the bottom of the window.</dd>
  <dt>[4]</dt>
  <dd>Otherwise, <i>index</i> will be centered in the window.</dd>
</dl>
<p class="Pp">The <b>-pickplace</b> option has been obsoleted by the <i>pathName
    </i><b>see</b> widget command (<i>pathName </i><b>see</b> handles both x-
    and y-motion to make a location visible, whereas the <b>-pickplace</b> mode
    only handles motion in y).</p>
</div>
<dl class="Bl-tag">
  <dt id="pathName~68"><a class="permalink" href="#pathName~68"><i>pathName
    </i><b>yview </b><i>number</i></a></dt>
  <dd>This command makes the first character on the line after the one given by
      <i>number</i> visible at the top of the window. <i>Number</i> must be an
      integer. This command used to be used for scrolling, but now it is
      obsolete.</dd>
</dl>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="BINDINGS"><a class="permalink" href="#BINDINGS">BINDINGS</a></h1>
<p class="Pp">Tk automatically creates class bindings for texts that give them
    the following default behavior. In the descriptions below,
    &#x201C;word&#x201D; is dependent on the value of the <b>tcl_wordchars</b>
    variable. See <b>tclvars</b>(n).</p>
<dl class="Bl-tag">
  <dt>[1]</dt>
  <dd>Clicking mouse button 1 positions the insertion cursor just before the
      character underneath the mouse cursor, sets the input focus to this
      widget, and clears any selection in the widget. Dragging with mouse button
      1 strokes out a selection between the insertion cursor and the character
      under the mouse.</dd>
  <dt>[2]</dt>
  <dd>Double-clicking with mouse button 1 selects the word under the mouse and
      positions the insertion cursor at the start of the word. Dragging after a
      double click will stroke out a selection consisting of whole words.</dd>
  <dt>[3]</dt>
  <dd>Triple-clicking with mouse button 1 selects the line under the mouse and
      positions the insertion cursor at the start of the line. Dragging after a
      triple click will stroke out a selection consisting of whole lines.</dd>
  <dt>[4]</dt>
  <dd>The ends of the selection can be adjusted by dragging with mouse button 1
      while the Shift key is down; this will adjust the end of the selection
      that was nearest to the mouse cursor when button 1 was pressed. If the
      button is double-clicked before dragging then the selection will be
      adjusted in units of whole words; if it is triple-clicked then the
      selection will be adjusted in units of whole lines.</dd>
  <dt>[5]</dt>
  <dd>Clicking mouse button 1 with the Control key down will reposition the
      insertion cursor without affecting the selection.</dd>
  <dt>[6]</dt>
  <dd>If any normal printing characters are typed, they are inserted at the
      point of the insertion cursor.</dd>
  <dt>[7]</dt>
  <dd>The view in the widget can be adjusted by dragging with mouse button 2. If
      mouse button 2 is clicked without moving the mouse, the selection is
      copied into the text at the position of the mouse cursor. The Insert key
      also inserts the selection, but at the position of the insertion
    cursor.</dd>
  <dt>[8]</dt>
  <dd>If the mouse is dragged out of the widget while button 1 is pressed, the
      entry will automatically scroll to make more text visible (if there is
      more text off-screen on the side where the mouse left the window).</dd>
  <dt>[9]</dt>
  <dd>The Left and Right keys move the insertion cursor one character to the
      left or right; they also clear any selection in the text. If Left or Right
      is typed with the Shift key down, then the insertion cursor moves and the
      selection is extended to include the new character. Control-Left and
      Control-Right move the insertion cursor by words, and Control-Shift-Left
      and Control-Shift-Right move the insertion cursor by words and also extend
      the selection. Control-b and Control-f behave the same as Left and Right,
      respectively. Meta-b and Meta-f behave the same as Control-Left and
      Control-Right, respectively.</dd>
  <dt>[10]</dt>
  <dd>The Up and Down keys move the insertion cursor one line up or down and
      clear any selection in the text. If Up or Right is typed with the Shift
      key down, then the insertion cursor moves and the selection is extended to
      include the new character. Control-Up and Control-Down move the insertion
      cursor by paragraphs (groups of lines separated by blank lines), and
      Control-Shift-Up and Control-Shift-Down move the insertion cursor by
      paragraphs and also extend the selection. Control-p and Control-n behave
      the same as Up and Down, respectively.</dd>
  <dt>[11]</dt>
  <dd>The Next and Prior keys move the insertion cursor forward or backwards by
      one screenful and clear any selection in the text. If the Shift key is
      held down while Next or Prior is typed, then the selection is extended to
      include the new character.</dd>
  <dt>[12]</dt>
  <dd>Control-Next and Control-Prior scroll the view right or left by one page
      without moving the insertion cursor or affecting the selection.</dd>
  <dt>[13]</dt>
  <dd>Home and Control-a move the insertion cursor to the beginning of its
      display line and clear any selection in the widget. Shift-Home moves the
      insertion cursor to the beginning of the display line and also extends the
      selection to that point.</dd>
  <dt>[14]</dt>
  <dd>End and Control-e move the insertion cursor to the end of the display line
      and clear any selection in the widget. Shift-End moves the cursor to the
      end of the display line and extends the selection to that point.</dd>
  <dt>[15]</dt>
  <dd>Control-Home and Meta-&lt; move the insertion cursor to the beginning of
      the text and clear any selection in the widget. Control-Shift-Home moves
      the insertion cursor to the beginning of the text and also extends the
      selection to that point.</dd>
  <dt>[16]</dt>
  <dd>Control-End and Meta-&gt; move the insertion cursor to the end of the text
      and clear any selection in the widget. Control-Shift-End moves the cursor
      to the end of the text and extends the selection to that point.</dd>
  <dt>[17]</dt>
  <dd>The Select key and Control-Space set the selection anchor to the position
      of the insertion cursor. They do not affect the current selection.
      Shift-Select and Control-Shift-Space adjust the selection to the current
      position of the insertion cursor, selecting from the anchor to the
      insertion cursor if there was not any selection previously.</dd>
  <dt>[18]</dt>
  <dd>Control-/ selects the entire contents of the widget.</dd>
  <dt>[19]</dt>
  <dd>Control-\ clears any selection in the widget.</dd>
  <dt>[20]</dt>
  <dd>The F16 key (labelled Copy on many Sun workstations) or Meta-w copies the
      selection in the widget to the clipboard, if there is a selection. This
      action is carried out by the command <b>tk_textCopy</b>.</dd>
  <dt>[21]</dt>
  <dd>The F20 key (labelled Cut on many Sun workstations) or Control-w copies
      the selection in the widget to the clipboard and deletes the selection.
      This action is carried out by the command <b>tk_textCut</b>. If there is
      no selection in the widget then these keys have no effect.</dd>
  <dt>[22]</dt>
  <dd>The F18 key (labelled Paste on many Sun workstations) or Control-y inserts
      the contents of the clipboard at the position of the insertion cursor.
      This action is carried out by the command <b>tk_textPaste</b>.</dd>
  <dt>[23]</dt>
  <dd>The Delete key deletes the selection, if there is one in the widget. If
      there is no selection, it deletes the character to the right of the
      insertion cursor.</dd>
  <dt>[24]</dt>
  <dd>Backspace and Control-h delete the selection, if there is one in the
      widget. If there is no selection, they delete the character to the left of
      the insertion cursor.</dd>
  <dt>[25]</dt>
  <dd>Control-d deletes the character to the right of the insertion cursor.</dd>
  <dt>[26]</dt>
  <dd>Meta-d deletes the word to the right of the insertion cursor.</dd>
  <dt>[27]</dt>
  <dd>Control-k deletes from the insertion cursor to the end of its line; if the
      insertion cursor is already at the end of a line, then Control-k deletes
      the newline character.</dd>
  <dt>[28]</dt>
  <dd>Control-o opens a new line by inserting a newline character in front of
      the insertion cursor without moving the insertion cursor.</dd>
  <dt>[29]</dt>
  <dd>Meta-backspace and Meta-Delete delete the word to the left of the
      insertion cursor.</dd>
  <dt>[30]</dt>
  <dd>Control-x deletes whatever is selected in the text widget after copying it
      to the clipboard.</dd>
  <dt>[31]</dt>
  <dd>Control-t reverses the order of the two characters to the right of the
      insertion cursor.</dd>
  <dt>[32]</dt>
  <dd>Control-z (and Control-underscore on UNIX when <b>tk_strictMotif</b> is
      true) undoes the last edit action if the <b>-undo</b> option is true. Does
      nothing otherwise.</dd>
  <dt>[33]</dt>
  <dd>Control-Z (or Control-y on Windows) reapplies the last undone edit action
      if the <b>-undo</b> option is true. Does nothing otherwise.</dd>
</dl>
<p class="Pp">If the widget is disabled using the <b>-state</b> option, then its
    view can still be adjusted and text can still be selected, but no insertion
    cursor will be displayed and no text modifications will take place.</p>
<p class="Pp">The behavior of texts can be changed by defining new bindings for
    individual widgets or by redefining the class bindings.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KNOWN_ISSUES"><a class="permalink" href="#KNOWN_ISSUES">KNOWN
  ISSUES</a></h1>
<section class="Ss">
<h2 class="Ss" id="ISSUES_CONCERNING_CHARS_AND_INDICES"><a class="permalink" href="#ISSUES_CONCERNING_CHARS_AND_INDICES">ISSUES
  CONCERNING CHARS AND INDICES</a></h2>
<p class="Pp">Before Tk 8.5, the widget used the string &#x201C;chars&#x201D; to
    refer to index positions (which included characters, embedded windows and
    embedded images). As of Tk 8.5 the text widget deals separately and
    correctly with &#x201C;chars&#x201D; and &#x201C;indices&#x201D;. For
    backwards compatibility, however, the index modifiers &#x201C;+N
    chars&#x201D; and &#x201C;-N chars&#x201D; continue to refer to indices. One
    must use any of the full forms &#x201C;+N any chars&#x201D; or &#x201C;-N
    any chars&#x201D; etc. to refer to actual character indices. This confusion
    may be fixed in a future release by making the widget correctly interpret
    &#x201C;+N chars&#x201D; as a synonym for &#x201C;+N any chars&#x201D;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="PERFORMANCE_ISSUES"><a class="permalink" href="#PERFORMANCE_ISSUES">PERFORMANCE
  ISSUES</a></h2>
<p class="Pp">Text widgets should run efficiently under a variety of conditions.
    The text widget uses about 2-3 bytes of main memory for each byte of text,
    so texts containing a megabyte or more should be practical on most
    workstations. Text is represented internally with a modified B-tree
    structure that makes operations relatively efficient even with large texts.
    Tags are included in the B-tree structure in a way that allows tags to span
    large ranges or have many disjoint smaller ranges without loss of
    efficiency. Marks are also implemented in a way that allows large numbers of
    marks. In most cases it is fine to have large numbers of unique tags, or a
    tag that has many distinct ranges.</p>
<p class="Pp">One performance problem can arise if you have hundreds or
    thousands of different tags that all have the following characteristics: the
    first and last ranges of each tag are near the beginning and end of the
    text, respectively, or a single tag range covers most of the text widget.
    The cost of adding and deleting tags like this is proportional to the number
    of other tags with the same properties. In contrast, there is no problem
    with having thousands of distinct tags if their overall ranges are localized
    and spread uniformly throughout the text.</p>
<p class="Pp">Very long text lines can be expensive, especially if they have
    many marks and tags within them.</p>
<p class="Pp">The display line with the insert cursor is redrawn each time the
    cursor blinks, which causes a steady stream of graphics traffic. Set the
    <b>insertOffTime</b> attribute to 0 avoid this.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="KNOWN_BUGS"><a class="permalink" href="#KNOWN_BUGS">KNOWN
  BUGS</a></h2>
<p class="Pp">The <i>pathName </i><b>search -regexp</b> sub-command attempts to
    perform sophisticated regexp matching across multiple lines in an efficient
    fashion (since Tk 8.5), examining each line individually, and then in small
    groups of lines, whether searching forwards or backwards. Under certain
    conditions the search result might differ from that obtained by applying the
    same regexp to the entire text from the widget in one go. For example, when
    searching with a greedy regexp, the widget will continue to attempt to add
    extra lines to the match as long as one of two conditions are true: either
    Tcl's regexp library returns a code to indicate a longer match is possible
    (but there are known bugs in Tcl which mean this code is not always
    correctly returned); or if each extra line added results in at least a
    partial match with the pattern. This means in the case where the first extra
    line added results in no match and Tcl's regexp system returns the incorrect
    code and adding a second extra line would actually match, the text widget
    will return the wrong result. In practice this is a rare problem, but it can
    occur, for example:</p>
<div class="Bd-indent">
<pre>
pack [text .t]</pre>
</div>
will not find a match when one exists of 19 characters starting from the first
  &#x201C;b&#x201D;.
<p class="Pp">Whenever one possible match is fully enclosed in another, the
    search command will attempt to ensure only the larger match is returned.
    When performing backwards regexp searches it is possible that Tcl will not
    always achieve this, in the case where a match is preceded by one or more
    short, non-overlapping matches, all of which are preceded by a large match
    which actually encompasses all of them. The search algorithm used by the
    widget does not look back arbitrarily far for a possible match which might
    cover large portions of the widget. For example:</p>
<div class="Bd-indent">
<pre>
pack [text .t]</pre>
</div>
matches at &#x201C;5.0&#x201D; when a true greedy match would match at
  &#x201C;1.0&#x201D;. Similarly if we add <b>-all</b> to this case, it matches
  at all of &#x201C;5.0&#x201D;, &#x201C;4.0&#x201D;, &#x201C;3.0&#x201D; and
  &#x201C;1.0&#x201D;, when really it should only match at &#x201C;1.0&#x201D;
  since that match encloses all the others.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">entry(n), scrollbar(n)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">text, widget, tkvars</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">8.5</td>
    <td class="foot-os">Tk</td>
  </tr>
</table>
</body>
</html>
