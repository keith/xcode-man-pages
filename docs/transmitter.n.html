<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Generated from file '/Library/Caches/com.apple.xbs/Sources/tcl/tcl-128/tcl_ext/tcllib/tcllib/modules/transfer/transmitter.man' by tcllib/doctools with format 'nroff'
   Copyright (c) 2006-2009 Andreas Kupries <andreas_kupries@users.sourceforge.net>
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
  	# Start an argument description
  .b
  	# define tabbing values for .AP
  
  	# BS - start boxed text
  	# ^y = starting y location
  	# ^b = 1
  	# BE - end boxed text (draw box now)
  	Draw four-sided box normally, but don't draw top of
  	box if the box started on an earlier page.
  	# VS - start vertical sidebar
  	# ^Y = starting y location
  	# ^v = 1 (for troff;  for nroff this doesn't matter)
  	# VE - end of vertical sidebar
  	# Special macro to handle page bottom:  finish off current
  	# box/sidebar if in box/sidebar mode, then invoked standard
  	# page bottom macro.
  	Draw three-sided box if this is the box's first page,
  	draw two sides but no top otherwise.
  	# DS - begin display
  	# DE - end display
  	# SO - start of list of standard options
  	# SE - end of list of standard options
  	# OP - start of full description for a single option
  	# CS - begin code excerpt
  	# CE - end code excerpt
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>transfer::transmitter(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">transfer::transmitter(n)</td>
    <td class="head-vol">Data transfer facilities</td>
    <td class="head-rtitle">transfer::transmitter(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>

</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
transfer::transmitter - Data source
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
package require <b>Tcl 8.4</b>
<p class="Pp">package require <b>snit ?1.0?</b></p>
<p class="Pp">package require <b>transfer::copy ?0.2?</b></p>
<p class="Pp">package require <b>transfer::data::source ?0.2?</b></p>
<p class="Pp">package require <b>transfer::connect ?0.2?</b></p>
<p class="Pp">package require <b>transfer::transmitter ?0.2?</b></p>
<p class="Pp"><b>transfer::transmitter</b> <i>objectName</i>
  ?<i>options</i>...?</p>
<p class="Pp"><b>transfer::transmitter</b> <b>stream channel</b> <i>chan</i>
    <i>host</i> <i>port</i> ?<i>arg</i>...?</p>
<p class="Pp"><b>transfer::transmitter</b> <b>stream file</b> <i>path</i>
    <i>host</i> <i>port</i> ?<i>arg</i>...?</p>
<p class="Pp"><i>objectName</i> <b>method</b> ?<i>arg arg ...</i>?</p>
<p class="Pp"><i>objectName</i> <b>destroy</b></p>
<p class="Pp"><i>objectName</i> <b>start</b></p>
<p class="Pp"><i>objectName</i> <b>busy</b></p>
<p class="Pp"></p>
<pre>

</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This package pulls data sources and connection setup together into a combined
  object for the transmission of information over a socket. These objects
  understand all the options from objects created by the packages
  <b>transfer::data::source</b> and <b>transfer::connect</b>.
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<section class="Ss">
<h2 class="Ss" id="PACKAGE_COMMANDS"><a class="permalink" href="#PACKAGE_COMMANDS">PACKAGE
  COMMANDS</a></h2>
<dl class="Bl-tag">
  <dt><b>transfer::transmitter</b> <i>objectName</i> ?<i>options</i>...?</dt>
  <dd>This command creates a new transmitter object with an associated Tcl
      command whose name is <i>objectName</i>. This <i>object</i> command is
      explained in full detail in the sections <b>Object command</b> and
      <b>Object methods</b>. The set of supported <i>options</i> is explained in
      section <b>Options</b>.
    <p class="Pp">The object command will be created under the current namespace
        if the <i>objectName</i> is not fully qualified, and in the specified
        namespace otherwise. The fully qualified name of the object command is
        returned as the result of the command.</p>
  </dd>
  <dt><b>transfer::transmitter</b> <b>stream channel</b> <i>chan</i> <i>host</i>
    <i>port</i> ?<i>arg</i>...?</dt>
  <dd>This method creates a fire-and-forget transfer for the data contained in
      the channel <i>chan</i>, starting at the current seek location. The
      channel is configured to use binary translation and encoding for the
      transfer. The channel is automatically closed when the transfer has
      completed.
    <p class="Pp">If both <i>host</i> and <i>port</i> are provided an
        <b>active</b> connection to the destination is made. If only a
        <i>port</i> is specified (with <i>host</i> the empty string) then a
        <b>passive</b> connection is made instead.</p>
    <p class="Pp">Any arguments after the port are treated as options and are
        used to configure the internal transmitter object. See the section
        <b>Options</b> for a list of the supported options and their meaning.
        <i>Note</i> however that the signature of the command prefix specified
        for the <b>-command</b> callback differs from the signature for the same
        option of the transmitter object. This callback is only given the number
        of bytes and transfered, and possibly an error message. No reference to
        the internally used transmitter object is made.</p>
    <p class="Pp">The result returned by the command is the empty string if it
        was set to make an <i>active</i> connection, and the port the internal
        transmitter object is listening on otherwise, i.e when it is configured
        to connect <i>passive</i>ly. See also the package
        <b>transfer::connect</b> and the description of the method
        <b>connect</b> for where this behaviour comes from.</p>
  </dd>
  <dt><b>transfer::transmitter</b> <b>stream file</b> <i>path</i> <i>host</i>
    <i>port</i> ?<i>arg</i>...?</dt>
  <dd>This method is like <b>stream channel</b>, except that the data contained
      in the file <i>path</i> is transfered.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="OBJECT_COMMAND"><a class="permalink" href="#OBJECT_COMMAND">OBJECT
  COMMAND</a></h2>
All objects created by the <b>::transfer::transmitter</b> command have the
  following general form:
<dl class="Bl-tag">
  <dt><i>objectName</i> <b>method</b> ?<i>arg arg ...</i>?</dt>
  <dd>The method <b>method</b> and its <i>arg</i>'uments determine the exact
      behavior of the command. See section <b>Object methods</b> for the
      detailed specifications.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="OBJECT_METHODS"><a class="permalink" href="#OBJECT_METHODS">OBJECT
  METHODS</a></h2>
<dl class="Bl-tag">
  <dt><i>objectName</i> <b>destroy</b></dt>
  <dd>This method destroys the object. Doing so while a transmission is in
      progress will cause errors later on, when the transmission completes and
      tries to access the now missing data structures of the destroyed
    object.</dd>
  <dt><i>objectName</i> <b>start</b></dt>
  <dd>This method initiates the data transmission, setting up the connection
      first and then copying the information. The method will throw an error if
      a transmission is already/still in progress. I.e. it is not possible to
      run two transmissions in parallel on a single object, only in sequence.
      Multiple transmitter objects are needed to manage parallel transfers, one
      per transmission. Errors will also be thrown if the configuration of the
      data source is invalid, or if no completion callback was specified.
    <p class="Pp">The result returned by the method is the empty string for an
        object configured to make an <i>active</i> connection, and the port the
        object is listening on otherwise, i.e when it is configured to connect
        <i>passive</i>ly. See also the package <b>transfer::connect</b> and the
        description of the method <b>connect</b> for where this behaviour comes
        from.</p>
  </dd>
  <dt><i>objectName</i> <b>busy</b></dt>
  <dd>This method returns a boolean value telling us whether a transmission is
      in progress (<b>True</b>), or not (<b>False</b>).</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h2>
All transmitter objects support the union of the options supported by their
  connect and data source components, plus two of their own. See also the
  documentation for the packages <b>transfer::data::source</b> and
  <b>transfer::connect</b>.
<dl class="Bl-tag">
  <dt><b>-blocksize</b> <i>int</i></dt>
  <dd>This option specifies the size of the chunks to be transmitted in one
      block. Usage is optional, its default value is <b>1024</b>.</dd>
  <dt><b>-command</b> <i>cmdprefix</i></dt>
  <dd>This option specifies the command to invoke when the transmission of the
      information has been completed. The arguments given to this command are
      the same as given to the completion callback of the command
      <b>transfer::copy::do</b> provided by the package
    <b>transfer::copy</b>.</dd>
  <dt><b>-mode</b> <i>mode</i></dt>
  <dd>This option specifies the mode the object is in. It is optional and
      defaults to <b>active</b> mode. The two possible modes are:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>active</b></dt>
  <dd>In this mode the two options <b>-host</b> and <b>-port</b> are relevant
      and specify the host and TCP port the object has to connect to. The host
      is given by either name or IP address.</dd>
  <dt><b>passive</b></dt>
  <dd>In this mode the option <b>-host</b> has no relevance and is ignored
      should it be configured. The only option the object needs is <b>-port</b>,
      and it specifies the TCP port on which the listening socket is opened to
      await the connection from the partner.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><b>-host</b> <i>hostname-or-ipaddr</i></dt>
  <dd>This option specifies the host to connect to in <i>active</i> mode, either
      by name or ip-address. An object configured for <i>passive</i> mode
      ignores this option.</dd>
  <dt><b>-port</b> <i>int</i></dt>
  <dd>For <i>active</i> mode this option specifies the port the object is
      expected to connect to. For <i>passive</i> mode however it is the port
      where the object creates the listening socket waiting for a connection. It
      defaults to <b>0</b>, which allows the OS to choose the actual port to
      listen on.</dd>
  <dt><b>-socketcmd</b> <i>command</i></dt>
  <dd>This option allows the user to specify which command to use to open a
      socket. The default is to use the builtin <b>::socket</b>. Any compatible
      with that command is allowed.
    <p class="Pp">The envisioned main use is the specfication of
        <b>tls::socket</b>. I.e. this option allows the creation of secure
        transfer channels, without making this package explicitly dependent on
        the <b>tls</b> package.</p>
    <p class="Pp">See also section <b>Secure connections</b>.</p>
  </dd>
  <dt><b>-encoding</b> encodingname</dt>
  <dd></dd>
  <dt><b>-eofchar</b> eofspec</dt>
  <dd></dd>
  <dt><b>-translation</b> transspec</dt>
  <dd>These options are the same as are recognized by the builtin command
      <b>fconfigure</b>. They provide the configuration to be set for the
      channel between the two partners after it has been established, but before
      the callback is invoked (See method <b>connect</b>).</dd>
  <dt><b>-string</b> <i>text</i></dt>
  <dd>This option specifies that the source of the data is an immediate string,
      and its associated argument contains the string in question.</dd>
  <dt><b>-channel</b> <i>handle</i></dt>
  <dd>This option specifies that the source of the data is a channel, and its
      associated argument is the handle of the channel containing the data.</dd>
  <dt><b>-file</b> <i>path</i></dt>
  <dd>This option specifies that the source of the data is a file, and its
      associated argument is the path of the file containing the data.</dd>
  <dt><b>-variable</b> <i>varname</i></dt>
  <dd>This option specifies that the source of the data is a string stored in a
      variable, and its associated argument contains the name of the variable in
      question. The variable is assumed to be global or namespaced, anchored at
      the global namespace.</dd>
  <dt><b>-size</b> <i>int</i></dt>
  <dd>This option specifies the size of the data transfer. It is optional and
      defaults to -1. This value, and any other value less than zero signals to
      transfer all the data from the source.</dd>
  <dt><b>-progress</b> <i>command</i></dt>
  <dd>This option, if specified, defines a command to be invoked for each chunk
      of bytes transmitted, allowing the user to monitor the progress of the
      transmission of the data. The callback is always invoked with one
      additional argument, the number of bytes transmitted so far.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SECURE_CONNECTIONS"><a class="permalink" href="#SECURE_CONNECTIONS">SECURE
  CONNECTIONS</a></h1>
One way to secure connections made by objects of this package is to require the
  package <b>tls</b> and then configure the option <b>-socketcmd</b> to force
  the use of command <b>tls::socket</b> to open the socket.
<pre>
    # Load and initialize tls
    package require tls
    tls::init -cafile /path/to/ca/cert -keyfile ...
    # Create a connector with secure socket setup,
    transfer::transmitter T -socketcmd tls::socket ...
    ...
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
This document, and the package it describes, will undoubtedly contain bugs and
  other problems. Please report such in the category <i>transfer</i> of the
  <i>Tcllib SF Trackers</i> [http://sourceforge.net/tracker/?group_id=12883].
  Please also report any ideas for enhancements you may have for either package
  and/or documentation.
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
channel, copy, data source, secure, ssl, tls, transfer, transmitter
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
Transfer module
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>
Copyright (c) 2006-2009 Andreas Kupries &lt;andreas_kupries@users.sourceforge.net&gt;
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">0.2</td>
    <td class="foot-os">transfer</td>
  </tr>
</table>
</body>
</html>
