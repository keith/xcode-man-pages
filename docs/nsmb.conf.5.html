<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>NSMB.CONF(5)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">NSMB.CONF(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">NSMB.CONF(5)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">nsmb.conf</code> &#x2014;
    <span class="Nd">configuration file for SMB requests</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">nsmb.conf</code> file contains information
    about the computers and shares or mount points for the SMB network
  protocol.</p>
<p class="Pp">The configuration hierarchy is made up of several sections, each
    section containing a few or several lines of parameters and their assigned
    values. Each of these sections must begin with a section name enclosed
    within square brackets, similar to:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent">[<var class="Ar">section_name</var>]</div>
<p class="Pp">The end of each section is marked by either the start of a new
    section, or by the abrupt ending of the file, commonly referred to as the
    EOF. Each section may contain zero or more parameters such as:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent">[<var class="Ar">section_name</var>]</div>
<div class="Bd
  Bd-indent"><var class="Ar">key</var>=<var class="Ar">value</var></div>
<p class="Pp">where <var class="Ar">key</var> represents a parameter name, and
    <var class="Ar">value</var> would be the parameter's assigned value.</p>
<p class="Pp">The SMB library uses the following information for section
  names:</p>
<p class="Pp"></p>
<dl class="Bl-tag Bl-compact">
  <dt id="A)"><a class="permalink" href="#A)"><code class="Ic">A)</code></a></dt>
  <dd>[<code class="Li">default</code>]</dd>
  <dt id="B)"><a class="permalink" href="#B)"><code class="Ic">B)</code></a></dt>
  <dd>[<var class="Ar">SERVER</var>]</dd>
  <dt id="C)"><a class="permalink" href="#C)"><code class="Ic">C)</code></a></dt>
  <dd>[<var class="Ar">SERVER</var>:<var class="Ar">SHARE</var>]</dd>
</dl>
<p class="Pp">Possible keywords may include:</p>
<table class="Bl-column">
  <tr id="Keyword">
    <td><a class="permalink" href="#Keyword"><b class="Sy">Keyword</b></a></td>
    <td>Section</td>
    <td>Default Comment</td>
  </tr>
  <tr>
    <td><b class="Sy"></b></td>
    <td>A B C Values</td>
  </tr>
  <tr id="addr">
    <td><var class="Va">addr</var></td>
    <td>- + -</td>
    <td></td>
    <td>DNS name or IP address of server</td>
  </tr>
  <tr id="nbtimeout">
    <td><var class="Va">nbtimeout</var></td>
    <td>+ + -</td>
    <td>1s</td>
    <td>Timeout for resolving a NetBIOS name</td>
  </tr>
  <tr id="minauth">
    <td><var class="Va">minauth</var></td>
    <td>+ + -</td>
    <td>NTLMv2</td>
    <td>Minimum authentication level allowed</td>
  </tr>
  <tr id="port445">
    <td><var class="Va">port445</var></td>
    <td>+ + -</td>
    <td>both</td>
    <td>How to use SMB TCP/UDP ports</td>
  </tr>
  <tr id="streams">
    <td><var class="Va">streams</var></td>
    <td>+ + +</td>
    <td>yes</td>
    <td>Use NTFS Streams if server supported</td>
  </tr>
  <tr id="soft">
    <td><var class="Va">soft</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Force all mounts to be soft</td>
  </tr>
  <tr id="notify_off">
    <td><var class="Va">notify_off</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Turn off using notifications</td>
  </tr>
  <tr id="kloglevel">
    <td><var class="Va">kloglevel</var></td>
    <td>+ - -</td>
    <td>0</td>
    <td>Turn on smb kernel logging</td>
  </tr>
  <tr id="protocol_vers_map">
    <td><var class="Va">protocol_vers_map</var></td>
    <td>+ + -</td>
    <td>7</td>
    <td>Bitmap of SMB Versions that are enabled</td>
  </tr>
  <tr id="signing_required">
    <td><var class="Va">signing_required</var></td>
    <td>+ + -</td>
    <td>no</td>
    <td>Turn on smb client signing</td>
  </tr>
  <tr id="signing_alg_map">
    <td><var class="Va">signing_alg_map</var></td>
    <td>+ + -</td>
    <td>3</td>
    <td>Bitmap of SMB 3.1.1 signing algorithms that are enabled</td>
  </tr>
  <tr id="signing_req_vers">
    <td><var class="Va">signing_req_vers</var></td>
    <td>+ + -</td>
    <td>6</td>
    <td>Bitmap of SMB Versions that have signing required</td>
  </tr>
  <tr id="validate_neg_off">
    <td><var class="Va">validate_neg_off</var></td>
    <td>+ + -</td>
    <td>no</td>
    <td>Turn off using validate negotiate</td>
  </tr>
  <tr id="max_resp_timeout">
    <td><var class="Va">max_resp_timeout</var></td>
    <td>+ + -</td>
    <td>30s</td>
    <td>Max time to wait for any response from server</td>
  </tr>
  <tr id="submounts_off">
    <td><var class="Va">submounts_off</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Turn off using submounts</td>
  </tr>
  <tr id="dir_cache_async_cnt">
    <td><var class="Va">dir_cache_async_cnt</var></td>
    <td>+ + -</td>
    <td>10</td>
    <td>Max async queries to fill dir cache</td>
  </tr>
  <tr id="dir_cache_max">
    <td><var class="Va">dir_cache_max</var></td>
    <td>+ + -</td>
    <td>60s</td>
    <td>Max time to cache for a dir</td>
  </tr>
  <tr id="dir_cache_min">
    <td><var class="Va">dir_cache_min</var></td>
    <td>+ + -</td>
    <td>30s</td>
    <td>Min time to cache for a dir</td>
  </tr>
  <tr id="max_dirs_cached">
    <td><var class="Va">max_dirs_cached</var></td>
    <td>+ + -</td>
    <td>Varies</td>
    <td>Varies from 200-300 depending on RAM amount</td>
  </tr>
  <tr id="max_cached_per_dir">
    <td><var class="Va">max_cached_per_dir</var></td>
    <td>+ + -</td>
    <td>Varies</td>
    <td>Varies from 2000-10000 depending on RAM amount</td>
  </tr>
  <tr id="netBIOS_before_DNS">
    <td><var class="Va">netBIOS_before_DNS</var></td>
    <td>+ + +</td>
    <td>no</td>
    <td>Try NetBIOS resolution before DNS resolution</td>
  </tr>
  <tr id="mc_on">
    <td><var class="Va">mc_on</var></td>
    <td>+ + -</td>
    <td>yes</td>
    <td>Turn on SMB multichannel (allow more than one channel per session)</td>
  </tr>
  <tr id="mc_max_channels">
    <td><var class="Va">mc_max_channels</var></td>
    <td>+ + -</td>
    <td>9</td>
    <td>Max channels between client and server</td>
  </tr>
  <tr id="mc_srvr_rss_channels">
    <td><var class="Va">mc_srvr_rss_channels</var></td>
    <td>+ + -</td>
    <td>4</td>
    <td>Max RSS channels per server interface</td>
  </tr>
  <tr id="mc_clnt_rss_channels">
    <td><var class="Va">mc_clnt_rss_channels</var></td>
    <td>+ + -</td>
    <td>4</td>
    <td>Max RSS channels per client interface</td>
  </tr>
  <tr id="mc_prefer_wired">
    <td><var class="Va">mc_prefer_wired</var></td>
    <td>+ + -</td>
    <td>no</td>
    <td>Prefer wired NIC's over wireless in multichannel mode</td>
  </tr>
  <tr id="encrypt_cipher_map">
    <td><var class="Va">encrypt_cipher_map</var></td>
    <td>+ + -</td>
    <td>15</td>
    <td>Bitmap of SMB 3.1.1 encryption algorithms that are enabled</td>
  </tr>
  <tr id="force_sess_encrypt">
    <td><var class="Va">force_sess_encrypt</var></td>
    <td>+ + -</td>
    <td>no</td>
    <td>Force session encryption</td>
  </tr>
  <tr id="force_share_encrypt">
    <td><var class="Va">force_share_encrypt</var></td>
    <td>+ + -</td>
    <td>no</td>
    <td>Force share encryption</td>
  </tr>
  <tr id="connect_to_sharedisk">
    <td><var class="Va">connect_to_sharedisk</var></td>
    <td>+ - -</td>
    <td>yes</td>
    <td>Allow connection to a server in disk share mode</td>
  </tr>
  <tr id="comp_algorithms_map">
    <td><var class="Va">comp_algorithms_map</var></td>
    <td>+ + -</td>
    <td>0</td>
    <td>Bitmap of compression algorithms that are enabled</td>
  </tr>
  <tr id="comp_chaining_disable">
    <td><var class="Va">comp_chaining_disable</var></td>
    <td>+ + -</td>
    <td>no</td>
    <td>Disable chained compression</td>
  </tr>
  <tr id="comp_io_threshold">
    <td><var class="Va">comp_io_threshold</var></td>
    <td>+ + -</td>
    <td>4096</td>
    <td>Min IO size to use compression (4096 - 1048576)</td>
  </tr>
  <tr id="comp_chunk_len">
    <td><var class="Va">comp_chunk_len</var></td>
    <td>+ + -</td>
    <td>256KB</td>
    <td>Chained write chunk size for processing</td>
  </tr>
  <tr id="comp_max_fail_cnt">
    <td><var class="Va">comp_max_fail_cnt</var></td>
    <td>+ + -</td>
    <td>5</td>
    <td>Max times write compression can fail before disabling for that file</td>
  </tr>
  <tr id="comp_exclude_list">
    <td><var class="Va">comp_exclude_list</var></td>
    <td>+ + -</td>
    <td></td>
    <td>Comma separated list of file extensions to not compress</td>
  </tr>
  <tr id="comp_include_list">
    <td><var class="Va">comp_include_list</var></td>
    <td>+ + -</td>
    <td></td>
    <td>Comma seperated list of file extensions to override default exclusion
      list</td>
  </tr>
</table>
<p class="Pp">The minimum authentication level can be one of:</p>
<dl class="Bl-tag">
  <dt id="kerberos"><a class="permalink" href="#kerberos"><code class="Li">kerberos</code></a></dt>
  <dd>Kerberos - NTLMv2, NTLM, LM, and plain-text password authentication are
      not attempted.</dd>
  <dt id="ntlmv2"><a class="permalink" href="#ntlmv2"><code class="Li">ntlmv2</code></a></dt>
  <dd>NTLMv2 - Kerberos authentication is attempted if a Kerberos token can be
      obtained, otherwise NTLMv2 authentication is attempted; if the server
      doesn't support encrypted passwords, the authentication fails.</dd>
  <dt id="ntlm"><a class="permalink" href="#ntlm"><code class="Li">ntlm</code></a></dt>
  <dd>NTLM - Kerberos authentication is attempted if a Kerberos token can be
      obtained, otherwise NTLMv2 authentication is attempted and, if that fails,
      NTLMv1 authentication is attempted, with zeroes in the LM hash; if the
      server doesn't support encrypted passwords, the authentication fails.</dd>
  <dt id="lm"><a class="permalink" href="#lm"><code class="Li">lm</code></a></dt>
  <dd>LM - Kerberos authentication is attempted if a Kerberos token can be
      obtained, otherwise NTLMv2 authentication is attempted and, if that fails,
      NTLMv1 authentication is attempted, including the LM hash; if the server
      doesn't support encrypted passwords, the authentication fails.</dd>
  <dt id="none"><a class="permalink" href="#none"><code class="Li">none</code></a></dt>
  <dd>none - The same as <code class="Li">lm</code> except that, if the server
      doesn't support encrypted passwords, plain-text passwords are used.
      Required for servers that don't support extended security.</dd>
</dl>
<p class="Pp">(Note: &quot;NetBIOS&quot; as used below means &quot;NetBIOS over
    TCP/IP.&quot;)</p>
<p class="Pp">&quot;How to use SMB TCP/UDP ports&quot; can be one of:</p>
<dl class="Bl-tag">
  <dt id="both"><a class="permalink" href="#both"><code class="Li">both</code></a></dt>
  <dd>Attempt to connect via port 445. If that is unsuccessful, try to connect
      via NetBIOS.</dd>
  <dt id="netbios_only"><a class="permalink" href="#netbios_only"><code class="Li">netbios_only</code></a></dt>
  <dd>Do not attempt to connect via port 445.</dd>
  <dt id="no_netbios"><a class="permalink" href="#no_netbios"><code class="Li">no_netbios</code></a></dt>
  <dd>Attempt to connect via port 445. If that is unsuccessful, do not try to
      connect via NetBIOS.</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB Versions that are enabled&quot; can be one
  of:</p>
<dl class="Bl-tag">
  <dt><code class="Li">7 == 0111</code></dt>
  <dd>SMB 1/2/3 should be enabled</dd>
  <dt><code class="Li">6 == 0110</code></dt>
  <dd>SMB 2/3 should be enabled</dd>
  <dt><code class="Li">4 == 0100</code></dt>
  <dd>SMB 3 should be enabled</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB Versions that have signing required&quot; can
    be one of:</p>
<dl class="Bl-tag">
  <dt id="7"><a class="permalink" href="#7"><code class="Li">7</code></a></dt>
  <dd>Signing required for SMB 1/2/3.</dd>
  <dt id="6"><a class="permalink" href="#6"><code class="Li">6</code></a></dt>
  <dd>Signing required for SMB 2/3.</dd>
  <dt id="4"><a class="permalink" href="#4"><code class="Li">4</code></a></dt>
  <dd>Signing required for SMB 3.</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB 3.1.1 signing algorithms that are
    enabled&quot; can be one of:</p>
<dl class="Bl-tag">
  <dt id="3"><a class="permalink" href="#3"><code class="Li">3 ==
    0011</code></a></dt>
  <dd>AES-128-GMAC/AES-128-CMAC should be enabled</dd>
  <dt id="1"><a class="permalink" href="#1"><code class="Li">1 ==
    0001</code></a></dt>
  <dd>AES-128-CMAC should be enabled</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB 3.1.1 encryption algorithms that are
    enabled&quot; can be one of:</p>
<dl class="Bl-tag">
  <dt id="15"><a class="permalink" href="#15"><code class="Li">15 ==
    1111</code></a></dt>
  <dd>AES-256-GCM/AES-256-CCM/AES-128-GCM/AES-128-CCM should be enabled</dd>
  <dt><code class="Li">7 == 0111</code></dt>
  <dd>AES-256-CCM/AES-128-GCM/AES-128-CCM should be enabled</dd>
  <dt id="3~2"><a class="permalink" href="#3~2"><code class="Li">3 ==
    0011</code></a></dt>
  <dd>AES-128-GCM/AES-128-CCM should be enabled</dd>
  <dt id="1~2"><a class="permalink" href="#1~2"><code class="Li">1 ==
    0001</code></a></dt>
  <dd>AES-128-CCM should be enabled</dd>
</dl>
<p class="Pp">&quot;Bitmap of SMB 3.1.1 compressions algorithms that are
    enabled&quot; can be any combination of (set to 0 to disable
  compression):</p>
<dl class="Bl-tag">
  <dt id="8"><a class="permalink" href="#8"><code class="Li">8 ==
    1000</code></a></dt>
  <dd>PatternV1 should be enabled (only valid if chained compressions are
      supported)</dd>
  <dt><code class="Li">4 == 0100</code></dt>
  <dd>LZ77+Huffman should be enabled.</dd>
  <dt id="2"><a class="permalink" href="#2"><code class="Li">2 ==
    0010</code></a></dt>
  <dd>LZ77 should be enabled</dd>
  <dt id="1~3"><a class="permalink" href="#1~3"><code class="Li">1 ==
    0001</code></a></dt>
  <dd>LZNT1 should be enabled</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa">/etc/nsmb.conf</span></dt>
  <dd>The global configuration file.</dd>
  <dt><span class="Pa">~/Library/Preferences/nsmb.conf</span></dt>
  <dd>The user's configuration file, conflicts will be overwritten by the global
      file.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">What follows is a sample configuration file which may, or may not
    match your environment:</p>
<div class="Bd Pp Bd-indent Li">
<pre># Configuration file for example.com
[default]
minauth=ntlmv2
streams=yes
soft=yes
notify_off=yes
comp_exclude_list=foo,bar
[WIN11]
addr=windows11.apple.com</pre>
</div>
<p class="Pp">All lines which begin with the
    &#x2018;<code class="Li">#</code>&#x2019; character are comments and will
    not be parsed. The &#x201C;<code class="Li">default</code>&#x201D; section
    specifies that only Kerberos and NTLMv2 authentication should be attempted;
    NTLM authentication should not be attempted if NTLMv2 authentication fails,
    and plain-text authentication should not be attempted if the server doesn't
    support encrypted passwords.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">smbutil(1)</a>, <a class="Xr">mount_smbfs(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">This manual page was originally written by <span class="An">Sergey
    Osokin</span> &#x27E8;osa@FreeBSD.org&#x27E9; and <span class="An">Tom
    Rhodes</span> &#x27E8;trhodes@FreeBSD.org&#x27E9;.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 30, 2003</td>
    <td class="foot-os">Mac OS X 12</td>
  </tr>
</table>
</body>
</html>
