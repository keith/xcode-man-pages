<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Exception::Class(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Exception::Class(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Exception::Class(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Exception::Class - A module that allows you to declare real exception classes in
  Perl
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
version 1.44
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  use Exception::Class (
      'MyException',

      'AnotherException' =&gt; { isa =&gt; 'MyException' },

      'YetAnotherException' =&gt; {
          isa         =&gt; 'AnotherException',
          description =&gt; 'These exceptions are related to IPC'
      },

      'ExceptionWithFields' =&gt; {
          isa    =&gt; 'YetAnotherException',
          fields =&gt; [ 'grandiosity', 'quixotic' ],
          alias  =&gt; 'throw_fields',
      },
  );
  use Scalar::Util qw( blessed );
  use Try::Tiny;

  try {
      MyException-&gt;throw( error =&gt; 'I feel funny.' );
  }
  catch {
      die $_ unless blessed $_ &amp;&amp; $_-&gt;can('rethrow');

      if ( $_-&gt;isa('Exception::Class') ) {
          warn $_-&gt;error, &quot;\n&quot;, $_-&gt;trace-&gt;as_string, &quot;\n&quot;;
          warn join ' ', $_-&gt;euid, $_-&gt;egid, $_-&gt;uid, $_-&gt;gid, $_-&gt;pid, $_-&gt;time;

          exit;
      }
      elsif ( $_-&gt;isa('ExceptionWithFields') ) {
          if ( $_-&gt;quixotic ) {
              handle_quixotic_exception();
          }
          else {
              handle_non_quixotic_exception();
          }
      }
      else {
          $_-&gt;rethrow;
      }
  };

  # without Try::Tiny
  eval { ... };
  if ( my $e = Exception::Class-&gt;caught ) { ... }

  # use an alias - without parens subroutine name is checked at
  # compile time
  throw_fields error =&gt; &quot;No strawberry&quot;, grandiosity =&gt; &quot;quite a bit&quot;;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<b>RECOMMENDATION 1</b>: If you are writing modern Perl code with Moose or Moo I
  highly recommend using Throwable instead of this module.
<p class="Pp"><b>RECOMMENDATION 2</b>: Whether or not you use Throwable, you
    should use Try::Tiny.</p>
<p class="Pp">Exception::Class allows you to declare exception hierarchies in
    your modules in a &quot;Java-esque&quot; manner.</p>
<p class="Pp">It features a simple interface allowing programmers to 'declare'
    exception classes at compile time. It also has a base exception class,
    Exception::Class::Base, that can be easily extended.</p>
<p class="Pp">It is designed to make structured exception handling simpler and
    better by encouraging people to use hierarchies of exceptions in their
    applications, as opposed to a single catch-all exception class.</p>
<p class="Pp">This module does not implement any try/catch syntax. Please see
    the &quot;OTHER EXCEPTION MODULES (try/catch syntax)&quot; section for more
    information on how to get this syntax.</p>
<p class="Pp">You will also want to look at the documentation for
    Exception::Class::Base, which is the default base class for all exception
    objects created by this module.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DECLARING_EXCEPTION_CLASSES"><a class="permalink" href="#DECLARING_EXCEPTION_CLASSES">DECLARING
  EXCEPTION CLASSES</a></h1>
Importing <span class="Li">&quot;Exception::Class&quot;</span> allows you to
  automagically create Exception::Class::Base subclasses. You can also create
  subclasses via the traditional means of defining your own subclass with
  <span class="Li">@ISA</span>. These two methods may be easily combined, so
  that you could subclass an exception class defined via the automagic import,
  if you desired this.
<p class="Pp">The syntax for the magic declarations is as follows:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  'MANDATORY CLASS NAME' =&gt; \%optional_hashref
</pre>
<p class="Pp">The hashref may contain the following options:</p>
<ul class="Bl-bullet">
  <li>isa
    <p class="Pp">This is the class's parent class. If this isn't provided then
        the class name in
        <span class="Li">$Exception::Class::BASE_EXC_CLASS</span> is assumed to
        be the parent (see below).</p>
    <p class="Pp">This parameter lets you create arbitrarily deep class
        hierarchies. This can be any other Exception::Class::Base subclass in
        your declaration <i>or</i> a subclass loaded from a module.</p>
    <p class="Pp">To change the default exception class you will need to change
        the value of <span class="Li">$Exception::Class::BASE_EXC_CLASS</span>
        <i>before</i> calling <span class="Li">&quot;import&quot;</span>. To do
        this simply do something like this:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  BEGIN { $Exception::Class::BASE_EXC_CLASS = 'SomeExceptionClass'; }
    </pre>
    <p class="Pp">If anyone can come up with a more elegant way to do this
        please let me know.</p>
    <p class="Pp">CAVEAT: If you want to automagically subclass an
        Exception::Class::Base subclass loaded from a file, then you <i>must</i>
        compile the class (via use or require or some other magic) <i>before</i>
        you import <span class="Li">&quot;Exception::Class&quot;</span> or
        you'll get a compile time error.</p>
  </li>
  <li>fields
    <p class="Pp">This allows you to define additional attributes for your
        exception class. Any field you define can be passed to the
        <span class="Li">&quot;throw&quot;</span> or
        <span class="Li">&quot;new&quot;</span> methods as additional parameters
        for the constructor. In addition, your exception object will have an
        accessor method for the fields you define.</p>
    <p class="Pp">This parameter can be either a scalar (for a single field) or
        an array reference if you need to define multiple fields.</p>
    <p class="Pp">Fields will be inherited by subclasses.</p>
  </li>
  <li>alias
    <p class="Pp">Specifying an alias causes this class to create a subroutine
        of the specified name in the <i>caller's</i> namespace. Calling this
        subroutine is equivalent to calling
        <span class="Li">&quot;&lt;class&gt;-&gt;throw(@_)&quot;</span> for the
        given exception class.</p>
    <p class="Pp">Besides convenience, using aliases also allows for additional
        compile time checking. If the alias is called <i>without
        parentheses</i>, as in <span class="Li">&quot;throw_fields</span>
        <span class="Li">&quot;an error occurred&quot;&quot;</span>, then Perl
        checks for the existence of the
        <span class="Li">&quot;throw_fields&quot;</span> subroutine at compile
        time. If instead you do
        <span class="Li">&quot;ExceptionWithFields-&gt;throw(...)&quot;</span>,
        then Perl checks the class name at runtime, meaning that typos may sneak
        through.</p>
  </li>
  <li>description
    <p class="Pp">Each exception class has a description method that returns a
        fixed string. This should describe the exception <i>class</i> (as
        opposed to any particular exception object). This may be useful for
        debugging if you start catching exceptions you weren't expecting
        (particularly if someone forgot to document them) and you don't
        understand the error messages.</p>
  </li>
</ul>
<p class="Pp">The <span class="Li">&quot;Exception::Class&quot;</span> magic
    attempts to detect circular class hierarchies and will die if it finds one.
    It also detects missing links in a chain, for example if you declare Bar to
    be a subclass of Foo and never declare Foo.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Try::Tiny"><a class="permalink" href="#Try::Tiny">Try::Tiny</a></h1>
If you are interested in adding try/catch/finally syntactic sugar to your code
  then I recommend you check out Try::Tiny. This is a great module that helps
  you ignore some of the weirdness with <span class="Li">&quot;eval&quot;</span>
  and <span class="Li">$@</span>. Here's an example of how the two modules work
  together:
<p class="Pp"><span class="Li"></span></p>
<pre>
  use Exception::Class ( 'My::Exception' );
  use Scalar::Util qw( blessed );
  use Try::Tiny;

  try {
      might_throw();
  }
  catch {
      if ( blessed $_ &amp;&amp; $_-&gt;isa('My::Exception') ) {
          handle_it();
      }
      else {
          die $_;
      }
  };
</pre>
<p class="Pp">Note that you <b>cannot</b> use
    <span class="Li">&quot;Exception::Class-&gt;caught&quot;</span> with
    Try::Tiny.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Catching_Exceptions_Without_Try::Tiny"><a class="permalink" href="#Catching_Exceptions_Without_Try::Tiny">Catching
  Exceptions Without Try::Tiny</a></h1>
<span class="Li">&quot;Exception::Class&quot;</span> provides some syntactic
  sugar for catching exceptions in a safe manner:
<p class="Pp"><span class="Li"></span></p>
<pre>
  eval {...};

  if ( my $e = Exception::Class-&gt;caught('My::Error') ) {
      cleanup();
      do_something_with_exception($e);
  }
</pre>
<p class="Pp">The <span class="Li">&quot;caught&quot;</span> method takes a
    class name and returns an exception object if the last thrown exception is
    of the given class, or a subclass of that class. If it is not given any
    arguments, it simply returns <span class="Li">$@</span>.</p>
<p class="Pp">You should <b>always</b> make a copy of the exception object,
    rather than using <span class="Li">$@</span> directly. This is necessary
    because if your <span class="Li">&quot;cleanup&quot;</span> function uses
    <span class="Li">&quot;eval&quot;</span>, or calls something which uses it,
    then <span class="Li">$@</span> is overwritten. Copying the exception
    preserves it for the call to
    <span class="Li">&quot;do_something_with_exception&quot;</span>.</p>
<p class="Pp">Exception objects also provide a caught method so you can
  write:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  if ( my $e = My::Error-&gt;caught ) {
      cleanup();
      do_something_with_exception($e);
  }
</pre>
<section class="Ss">
<h2 class="Ss" id="Uncatchable_Exceptions"><a class="permalink" href="#Uncatchable_Exceptions">Uncatchable
  Exceptions</a></h2>
Internally, the <span class="Li">&quot;caught&quot;</span> method will call
  <span class="Li">&quot;isa&quot;</span> on the exception object. You could
  make an exception &quot;uncatchable&quot; by overriding
  <span class="Li">&quot;isa&quot;</span> in that class like this:
<p class="Pp"><span class="Li"></span></p>
<pre>
 package Exception::Uncatchable;

 sub isa { shift-&gt;rethrow }
</pre>
<p class="Pp">Of course, this only works if you always call
    <span class="Li">&quot;Exception::Class-&gt;caught&quot;</span> after an
    <span class="Li">&quot;eval&quot;</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="USAGE_RECOMMENDATION"><a class="permalink" href="#USAGE_RECOMMENDATION">USAGE
  RECOMMENDATION</a></h1>
If you're creating a complex system that throws lots of different types of
  exceptions, consider putting all the exception declarations in one place. For
  an app called Foo you might make a
  <span class="Li">&quot;Foo::Exceptions&quot;</span> module and use that in all
  your code. This module could just contain the code to make
  <span class="Li">&quot;Exception::Class&quot;</span> do its automagic class
  creation. Doing this allows you to more easily see what exceptions you have,
  and makes it easier to keep track of them.
<p class="Pp">This might look something like this:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  package Foo::Bar::Exceptions;

  use Exception::Class (
      Foo::Bar::Exception::Senses =&gt;
          { description =&gt; 'sense-related exception' },

      Foo::Bar::Exception::Smell =&gt; {
          isa         =&gt; 'Foo::Bar::Exception::Senses',
          fields      =&gt; 'odor',
          description =&gt; 'stinky!'
      },

      Foo::Bar::Exception::Taste =&gt; {
          isa         =&gt; 'Foo::Bar::Exception::Senses',
          fields      =&gt; [ 'taste', 'bitterness' ],
          description =&gt; 'like, gag me with a spoon!'
      },

      ...
  );
</pre>
<p class="Pp">You may want to create a real module to subclass
    Exception::Class::Base as well, particularly if you want your exceptions to
    have more methods.</p>
<section class="Ss">
<h2 class="Ss" id="Subclassing_Exception::Class::Base"><a class="permalink" href="#Subclassing_Exception::Class::Base">Subclassing
  Exception::Class::Base</a></h2>
As part of your usage of <span class="Li">&quot;Exception::Class&quot;</span>,
  you may want to create your own base exception class which subclasses
  Exception::Class::Base. You should feel free to subclass any of the methods
  documented above. For example, you may want to subclass
  <span class="Li">&quot;new&quot;</span> to add additional information to your
  exception objects.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Exception::Class_FUNCTIONS"><a class="permalink" href="#Exception::Class_FUNCTIONS">Exception::Class
  FUNCTIONS</a></h1>
The <span class="Li">&quot;Exception::Class&quot;</span> method offers one
  function, <span class="Li">&quot;Classes&quot;</span>, which is not exported.
  This method returns a list of the classes that have been created by calling
  the <span class="Li">&quot;Exception::Class&quot;</span>
  <span class="Li">&quot;import&quot;</span> method. Note that this is
  <i>all</i> the subclasses that have been created, so it may include subclasses
  created by things like CPAN modules, etc. Also note that if you simply define
  a subclass via the normal Perl method of setting <span class="Li">@ISA</span>
  or <span class="Li">&quot;use base&quot;</span>, then your subclass will not
  be included.
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
Bugs may be submitted at
  &lt;https://github.com/houseabsolute/Exception-Class/issues&gt;.
<p class="Pp">I am also usually active on IRC as 'autarch' on
    <span class="Li">&quot;irc://irc.perl.org&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE"><a class="permalink" href="#SOURCE">SOURCE</a></h1>
The source code repository for Exception-Class can be found at
  &lt;https://github.com/houseabsolute/Exception-Class&gt;.
</section>
<section class="Sh">
<h1 class="Sh" id="DONATIONS"><a class="permalink" href="#DONATIONS">DONATIONS</a></h1>
If you'd like to thank me for the work I've done on this module, please consider
  making a &quot;donation&quot; to me via PayPal. I spend a lot of free time
  creating free software, and would appreciate any support you'd care to offer.
<p class="Pp">Please note that <b>I am not suggesting that you must do this</b>
    in order for me to continue working on this particular software. I will
    continue to do so, inasmuch as I have in the past, for as long as it
    interests me.</p>
<p class="Pp">Similarly, a donation made in this way will probably not make me
    work on this software much more, unless I get so many donations that I can
    consider working on free software full time (let's all have a chuckle at
    that together).</p>
<p class="Pp">To donate, log into PayPal and send money to autarch@urth.org, or
    use the button at &lt;http://www.urth.org/~autarch/fs-donation.html&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Dave Rolsky &lt;autarch@urth.org&gt;
</section>
<section class="Sh">
<h1 class="Sh" id="CONTRIBUTORS"><a class="permalink" href="#CONTRIBUTORS">CONTRIBUTORS</a></h1>
<ul class="Bl-bullet">
  <li>Alexander Batyrshin &lt;0x62ash@gmail.com&gt;</li>
  <li>Leon Timmermans &lt;fawaka@gmail.com&gt;</li>
  <li>Ricardo Signes &lt;rjbs@cpan.org&gt;</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
This software is copyright (c) 2017 by Dave Rolsky.
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
<p class="Pp">The full text of the license can be found in the <i>LICENSE</i>
    file included with this distribution.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-12-10</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
