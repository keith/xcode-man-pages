<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2005 Donal K. Fellows
  
   See the file "license.terms" for information on usage and redistribution
   of this file, and for a DISCLAIMER OF ALL WARRANTIES.
  
   RCS: @(#) $Id: Ensemble.3,v 1.5.2.1 2009/11/27 14:53:54 dkf Exp $
  
   This documents the C API introduced in TIP#235
  
   The -*- nroff -*- definitions below are for supplemental macros used
   in Tcl/Tk manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO ?manpage?
  	Start of list of standard options for a Tk widget. The manpage
  	argument defines where to look up the standard options; if
  	omitted, defaults to "options". The options follow on successive
  	lines, in three columns separated by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   .QW arg1 ?arg2?
  	Print arg1 in quotes, then arg2 normally (for trailing punctuation).
  
   .PQ arg1 ?arg2?
  	Print an open parenthesis, arg1 in quotes, then arg2 normally
  	(for trailing punctuation) and then a closing parenthesis.
  
   RCS: @(#) $Id: man.macros,v 1.9 2008/01/29 15:32:33 dkf Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Tcl_Ensemble(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Tcl_Ensemble(3)</td>
    <td class="head-vol">Tcl Library Procedures</td>
    <td class="head-rtitle">Tcl_Ensemble(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Tcl_CreateEnsemble, Tcl_FindEnsemble, Tcl_GetEnsembleFlags,
    Tcl_GetEnsembleMappingDict, Tcl_GetEnsembleNamespace,
    Tcl_GetEnsembleUnknownHandler, Tcl_GetEnsembleSubcommandList,
    Tcl_IsEnsemble, Tcl_SetEnsembleFlags, Tcl_SetEnsembleMappingDict,
    Tcl_SetEnsembleSubcommandList, Tcl_SetEnsembleUnknownHandler - manipulate
    ensemble commands</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><b>#include &lt;tcl.h&gt;</b>

Tcl_Command
<b>Tcl_CreateEnsemble</b>(<i>interp, name, namespacePtr, ensFlags</i>)

Tcl_Command
<b>Tcl_FindEnsemble</b>(<i>interp, cmdNameObj, flags</i>)

int
<b>Tcl_IsEnsemble</b>(<i>token</i>)

int
<b>Tcl_GetEnsembleFlags</b>(<i>interp, token, ensFlagsPtr</i>)

int
<b>Tcl_SetEnsembleFlags</b>(<i>interp, token, ensFlags</i>)

int
<b>Tcl_GetEnsembleMappingDict</b>(<i>interp, token, dictObjPtr</i>)

int
<b>Tcl_SetEnsembleMappingDict</b>(<i>interp, token, dictObj</i>)

int
<b>Tcl_GetEnsembleSubcommandList</b>(<i>interp, token, listObjPtr</i>)

int
<b>Tcl_SetEnsembleSubcommandList</b>(<i>interp, token, listObj</i>)

int
<b>Tcl_GetEnsembleUnknownHandler</b>(<i>interp, token, listObjPtr</i>)

int
<b>Tcl_SetEnsembleUnknownHandler</b>(<i>interp, token, listObj</i>)

int
<b>Tcl_GetEnsembleNamespace</b>(<i>interp, token, namespacePtrPtr</i>)</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ARGUMENTS"><a class="permalink" href="#ARGUMENTS">ARGUMENTS</a></h1>
<dl class="Bl-tag">
  <dt>Tcl_Interp <i>*interp</i> (in/out)</dt>
  <dd>The interpreter in which the ensemble is to be created or found. Also
      where error result messages are written. The functions whose names start
      with <b>Tcl_GetEnsemble</b> may have a NULL for the <i>interp</i>, but all
      other functions must not.</dd>
  <dt>const char <i>*name</i> (in)</dt>
  <dd>The name of the ensemble command to be created.</dd>
  <dt>Tcl_Namespace <i>*namespacePtr</i> (in)</dt>
  <dd>The namespace to which the ensemble command is to be bound, or NULL for
      the current namespace.</dd>
  <dt>int <i>ensFlags</i> (in)</dt>
  <dd>An ORed set of flag bits describing the basic configuration of the
      ensemble. Currently only one bit has meaning, TCL_ENSEMBLE_PREFIX, which
      is present when the ensemble command should also match unambiguous
      prefixes of subcommands.</dd>
  <dt>Tcl_Obj <i>*cmdNameObj</i> (in)</dt>
  <dd>A value holding the name of the ensemble command to look up.</dd>
  <dt>int <i>flags</i> (in)</dt>
  <dd>An ORed set of flag bits controlling the behavior of
      <b>Tcl_FindEnsemble</b>. Currently only TCL_LEAVE_ERR_MSG is
    supported.</dd>
  <dt>Tcl_Command <i>token</i> (in)</dt>
  <dd>A normal command token that refers to an ensemble command, or which you
      wish to use for testing as an ensemble command in
    <b>Tcl_IsEnsemble</b>.</dd>
  <dt>int <i>*ensFlagsPtr</i> (out)</dt>
  <dd>Pointer to a variable into which to write the current ensemble flag bits;
      currently only the bit TCL_ENSEMBLE_PREFIX is defined.</dd>
  <dt>Tcl_Obj <i>*dictObj</i> (in)</dt>
  <dd>A dictionary value to use for the subcommand to implementation command
      prefix mapping dictionary in the ensemble. May be NULL if the mapping
      dictionary is to be removed.</dd>
  <dt>Tcl_Obj <i>**dictObjPtr</i> (out)</dt>
  <dd>Pointer to a variable into which to write the current ensemble mapping
      dictionary.</dd>
  <dt>Tcl_Obj <i>*listObj</i> (in)</dt>
  <dd>A list value to use for the defined list of subcommands in the dictionary
      or the unknown subcommmand handler command prefix. May be NULL if the
      subcommand list or unknown handler are to be removed.</dd>
  <dt>Tcl_Obj <i>**listObjPtr</i> (out)</dt>
  <dd>Pointer to a variable into which to write the current defiend list of
      subcommands or the current unknown handler prefix.</dd>
  <dt>Tcl_Namespace <i>**namespacePtrPtr</i> (out)</dt>
  <dd>Pointer to a variable into which to write the handle of the namespace to
      which the ensemble is bound.
    <pre>
    </pre>
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">An ensemble is a command, bound to some namespace, which consists
    of a collection of subcommands implemented by other Tcl commands. The first
    argument to the ensemble command is always interpreted as a selector that
    states what subcommand to execute.</p>
<p class="Pp">Ensembles are created using <b>Tcl_CreateEnsemble</b>, which takes
    four arguments: the interpreter to work within, the name of the ensemble to
    create, the namespace within the interpreter to bind the ensemble to, and
    the default set of ensemble flags. The result of the function is the command
    token for the ensemble, which may be used to further configure the ensemble
    using the API described below in <b>ENSEMBLE</b> <b>PROPERTIES</b>.</p>
<p class="Pp">Given the name of an ensemble command, the token for that command
    may be retrieved using <b>Tcl_FindEnsemble</b>. If the given command name
    (in <i>cmdNameObj</i>) does not refer to an ensemble command, the result of
    the function is NULL and (if the TCL_LEAVE_ERR_MSG bit is set in
    <i>flags</i>) an error message is left in the interpreter result.</p>
<p class="Pp">A command token may be checked to see if it refers to an ensemble
    using <b>Tcl_IsEnsemble</b>. This returns 1 if the token refers to an
    ensemble, or 0 otherwise.</p>
<section class="Ss">
<h2 class="Ss" id="ENSEMBLE_PROPERTIES"><a class="permalink" href="#ENSEMBLE_PROPERTIES">ENSEMBLE
  PROPERTIES</a></h2>
<p class="Pp">Every ensemble has four read-write properties and a read-only
    property. The properties are:</p>
<dl class="Bl-tag">
  <dt id="flags"><a class="permalink" href="#flags"><b>flags</b>
    (read-write)</a></dt>
  <dd>The set of flags for the ensemble, expressed as a bit-field. Currently,
      the only public flag is TCL_ENSEMBLE_PREFIX which is set when unambiguous
      prefixes of subcommands are permitted to be resolved to implementations as
      well as exact matches. The flags may be read and written using
      <b>Tcl_GetEnsembleFlags</b> and <b>Tcl_SetEnsembleFlags</b> respectively.
      The result of both of those functions is a Tcl result code (TCL_OK, or
      TCL_ERROR if the token does not refer to an ensemble).</dd>
  <dt id="mapping"><a class="permalink" href="#mapping"><b>mapping
    dictionary</b> (read-write)</a></dt>
  <dd>A dictionary containing a mapping from subcommand names to lists of words
      to use as a command prefix (replacing the first two words of the command
      which are the ensemble command itself and the subcommand name), or NULL if
      every subcommand is to be mapped to the command with the same unqualified
      name in the ensemble's bound namespace. Defaults to NULL. May be read and
      written using <b>Tcl_GetEnsembleMappingDict</b> and
      <b>Tcl_SetEnsembleMappingDict</b> respectively. The result of both of
      those functions is a Tcl result code (TCL_OK, or TCL_ERROR if the token
      does not refer to an ensemble) and the dictionary obtained from
      <b>Tcl_GetEnsembleMappingDict</b> should always be treated as immutable
      even if it is unshared.</dd>
  <dt id="subcommand"><a class="permalink" href="#subcommand"><b>subcommand
    list</b> (read-write)</a></dt>
  <dd>A list of all the subcommand names for the ensemble, or NULL if this is to
      be derived from either the keys of the mapping dictionary (see above) or
      (if that is also NULL) from the set of commands exported by the bound
      namespace. May be read and written using
      <b>Tcl_GetEnsembleSubcommandList</b> and
      <b>Tcl_SetEnsembleSubcommandList</b> respectively. The result of both of
      those functions is a Tcl result code (TCL_OK, or TCL_ERROR if the token
      does not refer to an ensemble) and the list obtained from
      <b>Tcl_GetEnsembleSubcommandList</b> should always be treated as immutable
      even if it is unshared.</dd>
  <dt id="unknown"><a class="permalink" href="#unknown"><b>unknown subcommand
    handler command prefix</b> (read-write)</a></dt>
  <dd>A list of words to prepend on the front of any subcommand when the
      subcommand is unknown to the ensemble (according to the current prefix
      handling rule); see the <b>namespace ensemble</b> command for more
      details. If NULL, the default behavior - generate a suitable error message
      - will be used when an unknown subcommand is encountered. May be read and
      written using <b>Tcl_GetEnsembleUnknownHandler</b> and
      <b>Tcl_SetEnsembleUnknownHandler</b> respectively. The result of both
      functions is a Tcl result code (TCL_OK, or TCL_ERROR if the token does not
      refer to an ensemble) and the list obtained from
      <b>Tcl_GetEnsembleUnknownHandler</b> should always be treated as immutable
      even if it is unshared.</dd>
  <dt id="bound"><a class="permalink" href="#bound"><b>bound namespace</b>
    (read-only)</a></dt>
  <dd>The namespace to which the ensemble is bound; when the namespace is
      deleted, so too will the ensemble, and this namespace is also the
      namespace whose list of exported commands is used if both the mapping
      dictionary and the subcommand list properties are NULL. May be read using
      <b>Tcl_GetEnsembleNamespace</b> which returns a Tcl result code (TCL_OK,
      or TCL_ERROR if the token does not refer to an ensemble).
    <p class="Pp"></p>
  </dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">namespace(n), Tcl_DeleteCommandFromToken(3)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">8.5</td>
    <td class="foot-os">Tcl</td>
  </tr>
</table>
</body>
</html>
