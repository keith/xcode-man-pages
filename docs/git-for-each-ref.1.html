<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
       Title: git-for-each-ref
      Author: [FIXME: author] [see http://docbook.sf.net/el/author]
   Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
        Date: 11/04/2019
      Manual: Git Manual
      Source: Git 2.24.0
    Language: English
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>GIT-FOR-EACH-REF(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GIT-FOR-EACH-REF(1)</td>
    <td class="head-vol">Git Manual</td>
    <td class="head-rtitle">GIT-FOR-EACH-REF(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
git-for-each-ref - Output information on each ref
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
<i>git for-each-ref</i> [--count=&lt;count&gt;] [--shell|--perl|--python|--tcl]
                   [(--sort=&lt;key&gt;)...] [--format=&lt;format&gt;] [&lt;pattern&gt;...]
                   [--points-at=&lt;object&gt;]
                   (--merged[=&lt;object&gt;] | --no-merged[=&lt;object&gt;])
                   [--contains[=&lt;object&gt;]] [--no-contains[=&lt;object&gt;]]
</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
Iterate over all refs that match <b>&lt;pattern&gt;</b> and show them according
  to the given <b>&lt;format&gt;</b>, after sorting them according to the given
  set of <b>&lt;key&gt;</b>. If <b>&lt;count&gt;</b> is given, stop after
  showing that many refs. The interpolated values in <b>&lt;format&gt;</b> can
  optionally be quoted as string literals in the specified host language
  allowing their direct evaluation in that language.
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
&lt;pattern&gt;...
<div class="Bd-indent">If one or more patterns are given, only refs are shown
  that match against at least one pattern, either using fnmatch(3) or literally,
  in the latter case matching completely or from the beginning up to a
  slash.</div>
<p class="Pp">--count=&lt;count&gt;</p>
<div class="Bd-indent">By default the command shows all refs that match
  <b>&lt;pattern&gt;</b>. This option makes it stop after showing that many
  refs.</div>
<p class="Pp">--sort=&lt;key&gt;</p>
<div class="Bd-indent">A field name to sort on. Prefix <b>-</b> to sort in
  descending order of the value. When unspecified, <b>refname</b> is used. You
  may use the --sort=&lt;key&gt; option multiple times, in which case the last
  key becomes the primary key.</div>
<p class="Pp">--format=&lt;format&gt;</p>
<div class="Bd-indent">A string that interpolates <b>%(fieldname)</b> from a ref
  being shown and the object it points at. If <b>fieldname</b> is prefixed with
  an asterisk (<b>*</b>) and the ref points at a tag object, use the value for
  the field in the object which the tag object refers to (instead of the field
  in the tag object). When unspecified, <b>&lt;format&gt;</b> defaults to
  <b>%(objectname) SPC %(objecttype) TAB %(refname)</b>. It also interpolates
  <b>%%</b> to <b>%</b>, and <b>%xx</b> where <b>xx</b> are hex digits
  interpolates to character with hex code <b>xx</b>; for example <b>%00</b>
  interpolates to <b>\0</b> (NUL), <b>%09</b> to <b>\t</b> (TAB) and <b>%0a</b>
  to <b>\n</b> (LF).</div>
<p class="Pp">--color[=&lt;when&gt;]</p>
<div class="Bd-indent">Respect any colors specified in the <b>--format</b>
  option. The <b>&lt;when&gt;</b> field must be one of <b>always</b>,
  <b>never</b>, or <b>auto</b> (if <b>&lt;when&gt;</b> is absent, behave as if
  <b>always</b> was given).</div>
<p class="Pp">--shell, --perl, --python, --tcl</p>
<div class="Bd-indent">If given, strings that substitute <b>%(fieldname)</b>
  placeholders are quoted as string literals suitable for the specified host
  language. This is meant to produce a scriptlet that can directly be
  `eval`ed.</div>
<p class="Pp">--points-at=&lt;object&gt;</p>
<div class="Bd-indent">Only list refs which points at the given object.</div>
<p class="Pp">--merged[=&lt;object&gt;]</p>
<div class="Bd-indent">Only list refs whose tips are reachable from the
  specified commit (HEAD if not specified), incompatible with
  <b>--no-merged</b>.</div>
<p class="Pp">--no-merged[=&lt;object&gt;]</p>
<div class="Bd-indent">Only list refs whose tips are not reachable from the
  specified commit (HEAD if not specified), incompatible with
  <b>--merged</b>.</div>
<p class="Pp">--contains[=&lt;object&gt;]</p>
<div class="Bd-indent">Only list refs which contain the specified commit (HEAD
  if not specified).</div>
<p class="Pp">--no-contains[=&lt;object&gt;]</p>
<div class="Bd-indent">Only list refs which don&#x2019;t contain the specified
  commit (HEAD if not specified).</div>
<p class="Pp">--ignore-case</p>
<div class="Bd-indent">Sorting and filtering refs are case insensitive.</div>
</section>
<section class="Sh">
<h1 class="Sh" id="FIELD_NAMES"><a class="permalink" href="#FIELD_NAMES">FIELD
  NAMES</a></h1>
Various values from structured fields in referenced objects can be used to
  interpolate into the resulting output, or as sort keys.
<p class="Pp">For all objects, the following names can be used:</p>
<p class="Pp">refname</p>
<div class="Bd-indent">The name of the ref (the part after $GIT_DIR/). For a
  non-ambiguous short name of the ref append <b>:short</b>. The option
  core.warnAmbiguousRefs is used to select the strict abbreviation mode. If
  <b>lstrip=&lt;N&gt;</b> (<b>rstrip=&lt;N&gt;</b>) is appended, strips
  <b>&lt;N&gt;</b> slash-separated path components from the front (back) of the
  refname (e.g. <b>%(refname:lstrip=2)</b> turns <b>refs/tags/foo</b> into
  <b>foo</b> and <b>%(refname:rstrip=2)</b> turns <b>refs/tags/foo</b> into
  <b>refs</b>). If <b>&lt;N&gt;</b> is a negative number, strip as many path
  components as necessary from the specified end to leave <b>-&lt;N&gt;</b> path
  components (e.g. <b>%(refname:lstrip=-2)</b> turns <b>refs/tags/foo</b> into
  <b>tags/foo</b> and <b>%(refname:rstrip=-1)</b> turns <b>refs/tags/foo</b>
  into <b>refs</b>). When the ref does not have enough components, the result
  becomes an empty string if stripping with positive &lt;N&gt;, or it becomes
  the full refname if stripping with negative &lt;N&gt;. Neither is an error.
<p class="Pp"><b>strip</b> can be used as a synonym to <b>lstrip</b>.</p>
</div>
<p class="Pp">objecttype</p>
<div class="Bd-indent">The type of the object (<b>blob</b>, <b>tree</b>,
  <b>commit</b>, <b>tag</b>).</div>
<p class="Pp">objectsize</p>
<div class="Bd-indent">The size of the object (the same as <i>git cat-file
  -s</i> reports). Append <b>:disk</b> to get the size, in bytes, that the
  object takes up on disk. See the note about on-disk sizes in the
  <b>CAVEATS</b> section below.</div>
<p class="Pp">objectname</p>
<div class="Bd-indent">The object name (aka SHA-1). For a non-ambiguous
  abbreviation of the object name append <b>:short</b>. For an abbreviation of
  the object name with desired length append <b>:short=&lt;length&gt;</b>, where
  the minimum length is MINIMUM_ABBREV. The length may be exceeded to ensure
  unique object names.</div>
<p class="Pp">deltabase</p>
<div class="Bd-indent">This expands to the object name of the delta base for the
  given object, if it is stored as a delta. Otherwise it expands to the null
  object name (all zeroes).</div>
<p class="Pp">upstream</p>
<div class="Bd-indent">The name of a local ref which can be considered
  &#x201C;upstream&#x201D; from the displayed ref. Respects <b>:short</b>,
  <b>:lstrip</b> and <b>:rstrip</b> in the same way as <b>refname</b> above.
  Additionally respects <b>:track</b> to show &quot;[ahead N, behind M]&quot;
  and <b>:trackshort</b> to show the terse version: &quot;&gt;&quot; (ahead),
  &quot;&lt;&quot; (behind), &quot;&lt;&gt;&quot; (ahead and behind), or
  &quot;=&quot; (in sync). <b>:track</b> also prints &quot;[gone]&quot; whenever
  unknown upstream ref is encountered. Append <b>:track,nobracket</b> to show
  tracking information without brackets (i.e &quot;ahead N, behind M&quot;).
<p class="Pp">For any remote-tracking branch <b>%(upstream)</b>,
    <b>%(upstream:remotename)</b> and <b>%(upstream:remoteref)</b> refer to the
    name of the remote and the name of the tracked remote ref, respectively. In
    other words, the remote-tracking branch can be updated explicitly and
    individually by using the refspec <b>%(upstream:remoteref):%(upstream)</b>
    to fetch from <b>%(upstream:remotename)</b>.</p>
<p class="Pp">Has no effect if the ref does not have tracking information
    associated with it. All the options apart from <b>nobracket</b> are mutually
    exclusive, but if used together the last option is selected.</p>
</div>
<p class="Pp">push</p>
<div class="Bd-indent">The name of a local ref which represents the
  <b>@{push}</b> location for the displayed ref. Respects <b>:short</b>,
  <b>:lstrip</b>, <b>:rstrip</b>, <b>:track</b>, <b>:trackshort</b>,
  <b>:remotename</b>, and <b>:remoteref</b> options as <b>upstream</b> does.
  Produces an empty string if no <b>@{push}</b> ref is configured.</div>
<p class="Pp">HEAD</p>
<div class="Bd-indent"><i>*</i> if HEAD matches current ref (the checked out
  branch), ' ' otherwise.</div>
<p class="Pp">color</p>
<div class="Bd-indent">Change output color. Followed by
  <b>:&lt;colorname&gt;</b>, where color names are described under Values in the
  &quot;CONFIGURATION FILE&quot; section of <b>git-config</b>(1). For example,
  <b>%(color:bold red)</b>.</div>
<p class="Pp">align</p>
<div class="Bd-indent">Left-, middle-, or right-align the content between
  %(align:...) and %(end). The &quot;align:&quot; is followed by
  <b>width=&lt;width&gt;</b> and <b>position=&lt;position&gt;</b> in any order
  separated by a comma, where the <b>&lt;position&gt;</b> is either left, right
  or middle, default being left and <b>&lt;width&gt;</b> is the total length of
  the content with alignment. For brevity, the &quot;width=&quot; and/or
  &quot;position=&quot; prefixes may be omitted, and bare &lt;width&gt; and
  &lt;position&gt; used instead. For instance,
  <b>%(align:&lt;width&gt;,&lt;position&gt;)</b>. If the contents length is more
  than the width then no alignment is performed. If used with <b>--quote</b>
  everything in between %(align:...) and %(end) is quoted, but if nested then
  only the topmost level performs quoting.</div>
<p class="Pp">if</p>
<div class="Bd-indent">Used as %(if)...%(then)...%(end) or
  %(if)...%(then)...%(else)...%(end). If there is an atom with value or string
  literal after the %(if) then everything after the %(then) is printed, else if
  the %(else) atom is used, then everything after %(else) is printed. We ignore
  space when evaluating the string before %(then), this is useful when we use
  the %(HEAD) atom which prints either &quot;*&quot; or &quot; &quot; and we
  want to apply the <i>if</i> condition only on the <i>HEAD</i> ref. Append
  &quot;:equals=&lt;string&gt;&quot; or &quot;:notequals=&lt;string&gt;&quot; to
  compare the value between the %(if:...) and %(then) atoms with the given
  string.</div>
<p class="Pp">symref</p>
<div class="Bd-indent">The ref which the given symbolic ref refers to. If not a
  symbolic ref, nothing is printed. Respects the <b>:short</b>, <b>:lstrip</b>
  and <b>:rstrip</b> options in the same way as <b>refname</b> above.</div>
<p class="Pp">worktreepath</p>
<div class="Bd-indent">The absolute path to the worktree in which the ref is
  checked out, if it is checked out in any linked worktree. Empty string
  otherwise.</div>
<p class="Pp">In addition to the above, for commit and tag objects, the header
    field names (<b>tree</b>, <b>parent</b>, <b>object</b>, <b>type</b>, and
    <b>tag</b>) can be used to specify the value in the header field.</p>
<p class="Pp">For commit and tag objects, the special <b>creatordate</b> and
    <b>creator</b> fields will correspond to the appropriate date or
    name-email-date tuple from the <b>committer</b> or <b>tagger</b> fields
    depending on the object type. These are intended for working on a mix of
    annotated and lightweight tags.</p>
<p class="Pp">Fields that have name-email-date tuple as its value
    (<b>author</b>, <b>committer</b>, and <b>tagger</b>) can be suffixed with
    <b>name</b>, <b>email</b>, and <b>date</b> to extract the named
  component.</p>
<p class="Pp">The complete message in a commit and tag object is
    <b>contents</b>. Its first line is <b>contents:subject</b>, where subject is
    the concatenation of all lines of the commit message up to the first blank
    line. The next line is <b>contents:body</b>, where body is all of the lines
    after the first blank line. The optional GPG signature is
    <b>contents:signature</b>. The first <b>N</b> lines of the message is
    obtained using <b>contents:lines=N</b>. Additionally, the trailers as
    interpreted by <b>git-interpret-trailers</b>(1) are obtained as
    <b>trailers</b> (or by using the historical alias <b>contents:trailers</b>).
    Non-trailer lines from the trailer block can be omitted with
    <b>trailers:only</b>. Whitespace-continuations can be removed from trailers
    so that each trailer appears on a line by itself with its full content with
    <b>trailers:unfold</b>. Both can be used together as
    <b>trailers:unfold,only</b>.</p>
<p class="Pp">For sorting purposes, fields with numeric values sort in numeric
    order (<b>objectsize</b>, <b>authordate</b>, <b>committerdate</b>,
    <b>creatordate</b>, <b>taggerdate</b>). All other fields are used to sort in
    their byte-value order.</p>
<p class="Pp">There is also an option to sort by versions, this can be done by
    using the fieldname <b>version:refname</b> or its alias
  <b>v:refname</b>.</p>
<p class="Pp">In any case, a field name that refers to a field inapplicable to
    the object referred by the ref does not cause an error. It returns an empty
    string instead.</p>
<p class="Pp">As a special case for the date-type fields, you may specify a
    format for the date by adding <b>:</b> followed by date format name (see the
    values the <b>--date</b> option to <b>git-rev-list</b>(1) takes).</p>
<p class="Pp">Some atoms like %(align) and %(if) always require a matching
    %(end). We call them &quot;opening atoms&quot; and sometimes denote them as
    %($open).</p>
<p class="Pp">When a scripting language specific quoting is in effect,
    everything between a top-level opening atom and its matching %(end) is
    evaluated according to the semantics of the opening atom and only its result
    from the top-level is quoted.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
An example directly producing formatted text. Show the most recent 3 tagged
  commits:
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
#!/bin/sh
git for-each-ref --count=3 --sort='-*authordate' \
--format='From: %(*authorname) %(*authoremail)
Subject: %(*subject)
Date: %(*authordate)
Ref: %(*refname)
%(*body)
' 'refs/tags'
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">A simple example showing the use of shell eval on the output,
    demonstrating the use of --shell. List the prefixes of all heads:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
#!/bin/sh
git for-each-ref --shell --format=&quot;ref=%(refname)&quot; refs/heads | \
while read entry
do
        eval &quot;$entry&quot;
        echo `dirname $ref`
done
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">A bit more elaborate report on tags, demonstrating that the format
    may be an entire script:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
#!/bin/sh
fmt='
        r=%(refname)
        t=%(*objecttype)
        T=${r#refs/tags/}
        o=%(*objectname)
        n=%(*authorname)
        e=%(*authoremail)
        s=%(*subject)
        d=%(*authordate)
        b=%(*body)
        kind=Tag
        if test &quot;z$t&quot; = z
        then
                # could be a lightweight tag
                t=%(objecttype)
                kind=&quot;Lightweight tag&quot;
                o=%(objectname)
                n=%(authorname)
                e=%(authoremail)
                s=%(subject)
                d=%(authordate)
                b=%(body)
        fi
        echo &quot;$kind $T points at a $t object $o&quot;
        if test &quot;z$t&quot; = zcommit
        then
                echo &quot;The commit was authored by $n $e
at $d, and titled
    $s
Its message reads as:
&quot;
                echo &quot;$b&quot; | sed -e &quot;s/^/    /&quot;
                echo
        fi
'
eval=`git for-each-ref --shell --format=&quot;$fmt&quot; \
        --sort='*objecttype' \
        --sort=-taggerdate \
        refs/tags`
eval &quot;$eval&quot;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">An example to show the usage of
    %(if)...%(then)...%(else)...%(end). This prefixes the current branch with a
    star.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
git for-each-ref --format=&quot;%(if)%(HEAD)%(then)* %(else)  %(end)%(refname:short)&quot; refs/heads/
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">An example to show the usage of %(if)...%(then)...%(end). This
    prints the authorname, if present.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
git for-each-ref --format=&quot;%(refname)%(if)%(authorname)%(then) Authored by: %(authorname)%(end)&quot;
</pre>
</div>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
Note that the sizes of objects on disk are reported accurately, but care should
  be taken in drawing conclusions about which refs or objects are responsible
  for disk usage. The size of a packed non-delta object may be much larger than
  the size of objects which delta against it, but the choice of which object is
  the base and which is the delta is arbitrary and is subject to change during a
  repack.
<p class="Pp">Note also that multiple copies of an object may be present in the
    object database; in this case, it is undefined which copy&#x2019;s size or
    delta base will be reported.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<b>git-show-ref</b>(1)
</section>
<section class="Sh">
<h1 class="Sh" id="GIT"><a class="permalink" href="#GIT">GIT</a></h1>
Part of the <b>git</b>(1) suite
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">11/04/2019</td>
    <td class="foot-os">Git 2.24.0</td>
  </tr>
</table>
</body>
</html>
