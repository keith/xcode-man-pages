<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Net::DNS::Packet(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::DNS::Packet(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Net::DNS::Packet(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Net::DNS::Packet - DNS protocol packet
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
    use Net::DNS::Packet;

    $query = new Net::DNS::Packet( 'example.com', 'MX', 'IN' );

    $reply = $resolver-&gt;send( $query );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
A Net::DNS::Packet object represents a DNS protocol packet.
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="new"><a class="permalink" href="#new">new</a></h2>
<span class="Li"></span>
<pre>
    $packet = new Net::DNS::Packet( 'example.com' );
    $packet = new Net::DNS::Packet( 'example.com', 'MX', 'IN' );

    $packet = new Net::DNS::Packet();
</pre>
<p class="Pp">If passed a domain, type, and class, <i>new()</i> creates a
    Net::DNS::Packet object which is suitable for making a DNS query for the
    specified information. The type and class may be omitted; they default to A
    and IN.</p>
<p class="Pp">If called with an empty argument list, <i>new()</i> creates an
    empty packet.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    $packet = new Net::DNS::Packet( \$data );
    $packet = new Net::DNS::Packet( \$data, 1 );        # debug
</pre>
<p class="Pp">If passed a reference to a scalar containing DNS packet data, a
    new packet object is created by decoding the data. The optional second
    boolean argument is used to enable debugging output.</p>
<p class="Pp">Returns undef if unable to create a packet object.</p>
<p class="Pp">Decoding errors, including data corruption and truncation, are
    collected in the $@ ($EVAL_ERROR) variable.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    ( $packet, $length ) = new Net::DNS::Packet( \$data );
</pre>
<p class="Pp">If called in array context, returns a packet object and the number
    of octets successfully decoded.</p>
<p class="Pp">Note that the number of RRs in each section of the packet may
    differ from the corresponding header value if the data has been truncated or
    corrupted during transmission.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="data"><a class="permalink" href="#data">data</a></h2>
<span class="Li"></span>
<pre>
    $data = $packet-&gt;data;
    $data = $packet-&gt;data( $size );
</pre>
<p class="Pp">Returns the packet data in binary format, suitable for sending as
    a query or update request to a nameserver.</p>
<p class="Pp">Truncation may be specified using a non-zero optional size
    argument.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="header"><a class="permalink" href="#header">header</a></h2>
<span class="Li"></span>
<pre>
    $header = $packet-&gt;header;
</pre>
<p class="Pp">Constructor method which returns a Net::DNS::Header object which
    represents the header section of the packet.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1EDNS_s0_extended_header"><a class="permalink" href="#_s-1EDNS_s0_extended_header">EDNS
  extended header</a></h2>
<span class="Li"></span>
<pre>
    $edns    = $packet-&gt;edns;
    $version = $edns-&gt;version;
    $size    = $edns-&gt;size;
</pre>
<p class="Pp">Auxilliary function <i>edns()</i> provides access to EDNS
    extensions.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="reply"><a class="permalink" href="#reply">reply</a></h2>
<span class="Li"></span>
<pre>
    $reply = $query-&gt;reply( $UDPmax );
</pre>
<p class="Pp">Constructor method which returns a new reply packet.</p>
<p class="Pp">The optional UDPsize argument is the maximum UDP packet size which
    can be reassembled by the local network stack, and is advertised in response
    to an EDNS query.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="question,_zone"><a class="permalink" href="#question,_zone">question,
  zone</a></h2>
<span class="Li"></span>
<pre>
    @question = $packet-&gt;question;
</pre>
<p class="Pp">Returns a list of Net::DNS::Question objects representing the
    question section of the packet.</p>
<p class="Pp">In dynamic update packets, this section is known as <i>zone()</i>
    and specifies the DNS zone to be updated.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="answer,_pre,_prerequisite"><a class="permalink" href="#answer,_pre,_prerequisite">answer,
  pre, prerequisite</a></h2>
<span class="Li"></span>
<pre>
    @answer = $packet-&gt;answer;
</pre>
<p class="Pp">Returns a list of Net::DNS::RR objects representing the answer
    section of the packet.</p>
<p class="Pp">In dynamic update packets, this section is known as <i>pre()</i>
    or <i>prerequisite()</i> and specifies the RRs or RRsets which must or must
    not preexist.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="authority,_update"><a class="permalink" href="#authority,_update">authority,
  update</a></h2>
<span class="Li"></span>
<pre>
    @authority = $packet-&gt;authority;
</pre>
<p class="Pp">Returns a list of Net::DNS::RR objects representing the authority
    section of the packet.</p>
<p class="Pp">In dynamic update packets, this section is known as
    <i>update()</i> and specifies the RRs or RRsets to be added or deleted.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="additional"><a class="permalink" href="#additional">additional</a></h2>
<span class="Li"></span>
<pre>
    @additional = $packet-&gt;additional;
</pre>
<p class="Pp">Returns a list of Net::DNS::RR objects representing the additional
    section of the packet.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="print"><a class="permalink" href="#print">print</a></h2>
<span class="Li"></span>
<pre>
    $packet-&gt;print;
</pre>
<p class="Pp">Prints the packet data on the standard output in an ASCII format
    similar to that used in DNS zone files.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="string"><a class="permalink" href="#string">string</a></h2>
<span class="Li"></span>
<pre>
    print $packet-&gt;string;
</pre>
<p class="Pp">Returns a string representation of the packet.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="answerfrom"><a class="permalink" href="#answerfrom">answerfrom</a></h2>
<span class="Li"></span>
<pre>
    print &quot;packet received from &quot;, $packet-&gt;answerfrom, &quot;\n&quot;;
</pre>
<p class="Pp">Returns the IP address from which this packet was received.
    User-created packets will return undef for this method.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="answersize"><a class="permalink" href="#answersize">answersize</a></h2>
<span class="Li"></span>
<pre>
    print &quot;packet size: &quot;, $packet-&gt;answersize, &quot; bytes\n&quot;;
</pre>
<p class="Pp">Returns the size of the packet in bytes as it was received from a
    nameserver. User-created packets will return undef for this method (use
    length($packet-&gt;data) instead).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="push"><a class="permalink" href="#push">push</a></h2>
<span class="Li"></span>
<pre>
    $ancount = $packet-&gt;push( prereq =&gt; $rr );
    $nscount = $packet-&gt;push( update =&gt; $rr );
    $arcount = $packet-&gt;push( additional =&gt; $rr );

    $nscount = $packet-&gt;push( update =&gt; $rr1, $rr2, $rr3 );
    $nscount = $packet-&gt;push( update =&gt; @rr );
</pre>
<p class="Pp">Adds RRs to the specified section of the packet.</p>
<p class="Pp">Returns the number of resource records in the specified
  section.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="unique_push"><a class="permalink" href="#unique_push">unique_push</a></h2>
<span class="Li"></span>
<pre>
    $ancount = $packet-&gt;unique_push( prereq =&gt; $rr );
    $nscount = $packet-&gt;unique_push( update =&gt; $rr );
    $arcount = $packet-&gt;unique_push( additional =&gt; $rr );

    $nscount = $packet-&gt;unique_push( update =&gt; $rr1, $rr2, $rr3 );
    $nscount = $packet-&gt;unique_push( update =&gt; @rr );
</pre>
<p class="Pp">Adds RRs to the specified section of the packet provided that the
    RRs are not already present in the same section.</p>
<p class="Pp">Returns the number of resource records in the specified
  section.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="pop"><a class="permalink" href="#pop">pop</a></h2>
<span class="Li"></span>
<pre>
    my $rr = $packet-&gt;pop( 'pre' );
    my $rr = $packet-&gt;pop( 'update' );
    my $rr = $packet-&gt;pop( 'additional' );
</pre>
<p class="Pp">Removes a single RR from the specified section of the packet.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="sign_tsig"><a class="permalink" href="#sign_tsig">sign_tsig</a></h2>
<span class="Li"></span>
<pre>
    $update = new Net::DNS::Update( 'example.com' );
    $update-&gt;push( update =&gt; rr_add( 'foo.example.com A 10.1.2.3' ) );
    $update-&gt;sign_tsig( 'Khmac-sha512.example.+165+01018.key' );

    $update-&gt;sign_tsig( 'Khmac-sha512.example.+165+01018.key',
                        fudge =&gt; 60
                        );
</pre>
<p class="Pp">Attaches a TSIG resource record object, which will be used to sign
    the packet (see RFC 2845).</p>
<p class="Pp">The TSIG record can be customised by optional additional arguments
    to <i>sign_tsig()</i> or by calling the appropriate Net::DNS::RR::TSIG
    methods.</p>
<p class="Pp">If you wish to create a TSIG record using a non-standard
    algorithm, you will have to create it yourself. In all cases, the TSIG name
    must uniquely identify the key shared between the parties, and the algorithm
    name must identify the signing function to be used with the specified
  key.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    $tsig = Net::DNS::RR-&gt;new(  name            =&gt; 'tsig.example',
                                type            =&gt; 'TSIG',
                                algorithm       =&gt; 'custom-algorithm',
                                sig_function    =&gt; sub { ... },
                                key             =&gt; '&lt;base64 key text&gt;'
                                );

    $packet = Net::DNS::Packet-&gt;new( 'www.example.com', 'A' );
    $packet-&gt;sign_tsig( $tsig );

    $response = $res-&gt;send( $packet );
</pre>
<p class="Pp">The historical simplified syntax is still available, but
    additional options can not be specified.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    $packet-&gt;sign_tsig( $key_name, $key );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="sign_sig0"><a class="permalink" href="#sign_sig0">sign_sig0</a></h2>
SIG0 support is provided through the Net::DNS::RR::SIG class. This class is not
  part of the default Net::DNS distribution but resides in the Net::DNS::SEC
  distribution.
<p class="Pp"><span class="Li"></span></p>
<pre>
    $update = new Net::DNS::Update('example.com');
    $update-&gt;push( update =&gt; rr_add('foo.example.com A 10.1.2.3'));
    $update-&gt;sign_sig0('Kexample.com+003+25317.private');
</pre>
<p class="Pp">The method will call <i>Carp::croak()</i> if Net::DNS::RR::SIG can
    not be found.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="verify_and_verifyerr"><a class="permalink" href="#verify_and_verifyerr">verify
  and verifyerr</a></h2>
<span class="Li"></span>
<pre>
    $packet-&gt;verify()           || die $packet-&gt;verifyerr;
    $reply-&gt;verify( $query )    || die $reply-&gt;verifyerr;
</pre>
<p class="Pp">Verify TSIG signature of packet or reply to the corresponding
    query.</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
    $packet-&gt;verify( $keyrr )           || die $packet-&gt;verifyerr;
    $packet-&gt;verify( [$keyrr, ...] )    || die $packet-&gt;verifyerr;
</pre>
<p class="Pp">Verify SIG0 packet signature against one or more specified KEY
    RRs.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="truncate"><a class="permalink" href="#truncate">truncate</a></h2>
The truncate method takes a maximum length as argument and then tries to
  truncate the packet and set the TC bit according to the rules of RFC2181
  Section 9.
<p class="Pp">The minimum maximum length that is honoured is 512 octets.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
Copyright (c)1997-2002 Michael Fuhr.
<p class="Pp">Portions Copyright (c)2002-2004 Chris Reinhardt.</p>
<p class="Pp">Portions Copyright (c)2002-2009 Olaf Kolkman</p>
<p class="Pp">Portions Copyright (c)2007-2013 Dick Franks</p>
<p class="Pp">All rights reserved.</p>
<p class="Pp">This program is free software; you may redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
perl, Net::DNS, Net::DNS::Update, Net::DNS::Header, Net::DNS::Question,
  Net::DNS::RR, Net::DNS::RR::TSIG, RFC1035 Section 4.1, RFC2136 Section 2,
  RFC2845
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-01-16</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
