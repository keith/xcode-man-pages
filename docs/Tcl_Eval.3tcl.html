<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1989-1993 The Regents of the University of California.
   Copyright (c) 1994-1997 Sun Microsystems, Inc.
   Copyright (c) 2000 Scriptics Corporation.
  
   See the file "license.terms" for information on usage and redistribution
   of this file, and for a DISCLAIMER OF ALL WARRANTIES.
  
   RCS: @(#) $Id: Eval.3,v 1.27 2007/12/13 15:22:31 dgp Exp $
  
   The -*- nroff -*- definitions below are for supplemental macros used
   in Tcl/Tk manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO ?manpage?
  	Start of list of standard options for a Tk widget. The manpage
  	argument defines where to look up the standard options; if
  	omitted, defaults to "options". The options follow on successive
  	lines, in three columns separated by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   .QW arg1 ?arg2?
  	Print arg1 in quotes, then arg2 normally (for trailing punctuation).
  
   .PQ arg1 ?arg2?
  	Print an open parenthesis, arg1 in quotes, then arg2 normally
  	(for trailing punctuation) and then a closing parenthesis.
  
   RCS: @(#) $Id: man.macros,v 1.9 2008/01/29 15:32:33 dkf Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Tcl_Eval(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Tcl_Eval(3)</td>
    <td class="head-vol">Tcl Library Procedures</td>
    <td class="head-rtitle">Tcl_Eval(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Tcl_EvalObjEx, Tcl_EvalFile, Tcl_EvalObjv, Tcl_Eval, Tcl_EvalEx,
    Tcl_GlobalEval, Tcl_GlobalEvalObj, Tcl_VarEval, Tcl_VarEvalVA - execute Tcl
    scripts</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><b>#include &lt;tcl.h&gt;</b>

int
<b>Tcl_EvalObjEx</b>(<i>interp, objPtr, flags</i>)

int
<b>Tcl_EvalFile</b>(<i>interp, fileName</i>)

int
<b>Tcl_EvalObjv</b>(<i>interp, objc, objv, flags</i>)

int
<b>Tcl_Eval</b>(<i>interp, script</i>)

int
<b>Tcl_EvalEx</b>(<i>interp, script, numBytes, flags</i>)

int
<b>Tcl_GlobalEval</b>(<i>interp, script</i>)

int
<b>Tcl_GlobalEvalObj</b>(<i>interp, objPtr</i>)

int
<b>Tcl_VarEval</b>(<i>interp, part, part, ... </i><b>(char *) NULL</b>)

int
<b>Tcl_VarEvalVA</b>(<i>interp, argList</i>)</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ARGUMENTS"><a class="permalink" href="#ARGUMENTS">ARGUMENTS</a></h1>
<dl class="Bl-tag">
  <dt>Tcl_Interp <i>*interp</i> (in)</dt>
  <dd>Interpreter in which to execute the script. The interpreter's result is
      modified to hold the result or error message from the script.</dd>
  <dt>Tcl_Obj <i>*objPtr</i> (in)</dt>
  <dd>A Tcl object containing the script to execute.</dd>
  <dt>int <i>flags</i> (in)</dt>
  <dd>ORed combination of flag bits that specify additional options.
      <b>TCL_EVAL_GLOBAL</b> and <b>TCL_EVAL_DIRECT</b> are currently
    supported.</dd>
  <dt>const char <i>*fileName</i> (in)</dt>
  <dd>Name of a file containing a Tcl script.</dd>
  <dt>int <i>objc</i> (in)</dt>
  <dd>The number of objects in the array pointed to by <i>objPtr</i>; this is
      also the number of words in the command.</dd>
  <dt>Tcl_Obj <i>**objv</i> (in)</dt>
  <dd>Points to an array of pointers to objects; each object holds the value of
      a single word in the command to execute.</dd>
  <dt>int <i>numBytes</i> (in)</dt>
  <dd>The number of bytes in <i>script</i>, not including any null terminating
      character. If -1, then all characters up to the first null byte are
    used.</dd>
  <dt>const char <i>*script</i> (in)</dt>
  <dd>Points to first byte of script to execute (null-terminated and
    UTF-8).</dd>
  <dt>char <i>*part</i> (in)</dt>
  <dd>String forming part of a Tcl script.</dd>
  <dt>va_list <i>argList</i> (in)</dt>
  <dd>An argument list which must have been initialized using <b>va_start</b>,
      and cleared using <b>va_end</b>.
    <pre>
    </pre>
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The procedures described here are invoked to execute Tcl scripts
    in various forms. <b>Tcl_EvalObjEx</b> is the core procedure and is used by
    many of the others. It executes the commands in the script stored in
    <i>objPtr</i> until either an error occurs or the end of the script is
    reached. If this is the first time <i>objPtr</i> has been executed, its
    commands are compiled into bytecode instructions which are then executed.
    The bytecodes are saved in <i>objPtr</i> so that the compilation step can be
    skipped if the object is evaluated again in the future.</p>
<p class="Pp">The return value from <b>Tcl_EvalObjEx</b> (and all the other
    procedures described here) is a Tcl completion code with one of the values
    <b>TCL_OK</b>, <b>TCL_ERROR</b>, <b>TCL_RETURN</b>, <b>TCL_BREAK</b>, or
    <b>TCL_CONTINUE</b>, or possibly some other integer value originating in an
    extension. In addition, a result value or error message is left in
    <i>interp</i>'s result; it can be retrieved using
  <b>Tcl_GetObjResult</b>.</p>
<p class="Pp"><b>Tcl_EvalFile</b> reads the file given by <i>fileName</i> and
    evaluates its contents as a Tcl script. It returns the same information as
    <b>Tcl_EvalObjEx</b>. If the file could not be read then a Tcl error is
    returned to describe why the file could not be read. The eofchar for files
    is &#x201C;\32&#x201D; (^Z) for all platforms. If you require a
    &#x201C;^Z&#x201D; in code for string comparison, you can use
    &#x201C;\032&#x201D; or &#x201C;\u001a&#x201D;, which will be safely
    substituted by the Tcl interpreter into &#x201C;^Z&#x201D;.</p>
<p class="Pp"><b>Tcl_EvalObjv</b> executes a single pre-parsed command instead
    of a script. The <i>objc</i> and <i>objv</i> arguments contain the values of
    the words for the Tcl command, one word in each object in <i>objv</i>.
    <b>Tcl_EvalObjv</b> evaluates the command and returns a completion code and
    result just like <b>Tcl_EvalObjEx</b>. The caller of <b>Tcl_EvalObjv</b> has
    to manage the reference count of the elements of <i>objv</i>, insuring that
    the objects are valid until <b>Tcl_EvalObjv</b> returns.</p>
<p class="Pp"><b>Tcl_Eval</b> is similar to <b>Tcl_EvalObjEx</b> except that the
    script to be executed is supplied as a string instead of an object and no
    compilation occurs. The string should be a proper UTF-8 string as converted
    by <b>Tcl_ExternalToUtfDString</b> or <b>Tcl_ExternalToUtf</b> when it is
    known to possibly contain upper ASCII characters whose possible combinations
    might be a UTF-8 special code. The string is parsed and executed directly
    (using <b>Tcl_EvalObjv</b>) instead of compiling it and executing the
    bytecodes. In situations where it is known that the script will never be
    executed again, <b>Tcl_Eval</b> may be faster than <b>Tcl_EvalObjEx</b>.
  <br/>
   <b>Tcl_Eval</b> returns a completion code and result just like
    <b>Tcl_EvalObjEx</b>. Note: for backward compatibility with versions before
    Tcl 8.0, <b>Tcl_Eval</b> copies the object result in <i>interp</i> to
    <i>interp-&gt;result</i> (use is deprecated) where it can be accessed
    directly.
  <br/>
   This makes <b>Tcl_Eval</b> somewhat slower than <b>Tcl_EvalEx</b>, which does
    not do the copy.</p>
<p class="Pp"><b>Tcl_EvalEx</b> is an extended version of <b>Tcl_Eval</b> that
    takes additional arguments <i>numBytes</i> and <i>flags</i>. For the
    efficiency reason given above, <b>Tcl_EvalEx</b> is generally preferred over
    <b>Tcl_Eval</b>.</p>
<p class="Pp"><b>Tcl_GlobalEval</b> and <b>Tcl_GlobalEvalObj</b> are older
    procedures that are now deprecated. They are similar to <b>Tcl_EvalEx</b>
    and <b>Tcl_EvalObjEx</b> except that the script is evaluated in the global
    namespace and its variable context consists of global variables only (it
    ignores any Tcl procedures that are active). These functions are equivalent
    to using the <b>TCL_EVAL_GLOBAL</b> flag (see below).</p>
<p class="Pp"><b>Tcl_VarEval</b> takes any number of string arguments of any
    length, concatenates them into a single string, then calls <b>Tcl_Eval</b>
    to execute that string as a Tcl command. It returns the result of the
    command and also modifies <i>interp-&gt;result</i> in the same way as
    <b>Tcl_Eval</b>. The last argument to <b>Tcl_VarEval</b> must be NULL to
    indicate the end of arguments. <b>Tcl_VarEval</b> is now deprecated.</p>
<p class="Pp"><b>Tcl_VarEvalVA</b> is the same as <b>Tcl_VarEval</b> except that
    instead of taking a variable number of arguments it takes an argument list.
    Like <b>Tcl_VarEval</b>, <b>Tcl_VarEvalVA</b> is deprecated.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="FLAG_BITS"><a class="permalink" href="#FLAG_BITS">FLAG
  BITS</a></h1>
<p class="Pp">Any ORed combination of the following values may be used for the
    <i>flags</i> argument to procedures such as <b>Tcl_EvalObjEx</b>:</p>
<dl class="Bl-tag">
  <dt id="TCL_EVAL_DIRECT"><a class="permalink" href="#TCL_EVAL_DIRECT"><b>TCL_EVAL_DIRECT</b></a></dt>
  <dd>This flag is only used by <b>Tcl_EvalObjEx</b>; it is ignored by other
      procedures. If this flag bit is set, the script is not compiled to
      bytecodes; instead it is executed directly as is done by
      <b>Tcl_EvalEx</b>. The <b>TCL_EVAL_DIRECT</b> flag is useful in situations
      where the contents of an object are going to change immediately, so the
      bytecodes will not be reused in a future execution. In this case, it is
      faster to execute the script directly.</dd>
  <dt id="TCL_EVAL_GLOBAL"><a class="permalink" href="#TCL_EVAL_GLOBAL"><b>TCL_EVAL_GLOBAL</b></a></dt>
  <dd>If this flag is set, the script is processed at global level. This means
      that it is evaluated in the global namespace and its variable context
      consists of global variables only (it ignores any Tcl procedures at are
      active).
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="MISCELLANEOUS_DETAILS"><a class="permalink" href="#MISCELLANEOUS_DETAILS">MISCELLANEOUS
  DETAILS</a></h1>
<p class="Pp">During the processing of a Tcl command it is legal to make nested
    calls to evaluate other commands (this is how procedures and some control
    structures are implemented). If a code other than <b>TCL_OK</b> is returned
    from a nested <b>Tcl_EvalObjEx</b> invocation, then the caller should
    normally return immediately, passing that same return code back to its
    caller, and so on until the top-level application is reached. A few
    commands, like <b>for</b>, will check for certain return codes, like
    <b>TCL_BREAK</b> and <b>TCL_CONTINUE</b>, and process them specially without
    returning.</p>
<p class="Pp"><b>Tcl_EvalObjEx</b> keeps track of how many nested
    <b>Tcl_EvalObjEx</b> invocations are in progress for <i>interp</i>. If a
    code of <b>TCL_RETURN</b>, <b>TCL_BREAK</b>, or <b>TCL_CONTINUE</b> is about
    to be returned from the topmost <b>Tcl_EvalObjEx</b> invocation for
    <i>interp</i>, it converts the return code to <b>TCL_ERROR</b> and sets
    <i>interp</i>'s result to an error message indicating that the
    <b>return</b>, <b>break</b>, or <b>continue</b> command was invoked in an
    inappropriate place. This means that top-level applications should never see
    a return code from <b>Tcl_EvalObjEx</b> other then <b>TCL_OK</b> or
    <b>TCL_ERROR</b>.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">execute, file, global, object, result, script</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">8.1</td>
    <td class="foot-os">Tcl</td>
  </tr>
</table>
</body>
</html>
