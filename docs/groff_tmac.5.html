<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>GROFF_TMAC(5)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GROFF_TMAC(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">GROFF_TMAC(5)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">groff_tmac - macro files in the roff typesetting system</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <b>roff</b>(7) type-setting system provides a set of macro
    packages suitable for special kinds of documents. Each macro package stores
    its macros and definitions in a file called the package's <b>tmac file</b>.
    The name is deduced from `<b>T</b><i>roff</i><b>MAC</b><i>ros</i>'.</p>
<p class="Pp">The tmac files are normal roff source documents, except that they
    usually contain only definitions and setup commands, but no text. All tmac
    files are kept in a single or a small number of directories, the <b>tmac</b>
    directories.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="GROFF_MACRO_PACKAGES"><a class="permalink" href="#GROFF_MACRO_PACKAGES">GROFF
  MACRO PACKAGES</a></h1>
<p class="Pp"><i>groff</i> provides all classical macro packages, some more full
    packages, and some secondary packages for special purposes. Note that it is
    not possible to use multiple primary macro packages at the same time; saying
    e.g.</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot; &quot;groff -m man
      -m ms foo&quot;</span></dd>
</dl>
<p class="Pp">or</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot; &quot;groff -m man
      foo -m ms bar&quot;</span></dd>
</dl>
<p class="Pp">will fail.</p>
<section class="Ss">
<h2 class="Ss" id="Man"><a class="permalink" href="#Man">Man&#x00A0;Pages</a></h2>
<dl class="Bl-tag">
  <dt id="man"><a class="permalink" href="#man"><b>man</b></a></dt>
  <dd>This is the classical macro package for UNIX manual pages
      (man&#x00A0;pages); it is quite handy and easy to use; see
      <b>groff_man</b>(7).</dd>
  <dt id="doc"><a class="permalink" href="#doc"><b>doc</b></a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="mdoc"><a class="permalink" href="#mdoc"><b>mdoc</b></a></dt>
  <dd>An alternative macro package for man&#x00A0;pages mainly used in BSD
      systems; it provides many new features, but it is not the standard for
      man&#x00A0;pages; see <b>groff_mdoc</b>(7).</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Full_Packages"><a class="permalink" href="#Full_Packages">Full
  Packages</a></h2>
<p class="Pp">The packages in this section provide a complete set of macros for
    writing documents of any kind, up to whole books. They are similar in
    functionality; it is a matter of taste which one to use.</p>
<dl class="Bl-tag">
  <dt id="me"><a class="permalink" href="#me"><b>me</b></a></dt>
  <dd>The classical <i>me</i> macro package; see <b>groff_me</b>(7).</dd>
  <dt id="mm"><a class="permalink" href="#mm"><b>mm</b></a></dt>
  <dd>The semi-classical <i>mm</i> macro package; see <b>groff_mm</b>(7).</dd>
  <dt id="mom"><a class="permalink" href="#mom"><b>mom</b></a></dt>
  <dd>The new <i>mom</i> macro package, only available in groff. As this is not
      based on other packages, it can be freely designed. So it is expected to
      become quite a nice, modern macro package. See <b>groff_mom</b>(7).</dd>
  <dt id="ms"><a class="permalink" href="#ms"><b>ms</b></a></dt>
  <dd>The classical <i>ms</i> macro package; see <b>groff_ms</b>(7).</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Special_Packages"><a class="permalink" href="#Special_Packages">Special
  Packages</a></h2>
<p class="Pp">The macro packages in this section are not intended for
    stand-alone usage, but can be used to add special functionality to any other
    macro package or to plain groff.</p>
<dl class="Bl-tag">
  <dt id="papersize"><a class="permalink" href="#papersize"><b>papersize</b></a></dt>
  <dd>This macro file is already loaded at start-up by <b>troff</b> so it isn't
      necessary to call it explicitly. It provides an interface to set the paper
      size on the command line with the option <b>-dpaper=</b><i>size</i>.
      Possible values for <i>size</i> are the same as the predefined
      <b>papersize</b> values in the DESC file (only lowercase; see
      <b>groff_font</b>(5) for more) except <b>a7</b>-<b>d7</b>. An appended
      <b>l</b> (ell) character denotes landscape orientation. Examples:
      <b>a4</b>, <b>c3l</b>, <b>letterl</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Most output drivers need additional command line switches <b>-p</b> and
      <b>-l</b> to override the default paper length and orientation as set in
      the driver specific DESC file. For example, use the following for PS
      output on A4 paper in landscape orientation:</dd>
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot; &quot;groff -Tps
      -dpaper=a4l -P-pa4 -P-l -ms foo.ms &gt; foo.ps&quot;</span></dd>
</dl>
<dl class="Bl-tag">
  <dt id="pic"><a class="permalink" href="#pic"><b>pic</b></a></dt>
  <dd>This file provides proper definitions for the macros <b>PS</b> and
      <b>PE</b>, needed for the <b>pic</b>(1) preprocessor. They will center
      each picture. Use it only if your macro package doesn't provide proper
      definitions for those two macros (actually, most of them already
    have).</dd>
  <dt id="pspic"><a class="permalink" href="#pspic"><b>pspic</b></a></dt>
  <dd>A single macro is provided in this file, <b>PSPIC</b>, to include a
      PostScript graphic in a document. It makes only sense for output devices
      which support inclusion of PS images: <b>-Tps</b>, <b>-Tdvi</b>, and
      <b>-Thtml</b>; the file is then loaded automatically. Syntax:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt></dt>
  <dd><b>.PSPIC</b> [<b>-L</b>|<b>-R</b>|<b>-I</b> <i>n</i>]&#x00A0;<i>file</i>
      [<i>width</i> [<i>height</i>]]</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd><i>file</i> is the name of the file containing the illustration;
      <i>width</i> and <i>height</i> give the desired width and height of the
      graphic. The <i>width</i> and <i>height</i> arguments may have scaling
      indicators attached; the default scaling indicator is&#x00A0;<b>i</b>.
      This macro will scale the graphic uniformly in the x and
      y&#x00A0;directions so that it is no more than <i>width</i> wide and
      <i>height</i> high. By default, the graphic will be horizontally centered.
      The <b>-L</b> and <b>-R</b> options cause the graphic to be left-aligned
      and right-aligned, respectively. The <b>-I</b> option causes the graphic
      to be indented by&#x00A0;<i>n</i> (default scaling indicator
      is&#x00A0;<b>m</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt id="trace"><a class="permalink" href="#trace"><b>trace</b></a></dt>
  <dd>Use this for tracing macro calls. It is only useful for debugging. See
      <b>groff_trace</b>(7)<b>.</b></dd>
  <dt id="tty-char"><a class="permalink" href="#tty-char"><b>tty-char</b></a></dt>
  <dd>Overrides the definition of standard troff characters and some groff
      characters for tty devices. The optical appearance is intentionally
      inferior compared to that of normal tty formatting to allow processing
      with critical equipment.</dd>
  <dt id="www"><a class="permalink" href="#www"><b>www</b></a></dt>
  <dd>Additions of elements known from the html format, as being used in the
      internet (World Wide Web) pages; this includes URL links and mail
      addresses; see <b>groff_www</b>(7).</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="NAMING"><a class="permalink" href="#NAMING">NAMING</a></h1>
<p class="Pp">In classical roff systems, there was a funny naming scheme for
    macro packages, due to a simplistic design in option parsing. Macro packages
    were always included by option <span class="Li"><b>-m;</b></span> when this
    option was directly followed by its argument without an intervening space,
    this looked like a long option preceded by a single minus &#x2014; a
    sensation in the computer stone age. To make this optically working for
    macro package names, all classical macro packages choose a name that started
    with the letter `<span class="Li">m</span>', which was omitted in the naming
    of the macro file.</p>
<p class="Pp">For example, the macro package for the man pages was called
    <i>man</i>, while its macro file <i>tmac.an</i>. So it could be activated by
    the argument <i>an</i> to option <span class="Li"><b>-m</b></span>, or
    <span class="Li"><b>-man</b></span> for short.</p>
<p class="Pp">For similar reasons, macro packages that did not start with an
    `<span class="Li">m</span>' had a leading `<span class="Li">m</span>' added
    in the documentation and in talking; for example, the package corresponding
    to <i>tmac.doc</i> was called <i>mdoc</i> in the documentation, although a
    more suitable name would be <i>doc</i>. For, when omitting the space between
    the option and its argument, the command line option for activating this
    package reads <span class="Li"><b>-mdoc</b></span>.</p>
<p class="Pp">To cope with all situations, actual versions of <b>groff</b>(1)
    are smart about both naming schemes by providing two macro files for the
    inflicted macro packages; one with a leading `<span class="Li">m</span>',
    the other one without it. So in <i>groff</i>, the <i>man</i> macro package
    may be specified as on of the following four methods:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-m&#x00A0;man&quot;</span>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-man&quot;</span>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-mman&quot;</span>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-m&#x00A0;an&quot;</span></dd>
</dl>
<p class="Pp">Recent packages that do not start with `<span class="Li">m</span>'
    do not use an additional `<span class="Li">m</span>' in the documentation.
    For example, the <i>www</i> macro package may be specified only as one of
    the two methods:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-m&#x00A0;www&quot;</span>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-mwww&quot;</span></dd>
</dl>
<p class="Pp">Obviously, variants like <i>-mmwww</i> would not make much
  sense.</p>
<p class="Pp">A second strange feature of classical troff was to name macro
    files according to <b>tmac.</b><i>name</i>. In modern operating systems, the
    type of a file is specified as postfix, the file name extension. Again,
    groff copes with this situation by searching both
    <i>anything</i><b>.tmac</b> and <b>tmac.</b><i>anything</i> if only
    <i>anything</i> is specified.</p>
<p class="Pp">The easiest way to find out which macro packages are available on
    a system is to check the man&#x00A0;page <b>groff</b>(1), or the contents of
    the <i>tmac</i> directories.</p>
<p class="Pp">In <i>groff</i>, most macro packages are described in&#x00A0;man
    pages called <b>groff_<i>name</i></b>(7), with a leading
    `<span class="Li">m</span>' for the classical packages.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INCLUSION"><a class="permalink" href="#INCLUSION">INCLUSION</a></h1>
<p class="Pp">There are several ways to use a macro package in a document. The
    classical way is to specify the troff/groff option
    <span class="Li"><b>-m</b></span> <span class="Li"><i>name</i></span> at
    run-time; this makes the contents of the macro package <i>name</i>
    available. In groff, the file <i>name</i><b>.tmac</b> is searched within the
    tmac path; if not found, <b>tmac.</b><i>name</i> will be searched for
    instead.</p>
<p class="Pp">Alternatively, it is also possible to include a macro file by
    adding the request .<span class="Li"><b>so</b></span> <i>filename</i> into
    the document; the argument must be the full file name of an existing file,
    possibly with the directory where it is kept. In groff, this was improved by
    the similar request .<span class="Li"><b>mso</b></span> <i>package</i>,
    which added searching in the tmac path, just like option
    <span class="Li"><b>-m</b></span> does.</p>
<p class="Pp">Note that in order to resolve the
    .<span class="Li"><b>so</b></span> and .<span class="Li"><b>mso</b></span>
    requests, the roff preprocessor <b>soelim</b>(1) must be called if the files
    to be included need preprocessing. This can be done either directly by a
    pipeline on the command line or by using the troff/groff option
    <span class="Li"><b>-s</b></span>. <i>man</i> calls soelim
  automatically.</p>
<p class="Pp">For example, suppose a macro file is stored as
    <i>/usr/share/groff/1.19.2/tmac/macros.tmac</i> and is used in some document
    called <i>docu.roff</i>.</p>
<p class="Pp">At run-time, the formatter call for this is</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-m&#x00A0;&quot;
      &quot;macrofile&#x00A0;document.roff&quot;</span></dd>
</dl>
<p class="Pp">To include the macro file directly in the document either</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<pre>
<span class="Li">.mso macrofile.tmac</span></pre>
</div>
<pre></pre>
<p class="Pp">is used or</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<pre>
<span class="Li">.so /usr/share/groff/1.19.2/tmac/macros.tmac</span></pre>
</div>
<pre></pre>
<p class="Pp">In both cases, the formatter is called with</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
    <pre></pre>
    <br/>
    ].groffer:Shell_cmd.prompt_text <span class="Li">&quot;
      &quot;groff&#x00A0;-s&#x00A0;&quot; &quot;docu.roff&quot;</span></dd>
</dl>
<p class="Pp">If you want to write your own groff macro file, call it
    <i>whatever</i><b>.tmac</b> and put it in some directory of the tmac path,
    see section <b>FILES</b>. Then documents can include it with the
    .<span class="Li"><b>mso</b></span> request or the option
    <span class="Li"><b>-m</b></span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="WRITING_MACROS"><a class="permalink" href="#WRITING_MACROS">WRITING
  MACROS</a></h1>
<p class="Pp">A <b>roff</b>(7) document is a text file that is enriched by
    predefined formatting constructs, such as requests, escape sequences,
    strings, numeric registers, and macros from a macro package. These elements
    are described in <b>roff</b>(7).</p>
<p class="Pp">To give a document a personal style, it is most useful to extend
    the existing elements by defining some macros for repeating tasks; the best
    place for this is near the beginning of the document or in a separate
  file.</p>
<p class="Pp">Macros without arguments are just like strings. But the full power
    of macros reveals when arguments are passed with a macro call. Within the
    macro definition, the arguments are available as the escape sequences
    <b>$1</b>, ..., <b>$9</b>, <b>$[</b>...<b>]</b>, <b>$*</b>, and <b>$@</b>,
    the name under which the macro was called is in <b>$0</b>, and the number of
    arguments is in register <b>0</b>; see <b>groff</b>(7).</p>
<section class="Ss">
<h2 class="Ss" id="Copy-in_Mode"><a class="permalink" href="#Copy-in_Mode">Copy-in
  Mode</a></h2>
<p class="Pp">The phase when groff reads a macro is called <i>copy-in mode</i>
    in roff-talk. This is comparable to the C&#x00A0;preprocessing phase during
    the development of a program written in the C&#x00A0;language.</p>
<p class="Pp">In this phase, groff interprets all backslashes; that means that
    all escape sequences in the macro body are interpreted and replaced by their
    value. For constant expression, this is wanted, but strings and registers
    that might change between calls of the macro must be protected from being
    evaluated. This is most easily done by doubling the backslash that
    introduces the escape sequence. This doubling is most important for the
    positional parameters. For example, to print information on the arguments
    that were passed to the macro to the terminal, define a macro named
    `.print_args', say.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<span class="Li">.ds midpart was called with</span>
<span class="Li">.de print_args</span>
<span class="Li">.&#x00A0;&#x00A0;tm&#x00A0;\f[I]\\$0\f[]&#x00A0;\\*[midpart]&#x00A0;\\n[.$]&#x00A0;arguments:</span>
<span class="Li">.&#x00A0;&#x00A0;tm&#x00A0;\\$*</span>
<span class="Li">..</span></pre>
</div>
<pre></pre>
<p class="Pp">When calling this macro by</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<span class="Li">.print_args arg1 arg2</span></pre>
</div>
<pre></pre>
<p class="Pp">the following text is printed to the terminal:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<span class="Li"></span><span class="Li"><i>print_args</i></span><span class="Li"> was called with the following 2 arguments:</span>
<span class="Li">arg1 arg2</span></pre>
</div>
<pre></pre>
<p class="Pp">Let's analyze each backslash in the macro definition. As the
    positional parameters and the number of arguments will change with each call
    of the macro their leading backslash must be doubled, which results in
    <i>\\$*</i> and <i>\\[.$]</i>. The same applies to the macro name because it
    could be called with an alias name, so <i>\\$0</i>.</p>
<p class="Pp">On the other hand, <i>midpart</i> is a constant string, it will
    not change, so no doubling for <i>\*[midpart]</i>. The <i>\f</i> escape
    sequences are predefined groff elements for setting the font within the
    text. Of course, this behavior will not change, so no doubling with
    <i>\f[I]</i> and <i>\f[]</i>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Draft_Mode"><a class="permalink" href="#Draft_Mode">Draft
  Mode</a></h2>
<p class="Pp">Writing groff macros is easy when the escaping mechanism is
    temporarily disabled. In groff, this is done by enclosing the macro
    definition(s) into a pair of <b>.eo</b> and <b>.ec</b> requests. Then the
    body in the macro definition is just like a normal part of the document
    &#x2014; text enhanced by calls of requests, macros, strings, registers,
    etc. For example, the code above can be written in a simpler way by</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
<span class="Li">.eo</span>
<span class="Li">.ds midpart was called with</span>
<span class="Li">.de print_args</span>
<span class="Li">.&#x00A0;&#x00A0;tm&#x00A0;\f[I]\$0\f[]&#x00A0;\*[midpart]&#x00A0;\n[.$]&#x00A0;arguments:</span>
<span class="Li">.&#x00A0;&#x00A0;tm&#x00A0;\$*</span>
<span class="Li">..</span>
<span class="Li">.ec</span></pre>
</div>
<pre></pre>
<p class="Pp">Unfortunately, draft mode cannot be used universally. Although it
    is good enough for defining normal macros, draft mode will fail with
    advanced applications, such as indirectly defined strings, registers, etc.
    An optimal way is to define and test all macros in draft mode and then do
    the backslash doubling as a final step; do not forget to remove the
    <i>.eo</i> request.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Tips_for_Macro_Definitions"><a class="permalink" href="#Tips_for_Macro_Definitions">Tips
  for Macro Definitions</a></h2>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Start every line with a dot, for example, by using the groff request
      <b>.nop</b> for text lines, or write your own macro that handles also text
      lines with a leading dot.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<pre>
<span class="Li">.de Text</span>
<span class="Li">.&#x00A0;&#x00A0;if (\\n[.$] == 0)&#x00A0;\</span>
<span class="Li">.&#x00A0;&#x00A0;&#x00A0;&#x00A0;return</span>
<span class="Li">.&#x00A0;nop&#x00A0;\)\\$*[rs]</span>
<span class="Li">..</span></pre>
</div>
<pre></pre>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Write a comment macro that works both for copy-in and draft mode; for as
      escaping is off in draft mode, trouble might occur when normal comments
      are used. For example, the following macro just ignores its arguments, so
      it acts like a comment line:</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<pre>
<span class="Li">.de&#x00A0;c</span>
<span class="Li">..</span>
<span class="Li">.c&#x00A0;This&#x00A0;is&#x00A0;like&#x00A0;a&#x00A0;comment&#x00A0;line.</span></pre>
</div>
<pre></pre>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>In long macro definitions, make ample use of comment lines or empty lines
      for a better structuring.</dd>
  <dt>&#x2022;</dt>
  <dd>To increase readability, use groff's indentation facility for requests and
      macro calls (arbitrary whitespace after the leading dot).</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Diversions"><a class="permalink" href="#Diversions">Diversions</a></h2>
<p class="Pp">Diversions can be used to realize quite advanced programming
    constructs. They are comparable to pointers to large data structures in the
    C&#x00A0;programming language, but their usage is quite different.</p>
<p class="Pp">In their simplest form, diversions are multi-line strings, but
    they get their power when diversions are used dynamically within macros. The
    information stored in a diversion can be retrieved by calling the diversion
    just like a macro.</p>
<p class="Pp">Most of the problems arising with diversions can be avoided if you
    are conscious about the fact that diversions always deal with complete
    lines. If diversions are used when the line buffer has not been flashed,
    strange results are produced; not knowing this, many people get desperate
    about diversions. To ensure that a diversion works, line breaks should be
    added at the right places. To be on the secure side, enclose everything that
    has to do with diversions into a pair of line breaks; for example, by amply
    using <b>.br</b> requests. This rule should be applied to diversion
    definition, both inside and outside, and to all calls of diversions. This is
    a bit of overkill, but it works nicely.</p>
<p class="Pp">[If you really need diversions which should ignore the current
    partial line, use environments to save the current partial line and/or use
    the <b>.box</b> request.]</p>
<p class="Pp">The most powerful feature using diversions is to start a diversion
    within a macro definition and end it within another macro. Then everything
    between each call of this macro pair is stored within the diversion and can
    be manipulated from within the macros.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<p class="Pp">All macro names must be named <i>name</i><b>.tmac</b> to fully use
    the tmac mechanism. <b>tmac.</b><i>name</i> as with classical packages is
    possible as well, but deprecated.</p>
<p class="Pp">The macro files are kept in the <i>tmac directories</i>; a colon
    separated list of these constitutes the <i>tmac path</i>.</p>
<p class="Pp">The search sequence for macro files is (in that order):</p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>the directories specified with troff/groff's <b>-M</b> command line
    option</dd>
  <dt>&#x2022;</dt>
  <dd>the directories given in the
      <small><span class="Li"><b>$GROFF_TMAC_PATH</b></span></small> environment
      variable</dd>
  <dt>&#x2022;</dt>
  <dd>the current directory (only if in unsafe mode, which is enabled by the
      <b>-U</b> command line switch)</dd>
  <dt>&#x2022;</dt>
  <dd>the home directory</dd>
  <dt>&#x2022;</dt>
  <dd>a platform-specific directory, being <b>/usr/lib/groff/site-tmac</b> in
      this installation</dd>
  <dt>&#x2022;</dt>
  <dd>a site-specific (platform-independent) directory, being
      <b>/usr/share/groff/site-tmac</b> in this installation</dd>
  <dt>&#x2022;</dt>
  <dd>the main tmac directory, being <b>/usr/share/groff/1.19.2/tmac</b> in this
      installation</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt><small><span class="Li"><b>$GROFF_TMAC_PATH</b></span></small></dt>
  <dd>A colon separated list of additional tmac directories in which to search
      for macro files. See the previous section for a detailed description.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Copyright (C) 2000, 2001, 2002, 2003, 2004 Free Software
    Foundation, Inc.</p>
<p class="Pp">This document is distributed under the terms of the FDL (GNU Free
    Documentation License) version 1.1 or later. You should have received a copy
    of the FDL on your system, it is also available on-line at the</p>
<p class="Pp">This document is part of <i>groff</i>, the GNU roff distribution.
    It was written by it is maintained by</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">A complete reference for all parts of the groff system is found in
    the groff <b>info</b>(1) file.</p>
<dl class="Bl-tag">
  <dt id="groff"><a class="permalink" href="#groff"><b>groff</b>(1)</a></dt>
  <dd>an overview of the groff system.</dd>
  <dt id="groff_man"><a class="permalink" href="#groff_man"><b>groff_man</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_mdoc"><a class="permalink" href="#groff_mdoc"><b>groff_mdoc</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_me"><a class="permalink" href="#groff_me"><b>groff_me</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_mm"><a class="permalink" href="#groff_mm"><b>groff_mm</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_mom"><a class="permalink" href="#groff_mom"><b>groff_mom</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_ms"><a class="permalink" href="#groff_ms"><b>groff_ms</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_trace"><a class="permalink" href="#groff_trace"><b>groff_trace</b>(7),</a></dt>
  <dd>
    <br/>
  </dd>
  <dt id="groff_www"><a class="permalink" href="#groff_www"><b>groff_www</b>(7).</a></dt>
  <dd>the groff tmac macro packages.</dd>
  <dt id="groff~2"><a class="permalink" href="#groff~2"><b>groff</b>(7)</a></dt>
  <dd>the groff language.</dd>
</dl>
<p class="Pp">The Filesystem Hierarchy Standard is available at the</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">28 July 2004</td>
    <td class="foot-os">Groff Version 1.19.2</td>
  </tr>
</table>
</body>
</html>
