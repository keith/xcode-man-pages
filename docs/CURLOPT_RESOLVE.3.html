<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   **************************************************************************
   *                                  _   _ ____  _
   *  Project                     ___| | | |  _ \| |
   *                             / __| | | | |_) | |
   *                            | (__| |_| |  _ <| |___
   *                             \___|\___/|_| \_\_____|
   *
   * Copyright (C) 1998 - 2021, Daniel Stenberg, <daniel@haxx.se>, et al.
   *
   * This software is licensed as described in the file COPYING, which
   * you should have received as part of this distribution. The terms
   * are also available at https://curl.se/docs/copyright.html.
   *
   * You may opt to use, copy, modify, merge, publish, distribute and/or sell
   * copies of the Software, and permit persons to whom the Software is
   * furnished to do so, under the terms of the COPYING file.
   *
   * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
   * KIND, either express or implied.
   *
   * SPDX-License-Identifier: curl
   *
   **************************************************************************
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>CURLOPT_RESOLVE(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CURLOPT_RESOLVE(3)</td>
    <td class="head-vol">curl_easy_setopt options</td>
    <td class="head-rtitle">CURLOPT_RESOLVE(3)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">CURLOPT_RESOLVE - provide custom host name to IP address
  resolves</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;curl/curl.h&gt;
CURLcode curl_easy_setopt(CURL *handle, CURLOPT_RESOLVE,
<br/>
                          struct curl_slist *hosts);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Pass a pointer to a linked list of strings with host name resolve
    information to use for requests with this handle. The linked list should be
    a fully valid list of <b>struct curl_slist</b> structs properly filled in.
    Use <i>curl_slist_append(3)</i> to create the list and
    <i>curl_slist_free_all(3)</i> to clean up an entire list.</p>
<p class="Pp">Each resolve rule to add should be written using the format</p>
<p class="Pp"></p>
<pre>
<br/>
 [+]HOST:PORT:ADDRESS[,ADDRESS]</pre>
<p class="Pp">... where HOST is the name libcurl will try to resolve, PORT is
    the port number of the service where libcurl wants to connect to the HOST
    and ADDRESS is one or more numerical IP addresses. If you specify multiple
    ip addresses they need to be separated by comma. If libcurl is built to
    support IPv6, each of the ADDRESS entries can of course be either IPv4 or
    IPv6 style addressing.</p>
<p class="Pp">This option effectively pre-populates the DNS cache with entries
    for the host+port pair so redirects and everything that operations against
    the HOST+PORT will instead use your provided ADDRESS.</p>
<p class="Pp">The optional leading &quot;+&quot; specifies that the new entry
    should time-out. Entries added without the leading plus character will never
    time-out whereas entries added with &quot;+HOST:...&quot; will time-out just
    like ordinary DNS cache entries.</p>
<p class="Pp">If the DNS cache already has an entry for the given host+port
    pair, the new entry will override the former one.</p>
<p class="Pp">An ADDRESS provided by this option will only be used if not
    restricted by the setting of <i>CURLOPT_IPRESOLVE(3)</i> to a different IP
    version.</p>
<p class="Pp">To remove names from the DNS cache again, to stop providing these
    fake resolves, include a string in the linked list that uses the format</p>
<p class="Pp"></p>
<pre>
<br/>
  -HOST:PORT</pre>
<p class="Pp">The entry to remove must be prefixed with a dash, and the host
    name and port number must exactly match what was added previously.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DEFAULT"><a class="permalink" href="#DEFAULT">DEFAULT</a></h1>
<p class="Pp">NULL</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PROTOCOLS"><a class="permalink" href="#PROTOCOLS">PROTOCOLS</a></h1>
<p class="Pp">All</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<pre>CURL *curl;
struct curl_slist *host = NULL;
host = curl_slist_append(NULL, &quot;example.com:443:127.0.0.1&quot;);
curl = curl_easy_init();
if(curl) {
<br/>
  curl_easy_setopt(curl, CURLOPT_RESOLVE, host);
<br/>
  curl_easy_setopt(curl, CURLOPT_URL, &quot;https://example.com&quot;);
<br/>
  curl_easy_perform(curl);
<br/>
  /* always cleanup */
<br/>
  curl_easy_cleanup(curl);
}
curl_slist_free_all(host);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AVAILABILITY"><a class="permalink" href="#AVAILABILITY">AVAILABILITY</a></h1>
<p class="Pp">Added in 7.21.3. Removal support added in 7.42.0.</p>
<p class="Pp">Support for providing the ADDRESS within [brackets] was added in
    7.57.0.</p>
<p class="Pp">Support for providing multiple IP addresses per entry was added in
    7.59.0.</p>
<p class="Pp">Support for adding non-permanent entries by using the
    &quot;+&quot; prefix was added in 7.75.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">Returns CURLE_OK if the option is supported, and
    CURLE_UNKNOWN_OPTION if not.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>CURLOPT_IPRESOLVE</b>(3), <b>CURLOPT_DNS_CACHE_TIMEOUT</b>(3),
    <b>CURLOPT_CONNECT_TO</b>(3), </p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 24, 2021</td>
    <td class="foot-os">libcurl 7.77.0</td>
  </tr>
</table>
</body>
</html>
