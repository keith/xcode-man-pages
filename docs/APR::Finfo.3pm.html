<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>install::TempContent::Objects::mod_perl-2.0.12::docs::api::APR::Finfo(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">install::TempContent::Objects::mod_perl-2.0.12::docs::api::APR::Finfo(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">install::TempContent::Objects::mod_perl-2.0.12::docs::api::APR::Finfo(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">APR::Finfo - Perl API for APR fileinfo structure</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Synopsis"><a class="permalink" href="#Synopsis">Synopsis</a></h1>
<pre>  use APR::Finfo ();
  use APR::Const -compile =&gt; qw(FINFO_NORM);
  my $finfo = APR::Finfo::stat(&quot;/tmp/test&quot;, APR::Const::FINFO_NORM, $pool);
  
  $device = $finfo-&gt;device;     # (stat $file)[0]
  $inode  = $finfo-&gt;inode;      # (stat $file)[1]
  # stat returns an octal number while protection is hex
  $prot   = $finfo-&gt;protection; # (stat $file)[2]
  $nlink  = $finfo-&gt;nlink;      # (stat $file)[3]
  $gid    = $finfo-&gt;group;      # (stat $file)[4]
  $uid    = $finfo-&gt;user;       # (stat $file)[5]
  $size   = $finfo-&gt;size;       # (stat $file)[7]
  $atime  = $finfo-&gt;atime;      # (stat $file)[8]
  $mtime  = $finfo-&gt;mtime;      # (stat $file)[9]
  $ctime  = $finfo-&gt;ctime;      # (stat $file)[10]
  
  $csize = $finfo-&gt;csize; # consumed size: not portable!
  
  $filetype = $finfo-&gt;filetype; # file/dir/socket/etc
  
  $fname = $finfo-&gt;fname;
  $name  = $finfo-&gt;name;  # in filesystem case:
  
  # valid fields that can be queried
  $valid = $finfo-&gt;valid;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="Description"><a class="permalink" href="#Description">Description</a></h1>
<p class="Pp">APR fileinfo structure provides somewhat similar information to
    Perl's <span class="Li">&quot;stat()&quot;</span> call, but you will want to
    use this module's API to query an already
    <span class="Li">&quot;stat()'ed&quot;</span> filehandle to avoid an extra
    system call or to query attributes specific to APR file handles.</p>
<p class="Pp">During the HTTP request handlers coming after
    <span class="Li">&quot;PerlMapToStorageHandler&quot;</span>,
    <span class="Li">&quot;$r-&gt;finfo&quot;</span> already contains the cached
    values from the apr's <span class="Li">&quot;stat()&quot;</span> call. So
    you don't want to perform it again, but instead get the
    <span class="Li">&quot;ARP::Finfo&quot;</span> object via:</p>
<p class="Pp"></p>
<pre>  my $finfo = $r-&gt;finfo;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<p class="Pp"><span class="Li">&quot;APR::Finfo&quot;</span> provides the
    following functions and/or methods:</p>
<section class="Ss">
<h2 class="Ss" id="_atime_"><a class="permalink" href="#_atime_">&quot;atime&quot;</a></h2>
<p class="Pp">Get the time the file was last accessed:</p>
<p class="Pp"></p>
<pre>  $atime = $finfo-&gt;atime;
</pre>
<dl class="Bl-tag">
  <dt id="obj:"><a class="permalink" href="#obj:">obj: $finfo ( &quot;APR::Finfo
    object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:"><a class="permalink" href="#return:">return: $atime ( integer
    )</a></dt>
  <dd>Last access time in seconds since the epoch</dd>
  <dt id="since:"><a class="permalink" href="#since:">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[8]
</pre>
<p class="Pp">Note that this method may not be reliable on all platforms, most
    notably Win32 -- FAT32 filesystems appear to work properly, but NTFS
    filesystems do not.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_csize_"><a class="permalink" href="#_csize_">&quot;csize&quot;</a></h2>
<p class="Pp">Get the storage size consumed by the file</p>
<p class="Pp"></p>
<pre>  $csize = $finfo-&gt;csize;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~2"><a class="permalink" href="#obj:~2">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~2"><a class="permalink" href="#return:~2">return: $csize (
    integer )</a></dt>
  <dd></dd>
  <dt id="since:~2"><a class="permalink" href="#since:~2">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">Chances are that you don't want to use this method, since its
    functionality is not supported on most platforms (in which case it always
    returns 0).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_ctime_"><a class="permalink" href="#_ctime_">&quot;ctime&quot;</a></h2>
<p class="Pp">Get the time the file was last changed</p>
<p class="Pp"></p>
<pre>  $ctime = $finfo-&gt;ctime;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~3"><a class="permalink" href="#obj:~3">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~3"><a class="permalink" href="#return:~3">return: $ctime (
    integer )</a></dt>
  <dd>Inode change time in seconds since the epoch</dd>
  <dt id="since:~3"><a class="permalink" href="#since:~3">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[10]
</pre>
<p class="Pp">The ctime field is non-portable. In particular, you cannot expect
    it to be a &quot;creation time&quot;, see &quot;Files and Filesystems&quot;
    in the <i>perlport</i> manpage for details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_device_"><a class="permalink" href="#_device_">&quot;device&quot;</a></h2>
<p class="Pp">Get the id of the device the file is on.</p>
<p class="Pp"></p>
<pre>  $device = $finfo-&gt;device;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~4"><a class="permalink" href="#obj:~4">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~4"><a class="permalink" href="#return:~4">return: $device (
    integer )</a></dt>
  <dd></dd>
  <dt id="since:~4"><a class="permalink" href="#since:~4">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[0]
</pre>
<p class="Pp">Note that this method is non-portable. It doesn't work on all
    platforms, most notably Win32.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_filetype_"><a class="permalink" href="#_filetype_">&quot;filetype&quot;</a></h2>
<p class="Pp">Get the type of file.</p>
<p class="Pp"></p>
<pre>  $filetype = $finfo-&gt;filetype;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~5"><a class="permalink" href="#obj:~5">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~5"><a class="permalink" href="#return:~5">return: $filetype (
    &quot;:filetype constant&quot; )</a></dt>
  <dd></dd>
  <dt id="since:~5"><a class="permalink" href="#since:~5">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>  use APR::Pool;
  use APR::Finfo;
  use APR::Const -compile =&gt; qw(FILETYPE_DIR FILETYPE_REG FINFO_NORM);
  my $pool  = APR::Pool-&gt;new();
  my $finfo = APR::Finfo::stat(&quot;/tmp&quot;, APR::Const::FINFO_NORM, $pool);
  my $finfo = $finfo-&gt;filetype;
  if ($finfo == APR::Const::FILETYPE_REG) {
      print &quot;regular file&quot;;
  }
  elsif ($finfo == APR::Const::FILETYPE_REG) {
      print &quot;directory&quot;;
  }
  else {
      print &quot;other file&quot;;
  }
</pre>
<p class="Pp">Since <i>/tmp</i> is a directory, this will print:</p>
<p class="Pp"></p>
<pre>  directory
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_fname_"><a class="permalink" href="#_fname_">&quot;fname&quot;</a></h2>
<p class="Pp">Get the pathname of the file (possibly unrooted)</p>
<p class="Pp"></p>
<pre>  $fname = $finfo-&gt;fname;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~6"><a class="permalink" href="#obj:~6">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~6"><a class="permalink" href="#return:~6">return: $filetype (
    string )</a></dt>
  <dd></dd>
  <dt id="since:~6"><a class="permalink" href="#since:~6">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_group_"><a class="permalink" href="#_group_">&quot;group&quot;</a></h2>
<p class="Pp">Get the group id that owns the file:</p>
<p class="Pp"></p>
<pre>  $gid = $finfo-&gt;group;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~7"><a class="permalink" href="#obj:~7">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~7"><a class="permalink" href="#return:~7">return: $gid (
    number )</a></dt>
  <dd></dd>
  <dt id="since:~7"><a class="permalink" href="#since:~7">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[5]
</pre>
<p class="Pp">Note that this method may not be meaningful on all platforms, most
    notably Win32. Incorrect results have also been reported on some versions of
    OSX.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_inode_"><a class="permalink" href="#_inode_">&quot;inode&quot;</a></h2>
<p class="Pp">Get the inode of the file.</p>
<p class="Pp"></p>
<pre>  $inode = $finfo-&gt;inode;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~8"><a class="permalink" href="#obj:~8">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~8"><a class="permalink" href="#return:~8">return: $inode (
    integer )</a></dt>
  <dd></dd>
  <dt id="since:~8"><a class="permalink" href="#since:~8">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[1]
</pre>
<p class="Pp">Note that this method may not be meaningful on all platforms, most
    notably Win32.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_mtime_"><a class="permalink" href="#_mtime_">&quot;mtime&quot;</a></h2>
<p class="Pp">The time the file was last modified</p>
<p class="Pp"></p>
<pre>  $mtime = $finfo-&gt;mtime;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~9"><a class="permalink" href="#obj:~9">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~9"><a class="permalink" href="#return:~9">return: $mtime (
    integer )</a></dt>
  <dd>Last modify time in seconds since the epoch</dd>
  <dt id="since:~9"><a class="permalink" href="#since:~9">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[9]
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_name_"><a class="permalink" href="#_name_">&quot;name&quot;</a></h2>
<p class="Pp">Get the file's name (no path) in filesystem case:</p>
<p class="Pp"></p>
<pre>  $name = $finfo-&gt;name;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~10"><a class="permalink" href="#obj:~10">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~10"><a class="permalink" href="#return:~10">return: $device (
    string )</a></dt>
  <dd></dd>
  <dt id="since:~10"><a class="permalink" href="#since:~10">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_nlink_"><a class="permalink" href="#_nlink_">&quot;nlink&quot;</a></h2>
<p class="Pp">Get the number of hard links to the file.</p>
<p class="Pp"></p>
<pre>  $nlink = $finfo-&gt;nlink;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~11"><a class="permalink" href="#obj:~11">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~11"><a class="permalink" href="#return:~11">return: $nlink (
    integer )</a></dt>
  <dd></dd>
  <dt id="since:~11"><a class="permalink" href="#since:~11">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[3]
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_protection_"><a class="permalink" href="#_protection_">&quot;protection&quot;</a></h2>
<p class="Pp">Get the access permissions of the file. Mimics Unix access
  rights.</p>
<p class="Pp"></p>
<pre>  $prot = $finfo-&gt;protection;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~12"><a class="permalink" href="#obj:~12">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~12"><a class="permalink" href="#return:~12">return: $prot (
    &quot;:fprot constant&quot; )</a></dt>
  <dd></dd>
  <dt id="since:~12"><a class="permalink" href="#since:~12">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[2]
</pre>
<p class="Pp">Note: Perl's stat returns an octal number while mod_perl's
    <span class="Li">&quot;protection&quot;</span> returns a hex number.</p>
<p class="Pp">See perldoc -f stat and APR's file_io for more information on
    each.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_size_"><a class="permalink" href="#_size_">&quot;size&quot;</a></h2>
<p class="Pp">Get the size of the file</p>
<p class="Pp"></p>
<pre>  $size = $finfo-&gt;size;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~13"><a class="permalink" href="#obj:~13">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~13"><a class="permalink" href="#return:~13">return: $size (
    integer )</a></dt>
  <dd>Total size of file, in bytes</dd>
  <dt id="since:~13"><a class="permalink" href="#since:~13">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[7]
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_stat_"><a class="permalink" href="#_stat_">&quot;stat&quot;</a></h2>
<p class="Pp">Get the specified file's stats.</p>
<p class="Pp"></p>
<pre>  $finfo = APR::Finfo::stat($fname, $wanted_fields, $p);
</pre>
<dl class="Bl-tag">
  <dt id="arg1:"><a class="permalink" href="#arg1:">arg1: $fname ( string
    )</a></dt>
  <dd>The path to the file to <span class="Li">&quot;stat()&quot;</span>.</dd>
  <dt id="arg2:"><a class="permalink" href="#arg2:">arg2: $wanted_fields (
    &quot;:finfo constant&quot; )</a></dt>
  <dd>The desired fields, as a bitmask flag of
      <span class="Li">&quot;APR::FINFO_*&quot;</span> constants.
    <p class="Pp">Notice that you can also use the constants that already
        combine several elements in one. For example
        <span class="Li">&quot;APR::Const::FINFO_PROT&quot;</span> asks for all
        protection bits,
        <span class="Li">&quot;APR::Const::FINFO_MIN&quot;</span> asks for the
        following fields: type, mtime, ctime, atime, size and
        <span class="Li">&quot;APR::Const::FINFO_NORM&quot;</span> asks for all
        atomic unix <span class="Li">&quot;apr_stat()&quot;</span> fields
        (similar to perl's <span class="Li">&quot;stat()&quot;</span>).</p>
  </dd>
  <dt id="arg3:"><a class="permalink" href="#arg3:">arg3: $p ( &quot;APR::Pool
    object&quot; )</a></dt>
  <dd>the pool to use to allocate the file stat structure.</dd>
  <dt id="ret:"><a class="permalink" href="#ret:">ret: $finfo ( &quot;APR::Finfo
    object&quot; )</a></dt>
  <dd></dd>
  <dt id="since:~14"><a class="permalink" href="#since:~14">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example, here is how to get most of the
    <span class="Li">&quot;stat&quot;</span> fields:</p>
<p class="Pp"></p>
<pre>  use APR::Pool ();
  use APR::Finfo ();
  use APR::Const -compile =&gt; qw(FINFO_NORM);
  my $pool = APR::Pool-&gt;new();
  my $finfo = APR::Finfo::stat(&quot;/tmp/test&quot;, APR::Const::FINFO_NORM, $pool);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_user_"><a class="permalink" href="#_user_">&quot;user&quot;</a></h2>
<p class="Pp">Get the user id that owns the file:</p>
<p class="Pp"></p>
<pre>  $uid = $finfo-&gt;user;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~14"><a class="permalink" href="#obj:~14">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="return:~14"><a class="permalink" href="#return:~14">return: $uid (
    number )</a></dt>
  <dd></dd>
  <dt id="since:~15"><a class="permalink" href="#since:~15">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method returns the same value as Perl's:</p>
<p class="Pp"></p>
<pre>  (stat $filename)[4]
</pre>
<p class="Pp">Note that this method may not be meaningful on all platforms, most
    notably Win32.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_valid_"><a class="permalink" href="#_valid_">&quot;valid&quot;</a></h2>
<p class="Pp">The bitmask describing valid fields of this apr_finfo_t structure
    including all available 'wanted' fields and potentially more</p>
<p class="Pp"></p>
<pre>  $valid = $finfo-&gt;valid;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~15"><a class="permalink" href="#obj:~15">obj: $finfo (
    &quot;APR::Finfo object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~2"><a class="permalink" href="#arg1:~2">arg1: $valid ( bitmask
    )</a></dt>
  <dd>This bitmask flag should be bit-OR'ed against
      <span class="Li">&quot;:finfo</span>
      <span class="Li">constant&quot;</span> constants.</dd>
  <dt id="since:~16"><a class="permalink" href="#since:~16">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="See_Also"><a class="permalink" href="#See_Also">See
  Also</a></h1>
<p class="Pp">mod_perl 2.0 documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Copyright"><a class="permalink" href="#Copyright">Copyright</a></h1>
<p class="Pp">mod_perl 2.0 and its core modules are copyrighted under The Apache
    Software License, Version 2.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Authors"><a class="permalink" href="#Authors">Authors</a></h1>
<p class="Pp">The mod_perl development team and numerous contributors.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-06-18</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
