<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>Test::Exception(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::Exception(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::Exception(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
Test::Exception - Test exception-based code
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<span class="Li"></span>
<pre>
  use Test::More tests =&gt; 5;
  use Test::Exception;

  # or if you don't need Test::More

  use Test::Exception tests =&gt; 5;

  # then...

  # Check that the stringified exception matches given regex
  throws_ok { $foo-&gt;method } qr/division by zero/, 'zero caught okay';

  # Check an exception of the given class (or subclass) is thrown
  throws_ok { $foo-&gt;method } 'Error::Simple', 'simple error thrown';
  
  # all Test::Exceptions subroutines are guaranteed to preserve the state 
  # of $@ so you can do things like this after throws_ok and dies_ok
  like $@, 'what the stringified exception should look like';

  # Check that something died - we do not care why
  dies_ok { $foo-&gt;method } 'expecting to die';

  # Check that something did not die
  lives_ok { $foo-&gt;method } 'expecting to live';

  # Check that a test runs without an exception
  lives_and { is $foo-&gt;method, 42 } 'method is 42';
  
  # or if you don't like prototyped functions
  
  throws_ok( sub { $foo-&gt;method }, qr/division by zero/,
      'zero caught okay' );
  throws_ok( sub { $foo-&gt;method }, 'Error::Simple', 
      'simple error thrown' );
  dies_ok( sub { $foo-&gt;method }, 'expecting to die' );
  lives_ok( sub { $foo-&gt;method }, 'expecting to live' );
  lives_and( sub { is $foo-&gt;method, 42 }, 'method is 42' );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This module provides a few convenience methods for testing exception based code.
  It is built with Test::Builder and plays happily with Test::More and friends.
<p class="Pp">If you are not already familiar with Test::More now would be the
    time to go take a look.</p>
<p class="Pp">You can specify the test plan when you <span class="Li">&quot;use
    Test::Exception&quot;</span> in the same way as <span class="Li">&quot;use
    Test::More&quot;</span>. See Test::More for details.</p>
<p class="Pp">NOTE: Test::Exception only checks for exceptions. It will ignore
    other methods of stopping program execution - including <b>exit()</b>. If
    you have an <b>exit()</b> in evalled code Test::Exception will not catch
    this with any of its testing functions.</p>
<p class="Pp">NOTE: This module uses Sub::Uplevel and relies on overriding
    <span class="Li">&quot;CORE::GLOBAL::caller&quot;</span> to hide your test
    blocks from the call stack. If this use of global overrides concerns you,
    the Test::Fatal module offers a more minimalist alternative.</p>
<dl class="Bl-tag">
  <dt><b>throws_ok</b></dt>
  <dd>Tests to see that a specific exception is thrown. <b>throws_ok()</b> has
      two forms:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  throws_ok BLOCK REGEX, TEST_DESCRIPTION
  throws_ok BLOCK CLASS, TEST_DESCRIPTION
    </pre>
    <p class="Pp">In the first form the test passes if the stringified exception
        matches the give regular expression. For example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    throws_ok { read_file( 'unreadable' ) } qr/No file/, 'no file';
    </pre>
    <p class="Pp">If your perl does not support
        <span class="Li">&quot;qr//&quot;</span> you can also pass a regex-like
        string, for example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    throws_ok { read_file( 'unreadable' ) } '/No file/', 'no file';
    </pre>
    <p class="Pp">The second form of <b>throws_ok()</b> test passes if the
        exception is of the same class as the one supplied, or a subclass of
        that class. For example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    throws_ok { $foo-&gt;bar } &quot;Error::Simple&quot;, 'simple error';
    </pre>
    <p class="Pp">Will only pass if the <span class="Li">&quot;bar&quot;</span>
        method throws an Error::Simple exception, or a subclass of an
        Error::Simple exception.</p>
    <p class="Pp">You can get the same effect by passing an instance of the
        exception you want to look for. The following is equivalent to the
        previous example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    my $SIMPLE = Error::Simple-&gt;new;
    throws_ok { $foo-&gt;bar } $SIMPLE, 'simple error';
    </pre>
    <p class="Pp">Should a <b>throws_ok()</b> test fail it produces appropriate
        diagnostic messages. For example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    not ok 3 - simple error
    #     Failed test (test.t at line 48)
    # expecting: Error::Simple exception
    # found: normal exit
    </pre>
    <p class="Pp">Like all other Test::Exception functions you can avoid
        prototypes by passing a subroutine explicitly:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    throws_ok( sub {$foo-&gt;bar}, &quot;Error::Simple&quot;, 'simple error' );
    </pre>
    <p class="Pp">A true value is returned if the test succeeds, false
        otherwise. On exit $@ is guaranteed to be the cause of death (if
      any).</p>
    <p class="Pp">A description of the exception being checked is used if no
        optional test description is passed.</p>
    <p class="Pp">NOTE: Remember when you <span class="Li">&quot;die
        $string_without_a_trailing_newline&quot;</span> perl will automatically
        add the current script line number, input line number and a newline.
        This will form part of the string that throws_ok regular expressions
        match against.</p>
  </dd>
  <dt><b>dies_ok</b></dt>
  <dd>Checks that a piece of code dies, rather than returning normally. For
      example:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    sub div {
        my ( $a, $b ) = @_;
        return $a / $b;
    };

    dies_ok { div( 1, 0 ) } 'divide by zero detected';

    # or if you don't like prototypes
    dies_ok( sub { div( 1, 0 ) }, 'divide by zero detected' );
    </pre>
    <p class="Pp">A true value is returned if the test succeeds, false
        otherwise. On exit $@ is guaranteed to be the cause of death (if
      any).</p>
    <p class="Pp">Remember: This test will pass if the code dies for any reason.
        If you care about the reason it might be more sensible to write a more
        specific test using <b>throws_ok()</b>.</p>
    <p class="Pp">The test description is optional, but recommended.</p>
  </dd>
  <dt><b>lives_ok</b></dt>
  <dd>Checks that a piece of code doesn't die. This allows your test script to
      continue, rather than aborting if you get an unexpected exception. For
      example:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    sub read_file {
        my $file = shift;
        local $/;
        open my $fh, '&lt;', $file or die &quot;open failed ($!)\n&quot;;
        $file = &lt;FILE&gt;;
        return $file;
    };

    my $file;
    lives_ok { $file = read_file('test.txt') } 'file read';

    # or if you don't like prototypes
    lives_ok( sub { $file = read_file('test.txt') }, 'file read' );
    </pre>
    <p class="Pp">Should a <b>lives_ok()</b> test fail it produces appropriate
        diagnostic messages. For example:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    not ok 1 - file read
    #     Failed test (test.t at line 15)
    # died: open failed (No such file or directory)
    </pre>
    <p class="Pp">A true value is returned if the test succeeds, false
        otherwise. On exit $@ is guaranteed to be the cause of death (if
      any).</p>
    <p class="Pp">The test description is optional, but recommended.</p>
  </dd>
  <dt><b>lives_and</b></dt>
  <dd>Run a test that may throw an exception. For example, instead of doing:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  my $file;
  lives_ok { $file = read_file('answer.txt') } 'read_file worked';
  is $file, &quot;42&quot;, 'answer was 42';
    </pre>
    <p class="Pp">You can use <b>lives_and()</b> like this:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  lives_and { is read_file('answer.txt'), &quot;42&quot; } 'answer is 42';
  # or if you don't like prototypes
  lives_and(sub {is read_file('answer.txt'), &quot;42&quot;}, 'answer is 42');
    </pre>
    <p class="Pp">Which is the same as doing</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  is read_file('answer.txt'), &quot;42\n&quot;, 'answer is 42';
    </pre>
    <p class="Pp">unless
        <span class="Li">&quot;read_file('answer.txt')&quot;</span> dies, in
        which case you get the same kind of error as <b>lives_ok()</b></p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  not ok 1 - answer is 42
  #     Failed test (test.t at line 15)
  # died: open failed (No such file or directory)
    </pre>
    <p class="Pp">A true value is returned if the test succeeds, false
        otherwise. On exit $@ is guaranteed to be the cause of death (if
      any).</p>
    <p class="Pp">The test description is optional, but recommended.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SKIPPING_TEST::EXCEPTION_TESTS"><a class="permalink" href="#SKIPPING_TEST::EXCEPTION_TESTS">SKIPPING
  TEST::EXCEPTION TESTS</a></h1>
Sometimes we want to use Test::Exception tests in a test suite, but don't want
  to force the user to have Test::Exception installed. One way to do this is to
  skip the tests if Test::Exception is absent. You can do this with code
  something like this:
<p class="Pp"><span class="Li"></span></p>
<pre>
  use strict;
  use warnings;
  use Test::More;
  
  BEGIN {
      eval &quot;use Test::Exception&quot;;
      plan skip_all =&gt; &quot;Test::Exception needed&quot; if $@;
  }
  
  plan tests =&gt; 2;
  # ... tests that need Test::Exception ...
</pre>
<p class="Pp">Note that we load Test::Exception in a
    <span class="Li">&quot;BEGIN&quot;</span> block ensuring that the subroutine
    prototypes are in place before the rest of the test script is compiled.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
There are some edge cases in Perl's exception handling where Test::Exception
  will miss exceptions thrown in DESTROY blocks. See the RT bug
  &lt;http://rt.cpan.org/Ticket/Display.html?id=24678&gt; for details, along
  with the t/edge-cases.t in the distribution test suite. These will be
  addressed in a future Test::Exception release.
<p class="Pp">If you find any more bugs please let me know by e-mail, or report
    the problem with &lt;http://rt.cpan.org/&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMUNITY"><a class="permalink" href="#COMMUNITY">COMMUNITY</a></h1>
<dl class="Bl-tag">
  <dt>perl-qa</dt>
  <dd>If you are interested in testing using Perl I recommend you visit
      &lt;http://qa.perl.org/&gt; and join the excellent perl-qa mailing list.
      See &lt;http://lists.perl.org/showlist.cgi?name=perl-qa&gt; for details on
      how to subscribe.</dd>
  <dt>perlmonks</dt>
  <dd>You can find users of Test::Exception, including the module author, on
      &lt;http://www.perlmonks.org/&gt;. Feel free to ask questions on
      Test::Exception there.</dd>
  <dt>CPAN::Forum</dt>
  <dd>The CPAN Forum is a web forum for discussing Perl's CPAN modules. The
      Test::Exception forum can be found at
      &lt;http://www.cpanforum.com/dist/Test-Exception&gt;.</dd>
  <dt>AnnoCPAN</dt>
  <dd>AnnoCPAN is a web site that allows community annotations of Perl module
      documentation. The Test::Exception annotations can be found at
      &lt;http://annocpan.org/~ADIE/Test-Exception/&gt;.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="TO_DO"><a class="permalink" href="#TO_DO">TO DO</a></h1>
If you think this module should do something that it doesn't (or does something
  that it shouldn't) please let me know.
<p class="Pp">You can see my current to do list at
    &lt;http://adrianh.tadalist.com/lists/public/15421&gt;, with an RSS feed of
    changes at &lt;http://adrianh.tadalist.com/lists/feed_public/15421&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ACKNOWLEDGMENTS"><a class="permalink" href="#ACKNOWLEDGMENTS">ACKNOWLEDGMENTS</a></h1>
Thanks to chromatic and Michael G Schwern for the excellent Test::Builder,
  without which this module wouldn't be possible.
<p class="Pp">Thanks to Adam Kennedy, Andy Lester, Aristotle Pagaltzis, Ben
    Prew, Cees Hek, Chris Dolan, chromatic, Curt Sampson, David Cantrell, David
    Golden, David Tulloh, David Wheeler, J. K. O'Brien, Janek Schleicher, Jim
    Keenan, Jos I. Boumans, Joshua ben Jore, Jost Krieger, Mark Fowler, Michael
    G Schwern, Nadim Khemir, Paul McCann, Perrin Harkins, Peter Rabbitson, Peter
    Scott, Ricardo Signes, Rob Muhlestein, Scott R. Godin, Steve Purkis, Steve,
    Tim Bunce, and various anonymous folk for comments, suggestions, bug reports
    and patches.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
Adrian Howard &lt;adrianh@quietstars.com&gt;
<p class="Pp">If you can spare the time, please drop me a line if you find this
    module useful.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt>&lt;http://del.icio.us/tag/Test::Exception&gt;</dt>
  <dd>Delicious links on Test::Exception.</dd>
  <dt>Test::Fatal</dt>
  <dd>A slightly different interface to testing exceptions, without overriding
      <span class="Li">&quot;CORE::caller&quot;</span>.</dd>
  <dt>Test::Warnings &amp; Test::Warn &amp; Test::NoWarnings</dt>
  <dd>Modules to help test warnings.</dd>
  <dt>Test::Builder</dt>
  <dd>Support module for building test libraries.</dd>
  <dt>Test::Simple &amp; Test::More</dt>
  <dd>Basic utilities for writing tests.</dd>
  <dt>&lt;http://qa.perl.org/test-modules.html&gt;</dt>
  <dd>Overview of some of the many testing modules available on CPAN.</dd>
  <dt>&lt;http://del.icio.us/tag/perl+testing&gt;</dt>
  <dd>Delicious links on perl testing.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENCE"><a class="permalink" href="#LICENCE">LICENCE</a></h1>
Copyright 2002-2007 Adrian Howard, All Rights Reserved.
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-12-29</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
