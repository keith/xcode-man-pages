<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   $Id: yacc.1,v 1.42 2022/11/06 17:07:16 tom Exp $
  
   .TH YACC 1 "July\ 15,\ 1990"
   .UC 6
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>YACC(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">YACC(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">YACC(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Yacc - an LALR(1) parser generator</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>yacc [ -BdghilLPrtvVy ] [ -b</b> <i>file_prefix</i> <b>] [
    -H</b> <i>defines_file</i> <b>] [ -o</b> <i>output_file</i> <b>] [ -p</b>
    <i>symbol_prefix</i> <b>]</b> <i>filename</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>Yacc</b> reads the grammar specification in the file
    <i>filename</i> and generates an LALR(1) parser for it. The parsers consist
    of a set of LALR(1) parsing tables and a driver routine written in the C
    programming language. <b>Yacc</b> normally writes the parse tables and the
    driver routine to the file <i>y.tab.c</i>.</p>
<p class="Pp">The following options are available:</p>
<dl class="Bl-tag">
  <dt id="b"><a class="permalink" href="#b"><b>-b
    </b><i>file_prefix</i></a></dt>
  <dd>The <b>-b</b> option changes the prefix prepended to the output file names
      to the string denoted by <i>file_prefix.</i> The default prefix is the
      character <i>y.</i></dd>
  <dt id="B"><a class="permalink" href="#B"><b>-B</b></a></dt>
  <dd>create a backtracking parser (compile-time configuration for
      <b>btyacc</b>).</dd>
  <dt id="d"><a class="permalink" href="#d"><b>-d</b></a></dt>
  <dd>causes the header file <b>y.tab.h</b> to be written. It contains #define's
      for the token identifiers.</dd>
  <dt id="h"><a class="permalink" href="#h"><b>-h</b></a></dt>
  <dd>print a usage message to the standard error.</dd>
  <dt id="H"><a class="permalink" href="#H"><b>-H
    </b><i>defines_file</i></a></dt>
  <dd>causes #define's for the token identifiers to be written to the given
      <i>defines_file</i> rather than the <b>y.tab.h</b> file used by the
      <b>-d</b> option.</dd>
  <dt id="g"><a class="permalink" href="#g"><b>-g</b></a></dt>
  <dd>The <b>-g</b> option causes a graphical description of the generated
      LALR(1) parser to be written to the file <b>y.dot</b> in graphviz format,
      ready to be processed by <b>dot</b>(1).</dd>
  <dt id="i"><a class="permalink" href="#i"><b>-i</b></a></dt>
  <dd>The <b>-i</b> option causes a supplementary header file <b>y.tab.i</b> to
      be written. It contains extern declarations and supplementary #define's as
      needed to map the conventional <i>yacc</i> <b>yy</b>-prefixed names to
      whatever the <b>-p</b> option may specify. The code file, e.g.,
      <b>y.tab.c</b> is modified to #include this file as well as the
      <b>y.tab.h</b> file, enforcing consistent usage of the symbols defined in
      those files.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>The supplementary header file makes it simpler to separate compilation of
      lex- and yacc-files.</dd>
</dl>
<dl class="Bl-tag">
  <dt id="l"><a class="permalink" href="#l"><b>-l</b></a></dt>
  <dd>If the <b>-l</b> option is not specified, <b>yacc</b> will insert
      <i>#line</i> directives in the generated code. The <i>#line</i> directives
      let the C compiler relate errors in the generated code to the user's
      original code. If the <b>-l</b> option is specified, <b>yacc</b> will not
      insert the <i>#line</i> directives. <i>#line</i> directives specified by
      the user will be retained.</dd>
  <dt id="L"><a class="permalink" href="#L"><b>-L</b></a></dt>
  <dd>enable position processing, e.g., &#x201C;%locations&#x201D; (compile-time
      configuration for <b>btyacc</b>).</dd>
  <dt id="o"><a class="permalink" href="#o"><b>-o
    </b><i>output_file</i></a></dt>
  <dd>specify the filename for the parser file. If this option is not given, the
      output filename is the file prefix concatenated with the file suffix,
      e.g., <b>y.tab.c</b>. This overrides the <b>-b</b> option.</dd>
  <dt id="p"><a class="permalink" href="#p"><b>-p
    </b><i>symbol_prefix</i></a></dt>
  <dd>The <b>-p</b> option changes the prefix prepended to yacc-generated
      symbols to the string denoted by <i>symbol_prefix.</i> The default prefix
      is the string <b>yy.</b></dd>
  <dt id="P"><a class="permalink" href="#P"><b>-P</b></a></dt>
  <dd>create a reentrant parser, e.g., &#x201C;%pure-parser&#x201D;.</dd>
  <dt id="r"><a class="permalink" href="#r"><b>-r</b></a></dt>
  <dd>The <b>-r</b> option causes <b>yacc</b> to produce separate files for code
      and tables. The code file is named <i>y.code.c</i>, and the tables file is
      named <i>y.tab.c</i>. The prefix &#x201C;<i>y.</i>&#x201D; can be
      overridden using the <b>-b</b> option.</dd>
  <dt id="s"><a class="permalink" href="#s"><b>-s</b></a></dt>
  <dd>suppress &#x201C;<b>#define</b>&#x201D; statements generated for string
      literals in a &#x201C;<b>%token</b>&#x201D; statement, to more closely
      match original <b>yacc</b> behavior.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Normally when <b>yacc</b> sees a line such as</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<span class="Li">%token OP_ADD &quot;ADD&quot;</span></pre>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd>it notices that the quoted &#x201C;ADD&#x201D; is a valid C identifier,
      and generates a #define not only for OP_ADD, but for ADD as well,
    e.g.,</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<span class="Li">#define OP_ADD 257</span>
<br/>
#define ADD 258</pre>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd>The original <b>yacc</b> does not generate the second
      &#x201C;<b>#define</b>&#x201D;. The <b>-s</b> option suppresses this
      &#x201C;<b>#define</b>&#x201D;.</dd>
  <dt></dt>
  <dd>POSIX (IEEE 1003.1 2004) documents only names and numbers for
      &#x201C;<b>%token</b>&#x201D;, though original <b>yacc</b> and bison also
      accept string literals.</dd>
</dl>
<dl class="Bl-tag">
  <dt id="t"><a class="permalink" href="#t"><b>-t</b></a></dt>
  <dd>The <b>-t</b> option changes the preprocessor directives generated by
      <b>yacc</b> so that debugging statements will be incorporated in the
      compiled code.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd><b>Yacc</b> sends debugging output to the standard output (compatible with
      both the original <b>yacc</b> and <b>btyacc</b>), while <b>btyacc</b>
      writes debugging output to the standard error (like <b>bison</b>).</dd>
</dl>
<dl class="Bl-tag">
  <dt id="v"><a class="permalink" href="#v"><b>-v</b></a></dt>
  <dd>The <b>-v</b> option causes a human-readable description of the generated
      parser to be written to the file <i>y.output.</i></dd>
  <dt id="V"><a class="permalink" href="#V"><b>-V</b></a></dt>
  <dd>print the version number to the standard output.</dd>
  <dt id="y"><a class="permalink" href="#y"><b>-y</b></a></dt>
  <dd><b>yacc</b> ignores this option, which bison supports for ostensible POSIX
      compatibility.</dd>
</dl>
<p class="Pp">The <i>filename</i> parameter is not optional. However,
    <b>yacc</b> accepts a single &#x201C;-&#x201D; to read the grammar from the
    standard input. A double &#x201C;--&#x201D; marker denotes the end of
    options. A single <i>filename</i> parameter is expected after a
    &#x201C;--&#x201D; marker.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXTENSIONS"><a class="permalink" href="#EXTENSIONS">EXTENSIONS</a></h1>
<p class="Pp"><b>Yacc</b> provides some extensions for compatibility with bison
    and other implementations of yacc. It accepts several <i>long options</i>
    which have equivalents in yacc. The <b>%destructor</b> and <b>%locations</b>
    features are available only if <b>yacc</b> has been configured and compiled
    to support the back-tracking (<b>btyacc</b>) functionality. The remaining
    features are always available:</p>
<dl class="Bl-tag">
  <dt><b> %code</b> <i>keyword</i> { <i>code</i> }</dt>
  <dd>Adds the indicated source <i>code</i> at a given point in the output file.
      The optional <i>keyword</i> tells <b>yacc</b> where to insert the
      <i>code</i>:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="top"><a class="permalink" href="#top"><b>top</b></a></dt>
  <dd>just after the version-definition in the generated code-file.</dd>
  <dt id="requires"><a class="permalink" href="#requires"><b>requires</b></a></dt>
  <dd>just after the declaration of public parser variables. If the <b>-d</b>
      option is given, the code is inserted at the beginning of the
      defines-file.</dd>
  <dt id="provides"><a class="permalink" href="#provides"><b>provides</b></a></dt>
  <dd>just after the declaration of private parser variables. If the <b>-d</b>
      option is given, the code is inserted at the end of the defines-file.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd>If no <i>keyword</i> is given, the code is inserted at the beginning of
      the section of code copied verbatim from the source file. Multiple
      <b>%code</b> directives may be given; <b>yacc</b> inserts those into the
      corresponding code- or defines-file in the order that they appear in the
      source file.</dd>
</dl>
<dl class="Bl-tag">
  <dt><b> %debug</b></dt>
  <dd>This has the same effect as the &#x201C;-t&#x201D; command-line
    option.</dd>
  <dt><b> %destructor</b> { <i>code</i> } <i>symbol+</i></dt>
  <dd>defines code that is invoked when a symbol is automatically discarded
      during error recovery. This code can be used to reclaim dynamically
      allocated memory associated with the corresponding semantic value for
      cases where user actions cannot manage the memory explicitly.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>On encountering a parse error, the generated parser discards symbols on
      the stack and input tokens until it reaches a state that will allow
      parsing to continue. This error recovery approach results in a memory leak
      if the <b>YYSTYPE</b> value is, or contains, pointers to dynamically
      allocated memory.</dd>
  <dt></dt>
  <dd>The bracketed <i>code</i> is invoked whenever the parser discards one of
      the symbols. Within <i>code</i>, &#x201C;<b>$$</b>&#x201D; or
      &#x201C;<b>$&lt;</b><i>tag</i><b>&gt;$</b>&#x201D; designates the semantic
      value associated with the discarded symbol, and &#x201C;<b>@$</b>&#x201D;
      designates its location (see <b>%locations</b> directive).</dd>
  <dt></dt>
  <dd>A per-symbol destructor is defined by listing a grammar symbol in
      <i>symbol+</i>. A per-type destructor is defined by listing a semantic
      type tag (e.g., &#x201C;&lt;some_tag&gt;&#x201D;) in <i>symbol+</i>; in
      this case, the parser will invoke <i>code</i> whenever it discards any
      grammar symbol that has that semantic type tag, unless that symbol has its
      own per-symbol destructor.</dd>
  <dt></dt>
  <dd>Two categories of default destructor are supported that are invoked when
      discarding any grammar symbol that has no per-symbol and no per-type
      destructor:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>the code for &#x201C;<b>&lt;*&gt;</b>&#x201D; is used for grammar symbols
      that have an explicitly declared semantic type tag (via
      &#x201C;<b>%type</b>&#x201D;);</li>
  <li>the code for &#x201C;<b>&lt;&gt;</b>&#x201D; is used for grammar symbols
      that have no declared semantic type tag.</li>
</ul>
</div>
<dl class="Bl-tag">
  <dt><b> %empty</b></dt>
  <dd>ignored by <b>yacc</b>.</dd>
  <dt><b> %expect</b> <i>number</i></dt>
  <dd>tells <b>yacc</b> the expected number of shift/reduce conflicts. That
      makes it only report the number if it differs.</dd>
  <dt><b> %expect-rr</b> <i>number</i></dt>
  <dd>tell <b>yacc</b> the expected number of reduce/reduce conflicts. That
      makes it only report the number if it differs. This is (unlike bison)
      allowable in LALR parsers.</dd>
  <dt><b> %locations</b></dt>
  <dd>tells <b>yacc</b> to enable management of position information associated
      with each token, provided by the lexer in the global variable
      <b>yylloc</b>, similar to management of semantic value information
      provided in <b>yylval</b>.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>As for semantic values, locations can be referenced within actions using
      <b>@$</b> to refer to the location of the left hand side symbol, and
      <b>@</b><i>N</i> (<i>N</i> an integer) to refer to the location of one of
      the right hand side symbols. Also as for semantic values, when a rule is
      matched, a default action is used the compute the location represented by
      <b>@$</b> as the beginning of the first symbol and the end of the last
      symbol in the right hand side of the rule. This default computation can be
      overridden by explicit assignment to <b>@$</b> in a rule action.</dd>
  <dt></dt>
  <dd>The type of <b>yylloc</b> is <b>YYLTYPE</b>, which is defined by default
      as:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<span class="Li">typedef struct YYLTYPE {</span>
<br/>
<span class="Li">    int first_line;</span>
<br/>
<span class="Li">    int first_column;</span>
<br/>
<span class="Li">    int last_line;</span>
<br/>
<span class="Li">    int last_column;</span>
<span class="Li">} YYLTYPE;</span></pre>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd><b>YYLTYPE</b> can be redefined by the user (<b>YYLTYPE_IS_DEFINED</b>
      must be defined, to inhibit the default) in the declarations section of
      the specification file. As in bison, the macro <b>YYLLOC_DEFAULT</b> is
      invoked each time a rule is matched to calculate a position for the left
      hand side of the rule, before the associated action is executed; this
      macro can be redefined by the user.</dd>
  <dt></dt>
  <dd>This directive adds a <b>YYLTYPE</b> parameter to <b>yyerror()</b>. If the
      <b>%pure-parser</b> directive is present, a <b>YYLTYPE</b> parameter is
      added to <b>yylex()</b> calls.</dd>
</dl>
<dl class="Bl-tag">
  <dt><b> %lex-param</b> { <i>argument-declaration</i> }</dt>
  <dd>By default, the lexer accepts no parameters, e.g., <b>yylex()</b>. Use
      this directive to add parameter declarations for your customized
    lexer.</dd>
  <dt><b> %parse-param</b> { <i>argument-declaration</i> }</dt>
  <dd>By default, the parser accepts no parameters, e.g., <b>yyparse()</b>. Use
      this directive to add parameter declarations for your customized
    parser.</dd>
  <dt><b> %pure-parser</b></dt>
  <dd>Most variables (other than <b>yydebug</b> and <b>yynerrs</b>) are
      allocated on the stack within <b>yyparse</b>, making the parser reasonably
      reentrant.</dd>
  <dt><b> %token-table</b></dt>
  <dd>Make the parser's names for tokens available in the <b>yytname</b> array.
      However, <b>yacc</b> does not predefine &#x201C;$end&#x201D;,
      &#x201C;$error&#x201D; or &#x201C;$undefined&#x201D; in this array.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PORTABILITY"><a class="permalink" href="#PORTABILITY">PORTABILITY</a></h1>
<p class="Pp">According to Robert Corbett,</p>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<span class="Li">Berkeley Yacc is an LALR(1) parser generator.  Berkeley Yacc</span>
<span class="Li">has been made as compatible as possible with AT&amp;T Yacc.</span>
<span class="Li">Berkeley Yacc can accept any input specification that</span>
<span class="Li">conforms to the AT&amp;T Yacc documentation.  Specifications</span>
<span class="Li">that take advantage of undocumented features of AT&amp;T Yacc</span>
<span class="Li">will probably be rejected.</span></pre>
</div>
<p class="Pp">The rationale in</p>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<span class="Li">http://pubs.opengroup.org/onlinepubs/9699919799/utilities/yacc.html</span></pre>
</div>
<p class="Pp">documents some features of AT&amp;T yacc which are no longer
    required for POSIX compliance.</p>
<p class="Pp">That said, you may be interested in reusing grammar files with
    some other implementation which is not strictly compatible with AT&amp;T
    yacc. For instance, there is bison. Here are a few differences:</p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd><b>Yacc</b> accepts an equals mark preceding the left curly brace of an
      action (as in the original grammar file <b>ftp.y</b>):</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<br/>
<span class="Li">    |   STAT CRLF</span>
<br/>
<span class="Li">        = {</span>
<br/>
<span class="Li">                statcmd();</span>
<br/>
<span class="Li">        }</span></pre>
</div>
<ul class="Bl-bullet">
  <li><b>Yacc</b> and bison emit code in different order, and in particular
      bison makes forward reference to common functions such as yylex, yyparse
      and yyerror without providing prototypes.</li>
  <li>Bison's support for &#x201C;%expect&#x201D; is broken in more than one
      release. For best results using bison, delete that directive.</li>
  <li>Bison has no equivalent for some of <b>yacc</b>'s command-line options,
      relying on directives embedded in the grammar file.</li>
  <li>Bison's &#x201C;<b>-y</b>&#x201D; option does not affect bison's lack of
      support for features of AT&amp;T yacc which were deemed obsolescent.</li>
  <li><b>Yacc</b> accepts multiple parameters with <b>%lex-param</b> and
      <b>%parse-param</b> in two forms</li>
</ul>
<div class="Bd-indent">
<p class="Pp"></p>
<pre>
<span class="Li">{type1 name1} {type2 name2} ...</span>
<span class="Li">{type1 name1,  type2 name2 ...}</span></pre>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Bison accepts the latter (though undocumented), but depending on the
      release may generate bad code.</dd>
</dl>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Like bison, <b>yacc</b> will add parameters specified via
      <b>%parse-param</b> to <b>yyparse</b>, <b>yyerror</b> and (if configured
      for back-tracking) to the destructor declared using <b>%destructor</b>.
      Bison puts the additional parameters <i>first</i> for <b>yyparse</b> and
      <b>yyerror</b> but <i>last</i> for destructors. <b>Yacc</b> matches this
      behavior.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">If there are rules that are never reduced, the number of such
    rules is reported on standard error. If there are any LALR(1) conflicts, the
    number of conflicts is reported on standard error.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">November 6, 2022</td>
    <td class="foot-os">Berkeley Yacc</td>
  </tr>
</table>
</body>
</html>
