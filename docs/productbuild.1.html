<!DOCTYPE html>
<html>
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>productbuild(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">productbuild(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">productbuild(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">productbuild</code> &#x2014;
<div class="Nd">Build a product archive for the macOS Installer or the Mac App
  Store.</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">productbuild</code></td>
    <td>[--product <var class="Ar">requirements-plist</var>]
      {<code class="Cm">--component</code> <var class="Ar">component-path</var>
      [<var class="Ar">install-path</var>]}
      <var class="Ar">product-output-path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">productbuild</code></td>
    <td>{<code class="Cm">--content</code> <var class="Ar">content-path</var>}
      <var class="Ar">product-output-path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">productbuild</code></td>
    <td>[--product <var class="Ar">requirements-plist</var>]
      {<code class="Cm">--root</code> <var class="Ar">root-path</var>
      <var class="Ar">install-path</var>}
      <var class="Ar">product-output-path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">productbuild</code></td>
    <td>[options] <code class="Cm">--distribution</code>
      <var class="Ar">dist-path</var> [<code class="Cm">--package-path</code>
      <var class="Ar">search-path</var>]
      <var class="Ar">product-output-path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">productbuild</code></td>
    <td><code class="Cm">--synthesize</code> [--product
      <var class="Ar">requirements-plist</var>]
      {<code class="Cm">--package</code> <var class="Ar">pkg-path</var>}
      <var class="Ar">distribution-output-path</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
A product archive is a flat file with a <span class="Pa">.pkg</span> extension.
  <code class="Nm">productbuild</code> creates a deployable product archive,
  which can be used with the OS X Installer, or submitted to the Mac App Store.
  It has 5 different modes, as shown in the
  <a class="Sx" href="#SYNOPSIS">SYNOPSIS</a> above:
<ol class="Bl-enum">
  <li><i class="Em">Create a product archive from a bundle (e.g. for the Mac App
      Store).</i> If you have a self-contained bundle (e.g. an app) that always
      gets installed to the same location (e.g.
      <span class="Pa">/Applications</span>), specify the bundle and install
      path using the <code class="Cm">--component</code> option. You can specify
      additional requirements using a
      <a class="Sx" href="#PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST">PRE-INSTALL
      REQUIREMENTS PROPERTY LIST</a>. When you specify a bundle,
      <code class="Nm">productbuild</code> automatically creates a component
      package, much like <a class="Xr">pkgbuild(1)</a>, and synthesizes a
      distribution file.</li>
  <li><i class="Em">Create a product archive for in-app content.</i> Specify
      in-app content using the <code class="Cm">--content</code> option.</li>
  <li><i class="Em">Create a product archive from a destination root.</i> When
      you use <a class="Xr">xcodebuild(1)</a> with the <i class="Em">install</i>
      action, the result is a destination root, either under
      <span class="Pa">/tmp</span>, or in whatever location you specify with the
      Xcode <code class="Ev">DSTROOT</code> setting. Use the
      <code class="Nm">productbuild</code> <code class="Cm">--root</code> option
      to specify that destination root directory and its install path. You can
      specify additional requirements using a
      <a class="Sx" href="#PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST">PRE-INSTALL
      REQUIREMENTS PROPERTY LIST</a>. When you specify a root,
      <code class="Nm">productbuild</code> automatically creates a component
      package, much like <a class="Xr">pkgbuild(1)</a>, and synthesizes a
      distribution file.</li>
  <li><i class="Em">Create a product archive using a distribution file.</i> If
      you have a distribution file, use the
      <code class="Cm">--distribution</code> option to specify the path to it,
      and the <code class="Cm">--package-path</code> option to specify the
      directory where the component packages are found (if they are not in the
      current working directory). All packages referenced by the distribution
      will be incorporated into the resulting product archive.</li>
  <li><i class="Em">Synthesize a distribution for one or more component
      packages.</i> This also synthesizes a distribution (also using an optional
      <a class="Sx" href="#PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST">PRE-INSTALL
      REQUIREMENTS PROPERTY LIST</a>), but writes out the resulting distribution
      instead of incorporating it into a product archive. This can serve as a
      starting point if a more sophisticated distribution is required.</li>
</ol>
<p class="Pp"><i class="Em">When creating product archives for submission to the
    Mac App Store,</i> use only the <code class="Cm">--component</code> mode of
    <code class="Nm">productbuild</code>. The other modes will create product
    archives that are compatible with the OS X Installer, but are not
    necessarily acceptable for the Mac App Store.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ARGUMENTS_AND_OPTIONS"><a class="permalink" href="#ARGUMENTS_AND_OPTIONS">ARGUMENTS
  AND OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#--distribution"><code class="Cm" id="--distribution">--distribution</code></a>
    <var class="Ar">dist-path</var></dt>
  <dd>Use the distribution file at <var class="Ar">dist-path</var> to define the
      presentation, choices and packages to be installed by the product. Each of
      the package names referenced in the given distribution file must be found
      in a path specified with the <code class="Cm">--package-path</code> flag.
    <p class="Pp">If <code class="Cm">--distribution</code> is omitted, a
        distribution will be synthesized to install all of the bundles given by
        <code class="Cm">--component</code> flags, or all of the packages given
        by <code class="Cm">--package</code> flags.</p>
  </dd>
  <dt><a class="permalink" href="#--package-path"><code class="Cm" id="--package-path">--package-path</code></a>
    <var class="Ar">search-path</var></dt>
  <dd><code class="Nm">productbuild</code> will search in
      <var class="Ar">search-path</var> for component packages named in the
      distribution. You can use multiple <code class="Cm">--package-path</code>
      flags if necessary. The current working directory is searched
      automatically.</dd>
  <dt><a class="permalink" href="#--resources"><code class="Cm" id="--resources">--resources</code></a>
    <var class="Ar">rsrc-dir</var></dt>
  <dd><code class="Nm">productbuild</code> will copy the resources from
      <var class="Ar">rsrc-dir</var> into the resulting product archive.
      <var class="Ar">rsrc-dir</var> can contain unlocalized resources (such as
      image files) and/or standard lproj directories (e.g.
      <span class="Pa">English.lproj</span>) containing localized resources
      (such as strings files).</dd>
  <dt><a class="permalink" href="#--ui"><code class="Cm" id="--ui">--ui</code></a>
    <var class="Ar">interface-type</var></dt>
  <dd>If the distribution has multiple choices-outline elements, you can use
      <code class="Cm">--ui</code> to select one for building the product
      archive: this controls which package references are used. The
      <var class="Ar">interface-type</var> should match the value of the
      &#x201C;ui&#x201D; attribute on the desired choices-outline. The default
      is to use the choices-outline with no ui attribute.
    <p class="Pp">If used without <code class="Cm">--distribution</code>, the
        given <var class="Ar">interface-type</var> will be used for the
        choices-outline of the synthesized distribution.</p>
  </dd>
  <dt><a class="permalink" href="#--identifier"><code class="Cm" id="--identifier">--identifier</code></a>
    <var class="Ar">product-identifier</var></dt>
  <dd>The given unique (non-localized) <var class="Ar">product-identifier</var>
      will be associated with the product.</dd>
  <dt><a class="permalink" href="#--version"><code class="Cm" id="--version">--version</code></a>
    <var class="Ar">product-version</var></dt>
  <dd>The given <var class="Ar">product-version</var> string will be associated
      with the product.</dd>
  <dt><a class="permalink" href="#--component"><code class="Cm" id="--component">--component</code></a>
    <var class="Ar">component-path</var>
    [<var class="Ar">install-path</var>]</dt>
  <dd>The bundle at <var class="Ar">component-path</var> is added to the product
      archive (as its own component package) and to the synthesized
      distribution. If <var class="Ar">install-path</var> is specified, it is
      used as the default install location for the bundle. (If you omit
      <var class="Ar">install-path,</var> a location is inferred from the given
      <var class="Ar">component-path</var>.)
    <p class="Pp">Valid only if <code class="Cm">--distribution</code> is not
        specified.</p>
  </dd>
  <dt><a class="permalink" href="#--component-compression"><code class="Cm" id="--component-compression">--component-compression</code></a>
    <var class="Ar">compression-mode</var></dt>
  <dd>Allows control of compression used for storing any components added via
      the <code class="Cm">--component</code> option. This option does not
      affect the compression used for plugins or scripts. Three
      <var class="Ar">compression-mode</var> arguments are supported:</dd>
</dl>
<ul class="Bl-bullet Bd-indent">
  <li><b class="Sy">legacy</b> forces a 10.5-compatible compression algorithm
      for all components.</li>
  <li><b class="Sy">auto</b> enables <code class="Nm">productbuild</code> to
      automatically select newer, more efficient compression algorithms based on
      properties of the component, such as supported operating system versions.
      (See <b class="Sy">os</b> in the
      <a class="Sx" href="#PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST">PRE-INSTALL
      REQUIREMENTS PROPERTY LIST</a> section for more details on specifying
      operating system requirements.)</li>
  <li><b class="Sy">default</b> provides identical behavior to omitting
      <code class="Cm">--component-compression</code> entirely. It is currently
      equivalent to <b class="Sy">legacy</b> but may change in future releases
      of OS X.
    <dl class="Bl-tag">
    </dl>
    <p class="Pp">Note that the Mac App Store may override the specified
        <var class="Ar">compression-mode</var> for submitted product
      archives.</p>
    <p class="Pp">Valid with <code class="Cm">--component</code> only. To
        control compression of component packages with
        <code class="Cm">--distribution</code> or <code class="Cm">--root</code>
        use <a class="Xr">pkgbuild(1)</a> and reference each component package
        in a distribution file.</p>
  </li>
</ul>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#--content"><code class="Cm" id="--content">--content</code></a>
    <var class="Ar">content-path</var></dt>
  <dd>The contents of the directory at <var class="Ar">content-path</var> are
      added to the product archive (as its own component package) and to the
      synthesized distribution.
    <p class="Pp">Valid only if <code class="Cm">--distribution</code> is not
        specified.</p>
  </dd>
  <dt><a class="permalink" href="#--root"><code class="Cm" id="--root">--root</code></a>
    <var class="Ar">root-path</var> <var class="Ar">install-path</var></dt>
  <dd>The entire directory tree at <var class="Ar">root-path</var> is added to
      the product archive (as its own component package) and to the synthesized
      distribution. This is typically used for a destination root created by
      <a class="Xr">xcodebuild(1)</a>.
    <p class="Pp">Valid only if <code class="Cm">--distribution</code> is not
        specified.</p>
  </dd>
  <dt><a class="permalink" href="#--package"><code class="Cm" id="--package">--package</code></a>
    <var class="Ar">pkg-path</var> [<var class="Ar">install-path</var>]</dt>
  <dd>The component package at <var class="Ar">pkg-path</var> is added to the
      product archive and to the synthesized distribution. If
      <var class="Ar">install-path</var> is specified, it is used as the default
      install location for the package, overriding any default location
      specified by the component package itself.
    <p class="Pp">Valid only if <code class="Cm">--distribution</code> is not
        specified.</p>
    <p class="Pp">If the package provided was created by the
        <code class="Cm">pkgbuild</code> tool with the
        <code class="Cm">--large-payload</code> option specified, then its large
        payload format will be preserved. The generated product's distribution
        will include a minimum system version requirement of
        <code class="Cm">macOS 12.0</code> or the minimum allowable system
        version(s) in the requirements property list, whichever is greater.</p>
  </dd>
  <dt><a class="permalink" href="#--synthesize"><code class="Cm" id="--synthesize">--synthesize</code></a></dt>
  <dd>Write the synthesized distribution directly instead of incorporating it
      into a product archive.</dd>
  <dt><a class="permalink" href="#--product"><code class="Cm" id="--product">--product</code></a>
    <var class="Ar">requirements-plist</var></dt>
  <dd>When synthesizing a distribution, use the requirements from
      <var class="Ar">requirements-plist</var>. See
      <a class="Sx" href="#PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST">PRE-INSTALL
      REQUIREMENTS PROPERTY LIST</a> (this was formerly called the
      &#x201C;product definition property list&#x201D;).</dd>
  <dt><a class="permalink" href="#--scripts"><code class="Cm" id="--scripts">--scripts</code></a>
    <var class="Ar">scripts-path</var></dt>
  <dd>The contents of <var class="Ar">scripts-path</var> is added to the product
      archive for use by system.run() commands in the distribution. This is
      valid only for product archives targeted to the OS X Installer
      application.</dd>
  <dt><a class="permalink" href="#--plugins"><code class="Cm" id="--plugins">--plugins</code></a>
    <var class="Ar">plugins-path</var></dt>
  <dd>The contents of <var class="Ar">plugins-path</var> is added to the product
      archive for use by the OS X Installer application's plugin mechanism. It
      will normally contain a <span class="Pa">InstallerSections.plist</span>
      file, and one or more plugin bundles.</dd>
  <dt><a class="permalink" href="#--large-payload"><code class="Cm" id="--large-payload">--large-payload</code></a></dt>
  <dd>By default, packages that are nested inside of products have a
      per&#x2010;file size limit associated with them. This method instructs
      <code class="Cm">productbuild</code> to construct a product where the
      included payload format supports large files. A large file is defined as
      any file that is <code class="Cm">8 GiB</code> or larger.
    <p class="Pp"><code class="Cm">Note:</code> Opting into
        <code class="Cm">--large-payload</code> enforces a distribution
        requirement that mandates <code class="Cm">macOS 12.0</code> or
      later.</p>
  </dd>
  <dt><a class="permalink" href="#--sign"><code class="Cm" id="--sign">--sign</code></a>
    <var class="Ar">identity-name</var></dt>
  <dd>Adds a digital signature to the resulting package. See
      <a class="Sx" href="#SIGNED_PRODUCT_ARCHIVES">SIGNED PRODUCT
    ARCHIVES</a></dd>
  <dt><a class="permalink" href="#--keychain"><code class="Cm" id="--keychain">--keychain</code></a>
    <var class="Ar">keychain-path</var></dt>
  <dd>Specify a specific keychain to search for the signing identity. See
      <a class="Sx" href="#SIGNED_PRODUCT_ARCHIVES">SIGNED PRODUCT
    ARCHIVES</a></dd>
  <dt><a class="permalink" href="#--cert"><code class="Cm" id="--cert">--cert</code></a>
    <var class="Ar">certificate-name</var></dt>
  <dd>Specify an intermediate certificate to be embedded in the package. See
      <a class="Sx" href="#SIGNED_PRODUCT_ARCHIVES">SIGNED PRODUCT
    ARCHIVES</a></dd>
  <dt><a class="permalink" href="#--timestamp"><code class="Cm" id="--timestamp">--timestamp</code></a></dt>
  <dd>Include a trusted timestamp with the signature. See
      <a class="Sx" href="#SIGNED_PRODUCT_ARCHIVES">SIGNED PRODUCT
    ARCHIVES</a></dd>
  <dt><a class="permalink" href="#--timestamp=none"><code class="Cm" id="--timestamp=none">--timestamp=none</code></a></dt>
  <dd>Disable trusted timestamp, regardless of identity. See
      <a class="Sx" href="#SIGNED_PRODUCT_ARCHIVES">SIGNED PRODUCT
    ARCHIVES</a></dd>
  <dt><a class="permalink" href="#--quiet"><code class="Cm" id="--quiet">--quiet</code></a></dt>
  <dd>Inhibits status messages on stdout. Any error messages are still sent to
      stderr.</dd>
  <dt><var class="Ar">product-output-path</var></dt>
  <dd>The path to which the product archive will be written.</dd>
  <dt><var class="Ar">distribution-output-path</var></dt>
  <dd>When <code class="Cm">--synthesize</code> is used, the path to which the
      synthesized distribution will be written.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST"><a class="permalink" href="#PRE_INSTALL_REQUIREMENTS_PROPERTY_LIST">PRE-INSTALL
  REQUIREMENTS PROPERTY LIST</a></h1>
When you use <code class="Nm">productbuild</code> to synthesize a distribution
  (e.g. with the <code class="Cm">--component</code> option), you can specify
  pre-install requirements in a separate property list file, specified with the
  <code class="Cm">--product</code> option. (When you use Xcode to create a
  package for the Mac App Store, you can specify this file using the
  &#x201C;Pre-install Requirements Property List&#x201D; build setting.)
<p class="Pp">At the top level, this property list is a dictionary, with the
    following keys:</p>
<table class="Bl-column">
  <tr>
    <td><b class="Sy">Key</b></td>
    <td><b class="Sy">Description</b></td>
  </tr>
  <tr>
    <td><b class="Sy">os</b></td>
    <td>Minimum allowable OS versions (array of strings)</td>
  </tr>
  <tr>
    <td><b class="Sy">arch</b></td>
    <td>Supported architectures (array of strings)</td>
  </tr>
  <tr>
    <td><b class="Sy">ram</b></td>
    <td>Minimum required RAM in gigabytes (real)</td>
  </tr>
  <tr>
    <td><b class="Sy">bundle</b></td>
    <td>Specific bundles that must exist on the system (array of
      dictionaries)</td>
  </tr>
  <tr>
    <td><b class="Sy">all-bundles</b></td>
    <td>Are all of the bundles specified required? (Boolean)</td>
  </tr>
  <tr>
    <td><b class="Sy">gl-renderer</b></td>
    <td>Required OpenGL capabilities (string)</td>
  </tr>
  <tr>
    <td><b class="Sy">cl-device</b></td>
    <td>Required OpenCL capabilities (string)</td>
  </tr>
  <tr>
    <td><b class="Sy">metal-device</b></td>
    <td>Required Metal capabilities (string)</td>
  </tr>
  <tr>
    <td><b class="Sy">single-graphics-device</b></td>
    <td>Requires that OpenGL, OpenCL, and Metal requirements be met by a single
      device. (Boolean)</td>
  </tr>
  <tr>
    <td><b class="Sy">sysctl-requirements</b></td>
    <td>Additional required hardware properties (string)</td>
  </tr>
  <tr>
    <td><b class="Sy">home</b></td>
    <td>Should installation be allowed in user home directory? (Boolean)</td>
  </tr>
</table>
<ul class="Bl-bullet">
  <li>The <b class="Sy">os</b> key defines one or more minimum system versions.
      You might have multiple versions if a certain OS update is required for a
      given major OS version. For example, if you specify 10.5.4 and 10.6.2,
      Leopard would be allowed from 10.5.4 up, and Snow Leopard from 10.6.2 up,
      but 10.6 and 10.6.1 would be rejected. There is no upper-bound associated
      with the highest value given.
    <p class="Pp"><i class="Em">NOTE:</i> Some of the other requirements imply
        their own minimum system versions, which may override the values set
        here. This is noted below where applicable.</p>
  </li>
  <li>The <b class="Sy">arch</b> key specifies the supported architectures, e.g.
      x86_64 and/or arm64. Note that i386 infers x86_64, for compatibility
      reasons.
    <p class="Pp"><i class="Em">NOTE:</i> On Apple Silicon, the macOS Installer
        will evaluate the product's distribution under Rosetta 2 unless the
        <b class="Sy">arch</b> key includes the arm64 architecture specifier.
        Some distribution properties may be evaluated differently between
        Rosetta 2 and native execution, such as the predicate specified by the
        <b class="Sy">sysctl-requirements</b> key. If the distribution is
        evaluated under Rosetta 2, any package scripts inside of product will be
        executed with Rosetta 2 at install time.</p>
    <p class="Pp"><i class="Em">NOTE:</i> Starting on macOS 11.0 (Big Sur),
        <b class="Sy">productbuild</b> will automatically specify support for
        both arm64 and x86_64 unless a custom value for <b class="Sy">arch</b>
        is provided.</p>
  </li>
  <li>The <b class="Sy">ram</b> key specifies the minimum amount of RAM
      required, in gigabytes.</li>
  <li>The <b class="Sy">gl-renderer</b> key specifies a predicate, against which
      each of the OpenGL hardware renderers will be checked. For the product to
      be installed, at least one of the renderers must match the requirements of
      the predicate. The given predicate string must be convertible to an
      NSPredicate, and can use the following key paths:
    <table class="Bl-column">
      <tr>
        <td><b class="Sy">Key Path</b></td>
        <td><b class="Sy">Description</b></td>
      </tr>
      <tr>
        <td><b class="Sy">version</b></td>
        <td>The supported OpenGL version as a double (e.g. major.minor).</td>
      </tr>
      <tr>
        <td><b class="Sy">extensions</b></td>
        <td>An array of OpenGL extension strings supported.</td>
      </tr>
      <tr>
        <td><b class="Sy">limits.&lt;gl-parameter&gt;</b></td>
        <td>The integer value of the named GL parameter (see below).</td>
      </tr>
      <tr>
        <td><b class="Sy">limits.param&lt;value&gt;</b></td>
        <td>The integer value of the GL parameter named by enum &lt;value&gt;
          (see below).</td>
      </tr>
    </table>
    <p class="Pp">Note that arbitrary GL parameters can be checked via the
        <b class="Sy">limits</b> key, using the same symbolic name #defined by
        the GL headers. For example:</p>
    <div class="Bd Pp">
    <pre>
   ( version &gt;= 2.0
     OR ( ( 'GL_ARB_texture_float' IN extensions OR 'GL_ATI_texture_float' IN extensions )
          AND 'GL_ARB_vertex_blend' IN extensions ) )
   AND ( limits.GL_MAX_TEXTURE_SIZE &gt;= 1024 AND limits.GL_MAX_TEXTURE_STACK_DEPTH &gt; 8 )
    </pre>
    </div>
    <p class="Pp">Note that recently-introduced GL parameters may not be
        recognized by their symbolic names, in which case you can use the
        alternate form of <b class="Sy">param&lt;value&gt;</b>, where
        &lt;value&gt; is the enum (integer) value of the parameter. For
      example:</p>
    <div class="Bd Pp">
    <pre>
   limits.param0x0D33 &gt;= 1024
    </pre>
    </div>
    <p class="Pp"><i class="Em">NOTE:</i> The <b class="Sy">gl-renderer</b>
        requirement is ignored on versions of Mac OS X before 10.6.8. For this
        reason, specifying <b class="Sy">gl-renderer</b> will cause the minimum
        system version to be raised to 10.6.8. This may override the values set
        via the <b class="Sy">os</b> key.</p>
  </li>
  <li>The <b class="Sy">cl-device</b> key specifies a predicate, against which
      each of the OpenCL GPU devices will be checked. For the product to be
      installed, at least one of the devices must match the requirements of the
      predicate. The given predicate string must be convertible to an
      NSPredicate, and can use the following key paths:
    <table class="Bl-column">
      <tr>
        <td><b class="Sy">Key Path</b></td>
        <td><b class="Sy">Description</b></td>
      </tr>
      <tr>
        <td><b class="Sy">version</b></td>
        <td>The supported OpenCL version as a double (e.g. major.minor).</td>
      </tr>
      <tr>
        <td><b class="Sy">extensions</b></td>
        <td>An array of OpenCL extension strings supported.</td>
      </tr>
      <tr>
        <td><b class="Sy">limits.&lt;cl-parameter&gt;</b></td>
        <td>The integer value of the named CL deviceInfo parameter.</td>
      </tr>
      <tr>
        <td><b class="Sy">limits.param&lt;value&gt;</b></td>
        <td>The integer value of the CL parameter named by enum
          &lt;value&gt;.</td>
      </tr>
    </table>
    <p class="Pp"><i class="Em">NOTE:</i> The <b class="Sy">cl-device</b>
        requirement is ignored on versions of Mac OS X before 10.7. For this
        reason, specifying <b class="Sy">cl-device</b> will cause the minimum
        system version to be raised to 10.7. This may override the values set
        via the <b class="Sy">os</b> key.</p>
  </li>
  <li>The <b class="Sy">metal-device</b> key specifies a predicate, against
      which each of the Metal GPU devices will be checked. For the product to be
      installed, at least one of the devices must match the requirements of the
      predicate. The given predicate string must be convertible to an
      NSPredicate, and can use the following key paths:
    <table class="Bl-column">
      <tr>
        <td><b class="Sy">KeyPath</b></td>
        <td><b class="Sy">Description</b></td>
      </tr>
      <tr>
        <td><b class="Sy">deviceName</b></td>
        <td>The name of the Metal Device that the hardware is using.
          &lt;string&gt;</td>
      </tr>
      <tr>
        <td><b class="Sy">supportedFeatureSets</b></td>
        <td>An array of Metal (MTLFeatureSet) feature sets that the device
          supports. &lt;array&lt;string&gt;&gt;</td>
      </tr>
      <tr>
        <td><b class="Sy">isRemovable</b></td>
        <td>The device is considered to be removable. This is useful for
          requiring an eGPU. &lt;bool&gt;</td>
      </tr>
      <tr>
        <td><b class="Sy">isHeadless</b></td>
        <td>The device can not and does not have any displays attached.
          &lt;bool&gt;</td>
      </tr>
      <tr>
        <td><b class="Sy">isLowPowerDevice</b></td>
        <td>Returns if the device is the low power device for automatic gfx
          switching. &lt;bool&gt;</td>
      </tr>
      <tr>
        <td><b class="Sy">rasterOrderGroupsSupported</b></td>
        <td>The device supports raster order groups. &lt;bool&gt;</td>
      </tr>
      <tr>
        <td><b class="Sy">argumentBuffersTier</b></td>
        <td>The graphics buffer tier that the device supports.
          &lt;integer&gt;</td>
      </tr>
    </table>
    <p class="Pp"><i class="Em">NOTE:</i> The <b class="Sy">metal-device</b>
        requirement is ignored on versions of macOS before 10.14.4. For this
        reason, specifying <b class="Sy">metal-device</b> will cause the minimum
        system version to be raised to 10.14.4. This may override the value set
        via the <b class="Sy">os</b> key.</p>
    <p class="Pp"><i class="Em">NOTE:</i> An example of an MTLFeatureSet that
        would go into the <b class="Sy">supportedFeatureSets</b> array would be
        <i class="Em">MTLFeatureSet_macOS_GPUFamily1_v1</i> , a list of the
        current feature sets can be found in MTLDevice.h inside of
        Metal.framework.</p>
    <p class="Pp">If the <b class="Sy">gl-device,</b>
        <b class="Sy">cl-renderer,</b> and <b class="Sy">metal-device</b> are
        specified, all of the requirements must be satisfied. By default, the
        requirements are considered met even if one graphics device satisfies
        the OpenGL requirement and a different one satisfies the OpenCL one
        (Same with Metal). If you want to require that a single device satisfies
        all of the graphics requirements, add the
        <b class="Sy">single-graphics-device</b> key with a value of true.</p>
    <p class="Pp"><i class="Em">NOTE:</i> Setting the
        <b class="Sy">single-graphics-device</b> to <b class="Sy">true</b> will
        only be honored if all three of the graphics types are specified (
        <b class="Sy">gl-device,</b> <b class="Sy">cl-device,</b>
        <b class="Sy">metal-device</b> ). However, since legacy packages before
        10.14.4 are supported, it can also be used if only
        <b class="Sy">gl-device</b> and <b class="Sy">cl-device</b> are
        specified.</p>
  </li>
  <li>The <b class="Sy">sysctl-requirements</b> key specifies a predicate,
      against which additional hardware requirements will be checked. The
      predicate uses the <a class="Xr">sysctl(2)</a> facility to obtain hardware
      properties for the system in use. Note that only a subset of
      <a class="Xr">sysctl(2)</a> variables are available, including most of the
      hw.* tree and kern.ostype, kern.osrelease, kern.osrevision, and
      kern.version from the kern.* tree. For example:
    <div class="Bd Pp">
    <pre>
   hw.physicalcpu &gt; 1
    </pre>
    </div>
    <p class="Pp">Or:</p>
    <div class="Bd Pp">
    <pre>
   ( hw.optional.aes == 1 AND hw.memsize &gt;= 4294967296 )
    </pre>
    </div>
    <p class="Pp"><i class="Em">NOTE:</i> The
        <b class="Sy">sysctl-requirements</b> predicate is ignored on versions
        of OS X before 10.10. For this reason, specifying
        <b class="Sy">sysctl-requirements</b> will cause the minimum system
        version to be raised to 10.10. This may override the values set via the
        <b class="Sy">os</b> key.</p>
  </li>
  <li>The <b class="Sy">bundle</b> key specifies one or more bundles that must
      already exist on the system (possibly at some minimum version) for the
      product to be installed. For example, this might be appropriate if the
      product installs a plugin, and you need to ensure that a compatible
      version of the host application is available. Each object in this array is
      a dictionary with the following keys:
    <table class="Bl-column">
      <tr>
        <td><b class="Sy">Key</b></td>
        <td><b class="Sy">Description</b></td>
      </tr>
      <tr>
        <td><b class="Sy">id</b></td>
        <td>The CFBundleIdentifier of the bundle (required)</td>
      </tr>
      <tr>
        <td><b class="Sy">path</b></td>
        <td>The default path of the bundle (required)</td>
      </tr>
      <tr>
        <td><b class="Sy">CFBundleShortVersionString</b></td>
        <td>The minimum short version string of the bundle (optional)</td>
      </tr>
      <tr>
        <td><b class="Sy">search</b></td>
        <td>Search for bundle if not found at default path? (Boolean,
          optional)</td>
      </tr>
    </table>
    <p class="Pp">The given default <b class="Sy">path</b> will be checked
        first. Only if the bundle does not exist at that path, and
        <b class="Sy">search</b> is given as true, the bundle identifier
        (<b class="Sy">id</b>) will be used to find the bundle (this is
        appropriate for applications which the user might move). If the bundle
        is found through either method, and its version is greater than or equal
        to the given <b class="Sy">CFBundleShortVersionString</b>, the
        requirement is met. (If CFBundleShortVersionString is omitted, the
        bundle need only exist.)</p>
    <p class="Pp">If you specify multiple bundles, all must exist, unless you
        specify the <b class="Sy">all-bundles</b> key with a value of false, in
        which case only one of the bundles must exist.</p>
    <p class="Pp">If the bundle requirement is not met, the Installer must have
        a localized explanation to display to the user. This should be provided
        in the <span class="Pa">InfoPlist.strings</span> resource of your
        top-level bundle (as specified with
        <code class="Cm">--component</code>), under the
        <i class="Em">RequiredBundlesDescription</i> key.</p>
  </li>
  <li>The <b class="Sy">home</b> key, if set to true, designates that the
      product can be installed under the user's home directory, as an
      alternative to installing on the system for all users. This should be
      enabled only if the entire product can be installed in the home directory
      and be functional. (Home directory installation is disabled by default.)
      Note that home directory installation is not supported for the Mac App
      Store.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="SIGNED_PRODUCT_ARCHIVES"><a class="permalink" href="#SIGNED_PRODUCT_ARCHIVES">SIGNED
  PRODUCT ARCHIVES</a></h1>
When creating a product archive, you can optionally add a digital signature to
  the archive. You will need to have a certificate and corresponding private key
  -- together called an &#x201C;identity&#x201D; -- in one of your accessible
  keychains. To add a signature, specify the name of the identity using the
  <code class="Cm">--sign</code> option. The identity's name is the same as the
  &#x201C;Common Name&#x201D; of the certificate.
<p class="Pp">If you want to search for the identity in a specific keychain,
    specify the path to the keychain file using the
    <code class="Cm">--keychain</code> option. Otherwise, the default keychain
    search path is used.</p>
<p class="Pp"><code class="Nm">productbuild</code> will embed the signing
    certificate in the product archive, as well as any intermediate certificates
    that are found in the keychain. If you need to embed additional certificates
    to form a chain of trust between the signing certificate and a trusted root
    certificate on the system, use the <code class="Cm">--cert</code> option to
    give the Common Name of the intermediate certificate. Multiple
    <code class="Cm">--cert</code> options may be used to embed multiple
    intermediate certificates.</p>
<p class="Pp">The signature can optionally include a trusted timestamp. This is
    enabled by default when signing with a Developer ID identity, but it can be
    enabled explicitly using the <code class="Cm">--timestamp</code> option. A
    timestamp server must be contacted to embed a trusted timestamp. If you
    aren't connected to the Internet, you can use
    <code class="Cm">--timestamp=none</code> to disable timestamps, even for a
    Developer ID identity.</p>
<p class="Pp">Note that component packages do <i class="Em">not</i> need to be
    signed (e.g. with <a class="Xr">pkgbuild(1)</a>) before adding them to a
    signed product archive. The signature on the product archive protects the
    entire product, including the added packages.</p>
<p class="Pp">If you want to postpone signing the product archive until it has
    been tested and is ready to deploy, you can use
    <a class="Xr">productsign(1)</a> when you are ready to add the
  signature.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#productbuild_--component_build/Release/Sample.app_/Applications_Product.pkg"><code class="Li" id="productbuild_--component_build/Release/Sample.app_/Applications_Product.pkg">productbuild
    --component build/Release/Sample.app /Applications
    Product.pkg</code></a></dt>
  <dd>
    <p class="Pp">Build the archive Product.pkg to install Sample.app under
        /Applications, synthesizing a distribution. This is typical for building
        a Mac App Store archive.</p>
  </dd>
  <dt><a class="permalink" href="#productbuild_--product_def.plist_--component_build/Release/Sample.app_/Applications_Product.pkg"><code class="Li" id="productbuild_--product_def.plist_--component_build/Release/Sample.app_/Applications_Product.pkg">productbuild
    --product def.plist --component build/Release/Sample.app /Applications
    Product.pkg</code></a></dt>
  <dd>
    <p class="Pp">Build the archive Product.pkg to install Sample.app under
        /Applications, synthesizing a distribution with the requirements from
        def.plist. This is typical for building a Mac App Store archive with
        pre-install requirements.</p>
  </dd>
  <dt><a class="permalink" href="#productbuild_--distribution_Product.dist_--package-path_/tmp/Packages_Product.pkg"><code class="Li" id="productbuild_--distribution_Product.dist_--package-path_/tmp/Packages_Product.pkg">productbuild
    --distribution Product.dist --package-path /tmp/Packages
    Product.pkg</code></a></dt>
  <dd>
    <p class="Pp">Build the archive Product.pkg using Product.dist, searching
        for packages referenced by that distribution in /tmp/Packages (as well
        as in CWD).</p>
  </dd>
  <dt><a class="permalink" href="#productbuild_--distribution_Product.dist_--resources_Resources_Product.pkg"><code class="Li" id="productbuild_--distribution_Product.dist_--resources_Resources_Product.pkg">productbuild
    --distribution Product.dist --resources Resources
    Product.pkg</code></a></dt>
  <dd>
    <p class="Pp">Build the archive Product.pkg using Product.dist,
        incorporating the resources found under the Resources directory.</p>
  </dd>
  <dt><a class="permalink" href="#productbuild_--distribution_Product.dist_--sign_sample-identity_Product.pkg"><code class="Li" id="productbuild_--distribution_Product.dist_--sign_sample-identity_Product.pkg">productbuild
    --distribution Product.dist --sign sample-identity
    Product.pkg</code></a></dt>
  <dd>
    <p class="Pp">Build the archive Product.pkg using Product.dist, and sign the
        resulting archive using the identity sample-identity. You will be
        prompted to allow <code class="Nm">productbuild</code> to access the
        keychain item, unless Always Allow was chosen previously.</p>
  </dd>
  <dt><a class="permalink" href="#productbuild_--package_/tmp/a.pkg_--package_/tmp/b.pkg_Product.pkg"><code class="Li" id="productbuild_--package_/tmp/a.pkg_--package_/tmp/b.pkg_Product.pkg">productbuild
    --package /tmp/a.pkg --package /tmp/b.pkg Product.pkg</code></a></dt>
  <dd>
    <p class="Pp">Build the archive Product.pkg with the component packages
        /tmp/a.pkg and /tmp/b.pkg, synthesizing a distribution.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">pkgbuild(1)</a>, <a class="Xr">productsign(1)</a>,
  <a class="Xr">xcodebuild(1)</a>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 15, 2010</td>
    <td class="foot-os">Mac OS X</td>
  </tr>
</table>
</body>
</html>
