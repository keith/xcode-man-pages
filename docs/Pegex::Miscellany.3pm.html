<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Pegex::Miscellany(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Pegex::Miscellany(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Pegex::Miscellany(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="Miscellany"><a class="permalink" href="#Miscellany">Miscellany</a></h1>
<p class="Pp">This document contains things about Pegex that were written but
    seemed out of place in their original documents. Still they are possibly
    useful so live here for now.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Pegex_Overview"><a class="permalink" href="#Pegex_Overview">Pegex
  Overview</a></h1>
<p class="Pp">In the diagram below, there is a simple language called Foo. The
    diagram shows how Pegex can take a text grammar defining Foo and generate a
    parser that can parse Foo sources into data (abstract syntax trees).</p>
<p class="Pp"></p>
<pre>                              Parsing a language called &quot;Foo&quot;
                                 with the Pegex toolset.
                                .-----------------------.
    .--------------------.      |    Pegex::Compiler    |
    |    Foo Language    |      |-----------------------|    Serialize
    |--------------------|-----&gt;| Pegex::Grammar::Pegex |---------.
    | Pegex grammar text |      | Pegex::Receiver       |         |
    '--------------------'      '-----------------------'         v
    ......................                  |                 .------.
    |                    |                  | compile()       | YAML |
    |foo: verb noun      |                  v                 '------'
    |verb: /Hello/       |       .--------------------.       .------.
    |noun: /world/       |       | Foo grammar tree   |       | JSON |
    |                    |       '--------------------'       '------'
    ......................                  |                 .------.
                                            |                 | Perl |
                                            v                 '------'
                                 .---------------------.      .--------.
                                 | Pegex::Grammar::Foo |      | Python |
                                 |---------------------|      '--------'
                                 | Pegex::Parser       |      .-----.
                                 | Pegex::AST::Foo     |      | etc |
     .-----------------.         '---------------------'      '-----'
     |  Foo Language   |                    |
     |-----------------|-------------------&gt;| parse()
     | Foo source text |                    v
     '-----------------'        .----------------------.
     ...................        | Parsed Foo Data Tree |
     |Hello world      |        '----------------------'
     ...................        ........................
                                |- verb: Hello         |
                                |- noun: world         |
                                ........................
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="FYI"><a class="permalink" href="#FYI">FYI</a></h1>
<p class="Pp">Pegex is self-hosting. This means that the Pegex grammar language
    syntax is defined by a Pegex grammar! This is important because (just like
    any Pegex based language) it makes it easier to port to new programming
    languages. You can find the Pegex grammar for Pegex grammars here:
    &lt;http://github.com/ingydotnet/pegex-pgx/&gt;.</p>
<p class="Pp">Pegex was originally inspired by Perl 6 Rules. It also takes ideas
    from Damian Conway's Perl 5 module, Regexp::Grammars. Pegex tries to take
    the best ideas from these great works, and make them work in as many
    languages as possible. That's Acmeism.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Self_Compilation_Tricks"><a class="permalink" href="#Self_Compilation_Tricks">Self
  Compilation Tricks</a></h1>
<p class="Pp">You can have some fun using Pegex to compile itself. First get the
    Pegex grammar repo:</p>
<p class="Pp"></p>
<pre>    git clone git://github.com/ingydotnet/pegex-pgx.git
    cd pegex-pgx
</pre>
<p class="Pp">Then parse and dump the Pegex grammar with Pegex:</p>
<p class="Pp"></p>
<pre>    perl -MXXX -MPegex -e 'XXX pegex(&quot;pegex.pgx&quot;)-&gt;parse(&quot;pegex.pgx&quot;)'
</pre>
<p class="Pp">For a different view of the data tree, try:</p>
<p class="Pp"></p>
<pre>    perl -MXXX -MPegex -e 'XXX pegex(&quot;pegex.pgx&quot;, receiver =&gt; &quot;Pegex::Tree&quot;)-&gt;parse(&quot;pegex.pgx&quot;)'
</pre>
<p class="Pp">Finally to emulate the Pegex compiler do this:</p>
<p class="Pp"></p>
<pre>    perl -MXXX -MPegex -e 'XXX pegex(&quot;pegex.pgx&quot;, receiver =&gt; &quot;Pegex::Pegex::AST&quot;)-&gt;parse(&quot;pegex.pgx&quot;)'
</pre>
<p class="Pp">This specifies a &quot;receiving&quot; class that can shape the
    results into something useful. Indeed, this is the exact guts of
    Pegex::Grammar::Pegex.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="A_Real_World_EXAMPLE"><a class="permalink" href="#A_Real_World_EXAMPLE">A
  Real World EXAMPLE</a></h1>
<p class="Pp">TestML is a new Acmeist unit test language. It is perfect for
    software that needs to run equivalently in more than one language. In fact,
    Pegex itself is tested with TestML!!</p>
<p class="Pp">TestML has a language specification grammar:
    &lt;http://www.testml.org/specification/language/&gt;</p>
<p class="Pp">The Perl6 implementation of TestML uses this grammar in:
    &lt;https://github.com/ingydotnet/testml-pm6/blob/master/lib/TestML/Parser/Grammar.pm&gt;</p>
<p class="Pp">All other implementations of TestML use this Pegex grammar:
    &lt;https://github.com/ingydotnet/testml-pgx/blob/master/testml.pgx&gt;</p>
<p class="Pp">In Perl 5, Pegex::Compiler is used to compile the grammar into
    this simple data structure (shown in YAML):
    &lt;https://github.com/ingydotnet/testml-pgx/blob/master/testml.pgx.yaml&gt;</p>
<p class="Pp">The grammar can also be precompiled to JSON:
    &lt;https://github.com/ingydotnet/testml-pgx/blob/master/testml.pgx.json&gt;</p>
<p class="Pp">Pegex::Compiler further compiles this into a Perl 5 only grammar
    tree, which becomes this module:
    &lt;https://github.com/ingydotnet/testml-pm/blob/master/lib/TestML/Compiler/Pegex/Grammar.pm&gt;</p>
<p class="Pp">TestML::Parser::Grammar is a subclass of Pegex::Grammar. It can be
    used to parse TestML files. TestML::Parser calls the <b>parse()</b> method
    of the grammar with a TestML::AST object that receives callbacks when
    various rules match, and uses the information to build a TestML::Document
    object.</p>
<p class="Pp">Thus TestML is an Acmeist language written in Pegex. It can be
    easily ported to every language where Pegex exists. In fact, it must be
    ported to those languages in order to test the new Pegex implementation!</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-02-13</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
