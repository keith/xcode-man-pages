<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2001-2012 Apple Inc.
   All rights reserved.
  
   to preview: /usr/bin/nroff -msafer -mandoc agvtool.1 | less
   -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>AGVTOOL(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AGVTOOL(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">AGVTOOL(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">agvtool</code> &#x2014;
<div class="Nd">Apple-generic versioning tool for Xcode projects</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td><code class="Li">what-version</code> | <code class="Li">vers</code>
      [<code class="Fl">-terse</code>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td>[<code class="Fl">-noscm</code> | <code class="Fl">-usecvs</code> |
      <code class="Fl">-usesvn</code>] <code class="Li">next-version</code> |
      <code class="Li">bump</code> [<code class="Fl">-all</code>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td>[<code class="Fl">-noscm</code> | <code class="Fl">-usecvs</code> |
      <code class="Fl">-usesvn</code>] <code class="Li">new-version</code>
      [<code class="Fl">-all</code>] <var class="Ar">versionNumber</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td>[<code class="Fl">-noscm</code> | <code class="Fl">-usecvs</code> |
      <code class="Fl">-usesvn</code>] <code class="Li">tag</code>
      [<code class="Fl">-force</code> | <code class="Fl">-F</code>]
      [<code class="Fl">-noupdatecheck</code> | <code class="Fl">-Q</code>]
      [<code class="Fl">-baseurlfortag</code>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td>[<code class="Fl">-noscm</code> | <code class="Fl">-usecvs</code> |
      <code class="Fl">-usesvn</code>] <code class="Li">submit</code>
      [<code class="Fl">-bytag</code> | <code class="Fl">-notbytag</code>]
      [<code class="Fl">-baseurlfortag</code>] <var class="Ar">release
      ...</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td><code class="Li">what-marketing-version</code> |
      <code class="Li">mvers</code> [<code class="Fl">-terse</code> |
      <code class="Fl">-terse1</code>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">agvtool</code></td>
    <td>[<code class="Fl">-noscm</code> | <code class="Fl">-usecvs</code> |
      <code class="Fl">-usesvn</code>]
      <code class="Li">new-marketing-version</code> |
      <code class="Li">vers</code> <var class="Ar">version</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">agvtool</code> helps speed up common operations for Xcode
  projects that use the Apple Generic Versioning system.
<p class="Pp">You enable versioning support by setting up some build settings in
    your project.</p>
<section class="Ss">
<h2 class="Ss" id="Build_Settings"><a class="permalink" href="#Build_Settings">Build
  Settings</a></h2>
The settings used by the apple-generic versioning system are as follows:
<dl class="Bl-tag">
  <dt><a class="permalink" href="#VERSIONING_SYSTEM"><code class="Li" id="VERSIONING_SYSTEM">VERSIONING_SYSTEM</code></a></dt>
  <dd>This must be set to &#x201C;apple-generic&#x201D; at the project level to
      enable versioning.</dd>
  <dt><a class="permalink" href="#CURRENT_PROJECT_VERSION"><code class="Li" id="CURRENT_PROJECT_VERSION">CURRENT_PROJECT_VERSION</code></a></dt>
  <dd>This setting defines the current version of the project. The value must be
      a integer or floating point number like 57 or 365.8.</dd>
  <dt><a class="permalink" href="#DYLIB_CURRENT_VERSION"><code class="Li" id="DYLIB_CURRENT_VERSION">DYLIB_CURRENT_VERSION</code></a></dt>
  <dd>This setting defines the current version of any framework built by the
      project. Like <code class="Li">CURRENT_PROJECT_VERSION</code> the value
      must be an integer or floating point number like 57 or 365.8. By default
      it is set to &#x201C;$(CURRENT_PROJECT_VERSION)&#x201D;.</dd>
  <dt><a class="permalink" href="#VERSION_INFO_PREFIX"><code class="Li" id="VERSION_INFO_PREFIX">VERSION_INFO_PREFIX</code></a></dt>
  <dd>Used as a prefix for the name of the version info symbol in the generated
      versioning source file. If you prefix your exported symbols you will
      probably want to set this to the same prefix.</dd>
  <dt><a class="permalink" href="#VERSION_INFO_SUFFIX"><code class="Li" id="VERSION_INFO_SUFFIX">VERSION_INFO_SUFFIX</code></a></dt>
  <dd>Used as a suffix for the name of the version info symbol in the generated
      versioning source file. This is rarely used.</dd>
  <dt><a class="permalink" href="#VERSION_INFO_BUILDER"><code class="Li" id="VERSION_INFO_BUILDER">VERSION_INFO_BUILDER</code></a></dt>
  <dd>This defines a reference to the user performing a build to be included in
      the generated stub, and defaults to the value of the
      <code class="Li">USER</code> environment variable.</dd>
  <dt><a class="permalink" href="#VERSION_INFO_EXPORT_DECL"><code class="Li" id="VERSION_INFO_EXPORT_DECL">VERSION_INFO_EXPORT_DECL</code></a></dt>
  <dd>This defines a prefix string for the version info symbol declaration in
      the generated stub. This can be used, for example, to add an optional
      &#x2018;export&#x2019; keyword to the version symbol declaration. This
      should rarely be changed.</dd>
  <dt><a class="permalink" href="#VERSION_INFO_FILE"><code class="Li" id="VERSION_INFO_FILE">VERSION_INFO_FILE</code></a></dt>
  <dd>Used to specify a name for the source file that will be generated and
      compiled into your product. By default this is set to
      &#x201C;$(PRODUCT_NAME)_vers.c&#x201D;.</dd>
</dl>
<p class="Pp">To enable Apple Generic Versioning, then, you must set up at least
    the <code class="Li">VERSIONING_SYSTEM</code> and
    <code class="Li">CURRENT_PROJECT_VERSION</code> project build settings for
    each project you want to be versioned. The target of a versioned project
    will have two global variables generated and linked into your product. One
    is of type double and is simply the
    <code class="Li">CURRENT_PROJECT_VERSION</code>. The other is a version
    string which is formatted to be compatible with <a class="Xr">what(1)</a>.
    These variables are available for use in your code.</p>
<p class="Pp">Projects with multiple targets are required to have the same
    <code class="Li">CURRENT_PROJECT_VERSION</code> for each target. The easiest
    way to achieve this is to set
    <code class="Li">CURRENT_PROJECT_VERSION</code> at the project level.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Usage"><a class="permalink" href="#Usage">Usage</a></h2>
<code class="Nm">agvtool</code> should be invoked with the working directory set
  to your project directory (the folder containing your .xcodeproj project
  file).
<p class="Pp"><code class="Nm">agvtool</code> pays attention to the following
    defaults for CVS usage: <code class="Li">CVSEnabled</code>,
    <code class="Li">CVSSubmitByTag</code>, and
    <code class="Li">CVSToolPath</code>.</p>
<p class="Pp">If <code class="Li">CVSEnabled</code> is set to
    <code class="Li">YES</code> then <code class="Nm">agvtool</code> will
    perform certain CVS operations like committing modified project files and
    performing tagging operations. You can set this default by issuing the
    following command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">defaults write agvtool
  <code class="Li">CVSEnabled YES</code></code></div>
<p class="Pp">The sense of this default can be overidden by supplying an
    explicit <code class="Fl">-noscm</code> (which turns off CVS and Subversion
    usage), <code class="Fl">-usecvs</code> (which turns on CVS usage and turns
    off Subversion usage), or <code class="Fl">-usesvn</code> (which turns off
    CVS usage and turns on Subversion usage).</p>
<p class="Pp">If <code class="Li">CVSSubmitByTag</code> is set to
    <code class="Li">YES</code> then <code class="Nm">agvtool</code> will submit
    your project by CVS tag using the same version as the tag operation. The
    sense of this default can be overridden by supplying an explicit
    <code class="Fl">-bytag</code> or <code class="Fl">-notbytag</code> argument
    to the submit operation. You can set this default by issuing the following
    command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">defaults write agvtool
  <code class="Li">CVSSubmitByTag YES</code></code></div>
<p class="Pp">Set <code class="Li">CVSToolPath</code> to point to the location
    of the cvs tool to use. If this default is not set then
    <code class="Nm">agvtool</code> will use
    <span class="Pa">/usr/bin/ocvs</span> if it exists. Otherwise
    <span class="Pa">/usr/bin/cvs</span> will be used. You can set this default
    by issuing the following command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">defaults write agvtool
  <code class="Li">CVSToolPath</code>
  <var class="Ar">pathToCVS</var></code></div>
<p class="Pp"><code class="Nm">agvtool</code> pays attention to the following
    defaults for Subversion usage: <code class="Li">SVNEnabled</code>,
    <code class="Li">SVNSubmitByTag</code>, and
    <code class="Li">SVNToolPath</code>.</p>
<p class="Pp">If <code class="Li">SVNEnabled</code> is set to
    <code class="Li">YES</code> then <code class="Nm">agvtool</code> will
    perform certain Subversion operations like committing modified project files
    and performing tagging operations. You can set this default by issuing the
    following command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">defaults write agvtool
  <code class="Li">SVNEnabled YES</code></code></div>
<p class="Pp">The sense of this default can be overidden by supplying an
    explicit <code class="Fl">-noscm</code> (which turns off CVS and Subversion
    usage), <code class="Fl">-usecvs</code> (which turns on CVS usage and turns
    off Subversion usage), or <code class="Fl">-usesvn</code> (which turns off
    CVS usage and turns on Subversion usage).</p>
<p class="Pp">If <code class="Li">SVNSubmitByTag</code> is set to
    <code class="Li">YES</code> then <code class="Nm">agvtool</code> () will
    submit your project by Subversion URL using the same version as that created
    by the tag operation. The sense of this default can be overridden by
    supplying an explicit <code class="Fl">-bytag</code> or
    <code class="Fl">-notbytag</code> argument to the submit operation. You can
    set this default by issuing the following command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">defaults write agvtool
  <code class="Li">SVNSubmitByTag YES</code></code></div>
<p class="Pp">Set <code class="Li">SVNToolPath</code> to point to the location
    of the svn tool to use. If this default is not set then
    <code class="Nm">agvtool</code> will use
    <span class="Pa">/usr/local/bin/svn</span> if it exists. You can set this
    default by issuing the following command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">defaults write agvtool
  <code class="Li">SVNToolPath</code>
  <var class="Ar">pathToSVN</var></code></div>
</section>
<section class="Ss">
<h2 class="Ss" id="Commands_And_Options"><a class="permalink" href="#Commands_And_Options">Commands
  And Options</a></h2>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#what-version"><code class="Li" id="what-version">what-version</code></a>
    |
    <a class="permalink" href="#vers"><code class="Li" id="vers">vers</code></a>
    [<code class="Fl">-terse</code>]</dt>
  <dd>Prints out the current version number of the project.
    <p class="Pp">The <code class="Fl">-terse</code> option can be used to limit
        the output to the version number only.</p>
  </dd>
  <dt><a class="permalink" href="#next-version"><code class="Li" id="next-version">next-version</code></a>
    |
    <a class="permalink" href="#bump"><code class="Li" id="bump">bump</code></a>
    [<code class="Fl">-all</code>]</dt>
  <dd>Increments the version numbers of all versioned targets to the next
      highest integral value. For example, 54 will change to 55 and 234.6 will
      change to 235.
    <p class="Pp">The <code class="Li">CURRENT_PROJECT_VERSION</code> and the
        <code class="Li">DYLIB_CURRENT_VERSION</code> will be updated. The
        <code class="Fl">-all</code> option will also update the
        <code class="Li">CFBundleVersion</code> Info.plist key.</p>
    <p class="Pp">If CVS support is enabled, the modified project file will be
        committed.</p>
  </dd>
  <dt><a class="permalink" href="#new-version"><code class="Li" id="new-version">new-version</code></a>
    [<code class="Fl">-all</code> <var class="Ar">version</var>]</dt>
  <dd>Sets the version numbers of all targets to the given version.
    <p class="Pp">The <code class="Li">CURRENT_PROJECT_VERSION</code> and the
        <code class="Li">DYLIB_CURRENT_VERSION</code> will be updated. The
        <code class="Fl">-all</code> option will also update the
        <code class="Li">CFBundleVersion</code> Info.plist key.</p>
    <p class="Pp">If CVS support is enabled, the modified project file will be
        committed.</p>
  </dd>
  <dt><a class="permalink" href="#tag"><code class="Li" id="tag">tag</code></a>
    [<code class="Fl">-force</code> | <code class="Fl">-F</code>]
    [<code class="Fl">-noupdatecheck</code> | <code class="Fl">-Q</code>]
    [<code class="Fl">-baseurlfortag</code>]</dt>
  <dd>Create a new tag
      <var class="Ar">projectname</var>-<var class="Ar">currentversion</var>
      where <var class="Ar">projectname</var> is the name of the Xcode project
      file (without the extension) and <var class="Ar">currentversion</var> is
      the <code class="Li">CURRENT_PROJECT_VERSION</code> with any
      &#x2018;.&#x2019; transformed into &#x2018;~&#x2019; (since CVS does not
      allow dots in tag names).
    <p class="Pp">The <code class="Fl">-force</code> or
        <code class="Fl">-F</code> option will add a <code class="Fl">-F</code>
        to the tag operation.</p>
    <p class="Pp">The <code class="Fl">-noupdatecheck</code> or
        <code class="Fl">-Q</code> option skips the cvs update usually done
        prior to tagging to ensure that there are no uncommitted changes.</p>
    <p class="Pp">The <code class="Fl">-baseurlfortag</code> option can be used
        to provide a URL that points to the directory to place the
        &quot;tag&quot; in when using Subversion. This overrides the
        <code class="Li">SVNBaseTagURL</code> default. This option is ignored if
        Subversion is not being used.</p>
    <p class="Pp"><i class="Em">Note:</i> This command will only function if CVS
        or Subversion support is enabled.</p>
  </dd>
  <dt><a class="permalink" href="#submit"><code class="Li" id="submit">submit</code></a>
    [<code class="Fl">-bytag</code> | <code class="Fl">-notbytag</code>]
    [<code class="Fl">-baseurlfortag</code>] <var class="Ar">release
    ...</var></dt>
  <dd>Submits your project to the specified releases in Build &amp; Integration.
    <p class="Pp">The <code class="Fl">-bytag</code> option performs the
        submission by tag instead of submitting from the project source
        directly. The <code class="Fl">-notbytag</code> option submits from the
        project source.</p>
    <p class="Pp">If <code class="Li">CVSSubmitByTag</code> is set,
        <code class="Fl">-bytag</code> is the default. Otherwise,
        <code class="Fl">-notbytag</code> is the default.</p>
    <p class="Pp">The <code class="Fl">-baseurlfortag</code> option can be used
        to provide a URL that points to the directory to find &quot;tags&quot;
        in when using Subversion. This overrides the
        <code class="Li">SVNBaseTagURL</code> default. This option is ignored if
        Subversion is not being used.</p>
    <p class="Pp"><i class="Em">Note:</i> This command is relevant only for
        Apple employees.</p>
  </dd>
  <dt><a class="permalink" href="#what-marketing-version"><code class="Li" id="what-marketing-version">what-marketing-version</code></a>
    |
    <a class="permalink" href="#mvers"><code class="Li" id="mvers">mvers</code></a>
    [<code class="Fl">-terse</code> | <code class="Fl">-terse1</code>]</dt>
  <dd>Prints the current marketing version of the project. For native targets, a
      marketing version is listed for each Info.plist file found. For Jambase
      targets a marketing version is shown if a common value is found.
    <p class="Pp">The marketing version is the
        <code class="Li">CFBundleShortVersionString</code> Info.plist key. This
        is often a totally different version determined by product marketing
        folks.</p>
    <p class="Pp">The <code class="Fl">-terse</code> option will limit the
        output to the version number only when displaying version numbers for
        Jambase targets.</p>
    <p class="Pp">The <code class="Fl">-terse1</code> option will limit the
        output to the first version number found, and only display the version
        number.</p>
  </dd>
  <dt><a class="permalink" href="#new-marketing-version"><code class="Li" id="new-marketing-version">new-marketing-version</code></a>
    <var class="Ar">version</var></dt>
  <dd>Sets the marketing version numbers of all versioned targets to the given
      version number.
    <p class="Pp">The marketing version is the
        <code class="Li">CFBundleShortVersionString</code> Info.plist key. This
        is often a totally different version determined by product marketing
        folks.</p>
    <p class="Pp">If CVS support is enabled, the modified project file will be
        committed.</p>
    <p class="Pp">Do not use this command on a project with targets that track
        different marketing versions.</p>
  </dd>
</dl>
</section>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 11, 2012</td>
    <td class="foot-os">OS X</td>
  </tr>
</table>
</body>
</html>
