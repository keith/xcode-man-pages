<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  	$OpenBSD: stat.2,v 1.3 1997/02/13 05:20:55 millert Exp $
  
   Copyright (c) 1980, 1991, 1993, 1994
  	The Regents of the University of California.  All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   3. All advertising materials mentioning features or use of this software
      must display the following acknowledgement:
  	This product includes software developed by the University of
  	California, Berkeley and its contributors.
   4. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
       @(#)stat.2	8.3 (Berkeley) 4/19/94
   -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>STAT(2)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">STAT(2)</td>
    <td class="head-vol">System Calls Manual</td>
    <td class="head-rtitle">STAT(2)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">fstat</code>, <code class="Nm">fstat64</code>,
    <code class="Nm">lstat</code>, <code class="Nm">lstat64</code>,
    <code class="Nm">stat</code>, <code class="Nm">stat64</code>,
    <code class="Nm">fstatat</code> &#x2014; <span class="Nd">get file
    status</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
    <a class="In">&lt;sys/stat.h&gt;</a></code></p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">fstat</code>(<var class="Fa">int fildes</var>,
    <var class="Fa">struct stat *buf</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">lstat</code>(<var class="Fa">const char *restrict path</var>,
    <var class="Fa">struct stat *restrict buf</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">stat</code>(<var class="Fa">const char *restrict path</var>,
    <var class="Fa">struct stat *restrict buf</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">fstatat</code>(<var class="Fa" style="white-space: nowrap;">int
    fd</var>, <var class="Fa" style="white-space: nowrap;">const char
    *path</var>, <var class="Fa" style="white-space: nowrap;">struct stat
    *buf</var>, <var class="Fa" style="white-space: nowrap;">int
  flag</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="TRANSITIIONAL_SYNOPSIS_(NOW_DEPRECATED)"><a class="permalink" href="#TRANSITIIONAL_SYNOPSIS_(NOW_DEPRECATED)">TRANSITIIONAL
  SYNOPSIS (NOW DEPRECATED)</a></h1>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <a class="permalink" href="#fstat64"><code class="Fn" id="fstat64">fstat64</code></a>(<var class="Fa">int
    fildes</var>, <var class="Fa">struct stat64 *buf</var>);;</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <a class="permalink" href="#lstat64"><code class="Fn" id="lstat64">lstat64</code></a>(<var class="Fa">const
    char *restrict path</var>, <var class="Fa">struct stat64 *restrict
    buf</var>);;</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <a class="permalink" href="#stat64"><code class="Fn" id="stat64">stat64</code></a>(<var class="Fa">const
    char *restrict path</var>, <var class="Fa">struct stat64 *restrict
    buf</var>);;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The
    <a class="permalink" href="#stat"><code class="Fn" id="stat">stat</code></a>()
    function obtains information about the file pointed to by
    <var class="Fa">path</var>. Read, write or execute permission of the named
    file is not required, but all directories listed in the path name leading to
    the file must be searchable.</p>
<p class="Pp" id="lstat">The
    <a class="permalink" href="#lstat"><code class="Fn">lstat</code></a>()
    function is like <code class="Fn">stat</code>() except in the case where the
    named file is a symbolic link; <code class="Fn">lstat</code>() returns
    information about the link, while <code class="Fn">stat</code>() returns
    information about the file the link references. For symbolic links, the
    st_mode member contains meaningful information when used with the file type
    macros, and the st_size member contains the length of the pathname contained
    in the symbolic link. File mode bits and the contents of the remaining
    members of the stat structure are unspecified. The value returned in the
    st_size member is the length of the contents of the symbolic link, and does
    not count any trailing null.</p>
<p class="Pp" id="fstat">The
    <a class="permalink" href="#fstat"><code class="Fn">fstat</code></a>()
    obtains the same information about an open file known by the file descriptor
    <var class="Fa">fildes</var>.</p>
<p class="Pp" id="fstatat">The
    <a class="permalink" href="#fstatat"><code class="Fn">fstatat</code></a>()
    system call is equivalent to <code class="Fn">stat</code>() and
    <code class="Fn">lstat</code>() except in the case where the
    <var class="Fa">path</var> specifies a relative path. In this case the
    status is retrieved from a file relative to the directory associated with
    the file descriptor <var class="Fa">fd</var> instead of the current working
    directory.</p>
<p class="Pp">The values for the <var class="Fa">flag</var> are constructed by a
    bitwise-inclusive OR of flags from the following list, defined in
    <code class="In">&lt;<a class="In">fcntl.h</a>&gt;</code>:</p>
<dl class="Bl-tag">
  <dt id="AT_SYMLINK_NOFOLLOW"><a class="permalink" href="#AT_SYMLINK_NOFOLLOW"><code class="Dv">AT_SYMLINK_NOFOLLOW</code></a></dt>
  <dd>If <var class="Fa">path</var> names a symbolic link, the status of the
      symbolic link is returned.</dd>
</dl>
<dl class="Bl-tag">
  <dt id="AT_SYMLINK_NOFOLLOW_ANY"><a class="permalink" href="#AT_SYMLINK_NOFOLLOW_ANY"><code class="Dv">AT_SYMLINK_NOFOLLOW_ANY</code></a></dt>
  <dd>If <var class="Fa">path</var> names a symbolic link, the status of the
      symbolic link is returned. If a symbolic link is encountered during
      pathname resolution, an error is returned.</dd>
</dl>
<dl class="Bl-tag">
  <dt id="AT_RESOLVE_BENEATH"><a class="permalink" href="#AT_RESOLVE_BENEATH"><code class="Dv">AT_RESOLVE_BENEATH</code></a></dt>
  <dd>If <var class="Fa">path</var> does not reside in the hierarchy beneath the
      starting directory, an error is returned.</dd>
</dl>
<p class="Pp" id="fstatat~2">If
    <a class="permalink" href="#fstatat~2"><code class="Fn">fstatat</code></a>()
    is passed the special value <code class="Dv">AT_FDCWD</code> in the
    <var class="Fa">fd</var> parameter, the current working directory is used
    and the behavior is identical to a call to <code class="Fn">stat</code>() or
    <code class="Fn">lstat</code>() respectively, depending on whether or not
    the <code class="Dv">AT_SYMLINK_NOFOLLOW</code> bit is set in
    <var class="Fa">flag</var>.</p>
<p class="Pp">The <var class="Fa">buf</var> argument is a pointer to a
    <var class="Fa">stat</var> structure as defined by
    &#x27E8;<span class="Pa">sys/stat.h</span>&#x27E9; and into which
    information is placed concerning the file. When the macro
    <code class="Dv">_DARWIN_FEATURE_64_BIT_INODE</code> is not defined (see
    below for more information about this macro), the <var class="Fa">stat</var>
    structure is defined as:</p>
<div class="Bd Pp Li">
<pre>struct stat { /* when _DARWIN_FEATURE_64_BIT_INODE is NOT defined */
    dev_t    st_dev;    /* device inode resides on */
    ino_t    st_ino;    /* inode's number */
    mode_t   st_mode;   /* inode protection mode */
    nlink_t  st_nlink;  /* number of hard links to the file */
    uid_t    st_uid;    /* user-id of owner */
    gid_t    st_gid;    /* group-id of owner */
    dev_t    st_rdev;   /* device type, for special file inode */
    struct timespec st_atimespec;  /* time of last access */
    struct timespec st_mtimespec;  /* time of last data modification */
    struct timespec st_ctimespec;  /* time of last file status change */
    off_t    st_size;   /* file size, in bytes */
    quad_t   st_blocks; /* blocks allocated for file */
    u_long   st_blksize;/* optimal file sys I/O ops blocksize */
    u_long   st_flags;  /* user defined flags for file */
    u_long   st_gen;    /* file generation number */
};</pre>
</div>
<p class="Pp">However, when the macro
    <code class="Dv">_DARWIN_FEATURE_64_BIT_INODE</code> is defined, the
    <var class="Fa">stat</var> structure will now be defined as:</p>
<div class="Bd Pp Li">
<pre>struct stat { /* when _DARWIN_FEATURE_64_BIT_INODE is defined */
    dev_t           st_dev;           /* ID of device containing file */
    mode_t          st_mode;          /* Mode of file (see below) */
    nlink_t         st_nlink;         /* Number of hard links */
    ino_t 	    st_ino;           /* File serial number */
    uid_t           st_uid;           /* User ID of the file */
    gid_t           st_gid;           /* Group ID of the file */
    dev_t           st_rdev;          /* Device ID */
    struct timespec st_atimespec;     /* time of last access */
    struct timespec st_mtimespec;     /* time of last data modification */
    struct timespec st_ctimespec;     /* time of last status change */
    struct timespec st_birthtimespec; /* time of file creation(birth) */
    off_t           st_size;          /* file size, in bytes */
    blkcnt_t        st_blocks;        /* blocks allocated for file */
    blksize_t       st_blksize;       /* optimal blocksize for I/O */
    uint32_t        st_flags;         /* user defined flags for file */
    uint32_t        st_gen;           /* file generation number */
    int32_t         st_lspare;        /* RESERVED: DO NOT USE! */
    int64_t         st_qspare[2];     /* RESERVED: DO NOT USE! */
};</pre>
</div>
<p class="Pp">The time-related fields of <var class="Fa">struct stat</var> are
    as follows:</p>
<dl class="Bl-tag">
  <dt>st_atime</dt>
  <dd>Time when file data last accessed. Changed by the
      <a class="Xr">mknod(2)</a>, <a class="Xr">utimes(2)</a> and
      <a class="Xr">read(2)</a> system calls.</dd>
  <dt>st_mtime</dt>
  <dd>Time when file data last modified. Changed by the
      <a class="Xr">mknod(2)</a>, <a class="Xr">utimes(2)</a> and
      <a class="Xr">write(2)</a> system calls.</dd>
  <dt>st_ctime</dt>
  <dd>Time when file status was last changed (inode data modification). Changed
      by the <a class="Xr">chmod(2)</a>, <a class="Xr">chown(2)</a>,
      <a class="Xr">link(2)</a>, <a class="Xr">mknod(2)</a>,
      <a class="Xr">rename(2)</a>, <a class="Xr">unlink(2)</a>,
      <a class="Xr">utimes(2)</a> and <a class="Xr">write(2)</a> system
    calls.</dd>
  <dt>st_birthtime</dt>
  <dd>Time of file creation. Only set once when the file is created. This field
      is only available in the 64 bit inode variants. On filesystems where
      birthtime is not available, this field is set to 0 (i.e. epoch).</dd>
</dl>
<p class="Pp">The size-related fields of the structures are as follows:</p>
<dl class="Bl-tag">
  <dt>st_blksize</dt>
  <dd>The optimal I/O block size for the file.</dd>
  <dt>st_blocks</dt>
  <dd>The actual number of blocks allocated for the file in 512-byte units. As
      short symbolic links are stored in the inode, this number may be
    zero.</dd>
</dl>
<p class="Pp">The status information word <var class="Fa">st_mode</var> has the
    following bits:</p>
<div class="Bd Pp Li">
<pre>#define S_IFMT 0170000           /* type of file */
#define        S_IFIFO  0010000  /* named pipe (fifo) */
#define        S_IFCHR  0020000  /* character special */
#define        S_IFDIR  0040000  /* directory */
#define        S_IFBLK  0060000  /* block special */
#define        S_IFREG  0100000  /* regular */
#define        S_IFLNK  0120000  /* symbolic link */
#define        S_IFSOCK 0140000  /* socket */
#define        S_IFWHT  0160000  /* whiteout */
#define S_ISUID 0004000  /* set user id on execution */
#define S_ISGID 0002000  /* set group id on execution */
#define S_ISVTX 0001000  /* save swapped text even after use */
#define S_IRUSR 0000400  /* read permission, owner */
#define S_IWUSR 0000200  /* write permission, owner */
#define S_IXUSR 0000100  /* execute/search permission, owner */</pre>
</div>
<p class="Pp">For a list of access modes, see
    &#x27E8;<span class="Pa">sys/stat.h</span>&#x27E9;,
    <a class="Xr">access(2)</a> and <a class="Xr">chmod(2)</a>.</p>
<p class="Pp">For a list of the file flags in the <var class="Fa">st_flags</var>
    field, see &#x27E8;<span class="Pa">sys/stat.h</span>&#x27E9; and
    <a class="Xr">chflags(2)</a>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="_DARWIN_FEATURE_64_BIT_INODE"><a class="permalink" href="#_DARWIN_FEATURE_64_BIT_INODE">_DARWIN_FEATURE_64_BIT_INODE</a></h1>
<p class="Pp">In order to accommodate advanced capabilities of newer file
    systems, the <var class="Fa">struct stat</var>, <var class="Fa">struct
    statfs</var>, and <var class="Fa">struct dirent</var> data structures were
    updated in Mac OSX 10.5.</p>
<p class="Pp">The most obvious change is the increased size of
    <var class="Fa">ino_t</var> from 32 bits to 64 bits. As a consequence,
    storing an ino_t in an int is no longer safe, and file formats storing ino_t
    as 32-bit values may need to be updated. There are other changes as well,
    such as the widening of <var class="Fa">f_fstypename</var>,
    <var class="Fa">f_mntonname</var>, and <var class="Fa">f_mntfromname</var>
    in <var class="Fa">struct statfs</var>. Please refer to
    <a class="Xr">dir(5)</a> for more detail on the specific changes to the
    other affected data structures.</p>
<p class="Pp">On platforms that existed before these updates were available, ABI
    compatibility is achieved by providing two implementations for related
    functions: one using the legacy data structures and one using the updated
    data structures. Variants which make use of the newer structures have their
    symbols suffixed with $INODE64. These $INODE64 suffixes are automatically
    appended by the compiler tool-chain and should not be used directly.</p>
<p class="Pp">Platforms that were released after these updates only have the
    newer variants available to them. These platforms have the macro
    <code class="Dv">_DARWIN_FEATURE_ONLY_64_BIT_INODE</code> defined.</p>
<p class="Pp">The <code class="Dv">_DARWIN_FEATURE_64_BIT_INODE</code> macro
    should not be set directly. Instead, developers should make use of the
    <code class="Dv">_DARWIN_NO_64_BIT_INODE</code> or
    <code class="Dv">_DARWIN_USE_64_BIT_INODE</code> macros when the default
    variant is not desired. The following table details the effects of defining
    these macros for different deployment targets.</p>
<p class="Pp"></p>
<table class="tbl">
  <tr style="border-bottom-style: double;">
    <td colspan="4" style="text-align: center;">_DARWIN_FEATURE_ONLY_64_BIT_INODE
      <b>not defined</b></td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"></td>
    <td colspan="3" style="text-align: center;">Deployment Target</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="text-align: center; border-right-style: solid;">user
      defines:</td>
    <td style="text-align: center;">&lt; 10.5</td>
    <td style="text-align: center;">10.5</td>
    <td style="text-align: center;">&gt; 10.5</td>
  </tr>
  <tr>
    <td style="text-align: center; border-right-style: solid;"><i>(none)</i></td>
    <td style="text-align: center;">32-bit</td>
    <td style="text-align: center;">32-bit</td>
    <td style="text-align: center;">64-bit</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">_DARWIN_NO_64_BIT_INODE</td>
    <td style="text-align: center;">32-bit</td>
    <td style="text-align: center;">32-bit</td>
    <td style="text-align: center;">32-bit</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;">_DARWIN_USE_64_BIT_INODE</td>
    <td style="text-align: center;">32-bit</td>
    <td style="text-align: center;">64-bit</td>
    <td style="text-align: center;">64-bit</td>
  </tr>
  <tr>
  </tr>
  <tr style="border-bottom-style: double;">
    <td colspan="3" style="text-align: center;">_DARWIN_FEATURE_ONLY_64_BIT_INODE
      <b>defined</b></td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="text-align: center; border-right-style: solid;">user
      defines:</td>
    <td colspan="3">Any Deployment Target</td>
  </tr>
  <tr>
    <td style="text-align: center; border-right-style: solid;"><i>(none)</i></td>
    <td style="text-align: center;">64-bit-only</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">_DARWIN_NO_64_BIT_INODE</td>
    <td style="text-align: center;"><i>(error)</i></td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;">_DARWIN_USE_64_BIT_INODE</td>
    <td style="text-align: center;">64-bit-only</td>
  </tr>
</table>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>32-bit</dt>
  <dd>32-bit inode values are enabled, and the legacy structures involving the
      <var class="Vt">ino_t</var> type are in use. The macro
      <code class="Dv">_DARWIN_FEATURE_64_BIT_INODE</code> is not defined.</dd>
  <dt>64-bit</dt>
  <dd>64-bit inode values are enabled, and the expanded structures involving the
      <var class="Vt">ino_t</var> type are in use. The macro
      <code class="Dv">_DARWIN_FEATURE_64_BIT_INODE</code> is defined, and
      loader symbols will contain the <code class="Li">$INODE64</code>
    suffix.</dd>
  <dt>64-bit-only</dt>
  <dd>Like 64-bit, except loader symbols do not have the
      <code class="Li">$INODE64</code> suffix.</dd>
  <dt id="(error)"><a class="permalink" href="#(error)"><i class="Em">(error)</i></a></dt>
  <dd>A compile time error is generated.</dd>
</dl>
</div>
<p class="Pp">Due to the increased benefits of the larger structure, it is
    highly recommended that developers not define
    <code class="Dv">_DARWIN_NO_64_BIT_INODE</code> and make use of
    <code class="Dv">_DARWIN_USE_64_BIT_INODE</code> when targeting Mac OSX
    10.5.</p>
<p class="Pp">In addition to the $INODE64 suffixed symbols, variants suffixed
    with 64 are also available for related functions. These functions were
    provided as a way for developers to use the updated structures in code that
    also made use of the legacy structures. The enlarged stat structures were
    also prefixed with 64 to distinguish them from their legacy variants. These
    functions have been deprecated and should be avoided.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<p class="Pp">Upon successful completion a value of 0 is returned. Otherwise, a
    value of -1 is returned and <var class="Va">errno</var> is set to indicate
    the error.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPATIBILITY"><a class="permalink" href="#COMPATIBILITY">COMPATIBILITY</a></h1>
<p class="Pp">Previous versions of the system used different types for the
    <code class="Li">st_dev</code>, <code class="Li">st_uid</code>,
    <code class="Li">st_gid</code>, <code class="Li">st_rdev</code>,
    <code class="Li">st_size</code>, <code class="Li">st_blksize</code> and
    <code class="Li">st_blocks</code> fields.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ERRORS"><a class="permalink" href="#ERRORS">ERRORS</a></h1>
<p class="Pp">The <code class="Fn">fstat</code>() system call will fail if:</p>
<dl class="Bl-tag">
  <dt id="EBADF">[<a class="permalink" href="#EBADF"><code class="Er">EBADF</code></a>]</dt>
  <dd><var class="Fa">fildes</var> is not a valid open file descriptor.</dd>
  <dt id="EFAULT">[<a class="permalink" href="#EFAULT"><code class="Er">EFAULT</code></a>]</dt>
  <dd><var class="Fa">Sb</var> points to an invalid address.</dd>
  <dt id="EIO">[<a class="permalink" href="#EIO"><code class="Er">EIO</code></a>]</dt>
  <dd>An I/O error occurs while reading from or writing to the file system.</dd>
</dl>
<p class="Pp">The <code class="Fn">lstat</code>() and
    <code class="Fn">stat</code>() system calls will fail if:</p>
<dl class="Bl-tag">
  <dt id="EACCES">[<a class="permalink" href="#EACCES"><code class="Er">EACCES</code></a>]</dt>
  <dd>Search permission is denied for a component of the path prefix.</dd>
  <dt id="EFAULT~2">[<a class="permalink" href="#EFAULT~2"><code class="Er">EFAULT</code></a>]</dt>
  <dd><var class="Fa">Sb</var> or
      <a class="permalink" href="#name"><i class="Em" id="name">name</i></a>
      points to an invalid address.</dd>
  <dt id="EIO~2">[<a class="permalink" href="#EIO~2"><code class="Er">EIO</code></a>]</dt>
  <dd>An I/O error occurs while reading from or writing to the file system.</dd>
  <dt id="ELOOP">[<a class="permalink" href="#ELOOP"><code class="Er">ELOOP</code></a>]</dt>
  <dd>Too many symbolic links are encountered in translating the pathname. This
      is taken to be indicative of a looping symbolic link.</dd>
  <dt id="ELOOP~2">[<a class="permalink" href="#ELOOP~2"><code class="Er">ELOOP</code></a>]</dt>
  <dd>If AT_SYMLINK_NOFOLLOW_ANY is passed and symbolic link was encountered
      during pathname resolution.</dd>
  <dt id="ENAMETOOLONG">[<a class="permalink" href="#ENAMETOOLONG"><code class="Er">ENAMETOOLONG</code></a>]</dt>
  <dd>A component of a pathname exceeds <code class="Dv">{NAME_MAX}</code>
      characters, or an entire path name exceeds
      <code class="Dv">{PATH_MAX}</code> characters.</dd>
  <dt id="ENOENT">[<a class="permalink" href="#ENOENT"><code class="Er">ENOENT</code></a>]</dt>
  <dd>The named file does not exist.</dd>
  <dt id="ENOTDIR">[<a class="permalink" href="#ENOTDIR"><code class="Er">ENOTDIR</code></a>]</dt>
  <dd>A component of the path prefix is not a directory.</dd>
</dl>
<p class="Pp">The <code class="Fn">fstat</code>(),
    <code class="Fn">lstat</code>(), and <code class="Fn">stat</code>() system
    calls will fail if:</p>
<dl class="Bl-tag">
  <dt id="EOVERFLOW">[<a class="permalink" href="#EOVERFLOW"><code class="Er">EOVERFLOW</code></a>]</dt>
  <dd>The file size in bytes or the number of blocks allocated to the file or
      the file serial number cannot be represented correctly in the structure
      pointed to by <var class="Fa">buf</var>.</dd>
</dl>
<p class="Pp">In addition to the errors returned by the
    <code class="Fn">stat</code>() and <code class="Fn">lstat</code>(),
    <code class="Fn">fstatat</code>() may fail if:</p>
<dl class="Bl-tag">
  <dt id="EBADF~2">[<a class="permalink" href="#EBADF~2"><code class="Er">EBADF</code></a>]</dt>
  <dd>The <var class="Fa">path</var> argument does not specify an absolute path
      and the <var class="Fa">fd</var> argument is neither
      <code class="Dv">AT_FDCWD</code> nor a valid file descriptor open for
      searching.</dd>
  <dt id="EINVAL">[<a class="permalink" href="#EINVAL"><code class="Er">EINVAL</code></a>]</dt>
  <dd>The value of the <var class="Fa">flag</var> argument is not valid.</dd>
  <dt id="ENOTDIR~2">[<a class="permalink" href="#ENOTDIR~2"><code class="Er">ENOTDIR</code></a>]</dt>
  <dd>The <var class="Fa">path</var> argument is not an absolute path and
      <var class="Fa">fd</var> is neither <code class="Dv">AT_FDCWD</code> nor a
      file descriptor associated with a directory.</dd>
  <dt id="ENOTCAPABLE">[<a class="permalink" href="#ENOTCAPABLE"><code class="Er">ENOTCAPABLE</code></a>]</dt>
  <dd>if AT_RESOLVE_BENEATH is passed and <var class="Fa">path</var> does not
      reside in the directory hierarchy beneath the starting directory.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
<p class="Pp">The file generation number, <var class="Fa">st_gen</var>, is only
    available to the super-user.
  <br/>
  The fields in the stat structure currently marked
    <var class="Fa">st_spare1</var>, <var class="Fa">st_spare2</var>, and
    <var class="Fa">st_spare3</var> are present in preparation for inode time
    stamps expanding to 64 bits. This, however, can break certain programs that
    depend on the time stamps being contiguous (in calls to
    <a class="Xr">utimes(2)</a>).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="TRANSITIONAL_DESCRIPTION_(NOW_DEPRECATED)"><a class="permalink" href="#TRANSITIONAL_DESCRIPTION_(NOW_DEPRECATED)">TRANSITIONAL
  DESCRIPTION (NOW DEPRECATED)</a></h1>
<p class="Pp">The <var class="Fa">fstat64</var>, <var class="Fa">lstat64</var>
    and <var class="Fa">stat64</var> routines are equivalent to their
    corresponding non-64-suffixed routine, when 64-bit inodes are in effect.
    They were added before there was support for the symbol variants, and so are
    now deprecated. Instead of using these, set the
    <code class="Dv">_DARWIN_USE_64_BIT_INODE</code> macro before including
    header files to force 64-bit inode support.</p>
<p class="Pp">The <var class="Fa">stat64</var> structure used by these
    deprecated routines is the same as the <var class="Fa">stat</var> structure
    when 64-bit inodes are in effect (see above).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">chflags(2)</a>, <a class="Xr">chmod(2)</a>,
    <a class="Xr">chown(2)</a>, <a class="Xr">statfs(2)</a>,
    <a class="Xr">utimes(2)</a>, <a class="Xr">compat(5)</a>,
    <a class="Xr">symlink(7)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Applying <code class="Fn">fstat</code>() to a socket (and thus to
    a pipe) returns a zero'd buffer, except for the blocksize field, and a
    unique device and inode number.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STANDARDS"><a class="permalink" href="#STANDARDS">STANDARDS</a></h1>
<p class="Pp">The <code class="Fn">stat</code>() and
    <code class="Fn">fstat</code>() function calls are expected to conform to
    <span class="St">IEEE Std 1003.1-1988 (&#x201C;POSIX.1&#x201D;)</span>. The
    <code class="Fn">fstatat</code>() system call is expected to conform to
    POSIX.1-2008 .</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">An <code class="Fn">lstat</code>() function call appeared in
    <span class="Ux">4.2BSD</span>. The <code class="Fn">stat64</code>(),
    <code class="Fn">fstat64</code>(), and <code class="Fn">lstat64</code>()
    system calls first appeared in Mac OS X 10.5 (Leopard) and are now
    deprecated in favor of the corresponding symbol variants. The
    <code class="Fn">fstatat</code>() system call appeared in OS X 10.10</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 15, 2008</td>
    <td class="foot-os">Mac OS X 12</td>
  </tr>
</table>
</body>
</html>
