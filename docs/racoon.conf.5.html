<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  	$NetBSD: racoon.conf.5,v 1.34.4.2 2007/07/18 22:53:03 mgrooms Exp $
  
  	Id: racoon.conf.5,v 1.54 2006/08/22 18:17:17 manubsd Exp
  
   Copyright (C) 1995, 1996, 1997, and 1998 WIDE Project.
   All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   3. Neither the name of the project nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE PROJECT AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE PROJECT OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
   -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>RACOON.CONF(5)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RACOON.CONF(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">RACOON.CONF(5)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">racoon.conf</code> &#x2014;
<div class="Nd">configuration file for racoon</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">racoon.conf</code> is the configuration file for the
  <a class="Xr">racoon(8)</a> ISAKMP daemon. <a class="Xr">racoon(8)</a>
  negotiates security associations for itself (ISAKMP SA, or phase 1 SA) and for
  kernel IPsec (IPsec SA, or phase 2 SA). The file consists of a sequence of
  directives and statements. Each directive is composed by a tag and statements,
  enclosed by &#x2018;<code class="Li">{</code>&#x2019; and
  &#x2018;<code class="Li">}</code>&#x2019;. Lines beginning with
  &#x2018;<code class="Li">#</code>&#x2019; are comments.
<section class="Ss">
<h2 class="Ss" id="Meta_Syntax"><a class="permalink" href="#Meta_Syntax">Meta
  Syntax</a></h2>
Keywords and special characters that the parser expects exactly are displayed
  using <code class="Ic">this</code> font. Parameters are specified with
  <var class="Ar">this</var> font. Square brackets
  (&#x2018;<code class="Li">[</code>&#x2019; and
  &#x2018;<code class="Li">]</code>&#x2019;) are used to show optional keywords
  and parameters. Note that you have to pay attention when this manual is
  describing <var class="Ar">port</var> numbers. The <var class="Ar">port</var>
  number is always enclosed by &#x2018;<code class="Li">[</code>&#x2019; and
  &#x2018;<code class="Li">]</code>&#x2019;. In this case, the port number is
  not an optional keyword. If it is possible to omit the
  <var class="Ar">port</var> number, the expression becomes
  [[<var class="Ar">port</var>]]. The vertical bar
  (&#x2018;<code class="Li">|</code>&#x2019;) is used to indicate a choice
  between optional parameters. Parentheses
  (&#x2018;<code class="Li">(</code>&#x2019; and
  &#x2018;<code class="Li">)</code>&#x2019;) are used to group keywords and
  parameters when necessary. Major parameters are listed below.
<p class="Pp"></p>
<dl class="Bl-tag Bl-compact">
  <dt><var class="Ar">number</var></dt>
  <dd>means a hexadecimal or a decimal number. The former must be prefixed with
      &#x2018;<code class="Li"><code class="Li">0x</code></code>&#x2019;.</dd>
  <dt><var class="Ar">string</var></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt><var class="Ar">path</var></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt><var class="Ar">file</var></dt>
  <dd>means any string enclosed in
      &#x2018;<code class="Li">&quot;</code>&#x2019; (double quotes).</dd>
  <dt><var class="Ar">address</var></dt>
  <dd>means IPv6 and/or IPv4 address.</dd>
  <dt><var class="Ar">port</var></dt>
  <dd>means a TCP/UDP port number. The port number is always enclosed by
      &#x2018;<code class="Li">[</code>&#x2019; and
      &#x2018;<code class="Li">]</code>&#x2019;.</dd>
  <dt><var class="Ar">timeunit</var></dt>
  <dd>is one of following: <code class="Ic">sec</code>,
      <code class="Ic">secs</code>, <code class="Ic">second</code>,
      <code class="Ic">seconds</code>, <code class="Ic">min</code>,
      <code class="Ic">mins</code>, <code class="Ic">minute</code>,
      <code class="Ic">minutes</code>, <code class="Ic">hour</code>,
      <code class="Ic">hours</code>.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Path_Specification"><a class="permalink" href="#Path_Specification">Path
  Specification</a></h2>
This section specifies various paths used by racoon. When running in privilege
  separation mode, <code class="Ic">certificate</code> and
  <code class="Ic">script</code> paths are mandatory. A
  <a class="Xr">racoon(8)</a> restart is required if you want path changes to be
  taken into account.
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#path_include"><code class="Ic" id="path_include">path
    include</code></a> <var class="Ar">path</var>;</dt>
  <dd>Specifies a path to include a file. See
      <a class="Sx" href="#File_Inclusion">File Inclusion</a>.</dd>
  <dt><a class="permalink" href="#path_pre_shared_key"><code class="Ic" id="path_pre_shared_key">path
    pre_shared_key</code></a> <var class="Ar">file</var>;</dt>
  <dd>Specifies a file containing pre-shared key(s) for various ID(s). See
      <a class="Sx" href="#Pre_shared_key_File">Pre-shared key File</a>.</dd>
  <dt><a class="permalink" href="#path_pidfile"><code class="Ic" id="path_pidfile">path
    pidfile</code></a> <var class="Ar">file</var>;</dt>
  <dd>Specifies file where to store PID of process. If path starts with
      <span class="Pa">/</span> it is treated as an absolute path. Otherwise, it
      is treated as a relative path to the VARRUN directory specified at
      compilation time. Default is <span class="Pa">racoon.pid</span>.</dd>
  <dt><a class="permalink" href="#path_logfile"><code class="Ic" id="path_logfile">path
    logfile</code></a> <var class="Ar">file</var>;</dt>
  <dd>Specifies a file to which logs generated by <a class="Xr">racoon(8)</a>
      are stored. When the file's size exceeds 200KB,
      <a class="Xr">racoon(8)</a> will trim the logfile by dropping the oldest
      events. If path starts with <span class="Pa">/</span> it is treated as an
      absolute path. Otherwise, it is treated as a relative path to the VARRUN
      directory specified at compilation time.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="File_Inclusion"><a class="permalink" href="#File_Inclusion">File
  Inclusion</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#include"><code class="Ic" id="include">include</code></a>
    <var class="Ar">file</var></dt>
  <dd>Specifies other configuration files to be included.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Identifier_Specification"><a class="permalink" href="#Identifier_Specification">Identifier
  Specification</a></h2>
is obsolete. It must be defined at each <code class="Ic">remote</code>
  directive.
</section>
<section class="Ss">
<h2 class="Ss" id="Timer_Specification"><a class="permalink" href="#Timer_Specification">Timer
  Specification</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#timer__"><code class="Ic" id="timer__">timer
    {</code></a> <var class="Ar">statements</var> <code class="Ic">}</code></dt>
  <dd>This section specifies various timer values used by racoon.
    <p class="Pp"></p>
    <dl class="Bl-tag Bl-compact">
      <dt><a class="permalink" href="#counter"><code class="Ic" id="counter">counter</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>The maximum number of retries to send. The default is 5.</dd>
      <dt><a class="permalink" href="#interval"><code class="Ic" id="interval">interval</code></a>
        <var class="Ar">number</var> <var class="Ar">timeunit</var>;</dt>
      <dd>The interval to resend, in seconds. The default time is 10
        seconds.</dd>
      <dt><a class="permalink" href="#persend"><code class="Ic" id="persend">persend</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>The number of packets per send. The default is 1.</dd>
      <dt><a class="permalink" href="#phase1"><code class="Ic" id="phase1">phase1</code></a>
        <var class="Ar">number</var> <var class="Ar">timeunit</var>;</dt>
      <dd>The maximum time it should take to complete phase 1. The default time
          is 15 seconds.</dd>
      <dt><a class="permalink" href="#phase2"><code class="Ic" id="phase2">phase2</code></a>
        <var class="Ar">number</var> <var class="Ar">timeunit</var>;</dt>
      <dd>The maximum time it should take to complete phase 2. The default time
          is 10 seconds.</dd>
      <dt><a class="permalink" href="#natt_keepalive"><code class="Ic" id="natt_keepalive">natt_keepalive</code></a>
        <var class="Ar">number</var> <var class="Ar">timeunit</var>;</dt>
      <dd>The interval between sending NAT-Traversal keep-alive packets. The
          default time is 20 seconds. Set to 0s to disable keep-alive
        packets.</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Listening_Port_Specification"><a class="permalink" href="#Listening_Port_Specification">Listening
  Port Specification</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#listen__"><code class="Ic" id="listen__">listen
    {</code></a> <var class="Ar">statements</var> <code class="Ic">}</code></dt>
  <dd>If no <var class="Ar">listen</var> directive is specified,
      <a class="Xr">racoon(8)</a> will listen on all available interface
      addresses. The following is the list of valid statements:
    <p class="Pp"></p>
    <dl class="Bl-tag Bl-compact">
      <dt><a class="permalink" href="#isakmp"><code class="Ic" id="isakmp">isakmp</code></a>
        <var class="Ar">address</var> [[<var class="Ar">port</var>]];</dt>
      <dd>If this is specified, <a class="Xr">racoon(8)</a> will only listen on
          the defined <var class="Ar">address</var>. The default port is 500,
          which is specified by IANA. You can provide more than one address
          definition.</dd>
      <dt><a class="permalink" href="#isakmp_natt"><code class="Ic" id="isakmp_natt">isakmp_natt</code></a>
        <var class="Ar">address</var> [<var class="Ar">port</var>];</dt>
      <dd>Same as <code class="Ic">isakmp</code> but also sets the socket
          options to accept UDP-encapsulated ESP traffic for NAT-Traversal. If
          you plan to use NAT-T, you should provide at least one address with
          port 4500, which is specified by IANA. There is no default.</dd>
      <dt><a class="permalink" href="#strict_address"><code class="Ic" id="strict_address">strict_address</code></a>;</dt>
      <dd>Requires that all addresses for ISAKMP be bound. This statement will
          be ignored if you do not specify address definitions.</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Remote_Nodes_Specifications"><a class="permalink" href="#Remote_Nodes_Specifications">Remote
  Nodes Specifications</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#remote"><code class="Ic" id="remote">remote</code></a>
    (<var class="Ar">address</var> |
    <a class="permalink" href="#anonymous"><code class="Ic" id="anonymous">anonymous</code></a>)
    [[<var class="Ar">port</var>]] [<code class="Ic">inherit</code>
    <var class="Ar">parent</var>] <code class="Ic">{</code>
    <var class="Ar">statements</var> <code class="Ic">}</code></dt>
  <dd>Specifies the IKE phase 1 parameters for each remote node. The default
      port is 500. If <code class="Ic">anonymous</code> is specified, the
      statements will apply to any peer that does not match a more specific
      <code class="Ic">remote</code> directive.
    <p class="Pp">Sections with <code class="Ic">inherit</code>
        <var class="Ar">parent</var> statements (where
        <var class="Ar">parent</var> is either <var class="Ar">address</var> or
        a keyword <code class="Ic">anonymous</code>) that have all values
        predefined to those of a given <var class="Ar">parent</var>. In these
        sections it is enough to redefine only the changed parameters.</p>
    <p class="Pp">The following are valid statements.</p>
    <p class="Pp"></p>
    <dl class="Bl-tag Bl-compact">
      <dt><a class="permalink" href="#exchange_mode"><code class="Ic" id="exchange_mode">exchange_mode</code></a>
        (<code class="Ic">main</code> |
        <a class="permalink" href="#aggressive"><code class="Ic" id="aggressive">aggressive</code></a>
        |
        <a class="permalink" href="#base"><code class="Ic" id="base">base</code></a>);</dt>
      <dd>Defines the exchange mode for phase 1 when racoon is the initiator. It
          also means the acceptable exchange mode when racoon is the responder.
          More than one mode can be specified by separating them with a comma.
          All of the modes are acceptable. The first exchange mode is what
          racoon uses when it is the initiator.</dd>
      <dt><a class="permalink" href="#doi"><code class="Ic" id="doi">doi</code></a>
        <code class="Ic">ipsec_doi</code>;</dt>
      <dd>Means to use IPsec DOI as specified in RFC 2407. You can omit this
          statement.</dd>
      <dt><a class="permalink" href="#situation"><code class="Ic" id="situation">situation</code></a>
        <code class="Ic">identity_only</code>;</dt>
      <dd>Means to use SIT_IDENTITY_ONLY as specified in RFC 2407. You can omit
          this statement.</dd>
      <dt><a class="permalink" href="#identifier"><code class="Ic" id="identifier">identifier</code></a>
        <var class="Ar">idtype</var>;</dt>
      <dd>This statment is obsolete. Instead, use
          <code class="Ic">my_identifier</code>.</dd>
      <dt><a class="permalink" href="#my_identifier"><code class="Ic" id="my_identifier">my_identifier</code></a>
        [<var class="Ar">qualifier</var>] <var class="Ar">idtype ...</var>;</dt>
      <dd>Specifies the identifier sent to the remote host and the type to use
          in the phase 1 negotiation. <code class="Ic">address, fqdn</code>,
          <code class="Ic">user_fqdn</code>, <code class="Ic">keyid</code>, and
          <code class="Ic">asn1dn</code> can be used as an
          <var class="Ar">idtype</var>. The <var class="Ar">qualifier</var> is
          currently only used for <code class="Ic">keyid</code>, and can be
          either <code class="Ic">file</code> or <code class="Ic">tag</code>.
          The possible values are :
        <dl class="Bl-tag Bl-compact">
          <dt><a class="permalink" href="#my_identifier_2"><code class="Ic" id="my_identifier_2">my_identifier</code></a>
            <code class="Ic">address</code>
            [<var class="Ar">address</var>];</dt>
          <dd>The type is the IP address. This is the default type if you do not
              specify an identifier to use.</dd>
          <dt><a class="permalink" href="#my_identifier_3"><code class="Ic" id="my_identifier_3">my_identifier</code></a>
            <code class="Ic">user_fqdn</code> <var class="Ar">string</var>;</dt>
          <dd>The type is a USER_FQDN (user fully-qualified domain name).</dd>
          <dt><a class="permalink" href="#my_identifier_4"><code class="Ic" id="my_identifier_4">my_identifier</code></a>
            <code class="Ic">fqdn</code> <var class="Ar">string</var>;</dt>
          <dd>The type is a FQDN (fully-qualified domain name).</dd>
          <dt><a class="permalink" href="#my_identifier_5"><code class="Ic" id="my_identifier_5">my_identifier</code></a>
            <code class="Ic">keyid</code> [<code class="Ic">file</code>]
            <var class="Ar">file</var>;</dt>
          <dd>The type is a KEY_ID, read from the file.</dd>
          <dt><a class="permalink" href="#my_identifier_6"><code class="Ic" id="my_identifier_6">my_identifier</code></a>
            <code class="Ic">keyid</code> <code class="Ic">tag</code>
            <var class="Ar">string</var>;</dt>
          <dd>The type is a KEY_ID, specified in the quoted string.</dd>
          <dt><a class="permalink" href="#my_identifier_7"><code class="Ic" id="my_identifier_7">my_identifier</code></a>
            <code class="Ic">asn1dn</code> [<var class="Ar">string</var>];</dt>
          <dd>The type is an ASN.1 distinguished name. If
              <var class="Ar">string</var> is omitted,
              <a class="Xr">racoon(8)</a> will get the DN from the Subject field
              in the certificate.</dd>
        </dl>
      </dd>
      <dt><a class="permalink" href="#xauth_login"><code class="Ic" id="xauth_login">xauth_login</code></a>
        [<var class="Ar">string</var>];</dt>
      <dd>Specifies the login to use in client-side Hybrid authentication. It is
          available only if <a class="Xr">racoon(8)</a> has been built with this
          option. The associated password is looked up in the pre-shared key
          files, using the login <code class="Ic">string</code> as the key
        id.</dd>
      <dt><a class="permalink" href="#peers_identifier"><code class="Ic" id="peers_identifier">peers_identifier</code></a>
        <var class="Ar">idtype ...</var>;</dt>
      <dd>Specifies the peer's identifier to be received. If it is not defined
          then <a class="Xr">racoon(8)</a> will not verify the peer's identifier
          in ID payload transmitted from the peer. If it is defined, the
          behavior of the verification depends on the flag of
          <code class="Ic">verify_identifier</code>. The usage of
          <var class="Ar">idtype</var> is the same as
          <code class="Ic">my_identifier</code> except that the individual
          component values of an <code class="Ic">asn1dn</code> identifier may
          specified as <code class="Ic">*</code> to match any value (e.g.
          &quot;C=XX, O=MyOrg, OU=*, CN=Mine&quot;). Alternative acceptable peer
          identifiers may be specified by repeating the
          <code class="Ic">peers_identifier</code> statement.</dd>
      <dt><a class="permalink" href="#verify_identifier_(on"><code class="Ic" id="verify_identifier_(on">verify_identifier
        (on</code></a> |
        <a class="permalink" href="#off)"><code class="Ic" id="off)">off)</code></a>;</dt>
      <dd>If you want to verify the peer's identifier, set this to on. In this
          case, if the value defined by <code class="Ic">peers_identifier</code>
          is not the same as the peer's identifier in the ID payload, the
          negotiation will fail. The default is off.</dd>
      <dt><a class="permalink" href="#certificate_type"><code class="Ic" id="certificate_type">certificate_type</code></a>
        <var class="Ar">certspec</var>;</dt>
      <dd>Specifies a certificate specification. <var class="Ar">certspec</var>
          must be as follows:
        <dl class="Bl-tag Bl-compact">
          <dt><a class="permalink" href="#x509"><code class="Ic" id="x509">x509</code></a>
            <var class="Ar">in_keychain</var>
            <var class="Ar">keychain_identifier</var>;</dt>
          <dd><var class="Ar">in_keychain</var> means the certificate is in the
              system keychain. <var class="Ar">keychain_identifier</var> is the
              keychain ID for the certificate in base64 format.</dd>
        </dl>
      </dd>
      <dt><a class="permalink" href="#certificate_verification"><code class="Ic" id="certificate_verification">certificate_verification</code></a>
        <var class="Ar">verification_spec</var>;</dt>
      <dd>Specifies how the certificate is verified. This is required.
          <var class="Ar">verification_spec</var> must be as follows:
        <dl class="Bl-tag Bl-compact">
          <dt><a class="permalink" href="#sec_framework"><code class="Ic" id="sec_framework">sec_framework</code></a>
            <var class="Ar">use_peers_identifier</var>;</dt>
          <dd><var class="Ar">sec_framework</var> means the certificate is
              verified by the security framework.
              <var class="Ar">use_peers_identifier</var> means the certificate
              must contain the peers ID.</dd>
        </dl>
      </dd>
      <dt><a class="permalink" href="#mode_cfg_(on"><code class="Ic" id="mode_cfg_(on">mode_cfg
        (on</code></a> |
        <a class="permalink" href="#off)_2"><code class="Ic" id="off)_2">off)</code></a>;</dt>
      <dd>Gather network information through ISAKMP mode configuration. Default
          is off.</dd>
      <dt><a class="permalink" href="#weak_phase1_check_(on"><code class="Ic" id="weak_phase1_check_(on">weak_phase1_check
        (on</code></a> |
        <a class="permalink" href="#off)_3"><code class="Ic" id="off)_3">off)</code></a>;</dt>
      <dd>Tells racoon to act on unencrypted deletion messages during phase 1.
          This is a small security risk, so the default is off, meaning that
          racoon will keep on trying to establish a connection even if the user
          credentials are wrong, for instance.</dd>
      <dt><a class="permalink" href="#send_cert_(on"><code class="Ic" id="send_cert_(on">send_cert
        (on</code></a> |
        <a class="permalink" href="#off)_4"><code class="Ic" id="off)_4">off)</code></a>;</dt>
      <dd>If you do not want to send a certificate, set this to off. The default
          is on.</dd>
      <dt><a class="permalink" href="#send_cr_(on"><code class="Ic" id="send_cr_(on">send_cr
        (on</code></a> |
        <a class="permalink" href="#off)_5"><code class="Ic" id="off)_5">off)</code></a>;</dt>
      <dd>If you do not want to send a certificate request, set this to off. The
          default is on.</dd>
      <dt><a class="permalink" href="#verify_cert_(on"><code class="Ic" id="verify_cert_(on">verify_cert
        (on</code></a> |
        <a class="permalink" href="#off)_6"><code class="Ic" id="off)_6">off)</code></a>;</dt>
      <dd>By default, the identifier sent by the remote host (as specified in
          its <code class="Ic">my_identifier</code> statement) is compared with
          the credentials in the certificate used to authenticate the remote
          host as follows:
        <dl class="Bl-tag Bl-compact">
          <dt>Type <code class="Ic">asn1dn:</code></dt>
          <dd>The entire certificate subject name is compared with the
              identifier, e.g. &quot;C=XX, O=YY, ...&quot;.</dd>
          <dt>Type <code class="Ic">address, fqdn, or user_fqdn:</code></dt>
          <dd>The certificate's subjectAltName is compared with the
            identifier.</dd>
        </dl>
        If the two do not match the negotiation will fail. If you do not want to
          verify the identifier using the peer's certificate, set this to
        off.</dd>
      <dt><a class="permalink" href="#lifetime_time"><code class="Ic" id="lifetime_time">lifetime
        time</code></a> <var class="Ar">number</var>
        <var class="Ar">timeunit</var>;</dt>
      <dd>Define a lifetime of a certain time which will be proposed in the
          phase 1 negotiations. Any proposal will be accepted, and the
          attribute(s) will not be proposed to the peer if you do not specify it
          (them). They can be individually specified in each proposal.</dd>
      <dt><a class="permalink" href="#ike_frag_(on"><code class="Ic" id="ike_frag_(on">ike_frag
        (on</code></a> |
        <a class="permalink" href="#off"><code class="Ic" id="off">off</code></a>
        |
        <a class="permalink" href="#force)"><code class="Ic" id="force)">force)</code></a>;</dt>
      <dd>Enable receiver-side IKE fragmentation if <a class="Xr">racoon(8)</a>
          has been built with this feature. If set to on, racoon will advertise
          itself as being capable of receiving packets split by IKE
          fragmentation. This extension is there to work around broken firewalls
          that do not work with fragmented UDP packets. IKE fragmentation is
          always enabled on the sender-side, and it is used if the peer
          advertises itself as IKE fragmentation capable. By selecting force,
          IKE Fragmentation will be used when racoon is acting as the initiator
          even before the remote peer has advertised itself as IKE fragmentation
          capable.</dd>
      <dt><a class="permalink" href="#esp_frag"><code class="Ic" id="esp_frag">esp_frag</code></a>
        <var class="Ar">fraglen</var>;</dt>
      <dd>This option is only relevant if you use NAT traversal in tunnel mode.
          Its purpose is to work around broken DSL routers that reject UDP
          fragments, by fragmenting the IP packets before ESP encapsulation. The
          result is ESP over UDP of fragmented packets instead of fragmented ESP
          over UDP packets (i.e., IP:UDP:ESP:frag(IP) instead of
          frag(IP:UDP:ESP:IP)). <var class="Ar">fraglen</var> is the maximum
          size of the fragments. 552 should work anywhere, but the higher
          <var class="Ar">fraglen</var> is, the better the performance.
        <p class="Pp">Note that because PMTU discovery is broken on many sites,
            you will have to use MSS clamping if you want TCP to work
          correctly.</p>
      </dd>
      <dt><a class="permalink" href="#initial_contact_(on"><code class="Ic" id="initial_contact_(on">initial_contact
        (on</code></a> |
        <a class="permalink" href="#off)_7"><code class="Ic" id="off)_7">off)</code></a>;</dt>
      <dd>Enable this to send an INITIAL-CONTACT message. The default value is
          <code class="Ic">on</code>. This message is useful only when the
          responder implementation chooses an old SA when there are multiple SAs
          with different established time and the initiator reboots. If racoon
          did not send the message, the responder would use an old SA even when
          a new SA was established. For systems that use a KAME derived IPSEC
          stack, the <a class="Xr">sysctl(8)</a> variable
          net.key.preferred_oldsa can be used to control this preference. When
          the value is zero, the stack always uses a new SA.</dd>
      <dt><a class="permalink" href="#passive_(on"><code class="Ic" id="passive_(on">passive
        (on</code></a> |
        <a class="permalink" href="#off)_8"><code class="Ic" id="off)_8">off)</code></a>;</dt>
      <dd>If you do not want to initiate the negotiation, set this to on. The
          default value is <code class="Ic">off</code>. It is useful for a
          server.</dd>
      <dt><a class="permalink" href="#proposal_check"><code class="Ic" id="proposal_check">proposal_check</code></a>
        <var class="Ar">level</var>;</dt>
      <dd>Specifies the action of lifetime length, key length and PFS of the
          phase 2 selection on the responder side, and the action of lifetime
          check in phase 1. The default level is <code class="Ic">strict</code>.
          If the <var class="Ar">level</var> is:
        <dl class="Bl-tag Bl-compact">
          <dt><a class="permalink" href="#obey"><code class="Ic" id="obey">obey</code></a></dt>
          <dd>The responder will obey the initiator anytime.</dd>
          <dt><a class="permalink" href="#strict"><code class="Ic" id="strict">strict</code></a></dt>
          <dd>If the responder's lifetime length is longer than the initiator's
              or the responder's key length is shorter than the initiator's, the
              responder will use the initiator's value. Otherwise, the proposal
              will be rejected. If PFS is not required by the responder, the
              responder will obey the proposal. If PFS is required by both sides
              and the responder's group is not equal to the initiator's, then
              the responder will reject the proposal.</dd>
          <dt><a class="permalink" href="#claim"><code class="Ic" id="claim">claim</code></a></dt>
          <dd>If the responder's lifetime length is longer than the initiator's
              or the responder's key length is shorter than the initiator's, the
              responder will use the initiator's value. If the responder's
              lifetime length is shorter than the initiator's, the responder
              uses its own length AND sends a RESPONDER-LIFETIME notify message
              to an initiator in the case of lifetime (phase 2 only). For PFS,
              this directive behaves the same as
            <code class="Ic">strict</code>.</dd>
          <dt><a class="permalink" href="#exact"><code class="Ic" id="exact">exact</code></a></dt>
          <dd>If the initiator's lifetime or key length is not equal to the
              responder's, the responder will reject the proposal. If PFS is
              required by both sides and the responder's group is not equal to
              the initiator's, then the responder will reject the proposal.</dd>
        </dl>
      </dd>
      <dt><a class="permalink" href="#support_proxy_(on"><code class="Ic" id="support_proxy_(on">support_proxy
        (on</code></a> |
        <a class="permalink" href="#off)_9"><code class="Ic" id="off)_9">off)</code></a>;</dt>
      <dd>If this value is set to on, then both values of ID payloads in the
          phase 2 exchange are always used as the addresses of end-point of
          IPsec-SAs. The default is off.</dd>
      <dt><a class="permalink" href="#generate_policy_(on"><code class="Ic" id="generate_policy_(on">generate_policy
        (on</code></a> |
        <a class="permalink" href="#off_2"><code class="Ic" id="off_2">off</code></a>
        |
        <a class="permalink" href="#require"><code class="Ic" id="require">require</code></a>
        |
        <a class="permalink" href="#unique)"><code class="Ic" id="unique)">unique)</code></a>;</dt>
      <dd>This directive is for the responder. Therefore you should set
          <code class="Ic">passive</code> to on in order that
          <a class="Xr">racoon(8)</a> only becomes a responder. If the responder
          does not have any policy in SPD during phase 2 negotiation, and the
          directive is set to on, then <a class="Xr">racoon(8)</a> will choose
          the first proposal in the SA payload from the initiator, and generate
          policy entries from the proposal. It is useful to negotiate with
          clients whose IP address is allocated dynamically. Note that an
          inappropriate policy might be installed into the responder's SPD by
          the initiator, so other communications might fail if such policies are
          installed due to a policy mismatch between the initiator and the
          responder. <code class="Ic">on</code> and
          <code class="Ic">require</code> values mean the same thing (generate a
          require policy). <code class="Ic">unique</code> tells racoon to set up
          unique policies, with a monotoning increasing reqid number (between 1
          and IPSEC_MANUAL_REQID_MAX). This directive is ignored in the
          initiator case. The default value is <code class="Ic">off</code>.</dd>
      <dt><a class="permalink" href="#nat_traversal_(on"><code class="Ic" id="nat_traversal_(on">nat_traversal
        (on</code></a> |
        <a class="permalink" href="#off_3"><code class="Ic" id="off_3">off</code></a>
        |
        <a class="permalink" href="#force)_2"><code class="Ic" id="force)_2">force)</code></a>;</dt>
      <dd>This directive enables use of the NAT-Traversal IPsec extension
          (NAT-T). NAT-T allows one or both peers to reside behind a NAT gateway
          (i.e., doing address- or port-translation). If a NAT gateway is
          detected during the phase 1 handshake, racoon will attempt to
          negotiate the use of NAT-T with the remote peer. If the negotiation
          succeeds, all ESP and AH packets for the given connection will be
          encapsulated into UDP datagrams (port 4500, by default). Possible
          values are:
        <dl class="Bl-tag Bl-compact">
          <dt><a class="permalink" href="#on"><code class="Ic" id="on">on</code></a></dt>
          <dd>NAT-T is used when a NAT gateway is detected between the
            peers.</dd>
          <dt><a class="permalink" href="#off_4"><code class="Ic" id="off_4">off</code></a></dt>
          <dd>NAT-T is not proposed/accepted. This is the default.</dd>
          <dt><a class="permalink" href="#force"><code class="Ic" id="force">force</code></a></dt>
          <dd>NAT-T is used regardless of whether a NAT gateway is detected
              between the peers or not.</dd>
        </dl>
        Please note that NAT-T support is a compile-time option. Although it is
          enabled in the source distribution by default, it may not be available
          in your particular build. In that case you will get a warning when
          using any NAT-T related config options.</dd>
      <dt><a class="permalink" href="#dpd_delay"><code class="Ic" id="dpd_delay">dpd_delay</code></a>
        <var class="Ar">delay</var>;</dt>
      <dd>This option activates the DPD and sets the time (in seconds) allowed
          between 2 proof of liveliness requests. The default value is
          <code class="Ic">0</code>, which disables DPD monitoring, but still
          negotiates DPD support.</dd>
      <dt><a class="permalink" href="#dpd_retry"><code class="Ic" id="dpd_retry">dpd_retry</code></a>
        <var class="Ar">delay</var>;</dt>
      <dd>If <code class="Ic">dpd_delay</code> is set, this sets the delay (in
          seconds) to wait for a proof of liveliness before considering it as
          failed and send another request. The default value is
          <code class="Ic">5</code>.</dd>
      <dt><a class="permalink" href="#dpd_maxfail"><code class="Ic" id="dpd_maxfail">dpd_maxfail</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>If <code class="Ic">dpd_delay</code> is set, this sets the maximum
          number of liveliness proofs to request (without reply) before
          considering the peer is dead. The default value is
          <code class="Ic">5</code>.</dd>
      <dt><a class="permalink" href="#nonce_size"><code class="Ic" id="nonce_size">nonce_size</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>define the byte size of nonce value. Racoon can send any value
          although RFC2409 specifies that the value MUST be between 8 and 256
          bytes. The default size is 16 bytes.</dd>
      <dt><a class="permalink" href="#ph1id"><code class="Ic" id="ph1id">ph1id</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>An optionnal number to identify the remote proposal and to link it
          only with sainfos who have the same number. Defaults to 0.</dd>
      <dt><a class="permalink" href="#proposal__"><code class="Ic" id="proposal__">proposal
        {</code></a> <var class="Ar">sub-substatements</var>
        <code class="Ic">}</code></dt>
      <dd>
        <dl class="Bl-tag Bl-compact">
          <dt><a class="permalink" href="#encryption_algorithm"><code class="Ic" id="encryption_algorithm">encryption_algorithm</code></a>
            <var class="Ar">algorithm</var>;</dt>
          <dd>Specifies the encryption algorithm used for the phase 1
              negotiation. This directive must be defined.
              <var class="Ar">algorithm</var> is one of following:
              <code class="Ic">des, 3des, aes</code> for Oakley. For other
              transforms, this statement should not be used.</dd>
          <dt><a class="permalink" href="#hash_algorithm"><code class="Ic" id="hash_algorithm">hash_algorithm</code></a>
            <var class="Ar">algorithm</var>;</dt>
          <dd>Defines the hash algorithm used for the phase 1 negotiation. This
              directive must be defined. <var class="Ar">algorithm</var> is one
              of following: <code class="Ic">md5, sha1, sha256, sha384,
              sha512</code> for Oakley.</dd>
          <dt><a class="permalink" href="#authentication_method"><code class="Ic" id="authentication_method">authentication_method</code></a>
            <var class="Ar">type</var>;</dt>
          <dd>Defines the authentication method used for the phase 1
              negotiation. This directive must be defined.
              <var class="Ar">type</var> is one of:
              <code class="Ic">pre_shared_key,</code>
              <code class="Ic">hybrid_rsa_server</code>,
              <code class="Ic">hybrid_rsa_client</code>,
              <code class="Ic">xauth_rsa_server</code>,
              <code class="Ic">xauth_rsa_client</code>,
              <code class="Ic">xauth_psk_server</code> or
              <code class="Ic">xauth_psk_client</code>,
              <code class="Ic">eap_psk_client</code>,
              <code class="Ic">eap_rsa_client</code>.</dd>
          <dt><a class="permalink" href="#dh_group"><code class="Ic" id="dh_group">dh_group</code></a>
            <var class="Ar">group</var>;</dt>
          <dd>Defines the group used for the Diffie-Hellman exponentiations.
              This directive must be defined. <var class="Ar">group</var> is one
              of following: <code class="Ic">modp1024</code>,
              <code class="Ic">modp1536</code>,
              <code class="Ic">modp2048</code>,
              <code class="Ic">modp3072</code>,
              <code class="Ic">modp4096</code>, <code class="Ic">modp6144 or
              modp8192</code>. Or you can define 2 , 5 , 14 , 15 , 16 , 17 or 18
              as the DH group number. When you want to use aggressive mode, you
              must define the same DH group in each proposal.</dd>
          <dt><a class="permalink" href="#lifetime_time_2"><code class="Ic" id="lifetime_time_2">lifetime
            time</code></a> <var class="Ar">number</var>
            <var class="Ar">timeunit</var>;</dt>
          <dd>Defines the lifetime of the phase 1 SA proposal. Refer to the
              description of the <code class="Ic">lifetime</code> directive
              defined in the <code class="Ic">remote</code> directive.</dd>
        </dl>
      </dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Policy_Specifications"><a class="permalink" href="#Policy_Specifications">Policy
  Specifications</a></h2>
The policy directive is obsolete, policies are now in the SPD.
  <a class="Xr">racoon(8)</a> will obey the policy configured into the kernel by
  <a class="Xr">setkey(8)</a>, and will construct phase 2 proposals by combining
  <code class="Ic">sainfo</code> specifications in
  <code class="Nm">racoon.conf</code>, and policies in the kernel.
</section>
<section class="Ss">
<h2 class="Ss" id="Sainfo_Specifications"><a class="permalink" href="#Sainfo_Specifications">Sainfo
  Specifications</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#sainfo"><code class="Ic" id="sainfo">sainfo</code></a>
    (<var class="Ar">source_id destination_id</var> |
    <var class="Ar">source_id</var> <code class="Ic">anonymous</code> |
    <a class="permalink" href="#anonymous_2"><code class="Ic" id="anonymous_2">anonymous</code></a>
    <var class="Ar">destination_id</var> |
    <a class="permalink" href="#anonymous_3"><code class="Ic" id="anonymous_3">anonymous</code></a>)
    [<code class="Ic">from</code> <var class="Ar">idtype</var>
    [<var class="Ar">string</var>]] [<code class="Ic">group</code>
    <var class="Ar">string</var>] <code class="Ic">{</code>
    <var class="Ar">statements</var> <code class="Ic">}</code></dt>
  <dd>defines the parameters of the IKE phase 2 (IPsec-SA establishment).
      <var class="Ar">source_id</var> and <var class="Ar">destination_id</var>
      are constructed like:
    <p class="Pp"><code class="Ic">address</code> <var class="Ar">address</var>
        [<code class="Ic">/</code> <var class="Ar">prefix</var>]
        [[<var class="Ar">port</var>]] <var class="Ar">ul_proto</var></p>
    <p class="Pp">or</p>
    <p class="Pp"><code class="Ic">subnet</code> <var class="Ar">address</var>
        [<code class="Ic">/</code> <var class="Ar">prefix</var>]
        [[<var class="Ar">port</var>]] <var class="Ar">ul_proto</var></p>
    <p class="Pp">or</p>
    <p class="Pp"><var class="Ar">idtype</var> <var class="Ar">string</var></p>
    <p class="Pp">An id string should be expressed to match the exact value of
        an ID payload (source is the local end, destination is the remote end).
        This is not like a filter rule. For example, if you define
        3ffe:501:4819::/48 as <var class="Ar">source_id</var>.
        3ffe:501:4819:1000:/64 will not match.</p>
    <p class="Pp">In the case of a longest prefix (selecting a single host),
        <var class="Ar">address</var> instructs to send ID type of ADDRESS while
        <var class="Ar">subnet</var> instructs to send ID type of SUBNET.
        Otherwise, these instructions are identical.</p>
    <p class="Pp">The group keyword allows an XAuth group membership check to be
        performed for this sainfo section. When the mode_cfg auth source is set
        to <code class="Ic">system</code> or <code class="Ic">ldap</code>, the
        XAuth user is verified to be a member of the specified group before
        allowing a matching SA to be negotiated.</p>
    <p class="Pp"></p>
    <dl class="Bl-tag Bl-compact">
      <dt><a class="permalink" href="#pfs_group"><code class="Ic" id="pfs_group">pfs_group</code></a>
        <var class="Ar">group</var>;</dt>
      <dd>define the group of Diffie-Hellman exponentiations. If you do not
          require PFS then you can omit this directive. Any proposal will be
          accepted if you do not specify one. <var class="Ar">group</var> is one
          of following: <code class="Ic">modp1024</code>,
          <code class="Ic">modp1536</code>, <code class="Ic">modp2048</code>,
          <code class="Ic">modp3072</code>, <code class="Ic">modp4096</code>,
          <code class="Ic">modp6144 or modp8192</code>. Or you can define 2 , 5
          , 14 , 15 , 16 , 17 or 18 as the DH group number.</dd>
      <dt><a class="permalink" href="#lifetime_time_3"><code class="Ic" id="lifetime_time_3">lifetime
        time</code></a> <var class="Ar">number</var>
        <var class="Ar">timeunit</var>;</dt>
      <dd>define how long an IPsec-SA will be used, in timeunits. Any proposal
          will be accepted, and no attribute(s) will be proposed to the peer if
          you do not specify it(them). See the
          <code class="Ic">proposal_check</code> directive.</dd>
      <dt><a class="permalink" href="#remoteid"><code class="Ic" id="remoteid">remoteid</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>Sainfos will only be used if their remoteid matches the ph1id of the
          remote section used for phase 1. Defaults to 0, which is also the
          default for ph1id.</dd>
      <dt><a class="permalink" href="#my_identifier_8"><code class="Ic" id="my_identifier_8">my_identifier</code></a>
        <var class="Ar">idtype ...</var>;</dt>
      <dd>is obsolete. It does not make sense to specify an identifier in the
          phase 2.</dd>
    </dl>
    <p class="Pp"><a class="Xr">racoon(8)</a> does not have a list of security
        protocols to be negotiated. The list of security protocols are passed by
        SPD in the kernel. Therefore you have to define all of the potential
        algorithms in the phase 2 proposals even if there are algorithms which
        will not be used. These algorithms are define by using the following
        three directives, with a single comma as the separator. For algorithms
        that can take variable-length keys, algorithm names can be followed by a
        key length, like &#x201C;<code class="Li">blowfish 448</code>&#x201D;.
        <a class="Xr">racoon(8)</a> will compute the actual phase 2 proposals by
        computing the permutation of the specified algorithms, and then
        combining them with the security protocol specified by the SPD. For
        example, if <code class="Ic">des</code>, <code class="Ic">3des</code>,
        <code class="Ic">hmac_md5</code>, and <code class="Ic">hmac_sha1</code>
        are specified as algorithms, we have four combinations for use with ESP,
        and two for AH. Then, based on the SPD settings,
        <a class="Xr">racoon(8)</a> will construct the actual proposals. If the
        SPD entry asks for ESP only, there will be 4 proposals. If it asks for
        both AH and ESP, there will be 8 proposals. Note that the kernel may not
        support the algorithm you have specified.</p>
    <dl class="Bl-tag Bl-compact">
      <dt><a class="permalink" href="#encryption_algorithm_2"><code class="Ic" id="encryption_algorithm_2">encryption_algorithm</code></a>
        <var class="Ar">algorithms</var>;</dt>
      <dd><a class="permalink" href="#des"><code class="Ic" id="des">des</code></a>,
          <code class="Ic">3des</code>, <code class="Ic">des_iv64</code>,
          <code class="Ic">des_iv32</code>, <code class="Ic">null_enc
          ,rijndael</code>, <code class="Ic">aes</code> (used with ESP)</dd>
      <dt><a class="permalink" href="#authentication_algorithm"><code class="Ic" id="authentication_algorithm">authentication_algorithm</code></a>
        <var class="Ar">algorithms</var>;</dt>
      <dd><a class="permalink" href="#des_2"><code class="Ic" id="des_2">des</code></a>,
          <code class="Ic">3des</code>, <code class="Ic">des_iv64</code>,
          <code class="Ic">des_iv32</code>, <code class="Ic">hmac_md5</code>,
          <code class="Ic">hmac_sha1</code>, <code class="Ic">hmac_sha256,
          hmac_sha384, hmac_sha512, non_auth</code> (used with ESP
          authentication and AH)</dd>
      <dt><a class="permalink" href="#compression_algorithm"><code class="Ic" id="compression_algorithm">compression_algorithm</code></a>
        <var class="Ar">algorithms</var>;</dt>
      <dd><a class="permalink" href="#deflate"><code class="Ic" id="deflate">deflate</code></a>
          (used with IPComp)</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Logging_level"><a class="permalink" href="#Logging_level">Logging
  level</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#log"><code class="Ic" id="log">log</code></a>
    <var class="Ar">level</var>;</dt>
  <dd>Defines the logging level. <var class="Ar">level</var> is one of
      following: <code class="Ic">error</code>, <code class="Ic">warning</code>,
      <code class="Ic">notify</code>, <code class="Ic">info</code>,
      <code class="Ic">debug</code> and <code class="Ic">debug2</code>. The
      default is <code class="Ic">info</code>. If you set the logging level too
      high on slower machines, IKE negotiation can fail due to timing constraint
      changes.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Specifies_the_way_to_pad"><a class="permalink" href="#Specifies_the_way_to_pad">Specifies
  the way to pad</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#padding__"><code class="Ic" id="padding__">padding
    {</code></a> <var class="Ar">statements</var> <code class="Ic">}</code></dt>
  <dd>specifies the padding format. The following are valid statements:
    <dl class="Bl-tag Bl-compact">
      <dt><a class="permalink" href="#randomize_(on"><code class="Ic" id="randomize_(on">randomize
        (on</code></a> |
        <a class="permalink" href="#off)_10"><code class="Ic" id="off)_10">off)</code></a>;</dt>
      <dd>Enables the use of a randomized value for padding. The default is
        on.</dd>
      <dt><a class="permalink" href="#randomize_length_(on"><code class="Ic" id="randomize_length_(on">randomize_length
        (on</code></a> |
        <a class="permalink" href="#off)_11"><code class="Ic" id="off)_11">off)</code></a>;</dt>
      <dd>The pad length will be random. The default is off.</dd>
      <dt><a class="permalink" href="#maximum_length"><code class="Ic" id="maximum_length">maximum_length</code></a>
        <var class="Ar">number</var>;</dt>
      <dd>Defines a maximum padding length. If
          <code class="Ic">randomize_length</code> is off, this is ignored. The
          default is 20 bytes.</dd>
      <dt><a class="permalink" href="#exclusive_tail_(on"><code class="Ic" id="exclusive_tail_(on">exclusive_tail
        (on</code></a> |
        <a class="permalink" href="#off)_12"><code class="Ic" id="off)_12">off)</code></a>;</dt>
      <dd>Means to put the number of pad bytes minus one into the last part of
          the padding. The default is on.</dd>
      <dt><a class="permalink" href="#strict_check_(on"><code class="Ic" id="strict_check_(on">strict_check
        (on</code></a> |
        <a class="permalink" href="#off)_13"><code class="Ic" id="off)_13">off)</code></a>;</dt>
      <dd>Means to constrain the peer to set the number of pad bytes. The
          default is off.</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Special_directives"><a class="permalink" href="#Special_directives">Special
  directives</a></h2>
<dl class="Bl-tag Bl-compact">
  <dt><a class="permalink" href="#complex_bundle_(on"><code class="Ic" id="complex_bundle_(on">complex_bundle
    (on</code></a> |
    <a class="permalink" href="#off)_14"><code class="Ic" id="off)_14">off)</code></a>;</dt>
  <dd>defines the interpretation of proposal in the case of SA bundle. Normally
      &#x201C;IP AH ESP IP payload&#x201D; is proposed as &#x201C;AH tunnel and
      ESP tunnel&#x201D;. The interpretation is more common to other IKE
      implementations, however, it allows very limited set of combinations for
      proposals. With the option enabled, it will be proposed as &#x201C;AH
      transport and ESP tunnel&#x201D;. The default value is
      <code class="Ic">off</code>.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Pre_shared_key_File"><a class="permalink" href="#Pre_shared_key_File">Pre-shared
  key File</a></h2>
The pre-shared key file defines pairs of identifiers and corresponding shared
  secret keys which are used in the pre-shared key authentication method in
  phase 1. The pair in each line is separated by some number of blanks and/or
  tab characters like in the <a class="Xr">hosts(5)</a> file. Key can include
  blanks because everything after the first blanks is interpreted as the secret
  key. Lines starting with &#x2018;<code class="Li">#</code>&#x2019; are
  ignored. Keys which start with &#x2018;<code class="Li">0x</code>&#x2019; are
  interpreted as hexadecimal strings. Note that the file must be owned by the
  user ID running <a class="Xr">racoon(8)</a> (usually the privileged user), and
  must not be accessible by others.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
The following shows how the remote directive should be configured.
<div class="Bd Pp">
<pre>
path pre_shared_key &quot;/usr/local/v6/etc/psk.txt&quot; ;
remote anonymous
{
	exchange_mode aggressive,main,base;
	lifetime time 24 hour;
	proposal {
		encryption_algorithm 3des;
		hash_algorithm sha1;
		authentication_method pre_shared_key;
		dh_group 2;
	}
}

sainfo anonymous
{
	pfs_group 2;
	lifetime time 12 hour ;
	encryption_algorithm 3des, aes ;
	authentication_algorithm hmac_sha1, hmac_md5 ;
	compression_algorithm deflate ;
}
</pre>
</div>
<p class="Pp">The following is a sample for the pre-shared key file.</p>
<div class="Bd Pp">
<pre>
10.160.94.3     mekmitasdigoat
172.16.1.133    0x12345678
194.100.55.1    whatcertificatereally
3ffe:501:410:ffff:200:86ff:fe05:80fa    mekmitasdigoat
3ffe:501:410:ffff:210:4bff:fea2:8baa    mekmitasdigoat
foo@kame.net    mekmitasdigoat
foo.kame.net    hoge
</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr">racoon(8)</a>, <a class="Xr">racoonctl(8)</a>,
  <a class="Xr">setkey(8)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
The <code class="Nm">racoon.conf</code> configuration file first appeared in the
  &#x201C;YIPS&#x201D; Yokogawa IPsec implementation.
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
Some statements may not be handled by <a class="Xr">racoon(8)</a> yet.
<p class="Pp">Diffie-Hellman computation can take a very long time, and may
    cause unwanted timeouts, specifically when a large D-H group is used.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SECURITY_CONSIDERATIONS"><a class="permalink" href="#SECURITY_CONSIDERATIONS">SECURITY
  CONSIDERATIONS</a></h1>
The use of IKE phase 1 aggressive mode is not recommended, as described in
  <code class="Li">http://www.kb.cert.org/vuls/id/886601</code>.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">September 19, 2006</td>
    <td class="foot-os">Mac OS X 10.15</td>
  </tr>
</table>
</body>
</html>
