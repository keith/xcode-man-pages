<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>Encode::Guess(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Encode::Guess(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">Encode::Guess(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Encode::Guess -- Guesses encoding from data</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  # if you are sure $data won't contain anything bogus
  use Encode;
  use Encode::Guess qw/euc-jp shiftjis 7bit-jis/;
  my $utf8 = decode(&quot;Guess&quot;, $data);
  my $data = encode(&quot;Guess&quot;, $utf8);   # this doesn't work!
  # more elaborate way
  use Encode::Guess;
  my $enc = guess_encoding($data, qw/euc-jp shiftjis 7bit-jis/);
  ref($enc) or die &quot;Can't guess: $enc&quot;; # trap error this way
  $utf8 = $enc-&gt;decode($data);
  # or
  $utf8 = decode($enc-&gt;name, $data)
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ABSTRACT"><a class="permalink" href="#ABSTRACT">ABSTRACT</a></h1>
<p class="Pp">Encode::Guess enables you to guess in what encoding a given data
    is encoded, or at least tries to.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">By default, it checks only ascii, utf8 and UTF-16/32 with BOM.</p>
<p class="Pp"></p>
<pre>  use Encode::Guess; # ascii/utf8/BOMed UTF
</pre>
<p class="Pp">To use it more practically, you have to give the names of
    encodings to check (<i>suspects</i> as follows). The name of suspects can
    either be canonical names or aliases.</p>
<p class="Pp">CAVEAT: Unlike UTF-(16|32), BOM in utf8 is NOT AUTOMATICALLY
    STRIPPED.</p>
<p class="Pp"></p>
<pre> # tries all major Japanese Encodings as well
  use Encode::Guess qw/euc-jp shiftjis 7bit-jis/;
</pre>
<p class="Pp">If the <span class="Li">$Encode::Guess::NoUTFAutoGuess</span>
    variable is set to a true value, no heuristics will be applied to
    UTF8/16/32, and the result will be limited to the suspects and
    <span class="Li">&quot;ascii&quot;</span>.</p>
<dl class="Bl-tag">
  <dt id="Encode::Guess"><a class="permalink" href="#Encode::Guess">Encode::Guess-&gt;set_suspects</a></dt>
  <dd>You can also change the internal suspects list via
      <span class="Li">&quot;set_suspects&quot;</span> method.
    <p class="Pp"></p>
    <pre>  use Encode::Guess;
  Encode::Guess-&gt;set_suspects(qw/euc-jp shiftjis 7bit-jis/);
    </pre>
  </dd>
  <dt id="Encode::Guess~2"><a class="permalink" href="#Encode::Guess~2">Encode::Guess-&gt;add_suspects</a></dt>
  <dd>Or you can use <span class="Li">&quot;add_suspects&quot;</span> method.
      The difference is that <span class="Li">&quot;set_suspects&quot;</span>
      flushes the current suspects list while
      <span class="Li">&quot;add_suspects&quot;</span> adds.
    <p class="Pp"></p>
    <pre>  use Encode::Guess;
  Encode::Guess-&gt;add_suspects(qw/euc-jp shiftjis 7bit-jis/);
  # now the suspects are euc-jp,shiftjis,7bit-jis, AND
  # euc-kr,euc-cn, and big5-eten
  Encode::Guess-&gt;add_suspects(qw/euc-kr euc-cn big5-eten/);
    </pre>
  </dd>
  <dt id="Encode::decode(_Guess_"><a class="permalink" href="#Encode::decode(_Guess_">Encode::decode(&quot;Guess&quot;
    ...)</a></dt>
  <dd>When you are content with suspects list, you can now
    <p class="Pp"></p>
    <pre>  my $utf8 = Encode::decode(&quot;Guess&quot;, $data);
    </pre>
  </dd>
  <dt id="Encode::Guess~3"><a class="permalink" href="#Encode::Guess~3">Encode::Guess-&gt;guess($data)</a></dt>
  <dd>But it will croak if:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>Two or more suspects remain</li>
  <li>No suspects left</li>
</ul>
</div>
<div class="Bd-indent">
<p class="Pp">So you should instead try this;</p>
<p class="Pp"></p>
<pre>  my $decoder = Encode::Guess-&gt;guess($data);
</pre>
<p class="Pp">On success, <span class="Li">$decoder</span> is an object that is
    documented in Encode::Encoding. So you can now do this;</p>
<p class="Pp"></p>
<pre>  my $utf8 = $decoder-&gt;decode($data);
</pre>
<p class="Pp">On failure, <span class="Li">$decoder</span> now contains an error
    message so the whole thing would be as follows;</p>
<p class="Pp"></p>
<pre>  my $decoder = Encode::Guess-&gt;guess($data);
  die $decoder unless ref($decoder);
  my $utf8 = $decoder-&gt;decode($data);
</pre>
</div>
<dl class="Bl-tag">
  <dt id="guess_encoding($data,"><a class="permalink" href="#guess_encoding($data,">guess_encoding($data,
    [, <i>list of suspects</i>])</a></dt>
  <dd>You can also try <span class="Li">&quot;guess_encoding&quot;</span>
      function which is exported by default. It takes
      <span class="Li">$data</span> to check and it also takes the list of
      suspects by option. The optional suspect list is <i>not reflected</i> to
      the internal suspects list.
    <p class="Pp"></p>
    <pre>  my $decoder = guess_encoding($data, qw/euc-jp euc-kr euc-cn/);
  die $decoder unless ref($decoder);
  my $utf8 = $decoder-&gt;decode($data);
  # check only ascii, utf8 and UTF-(16|32) with BOM
  my $decoder = guess_encoding($data);
    </pre>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
<ul class="Bl-bullet">
  <li>Because of the algorithm used, ISO-8859 series and other single-byte
      encodings do not work well unless either one of ISO-8859 is the only one
      suspect (besides ascii and utf8).
    <p class="Pp"></p>
    <pre>  use Encode::Guess;
  # perhaps ok
  my $decoder = guess_encoding($data, 'latin1');
  # definitely NOT ok
  my $decoder = guess_encoding($data, qw/latin1 greek/);
    </pre>
    <p class="Pp">The reason is that Encode::Guess guesses encoding by trial and
        error. It first splits <span class="Li">$data</span> into lines and
        tries to decode the line for each suspect. It keeps it going until all
        but one encoding is eliminated out of suspects list. ISO-8859 series is
        just too successful for most cases (because it fills almost all code
        points in \x00-\xff).</p>
  </li>
  <li>Do not mix national standard encodings and the corresponding vendor
      encodings.
    <p class="Pp"></p>
    <pre>  # a very bad idea
  my $decoder
     = guess_encoding($data, qw/shiftjis MacJapanese cp932/);
    </pre>
    <p class="Pp">The reason is that vendor encoding is usually a superset of
        national standard so it becomes too ambiguous for most cases.</p>
  </li>
  <li>On the other hand, mixing various national standard encodings
      automagically works unless <span class="Li">$data</span> is too short to
      allow for guessing.
    <p class="Pp"></p>
    <pre> # This is ok if $data is long enough
 my $decoder =  
  guess_encoding($data, qw/euc-cn
                           euc-jp shiftjis 7bit-jis
                           euc-kr
                           big5-eten/);
    </pre>
  </li>
  <li>DO NOT PUT TOO MANY SUSPECTS! Don't you try something like this!
    <p class="Pp"></p>
    <pre>  my $decoder = guess_encoding($data, 
                               Encode-&gt;encodings(&quot;:all&quot;));
    </pre>
  </li>
</ul>
<p class="Pp">It is, after all, just a guess. You should alway be explicit when
    it comes to encodings. But there are some, especially Japanese, environment
    that guess-coding is a must. Use this module with care.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="TO_DO"><a class="permalink" href="#TO_DO">TO DO</a></h1>
<p class="Pp">Encode::Guess does not work on EBCDIC platforms.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Encode, Encode::Encoding</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
