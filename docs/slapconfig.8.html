<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  Modified from man(1) of FreeBSD, the NetBSD mdoc.template, and mdoc.samples.
  See Also:
  man mdoc.samples for a complete listing of options
  man mdoc for the short list of editing options
  /usr/share/misc/mdoc.template
   DATE
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>slapconfig(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">slapconfig(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">slapconfig(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">slapconfig</code> -- tool to configure slapd and
    related daemons</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">slapconfig</code></td>
    <td>command [command-options] [<code class="Fl">-q</code>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">slapconfig</code> is a utility for configuring
    slapd. It must be run by root.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USAGE"><a class="permalink" href="#USAGE">USAGE</a></h1>
<dl class="Bl-tag">
  <dt id="q"><a class="permalink" href="#q"><code class="Fl">-q</code></a></dt>
  <dd>suppress prompts.</dd>
</dl>
<section class="Ss">
<h2 class="Ss" id="Queries"><a class="permalink" href="#Queries">Queries</a></h2>
<dl class="Bl-tag">
  <dt id="defaultsuffix"><a class="permalink" href="#defaultsuffix"><code class="Fl">-defaultsuffix</code></a></dt>
  <dd>Returns the default suffix which is based on the machine's DNS name, or
      hostname if DNS is not available.</dd>
  <dt id="getclientconfig"><a class="permalink" href="#getclientconfig"><code class="Fl">-getclientconfig</code></a></dt>
  <dd>Returns whether this machine is an LDAP client, not a client, or
    advanced.</dd>
  <dt id="getldapconfig"><a class="permalink" href="#getldapconfig"><code class="Fl">-getldapconfig</code></a></dt>
  <dd>Returns the LDAP server settings.</dd>
  <dt id="getmacosxodpolicy"><a class="permalink" href="#getmacosxodpolicy"><code class="Fl">-getmacosxodpolicy</code></a></dt>
  <dd>Returns a property list containing the directory binding settings.</dd>
  <dt id="getmasterconfig"><a class="permalink" href="#getmasterconfig"><code class="Fl">-getmasterconfig</code></a></dt>
  <dd>Returns the list of replicas and replication interval.</dd>
  <dt id="getpasswordserveraddress"><a class="permalink" href="#getpasswordserveraddress"><code class="Fl">-getpasswordserveraddress</code></a></dt>
  <dd>Returns the IP address of the default password server.</dd>
  <dt id="getreplicaconfig"><a class="permalink" href="#getreplicaconfig"><code class="Fl">-getreplicaconfig</code></a></dt>
  <dd>Returns the master address and last update date.</dd>
  <dt id="getstyle"><a class="permalink" href="#getstyle"><code class="Fl">-getstyle</code></a></dt>
  <dd>Returns whether configuration is master, replica, client, or
    standalone.</dd>
  <dt id="help"><a class="permalink" href="#help"><code class="Fl">-help</code></a></dt>
  <dd>Print usage information.</dd>
  <dt id="ver"><a class="permalink" href="#ver"><code class="Fl">-ver</code></a></dt>
  <dd>Displays version information.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Setup"><a class="permalink" href="#Setup">Setup</a></h2>
<dl class="Bl-ohang">
  <dt id="addreplica"><a class="permalink" href="#addreplica"><code class="Fl">-addreplica</code></a>
    [--serverID num] [--guid D1C9C376-D940-404D-9941-7AD24E6A37DA]
    &#x27E8;replica-address&#x27E9;</dt>
  <dd>Adds a replication link with the specified server. The serverID and GUID
      of the remote machine you'd like to replicate with. The serverID and GUID
      can be viewed in the target machine's computer record. Replication links
      are unidirectional, the corresponding command should be run on the target
      server as well to get full replication working. Caution should be
      exercised with this command, it is best to avoid replication loops.</dd>
  <dt id="changeip"><a class="permalink" href="#changeip"><code class="Fl">-changeip</code></a>
    &#x27E8;old-ip&#x27E9; &#x27E8;new-ip&#x27E9; [&#x27E8;old-host&#x27E9;
    &#x27E8;new-host&#x27E9;]</dt>
  <dd>Updates configuration records and files to contain the new host
      information. It does not change the IP address in Network
    preferences.</dd>
  <dt id="createldapmasterandadmin"><a class="permalink" href="#createldapmasterandadmin"><code class="Fl">-createldapmasterandadmin</code></a>
    [--allow_local_realm] [--certAuthName &#x27E8;Cert Auth Name&#x27E9;]
    [--certAdminEmail &#x27E8;Cert Admin Email&#x27E9;] [--certOrgName
    &#x27E8;Cert Org Name&#x27E9;] &#x27E8;new-admin&#x27E9;
    &#x27E8;new-fullname&#x27E9; &#x27E8;new-uid&#x27E9; [&#x27E8;search base
    suffix&#x27E9; [&#x27E8;realm&#x27E9;]]</dt>
  <dd>Creates a new master LDAP server. Copies the root account to the new
      master domain. Creates a new directory node administrator.</dd>
  <dt id="createreplica"><a class="permalink" href="#createreplica"><code class="Fl">-createreplica</code></a>
    [--certAdminEmail &#x27E8;Cert Admin Email&#x27E9;] &#x27E8;master IP or
    name&#x27E9; &#x27E8;admin user&#x27E9;</dt>
  <dd>Create a new replica from an existing LDAP master.</dd>
  <dt id="createrootcertauthority"><a class="permalink" href="#createrootcertauthority"><code class="Fl">-createrootcertauthority</code></a>
    &#x27E8;Certificate Authority Name&#x27E9; &#x27E8;Certificate Authority
    Admin Email&#x27E9; &#x27E8;Certificate Authority Organization
    Name&#x27E9;</dt>
  <dd>Create a CA on the OD master.</dd>
  <dt id="destroyldapserver"><a class="permalink" href="#destroyldapserver"><code class="Fl">-destroyldapserver</code></a>
    [diradmin]</dt>
  <dd>Turns off the LDAP server and deletes its database. The optional argument
      of the diradmin account name will then prompt for the diradmin password
      and will inform all replication peers of the server's destruction.</dd>
  <dt id="promotereplica"><a class="permalink" href="#promotereplica"><code class="Fl">-promotereplica</code></a>
    &#x27E8;admin-user&#x27E9; &#x27E8;archive-path&#x27E9;</dt>
  <dd>Converts an existing replica into a master using the current database.
      Path to an archive from the master can given in order to add the root CA's
      keys to the promoted master.</dd>
  <dt id="removereplica"><a class="permalink" href="#removereplica"><code class="Fl">-removereplica</code></a>
    [--guid D1C9C376-D940-404D-9941-7AD24E6A37DA]
    <code class="Fl">-</code>&#x27E8;replica-address&#x27E9;</dt>
  <dd>Removes a replication link with the specified server. The GUID of the
      remote server being removed should be passed in with the --guid option.
      Replication links are unidirectional, so the corresponding command should
      be run on the target server to remove the other half of an existing
      replication link.</dd>
  <dt id="setclient"><a class="permalink" href="#setclient"><code class="Fl">-setclient</code></a></dt>
  <dd>Configures the machine to bind using DHCP if it is not already a
    client.</dd>
  <dt id="setldapconfig"><a class="permalink" href="#setldapconfig"><code class="Fl">-setldapconfig</code></a>
    [<code class="Fl">-maxresults</code> &#x27E8;<var class="Ar">maximum search
    results</var>&#x27E9;] [<code class="Fl">-searchtimeout</code>
    <var class="Ar">timeout</var>] [<code class="Fl">-ssl</code>
    <var class="Ar">on|off</var>] [<code class="Fl">-sslidentity</code>
    &#x27E8;<var class="Ar">identity name</var>&#x27E9;]
    [<code class="Fl">-sslserialnumber</code>
    &#x27E8;<var class="Ar">certificate serial number</var>&#x27E9;]
    [<code class="Fl">-sslsha1fingerprint</code>
    &#x27E8;<var class="Ar">certificate sha1 fingerprint as a hex encoded colon
    separated string</var>&#x27E9;]</dt>
  <dd>Applies the specified settings and restarts slapd. Settings not specified
      are unchanged.</dd>
  <dt id="setstandalone"><a class="permalink" href="#setstandalone"><code class="Fl">-setstandalone</code></a></dt>
  <dd>Configures the machine to only use the local directory.</dd>
  <dt id="setmacosxodpolicy"><a class="permalink" href="#setmacosxodpolicy"><code class="Fl">-setmacosxodpolicy</code></a>
    [<code class="Fl">-binding</code> [disabled|enabled|required] []
    <code class="Fl">-cleartext</code> [blocked|allowed] []
    <code class="Fl">-encrypt</code> [yes|no] [] <code class="Fl">-sign</code>
    [yes|no] [] <code class="Fl">-clientcaching</code> [yes|no] []
    <code class="Fl">-man-in-middle</code> [blocked|allowed]]</dt>
  <dd>Sets directory binding options.</dd>
</dl>
<dl class="Bl-tag">
  <dt id="startldapserver"><a class="permalink" href="#startldapserver"><code class="Fl">-startldapserver</code></a></dt>
  <dd>Configures launchd to run slapd.</dd>
  <dt id="stopldapserver"><a class="permalink" href="#stopldapserver"><code class="Fl">-stopldapserver</code></a></dt>
  <dd>Configures launchd not to run slapd.</dd>
  <dt id="updateaddresses"><a class="permalink" href="#updateaddresses"><code class="Fl">-updateaddresses</code></a></dt>
  <dd>Merges new interfaces into the list of LDAP replicas.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Password_Server"><a class="permalink" href="#Password_Server">Password
  Server</a></h2>
<dl class="Bl-tag">
  <dt id="startpasswordserver"><a class="permalink" href="#startpasswordserver"><code class="Fl">-startpasswordserver</code></a></dt>
  <dd>Sets up a launchd plist file and starts the password server.</dd>
  <dt id="stoppasswordserver"><a class="permalink" href="#stoppasswordserver"><code class="Fl">-stoppasswordserver</code></a></dt>
  <dd>Sets the launchd plist file to be disabled and stops the password
    server.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Runtime"><a class="permalink" href="#Runtime">Runtime</a></h2>
<dl class="Bl-tag">
  <dt id="enableslapdlog"><a class="permalink" href="#enableslapdlog"><code class="Fl">-enableslapdlog</code></a></dt>
  <dd>Turns on the LDAP server logging to /var/log/slapd.log.</dd>
  <dt id="setfullsyncmode"><a class="permalink" href="#setfullsyncmode"><code class="Fl">-setfullsyncmode</code></a>
    [<var class="Ar">yes</var> | <var class="Ar">no</var>]</dt>
  <dd>The LDAP server defaults to running in a &quot;full sync mode&quot; to
      ensure database transactions are fully flushed to disk. This improves data
      integrity in the event of a power loss, but can result in slower
      performance when importing large datasets. Setting this option to
      <var class="Ar">no</var> disables this functionality temporarily in order
      to speed up large imports. After the import has been completed, this
      option should be set back to <var class="Ar">yes</var> for normal
      operation.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Backup_and_Restore"><a class="permalink" href="#Backup_and_Restore">Backup
  and Restore</a></h2>
<dl class="Bl-ohang">
  <dt id="backupdb"><a class="permalink" href="#backupdb"><code class="Fl">-backupdb</code></a>
    &#x27E8;<var class="Ar">archive-path</var>&#x27E9;</dt>
  <dd>Creates an archive containing the LDAP, Password Server and Kerberos
      databases. It also contains Certificate Authority related data.</dd>
  <dt id="restoredb"><a class="permalink" href="#restoredb"><code class="Fl">-restoredb</code></a>
    &#x27E8;<var class="Ar">archive-path</var>&#x27E9;</dt>
  <dd>Restores a directory to the backed-up state.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<p class="Pp">The environment variable SSOUtilDebugLevel can be set to change
    the verbosity of the log. Valid values are [0-9]. The default value is
  1.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">/usr/sbin/slapconfig</span></dt>
  <dd style="width: auto;">&#x00A0;</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">DirectoryService(1)</a>,
  <a class="Xr">slapd(8)</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">Thu Feb 20 2003</td>
    <td class="foot-os">MacOSX</td>
  </tr>
</table>
</body>
</html>
