<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Brigade(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Brigade(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">install::TempContent::Objects::mod_perl-2.0.9::docs::api::APR::Brigade(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">APR::Brigade - Perl API for manipulating APR Bucket Brigades</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Synopsis"><a class="permalink" href="#Synopsis">Synopsis</a></h1>
<pre>  use APR::Brigade ();
  
  $bb = APR::Brigade-&gt;new($r-&gt;pool, $c-&gt;bucket_alloc);
  $ba = $bb-&gt;bucket_alloc();
  $pool = $bb-&gt;pool;
  
  $bb-&gt;insert_head($b);
  $bb-&gt;insert_tail($b);
  
  $b_first = $bb-&gt;first;
  $b_last  = $bb-&gt;last;
  
  $b_prev = $bb-&gt;prev($b_last);
  $b_next = $bb-&gt;next($b);
  
  $bb2 = APR::Brigade-&gt;new($r-&gt;pool, $c-&gt;bucket_alloc);
  $bb1-&gt;concat($bb2);
  
  $len = $bb-&gt;flatten($data);
  $len = $bb2-&gt;flatten($data, $wanted);
  
  $len = $bb-&gt;length;
  $bb3 = $bb-&gt;split($b_last);
  
  last if $bb-&gt;is_empty();
  $bb-&gt;cleanup();
  $bb-&gt;destroy();
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="Description"><a class="permalink" href="#Description">Description</a></h1>
<p class="Pp"><span class="Li">&quot;APR::Brigade&quot;</span> allows you to
    create, manipulate and delete APR bucket brigades.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<p class="Pp"><span class="Li">&quot;APR::Brigade&quot;</span> provides the
    following functions and/or methods:</p>
<section class="Ss">
<h2 class="Ss" id="_cleanup_"><a class="permalink" href="#_cleanup_">&quot;cleanup&quot;</a></h2>
<p class="Pp">Empty out an entire bucket brigade:</p>
<p class="Pp"></p>
<pre>  $bb-&gt;cleanup;
</pre>
<dl class="Bl-tag">
  <dt id="obj:"><a class="permalink" href="#obj:">obj: $bb ( &quot;APR::Brigade
    object&quot; )</a></dt>
  <dd>The brigade to cleanup</dd>
  <dt id="ret:"><a class="permalink" href="#ret:">ret: no return value</a></dt>
  <dd></dd>
  <dt id="since:"><a class="permalink" href="#since:">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This method destroys all of the buckets within the bucket
    brigade's bucket list. This is similar to
    <span class="Li">&quot;destroy()&quot;</span>, except that it does not
    deregister the brigade's <span class="Li">&quot;pool()&quot;</span> cleanup
    function.</p>
<p class="Pp">Generally, you should use
    <span class="Li">&quot;destroy()&quot;</span>. This function can be useful
    in situations where you have a single brigade that you wish to reuse many
    times by destroying all of the buckets in the brigade and putting new
    buckets into it later.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_concat_"><a class="permalink" href="#_concat_">&quot;concat&quot;</a></h2>
<p class="Pp">Concatenate brigade <span class="Li">$bb2</span> onto the end of
    brigade <span class="Li">$bb1</span>, leaving brigade
    <span class="Li">$bb2</span> empty:</p>
<p class="Pp"></p>
<pre>  $bb1-&gt;concat($bb2);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~2"><a class="permalink" href="#obj:~2">obj: $bb1 (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>The brigade to concatenate to.</dd>
  <dt id="arg1:"><a class="permalink" href="#arg1:">arg1: $bb2 (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>The brigade to concatenate and empty afterwards.</dd>
  <dt id="ret:~2"><a class="permalink" href="#ret:~2">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~2"><a class="permalink" href="#since:~2">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_destroy_"><a class="permalink" href="#_destroy_">&quot;destroy&quot;</a></h2>
<p class="Pp">destroy an entire bucket brigade, includes all of the buckets
    within the bucket brigade's bucket list.</p>
<p class="Pp"></p>
<pre>  $bb-&gt;destroy();
</pre>
<dl class="Bl-tag">
  <dt id="obj:~3"><a class="permalink" href="#obj:~3">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>The bucket brigade to destroy.</dd>
  <dt id="ret:~3"><a class="permalink" href="#ret:~3">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="excpt:"><a class="permalink" href="#excpt:">excpt:
    &quot;APR::Error&quot;</a></dt>
  <dd></dd>
  <dt id="since:~3"><a class="permalink" href="#since:~3">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_is_empty_"><a class="permalink" href="#_is_empty_">&quot;is_empty&quot;</a></h2>
<p class="Pp">Test whether the bucket brigade is empty</p>
<p class="Pp"></p>
<pre>  $ret = $bb-&gt;is_empty();
</pre>
<dl class="Bl-tag">
  <dt id="obj:~4"><a class="permalink" href="#obj:~4">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~4"><a class="permalink" href="#ret:~4">ret: $ret ( boolean
    )</a></dt>
  <dd></dd>
  <dt id="since:~4"><a class="permalink" href="#since:~4">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_first_"><a class="permalink" href="#_first_">&quot;first&quot;</a></h2>
<p class="Pp">Return the first bucket in a brigade</p>
<p class="Pp"></p>
<pre>  $b_first = $bb-&gt;first;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~5"><a class="permalink" href="#obj:~5">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~5"><a class="permalink" href="#ret:~5">ret: $b_first (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The first bucket in the bucket brigade <span class="Li">$bb</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        are no buckets in <span class="Li">$bb</span>.</p>
  </dd>
  <dt id="since:~5"><a class="permalink" href="#since:~5">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_flatten_"><a class="permalink" href="#_flatten_">&quot;flatten&quot;</a></h2>
<p class="Pp">Get the data from buckets in the bucket brigade as one string</p>
<p class="Pp"></p>
<pre>  $len = $bb-&gt;flatten($buffer);
  $len = $bb-&gt;flatten($buffer, $wanted);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~6"><a class="permalink" href="#obj:~6">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~2"><a class="permalink" href="#arg1:~2">arg1: $buffer ( SCALAR
    )</a></dt>
  <dd>The buffer to fill. All previous data will be lost.</dd>
  <dt id="opt"><a class="permalink" href="#opt">opt arg2: $wanted ( number
    )</a></dt>
  <dd>If no argument is passed then all data will be returned. If
      <span class="Li">$wanted</span> is specified -- that number or less bytes
      will be returned.</dd>
  <dt id="ret:~6"><a class="permalink" href="#ret:~6">ret: $len ( number
    )</a></dt>
  <dd>How many bytes were actually read.
    <p class="Pp"><span class="Li">$buffer</span> gets populated with the string
        that is read. It will contain an empty string if there was nothing to
        read.</p>
  </dd>
  <dt id="since:~6"><a class="permalink" href="#since:~6">since: 2.0.00</a></dt>
  <dd></dd>
  <dt id="excpt:~2"><a class="permalink" href="#excpt:~2">excpt:
    &quot;APR::Error&quot;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_insert_head_"><a class="permalink" href="#_insert_head_">&quot;insert_head&quot;</a></h2>
<p class="Pp">Insert a list of buckets at the front of a brigade</p>
<p class="Pp"></p>
<pre>  $bb-&gt;insert_head($b);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~7"><a class="permalink" href="#obj:~7">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>Brigade to insert into</dd>
  <dt id="arg1:~3"><a class="permalink" href="#arg1:~3">arg1: $b (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>the bucket to insert. More buckets could be attached to that bucket.</dd>
  <dt id="ret:~7"><a class="permalink" href="#ret:~7">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~7"><a class="permalink" href="#since:~7">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_insert_tail_"><a class="permalink" href="#_insert_tail_">&quot;insert_tail&quot;</a></h2>
<p class="Pp">Insert a list of buckets at the end of a brigade</p>
<p class="Pp"></p>
<pre>  $bb-&gt;insert_tail($b);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~8"><a class="permalink" href="#obj:~8">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>Brigade to insert into</dd>
  <dt id="arg1:~4"><a class="permalink" href="#arg1:~4">arg1: $b (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>the bucket to insert. More buckets could be attached to that bucket.</dd>
  <dt id="ret:~8"><a class="permalink" href="#ret:~8">ret: no return
    value</a></dt>
  <dd></dd>
  <dt id="since:~8"><a class="permalink" href="#since:~8">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_last_"><a class="permalink" href="#_last_">&quot;last&quot;</a></h2>
<p class="Pp">Return the last bucket in the brigade</p>
<p class="Pp"></p>
<pre>  $b_last = $bb-&gt;last;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~9"><a class="permalink" href="#obj:~9">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~9"><a class="permalink" href="#ret:~9">ret: $b_last (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The last bucket in the bucket brigade <span class="Li">$bb</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        are no buckets in <span class="Li">$bb</span>.</p>
  </dd>
  <dt id="since:~9"><a class="permalink" href="#since:~9">since: 2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_length_"><a class="permalink" href="#_length_">&quot;length&quot;</a></h2>
<p class="Pp">Return the total length of the data in the brigade (not the number
    of buckets)</p>
<p class="Pp"></p>
<pre>  $len = $bb-&gt;length;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~10"><a class="permalink" href="#obj:~10">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~10"><a class="permalink" href="#ret:~10">ret: $len ( number
    )</a></dt>
  <dd></dd>
  <dt id="since:~10"><a class="permalink" href="#since:~10">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_new_"><a class="permalink" href="#_new_">&quot;new&quot;</a></h2>
<pre>  my $nbb = APR::Brigade-&gt;new($p, $bucket_alloc);
  my $nbb =          $bb-&gt;new($p, $bucket_alloc);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~11"><a class="permalink" href="#obj:~11">obj: $bb (
    &quot;APR::Brigade object or class&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~5"><a class="permalink" href="#arg1:~5">arg1: $p (
    &quot;APR::Pool object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg2:"><a class="permalink" href="#arg2:">arg2: $bucket_alloc (
    &quot;APR::BucketAlloc object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~11"><a class="permalink" href="#ret:~11">ret: $nbb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>a newly created bucket brigade object</dd>
  <dt id="since:~11"><a class="permalink" href="#since:~11">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">Example:</p>
<p class="Pp">Create a new bucket brigade, using the request object's pool:</p>
<p class="Pp"></p>
<pre>  use Apache2::Connection ();
  use Apache2::RequestRec ();
  use APR::Brigade ();
  my $bb = APR::Brigade-&gt;new($r-&gt;pool, $r-&gt;connection-&gt;bucket_alloc);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_bucket_alloc_"><a class="permalink" href="#_bucket_alloc_">&quot;bucket_alloc&quot;</a></h2>
<p class="Pp">Get the bucket allocator associated with this brigade.</p>
<p class="Pp"></p>
<pre>  my $ba = $bb-&gt;bucket_alloc();
</pre>
<dl class="Bl-tag">
  <dt id="obj:~12"><a class="permalink" href="#obj:~12">obj: $bb (
    &quot;APR::Brigade object or class&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~12"><a class="permalink" href="#ret:~12">ret: $ba (
    &quot;APR::BucketAlloc object&quot; )</a></dt>
  <dd></dd>
  <dt id="since:~12"><a class="permalink" href="#since:~12">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_next_"><a class="permalink" href="#_next_">&quot;next&quot;</a></h2>
<p class="Pp">Return the next bucket in a brigade</p>
<p class="Pp"></p>
<pre>  $b_next = $bb-&gt;next($b);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~13"><a class="permalink" href="#obj:~13">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~6"><a class="permalink" href="#arg1:~6">arg1: $b (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The bucket after which the next bucket <span class="Li">$b_next</span> is
      located</dd>
  <dt id="ret:~13"><a class="permalink" href="#ret:~13">ret: $b_next (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The next bucket after bucket <span class="Li">$b</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        is no next bucket (i.e. <span class="Li">$b</span> is the last
      bucket).</p>
  </dd>
  <dt id="since:~13"><a class="permalink" href="#since:~13">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_pool_"><a class="permalink" href="#_pool_">&quot;pool&quot;</a></h2>
<p class="Pp">The pool the brigade is associated with.</p>
<p class="Pp"></p>
<pre>  $pool = $bb-&gt;pool;
</pre>
<dl class="Bl-tag">
  <dt id="obj:~14"><a class="permalink" href="#obj:~14">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="ret:~14"><a class="permalink" href="#ret:~14">ret: $pool (
    &quot;APR::Pool object&quot; )</a></dt>
  <dd></dd>
  <dt id="since:~14"><a class="permalink" href="#since:~14">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">The data is not allocated out of the pool, but a cleanup is
    registered with this pool. If the brigade is destroyed by some mechanism
    other than pool destruction, the destroying function is responsible for
    killing the registered cleanup.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_prev_"><a class="permalink" href="#_prev_">&quot;prev&quot;</a></h2>
<p class="Pp">Return the previous bucket in the brigade</p>
<p class="Pp"></p>
<pre>  $b_prev = $bb-&gt;prev($b);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~15"><a class="permalink" href="#obj:~15">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd></dd>
  <dt id="arg1:~7"><a class="permalink" href="#arg1:~7">arg1: $b (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The bucket located after bucket <span class="Li">$b_prev</span></dd>
  <dt id="ret:~15"><a class="permalink" href="#ret:~15">ret: $b_prev (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The bucket located before bucket <span class="Li">$b</span>.
    <p class="Pp"><span class="Li">&quot;undef&quot;</span> is returned if there
        is no previous bucket (i.e. <span class="Li">$b</span> is the first
        bucket).</p>
  </dd>
  <dt id="since:~15"><a class="permalink" href="#since:~15">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="_split_"><a class="permalink" href="#_split_">&quot;split&quot;</a></h2>
<p class="Pp">Split a bucket brigade into two, such that the given bucket is the
    first in the new bucket brigade.</p>
<p class="Pp"></p>
<pre>  $bb2 = $bb-&gt;split($b);
</pre>
<dl class="Bl-tag">
  <dt id="obj:~16"><a class="permalink" href="#obj:~16">obj: $bb (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>The brigade to split</dd>
  <dt id="arg1:~8"><a class="permalink" href="#arg1:~8">arg1: $b (
    &quot;APR::Bucket object&quot; )</a></dt>
  <dd>The first bucket of the new brigade</dd>
  <dt id="ret:~16"><a class="permalink" href="#ret:~16">ret: $bb2 (
    &quot;APR::Brigade object&quot; )</a></dt>
  <dd>The new brigade.</dd>
  <dt id="since:~16"><a class="permalink" href="#since:~16">since:
    2.0.00</a></dt>
  <dd></dd>
</dl>
<p class="Pp">This function is useful when a filter wants to pass only the
    initial part of a brigade to the next filter.</p>
<p class="Pp">Example:</p>
<p class="Pp">Create a bucket brigade with three buckets, and split it into two
    brigade such that the second brigade will have the last two buckets.</p>
<p class="Pp"></p>
<pre>  my $bb1 = APR::Brigade-&gt;new($r-&gt;pool, $c-&gt;bucket_alloc);
  my $ba  = $c-&gt;bucket_alloc();
  $bb1-&gt;insert_tail(APR::Bucket-&gt;new($ba, &quot;1&quot;));
  $bb1-&gt;insert_tail(APR::Bucket-&gt;new($ba, &quot;2&quot;));
  $bb1-&gt;insert_tail(APR::Bucket-&gt;new($ba, &quot;3&quot;));
</pre>
<p class="Pp"><span class="Li">$bb1</span> now contains buckets &quot;1&quot;,
    &quot;2&quot;, &quot;3&quot;. Now do the split at the second bucket:</p>
<p class="Pp"></p>
<pre>  my $b = $bb1-&gt;first; # 1
  $b = $bb1-&gt;next($b); # 2
  my $bb2 = $bb1-&gt;split($b);
</pre>
<p class="Pp">Now <span class="Li">$bb1</span> contains bucket &quot;1&quot;.
    <span class="Li">$bb2</span> contains buckets: &quot;2&quot;,
  &quot;3&quot;</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="See_Also"><a class="permalink" href="#See_Also">See
  Also</a></h1>
<p class="Pp">mod_perl 2.0 documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Copyright"><a class="permalink" href="#Copyright">Copyright</a></h1>
<p class="Pp">mod_perl 2.0 and its core modules are copyrighted under The Apache
    Software License, Version 2.0.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Authors"><a class="permalink" href="#Authors">Authors</a></h1>
<p class="Pp">The mod_perl development team and numerous contributors.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-06-18</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
