<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.10 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
   Begin verbatim text
   End verbatim text
   Set up some character translations and predefined strings.  \*(-- will
   give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
   double quote, and \*(R" will give a right double quote.  \*(C+ will
   give a nicer C++.  Capital omega is used to do unbreakable dashes and
   therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
   nothing in troff, for use with C<>.
   diablo 10 pitch
    diablo 12 pitch
 -->
<head>
  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>PERL5240DELTA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERL5240DELTA(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERL5240DELTA(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
perl5240delta - what is new for perl v5.24.0
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
This document describes the differences between the 5.22.0 release and the
  5.24.0 release.
</section>
<section class="Sh">
<h1 class="Sh" id="Core_Enhancements"><a class="permalink" href="#Core_Enhancements">Core
  Enhancements</a></h1>
<section class="Ss">
<h2 class="Ss" id="Postfix_dereferencing_is_no_longer_experimental"><a class="permalink" href="#Postfix_dereferencing_is_no_longer_experimental">Postfix
  dereferencing is no longer experimental</a></h2>
Using the <span class="Li">&quot;postderef&quot;</span> and
  <span class="Li">&quot;postderef_qq&quot;</span> features no longer emits a
  warning. Existing code that disables the
  <span class="Li">&quot;experimental::postderef&quot;</span> warning category
  that they previously used will continue to work. The
  <span class="Li">&quot;postderef&quot;</span> feature has no effect; all Perl
  code can use postfix dereferencing, regardless of what feature declarations
  are in scope. The <span class="Li">5.24</span> feature bundle now includes the
  <span class="Li">&quot;postderef_qq&quot;</span> feature.
</section>
<section class="Ss">
<h2 class="Ss" id="Unicode_8.0_is_now_supported"><a class="permalink" href="#Unicode_8.0_is_now_supported">Unicode
  8.0 is now supported</a></h2>
For details on what is in this release, see
  &lt;http://www.unicode.org/versions/Unicode8.0.0/&gt;.
</section>
<section class="Ss">
<h2 class="Ss" id="perl_will_now_croak_when_closing_an_in-place_output_file_fails"><a class="permalink" href="#perl_will_now_croak_when_closing_an_in-place_output_file_fails">perl
  will now croak when closing an in-place output file fails</a></h2>
Until now, failure to close the output file for an in-place edit was not
  detected, meaning that the input file could be clobbered without the edit
  being successfully completed. Now, when the output file cannot be closed
  successfully, an exception is raised.
</section>
<section class="Ss">
<h2 class="Ss" id="New___eb_lb___boundary_in_regular_expressions"><a class="permalink" href="#New___eb_lb___boundary_in_regular_expressions">New
  &quot;\b{lb}&quot; boundary in regular expressions</a></h2>
<span class="Li">&quot;lb&quot;</span> stands for Line Break. It is a Unicode
  property that determines where a line of text is suitable to break (typically
  so that it can be output without overflowing the available horizontal space).
  This capability has long been furnished by the Unicode::LineBreak module, but
  now a light-weight, non-customizable version that is suitable for many
  purposes is in core Perl.
</section>
<section class="Ss">
<h2 class="Ss" id="_qr/(?___)/__now_works_in__s-1UTF_-8_s0_locales"><a class="permalink" href="#_qr/(?___)/__now_works_in__s-1UTF_-8_s0_locales">&quot;qr/(?[
  ])/&quot; now works in UTF-8 locales</a></h2>
Extended Bracketed Character Classes now will successfully compile when
  <span class="Li">&quot;use&#x00A0;locale&quot;</span> is in effect. The
  compiled pattern will use standard Unicode rules. If the runtime locale is not
  a UTF-8 one, a warning is raised and standard Unicode rules are used anyway.
  No tainting is done since the outcome does not actually depend on the locale.
</section>
<section class="Ss">
<h2 class="Ss" id="Integer_shift_(_____and_____)_now_more_explicitly_defined"><a class="permalink" href="#Integer_shift_(_____and_____)_now_more_explicitly_defined">Integer
  shift (&quot;&lt;&lt;&quot; and &quot;&gt;&gt;&quot;) now more explicitly
  defined</a></h2>
Negative shifts are reverse shifts: left shift becomes right shift, and right
  shift becomes left shift.
<p class="Pp">Shifting by the number of bits in a native integer (or more) is
    zero, except when the &quot;overshift&quot; is right shifting a negative
    value under <span class="Li">&quot;use integer&quot;</span>, in which case
    the result is -1 (arithmetic shift).</p>
<p class="Pp">Until now negative shifting and overshifting have been undefined
    because they have relied on whatever the C implementation happens to do. For
    example, for the overshift a common C behavior is &quot;modulo
  shift&quot;:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  1 &gt;&gt; 64 == 1 &gt;&gt; (64 % 64) == 1 &gt;&gt; 0 == 1  # Common C behavior.

  # And the same for &lt;&lt;, while Perl now produces 0 for both.
</pre>
<p class="Pp">Now these behaviors are well-defined under Perl, regardless of
    what the underlying C implementation does. Note, however, that you are still
    constrained by the native integer width: you need to know how far left you
    can go. You can use for example:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
  use Config;
  my $wordbits = $Config{uvsize} * 8;  # Or $Config{uvsize} &lt;&lt; 3.
</pre>
<p class="Pp">If you need a more bits on the left shift, you can use for example
    the <span class="Li">&quot;bigint&quot;</span> pragma, or the
    <span class="Li">&quot;Bit::Vector&quot;</span> module from CPAN.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="printf_and_sprintf_now_allow_reordered_precision_arguments"><a class="permalink" href="#printf_and_sprintf_now_allow_reordered_precision_arguments">printf
  and sprintf now allow reordered precision arguments</a></h2>
That is, <span class="Li">&quot;sprintf '|%.*2$d|', 2, 3&quot;</span> now
  returns <span class="Li">&quot;|002|&quot;</span>. This extends the existing
  reordering mechanism (which allows reordering for arguments that are used as
  format fields, widths, and vector separators).
</section>
<section class="Ss">
<h2 class="Ss" id="More_fields_provided_to__sigaction__callback_with__SA_SIGINFO_"><a class="permalink" href="#More_fields_provided_to__sigaction__callback_with__SA_SIGINFO_">More
  fields provided to &quot;sigaction&quot; callback with
  &quot;SA_SIGINFO&quot;</a></h2>
When passing the <span class="Li">&quot;SA_SIGINFO&quot;</span> flag to
  sigaction, the <span class="Li">&quot;errno&quot;</span>,
  <span class="Li">&quot;status&quot;</span>,
  <span class="Li">&quot;uid&quot;</span>,
  <span class="Li">&quot;pid&quot;</span>,
  <span class="Li">&quot;addr&quot;</span> and
  <span class="Li">&quot;band&quot;</span> fields are now included in the hash
  passed to the handler, if supported by the platform.
</section>
<section class="Ss">
<h2 class="Ss" id="Hashbang_redirection_to_Perl_6"><a class="permalink" href="#Hashbang_redirection_to_Perl_6">Hashbang
  redirection to Perl 6</a></h2>
Previously perl would redirect to another interpreter if it found a hashbang
  path unless the path contains &quot;perl&quot; (see perlrun). To improve
  compatibility with Perl 6 this behavior has been extended to also redirect if
  &quot;perl&quot; is followed by &quot;6&quot;.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Security"><a class="permalink" href="#Security">Security</a></h1>
<section class="Ss">
<h2 class="Ss" id="Set_proper_umask_before_calling_mkstemp(3)"><a class="permalink" href="#Set_proper_umask_before_calling_mkstemp(3)">Set
  proper umask before calling mkstemp(3)</a></h2>
In 5.22 perl started setting umask to 0600 before calling
  <span class="Li">mkstemp(3)</span> and restoring it afterwards. This
  wrongfully tells <span class="Li">open(2)</span> to strip the owner read and
  write bits from the given mode before applying it, rather than the intended
  negation of leaving only those bits in place.
<p class="Pp">Systems that use mode 0666 in <span class="Li">mkstemp(3)</span>
    (like old versions of glibc) create a file with permissions 0066, leaving
    world read and write permissions regardless of current umask.</p>
<p class="Pp">This has been fixed by using umask 0177 instead. [perl
  #127322]</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Fix_out_of_boundary_access_in_Win32_path_handling"><a class="permalink" href="#Fix_out_of_boundary_access_in_Win32_path_handling">Fix
  out of boundary access in Win32 path handling</a></h2>
This is CVE-2015-8608. For more information see [perl #126755]
  &lt;https://rt.perl.org/Ticket/Display.html?id=126755&gt;
</section>
<section class="Ss">
<h2 class="Ss" id="Fix_loss_of_taint_in_canonpath"><a class="permalink" href="#Fix_loss_of_taint_in_canonpath">Fix
  loss of taint in canonpath</a></h2>
This is CVE-2015-8607. For more information see [perl #126862]
  &lt;https://rt.perl.org/Ticket/Display.html?id=126862&gt;
</section>
<section class="Ss">
<h2 class="Ss" id="Avoid_accessing_uninitialized_memory_in_win32__crypt()_"><a class="permalink" href="#Avoid_accessing_uninitialized_memory_in_win32__crypt()_">Avoid
  accessing uninitialized memory in win32 &quot;crypt()&quot;</a></h2>
Added validation that will detect both a short salt and invalid characters in
  the salt. [perl #126922]
  &lt;https://rt.perl.org/Ticket/Display.html?id=126922&gt;
</section>
<section class="Ss">
<h2 class="Ss" id="Remove_duplicate_environment_variables_from__environ_"><a class="permalink" href="#Remove_duplicate_environment_variables_from__environ_">Remove
  duplicate environment variables from &quot;environ&quot;</a></h2>
Previously, if an environment variable appeared more than once in
  <span class="Li">&quot;environ[]&quot;</span>, <span class="Li">%ENV</span>
  would contain the last entry for that name, while a typical
  <span class="Li">&quot;getenv()&quot;</span> would return the first entry. We
  now make sure <span class="Li">%ENV</span> contains the same as what
  <span class="Li">&quot;getenv&quot;</span> returns.
<p class="Pp">Second, we remove duplicates from
    <span class="Li">&quot;environ[]&quot;</span>, so if a setting with that
    name is set in <span class="Li">%ENV</span>, we won't pass an unsafe value
    to a child process.</p>
<p class="Pp">[CVE-2016-2381]</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Incompatible_Changes"><a class="permalink" href="#Incompatible_Changes">Incompatible
  Changes</a></h1>
<section class="Ss">
<h2 class="Ss" id="The__autoderef__feature_has_been_removed"><a class="permalink" href="#The__autoderef__feature_has_been_removed">The
  &quot;autoderef&quot; feature has been removed</a></h2>
The experimental <span class="Li">&quot;autoderef&quot;</span> feature (which
  allowed calling <span class="Li">&quot;push&quot;</span>,
  <span class="Li">&quot;pop&quot;</span>,
  <span class="Li">&quot;shift&quot;</span>,
  <span class="Li">&quot;unshift&quot;</span>,
  <span class="Li">&quot;splice&quot;</span>,
  <span class="Li">&quot;keys&quot;</span>,
  <span class="Li">&quot;values&quot;</span>, and
  <span class="Li">&quot;each&quot;</span> on a scalar argument) has been deemed
  unsuccessful. It has now been removed; trying to use the feature (or to
  disable the <span class="Li">&quot;experimental::autoderef&quot;</span>
  warning it previously triggered) now yields an exception.
</section>
<section class="Ss">
<h2 class="Ss" id="Lexical_$__has_been_removed"><a class="permalink" href="#Lexical_$__has_been_removed">Lexical
  $_ has been removed</a></h2>
<span class="Li">&quot;my $_&quot;</span> was introduced in Perl 5.10, and
  subsequently caused much confusion with no obvious solution. In Perl 5.18.0,
  it was made experimental on the theory that it would either be removed or
  redesigned in a less confusing (but backward-incompatible) way. Over the
  following years, no alternatives were proposed. The feature has now been
  removed and will fail to compile.
</section>
<section class="Ss">
<h2 class="Ss" id="_qr/_eb_wb_/__is_now_tailored_to_Perl_expectations"><a class="permalink" href="#_qr/_eb_wb_/__is_now_tailored_to_Perl_expectations">&quot;qr/\b{wb}/&quot;
  is now tailored to Perl expectations</a></h2>
This is now more suited to be a drop-in replacement for plain
  <span class="Li">&quot;\b&quot;</span>, but giving better results for parsing
  natural language. Previously it strictly followed the current Unicode rules
  which calls for it to match between each white space character. Now it doesn't
  generally match within spans of white space, behaving like
  <span class="Li">&quot;\b&quot;</span> does. See &quot;\b{wb}&quot; in
  perlrebackslash
</section>
<section class="Ss">
<h2 class="Ss" id="Regular_expression_compilation_errors"><a class="permalink" href="#Regular_expression_compilation_errors">Regular
  expression compilation errors</a></h2>
Some regular expression patterns that had runtime errors now don't compile at
  all.
<p class="Pp">Almost all Unicode properties using the
    <span class="Li">&quot;\p{}&quot;</span> and
    <span class="Li">&quot;\P{}&quot;</span> regular expression pattern
    constructs are now checked for validity at pattern compilation time, and
    invalid ones will cause the program to not compile. In earlier releases,
    this check was often deferred until run time. Whenever an error check is
    moved from run- to compile time, erroneous code is caught 100% of the time,
    whereas before it would only get caught if and when the offending portion
    actually gets executed, which for unreachable code might be never.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_qr/_eN__/__now_disallowed_under__use_re__strict__"><a class="permalink" href="#_qr/_eN__/__now_disallowed_under__use_re__strict__">&quot;qr/\N{}/&quot;
  now disallowed under &quot;use re &quot;strict&quot;&quot;</a></h2>
An empty <span class="Li">&quot;\N{}&quot;</span> makes no sense, but for
  backwards compatibility is accepted as doing nothing, though a deprecation
  warning is raised by default. But now this is a fatal error under the
  experimental feature &quot;'strict' mode&quot; in re.
</section>
<section class="Ss">
<h2 class="Ss" id="Nested_declarations_are_now_disallowed"><a class="permalink" href="#Nested_declarations_are_now_disallowed">Nested
  declarations are now disallowed</a></h2>
A <span class="Li">&quot;my&quot;</span>,
  <span class="Li">&quot;our&quot;</span>, or
  <span class="Li">&quot;state&quot;</span> declaration is no longer allowed
  inside of another <span class="Li">&quot;my&quot;</span>,
  <span class="Li">&quot;our&quot;</span>, or
  <span class="Li">&quot;state&quot;</span> declaration.
<p class="Pp">For example, these are now fatal:</p>
<p class="Pp"><span class="Li"></span></p>
<pre>
   my ($x, my($y));
   our (my $x);
</pre>
<p class="Pp">[perl #125587]
    &lt;https://rt.perl.org/Ticket/Display.html?id=125587&gt;</p>
<p class="Pp">[perl #121058]
    &lt;https://rt.perl.org/Ticket/Display.html?id=121058&gt;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The__/_eC/__character_class_has_been_removed."><a class="permalink" href="#The__/_eC/__character_class_has_been_removed.">The
  &quot;/\C/&quot; character class has been removed.</a></h2>
This regular expression character class was deprecated in v5.20.0 and has
  produced a deprecation warning since v5.22.0. It is now a compile-time error.
  If you need to examine the individual bytes that make up a UTF8-encoded
  character, then use <span class="Li">&quot;utf8::encode()&quot;</span> on the
  string (or a copy) first.
</section>
<section class="Ss">
<h2 class="Ss" id="_chdir(_(aq_(aq)__no_longer_chdirs_home"><a class="permalink" href="#_chdir(_(aq_(aq)__no_longer_chdirs_home">&quot;chdir('')&quot;
  no longer chdirs home</a></h2>
Using <span class="Li">&quot;chdir('')&quot;</span> or
  <span class="Li">&quot;chdir(undef)&quot;</span> to chdir home has been
  deprecated since perl v5.8, and will now fail. Use
  <span class="Li">&quot;chdir()&quot;</span> instead.
</section>
<section class="Ss">
<h2 class="Ss" id="_s-1ASCII_s0_characters_in_variable_names_must_now_be_all_visible"><a class="permalink" href="#_s-1ASCII_s0_characters_in_variable_names_must_now_be_all_visible">ASCII
  characters in variable names must now be all visible</a></h2>
It was legal until now on ASCII platforms for variable names to contain
  non-graphical ASCII control characters (ordinals 0 through 31, and 127, which
  are the C0 controls and <span class="Li">&quot;DELETE&quot;</span>). This
  usage has been deprecated since v5.20, and as of now causes a syntax error.
  The variables these names referred to are special, reserved by Perl for
  whatever use it may choose, now, or in the future. Each such variable has an
  alternative way of spelling it. Instead of the single non-graphic control
  character, a two character sequence beginning with a caret is used, like
  <span class="Li">$^]</span> and
  <span class="Li">&quot;${^GLOBAL_PHASE}&quot;</span>. Details are at perlvar.
  It remains legal, though unwise and deprecated (raising a deprecation
  warning), to use certain non-graphic non-ASCII characters in variables names
  when not under <span class="Li">&quot;use&#x00A0;utf8&quot;</span>. No code
  should do this, as all such variables are reserved by Perl, and Perl doesn't
  currently define any of them (but could at any time, without notice).
</section>
<section class="Ss">
<h2 class="Ss" id="An_off_by_one_issue_in_$Carp::MaxArgNums_has_been_fixed"><a class="permalink" href="#An_off_by_one_issue_in_$Carp::MaxArgNums_has_been_fixed">An
  off by one issue in $Carp::MaxArgNums has been fixed</a></h2>
<span class="Li">$Carp::MaxArgNums</span> is supposed to be the number of
  arguments to display. Prior to this version, it was instead showing
  <span class="Li">$Carp::MaxArgNums</span> + 1 arguments, contrary to the
  documentation.
</section>
<section class="Ss">
<h2 class="Ss" id="Only_blanks_and_tabs_are_now_allowed_within___...___within__(?_..._)_."><a class="permalink" href="#Only_blanks_and_tabs_are_now_allowed_within___...___within__(?_..._)_.">Only
  blanks and tabs are now allowed within &quot;[...]&quot; within
  &quot;(?[...])&quot;.</a></h2>
The experimental Extended Bracketed Character Classes can contain regular
  bracketed character classes within them. These differ from regular ones in
  that white space is generally ignored, unless escaped by preceding it with a
  backslash. The white space that is ignored is now limited to just tab
  <span class="Li">&quot;\t&quot;</span> and SPACE characters. Previously, it
  was any white space. See &quot;Extended Bracketed Character Classes&quot; in
  perlrecharclass.
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Deprecations"><a class="permalink" href="#Deprecations">Deprecations</a></h1>
<section class="Ss">
<h2 class="Ss" id="Using_code_points_above_the_platform's__IV_MAX__is_now_deprecated"><a class="permalink" href="#Using_code_points_above_the_platform's__IV_MAX__is_now_deprecated">Using
  code points above the platform's &quot;IV_MAX&quot; is now deprecated</a></h2>
Unicode defines code points in the range
  <span class="Li">&quot;0..0x10FFFF&quot;</span>. Some standards at one time
  defined them up to 2**31 - 1, but Perl has allowed them to be as high as
  anything that will fit in a word on the platform being used. However, use of
  those above the platform's <span class="Li">&quot;IV_MAX&quot;</span> is
  broken in some constructs, notably <span class="Li">&quot;tr///&quot;</span>,
  regular expression patterns involving quantifiers, and in some arithmetic and
  comparison operations, such as being the upper limit of a loop. Now the use of
  such code points raises a deprecation warning, unless that warning category is
  turned off. <span class="Li">&quot;IV_MAX&quot;</span> is typically 2**31 -1
  on 32-bit platforms, and 2**63-1 on 64-bit ones.
</section>
<section class="Ss">
<h2 class="Ss" id="Doing_bitwise_operations_on_strings_containing_code_points_above_0xFF_is_deprecated"><a class="permalink" href="#Doing_bitwise_operations_on_strings_containing_code_points_above_0xFF_is_deprecated">Doing
  bitwise operations on strings containing code points above 0xFF is
  deprecated</a></h2>
The string bitwise operators treat their operands as strings of bytes, and
  values beyond 0xFF are nonsensical in this context. To operate on encoded
  bytes, first encode the strings. To operate on code points' numeric values,
  use <span class="Li">&quot;split&quot;</span> and <span class="Li">&quot;map
  ord&quot;</span>. In the future, this warning will be replaced by an
  exception.
</section>
<section class="Ss">
<h2 class="Ss" id="_sysread()_,__syswrite()_,__recv()__and__send()__are_deprecated_on_:utf8_handles"><a class="permalink" href="#_sysread()_,__syswrite()_,__recv()__and__send()__are_deprecated_on_:utf8_handles">&quot;sysread()&quot;,
  &quot;syswrite()&quot;, &quot;recv()&quot; and &quot;send()&quot; are
  deprecated on :utf8 handles</a></h2>
The <span class="Li">&quot;sysread()&quot;</span>,
  <span class="Li">&quot;recv()&quot;</span>,
  <span class="Li">&quot;syswrite()&quot;</span> and
  <span class="Li">&quot;send()&quot;</span> operators are deprecated on handles
  that have the <span class="Li">&quot;:utf8&quot;</span> layer, either
  explicitly, or implicitly, eg., with the
  <span class="Li">&quot;:encoding(UTF-16LE)&quot;</span> layer.
<p class="Pp">Both <span class="Li">&quot;sysread()&quot;</span> and
    <span class="Li">&quot;recv()&quot;</span> currently use only the
    <span class="Li">&quot;:utf8&quot;</span> flag for the stream, ignoring the
    actual layers. Since <span class="Li">&quot;sysread()&quot;</span> and
    <span class="Li">&quot;recv()&quot;</span> do no UTF-8 validation they can
    end up creating invalidly encoded scalars.</p>
<p class="Pp">Similarly, <span class="Li">&quot;syswrite()&quot;</span> and
    <span class="Li">&quot;send()&quot;</span> use only the
    <span class="Li">&quot;:utf8&quot;</span> flag, otherwise ignoring any
    layers. If the flag is set, both write the value UTF-8 encoded, even if the
    layer is some different encoding, such as the example above.</p>
<p class="Pp">Ideally, all of these operators would completely ignore the
    <span class="Li">&quot;:utf8&quot;</span> state, working only with bytes,
    but this would result in silently breaking existing code. To avoid this a
    future version of perl will throw an exception when any of
    <span class="Li">&quot;sysread()&quot;</span>,
    <span class="Li">&quot;recv()&quot;</span>,
    <span class="Li">&quot;syswrite()&quot;</span> or
    <span class="Li">&quot;send()&quot;</span> are called on handle with the
    <span class="Li">&quot;:utf8&quot;</span> layer.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Performance_Enhancements"><a class="permalink" href="#Performance_Enhancements">Performance
  Enhancements</a></h1>
<ul class="Bl-bullet">
  <li>The overhead of scope entry and exit has been considerably reduced, so for
      example subroutine calls, loops and basic blocks are all faster now. This
      empty function call now takes about a third less time to execute:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    sub f{} f();
    </pre>
  </li>
  <li>Many languages, such as Chinese, are caseless. Perl now knows about most
      common ones, and skips much of the work when a program tries to change
      case in them (like <span class="Li">&quot;ucfirst()&quot;</span>) or match
      caselessly (<span class="Li">&quot;qr//i&quot;</span>). This will speed up
      a program, such as a web server, that can operate on multiple languages,
      while it is operating on a caseless one.</li>
  <li><span class="Li">&quot;/fixed-substr/&quot;</span> has been made much
      faster.
    <p class="Pp">On platforms with a libc
        <span class="Li">&quot;memchr()&quot;</span> implementation which makes
        good use of underlying hardware support, patterns which include fixed
        substrings will now often be much faster; for example with glibc on a
        recent x86_64 CPU, this:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    $s = &quot;a&quot; x 1000 . &quot;wxyz&quot;;
    $s =~ /wxyz/ for 1..30000
    </pre>
    <p class="Pp">is now about 7 times faster. On systems with slow
        <span class="Li">&quot;memchr()&quot;</span>, e.g. 32-bit ARM Raspberry
        Pi, there will be a small or little speedup. Conversely, some
        pathological cases, such as <span class="Li">&quot;&quot;ab&quot; x 1000
        =~ /aa/&quot;</span> will be slower now; up to 3 times slower on the
        rPi, 1.5x slower on x86_64.</p>
  </li>
  <li>Faster addition, subtraction and multiplication.
    <p class="Pp">Since 5.8.0, arithmetic became slower due to the need to
        support 64-bit integers. To deal with 64-bit integers, a lot more corner
        cases need to be checked, which adds time. We now detect common cases
        where there is no need to check for those corner cases, and special-case
        them.</p>
  </li>
  <li>Preincrement, predecrement, postincrement, and postdecrement have been
      made faster by internally splitting the functions which handled multiple
      cases into different functions.</li>
  <li>Creating Perl debugger data structures (see &quot;Debugger Internals&quot;
      in perldebguts) for XSUBs and const subs has been removed. This removed
      one glob/scalar combo for each unique
      <span class="Li">&quot;.c&quot;</span> file that XSUBs and const subs came
      from. On startup (<span class="Li">&quot;perl
      -e&quot;0&quot;&quot;</span>) about half a dozen glob/scalar debugger
      combos were created. Loading XS modules created more glob/scalar combos.
      These things were being created regardless of whether the perl debugger
      was being used, and despite the fact that it can't debug C code
    anyway</li>
  <li>On Win32, <span class="Li">&quot;stat&quot;</span>ing or
      <span class="Li">&quot;-X&quot;</span>ing a path, if the file or directory
      does not exist, is now 3.5x faster than before.</li>
  <li>Single arguments in list assign are now slightly faster:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  ($x) = (...);
  (...) = ($x);
    </pre>
  </li>
  <li>Less peak memory is now used when compiling regular expression
    patterns.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Modules_and_Pragmata"><a class="permalink" href="#Modules_and_Pragmata">Modules
  and Pragmata</a></h1>
<section class="Ss">
<h2 class="Ss" id="Updated_Modules_and_Pragmata"><a class="permalink" href="#Updated_Modules_and_Pragmata">Updated
  Modules and Pragmata</a></h2>
<ul class="Bl-bullet">
  <li>arybase has been upgraded from version 0.10 to 0.11.</li>
  <li>Attribute::Handlers has been upgraded from version 0.97 to 0.99.</li>
  <li>autodie has been upgraded from version 2.26 to 2.29.</li>
  <li>autouse has been upgraded from version 1.08 to 1.11.</li>
  <li>B has been upgraded from version 1.58 to 1.62.</li>
  <li>B::Deparse has been upgraded from version 1.35 to 1.37.</li>
  <li>base has been upgraded from version 2.22 to 2.23.</li>
  <li>Benchmark has been upgraded from version 1.2 to 1.22.</li>
  <li>bignum has been upgraded from version 0.39 to 0.42.</li>
  <li>bytes has been upgraded from version 1.04 to 1.05.</li>
  <li>Carp has been upgraded from version 1.36 to 1.40.</li>
  <li>Compress::Raw::Bzip2 has been upgraded from version 2.068 to 2.069.</li>
  <li>Compress::Raw::Zlib has been upgraded from version 2.068 to 2.069.</li>
  <li>Config::Perl::V has been upgraded from version 0.24 to 0.25.</li>
  <li>CPAN::Meta has been upgraded from version 2.150001 to 2.150005.</li>
  <li>CPAN::Meta::Requirements has been upgraded from version 2.132 to
    2.140.</li>
  <li>CPAN::Meta::YAML has been upgraded from version 0.012 to 0.018.</li>
  <li>Data::Dumper has been upgraded from version 2.158 to 2.160.</li>
  <li>Devel::Peek has been upgraded from version 1.22 to 1.23.</li>
  <li>Devel::PPPort has been upgraded from version 3.31 to 3.32.</li>
  <li>Dumpvalue has been upgraded from version 1.17 to 1.18.</li>
  <li>DynaLoader has been upgraded from version 1.32 to 1.38.</li>
  <li>Encode has been upgraded from version 2.72 to 2.80.</li>
  <li>encoding has been upgraded from version 2.14 to 2.17.</li>
  <li>encoding::warnings has been upgraded from version 0.11 to 0.12.</li>
  <li>English has been upgraded from version 1.09 to 1.10.</li>
  <li>Errno has been upgraded from version 1.23 to 1.25.</li>
  <li>experimental has been upgraded from version 0.013 to 0.016.</li>
  <li>ExtUtils::CBuilder has been upgraded from version 0.280221 to
    0.280225.</li>
  <li>ExtUtils::Embed has been upgraded from version 1.32 to 1.33.</li>
  <li>ExtUtils::MakeMaker has been upgraded from version 7.04_01 to
    7.10_01.</li>
  <li>ExtUtils::ParseXS has been upgraded from version 3.28 to 3.31.</li>
  <li>ExtUtils::Typemaps has been upgraded from version 3.28 to 3.31.</li>
  <li>feature has been upgraded from version 1.40 to 1.42.</li>
  <li>fields has been upgraded from version 2.17 to 2.23.</li>
  <li>File::Find has been upgraded from version 1.29 to 1.34.</li>
  <li>File::Glob has been upgraded from version 1.24 to 1.26.</li>
  <li>File::Path has been upgraded from version 2.09 to 2.12_01.</li>
  <li>File::Spec has been upgraded from version 3.56 to 3.63.</li>
  <li>Filter::Util::Call has been upgraded from version 1.54 to 1.55.</li>
  <li>Getopt::Long has been upgraded from version 2.45 to 2.48.</li>
  <li>Hash::Util has been upgraded from version 0.18 to 0.19.</li>
  <li>Hash::Util::FieldHash has been upgraded from version 1.15 to 1.19.</li>
  <li>HTTP::Tiny has been upgraded from version 0.054 to 0.056.</li>
  <li>I18N::Langinfo has been upgraded from version 0.12 to 0.13.</li>
  <li>if has been upgraded from version 0.0604 to 0.0606.</li>
  <li>IO has been upgraded from version 1.35 to 1.36.</li>
  <li>IO-Compress has been upgraded from version 2.068 to 2.069.</li>
  <li>IPC::Open3 has been upgraded from version 1.18 to 1.20.</li>
  <li>IPC::SysV has been upgraded from version 2.04 to 2.06_01.</li>
  <li>List::Util has been upgraded from version 1.41 to 1.42_02.</li>
  <li>locale has been upgraded from version 1.06 to 1.08.</li>
  <li>Locale::Codes has been upgraded from version 3.34 to 3.37.</li>
  <li>Math::BigInt has been upgraded from version 1.9997 to 1.999715.</li>
  <li>Math::BigInt::FastCalc has been upgraded from version 0.31 to 0.40.</li>
  <li>Math::BigRat has been upgraded from version 0.2608 to 0.260802.</li>
  <li>Module::CoreList has been upgraded from version 5.20150520 to
    5.20160320.</li>
  <li>Module::Metadata has been upgraded from version 1.000026 to 1.000031.</li>
  <li>mro has been upgraded from version 1.17 to 1.18.</li>
  <li>ODBM_File has been upgraded from version 1.12 to 1.14.</li>
  <li>Opcode has been upgraded from version 1.32 to 1.34.</li>
  <li>parent has been upgraded from version 0.232 to 0.234.</li>
  <li>Parse::CPAN::Meta has been upgraded from version 1.4414 to 1.4417.</li>
  <li>Perl::OSType has been upgraded from version 1.008 to 1.009.</li>
  <li>perlfaq has been upgraded from version 5.021009 to 5.021010.</li>
  <li>PerlIO::encoding has been upgraded from version 0.21 to 0.24.</li>
  <li>PerlIO::mmap has been upgraded from version 0.014 to 0.016.</li>
  <li>PerlIO::scalar has been upgraded from version 0.22 to 0.24.</li>
  <li>PerlIO::via has been upgraded from version 0.15 to 0.16.</li>
  <li>Pod::Functions has been upgraded from version 1.09 to 1.10.</li>
  <li>Pod::Perldoc has been upgraded from version 3.25 to 3.25_02.</li>
  <li>Pod::Simple has been upgraded from version 3.29 to 3.32.</li>
  <li>Pod::Usage has been upgraded from version 1.64 to 1.68.</li>
  <li>POSIX has been upgraded from version 1.53 to 1.65.</li>
  <li>Scalar::Util has been upgraded from version 1.41 to 1.42_02.</li>
  <li>SDBM_File has been upgraded from version 1.13 to 1.14.</li>
  <li>SelfLoader has been upgraded from version 1.22 to 1.23.</li>
  <li>Socket has been upgraded from version 2.018 to 2.020_03.</li>
  <li>Storable has been upgraded from version 2.53 to 2.56.</li>
  <li>strict has been upgraded from version 1.09 to 1.11.</li>
  <li>Term::ANSIColor has been upgraded from version 4.03 to 4.04.</li>
  <li>Term::Cap has been upgraded from version 1.15 to 1.17.</li>
  <li>Test has been upgraded from version 1.26 to 1.28.</li>
  <li>Test::Harness has been upgraded from version 3.35 to 3.36.</li>
  <li>Thread::Queue has been upgraded from version 3.05 to 3.08.</li>
  <li>threads has been upgraded from version 2.01 to 2.06.</li>
  <li>threads::shared has been upgraded from version 1.48 to 1.50.</li>
  <li>Tie::File has been upgraded from version 1.01 to 1.02.</li>
  <li>Tie::Scalar has been upgraded from version 1.03 to 1.04.</li>
  <li>Time::HiRes has been upgraded from version 1.9726 to 1.9732.</li>
  <li>Time::Piece has been upgraded from version 1.29 to 1.31.</li>
  <li>Unicode::Collate has been upgraded from version 1.12 to 1.14.</li>
  <li>Unicode::Normalize has been upgraded from version 1.18 to 1.25.</li>
  <li>Unicode::UCD has been upgraded from version 0.61 to 0.64.</li>
  <li>UNIVERSAL has been upgraded from version 1.12 to 1.13.</li>
  <li>utf8 has been upgraded from version 1.17 to 1.19.</li>
  <li>version has been upgraded from version 0.9909 to 0.9916.</li>
  <li>warnings has been upgraded from version 1.32 to 1.36.</li>
  <li>Win32 has been upgraded from version 0.51 to 0.52.</li>
  <li>Win32API::File has been upgraded from version 0.1202 to 0.1203.</li>
  <li>XS::Typemap has been upgraded from version 0.13 to 0.14.</li>
  <li>XSLoader has been upgraded from version 0.20 to 0.21.</li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Documentation"><a class="permalink" href="#Documentation">Documentation</a></h1>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Existing_Documentation"><a class="permalink" href="#Changes_to_Existing_Documentation">Changes
  to Existing Documentation</a></h2>
<i>perlapi</i>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The process of using undocumented globals has been documented, namely,
      that one should send email to perl5-porters@perl.org
      &lt;mailto:perl5-porters@perl.org&gt; first to get the go-ahead for
      documenting and using an undocumented function or global variable.</dd>
</dl>
<p class="Pp"><i>perlcall</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>A number of cleanups have been made to perlcall, including:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>use <span class="Li">&quot;EXTEND(SP, n)&quot;</span> and
      <span class="Li">&quot;PUSHs()&quot;</span> instead of
      <span class="Li">&quot;XPUSHs()&quot;</span> where applicable and update
      prose to match</li>
  <li>add POPu, POPul and POPpbytex to the &quot;complete list of POP
      macros&quot; and clarify the documentation for some of the existing
      entries, and a note about side-effects</li>
  <li>add API documentation for POPu and POPul</li>
  <li>use ERRSV more efficiently</li>
  <li>approaches to thread-safety storage of SVs.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<p class="Pp"><i>perlfunc</i></p>
<ul class="Bl-bullet">
  <li>The documentation of <span class="Li">&quot;hex&quot;</span> has been
      revised to clarify valid inputs.</li>
  <li>Better explain meaning of negative PIDs in
      <span class="Li">&quot;waitpid&quot;</span>. [perl #127080]
      &lt;https://rt.perl.org/Ticket/Display.html?id=127080&gt;</li>
  <li>General cleanup: there's more consistency now (in POD usage, grammar, code
      examples), better practices in code examples (use of
      <span class="Li">&quot;my&quot;</span>, removal of bareword filehandles,
      dropped usage of <span class="Li">&quot;&amp;&quot;</span> when calling
      subroutines, ...), etc.</li>
</ul>
<p class="Pp"><i>perlguts</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>A new section has been added, &quot;Dynamic Scope and the Context
      Stack&quot; in perlguts, which explains how the perl context stack
    works.</dd>
</dl>
<p class="Pp"><i>perllocale</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>A stronger caution about using locales in threaded applications is given.
      Locales are not thread-safe, and you can get wrong results or even
      segfaults if you use them there.</dd>
</dl>
<p class="Pp"><i>perlmodlib</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>We now recommend contacting the module-authors list or PAUSE in seeking
      guidance on the naming of modules.</dd>
</dl>
<p class="Pp"><i>perlop</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The documentation of <span class="Li">&quot;qx//&quot;</span> now
      describes how <span class="Li">$?</span> is affected.</dd>
</dl>
<p class="Pp"><i>perlpolicy</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>This note has been added to perlpolicy:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 While civility is required, kindness is encouraged; if you have any
 doubt about whether you are being civil, simply ask yourself, &quot;Am I
 being kind?&quot; and aspire to that.
    </pre>
  </dd>
</dl>
<p class="Pp"><i>perlreftut</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Fix some examples to be strict clean.</dd>
</dl>
<p class="Pp"><i>perlrebackslash</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Clarify that in languages like Japanese and Thai, dictionary lookup is
      required to determine word boundaries.</dd>
</dl>
<p class="Pp"><i>perlsub</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Updated to note that anonymous subroutines can have signatures.</dd>
</dl>
<p class="Pp"><i>perlsyn</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Fixed a broken example where <span class="Li">&quot;=&quot;</span> was
      used instead of <span class="Li">&quot;==&quot;</span> in conditional in
      do/while example.</dd>
</dl>
<p class="Pp"><i>perltie</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The usage of <span class="Li">&quot;FIRSTKEY&quot;</span> and
      <span class="Li">&quot;NEXTKEY&quot;</span> has been clarified.</dd>
</dl>
<p class="Pp"><i>perlunicode</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Discourage use of 'In' as a prefix signifying the Unicode Block
    property.</dd>
</dl>
<p class="Pp"><i>perlvar</i></p>
<ul class="Bl-bullet">
  <li>The documentation of <span class="Li">$@</span> was reworded to clarify
      that it is not just for syntax errors in
      <span class="Li">&quot;eval&quot;</span>. [perl #124034]
      &lt;https://rt.perl.org/Ticket/Display.html?id=124034&gt;</li>
  <li>The specific true value of <span class="Li">$!{E...}</span> is now
      documented, noting that it is subject to change and not guaranteed.</li>
  <li>Use of <span class="Li">$OLD_PERL_VERSION</span> is now discouraged.</li>
</ul>
<p class="Pp"><i>perlxs</i></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The documentation of <span class="Li">&quot;PROTOTYPES&quot;</span> has
      been corrected; they are <i>disabled</i> by default, not
    <i>enabled</i>.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Diagnostics"><a class="permalink" href="#Diagnostics">Diagnostics</a></h1>
The following additions or changes have been made to diagnostic output,
  including warnings and fatal error messages. For the complete list of
  diagnostic messages, see perldiag.
<section class="Ss">
<h2 class="Ss" id="New_Diagnostics"><a class="permalink" href="#New_Diagnostics">New
  Diagnostics</a></h2>
<i>New Errors</i>
<ul class="Bl-bullet">
  <li><span class="Li">%s</span> must not be a named sequence in transliteration
      operator</li>
  <li>Can't find Unicode property definition &quot;%s&quot; in regex;</li>
  <li>Can't redeclare &quot;%s&quot; in &quot;%s&quot;</li>
  <li>Character following \p must be '{' or a single-character Unicode property
      name in regex;</li>
  <li>Empty \%c in regex; marked by &lt;-- HERE in m/%s/</li>
  <li>Illegal user-defined property name</li>
  <li>Invalid number '%s' for -C option.</li>
  <li>Sequence (?... not terminated in regex; marked by &lt;--&#x00A0;HERE in
      m/%s/</li>
  <li>Sequence (?P&lt;... not terminated in regex; marked by &lt;-- HERE in
      m/%s/</li>
  <li>Sequence (?P&gt;... not terminated in regex; marked by &lt;-- HERE in
      m/%s/</li>
</ul>
<p class="Pp"><i>New Warnings</i></p>
<ul class="Bl-bullet">
  <li>Assuming NOT a POSIX class since <span class="Li">%s</span> in regex;
      marked by &lt;-- HERE in m/%s/</li>
  <li>%s() is deprecated on :utf8 handles</li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Changes_to_Existing_Diagnostics"><a class="permalink" href="#Changes_to_Existing_Diagnostics">Changes
  to Existing Diagnostics</a></h2>
<ul class="Bl-bullet">
  <li>Accessing the <span class="Li">&quot;IO&quot;</span> part of a glob as
      <span class="Li">&quot;FILEHANDLE&quot;</span> instead of
      <span class="Li">&quot;IO&quot;</span> is no longer deprecated. It is
      discouraged to encourage uniformity (so that, for example, one can grep
      more easily) but it will not be removed. [perl #127060]
      &lt;https://rt.perl.org/Ticket/Display.html?id=127060&gt;</li>
  <li>The diagnostic <span class="Li">&quot;Hexadecimal float: internal
      error&quot;</span> has been changed to <span class="Li">&quot;Hexadecimal
      float: internal error (%s)&quot;</span> to include more information.</li>
  <li>Can't modify non-lvalue subroutine call of &amp;%s
    <p class="Pp">This error now reports the name of the non-lvalue subroutine
        you attempted to use as an lvalue.</p>
  </li>
  <li>When running out of memory during an attempt the increase the stack size,
      previously, perl would die using the cryptic message
      <span class="Li">&quot;panic: av_extend_guts() negative count
      (-9223372036854775681)&quot;</span>. This has been fixed to show the
      prettier message: Out of memory during stack extend</li>
</ul>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Configuration_and_Compilation"><a class="permalink" href="#Configuration_and_Compilation">Configuration
  and Compilation</a></h1>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;Configure&quot;</span> now acts as if the
      <span class="Li">&quot;-O&quot;</span> option is always passed, allowing
      command line options to override saved configuration. This should
      eliminate confusion when command line options are ignored for no obvious
      reason. <span class="Li">&quot;-O&quot;</span> is now permitted, but
      ignored.</li>
  <li>Bison 3.0 is now supported.</li>
  <li><i>Configure</i> no longer probes for <i>libnm</i> by default. Originally
      this was the &quot;New Math&quot; library, but the name has been re-used
      by the GNOME NetworkManager. [perl #127131]
      &lt;https://rt.perl.org/Ticket/Display.html?id=127131&gt;</li>
  <li>Added <i>Configure</i> probes for
      <span class="Li">&quot;newlocale&quot;</span>,
      <span class="Li">&quot;freelocale&quot;</span>, and
      <span class="Li">&quot;uselocale&quot;</span>.</li>
  <li><span class="Li">&quot;PPPort.so/PPPort.dll&quot;</span> no longer get
      installed, as they are not used by
      <span class="Li">&quot;PPPort.pm&quot;</span>, only by its test
    files.</li>
  <li>It is now possible to specify which compilation date to show on
      <span class="Li">&quot;perl -V&quot;</span> output, by setting the macro
      <span class="Li">&quot;PERL_BUILD_DATE&quot;</span>.</li>
  <li>Using the <span class="Li">&quot;NO_HASH_SEED&quot;</span> define in
      combination with the default hash algorithm
      <span class="Li">&quot;PERL_HASH_FUNC_ONE_AT_A_TIME_HARD&quot;</span>
      resulted in a fatal error while compiling the interpreter, since Perl
      5.17.10. This has been fixed.</li>
  <li><i>Configure</i> should handle spaces in paths a little better.</li>
  <li>No longer generate EBCDIC POSIX-BC tables. We don't believe anyone is
      using Perl and POSIX-BC at this time, and by not generating these tables
      it saves time during development, and makes the resulting tar ball
      smaller.</li>
  <li>The GNU Make makefile for Win32 now supports parallel builds. [perl
      #126632]</li>
  <li>You can now build perl with MSVC++ on Win32 using GNU Make. [perl
    #126632]</li>
  <li>The Win32 miniperl now has a real
      <span class="Li">&quot;getcwd&quot;</span> which increases build
      performance resulting in <span class="Li">&quot;getcwd()&quot;</span>
      being 605x faster in Win32 miniperl.</li>
  <li>Configure now takes <span class="Li">&quot;-Dusequadmath&quot;</span> into
      account when calculating the
      <span class="Li">&quot;alignbytes&quot;</span> configuration variable.
      Previously the mis-calculated
      <span class="Li">&quot;alignbytes&quot;</span> could cause alignment
      errors on debugging builds. [perl #127894]</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Testing"><a class="permalink" href="#Testing">Testing</a></h1>
<ul class="Bl-bullet">
  <li>A new test (<i>t/op/aassign.t</i>) has been added to test the list
      assignment operator <span class="Li">&quot;OP_AASSIGN&quot;</span>.</li>
  <li>Parallel building has been added to the dmake
      <span class="Li">&quot;makefile.mk&quot;</span> makefile. All Win32
      compilers are supported.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Platform_Support"><a class="permalink" href="#Platform_Support">Platform
  Support</a></h1>
<section class="Ss">
<h2 class="Ss" id="Platform-Specific_Notes"><a class="permalink" href="#Platform-Specific_Notes">Platform-Specific
  Notes</a></h2>
<dl class="Bl-tag">
  <dt>AmigaOS</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The AmigaOS port has been reintegrated into the main tree, based off of
      Perl 5.22.1.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>Cygwin</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Tests are more robust against unusual cygdrive prefixes. [perl #126834]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126834&gt;</dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>EBCDIC</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>UTF-EBCDIC extended</dt>
  <dd>UTF-EBCDIC is like UTF-8, but for EBCDIC platforms. It now has been
      extended so that it can represent code points up to 2 ** 64 - 1 on
      platforms with 64-bit words. This brings it into parity with UTF-8. This
      enhancement requires an incompatible change to the representation of code
      points in the range 2 ** 30 to 2 ** 31 -1 (the latter was the previous
      maximum representable code point). This means that a file that contains
      one of these code points, written out with previous versions of perl
      cannot be read in, without conversion, by a perl containing this change.
      We do not believe any such files are in existence, but if you do have one,
      submit a ticket at perlbug@perl.org &lt;mailto:perlbug@perl.org&gt;, and
      we will write a conversion script for you.</dd>
  <dt>EBCDIC &quot;cmp()&quot; and &quot;sort()&quot; fixed for UTF-EBCDIC
    strings</dt>
  <dd>Comparing two strings that were both encoded in UTF-8 (or more precisely,
      UTF-EBCDIC) did not work properly until now. Since
      <span class="Li">&quot;sort()&quot;</span> uses
      <span class="Li">&quot;cmp()&quot;</span>, this fixes that as well.</dd>
  <dt>EBCDIC &quot;tr///&quot; and &quot;y///&quot; fixed for &quot;\N{}&quot;,
    and &quot;use&#x00A0;utf8&quot; ranges</dt>
  <dd>Perl v5.22 introduced the concept of portable ranges to regular expression
      patterns. A portable range matches the same set of characters no matter
      what platform is being run on. This concept is now extended to
      <span class="Li">&quot;tr///&quot;</span>. See
      <span class="Li">&quot;tr///&quot;</span>.
    <p class="Pp">There were also some problems with these operations under
        <span class="Li">&quot;use&#x00A0;utf8&quot;</span>, which are now
      fixed</p>
  </dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>FreeBSD</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Use the <span class="Li">&quot;fdclose()&quot;</span> function from
      FreeBSD if it is available. [perl #126847]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126847&gt;</dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>IRIX</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>Under some circumstances IRIX stdio
      <span class="Li">&quot;fgetc()&quot;</span> and
      <span class="Li">&quot;fread()&quot;</span> set the errno to
      <span class="Li">&quot;ENOENT&quot;</span>, which made no sense according
      to either IRIX or POSIX docs. Errno is now cleared in such cases. [perl
      #123977] &lt;https://rt.perl.org/Ticket/Display.html?id=123977&gt;</li>
  <li>Problems when multiplying long doubles by infinity have been fixed. [perl
      #126396] &lt;https://rt.perl.org/Ticket/Display.html?id=126396&gt;</li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>MacOS X</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>Until now OS X builds of perl have specified a link target of 10.3
      (Panther, 2003) but have not specified a compiler target. From now on,
      builds of perl on OS X 10.6 or later (Snow Leopard, 2008) by default
      capture the current OS X version and specify that as the explicit build
      target in both compiler and linker flags, thus preserving binary
      compatibility for extensions built later regardless of changes in OS X,
      SDK, or compiler and linker versions. To override the default value used
      in the build and preserved in the flags, specify
      <span class="Li">&quot;export MACOSX_DEPLOYMENT_TARGET=10.N&quot;</span>
      before configuring and building perl, where 10.N is the version of OS X
      you wish to target. In OS X 10.5 or earlier there is no change to the
      behavior present when those systems were current; the link target is still
      OS X 10.3 and there is no explicit compiler target.</li>
  <li>Builds with both -DDEBUGGING and threading enabled would fail with a
      &quot;panic: free from wrong pool&quot; error when built or tested from
      Terminal on OS X. This was caused by perl's internal management of the
      environment conflicting with an atfork handler using the libc
      <span class="Li">&quot;setenv()&quot;</span> function to update the
      environment.
    <p class="Pp">Perl now uses
        <span class="Li">&quot;setenv()&quot;</span>/<span class="Li">&quot;unsetenv()&quot;</span>
        to update the environment on OS X. [perl #126240]
        &lt;https://rt.perl.org/Ticket/Display.html?id=126240&gt;</p>
  </li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>Solaris</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>All Solaris variants now build a shared libperl
    <p class="Pp">Solaris and variants like OpenIndiana now always build with
        the shared Perl library (Configure -Duseshrplib). This was required for
        the OpenIndiana builds, but this has also been the setting for
        Oracle/Sun Perl builds for several years.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>Tru64</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Workaround where Tru64 balks when prototypes are listed as
      <span class="Li">&quot;PERL_STATIC_INLINE&quot;</span>, but where the test
      is build with
      <span class="Li">&quot;-DPERL_NO_INLINE_FUNCTIONS&quot;</span>.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>VMS</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>On VMS, the math function prototypes in
      <span class="Li">&quot;math.h&quot;</span> are now visible under C++. Now
      building the POSIX extension with C++ will no longer crash.</li>
  <li>VMS has had
      <span class="Li">&quot;setenv&quot;</span>/<span class="Li">&quot;unsetenv&quot;</span>
      since v7.0 (released in 1996),
      <span class="Li">&quot;Perl_vmssetenv&quot;</span> now always uses
      <span class="Li">&quot;setenv&quot;</span>/<span class="Li">&quot;unsetenv&quot;</span>.</li>
  <li>Perl now implements its own <span class="Li">&quot;killpg&quot;</span> by
      scanning for processes in the specified process group, which may not mean
      exactly the same thing as a Unix process group, but allows us to send a
      signal to a parent (or master) process and all of its sub-processes. At
      the perl level, this means we can now send a negative pid like so:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    kill SIGKILL, -$pid;
    </pre>
    <p class="Pp">to signal all processes in the same group as
        <span class="Li">$pid</span>.</p>
  </li>
  <li>For those <span class="Li">%ENV</span> elements based on the CRTL environ
      array, we've always preserved case when setting them but did look-ups only
      after upcasing the key first, which made lower- or mixed-case entries go
      missing. This problem has been corrected by making
      <span class="Li">%ENV</span> elements derived from the environ array
      case-sensitive on look-up as well as case-preserving on store.</li>
  <li>Environment look-ups for <span class="Li">&quot;PERL5LIB&quot;</span> and
      <span class="Li">&quot;PERLLIB&quot;</span> previously only considered
      logical names, but now consider all sources of
      <span class="Li">%ENV</span> as determined by
      <span class="Li">&quot;PERL_ENV_TABLES&quot;</span> and as documented in
      &quot;%ENV&quot; in perlvms.</li>
  <li>The minimum supported version of VMS is now v7.3-2, released in 2003. As a
      side effect of this change, VAX is no longer supported as the terminal
      release of OpenVMS VAX was v7.3 in 2001.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>Win32</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>A new build option <span class="Li">&quot;USE_NO_REGISTRY&quot;</span> has
      been added to the makefiles. This option is off by default, meaning the
      default is to do Windows registry lookups. This option stops Perl from
      looking inside the registry for anything. For what values are looked up in
      the registry see perlwin32. Internally, in C, the name of this option is
      <span class="Li">&quot;WIN32_NO_REGISTRY&quot;</span>.</li>
  <li>The behavior of Perl using
      <span class="Li">&quot;HKEY_CURRENT_USER\Software\Perl&quot;</span> and
      <span class="Li">&quot;HKEY_LOCAL_MACHINE\Software\Perl&quot;</span> to
      lookup certain values, including <span class="Li">%ENV</span> vars
      starting with <span class="Li">&quot;PERL&quot;</span> has changed.
      Previously, the 2 keys were checked for entries at all times through the
      perl process's life time even if they did not exist. For performance
      reasons, now, if the root key (i.e.
      <span class="Li">&quot;HKEY_CURRENT_USER\Software\Perl&quot;</span> or
      <span class="Li">&quot;HKEY_LOCAL_MACHINE\Software\Perl&quot;</span>) does
      not exist at process start time, it will not be checked again for
      <span class="Li">%ENV</span> override entries for the remainder of the
      perl process's life. This more closely matches Unix behavior in that the
      environment is copied or inherited on startup and changing the variable in
      the parent process or another process or editing <i>.bashrc</i> will not
      change the environmental variable in other existing, running,
    processes.</li>
  <li>One glob fetch was removed for each <span class="Li">&quot;-X&quot;</span>
      or <span class="Li">&quot;stat&quot;</span> call whether done from Perl
      code or internally from Perl's C code. The glob being looked up was
      <span class="Li">&quot;${^WIN32_SLOPPY_STAT}&quot;</span> which is a
      special variable. This makes <span class="Li">&quot;-X&quot;</span> and
      <span class="Li">&quot;stat&quot;</span> slightly faster.</li>
  <li>During miniperl's process startup, during the build process, 4 to 8 IO
      calls related to the process starting <i>.pl</i> and the
      <i>buildcustomize.pl</i> file were removed from the code opening and
      executing the first 1 or 2 <i>.pl</i> files.</li>
  <li>Builds using Microsoft Visual C++ 2003 and earlier no longer produce an
      &quot;INTERNAL COMPILER ERROR&quot; message. [perl #126045]</li>
  <li>Visual C++ 2013 builds will now execute on XP and higher. Previously they
      would only execute on Vista and higher.</li>
  <li>You can now build perl with GNU Make and GCC. [perl #123440]</li>
  <li><span class="Li">&quot;truncate($filename, $size)&quot;</span> now works
      for files over 4GB in size. [perl #125347]</li>
  <li>Parallel building has been added to the dmake
      <span class="Li">&quot;makefile.mk&quot;</span> makefile. All Win32
      compilers are supported.</li>
  <li>Building a 64-bit perl with a 64-bit GCC but a 32-bit gmake would result
      in an invalid <span class="Li">$Config{archname}</span> for the resulting
      perl. [perl #127584]</li>
  <li>Errors set by Winsock functions are now put directly into
      <span class="Li">$^E</span>, and the relevant
      <span class="Li">&quot;WSAE*&quot;</span> error codes are now exported
      from the Errno and POSIX modules for testing this against.
    <p class="Pp">The previous behavior of putting the errors (converted to
        POSIX-style <span class="Li">&quot;E*&quot;</span> error codes since
        Perl 5.20.0) into <span class="Li">$!</span> was buggy due to the
        non-equivalence of like-named Winsock and POSIX error constants, a
        relationship between which has unfortunately been established in one way
        or another since Perl 5.8.0.</p>
    <p class="Pp">The new behavior provides a much more robust solution for
        checking Winsock errors in portable software without accidentally
        matching POSIX tests that were intended for other OSes and may have
        different meanings for Winsock.</p>
    <p class="Pp">The old behavior is currently retained, warts and all, for
        backwards compatibility, but users are encouraged to change any code
        that tests <span class="Li">$!</span> against
        <span class="Li">&quot;E*&quot;</span> constants for Winsock errors to
        instead test <span class="Li">$^E</span> against
        <span class="Li">&quot;WSAE*&quot;</span> constants. After a suitable
        deprecation period, the old behavior may be removed, leaving
        <span class="Li">$!</span> unchanged after Winsock function calls, to
        avoid any possible confusion over which error variable to check.</p>
  </li>
</ul>
</div>
<div class="Bd-indent"></div>
<dl class="Bl-tag">
  <dt>ppc64el</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>floating point</dt>
  <dd>The floating point format of ppc64el (Debian naming for little-endian
      PowerPC) is now detected correctly.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Internal_Changes"><a class="permalink" href="#Internal_Changes">Internal
  Changes</a></h1>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>The implementation of perl's context stack system, and its internal API,
      have been heavily reworked. Note that no significant changes have been
      made to any external APIs, but XS code which relies on such internal
      details may need to be fixed. The main changes are:</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>The <span class="Li">&quot;PUSHBLOCK()&quot;</span>,
      <span class="Li">&quot;POPSUB()&quot;</span> etc. macros have been
      replaced with static inline functions such as
      <span class="Li">&quot;cx_pushblock()&quot;</span>,
      <span class="Li">&quot;cx_popsub()&quot;</span> etc. These use function
      args rather than implicitly relying on local vars such as
      <span class="Li">&quot;gimme&quot;</span> and
      <span class="Li">&quot;newsp&quot;</span> being available. Also their
      functionality has changed: in particular,
      <span class="Li">&quot;cx_popblock()&quot;</span> no longer decrements
      <span class="Li">&quot;cxstack_ix&quot;</span>. The ordering of the steps
      in the <span class="Li">&quot;pp_leave*&quot;</span> functions involving
      <span class="Li">&quot;cx_popblock()&quot;</span>,
      <span class="Li">&quot;cx_popsub()&quot;</span> etc. has changed. See the
      new documentation, &quot;Dynamic Scope and the Context Stack&quot; in
      perlguts, for details on how to use them.</li>
  <li>Various macros, which now consistently have a CX_ prefix, have been added:
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  CX_CUR(), CX_LEAVE_SCOPE(), CX_POP()
    </pre>
    <p class="Pp">or renamed:</p>
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  CX_POP_SAVEARRAY(), CX_DEBUG(), CX_PUSHSUBST(), CX_POPSUBST()
    </pre>
  </li>
  <li><span class="Li">&quot;cx_pushblock()&quot;</span> now saves
      <span class="Li">&quot;PL_savestack_ix&quot;</span> and
      <span class="Li">&quot;PL_tmps_floor&quot;</span>, so
      <span class="Li">&quot;pp_enter*&quot;</span> and
      <span class="Li">&quot;pp_leave*&quot;</span> no longer do
    <p class="Pp"><span class="Li"></span></p>
    <pre>
  ENTER; SAVETMPS; ....; LEAVE
    </pre>
  </li>
  <li><span class="Li">&quot;cx_popblock()&quot;</span> now also restores
      <span class="Li">&quot;PL_curpm&quot;</span>.</li>
  <li>In <span class="Li">&quot;dounwind()&quot;</span> for every context type,
      the current savestack frame is now processed before each context is
      popped; formerly this was only done for sub-like context frames. This
      action has been removed from
      <span class="Li">&quot;cx_popsub()&quot;</span> and placed into its own
      macro, <span class="Li">&quot;CX_LEAVE_SCOPE(cx)&quot;</span>, which must
      be called before <span class="Li">&quot;cx_popsub()&quot;</span> etc.
    <p class="Pp"><span class="Li">&quot;dounwind()&quot;</span> now also does a
        <span class="Li">&quot;cx_popblock()&quot;</span> on the last popped
        frame (formerly it only did the
        <span class="Li">&quot;cx_popsub()&quot;</span> etc. actions on each
        frame).</p>
  </li>
  <li>The temps stack is now freed on scope exit; previously, temps created
      during the last statement of a block wouldn't be freed until the next
      <span class="Li">&quot;nextstate&quot;</span> following the block (apart
      from an existing hack that did this for recursive subs in scalar context);
      and in something like <span class="Li">&quot;f(g())&quot;</span>, the
      temps created by the last statement in
      <span class="Li">&quot;g()&quot;</span> would formerly not be freed until
      the statement following the return from
      <span class="Li">&quot;f()&quot;</span>.</li>
  <li>Most values that were saved on the savestack on scope entry are now saved
      in suitable new fields in the context struct, and saved and restored
      directly by <span class="Li">&quot;cx_pushfoo()&quot;</span> and
      <span class="Li">&quot;cx_popfoo()&quot;</span>, which is much
    faster.</li>
  <li>Various context struct fields have been added, removed or modified.</li>
  <li>The handling of <span class="Li">@_</span> in
      <span class="Li">&quot;cx_pushsub()&quot;</span> and
      <span class="Li">&quot;cx_popsub()&quot;</span> has been considerably
      tidied up, including removing the
      <span class="Li">&quot;argarray&quot;</span> field from the context
      struct, and extracting out some common (but rarely used) code into a
      separate function, <span class="Li">&quot;clear_defarray()&quot;</span>.
      Also, useful subsets of <span class="Li">&quot;cx_popsub()&quot;</span>
      which had been unrolled in places like
      <span class="Li">&quot;pp_goto&quot;</span> have been gathered into the
      new functions <span class="Li">&quot;cx_popsub_args()&quot;</span> and
      <span class="Li">&quot;cx_popsub_common()&quot;</span>.</li>
  <li><span class="Li">&quot;pp_leavesub&quot;</span> and
      <span class="Li">&quot;pp_leavesublv&quot;</span> now use the same
      function as the rest of the
      <span class="Li">&quot;pp_leave*&quot;</span>'s to process return
    args.</li>
  <li><span class="Li">&quot;CXp_FOR_PAD&quot;</span> and
      <span class="Li">&quot;CXp_FOR_GV&quot;</span> flags have been added, and
      <span class="Li">&quot;CXt_LOOP_FOR&quot;</span> has been split into
      <span class="Li">&quot;CXt_LOOP_LIST&quot;</span>,
      <span class="Li">&quot;CXt_LOOP_ARY&quot;</span>.</li>
  <li>Some variables formerly declared by
      <span class="Li">&quot;dMULTICALL&quot;</span> (but not documented) have
      been removed.</li>
</ul>
</div>
<div class="Bd-indent"></div>
<ul class="Bl-bullet">
  <li>The obscure <span class="Li">&quot;PL_timesbuf&quot;</span> variable,
      effectively a vestige of Perl 1, has been removed. It was documented as
      deprecated in Perl 5.20, with a statement that it would be removed early
      in the 5.21.x series; that has now finally happened. [perl #121351]
      &lt;https://rt.perl.org/Ticket/Display.html?id=121351&gt;</li>
  <li>An unwarranted assertion in
      <span class="Li">&quot;Perl_newATTRSUB_x()&quot;</span> has been removed.
      If a stub subroutine definition with a prototype has been seen, then any
      subsequent stub (or definition) of the same subroutine with an attribute
      was causing an assertion failure because of a null pointer. [perl #126845]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126845&gt;</li>
  <li><span class="Li">&quot;::&quot;</span> has been replaced by
      <span class="Li">&quot;__&quot;</span> in
      <span class="Li">&quot;ExtUtils::ParseXS&quot;</span>, like it's done for
      parameters/return values. This is more consistent, and simplifies writing
      XS code wrapping C++ classes into a nested Perl namespace (it requires
      only a typedef for <span class="Li">&quot;Foo__Bar&quot;</span> rather
      than two, one for <span class="Li">&quot;Foo_Bar&quot;</span> and the
      other for <span class="Li">&quot;Foo::Bar&quot;</span>).</li>
  <li>The <span class="Li">&quot;to_utf8_case()&quot;</span> function is now
      deprecated. Instead use <span class="Li">&quot;toUPPER_utf8&quot;</span>,
      <span class="Li">&quot;toTITLE_utf8&quot;</span>,
      <span class="Li">&quot;toLOWER_utf8&quot;</span>, and
      <span class="Li">&quot;toFOLD_utf8&quot;</span>. (See
      &lt;http://nntp.perl.org/group/perl.perl5.porters/233287&gt;.)</li>
  <li>Perl core code and the threads extension have been annotated so that, if
      Perl is configured to use threads, then during compile-time clang (3.6 or
      later) will warn about suspicious uses of mutexes. See
      &lt;http://clang.llvm.org/docs/ThreadSafetyAnalysis.html&gt; for more
      information.</li>
  <li>The <span class="Li">&quot;signbit()&quot;</span> emulation has been
      enhanced. This will help older and/or more exotic platforms or
      configurations.</li>
  <li>Most EBCDIC-specific code in the core has been unified with non-EBCDIC
      code, to avoid repetition and make maintenance easier.</li>
  <li>MSWin32 code for <span class="Li">$^X</span> has been moved out of the
      <i>win32</i> directory to <i>caretx.c</i>, where other operating systems
      set that variable.</li>
  <li><span class="Li">&quot;sv_ref()&quot;</span> is now part of the API.</li>
  <li>&quot;sv_backoff&quot; in perlapi had its return type changed from
      <span class="Li">&quot;int&quot;</span> to
      <span class="Li">&quot;void&quot;</span>. It previously has always
      returned <span class="Li">0</span> since Perl 5.000 stable but that was
      undocumented. Although <span class="Li">&quot;sv_backoff&quot;</span> is
      marked as public API, XS code is not expected to be impacted since the
      proper API call would be through public API
      <span class="Li">&quot;sv_setsv(sv, &amp;PL_sv_undef)&quot;</span>, or
      quasi-public <span class="Li">&quot;SvOOK_off&quot;</span>, or non-public
      <span class="Li">&quot;SvOK_off&quot;</span> calls, and the return value
      of <span class="Li">&quot;sv_backoff&quot;</span> was previously a
      meaningless constant that can be rewritten as
      <span class="Li">&quot;(sv_backoff(sv),0)&quot;</span>.</li>
  <li>The <span class="Li">&quot;EXTEND&quot;</span> and
      <span class="Li">&quot;MEXTEND&quot;</span> macros have been improved to
      avoid various issues with integer truncation and wrapping. In particular,
      some casts formerly used within the macros have been removed. This means
      for example that passing an unsigned
      <span class="Li">&quot;nitems&quot;</span> argument is likely to raise a
      compiler warning now (it's always been documented to require a signed
      value; formerly int, lately SSize_t).</li>
  <li><span class="Li">&quot;PL_sawalias&quot;</span> and
      <span class="Li">&quot;GPf_ALIASED_SV&quot;</span> have been removed.</li>
  <li><span class="Li">&quot;GvASSIGN_GENERATION&quot;</span> and
      <span class="Li">&quot;GvASSIGN_GENERATION_set&quot;</span> have been
      removed.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Selected_Bug_Fixes"><a class="permalink" href="#Selected_Bug_Fixes">Selected
  Bug Fixes</a></h1>
<ul class="Bl-bullet">
  <li>It now works properly to specify a user-defined property, such as
    <p class="Pp"><span class="Li"></span></p>
    <pre>
 qr/\p{mypkg1::IsMyProperty}/i
    </pre>
    <p class="Pp">with <span class="Li">&quot;/i&quot;</span> caseless matching,
        an explicit package name, and <i>IsMyProperty</i> not defined at the
        time of the pattern compilation.</p>
  </li>
  <li>Perl's <span class="Li">&quot;memcpy()&quot;</span>,
      <span class="Li">&quot;memmove()&quot;</span>,
      <span class="Li">&quot;memset()&quot;</span> and
      <span class="Li">&quot;memcmp()&quot;</span> fallbacks are now more
      compatible with the originals. [perl #127619]</li>
  <li>Fixed the issue where a <span class="Li">&quot;s///r&quot;</span>) with
      <b>-DPERL_NO_COW</b> attempts to modify the source SV, resulting in the
      program dying. [perl #127635]</li>
  <li>Fixed an EBCDIC-platform-only case where a pattern could fail to match.
      This occurred when matching characters from the set of C1 controls when
      the target matched string was in UTF-8.</li>
  <li>Narrow the filename check in <i>strict.pm</i> and <i>warnings.pm</i>.
      Previously, it assumed that if the filename (without the <i>.pmc?</i>
      extension) differed from the package name, if was a misspelled use
      statement (i.e. <span class="Li">&quot;use Strict&quot;</span> instead of
      <span class="Li">&quot;use strict&quot;</span>). We now check whether
      there's really a miscapitalization happening, and not some other
    issue.</li>
  <li>Turn an assertion into a more user friendly failure when parsing regexes.
      [perl #127599]</li>
  <li>Correctly raise an error when trying to compile patterns with unterminated
      character classes while there are trailing backslashes. [perl
    #126141].</li>
  <li>Line numbers larger than 2**31-1 but less than 2**32 are no longer
      returned by <span class="Li">&quot;caller()&quot;</span> as negative
      numbers. [perl #126991]</li>
  <li><span class="Li">&quot;unless ( </span><i>assignment</i><span class="Li">
      )&quot;</span> now properly warns when syntax warnings are enabled. [perl
      #127122]</li>
  <li>Setting an <span class="Li">&quot;ISA&quot;</span> glob to an array
      reference now properly adds <span class="Li">&quot;isaelem&quot;</span>
      magic to any existing elements. Previously modifying such an element would
      not update the ISA cache, so method calls would call the wrong function.
      Perl would also crash if the <span class="Li">&quot;ISA&quot;</span> glob
      was destroyed, since new code added in 5.23.7 would try to release the
      <span class="Li">&quot;isaelem&quot;</span> magic from the elements. [perl
      #127351]</li>
  <li>If a here-doc was found while parsing another operator, the parser had
      already read end of file, and the here-doc was not terminated, perl could
      produce an assertion or a segmentation fault. This now reliably complains
      about the unterminated here-doc. [perl #125540]</li>
  <li><span class="Li">&quot;untie()&quot;</span> would sometimes return the
      last value returned by the <span class="Li">&quot;UNTIE()&quot;</span>
      handler as well as it's normal value, messing up the stack. [perl
    #126621]</li>
  <li>Fixed an operator precedence problem when <span class="Li">&quot;
      castflags &amp; 2&quot;</span> is true. [perl #127474]</li>
  <li>Caching of DESTROY methods could result in a non-pointer or a non-STASH
      stored in the <span class="Li">&quot;SvSTASH()&quot;</span> slot of a
      stash, breaking the B <span class="Li">&quot;STASH()&quot;</span> method.
      The DESTROY method is now cached in the MRO metadata for the stash. [perl
      #126410]</li>
  <li>The AUTOLOAD method is now called when searching for a DESTROY method, and
      correctly sets <span class="Li">$AUTOLOAD</span> too. [perl #124387] [perl
      #127494]</li>
  <li>Avoid parsing beyond the end of the buffer when processing a
      <span class="Li">&quot;#line&quot;</span> directive with no filename.
      [perl #127334]</li>
  <li>Perl now raises a warning when a regular expression pattern looks like it
      was supposed to contain a POSIX class, like
      <span class="Li">&quot;qr/[[:alpha:]]/&quot;</span>, but there was some
      slight defect in its specification which causes it to instead be treated
      as a regular bracketed character class. An example would be missing the
      second colon in the above like this:
      <span class="Li">&quot;qr/[[:alpha]]/&quot;</span>. This compiles to match
      a sequence of two characters. The second is
      <span class="Li">&quot;]&quot;</span>, and the first is any of:
      <span class="Li">&quot;[&quot;</span>,
      <span class="Li">&quot;:&quot;</span>,
      <span class="Li">&quot;a&quot;</span>,
      <span class="Li">&quot;h&quot;</span>,
      <span class="Li">&quot;l&quot;</span>, or
      <span class="Li">&quot;p&quot;</span>. This is unlikely to be the intended
      meaning, and now a warning is raised. No warning is raised unless the
      specification is very close to one of the 14 legal POSIX classes. (See
      &quot;POSIX Character Classes&quot; in perlrecharclass.) [perl #8904]</li>
  <li>Certain regex patterns involving a complemented POSIX class in an inverted
      bracketed character class, and matching something else optionally would
      improperly fail to match. An example of one that could fail is
      <span class="Li">&quot;qr/_?[^\Wbar]\x{100}/&quot;</span>. This has been
      fixed. [perl #127537]</li>
  <li>Perl 5.22 added support to the C99 hexadecimal floating point notation,
      but sometimes misparses hex floats. This has been fixed. [perl
    #127183]</li>
  <li>A regression that allowed undeclared barewords in hash keys to work
      despite strictures has been fixed. [perl #126981]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126981&gt;</li>
  <li>Calls to the placeholder <span class="Li">&amp;PL_sv_yes</span> used
      internally when an <span class="Li">&quot;import()&quot;</span> or
      <span class="Li">&quot;unimport()&quot;</span> method isn't found now
      correctly handle scalar context. [perl #126042]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126042&gt;</li>
  <li>Report more context when we see an array where we expect to see an
      operator and avoid an assertion failure. [perl #123737]
      &lt;https://rt.perl.org/Ticket/Display.html?id=123737&gt;</li>
  <li>Modifying an array that was previously a package
      <span class="Li">@ISA</span> no longer causes assertion failures or
      crashes. [perl #123788]
      &lt;https://rt.perl.org/Ticket/Display.html?id=123788&gt;</li>
  <li>Retain binary compatibility across plain and DEBUGGING perl builds. [perl
      #127212] &lt;https://rt.perl.org/Ticket/Display.html?id=127212&gt;</li>
  <li>Avoid leaking memory when setting <span class="Li">$ENV{foo}</span> on
      darwin. [perl #126240]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126240&gt;</li>
  <li><span class="Li">&quot;/...\G/&quot;</span> no longer crashes on utf8
      strings. When <span class="Li">&quot;\G&quot;</span> is a fixed number of
      characters from the start of the regex, perl needs to count back that many
      characters from the current <span class="Li">&quot;pos()&quot;</span>
      position and start matching from there. However, it was counting back
      bytes rather than characters, which could lead to panics on utf8
    strings.</li>
  <li>In some cases operators that return integers would return negative
      integers as large positive integers. [perl #126635]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126635&gt;</li>
  <li>The <span class="Li">&quot;pipe()&quot;</span> operator would assert for
      DEBUGGING builds instead of producing the correct error message. The
      condition asserted on is detected and reported on correctly without the
      assertions, so the assertions were removed. [perl #126480]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126480&gt;</li>
  <li>In some cases, failing to parse a here-doc would attempt to use freed
      memory. This was caused by a pointer not being restored correctly. [perl
      #126443] &lt;https://rt.perl.org/Ticket/Display.html?id=126443&gt;</li>
  <li><span class="Li">&quot;@x = sort { *a = 0; $a &lt;=&gt; $b } 0 ..
      1&quot;</span> no longer frees the GP for *a before restoring its SV slot.
      [perl #124097]
    &lt;https://rt.perl.org/Ticket/Display.html?id=124097&gt;</li>
  <li>Multiple problems with the new hexadecimal floating point printf format
      <span class="Li">%a</span> were fixed: [perl #126582]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126582&gt;, [perl #126586]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126586&gt;, [perl #126822]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126822&gt;</li>
  <li>Calling <span class="Li">&quot;mg_set()&quot;</span> in
      <span class="Li">&quot;leave_scope()&quot;</span> no longer leaks.</li>
  <li>A regression from Perl v5.20 was fixed in which debugging output of
      regular expression compilation was wrong. (The pattern was correctly
      compiled, but what got displayed for it was wrong.)</li>
  <li><span class="Li">&quot;\b{sb}&quot;</span> works much better. In Perl
      v5.22.0, this new construct didn't seem to give the expected results, yet
      passed all the tests in the extensive suite furnished by Unicode. It turns
      out that it was because these were short input strings, and the failures
      had to do with longer inputs.</li>
  <li>Certain syntax errors in &quot;Extended Bracketed Character Classes&quot;
      in perlrecharclass caused panics instead of the proper error message. This
      has now been fixed. [perl #126481]</li>
  <li>Perl 5.20 added a message when a quantifier in a regular expression was
      useless, but then caused the parser to skip it; this caused the surplus
      quantifier to be silently ignored, instead of throwing an error. This is
      now fixed. [perl #126253]</li>
  <li>The switch to building non-XS modules last in win32/makefile.mk
      (introduced by design as part of the changes to enable parallel building)
      caused the build of POSIX to break due to problems with the version
      module. This is now fixed.</li>
  <li>Improved parsing of hex float constants.</li>
  <li>Fixed an issue with <span class="Li">&quot;pack&quot;</span> where
      <span class="Li">&quot;pack &quot;H&quot;&quot;</span> (and
      <span class="Li">&quot;pack &quot;h&quot;&quot;</span>) could read past
      the source when given a non-utf8 source, and a utf8 target. [perl
    #126325]</li>
  <li>Fixed several cases where perl would abort due to a segmentation fault, or
      a C-level assert. [perl #126615], [perl #126602], [perl #126193].</li>
  <li>There were places in regular expression patterns where comments
      (<span class="Li">&quot;(?#...)&quot;</span>) weren't allowed, but should
      have been. This is now fixed. [perl #116639]
      &lt;https://rt.perl.org/Ticket/Display.html?id=116639&gt;</li>
  <li>Some regressions from Perl 5.20 have been fixed, in which some syntax
      errors in <span class="Li">&quot;(?[...])&quot;</span> constructs within
      regular expression patterns could cause a segfault instead of a proper
      error message. [perl #126180]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126180&gt; [perl #126404]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126404&gt;</li>
  <li>Another problem with <span class="Li">&quot;(?[...])&quot;</span>
      constructs has been fixed wherein things like
      <span class="Li">&quot;\c]&quot;</span> could cause panics. [perl #126181]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126181&gt;</li>
  <li>Some problems with attempting to extend the perl stack to around 2G or 4G
      entries have been fixed. This was particularly an issue on 32-bit perls
      built to use 64-bit integers, and was easily noticeable with the list
      repetition operator, e.g.
    <p class="Pp"><span class="Li"></span></p>
    <pre>
    @a = (1) x $big_number
    </pre>
    <p class="Pp">Formerly perl may have crashed, depending on the exact value
        of <span class="Li">$big_number</span>; now it will typically raise an
        exception. [perl #125937]
        &lt;https://rt.perl.org/Ticket/Display.html?id=125937&gt;</p>
  </li>
  <li>In a regex conditional expression
      <span class="Li">&quot;(?(condition)yes-pattern|no-pattern)&quot;</span>,
      if the condition is <span class="Li">&quot;(?!)&quot;</span> then perl
      failed the match outright instead of matching the no-pattern. This has
      been fixed. [perl #126222]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126222&gt;</li>
  <li>The special backtracking control verbs
      <span class="Li">&quot;(*VERB:ARG)&quot;</span> now all allow an optional
      argument and set
      <span class="Li">&quot;REGERROR&quot;</span>/<span class="Li">&quot;REGMARK&quot;</span>
      appropriately as well. [perl #126186]
      &lt;https://rt.perl.org/Ticket/Display.html?id=126186&gt;</li>
  <li>Several bugs, including a segmentation fault, have been fixed with the
      boundary checking constructs (introduced in Perl 5.22)
      <span class="Li">&quot;\b{gcb}&quot;</span>,
      <span class="Li">&quot;\b{sb}&quot;</span>,
      <span class="Li">&quot;\b{wb}&quot;</span>,
      <span class="Li">&quot;\B{gcb}&quot;</span>,
      <span class="Li">&quot;\B{sb}&quot;</span>, and
      <span class="Li">&quot;\B{wb}&quot;</span>. All the
      <span class="Li">&quot;\B{}&quot;</span> ones now match an empty string;
      none of the <span class="Li">&quot;\b{}&quot;</span> ones do. [perl
      #126319] &lt;https://rt.perl.org/Ticket/Display.html?id=126319&gt;</li>
  <li>Duplicating a closed file handle for write no longer creates a filename of
      the form <i>GLOB(0xXXXXXXXX)</i>. [perl #125115]</li>
  <li>Warning fatality is now ignored when rewinding the stack. This prevents
      infinite recursion when the now fatal error also causes rewinding of the
      stack. [perl #123398]</li>
  <li>In perl v5.22.0, the logic changed when parsing a numeric parameter to the
      -C option, such that the successfully parsed number was not saved as the
      option value if it parsed to the end of the argument. [perl #125381]</li>
  <li>The PadlistNAMES macro is an lvalue again.</li>
  <li>Zero -DPERL_TRACE_OPS memory for sub-threads.
    <p class="Pp"><span class="Li">&quot;perl_clone_using()&quot;</span> was
        missing Zero init of PL_op_exec_cnt[]. This caused sub-threads in
        threaded -DPERL_TRACE_OPS builds to spew exceedingly large op-counts at
        destruct. These counts would print <span class="Li">%x</span> as
        &quot;ABABABAB&quot;, clearly a mem-poison value.</p>
  </li>
  <li>A leak in the XS typemap caused one scalar to be leaked each time a
      <span class="Li">&quot;FILE *&quot;</span> or a
      <span class="Li">&quot;PerlIO *&quot;</span> was
      <span class="Li">&quot;OUTPUT:&quot;</span>ed or imported to Perl, since
      perl 5.000. These particular typemap entries are thought to be extremely
      rarely used by XS modules. [perl #124181]</li>
  <li><span class="Li">&quot;alarm()&quot;</span> and
      <span class="Li">&quot;sleep()&quot;</span> will now warn if the argument
      is a negative number and return undef. Previously they would pass the
      negative value to the underlying C function which may have set up a timer
      with a surprising value.</li>
  <li>Perl can again be compiled with any Unicode version. This used to (mostly)
      work, but was lost in v5.18 through v5.20. The property
      <span class="Li">&quot;Name_Alias&quot;</span> did not exist prior to
      Unicode 5.0. Unicode::UCD incorrectly said it did. This has been
    fixed.</li>
  <li>Very large code-points (beyond Unicode) in regular expressions no longer
      cause a buffer overflow in some cases when converted to UTF-8. [perl
      #125826] &lt;https://rt.perl.org/Ticket/Display.html?id=125826&gt;</li>
  <li>The integer overflow check for the range operator (...) in list context
      now correctly handles the case where the size of the range is larger than
      the address space. This could happen on 32-bits with -Duse64bitint. [perl
      #125781] &lt;https://rt.perl.org/Ticket/Display.html?id=125781&gt;</li>
  <li>A crash with <span class="Li">&quot;%::=();
      J-&gt;${\&quot;::&quot;}&quot;</span> has been fixed. [perl #125541]
      &lt;https://rt.perl.org/Ticket/Display.html?id=125541&gt;</li>
  <li><span class="Li">&quot;qr/(?[ () ])/&quot;</span> no longer segfaults,
      giving a syntax error message instead. [perl #125805]</li>
  <li>Regular expression possessive quantifier v5.20 regression now fixed.
      <span class="Li">&quot;qr/&quot;</span><i>PAT</i><span class="Li">&quot;{&quot;</span><i>min</i>,<i>max</i><span class="Li">&quot;}+&quot;</span><span class="Li">&quot;/&quot;</span>
      is supposed to behave identically to
      <span class="Li">&quot;qr/(?&gt;&quot;</span><i>PAT</i><span class="Li">&quot;{&quot;</span><i>min</i>,<i>max</i><span class="Li">&quot;})/&quot;</span>.
      Since v5.20, this didn't work if <i>min</i> and <i>max</i> were equal.
      [perl #125825]</li>
  <li><span class="Li">&quot;BEGIN &lt;&gt;&quot;</span> no longer segfaults and
      properly produces an error message. [perl #125341]</li>
  <li>In <span class="Li">&quot;tr///&quot;</span> an illegal backwards range
      like <span class="Li">&quot;tr/\x{101}-\x{100}//&quot;</span> was not
      always detected, giving incorrect results. This is now fixed.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="Acknowledgements"><a class="permalink" href="#Acknowledgements">Acknowledgements</a></h1>
Perl 5.24.0 represents approximately 11 months of development since Perl 5.24.0
  and contains approximately 360,000 lines of changes across 1,800 files from 75
  authors.
<p class="Pp">Excluding auto-generated files, documentation and release tools,
    there were approximately 250,000 lines of changes to 1,200 .pm, .t, .c and
    .h files.</p>
<p class="Pp">Perl continues to flourish into its third decade thanks to a
    vibrant community of users and developers. The following people are known to
    have contributed the improvements that became Perl 5.24.0:</p>
<p class="Pp">Aaron Crane, Aaron Priven, Abigail, Achim Gratz, Alexander
    D'Archangel, Alex Vandiver, Andreas Koenig, Andy Broad, Andy Dougherty,
    Aristotle Pagaltzis, Chase Whitener, Chas. Owens, Chris 'BinGOs' Williams,
    Craig A. Berry, Dagfinn Ilmari Mannsaaker, Dan Collins, Daniel Dragan, David
    Golden, David Mitchell, Doug Bell, Dr.Ruud, Ed Avis, Ed J, Father
    Chrysostomos, Herbert Breunung, H.Merijn Brand, Hugo van der Sanden, Ivan
    Pozdeev, James E Keenan, Jan Dubois, Jarkko Hietaniemi, Jerry D. Hedden, Jim
    Cromie, John Peacock, John SJ Anderson, Karen Etheridge, Karl Williamson,
    kmx, Leon Timmermans, Ludovic E. R. Tolhurst-Cleaver, Lukas Mai, Martijn
    Lievaart, Matthew Horsfall, Mattia Barbon, Max Maischein, Mohammed El-Afifi,
    Nicholas Clark, Nicolas R., Niko Tyni, Peter John Acklam, Peter Martini,
    Peter Rabbitson, Pip Cet, Rafael Garcia-Suarez, Reini Urban, Ricardo Signes,
    Sawyer X, Shlomi Fish, Sisyphus, Stanislaw Pusep, Steffen Mueller, Stevan
    Little, Steve Hay, Sullivan Beck, Thomas Sibley, Todd Rinaldo, Tom Hukins,
    Tony Cook, Unicode Consortium, Victor Adam, Vincent Pit, Vladimir Timofeev,
    Yves Orton, Zachary Storer, Zefram.</p>
<p class="Pp">The list above is almost certainly incomplete as it is
    automatically generated from version control history. In particular, it does
    not include the names of the (very much appreciated) contributors who
    reported issues to the Perl bug tracker.</p>
<p class="Pp">Many of the changes included in this version originated in the
    CPAN modules included in Perl's core. We're grateful to the entire CPAN
    community for helping Perl to flourish.</p>
<p class="Pp">For a more complete list of all of Perl's historical contributors,
    please see the <i>AUTHORS</i> file in the Perl source distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Reporting_Bugs"><a class="permalink" href="#Reporting_Bugs">Reporting
  Bugs</a></h1>
If you find what you think is a bug, you might check the articles recently
  posted to the comp.lang.perl.misc newsgroup and the perl bug database at
  https://rt.perl.org/ . There may also be information at http://www.perl.org/ ,
  the Perl Home Page.
<p class="Pp">If you believe you have an unreported bug, please run the perlbug
    program included with your release. Be sure to trim your bug down to a tiny
    but sufficient test case. Your bug report, along with the output of
    <span class="Li">&quot;perl -V&quot;</span>, will be sent off to
    perlbug@perl.org to be analysed by the Perl porting team.</p>
<p class="Pp">If the bug you are reporting has security implications which make
    it inappropriate to send to a publicly archived mailing list, then see
    &quot;SECURITY VULNERABILITY CONTACT INFORMATION&quot; in perlsec for
    details of how to report the issue.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
The <i>Changes</i> file for an explanation of how to view exhaustive details on
  what changed.
<p class="Pp">The <i>INSTALL</i> file for how to build Perl.</p>
<p class="Pp">The <i>README</i> file for general stuff.</p>
<p class="Pp">The <i>Artistic</i> and <i>Copying</i> files for copyright
    information.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-11-01</td>
    <td class="foot-os">perl v5.28.2</td>
  </tr>
</table>
</body>
</html>
