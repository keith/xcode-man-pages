<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Generated from file '/Library/Caches/com.apple.xbs/Sources/tcl/tcl-129.100.1/tcl_ext/tcllib/tcllib/modules/ldap/ldap.man' by tcllib/doctools with format 'nroff'
   Copyright (c) 2004 Andreas Kupries <andreas_kupries@users.sourceforge.net>
   Copyright (c) 2004 Jochen Loewer <loewerj@web.de>
   Copyright (c) 2006 Michael Schlenker <mic42@users.sourceforge.net>
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
  	# Start an argument description
  .b
  	# define tabbing values for .AP
  
  	# BS - start boxed text
  	# ^y = starting y location
  	# ^b = 1
  	# BE - end boxed text (draw box now)
  	Draw four-sided box normally, but don't draw top of
  	box if the box started on an earlier page.
  	# VS - start vertical sidebar
  	# ^Y = starting y location
  	# ^v = 1 (for troff;  for nroff this doesn't matter)
  	# VE - end of vertical sidebar
  	# Special macro to handle page bottom:  finish off current
  	# box/sidebar if in box/sidebar mode, then invoked standard
  	# page bottom macro.
  	Draw three-sided box if this is the box's first page,
  	draw two sides but no top otherwise.
  	# DS - begin display
  	# DE - end display
  	# SO - start of list of standard options
  	# SE - end of list of standard options
  	# OP - start of full description for a single option
  	# CS - begin code excerpt
  	# CE - end code excerpt
 -->
<head>

<style>
@media (prefers-color-scheme: dark) {
  body {
    background: #000;
    color: #d0d0d0;
  }

  a, a:visited {
    color: #1899eb;
  }
}
</style>

  <meta charset="utf-8"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    div.Pp { margin: 1ex 0ex; }
    div.Nd, div.Bf, div.Op { display: inline; }
    span.Pa, span.Ad { font-style: italic; }
    span.Ms { font-weight: bold; }
    dl.Bl-diag > dt { font-weight: bold; }
    code.Nm, code.Fl, code.Cm, code.Ic, code.In, code.Fd, code.Fn,
    code.Cd { font-weight: bold; font-family: inherit; }
  </style>
  <title>ldap(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ldap(n)</td>
    <td class="head-vol">LDAP client</td>
    <td class="head-rtitle">ldap(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>

</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
ldap - LDAP client
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
package require <b>Tcl 8.4</b>
<p class="Pp">package require <b>ldap ?1.8?</b></p>
<p class="Pp"><b>::ldap::connect</b> <i>host</i> ?<i>port</i>?</p>
<p class="Pp"><b>::ldap::secure_connect</b> <i>host</i> ?<i>port</i>?</p>
<p class="Pp"><b>::ldap::disconnect</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::starttls</b> <i>handle</i> ?<i>cafile</i>?
    ?<i>certfile</i>? ?<i>keyfile</i>?</p>
<p class="Pp"><b>::ldap::bind</b> <i>handle</i> ?<i>name</i>?
  ?<i>password</i>?</p>
<p class="Pp"><b>::ldap::bindSASL</b> <i>handle</i> ?<i>name</i>?
    ?<i>password</i>?</p>
<p class="Pp"><b>::ldap::unbind</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::search</b> <i>handle</i> <i>baseObject</i>
    <i>filterString</i> <i>attributes</i> <i>options</i></p>
<p class="Pp"><b>::ldap::searchInit</b> <i>handle</i> <i>baseObject</i>
    <i>filterString</i> <i>attributes</i> <i>options</i></p>
<p class="Pp"><b>::ldap::searchNext</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::searchEnd</b> <i>handle</i></p>
<p class="Pp">::ldap::searchInit</p>
<p class="Pp"><b>::ldap::modify</b> <i>handle</i> <i>dn</i>
    <i>attrValToReplace</i> ?<i>attrToDelete</i>? ?<i>attrValToAdd</i>?</p>
<p class="Pp"><b>::ldap::modifyMulti</b> <i>handle</i> <i>dn</i>
    <i>attrValToReplace</i> ?<i>attrValToDelete</i>? ?<i>attrValToAdd</i>?</p>
<p class="Pp"><b>::ldap::add</b> <i>handle</i> <i>dn</i>
  <i>attrValueTuples</i></p>
<p class="Pp"><b>::ldap::addMulti</b> <i>handle</i> <i>dn</i>
    <i>attrValueTuples</i></p>
<p class="Pp"><b>::ldap::delete</b> <i>handle</i> <i>dn</i></p>
<p class="Pp"><b>::ldap::modifyDN</b> <i>handle</i> <i>dn</i> <i>newrdn</i>
    ?<i>deleteOld</i>? ?<i>newSuperior</i>?</p>
<p class="Pp"><b>::ldap::info</b> <b>ip</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::info</b> <b>bound</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::info</b> <b>bounduser</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::info</b> <b>connections</b></p>
<p class="Pp"><b>::ldap::info</b> <b>tls</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::info</b> <b>saslmechanisms</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::info</b> <b>control</b> <i>handle</i></p>
<p class="Pp"><b>::ldap::info</b> <b>extensions</b> <i>extensions</i></p>
<p class="Pp"><b>::ldap::info</b> <b>whoami</b> <i>handle</i></p>
<p class="Pp"></p>
<pre>

</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b>ldap</b> package provides a Tcl-only client library for the LDAPv3
  protocol as specified in RFC 4511
  (<i>http://www.rfc-editor.org/rfc/rfc4511.txt</i>). It works by opening the
  standard (or secure) LDAP socket on the server, and then providing a Tcl API
  to access the LDAP protocol commands. All server errors are returned as Tcl
  errors (thrown) which must be caught with the Tcl <b>catch</b> command.
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt><b>::ldap::connect</b> <i>host</i> ?<i>port</i>?</dt>
  <dd>Opens a LDAPv3 connection to the specified <i>host</i>, at the given
      <i>port</i>, and returns a token for the connection. This token is the
      <i>handle</i> argument for all other commands. If no <i>port</i> is
      specified it will default to <b>389</b>.
    <p class="Pp">The command blocks until the connection has been established,
        or establishment definitely failed.</p>
  </dd>
  <dt><b>::ldap::secure_connect</b> <i>host</i> ?<i>port</i>?</dt>
  <dd>Like <b>::ldap::connect</b>, except that the created connection is secured
      by SSL. The port defaults to <b>636</b>. This command depends on the
      availability of the package <b>TLS</b>, which is a SSL binding for Tcl. If
      <b>TLS</b> is not available, then this command will fail.
    <p class="Pp">The command blocks until the connection has been established,
        or establishment definitely failed.</p>
  </dd>
  <dt><b>::ldap::disconnect</b> <i>handle</i></dt>
  <dd>Closes the ldap connection refered to by the token <i>handle</i>. Returns
      the empty string as its result.</dd>
  <dt><b>::ldap::starttls</b> <i>handle</i> ?<i>cafile</i>? ?<i>certfile</i>?
    ?<i>keyfile</i>?</dt>
  <dd>Start TLS negotiation on the connection denoted by <i>handle</i>. This is
      currently experimental and subject to change, more control over the TLS
      details will probably be exposed later, to allow users to fine tune the
      negotiation according to their security needs.</dd>
  <dt><b>::ldap::bind</b> <i>handle</i> ?<i>name</i>? ?<i>password</i>?</dt>
  <dd>This command authenticates the ldap connection refered to by the token in
      <i>handle</i>, with a user name and associated password. It blocks until a
      response from the ldap server arrives. Its result is the empty string.
      Both <i>name</i> and <i>passwd</i> default to the empty string if they are
      not specified. By leaving out <i>name</i> and <i>passwd</i> you can make
      an anonymous bind to the ldap server. You can issue <b>::ldap::bind</b>
      again to bind with different credentials.</dd>
  <dt><b>::ldap::bindSASL</b> <i>handle</i> ?<i>name</i>? ?<i>password</i>?</dt>
  <dd>This command uses SASL authentication mechanisms to do a multistage bind.
      Its otherwise identical to the standard <b>::ldap::bind</b>. This feature
      is currently experimental and subject to change. See the documentation for
      the <b>SASL</b> and the &quot;<i>SASL.txt</i>&quot; in the tcllib CVS
      repository for details how to setup and use SASL with openldap.</dd>
  <dt><b>::ldap::unbind</b> <i>handle</i></dt>
  <dd>This command asks the ldap server to release the last bind done for the
      connection refered to by the token in <i>handle</i>. The <i>handle</i> is
      invalid after the unbind, as the server closes the connection. So this is
      effectivly just a more polite disconnect operation.</dd>
  <dt><b>::ldap::search</b> <i>handle</i> <i>baseObject</i> <i>filterString</i>
    <i>attributes</i> <i>options</i></dt>
  <dd>This command performs a LDAP search below the <i>baseObject</i> tree using
      a complex LDAP search expression <i>filterString</i> and returns the
      specified <i>attributes</i> of all matching objects (DNs). If the list of
      <i>attributes</i> was empty all attributes are returned. The command
      blocks until it has received all results. The valid <i>options</i> are
      identical to the options listed for <b>::ldap::searchInit</b>.
    <p class="Pp">An example of a search expression is</p>
    <p class="Pp"></p>
    <pre>
    set filterString &quot;|(cn=Linus*)(sn=Torvalds*)&quot;
    </pre>
    <p class="Pp">The return value of the command is a list of nested
        dictionaries. The first level keys are object identifiers (DNs), second
        levels keys are attribute names. In other words, it is in the form</p>
    <p class="Pp"></p>
    <pre>
    {dn1 {attr1 {val11 val12 ...} attr2 {val21...} ...}} {dn2 {a1 {v11 ...} ...}} ...
    </pre>
    <p class="Pp"></p>
  </dd>
  <dt><b>::ldap::searchInit</b> <i>handle</i> <i>baseObject</i>
    <i>filterString</i> <i>attributes</i> <i>options</i></dt>
  <dd>This command initiates a LDAP search below the <i>baseObject</i> tree
      using a complex LDAP search expression <i>filterString</i>. The search
      gets the specified <i>attributes</i> of all matching objects (DNs). The
      command itself just starts the search, to retrieve the actual results, use
      <b>::ldap::searchNext</b>. A search can be terminated at any time by
      <b>::ldap::searchEnd</b>. This informs the server that no further results
      should be sent by sending and ABANDON message and cleans up the internal
      state of the search. Only one <b>::ldap::search</b> can be active at a
      given time, this includes the introspection commands <b>::ldap::info
      saslmechanisms</b>, <b>ldap::info control</b> and <b>ldap::info
      extensions</b>, which invoke a search internally. Error responses from the
      server due to wrong arguments or similar things are returned with the
      first <b>::ldap::searchNext</b> call and should be checked and dealed with
      there. If the list of requested <i>attributes</i> is empty all attributes
      will be returned. The parameter <i>options</i> specifies the options to be
      used in the search, and has the following format:
    <p class="Pp"></p>
    <pre>
    {-option1 value1 -option2 value2 ... }
    </pre>
    <p class="Pp">Following options are available:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt><b>-scope</b> base one sub</dt>
  <dd>Control the scope of the search to be one of <b>base</b>, <b>one</b>, or
      <b>sub</b>, to specify a base object, one-level or subtree search. The
      default is <b>sub</b>.</dd>
  <dt><b>-derefaliases</b> never search find always</dt>
  <dd>Control how aliases dereferencing is done. Should be one of <b>never</b>,
      <b>always</b>, <b>search</b>, or <b>find</b> to specify that aliases are
      never dereferenced, always dereferenced, dereferenced when searching, or
      dereferenced only when locating the base object for the search. The
      default is to never dereference aliases.</dd>
  <dt><b>-sizelimit</b> num</dt>
  <dd>Determines the maximum number of entries to return in a search. If
      specified as 0 no limit is enforced. The server may enforce a
      configuration dependent sizelimit, which may be lower than the one given
      by this option. The default is 0, no limit.</dd>
  <dt><b>-timelimit</b> seconds</dt>
  <dd>Asks the server to use a timelimit of <i>seconds</i> for the search. Zero
      means no limit. The default is 0, no limit.</dd>
  <dt><b>-attrsonly</b> boolean</dt>
  <dd>If set to 1 only the attribute names but not the values will be present in
      the search result. The default is to retrieve attribute names and
    values.</dd>
  <dt><b>-referencevar</b> varname</dt>
  <dd>If set the search result reference LDAPURIs, if any, are returned in the
      given variable. The caller can than decide to follow those references and
      query other LDAP servers for further results.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>::ldap::searchNext</b> <i>handle</i></dt>
  <dd>This command returns the next entry from a LDAP search initiated by
      <b>::ldap::searchInit</b>. It returns only after a new result is received
      or when no further results are available, but takes care to keep the event
      loop alive. The returned entry is a list with two elements: the first is
      the DN of the entry, the second is the list of attributes and values,
      under the format:
    <p class="Pp"></p>
    <pre>
    dn {attr1 {val11 val12 ...} attr2 {val21...} ...}
    </pre>
    <p class="Pp">The <b>::ldap::searchNext</b> command returns an empty list at
        the end of the search.</p>
    <p class="Pp"></p>
  </dd>
  <dt><b>::ldap::searchEnd</b> <i>handle</i></dt>
  <dd>This command terminates a LDAP search initiated by</dd>
  <dt>::ldap::searchInit</dt>
  <dd>the internal state so a new search can be initiated. If the client has not
      yet received all results, the client sends an ABANDON message to inform
      the server that no further results for the previous search should to be
      sent.
    <p class="Pp"></p>
  </dd>
  <dt><b>::ldap::modify</b> <i>handle</i> <i>dn</i> <i>attrValToReplace</i>
    ?<i>attrToDelete</i>? ?<i>attrValToAdd</i>?</dt>
  <dd>This command modifies the object <i>dn</i> on the ldap server we are
      connected to via <i>handle</i>. It replaces attributes with new values,
      deletes attributes, and adds new attributes with new values. All arguments
      are dictionaries mapping attribute names to values. The optional arguments
      default to the empty dictionary, which means that no attributes will be
      deleted nor added.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>dictionary <i>attrValToReplace</i> (in)</dt>
  <dd>No attributes will be changed if this argument is empty. The dictionary
      contains the new attributes and their values. They <i>replace all</i>
      attributes known to the object.</dd>
  <dt>dictionary <i>attrToDelete</i> (in)</dt>
  <dd>No attributes will be deleted if this argument is empty. The dictionary
      values are restrictions on the deletion. An attribute listed here will be
      deleted if and only if its current value at the server matches the value
      specified in the dictionary, or if the value in the dictionary is the
      empty string.</dd>
  <dt>dictionary <i>attrValToAdd</i> (in)</dt>
  <dd>No attributes will be added if this argument is empty. The dictionary
      values are the values for the new attributes.</dd>
</dl>
</div>
<p class="Pp">The command blocks until all modifications have completed. Its
    result is the empty string.</p>
<dl class="Bl-tag">
  <dt><b>::ldap::modifyMulti</b> <i>handle</i> <i>dn</i> <i>attrValToReplace</i>
    ?<i>attrValToDelete</i>? ?<i>attrValToAdd</i>?</dt>
  <dd>This command modifies the object <i>dn</i> on the ldap server we are
      connected to via <i>handle</i>. It replaces attributes with new values,
      deletes attributes, and adds new attributes with new values. All arguments
      are lists with the format:
    <p class="Pp"></p>
    <pre>
    attr1 {val11 val12 ...} attr2 {val21...} ...
    </pre>
    <p class="Pp">where each value list may be empty for deleting all
        attributes. The optional arguments default to empty lists of attributes
        to delete and to add.</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>list <i>attrValToReplace</i> (in)</dt>
  <dd>No attributes will be changed if this argument is empty. The dictionary
      contains the new attributes and their values. They <i>replace all</i>
      attributes known to the object.</dd>
  <dt>list <i>attrValToDelete</i> (in)</dt>
  <dd>No attributes will be deleted if this argument is empty. If no value is
      specified, the whole set of values for an attribute will be deleted.</dd>
  <dt>list <i>attrValToAdd</i> (in)</dt>
  <dd>No attributes will be added if this argument is empty.</dd>
</dl>
</div>
<p class="Pp">The command blocks until all modifications have completed. Its
    result is the empty string.</p>
<dl class="Bl-tag">
  <dt><b>::ldap::add</b> <i>handle</i> <i>dn</i> <i>attrValueTuples</i></dt>
  <dd>This command creates a new object using the specified <i>dn</i>. The
      attributes of the new object are set to the values in the list
      <i>attrValueTuples</i>. Multiple valuated attributes may be specified
      using multiple tuples. The command blocks until the operation has
      completed. Its result is the empty string.</dd>
  <dt><b>::ldap::addMulti</b> <i>handle</i> <i>dn</i>
    <i>attrValueTuples</i></dt>
  <dd>This command is the preferred one to create a new object using the
      specified <i>dn</i>. The attributes of the new object are set to the
      values in the dictionary <i>attrValueTuples</i> (which is keyed by the
      attribute names). Each tuple is a list containing multiple values. The
      command blocks until the operation has completed. Its result is the empty
      string.</dd>
  <dt><b>::ldap::delete</b> <i>handle</i> <i>dn</i></dt>
  <dd>This command removes the object specified by <i>dn</i>, and all its
      attributes from the server. The command blocks until the operation has
      completed. Its result is the empty string.</dd>
  <dt><b>::ldap::modifyDN</b> <i>handle</i> <i>dn</i> <i>newrdn</i>
    ?<i>deleteOld</i>? ?<i>newSuperior</i>?</dt>
  <dd>] This command moves or copies the object specified by <i>dn</i> to a new
      location in the tree of object. This location is specified by
      <i>newrdn</i>, a <i>relative</i> designation, or by <i>newrdn</i> and
      <i>newSuperior</i>, a <i>absolute</i> designation. The optional argument
      <i>deleteOld</i> defaults to <b>true</b>, i.e. a move operation. If
      <i>deleteOld</i> is not set, then the operation will create a copy of
      <i>dn</i> in the new location. The optional argument <i>newSuperior</i>
      defaults an empty string, meaning that the object must not be relocated in
      another branch of the tree. If this argument is given, the argument
      <i>deleteOld</i> must be specified also. The command blocks until the
      operation has completed. Its result is the empty string.</dd>
  <dt><b>::ldap::info</b> <b>ip</b> <i>handle</i></dt>
  <dd>This command returns the IP address of the remote LDAP server the handle
      is connected to.</dd>
  <dt><b>::ldap::info</b> <b>bound</b> <i>handle</i></dt>
  <dd>This command returns 1 if a handle has successfully completed a
      <b>::ldap::bind</b>. If no bind was done or it failed, a 0 is
    returned.</dd>
  <dt><b>::ldap::info</b> <b>bounduser</b> <i>handle</i></dt>
  <dd>This command returns the username used in the bind operation if a handle
      has successfully completed a <b>::ldap::bind</b>. If no bound was done or
      it failed, an empty string is returned.</dd>
  <dt><b>::ldap::info</b> <b>connections</b></dt>
  <dd>This command returns all currently existing ldap connection handles.</dd>
  <dt><b>::ldap::info</b> <b>tls</b> <i>handle</i></dt>
  <dd>This command returns 1 if the ldap connection <i>handle</i> used TLS/SSL
      for connection via <b>ldap::secure_connect</b> or completed
      <b>ldap::starttls</b>, 0 otherwise.</dd>
  <dt><b>::ldap::info</b> <b>saslmechanisms</b> <i>handle</i></dt>
  <dd>Return the supported SASL mechanisms advertised by the server. Only valid
      in a bound state (anonymous or other).</dd>
  <dt><b>::ldap::info</b> <b>control</b> <i>handle</i></dt>
  <dd>Return the supported controls advertised by the server as a list of OIDs.
      Only valid in a bound state. This is currently experimental and subject to
      change.</dd>
  <dt><b>::ldap::info</b> <b>extensions</b> <i>extensions</i></dt>
  <dd>Returns the supported LDAP extensions as list of OIDs. Only valid in a
      bound state. This is currently experimental and subject to change.</dd>
  <dt><b>::ldap::info</b> <b>whoami</b> <i>handle</i></dt>
  <dd>Returns authzId for the current connection. This implements the RFC 4532
      protocol extension.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
A small example, extracted from the test application coming with this code.
<p class="Pp"></p>
<pre>
    package require ldap
    # Connect, bind, add a new object, modify it in various ways
    set handle [ldap::connect localhost 9009]
    set dn &quot;cn=Manager, o=University of Michigan, c=US&quot;
    set pw secret
    ldap::bind $handle $dn $pw
    set dn &quot;cn=Test User,ou=People,o=University of Michigan,c=US&quot;
    ldap::add $handle $dn {
	objectClass     OpenLDAPperson
	cn              {Test User}
	mail            test.user@google.com
	uid             testuid
	sn              User
	telephoneNumber +31415926535
	telephoneNumber +27182818285
    }
    set dn &quot;cn=Another User,ou=People,o=University of Michigan,c=US&quot;
    ldap::addMulti $handle $dn {
	objectClass     {OpenLDAPperson}
	cn              {{Anotther User}}
	mail            {test.user@google.com}
	uid             {testuid}
	sn              {User}
	telephoneNumber {+31415926535 +27182818285}
    }
    # Replace all attributes
    ldap::modify $handle $dn [list drink icetea uid JOLO]
    # Add some more
    ldap::modify $handle $dn {} {} [list drink water  drink orangeJuice pager &quot;+1 313 555 7671&quot;]
    # Delete
    ldap::modify $handle $dn {} [list drink water  pager &quot;&quot;]
    # Move
    ldap::modifyDN $handle $dn &quot;cn=Tester&quot;
    # Kill the test object, and shut the connection down.
    set dn &quot;cn=Tester,ou=People,o=University of Michigan,c=US&quot;
    ldap::delete $handle $dn
    ldap::unbind     $handle
    ldap::disconnect $handle
</pre>
<p class="Pp">And a another example, a simple query, and processing the
  results.</p>
<p class="Pp"></p>
<pre>
    package require ldap
    set handle [ldap::connect ldap.acme.com 389]
    ldap::bind $handle
    set results [ldap::search $handle &quot;o=acme,dc=com&quot; &quot;(uid=jdoe)&quot; {}]
    foreach result $results {
	foreach {object attributes} $result break
	# The processing here is similar to what 'parray' does.
	# I.e. finding the longest attribute name and then
	# generating properly aligned output listing all attributes
	# and their values.
	set width 0
	set sortedAttribs {}
	foreach {type values} $attributes {
	    if {[string length $type] &gt; $width} {
		set width [string length $type]
	    }
	    lappend sortedAttribs [list $type $values]
	}
	puts &quot;object='$object'&quot;
	foreach sortedAttrib  $sortedAttribs {
	    foreach {type values} $sortedAttrib break
	    foreach value $values {
		regsub -all &quot;\[\x01-\x1f\]&quot; $value ? value
		puts [format &quot;  %-${width}s %s&quot; $type $value]
	    }
	}
	puts &quot;&quot;
    }
    ldap::unbind $handle
    ldap::disconnect $handle
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
This document, and the package it describes, will undoubtedly contain bugs and
  other problems. Please report such in the category <i>ldap</i> of the
  <i>Tcllib SF Trackers</i> [http://sourceforge.net/tracker/?group_id=12883].
  Please also report any ideas for enhancements you may have for either package
  and/or documentation. One know bug is the usage of <b>vwait</b> inside the
  dispatch mechanism, which makes it currently unsafe to use this code in code
  that also enters the event loop.
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
directory access, internet, ldap, ldap client, protocol, rfc 2251, rfc 4511,
  x.500
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
Networking
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>
Copyright (c) 2004 Andreas Kupries &lt;andreas_kupries@users.sourceforge.net&gt;
Copyright (c) 2004 Jochen Loewer &lt;loewerj@web.de&gt;
Copyright (c) 2006 Michael Schlenker &lt;mic42@users.sourceforge.net&gt;
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.6.9</td>
    <td class="foot-os">ldap</td>
  </tr>
</table>
</body>
</html>
